function post(t,e,i){var n=i.value,s=t.constructor.name+app.MessageCenter.splite+e,a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=n.call.apply(n,[this].concat(t));return i};return a.funcallname=s,i.value=a,i}function callLater(t,e,i){var n=i.value,s="$"+e+"CL",a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];delete this[s],n.call.apply(n,[this].concat(t))},r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this[s]||(egret.callLater.apply(egret,[a,this].concat(t)),this[s]=!0)};return i.value=r,i}function callDelay(t){var e=function(e,i,n){var s=n.value,a="$isDelay"+i,r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this[a]=!1,s.call.apply(s,[this].concat(t))},o=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this[a]||(this[a]=!0,egret.setTimeout.apply(egret,[r,this,t].concat(e)))};return n.value=o,n};return e}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(s,a){function r(t){try{l(n.next(t))}catch(e){a(e)}}function o(t){try{l(n["throw"](t))}catch(e){a(e)}}function l(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(r,o)}l((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(s)throw new TypeError("Generator is already executing.");for(;l;)try{if(s=1,a&&(r=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(n){i=[6,n],a=0}finally{s=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},app;!function(t){var e=function(){function t(){}return t.ATTACK="a",t.CAST="c",t.STAND="s",t.STAND1="s1",t.RUN="r",t.WALK="w",t.DIE="d",t.HIT="h",t}();t.EntityAction=e,__reflect(e.prototype,"app.EntityAction");var i=function(){function t(){}return t.SA_IDLE=0,t.SA_WALK=1,t.SA_RUN=2,t.BUFF_ADD=100,t.BUFF_DELECT=101,t.BUFF_DELECT_TYPE=102,t.BUFF_UPDATE=103,t.BUFF_UPDATE_EFF=104,t.NAME_UPDATE_COLOR=105,t.TITLE_UPDATE=106,t.AM_DAMAGE=61,t.UPDATA_NAME_TYPE=62,t.SAM_IDLE=20001,t.SAM_WALK=20002,t.SAM_RUN=20010,t.SAM_SPELL=20003,t.SAM_ALIVE=20004,t.SAM_DISAPPEAR=20005,t.SAM_NOWDEATH=20006,t.SAM_REUSE=20007,t.SAM_COLLECT=20008,t.SAM_SPRnumber=20009,t.SAM_UNDER_ATTACK=20011,t.SAM_READYJUMP=20012,t.SAM_JUMP=20013,t.SAM_PREPARE_SKILL=20014,t.SAM_BREAL_SKILL_PREPARE=20015,t.SAM_NORMHIT=20016,t.SAM_STOP=20017,t.SAM_TRAFFIC_MOVE=20018,t.SAM_TRAFFIC_OFF=20019,t.SAM_UNDER_ATTACK_FLY=20020,t.SAM_SPECIAL_MOVE=20021,t.SAM_ROTATE=20022,t.SAM_SPRnumber_FLY=20023,t.SAM_APPEAR_TARGET=20024,t.SAM_CONJURE=20025,t.SAM_UNDER_RECRUIT=40011,t.SAM_TELEPORTING=40012,t}();t.StandardActions=i,__reflect(i.prototype,"app.StandardActions");var n=function(){function t(){}return t.SAM_WALK_TIME=750,t.SAM_RUN_TIME=750,t.SAM_NORMHIT_TIME=900,t.SAM_SPELL_TIME=1e3,t.SAM_UNDER_ATTACK_TIME=750,t.SAM_IDLE_TIME=300,t.SAM_NOWDEATH_TIME=750,t.SAM_SPECIAL_MOVE_TIME=750,t.SAM_TELEPORTING_TIME=3,t.SAM_UNDER_RECRUIT_TIME=3e3,t}();t.StandardActionsTime=n,__reflect(n.prototype,"app.StandardActionsTime");var s=function(){function t(){}return t.IDLE=0,t.ATTACK=1e3,t.PICKUP=1001,t.WALK=1002,t.TURN=1003,t.DIR=1004,t.LOOK=1005,t}();t.PlayerAction=s,__reflect(s.prototype,"app.PlayerAction")}(app||(app={}));var CharEnum;!function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"}(CharEnum||(CharEnum={}));var CharMcOrder;!function(t){t[t.BODY=1]="BODY",t[t.WEAPON=2]="WEAPON",t[t.WING=3]="WING",t[t.FOUR=4]="FOUR",t[t.MEDAL=5]="MEDAL",t[t.HEIR=6]="HEIR",t[t.SOUL=7]="SOUL",t[t.ZHANLING=8]="ZHANLING",t[t.HAIR=9]="HAIR",t[t.BODYEFF=10]="BODYEFF",t[t.WEAPONEFF=11]="WEAPONEFF",t[t.SPECIAL=12]="SPECIAL"}(CharMcOrder||(CharMcOrder={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=100,e.percentHeight=100,e.touchEnabled=!1,e}return __extends(e,t),e}(eui.Group);t.BaseEuiLayer=e,__reflect(e.prototype,"app.BaseEuiLayer")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.ins=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;if(!i._instance){var n=t.length;0==n?i._instance=new i:1==n?i._instance=new i(t[0]):2==n?i._instance=new i(t[0],t[1]):3==n?i._instance=new i(t[0],t[1],t[2]):4==n?i._instance=new i(t[0],t[1],t[2],t[3]):5==n&&(i._instance=new i(t[0],t[1],t[2],t[3],t[4]))}return i._instance},t}();t.BaseClass=e,__reflect(e.prototype,"app.BaseClass")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.observe=function(e,i,n){void 0===n&&(n=void 0),t.MessageCenter.addListener(e,i,this,n)},i.prototype.removeObserve=function(){t.MessageCenter.ins().removeAll(this)},i.prototype.addTouchEvent=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_TAP,t,e)},i.prototype.addBeginEvent=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_BEGIN,t,e)},i.prototype.removeBeginEvent=function(t,e){t&&t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e,this)},i.prototype.addTouchEndEvent=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_END,t,e)},i.prototype.removeTouchEndEvent=function(t,e){t&&t.removeEventListener(egret.TouchEvent.TOUCH_END,e,this)},i.prototype.addChangeEvent=function(t,e){var i=this;t&&t instanceof eui.TabBar?this.addEvent(egret.TouchEvent.CHANGE,t,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.call.apply(e,[i].concat(t))}):this.addEvent(egret.TouchEvent.CHANGE,t,e)},i.prototype.removeChangeEvent=function(t,e){t&&t.removeEventListener(egret.TouchEvent.CHANGE,e,this)},i.prototype.addChangingEvent=function(t,e){this.addEvent(egret.TouchEvent.CHANGING,t,e)},i.prototype.removeChangingEvent=function(t,e){t&&t.removeEventListener(egret.TouchEvent.CHANGING,e,this)},i.prototype.addMouseMoveEvent=function(t,e){gamelib.DeviceUtils.IsMobile||this.addEvent(mouse.MouseEvent.MOUSE_OUT,t,e)},i.prototype.removeMouseMoveEvent=function(t,e){gamelib.DeviceUtils.IsMobile||t&&t.removeEventListener(mouse.MouseEvent.MOUSE_OUT,e,this)},i.prototype.addMouseOverEvent=function(t,e){gamelib.DeviceUtils.IsMobile?this.addTouchEvent(t,e):this.addEvent(mouse.MouseEvent.MOUSE_OVER,t,e)},i.prototype.removeMouseOverEvent=function(t,e){gamelib.DeviceUtils.IsMobile?this.removeTouchEvent(t,e):t&&t.removeEventListener(mouse.MouseEvent.MOUSE_OVER,e,this)},i.prototype.addLeftDownEvent=function(t,e){gamelib.DeviceUtils.IsMobile||this.addEvent(mouse.MouseEvent.LEFT_DOWN,t,e)},i.prototype.removeLeftDownEvent=function(t,e){gamelib.DeviceUtils.IsMobile||t&&t.removeEventListener(mouse.MouseEvent.LEFT_DOWN,e,this)},i.prototype.addRightDownEvent=function(t,e){gamelib.DeviceUtils.IsMobile||this.addEvent(mouse.MouseEvent.RIGHT_DOWN,t,e)},i.prototype.removeRightDownEvent=function(t,e){t&&t.removeEventListener(mouse.MouseEvent.RIGHT_DOWN,e,this)},i.prototype.addDoubleDownEvent=function(t,e){this.addEvent(mouse.MouseEvent.MOUSE_DOUBLECLICK,t,e)},i.prototype.removeDoubleDownEvent=function(t,e){t&&t.removeEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,e,this)},i.prototype.addTouchMoveEvent=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_MOVE,t,e)},i.prototype.removeTouchMoveEvent=function(t,e){t&&t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,e,this)},i.prototype.addEvent=function(t,e,i){return e?void e.addEventListener(t,i,this):void console.error("不存在绑定对象")},i.prototype.removeTouchEvent=function(t,e){t&&t.removeEventListener(egret.TouchEvent.TOUCH_TAP,e,this)},i.prototype.$onClose=function(){var t=function(e){for(var n=0;n<e.numChildren;n++){var s=e.getChildAt(n);s instanceof i?s.$onClose():s instanceof egret.DisplayObjectContainer&&t(s)}};t(this),this.removeObserve()},i}(eui.Component);t.BaseView=e,__reflect(e.prototype,"app.BaseView")}(app||(app={}));var app;!function(t){var e=function(e){function n(){var n=e.call(this)||this;return n.floatingBloodAry=[],n.floatingTime=0,n.isShowGuanZhi=!1,n._dir=0,n._state=t.EntityAction.STAND,n._charName="",n._isDead=!1,n.deadChar=!1,n.charEntityType=t.EntityFilter.no,n.m_dwNextActionTime=0,n.m_nAction=-1,n.hasDir=[CharMcOrder.BODY,CharMcOrder.BODYEFF,CharMcOrder.HAIR,CharMcOrder.WEAPON,CharMcOrder.WEAPONEFF,CharMcOrder.WING,CharMcOrder.SOUL,CharMcOrder.ZHANLING],n._disOrder={},n._mcFileName={},n.m_MoveAction=new i,n._bodyContainer=new egret.DisplayObjectContainer,n.addChild(n._bodyContainer),n._body=t.ObjectPool.pop("app.MovieClip"),n._bodyContainer.addChild(n._body),n._disOrder[CharMcOrder.BODY]=n._body,n.m_CharMsgList=[],n.m_ActionMsgList=[],n.titleCantainer=new egret.DisplayObjectContainer,n.titleCantainer.touchEnabled=!1,n.titleCantainer.touchChildren=!1,n._bodyContainer.scaleX=n._bodyContainer.scaleY=1.25,n.addChild(n.titleCantainer),n}return __extends(n,e),Object.defineProperty(n.prototype,"recog",{get:function(){return this._recog},set:function(t){this._recog=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"propSet",{get:function(){return this._propSet},set:function(t){this._propSet=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"charName",{get:function(){return this._charName},set:function(t){this._charName=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDead",{get:function(){return this._isDead},set:function(t){this._isDead=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentX",{get:function(){return this._currentX},set:function(t){this._currentX=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentY",{get:function(){return this._currentY},set:function(t){this._currentY=t},enumerable:!0,configurable:!0}),n.prototype.updateModel=function(){},Object.defineProperty(n.prototype,"CharVisible",{get:function(){return this._bodyContainer.visible},set:function(t){this._bodyContainer.visible=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dir",{get:function(){return this._dir},set:function(t){t=+t%8,this._dir!=t&&(this._dir=t,this.loadBody())},enumerable:!0,configurable:!0}),n.prototype.getResDir=function(t){var e=2*(this.dir-4);return 0>e&&(e=0),this.dir-e},n.prototype.playAction=function(t,e){this._state=t,this.playComplete=e,this._body.clearComFun(),this.loadBody()},n.prototype.loadBody=function(){this._body.stop(),this._body.addEventListener(egret.Event.CHANGE,this.playBody,this),this.hasDir.indexOf(CharMcOrder.BODY)>=0?this.loadFile(this._body,this.getFileName(CharMcOrder.BODY),CharMcOrder.BODY):this.playFile(this._body,this.getFileName(CharMcOrder.BODY))},n.prototype.loadOther=function(t){var e=this.getMc(t);e&&(e.stop(),e.addEventListener(egret.Event.CHANGE,this.syncFrame,this),this.loadFile(e,this.getFileName(t),t))},n.prototype.loadNoDir=function(t){var e=this.getMc(t);this.playFile(e,this.getFileName(t))},n.prototype.getFileName=function(t){return this._mcFileName[t]},n.prototype.playFile=function(t,e){t.playFileChar(e,-1,null,!1)},n.prototype.loadFile=function(e,i,s){if(i&&!(n.ACTION_ODER[s]&&n.ACTION_ODER[s].indexOf(this._state)<0)){var a=this.getResDir(s),r=i+"_"+a+this._state;e.newFrameRate=0,(this._state!=t.EntityAction.STAND||s!=CharMcOrder.BODYEFF&&s!=CharMcOrder.WEAPONEFF)&&(this._state==t.EntityAction.HIT?e.newFrameRate=10:this._state==t.EntityAction.STAND?e.newFrameRate=3:this._state==t.EntityAction.ATTACK&&this.isCharRole?e.newFrameRate=8*this.propSet.getAckRate():e.newFrameRate=8),this.propSet.getRace()==t.ActorRace.Human||this.propSet.getRace()==t.ActorRace.dummy?e.m_gather=s==CharMcOrder.HAIR||s==CharMcOrder.WEAPONEFF||s==CharMcOrder.WEAPON||s==CharMcOrder.BODY||s==CharMcOrder.BODYEFF:e.scaleX=this.dir>4?-1:1;var o=this.propSet.getSuit();if(o){if(this._body.y=3,s==CharMcOrder.HAIR)return;e.playFileChar8(r,this.playCount(),e==this._body?this.playComplete:null,!1)}else this._body.y=0,e.playFileChar(r,this.playCount(),e==this._body?this.playComplete:null,!1)}},n.prototype.getNormhitTime=function(){return t.StandardActionsTime.SAM_NORMHIT_TIME/this.propSet.getAckRate()},n.prototype.playBody=function(e){var i=1;this._body.gotoAndPlay(i,this.playCount()),this.removeBodyEvent(this._body);for(var n in this._disOrder){var s=this._disOrder[n];s!=this._body&&this.hasDir.indexOf(+n)>=0&&s instanceof t.MovieClip&&this.loadOther(+n)}this.sortEffect()},n.prototype.syncFrame=function(t){this.removeMcEvent(t.currentTarget),t.currentTarget.gotoAndPlay(this._body.currentFrame,this.playCount())},n.prototype.removeBodyEvent=function(t){t.removeEventListener(egret.Event.CHANGE,this.playBody,this)},n.prototype.removeMcEvent=function(t){t.removeEventListener(egret.Event.CHANGE,this.syncFrame,this)},n.prototype.onImgLoaded=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.COMPLETE,this.onImgLoaded,this),e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2},n.prototype.playCount=function(){return-1},n.prototype.addMc=function(e,i){if(this._mcFileName[e]!=i){this._mcFileName[e]=i;var n=this._disOrder[e];return n||(n=t.ObjectPool.pop("app.MovieClip"),this._bodyContainer.addChild(n),this._disOrder[e]=n),n instanceof t.MovieClip?(n.visible=!1,this.hasDir.indexOf(e)>=0?n==this._body?this.loadBody():this.loadOther(e):this.loadNoDir(e)):(n.addEventListener(egret.Event.COMPLETE,this.onImgLoaded,this),n.source=i),this.sortEffect(),n}},n.prototype.removeMc=function(e){if(e!=CharMcOrder.BODY&&e!=CharMcOrder.HAIR){var i=this._disOrder[e];i&&(i instanceof t.MovieClip?(this.removeMcEvent(i),i.destroy(),i=null):t.DisplayUtils.removeFromParent(i),delete this._mcFileName[e],delete this._disOrder[e])}},n.prototype.hideHair=function(){delete this._disOrder[CharMcOrder.HAIR]},n.prototype.getMc=function(t){return this._disOrder[t]},n.prototype.removeAll=function(){for(var e in this._disOrder){var i=this._disOrder[e];i!=this._body&&(i instanceof t.MovieClip?(this.removeMcEvent(i),i.destroy(),i=null):t.DisplayUtils.removeFromParent(i),delete this._mcFileName[e],delete this._disOrder[e])}this._body.dispose(),this.removeBodyEvent(this._body),delete this._mcFileName[CharMcOrder.BODY]},n.prototype.sortEffect=function(){var t=n.FRAME_ODER[this.dir];if(t)for(var e=t.length,i=0,s=0;e>s;s++){var a=t[s];this._disOrder[a]&&this._disOrder[a].parent&&(this._bodyContainer.addChildAt(this._disOrder[a],i),i+=1)}},Object.defineProperty(n.prototype,"weight",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isMy",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isCharRole",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDummyCharRole",{get:function(){return!1},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){this.removeAll()},n.prototype.advanceTime=function(e){if(this.m_nCurrentActionTime=e,this.moveObjDic){if(e>=this.m_dwNextActionTime)this.x=this.moveObjDic.endPoint.x,this.y=this.moveObjDic.endPoint.y,this.endMove();else{var i=e-this.moveObjDic.time,n=this.moveObjDic.vec.x*i,s=this.moveObjDic.vec.y*i;this.moveObjDic.time=e,this.x+=n,this.y+=s}this.onChange()}t.ViewManager.gamescene.map.setShadowXY(this.recog,this.x,this.y)},n.prototype.onChange=function(){var e=t.GameMap.point2Grip(this.x),i=t.GameMap.point2Grip(this.y);this.isVnvisible()?this.alpha=.6:t.GameMap.checkAlpha(e,i)?this.alpha=.7:this.alpha=1},n.prototype.disappear=function(){this.moveObjDic=null;for(var e=0;e<this.m_CharMsgList.length;e++)this.m_CharMsgList[e].clear(),t.ObjectPool.push(this.m_CharMsgList[e]);for(var e=0;e<this.m_ActionMsgList.length;e++)this.m_ActionMsgList[e].clear(),t.ObjectPool.push(this.m_ActionMsgList[e]);this.m_ActionMsgList.length=0,this.m_CharMsgList.length=0,this._bodyContainer.filters=null,this.filters=null,this._state=t.EntityAction.STAND,this.isDead=!1,this.deadChar=!1,this.currentX=0,this.currentY=0},n.prototype.postCharMessage=function(e,i,n,s,a){void 0===a&&(a=null);var r=t.ObjectPool.pop("app.ActorMessage");r.setInfo(e,i,n,s,a),this.m_CharMsgList.push(r)},n.prototype.deleteMessage=function(e){for(var i=this.m_CharMsgList.length-1;i>=0;i--){var n=void 0;this.m_CharMsgList[i].ident==e&&(n=this.m_CharMsgList.splice(i,1)[0],n.clear(),t.ObjectPool.push(n))}},n.prototype.moveTo=function(e,i,n){this.setCurrentXY(e,i),this.m_dwMoveStartTick=this.m_nCurrentActionTime;var s={x:t.GameMap.grip2Point(e),y:t.GameMap.grip2Point(i)},a={x:s.x-this.x,y:s.y-this.y},r=t.StandardActionsTime.SAM_WALK_TIME;a.x=a.x/r,a.y=a.y/r,this.moveObjDic={endPoint:s,vec:a,time:this.m_nCurrentActionTime+0},this.isMy&&t.SoundUtil.ins().playRun()},n.prototype.setXY=function(e,i){this.x=t.GameMap.grip2Point(e),this.y=t.GameMap.grip2Point(i),this.setCurrentXY(e,i)},n.prototype.endMove=function(){this.setCurrentXY(t.GameMap.point2Grip(this.x),t.GameMap.point2Grip(this.y)),this.moveObjDic=null,this.isMy&&t.SoundUtil.ins().stopRun()},n.prototype.setCurrentXY=function(e,i){this.isMy||this.isDead?this.isMy||t.EntityMgr.ins().delGridChar(this.recog):t.EntityMgr.ins().setGridChar(this.recog,this.currentX,this.currentY,e,i),this.currentX=e,this.currentY=i,this.propSet.setProperty(t.ActorPropertyModel.AP_X,e),this.propSet.setProperty(t.ActorPropertyModel.AP_Y,i)},n.prototype.isVnvisible=function(){return this.charEntityType==t.EntityFilter.invisible},n.CHAR_DEFAULT_HEIGHT=118,n.CHAR_DEFAULT_TYPEFACE=110,n.FRAME_ODER=[[CharMcOrder.WEAPON,CharMcOrder.WEAPONEFF,CharMcOrder.BODY,CharMcOrder.HAIR,CharMcOrder.BODYEFF,CharMcOrder.SPECIAL],[CharMcOrder.BODY,CharMcOrder.HAIR,CharMcOrder.WEAPON,CharMcOrder.WEAPONEFF,CharMcOrder.BODYEFF,CharMcOrder.SPECIAL],[CharMcOrder.BODY,CharMcOrder.HAIR,CharMcOrder.WEAPON,CharMcOrder.WEAPONEFF,CharMcOrder.BODYEFF,CharMcOrder.SPECIAL],[CharMcOrder.BODYEFF,CharMcOrder.BODY,CharMcOrder.HAIR,CharMcOrder.WEAPON,,CharMcOrder.WEAPONEFF,CharMcOrder.SPECIAL],[CharMcOrder.BODYEFF,CharMcOrder.WEAPON,CharMcOrder.WEAPONEFF,CharMcOrder.BODY,CharMcOrder.HAIR,CharMcOrder.SPECIAL],[CharMcOrder.WEAPON,CharMcOrder.WEAPONEFF,CharMcOrder.BODY,CharMcOrder.HAIR,CharMcOrder.BODYEFF,CharMcOrder.SPECIAL],[CharMcOrder.WEAPON,CharMcOrder.WEAPONEFF,CharMcOrder.BODY,CharMcOrder.HAIR,CharMcOrder.BODYEFF,CharMcOrder.SPECIAL],[CharMcOrder.WEAPON,CharMcOrder.WEAPONEFF,CharMcOrder.BODY,CharMcOrder.HAIR,CharMcOrder.BODYEFF,CharMcOrder.SPECIAL]],n.ACTION_ODER={8:[t.EntityAction.STAND,t.EntityAction.RUN,t.EntityAction.WALK,t.EntityAction.ATTACK]},n}(eui.Group);t.CharEffect=e,__reflect(e.prototype,"app.CharEffect");var i=function(){function t(){}return t}();t.MoveAction=i,__reflect(i.prototype,"app.MoveAction")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.flag=0,i.type=t,i.dict={},i.eVec=[],0==i.type&&egret.startTick(i.run,i),i}return __extends(i,e),i.ins=function(){return e.ins.call(this,0)},i.prototype.clear=function(){this.dict={},this.eVec.splice(0)},i.prototype.addListener=function(t,e,i){var n=this.dict[t];n?0!=this.flag&&(this.dict[t]=n=n.concat()):this.dict[t]=n=[];for(var s=0,a=n;s<a.length;s++){var r=a[s];if(r[0]==e&&r[1]==i)return}n.push([e,i])},i.prototype.removeListener=function(t,e,i){var n=this.dict[t];if(n){0!=this.flag&&(this.dict[t]=n=n.concat());for(var s=n.length,a=0;s>a;a++)if(n[a][0]==e&&n[a][1]==i){n.splice(a,1);break}0==n.length&&(this.dict[t]=null,delete this.dict[t])}},i.prototype.removeAll=function(t){for(var e=Object.keys(this.dict),i=0,n=e;i<n.length;i++){var s=n[i],a=this.dict[s];0!=this.flag&&(this.dict[s]=a=a.concat());for(var r=a.length,o=r-1;o>=0;o--)a[o][1]==t&&a.splice(o,1);0==a.length&&(this.dict[s]=null,delete this.dict[s])}},i.prototype.dispatch=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var s=t.ObjectPool.pop("app.MessageVo");s.type=e,s.param=i,0==this.type?this.eVec.push(s):1==this.type?this.dealMsg(s):t.Log.trace(t.LanguageUtils.language_Error_4)},i.prototype.run=function(t){for(var e=egret.getTimer();this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-e>5)););return!1},i.prototype.dealMsg=function(e){var i=this.dict[e.type];if(i){var n=i.length;if(0!=n){this.flag++;for(var s=0,a=i;s<a.length;s++){var r=a[s];debug.log("##处理监听 标识="+e.type+"   参数"+e.param+"  界面："+egret.getQualifiedClassName(r[1])),r[0].apply(r[1],e.param)}this.flag--,e.dispose(),t.ObjectPool.push(e)}}},i.setFunction=function(t,e,n,s){if(0==n.indexOf(s)&&"function"==typeof e[n]){var a=egret.getQualifiedClassName(e)+i.splite+n+i.msgIndex;i.msgIndex+=1;var r=e[n],o=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var s;e.length;return s=t?r.call.apply(r,[this].concat(e)):r.apply(void 0,e),("boolean"!=typeof s||s)&&i.ins().dispatch(a,s),s};return o.funcallname=a,e[n]=o,!0}return!1},i.compile=function(t,e){void 0===e&&(e="post");var n=t.prototype;for(var s in n)i.setFunction(!0,n,s,e)},i.addListener=function(t,e,n,s){return void 0===s&&(s=void 0),t.funcallname?(i.ins().addListener(t.funcallname,e,n),s&&t.call(s),!0):(debug.log("MessageCenter.addListener error:"+egret.getQualifiedClassName(n)),!1)},i.splite=".",i.msgIndex=1,i}(t.BaseClass);t.MessageCenter=e,__reflect(e.prototype,"app.MessageCenter");var i=function(){function t(){}return t.prototype.dispose=function(){this.type=null,this.param=null},t}();t.MessageVo=i,__reflect(i.prototype,"app.MessageVo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.filters=["TipsView","UIView1_1","GameSceneView","ChatMainUI","PlayFunView"],t.closeTopFilters=[],t._regesterInfo={},t._views={},t._hCode2Key={},t._opens=[],t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.clear=function(){this.closeAll(),this._views={}},i.prototype.reg=function(t,e){if(null!=t){var i=egret.getQualifiedClassName(t);this._regesterInfo[i]||(this._regesterInfo[i]=[t,e])}},i.prototype.destroy=function(t){var e=this._hCode2Key[t];delete this._views[e],delete this._hCode2Key[t]},i.prototype.getKey=function(e){var i="";if("string"==typeof e)i=e;else if("function"==typeof e)i=egret.getQualifiedClassName(e);else if(e instanceof t.BaseEuiView)for(var n=Object.keys(this._views),s=0,a=n.length;a>s;s++){var r=n[s];if(this._views[r]==e){i=r;break}}else debug.log(t.LanguageUtils.language_Error_5+e);return i},i.prototype.viewOpenCheck=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=!0,s=this._regesterInfo[t];if(null!=s){var a=s[0],r=a.openCheck;null!=r&&(n=r.apply(void 0,e))}return n},i.prototype.open=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var s=this.getKey(e);if(t.GameSocket.IsCrossService){var a=t.GlobalConfig.KFBanViewConfig.isDoNotOpen(s);if(a)return t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips139),null}if(!this.viewOpenCheck.apply(this,[s].concat(i)))return null;var r=this.openEasy(s,i);return-1==this.filters.indexOf(s)&&debug.log("开始打开窗口:"+s),r&&this.checkOpenView(r),r},i.prototype.openViewId=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var s=t.GlobalConfig.FunExhibitionConfig[e];if(s)if(this.isCheckOpen(s.isOpenNeed))if(i){var a=s.param;a?(i instanceof Array||(i=[i]),a instanceof Array||(a=[s.param]),this.open(s.view,i.concat(a))):this.open(s.view,i)}else this.open(s.view,s.param);else{var r=this.getOpenTips(s);""!=r&&t.UserTips.ins().showUITips(r)}},i.prototype.isCheckOpen=function(e){var i=t.EntityMgr.ins().getPayer;if(i){if(e){if(e.level&&i.propSet.getLevel()<e.level)return!1;if(e.openDay&&t.GlobalData.sectionOpenDay<e.openDay)return!1;if(e.zsLevel&&i.propSet.getZSLevel()<e.zsLevel)return!1;if(e.vip&&t.VipData.ins().getMyVipLv()<e.vip)return!1;if(e.office&&i.propSet.getOfficialPositicon()<e.office)return!1;if(e.smLevel){var n=t.GhostMgr.ins().ghostInfo,s=0;for(var a in n)s+=n[a].nLv;if(s<e.smLevel)return!1}return e.ngLevel&&i.propSet.getMeridians()<e.ngLevel?!1:!0}return!0}return!1},i.prototype.isCheckTabOpen=function(e){var i=t.EntityMgr.ins().getPayer;return i?e?e.openLevel&&i.propSet.getLevel()<e.openLevel?!1:e.openDay&&t.GlobalData.sectionOpenDay<e.openDay?!1:e.openCircle&&i.propSet.getZSLevel()<e.openCircle?!1:e.vip&&t.VipData.ins().getMyVipLv()<e.vip?!1:e.office&&i.propSet.getOfficialPositicon()<e.office?!1:!0:!0:!1},i.prototype.isCheckAllOpen=function(e){var i=t.EntityMgr.ins().getPayer;return i?e?i.propSet.getLevel()>=e.level&&t.GlobalData.sectionOpenDay>=e.openDay&&i.propSet.getZSLevel()>=e.zsLevel&&i.propSet.getGuildId()>=e.needGuild?!0:!1:!0:!1},i.prototype.isCheckClose=function(e){var i=t.EntityMgr.ins().getPayer;return i&&e?e.level&&i.propSet.getLevel()>=e.level?!0:e.openDay&&t.GlobalData.sectionOpenDay>=e.openDay?!0:e.zsLevel&&i.propSet.getZSLevel()>=e.zsLevel?!0:e.vip&&t.VipData.ins().getMyVipLv()>=e.vip?!0:e.office&&i.propSet.getOfficialPositicon()>=e.office?!0:!1:!1},i.prototype.openSystemTips=function(e,i){void 0===i&&(i=0);var n=t.EntityMgr.ins().getPayer;if(n){if(!e)return!0;if(e.openDay&&t.GlobalData.sectionOpenDay<e.openDay){var s=0==i?t.StringUtils.replace(t.LanguageUtils.language_Tips70,e.openDay):"|C:0xff7700&T:开服天数"+e.openDay+"天后开启|";return t.UserTips.ins().showUITips(s),!1}if(e.level&&n.propSet.getLevel()<e.level){var s=0==i?t.LanguageUtils.language_Tips69:"|C:0xff7700&T:"+e.level+"级后可提升|";return t.UserTips.ins().showUITips(s),!1}if(e.zsLevel&&n.propSet.getZSLevel()<e.zsLevel){var s=0==i?t.LanguageUtils.language_Tips69:"|C:0xff7700&T:转生等级"+e.zsLevel+"级后可提升|";return t.UserTips.ins().showUITips(s),!1}}return!0},i.prototype.getOpenTips=function(e){var i="",n=e.isOpenNeed,s=t.EntityMgr.ins().getPayer;return s&&(e.showTips?i+=e.showTips:(n.level&&s.propSet.getLevel()<n.level&&(i+=n.level+t.LanguageUtils.language_Common_1),n.openDay&&t.GlobalData.sectionOpenDay<n.openDay&&(i+=t.LanguageUtils.stateName[5]+n.openDay+t.LanguageUtils.language_Time_Days),n.vip&&t.VipData.ins().getMyVipLv()<n.vip&&(i+=t.LanguageUtils.language_Common_42+n.vip+t.LanguageUtils.language_Common_1),n.zsLevel&&s.propSet.getZSLevel()<n.zsLevel&&(i+=n.zsLevel+t.LanguageUtils.language_Common_0),""!=i&&(i+=t.LanguageUtils.language_Common_43+e.funName))),i="|C:0xff7700&T:"+i+"|"},i.prototype.openEasy=function(e,i){void 0===i&&(i=null);var n=this.getKey(e),s=this._views[n],a=this._regesterInfo[n];if(!s){if(Assert(a,"ViewManager.openEasy class "+n+" is null!!"))return;s=new a[0],this._views[n]=s,this._hCode2Key[s.hashCode]=n}if(null==s)return t.Log.trace("UI_"+n+"不存在"),null;for(var r=0,o=s.exclusionWins;r<o.length;r++){var l=o[r];this.closeEasy(l)}s.isShow()||s.isInit()?(s.addToParent(a[1]),s.isShow()||s.open.apply(s,i)):(s.addToParent(a[1]),s.initUI(),s.initData(),s.open.apply(s,i),s.initViewPos());var h=this._opens.indexOf(n);return h>=0&&this._opens.splice(h,1),this._opens.push(n),t.EventManager.ins().sendEvent(t.CompEvent.OPEN_VIEW,n),s},i.prototype.checkOpenView=function(e){e.isTopLevel&&e.parent!=t.LayerManager.UI_Popup&&t.SoundUtil.ins().playEffect(t.SoundUtil.WINDOW)},i.prototype.close=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.getKey(t);this.closeEx(n,e)},i.prototype.closeEx=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(e){var s=this.closeEasy(e,i);if(s){var a=this.getView(t.GaimItemWin);a&&a.closeView(s.hashCode),this.checkCloseView()}}},i.prototype.closeLastTopView=function(){for(var t=this._opens.length,e=t-1;e>=0;e--){var i=this.getView(this._opens[e]);if(i&&i.isTopLevel){this.close(i);break}}},i.prototype.closeEasy=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!this.isShow(t))return null;var n=this.getKey(t),s=this.getView(n);if(s){var a=this._opens.indexOf(n);a>=0&&this._opens.splice(a,1),s.close.apply(s,e),s.$onClose.apply(s),s.removeFromParent()}return s},i.prototype.escCloseView=function(){var e=[],i=t.GlobalConfig.PlayFunConfigPos;for(var n in i)i[n].esc&&e.push(i[n].view);for(var s,a=t.LayerManager.UI_Main.$children.length-1;a>=0;a--)if(s=egret.getQualifiedClassName(t.LayerManager.UI_Main.$children[a]),-1!=e.indexOf(s)){this.close(s),e=null;break}e=null},i.prototype.checkCloseView=function(){for(var e=!1,i=0,n=this._opens;i<n.length;i++){var s=n[i],a=this.getView(s);if(a&&a.isTopLevel){e=!0;break}}e||(t.SoundUtil.WINDOW_OPEN=!1,t.SceneManager.ins().getSceneName()==t.SceneManager.MAIN&&(this.isShow(t.GameSceneView)||this.openEasy(t.GameSceneView)))},Object.defineProperty(i,"gamescene",{get:function(){return i.ins().getView(t.GameSceneView)},enumerable:!0,configurable:!0}),i.prototype.getView=function(t){var e=this.getKey(t);return this._views[e]},i.prototype.closeAll=function(){for(;this._opens.length;)this.closeEasy(this._opens[0],[]);this.destroyAllNotShowView(),this.checkCloseView()},i.prototype.closeTopLevel=function(){var t=this.closeTopFilters;this.closeTopFilters=[];for(var e=this._opens.length-1;e>=0;e--){var i=this._opens[e];if(!(t.indexOf(i)>=0)){var n=this.getView(i),s=1e6;isNaN(parseInt(i))||(s=parseInt(i)),n&&n.isTopLevel&&this.closeEasy(i,[])}}this.checkCloseView()},i.prototype.openNum=function(){return this._opens.length},i.prototype.isShow=function(t){return this._opens.indexOf(this.getKey(t))>=0},i.prototype.hasTopView=function(){for(var t=0,e=this._opens;t<e.length;t++){var i=e[t],n=this.getView(i);if(n&&n.isTopLevel)return!0}return!1},i.prototype.destroyAllNotShowView=function(){for(var t in this._hCode2Key){var e=this._hCode2Key[t];if(-1==this._opens.indexOf(e)){var i=this.getView(e);i&&i.destoryView&&i.destoryView(!1)}}},i.prototype.destroyWin=function(){t.TimerManager.ins().isExists(this.delayDestroyWin,this)||t.TimerManager.ins().doTimer(2e4,1,this.delayDestroyWin,this)},i.prototype.delayDestroyWin=function(){t.TimerManager.ins().remove(this.delayDestroyWin,this),gamelib.os.RM.destroyWin()},i}(t.BaseClass);t.ViewManager=e,__reflect(e.prototype,"app.ViewManager")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.PT_CONST=1,t.PT_BASE=2,t.PT_FIGHT=3,t.PT_NUMBER=4,t.PT_SOCIAL=5,t.PT_LEVEL=6,t.PT_MONEY=7,t.PT_HPMP=8,t.PT_EXP=9,t.PT_COMBO=10,t.PT_MOUNT=11,t.PT_WORKDAY=12,t.PT_MODEL=13,t.PT_NAME=14,t.PT_WING=15,t.PT_VIP=16,t.AP_ACTOR_ID=0,t.AP_X=1,t.AP_Y=2,t.AP_BODY_ID=3,t.AP_FACE_ID=4,t.AP_DIR=5,t.AP_LEVEL=6,t.AP_HP=7,t.AP_MP=8,t.AP_STATE=9,t.AP_BODY_COLOR=10,t.AP_MAX_HP=11,t.AP_MAX_MP=12,t.AP_PHYSICAL_ATTACK_MIN=13,t.AP_PHYSICAL_ATTACK_MAX=14,t.AP_MAGIC_ATTACK_MIN=15,t.AP_MAGIC_ATTACK_MAX=16,t.AP_WIZARD_ATTACK_MIN=17,t.AP_WIZARD_ATTACK_MAX=18,t.AP_PHYSICAL_DEFENCE_MIN=19,t.AP_PHYSICAL_DEFENCE_MAX=20,t.AP_MAGIC_DEFENCE_MIN=21,t.AP_MAGIC_DEFENCE_MAX=22,t.AP_HIT_RATE=23,t.AP_DOGE_RATE=24,t.AP_MAGIC_HIT_RATE=25,t.AP_MAGIC_DOGERATE=26,t.AP_HP_RENEW=27,t.AP_MP_RENEW=28,t.AP_MOVE_SPEED=29,t.AP_ATTACK_SPEED=30,t.AP_LUCK=31,t.AP_CURSE=32,t.AP_TOXIC_DOGERATE=33,t.PETRIFICATION=34,t.PROP_ACTOR_MONSTER_BODY=35,t.PROP_ACTOR_TEAMFUBEN_OUTPUT=36,t.PROP_ACTOR_TEAMFUBEN_TEAMID=37,t.PROP_ACTOR_TEAMFUBEN_FBID=38,t.PROP_ACTOR_DEDUCT_DAMAGE=39,t.PROP_MONSTER_ASCRIPTIONID=40,t.AP_WEAPON=41,t.BODY_SUIT=42,t.PROP_ACTOR_SOLDIERSOULAPPEARANCE=43,t.PROP_ACTOR_WEAPON_ID=44,t.AP_PK_MODE=45,t.AP_SEX=46,t.AP_JOB=47,t.AP_EXP_L=48,t.AP_EXP_H=49,t.AP_PK_VALUE=50,t.AP_BAG_GRID_COUNT=51,t.AP_VIP_YELLOW_TIME=52,t.AP_ACTOR_FORCE=53,t.AP_BIND_COIN=54,t.AP_NOT_BIND_COIN=55,t.AP_BIND_YUANBAO=56,t.AP_NOT_BIND_YUANBAO=57,t.AP_MALICE_STATE=58,t.AP_GUILD_ID=59,t.AP_TEAM_ID=60,t.AP_SOCIAL_MASK=61,t.AP_GUILD_CON=62,t.AP_GM_LEVEL=63,t.AP_DEFAULT_SKILL_ID=64,t.AP_MAX_EXP_L=65,t.AP_MAX_EXP_H=66,t.AP_EXPLOIT_VALUE=67,t.PROP_ACTOR_CURCUSTOMTITLE=68,t.AP_EXPLOIT_TODAY_VALUE=69,t.AP_VIP_TYPE=70,t.AP_VALUE=71,t.AP_DRAW_YB_COUNT=72,t.AP_POWER_VALUE=73,t.AP_ACTOR_RECOVERSTATE=74,t.AP_PICKUPPET=75,t.PROP_ACTOR_DRAGONSOUL_VALIE=76,t.PROP_ACTOR_PERSONBOSS_JIFEN=77,t.AP_STORAGE_GRID_COUNT=78,t.AP_ACTOR_CIRCLE=79,t.AP_ACTOR_CIRCLE_SOUL=80,t.AP_XP_VALUE=81,t.AP_SIGN_IN=82,t.AP_POPULARITY=83,t.AP_ZJ_VALUE=84,t.PROP_ACTOR_CIRCLEPOTENTIALPOINT=85,t.PROP_ACTOR_JADEEXP=86,t.AP_ACTOR_WINGPOINT=87,t.AP_ACTOR_HEAD_TITLE=88,t.AP_DIMENSION_KEY=89,t.AP_WORK_DAY_1_H=90,t.AP_PICKUPPET_RANGE=91,t.AP_WORK_DAY_2_H=92,t.AP_WORK_DAY_3_L=93,t.AP_WORK_DAY_3_H=94,t.AP_ACTOR_SIGNIN=95,t.OFFICIAL_POSITION=96,t.AP_PROP_ACTOR_DEPOT_COIN=97,t.AP_ACTOR_VIP_GRADE=98,t.AP_ACTOR_VIP_POINT=99,t.PROP_ACTOR_XIUWEI=100,t.PROP_ACTOR_MARRY_INTIMACY_VALUE=101,t.PROP_ACTOR_FLYSHOES=102,t.PROP_ACTOR_BORATNUM=103,t.PROP_RECYCLE_INTEGRAL=104,t.PROP_MERIDIANS_LEVEL=105,t.PROP_TRADING_QUOTA=106,t.NEXT_ACK_SKILLID=107,t.AP_ZY_ID=108,t.PROP_ACTOR_CRIT_DAMAGE=109,t.PROP_ACTOR_CRIT_RATE=110,t.PROP_ACTOR_CRIT_POWER=111,t.PROP_ACTOR_DEDUCT_CRIT=112,t.PROP_ACTOR_SPEED_MEDICINE=113,t.PROP_AREASTATE1=114,t.PROP_AREASTATE2=115,t.PROP_ACTOR_GOLDEQ_ATTR1=116,t.PROP_ACTOR_GOLDEQ_ATTR2=117,t.PROP_ACTOR_GOLDEQ_ATTR3=118,t.PROP_ACTOR_GOLDEQ_ATTR4=119,t.PROP_ACTOR_GOLDEQ_ATTR5=120,t.PROP_ACTOR_GOLDEQ_ATTR6=121,t.PROP_ACTOR_GOLDEQ_ATTR7=122,t.PROP_ACTOR_GOLDEQ_ATTR8=123,t.PROP_ACTOR_CRIT_MUTRATE=124,t.FORBIDEN_TIME=125,t.PETSTATE=126,t.PROP_ACTOR_DAMAGEBONUS=127,t.PROP_ACTOR_IGNORDEFENCE=128,t.PROP_ACTOR_SUCKBLOOD=129,t.PROP_ACTOR_EXP_POWER=130,t.PROP_ACTOR_LOOTBINDCOIN=131,t.PROP_ACTOR_CUT=132,t.ACK_RATE=133,t.HP_bonus=134,t.PK_DAMAGE_REDUCTION=135,t.PROP_PROTECTION=136,t.WAR_CURRENCY=137,t.RESURRECTION_VIP=138,t.PROP_ACTOR_HALFMONTHS_INCREASEDAMAGE=139,t.PROP_ACTOR_FIRE_INCREASEDAMAGE=140,t.PROP_ACTOR_DAYBYDAY_INCREASEDAMAGE=141,t.PROP_ACTOR_ICESTORM_INCREASEDAMAGE=142,t.PROP_ACTOR_FIRERAIN_INCREASEDAMAGE=143,t.PROP_ACTOR_THUNDER_INCREASEDAMAGE=144,t.PROP_ACTOR_BLOODBITE_INCREASEDAMAGE=145,t.PROP_ACTOR_FIRESIGN_INCREASEDAMAGE=146,t.PROP_ACTOR_HALFMONTHS_REDUCEDAMAGE=147,t.PROP_ACTOR_FIRE_REDUCEDAMAGE=148,t.PROP_ACTOR_DAYBYDAY_REDUCEDAMAGE=149,t.PROP_ACTOR_ICESTORM_REDUCEDAMAGE=150,t.PROP_ACTOR_FIRERAIN_REDUCEDAMAGE=151,t.PROP_ACTOR_THUNDER_REDUCEDAMAGE=152,t.PROP_ACTOR_BLOODBITE_REDUCEDAMAGE=153,t.PROP_ACTOR_FIRESIGN_REDUCEDAMAGE=154,t.PROP_ACTOR_ROLE_CREATETIME=155,t.PROP_TRADING_QUOTA_L=156,t.PROP_TRADING_QUOTA_H=157,t.PROP_GUILD_LEVEL=158,t.PROP_ACTOR_CURCUSTOMTITLE2=159,t.numProperties=160,t.AP_ACTOR_VIP_LEVEL=10002,t.AP_ACTOR_HEAD_TITLE2=10003,t.ACTOR_NAME=8e5,t.ACTOR_NAME_COLOR=800001,t.ACTOR_MASTER_NAME=800002,t.ACTOR_DESC_NAME=800003,t.ACTOR_RACE=800004,t.NPC_FUNC=800005,t.NPC_TYPE=800006,t.MONSTER_POS=800007,t.ACTOR_FLYHPCHANGE=800008,t.ACTOR_GUILD_NAME=800009,t.ACTOR_CHENGHAONAME=800010,t.MONSTER_LIVETIMEOUT=800011,t.ACK_SKILLID=9e5,t.ACK_SKILLLEVEL=900001,t.ACTOR_HANDLER=900002,t.ACTOR_HANDLER_NAME=900003,t.ACTOR_FASHION_DISPLAY=900004,t.ACTOR_WEAPON_DISPLAY=900005,t
}();t.ActorPropertyModel=e,__reflect(e.prototype,"app.ActorPropertyModel")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isTopLevel=!1,t.exclusionWins=[],t.posArr=null,t.touchID=0,t._isInit=!1,t}return __extends(i,e),i.prototype.addExclusionWin=function(t){-1==this.exclusionWins.indexOf(t)&&this.exclusionWins.push(t)},i.prototype.isInit=function(){return this._isInit},i.prototype.isShow=function(){return null!=this.stage&&this.visible},i.prototype.addToParent=function(e){e.addChild(this),t.TimerManager.ins().remove(this.destoryView,this)},i.prototype.removeFromParent=function(){this.parent;t.DisplayUtils.removeFromParent(this),this.destoryView()},i.prototype.initUI=function(){this._isInit=!0,this.dragDrop()},i.prototype.initData=function(){},i.prototype.destroy=function(){},i.prototype.destoryView=function(e){void 0===e&&(e=!0),t.TimerManager.ins().removeAll(this),t.ViewManager.ins().destroy(this.hashCode)},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI&&(this.removeBeginEvent(this.dragDropUI,this.dragDropFunction),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.dragDropFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.dragDropFunction,this))},i.prototype.setPostData=function(t){this.posArr=t},i.prototype.initViewPos=function(){var e=egret.getQualifiedClassName(this);if(e){var i=t.UIOpenViewMode.getViewPos(e);i&&(this.posArr=i)}if(this.posArr){if(void 0!=this.posArr.left&&this.posArr.left>=0&&(this.posArr.right||(this.x=this.posArr.left)),void 0!=this.posArr.right&&this.posArr.right>=0&&(this.posArr.left||(this.x=t.StageUtils.ins().getWidth()-this.width-this.posArr.right)),void 0!=this.posArr.top&&this.posArr.top>=0&&(this.posArr.bottom||(this.y=this.posArr.top)),void 0!=this.posArr.bottom&&this.posArr.bottom>=0&&(this.posArr.top||(this.y=t.StageUtils.ins().getHeight()-this.height-this.posArr.bottom)),void 0!=this.posArr.horizontalCenter){var n=this.formatRelative(this.posArr.horizontalCenter,.5*t.StageUtils.ins().getWidth());this.posArr.left||this.posArr.right?void 0!=this.posArr.left&&this.posArr.left>=0?this.x=this.posArr.left:void 0!=this.posArr.right&&this.posArr.right>=0&&(this.x=t.StageUtils.ins().getWidth()-this.width-this.posArr.horizontalCenter):isNaN(n)||(this.x=Math.round((t.StageUtils.ins().getWidth()-this.width)/2+n))}if(void 0!=this.posArr.verticalCenter){var s=this.formatRelative(this.posArr.verticalCenter,.5*t.StageUtils.ins().getHeight());this.posArr.top||this.posArr.bottom?void 0!=this.posArr.top&&this.posArr.top>=0?this.y=this.posArr.top:void 0!=this.posArr.bottom&&this.posArr.bottom>=0&&(this.y=t.StageUtils.ins().getHeight()-this.height-this.posArr.verticalCenter):isNaN(s)||(this.y=Math.round((t.StageUtils.ins().getHeight()-this.height)/2+s))}}},i.prototype.formatRelative=function(t,e){if(!t||"number"==typeof t)return t;var i=t,n=i.indexOf("%");if(-1==n)return+i;var s=+i.substring(0,n);return.01*s*e},i.prototype.setVisible=function(t){this.visible=t},i.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},i.prototype.dragDrop=function(t){void 0===t&&(t=!0),this.dragDropUI&&(t?this.addBeginEvent(this.dragDropUI,this.dragDropFunction):this.removeBeginEvent(this.dragDropUI,this.dragDropFunction))},i.prototype.dragDropFunction=function(e){this.dragDropUI&&(e.type==egret.TouchEvent.TOUCH_BEGIN?(this.touchID=e.touchPointID,this.parent&&this.parent.addChild(this),this.clickPonit||(this.clickPonit=new egret.Point),this.clickPonit.x=e.stageX-e.target.x,this.clickPonit.y=e.stageY-e.target.y,this.globalToLocal(this.clickPonit.x,this.clickPonit.y,this.clickPonit),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.dragDropFunction,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.dragDropFunction,this)):e.type==egret.TouchEvent.TOUCH_MOVE?this.touchID==e.touchPointID&&(this.x=e.stageX-this.clickPonit.x,this.y=e.stageY-this.clickPonit.y):e.type==egret.TouchEvent.TOUCH_END&&this.touchID==e.touchPointID&&(t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.dragDropFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.dragDropFunction,this)))},i}(t.BaseView);t.BaseEuiView=e,__reflect(e.prototype,"app.BaseEuiView",["app.IBaseView"])}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.Game_Bg=new t.BaseEuiLayer,e.Game_Main=new t.BaseEuiLayer,e.Main_View=new t.BaseEuiLayer,e.UI_Main=new t.BaseEuiLayer,e.UI_Popup=new t.BaseEuiLayer,e.UI_Tips=new t.BaseEuiLayer,e.UI_Drag=new t.BaseEuiLayer,e.UI_Rocker=new t.BaseEuiLayer,e}();t.LayerManager=e,__reflect(e.prototype,"app.LayerManager")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._nameTxt=null,i.isShowBody=!0,i.canMove=!1,i.disappearTime=0,i._saviorBuff=[],i.modelBuffAr={},i.acktTime=0,i.touchEnabled=!1,i.touchChildren=!0,i.buffList={},i._buffTypeAry=[],i.buffType1Ary=[],i.buffType2Ary=[],i.buffType3Ary=[],i.buffType4Ary=[],i.buffType5Ary=[],i._saviorBuff=[],i.charEntityType=t.EntityFilter.no,i.alpha=1,i._bodyContainer.filters=null,i.filters=null,i.effs={},i._bodyContainer.touchEnabled=!0,i._bodyContainer.touchChildren=!1,i._chatTxt=new eui.Label,i._chatTxt.textAlign=egret.HorizontalAlign.CENTER,i._chatTxt.width=240,i._chatTxt.anchorOffsetX=120,i._chatTxt.size=14,i._chatTxt.stroke=1,i._chatTxt.strokeColor=0,i._chatTxt.textColor=15856626,i.titleCantainer.addChild(i._chatTxt),i._chatTxt.y=-160-i._chatTxt.height,i._chatTxt.visible=!1,i._chatTxt.touchEnabled=!1,i._hpBar=t.ViewManager.gamescene.map.getCharHpBar(),i._nameTxt=t.ViewManager.gamescene.map.getCharNameLable(),i._Shadow=t.ViewManager.gamescene.map.getShadow(),i}return __extends(i,e),Object.defineProperty(i.prototype,"buffTypeAry",{get:function(){return this._buffTypeAry.sort(function(t,e){return t.iconshow-e.iconshow})},enumerable:!0,configurable:!0}),i.prototype.getHpBuff=function(){for(var t=0;t<this._buffTypeAry.length;t++)if(79==this._buffTypeAry[t].id||80==this._buffTypeAry[t].id||81==this._buffTypeAry[t].id)return!0;return!1},i.prototype.getWeaponnSoulBuff=function(){for(var t=0;t<this._buffTypeAry.length;t++)if(244==this._buffTypeAry[t].id)return!0;return!1},Object.defineProperty(i.prototype,"saviorBuff",{get:function(){return this._saviorBuff},enumerable:!0,configurable:!0}),i.prototype.onEndClick=function(e){var i=t.EntityMgr.ins().getPayer;if(gamelib.DeviceUtils.IsMobile){if(e.stopPropagation(),!this.isMy)if(t.PlayerRoleAI.ins().isOpen){if(this.isCharRole||this.isMyPet){if(1==i.propSet.getPKtype())return void t.UserTips.ins().showUITips("|C:0xff7700&T:当前为和平攻击模式|");this.ackTips(this.recog,1)}this.ackTips(this.recog)}else if(t.PlayerRoleAI.ins().attackState){if((this.isCharRole||this.isMyPet)&&1==i.propSet.getPKtype())return void t.UserTips.ins().showUITips("|C:0xff7700&T:当前为和平攻击模式|");this.ackTips(this.recog,1)}else this.isDead||this.isMyPet&&5!=i.propSet.getPKtype()||(t.MapView.m_ack_Char&&t.MapView.m_ack_Char.recog!=this.recog&&t.EntityMgr.ins().getPayer.clearStarPatch(),t.DefaultMgr.ins().postUpdateTarget(this.recog))}else this.isMy||this.isMyPet&&5!=i.propSet.getPKtype()||this.isDead||t.MapView.m_Click_Type!=t.ClickClass.CLICK_LEFT||(t.MapView.m_ack_Char&&t.MapView.m_ack_Char.recog!=this.recog&&t.EntityMgr.ins().getPayer.clearStarPatch(),this.isCharRole?t.DefaultMgr.ins().postUpdateTarget(this.recog):(t.MapView.m_ack_Char=this,t.DefaultMgr.ins().postUpdateTarget(this.recog)))},i.prototype.ackTips=function(e,i){void 0===i&&(i=0);var n=t.EntityMgr.ins().getCharRole(e);if(n&&n.propSet){if(t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_System95+"|C:0xffffff&T:"+n.propSet.getName()+"||"),i){t.PlayerRoleAI.ins().stopAI(),t.MapView.m_ack_Char=n;var s=t.MapView.m_ack_Char.propSet.getName();t.UserTips.ins().showFightTips('开始自动PK"'+s+'"'),t.PlayerRoleAI.ins().attackState=!0}else t.MapView.m_ack_Char=n,t.PlayerRoleAI.ins().ackRecog=e;t.DefaultMgr.ins().postUpdateTarget(e)}},i.prototype.mouseMove=function(e){if(this.propSet)if(e.type==mouse.MouseEvent.MOUSE_OUT)this.filters=null,t.MapView.m_Move_Char=null,this.updateNameType(),t.UserTips.ins().closeTips(),this.isShowGuanZhi=!1;else if(e.type==mouse.MouseEvent.MOUSE_OVER){this.isShowGuanZhi=!0,this.filters=t.FilterUtil.WHITE();var i=t.EntityMgr.ins().getKeyDropEntity(this.currentX*t.GameMap.ROW+this.currentY);if(i&&i.length)for(var n=0;n<i.length;n++){var s=t.EntityMgr.ins().getDropItem(i[n]);if(s){s.showDrop();break}}if(!this.isMy){var a=t.EntityMgr.ins().getPayer;this.isDead||this.isMyPet&&5!=a.propSet.getPKtype()||(t.MapView.m_Move_Char=this),this.parent&&(this.isCharRole||this.isPet?this._nameTxt.visible=!t.GameMap.aaCannotSeeName:this._nameTxt.visible=!0)}}},i.prototype.initInfo=function(t,e,i){this.recog=t,this.charName=e,this.propSet=i,i&&(this.dir=i.getDir(),this._hpBar&&(this._hpBar.visible=!0),this._nameTxt.visible=!0,this.updateNameType(),this.updateRage(),this.updateGuanzhi(),this.updateRoleBuff())},i.prototype.updateNameType=function(){this.propSet&&(this.propSet.getRace()==t.ActorRace.Human||this.propSet.getRace()==t.ActorRace.enPet||this.propSet.getRace()==t.ActorRace.dummy?this.isMy||this.isMyPet?this._nameTxt.visible=!0:this._nameTxt.visible=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_ShowHuman)&&!t.GameMap.aaCannotSeeName?!0:!1:this.propSet.getRace()==t.ActorRace.Monster&&(this._nameTxt.visible=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_ShowMonster)?!0:!1))},i.prototype.updateChassis=function(){var e=t.GlobalConfig.Monster[this.propSet.getACTOR_ID()];e&&!this.isDummyCharRole?(e.nameQuality&&e.nameQuality>1?this._nameTxt.textColor=t.ColorUtil.GOODS_COLOR[e.nameQuality-1]?t.ColorUtil.GOODS_COLOR[e.nameQuality-1]:t.ColorUtil.NAME_WHITE:this._nameTxt.textColor=t.ColorUtil.NAME_WHITE,e.scale?this._bodyContainer.scaleX=this._bodyContainer.scaleY=e.scale/100:this._bodyContainer.scaleX=this._bodyContainer.scaleY=1,e.shadow?t.DisplayUtils.removeFromParent(this._Shadow):t.ViewManager.gamescene.map.addShadow(this._Shadow),e.chassis?(t.DisplayUtils.removeFromParent(this._Shadow),this.addChassis(e.chassis)):this.removeChassis()):t.DisplayUtils.removeFromParent(this._Shadow)},i.prototype.initialize=function(){this.isShowGuanZhi=!1,this._nameTxt.textColor=t.ColorUtil.NAME_WHITE,this._chatTxt.text="",this._chatTxt.visible=!1,this.floatingBloodAry.length=0,this.floatingTime=0,this.showBodyContainer(),this.updateModel(),this.dir=this.propSet.getValue(t.ActorPropertyModel.AP_DIR),this.setXY(this.propSet.getValue(t.ActorPropertyModel.AP_X),this.propSet.getValue(t.ActorPropertyModel.AP_Y)),this.onChange(),this.setCharName(this.propSet.getName()),this.setNameTxtColor(),this.updateMaxHp(this.propSet.getMaxHp()),this.updateHp(this.propSet.getHp()),this.titleCantainer.visible=!0,this.updateChassis(),this.updateLabelxy(),this.updateTitle(),this.updateCustomisedTitle(),this.updateLevel(),this.visible=!0,this.isCharRole&&this.updatePet()},i.prototype.resurgenceChar=function(){},i.prototype.updateSuit=function(t){},i.prototype.changePropertys=function(e){var i=e.getPropValueObj(),n=!1;for(var s in i){var a=parseInt(s);if(a==t.ActorPropertyModel.ACTOR_NAME){var r=i[a].split("\\"),o=r[0];this.propSet.setProperty(a,o),this.propSet.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,""),r.length>1&&""!=r[1]?(r[2]&&""!=r[2]?this.propSet.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,"<"+r[1]+">("+r[2]+")"):this.propSet.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,"<"+r[1]+">"),this.isMy&&t.MFRoleMgr.ins().setMyRoleInfoGuildName(r[1])):this.isMy&&t.MFRoleMgr.ins().setMyRoleInfoGuildName(""),this.setCharName(this.propSet.getName()+""),this.isMy&&t.MFRoleMgr.ins().setMyRoleInfoName(this.propSet.getName())}else a==t.ActorPropertyModel.BODY_SUIT?this.updateSuit(i[a]):(this.propSet.setProperty(a,i[a]),this.isCharRole&&a==t.ActorPropertyModel.AP_LEVEL&&(this.playUpgradeEff(),t.SoundUtil.ins().playMonster("shengji_mp3"),this.updateLevel()),a==t.ActorPropertyModel.ACTOR_NAME_COLOR||a==t.ActorPropertyModel.AP_MALICE_STATE||a==t.ActorPropertyModel.AP_PK_VALUE?this.setNameTxtColor():a==t.ActorPropertyModel.AP_HP?this.floatingBlood(e.getHp()):a==t.ActorPropertyModel.AP_MAX_HP?this.updateMaxHp(e.getMaxHp()):a==t.ActorPropertyModel.AP_BODY_ID||a==t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE?this.isCharRole?this.initBody(ResDirEnum.RES_DIR_BODY+this.propSet.getBodyStr()+"_"+this.propSet.getSex()):this.initBody(ResDirEnum.RES_DIR_MONSTER+"monster"+this.propSet.getBody()):a==t.ActorPropertyModel.AP_DIR||(a==t.ActorPropertyModel.ACTOR_FASHION_DISPLAY?this.isCharRole&&this.setBodyEff(this.propSet.getBodyEFFStr()):a==t.ActorPropertyModel.AP_DIR?this.isMy||(this.dir=this.propSet.getDir()):a==t.ActorPropertyModel.AP_WEAPON?this.propSet.getWeapon()?this.setWeaponFileName(this.propSet.getWeaponStr()):this.setWeaponFileName(null):a==t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY?this.setWeaponEff(this.propSet.getWeaponEffStr()):a==t.ActorPropertyModel.AP_FACE_ID?this.propSet.getFacte()?this.initHair(ResDirEnum.RES_DIR_HAIR+this.propSet.getFacteStr()+"_"+this.propSet.getSex()):this.initHair(null):a==t.ActorPropertyModel.AP_SEX?this.isCharRole?(this.propSet.getWeapon()?this.setWeaponFileName(this.propSet.getWeaponStr()):this.setWeaponFileName(null),this.propSet.getFacte()?this.initHair(ResDirEnum.RES_DIR_HAIR+this.propSet.getFacteStr()+"_"+this.propSet.getSex()):this.initHair(null),this.initBody(ResDirEnum.RES_DIR_BODY+this.propSet.getBodyStr()+"_"+this.propSet.getSex()),this.setBodyEff(this.propSet.getBodyEFFStr()),this.setWeaponEff(this.propSet.getWeaponEffStr())):this.initBody(ResDirEnum.RES_DIR_MONSTER+"monster"+this.propSet.getBody()):a==t.ActorPropertyModel.AP_LEVEL||a==t.ActorPropertyModel.AP_ACTOR_CIRCLE?(t.EquipMgr.ins().getRecommendEquip(),t.EventManager.ins().sendEvent(t.CompEvent.ROLE_LEVEL_CIRCLE)):a==t.ActorPropertyModel.AP_ACTOR_HEAD_TITLE?this.updateTitle():a==t.ActorPropertyModel.PROP_ACTOR_CURCUSTOMTITLE?this.updateCustomisedTitle():a==t.ActorPropertyModel.AP_ACTOR_VIP_GRADE?this.isCharRole&&this._hpBar.updateChaoWanVip(this.propSet.getVip()):a==t.ActorPropertyModel.OFFICIAL_POSITION?this.isCharRole&&this.updateGuanzhi():a==t.ActorPropertyModel.AP_DIMENSION_KEY?this.isMy&&t.DefaultMgr.ins().post_dimensionalKey():a==t.ActorPropertyModel.AP_GUILD_ID||a==t.ActorPropertyModel.PROP_AREASTATE1||a==t.ActorPropertyModel.PROP_AREASTATE2?n=!0:a==t.ActorPropertyModel.AP_ZY_ID?n=!0:a==t.ActorPropertyModel.AP_BIND_COIN||a==t.ActorPropertyModel.PROP_RECYCLE_INTEGRAL||a==t.ActorPropertyModel.AP_NOT_BIND_COIN||a==t.ActorPropertyModel.AP_BIND_YUANBAO||a==t.ActorPropertyModel.AP_NOT_BIND_YUANBAO?this.isMy&&t.DefaultMgr.ins().postMoneyChange():a==t.ActorPropertyModel.PETSTATE?this.isMy&&t.DefaultMgr.ins().post_petChange():a==t.ActorPropertyModel.AP_EXP_L||a==t.ActorPropertyModel.AP_EXP_H?this.isMy&&t.DefaultMgr.ins().post_playerExpChange():a==t.ActorPropertyModel.AP_VIP_TYPE?this.isMy&&t.DefaultMgr.ins().post_playerVIPChange():a==t.ActorPropertyModel.AP_ZJ_VALUE?this.isMy&&t.DefaultMgr.ins().post_playerBlessChange():a==t.ActorPropertyModel.AP_ACTOR_VIP_POINT?(this.isMy&&t.DefaultMgr.ins().post_playerViolentChange(),this.updateRage()):a==t.ActorPropertyModel.AP_GUILD_CON?(this.isMy&&t.DefaultMgr.ins().post_playerGuildConChange(),this.updateRage()):a==t.ActorPropertyModel.AP_STORAGE_GRID_COUNT?t.DefaultMgr.ins().post_warehouseChange():a==t.ActorPropertyModel.PETRIFICATION?(this.isCharRole&&i[a]&&this.isMy&&t.UserTips.ins().showFightTips(t.LanguageUtils.language_Omission_txt47),this.updateBodyType()):a==t.ActorPropertyModel.AP_ACTOR_RECOVERSTATE?this.isMy&&1==i[a]&&(t.DefaultMgr.ins().post_playerRectVisChange(),t.ViewManager.ins().open(t.JumpTipsView,t.LanguageUtils.language_Common_217,"app.SetUpView",[5])):a==t.ActorPropertyModel.AP_PICKUPPET&&this.isCharRole&&this.updatePet()))}n&&(this.isMy?(t.MapView.updateNaemColor(),t.EntityMgr.ins().updateMonsterName()):(this.deleteMessage(t.StandardActions.NAME_UPDATE_COLOR),this.postCharMessage(t.StandardActions.NAME_UPDATE_COLOR,0,0,0,null))),this.isMy&&t.DefaultMgr.ins().postPlayerChange(),this.recog==t.EntityMgr.ins().getPayer.lockTarget&&t.DefaultMgr.ins().postUpdateTarget(this.recog)},i.prototype.updatePet=function(){},i.prototype.isNoPickUp=function(){},i.prototype.updateLevel=function(){if(this.isCharRole&&this._hpBar){var t="x",e=this.propSet.getAP_JOB();e==JobConst.ZhanShi?t+="z":e==JobConst.FaShi&&(t+="f"),e==JobConst.DaoShi&&(t+="d"),t+=this.propSet.getLevel(),this._hpBar.updateLevel(t)}},i.prototype.initHair=function(t){var e=0;this.propSet&&(e=this.propSet.getSuit()),t&&""!=t&&!e?(this._hair.visible=!0,this._disOrder[CharMcOrder.HAIR]=this._hair,this.addMc(CharMcOrder.HAIR,t)):this.hideHair()},i.prototype.setCharName=function(t){var e=t+"",i=this.propSet.getGuildName();i&&""!=i&&(e=i+"\n"+t),this._nameTxt.text=e},i.prototype.setNameTxtColor=function(){},i.prototype.getNameColor=function(){return this._nameTxt.textColor},i.prototype.getMapColor=function(){return this.getNameColor()},i.prototype.updateHp=function(t){this._hpBar.value=Math.min(t,this._hpBar.maximum)},i.prototype.getHP=function(){return this._hpBar.value},i.prototype.updateMaxHp=function(t){this._hpBar.maximum=t,this.updateHp(this.propSet.getHp())},i.prototype.playAction=function(n,s){var a=this;if(this._state!=n||this.isAtkAction()){if(n==t.EntityAction.HIT){var r=this;if(this.hasEffById(i.Movie_ID_5)&&(this.effs[i.Movie_ID_5].visible=!1,!this.hasEffById(i.Movie_ID_51))){this.effs[i.Movie_ID_51]=t.ObjectPool.pop("app.MovieClip"),this.effs[i.Movie_ID_51].scaleX=this.effs[i.Movie_ID_51].scaleY=1.2;var o=ResDirEnum.RES_DIR_SKILL+"mfd_e";this.addChild(this.effs[i.Movie_ID_51]),this.effs[i.Movie_ID_51].playFileChar(o,1,function(){r.removeEffect(i.Movie_ID_51),a.hasEffById(i.Movie_ID_5)&&r.effs[i.Movie_ID_5]&&(r.effs[i.Movie_ID_5].visible=!0)},!1)}}else this.hasEffById(i.Movie_ID_51)&&this.removeEffect(i.Movie_ID_51);e.prototype.playAction.call(this,n,s)}},Object.defineProperty(i.prototype,"dir",{get:function(){return this._dir},set:function(e){e%=8,this._dir!=e&&this._state!=t.EntityAction.DIE&&(this._dir=e,this.loadBody())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"action",{get:function(){return this._state},enumerable:!0,configurable:!0}),i.prototype.getResDir=function(t){return 5==this.dir?3:6==this.dir?2:7==this.dir?1:this.dir},i.prototype.reset=function(){for(var t=0;t<this.m_CharMsgList.length;t++)this.dispatchActorMsg(this.m_CharMsgList[t]);this.removeAllFilters()},i.prototype.destruct=function(){this.destroy(),this.pickUpPet&&this.pickUpPet.destruct(),this.pickUpPet=null,t.ObjectPool.push(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.deadDelay(),this.alpha=1,this.remHP(),t.DisplayUtils.removeFromParent(this._Shadow),this.removeChassis(),this.removeAllEffect(),this.removeAllFilters(),t.TimerManager.ins().removeAll(this),this.isMy||(this.recog=0,t.ObjectPool.push(this.propSet),this.propSet=null,this.charName=""),this.floatingBloodAry.length=0,this.floatingTime=0,this.disappearTime=0,this._nameTxt.text="",this._nameTxt.visible=!1,this.disappear(),t.DisplayUtils.removeFromParent(this)},i.prototype.deadDelay=function(){this._hpBar&&(this._hpBar.value=0),this.removeAllBuff(),this.atking=!1},i.prototype.initBody=function(t,e){var i=0;if(this.propSet&&(i=this.propSet.getSuit()),i){var n=this.propSet.getSex();this.addMc(CharMcOrder.BODY,ResDirEnum.RES_DIR_BODY_SUIT+"body"+i+"_"+n)}else this.addMc(CharMcOrder.BODY,t);this.addSpecialMC()},i.prototype.addSpecialMC=function(){"body020"==this.propSet.getBodyStr()||"body020"==this.propSet.getBodyStr()?this.addMc(CharMcOrder.SPECIAL,ResDirEnum.RES_DIR_BODY+"bodyeff_20_3"):this.removeMc(CharMcOrder.SPECIAL)},i.prototype.setWeaponFileName=function(t){var e=this.propSet.getSuit();if(t&&!e){var i=!1;(this.isMy&&!i||!this.isMy)&&this.addMc(CharMcOrder.WEAPON,ResDirEnum.RES_DIR_WEAPON+t)}else this.removeMc(CharMcOrder.WEAPON)},i.prototype.setBodyEff=function(t){var e=0;this.propSet&&(e=this.propSet.getSuit()),!t||""==t||-1!=t.indexOf("bodyeff_20_")||e?this.removeMc(CharMcOrder.BODYEFF):this.addMc(CharMcOrder.BODYEFF,ResDirEnum.RES_DIR_BODY_EFF+t)},i.prototype.setWeaponEff=function(t){var e=0;if(this.propSet&&(e=this.propSet.getSuit()),""==t||e)this.removeMc(CharMcOrder.WEAPONEFF);else{var i=this.addMc(CharMcOrder.WEAPONEFF,ResDirEnum.RES_DIR_WEAPONEFF+t);i&&(i.blendMode=egret.BlendMode.ADD,i=null)}},Object.defineProperty(i.prototype,"isPlaying",{get:function(){return this._body.isPlaying},enumerable:!0,configurable:!0}),i.prototype.isAtkAction=function(){return this._state==t.EntityAction.ATTACK||this._state==t.EntityAction.CAST},i.prototype.playBody=function(t){e.prototype.playBody.call(this,t)},i.prototype.loadBody=function(){this.isShowBody&&e.prototype.loadBody.call(this)},i.prototype.loadOther=function(t){this.isShowBody&&e.prototype.loadOther.call(this,t)},i.prototype.loadNoDir=function(t){this.isShowBody&&e.prototype.loadNoDir.call(this,t)},i.prototype.showBodyContainer=function(){if(this.isDead=!1,this.deadChar=!1,this.updateHbName(),!this.isShowBody){egret.Tween.removeTweens(this),this.isShowBody=!0,this.CharVisible=!0,this.alpha=1,this.addChildAt(this._bodyContainer,0),this.loadBody();for(var e in this._disOrder){var i=+e;this._disOrder[e]instanceof t.MovieClip&&this.hasDir.indexOf(i)<0&&this.loadNoDir(i)}}},i.prototype.hideBodyContainer=function(){this.isShowBody&&(this.isShowBody=!1,this.removeChild(this._bodyContainer),this.CharVisible=!1)},i.prototype.getIsShowBody=function(){return this.isShowBody},i.prototype.resetStand=function(){this.isAtkAction()&&this.playAction(t.EntityAction.STAND)},i.prototype.hasEffById=function(t){return this.effs&&this.effs[t]?!0:!1},i.prototype.updateBlood=function(t){void 0===t&&(t=!1),!this.propSet},i.prototype.onDead=function(e){if(this._nameTxt.visible=!1,!this.isDead){if(this.propSet.getRace()==t.ActorRace.Monster){var i=t.GlobalConfig.Monster[this.propSet.getACTOR_ID()];if(i.damageMusicRate&&i.damageMusicId&&(i.dieMusicRate>=100||100*Math.random()>=i.dieMusicRate)&&t.SoundUtil.ins().playMonster(i.dieMusicId+"_mp3"),i.deatheff){var n=t.SettingMgr.CloseEff();n||t.SkillEffPlayer.PlayHitEff(i.deatheff,{x:this.currentX,y:this.currentY},0)}}this.isDead=!0,t.EntityMgr.ins().delGridChar(this.recog),this.playAction(t.EntityAction.DIE,e),this.remHP()}},i.prototype.renFilter=function(){this._bodyContainer.filters=null,this.charEntityType=t.EntityFilter.no},i.prototype.remHP=function(){this.titleCantainer.visible=!1,this._hpBar&&(this._hpBar.visible=!1)},i.prototype.disappear=function(){var t=Object.keys(this.effs);if(t&&t.length)for(var i=0;i<t.length;i++)this.removeEffect(+t[i]);this.hideBodyContainer(),e.prototype.disappear.call(this)},i.prototype.rightDown=function(e){if(!this.isMy&&t.MapView.m_isClickCtrl&&this.isCharRole){if(t.ViewManager.ins().isShow(t.OtherPlayerView))return;t.EquipItemMgr.ins().sendQueryOthersEquips(this.propSet.getACTOR_ID()),e.stopPropagation()}},i.prototype.removeEffect=function(e){var n=this.effs[e];n&&(n instanceof t.MovieClip&&n.destroy(),delete this.effs[e],e==i.Movie_ID_5&&this.removeEffect(i.Movie_ID_51))},i.prototype.removeAllEffect=function(){for(var e in this.effs){var i=this.effs[e];i&&i instanceof t.MovieClip&&i.destroy()}t.ObjectPool.wipe(this.effs)},i.prototype.hasBuff=function(e){for(var i in this.buffList){var n=t.GlobalConfig.BuffConf[this.buffList[i].id];if(n.type==e)return!0}return!1},i.prototype.addBuff=function(e){if(e&&(this.buffList[e.key]=e,this.updateBuffEff(),this.isMy)){var i=t.GlobalConfig.BuffConf[e.id];i&&i.tips&&""!=i.tips&&t.UserTips.ins().showFightTips(i.tips)}},i.prototype.getIsEQSecure=function(){return this.modelBuffAr[t.EntityFilter.shield]},i.prototype.getIsDisabled=function(){return this.modelBuffAr[t.EntityFilter.disabled]},i.prototype.getIsWarframe=function(){return this.getBuff(230044)},i.prototype.updateBuffEff=function(){t.ObjectPool.wipe(this.modelBuffAr),this.buffType1Ary&&(this.buffType1Ary.length=0),this.buffType2Ary&&(this.buffType2Ary.length=0),this.buffType3Ary&&(this.buffType3Ary.length=0),this.buffType4Ary&&(this.buffType4Ary.length=0),this.buffType5Ary&&(this.buffType5Ary.length=0),this._buffTypeAry&&(this._buffTypeAry.length=0),t.BuffMgr.ins().isAddSavior&&this._saviorBuff&&(this._saviorBuff.length=0);for(var e in this.buffList){var n=t.GlobalConfig.BuffConf[this.buffList[e].id],s=n.modelType;s&&(this.modelBuffAr[s]=!0),244!=n.id?1==n.iconshow?(this.buffType1Ary.push(n),this._buffTypeAry.push(n)):2==n.iconshow?(this.buffType2Ary.push(n),this._buffTypeAry.push(n)):3==n.iconshow?(this.buffType3Ary.push(n),this._buffTypeAry.push(n)):4==n.iconshow?this.buffType4Ary.push(n):5==n.iconshow&&(this.buffType5Ary.push(n),this._buffTypeAry.push(n)):t.BuffMgr.ins().isAddSavior&&this._saviorBuff.push(n)}if(this.getIsEQSecure()&&!this.hasEffById(i.Movie_ID_5)){var a=t.ObjectPool.pop("app.MovieClip");a.blendMode=egret.BlendMode.ADD,a.scaleX=a.scaleY=1.2;var r=ResDirEnum.RES_DIR_SKILL+"mfd_d";this.playFile(a,r),this.addChild(a),this.effs[i.Movie_ID_5]=a}if(this.getIsDisabled()&&!this.hasEffById(i.Movie_ID_7)){var a=t.ObjectPool.pop("app.MovieClip");a.scaleX=a.scaleY=1.2;var r=ResDirEnum.RES_DIR_SKILL+"zhicanbuff_c0";this.playFile(a,r),this.addChild(a),this.effs[i.Movie_ID_7]=a}this.updateBodyType(),this.updateRoleBuff(),this.onChange(),this.isMy&&(t.BuffMgr.ins().postUpdateBuff(),this._saviorBuff.length>0&&t.BuffMgr.ins().isAddSavior&&(t.BuffMgr.ins().post_updateSavior(),t.BuffMgr.ins().isAddSavior=!1))},i.prototype.updateBodyType=function(){this.propSet&&this.propSet.getPetrification()?this.charEntityType=t.EntityFilter.hard:this.modelBuffAr[t.EntityFilter.hard]?this.charEntityType=t.EntityFilter.hard:this.modelBuffAr[t.EntityFilter.fixed]?this.charEntityType=t.EntityFilter.fixed:this.modelBuffAr[t.EntityFilter.lightblue]?this.charEntityType=t.EntityFilter.lightblue:this.modelBuffAr[t.EntityFilter.poison]?this.charEntityType=t.EntityFilter.poison:this.modelBuffAr[t.EntityFilter.invisible]?this.charEntityType=t.EntityFilter.invisible:this.charEntityType=t.EntityFilter.no,this.setMcFilter()},i.prototype.isFrozen=function(){return this.modelBuffAr[t.EntityFilter.lightblue]},i.prototype.isHard=function(){return this.modelBuffAr[t.EntityFilter.hard]||this.propSet&&this.propSet.getPetrification()},i.prototype.isFixed=function(){return this.modelBuffAr[t.EntityFilter.fixed]},i.prototype.isPoison=function(){return this.modelBuffAr[t.EntityFilter.poison]},i.prototype.getBuff=function(t){return this.buffList[t]},i.prototype.updateBuff=function(t,e){this.buffList[t]&&(this.buffList[t].value=e)},i.prototype.removeBuff=function(e){if(this.buffList[e]){var i=t.GlobalConfig.BuffConf[this.buffList[e].id];this.removeEffect(i.modelType),t.ObjectPool.push(this.buffList[e]),delete this.buffList[e]}this.updateBuffEff()},i.prototype.removeTypedBuff=function(e){for(var i in this.buffList){var n=t.GlobalConfig.BuffConf[this.buffList[i].id];n.type==e&&this.removeBuff(this.buffList[i].key)}},i.prototype.removeAllBuff=function(){for(var t in this.buffList)this.removeBuff(this.buffList[t].key)},i.prototype.initBuff=function(t){this.buffList[t.key]=t,this.updateBuffEff()},Object.defineProperty(i.prototype,"team",{get:function(){return this._infoModel.team},enumerable:!0,configurable:!0}),i.prototype.playCount=function(){return this._state==t.EntityAction.RUN||this._state==t.EntityAction.WALK||this._state==t.EntityAction.STAND?-1:1},Object.defineProperty(i.prototype,"isMy",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isMyPet",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isPet",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isNpc",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"weight",{get:function(){return this.isDead?-1:this._infoModel&&this.team==Team.My&&this instanceof t.CharRole?this.y+32:this.y},enumerable:!0,configurable:!0}),i.prototype.updateModel=function(){this.removeAll(),this.parseModel()},i.prototype.parseModel=function(){var t=this;this.propSet&&(t.updateBlood(!0),t.setCharName(this.propSet.getName()),t.initBody(ResDirEnum.RES_DIR_MONSTER+"monster"+this.propSet.getBody()))},i.prototype.removeAllFilters=function(){for(var e=0;e<this.m_CharMsgList.length;e++)this.m_CharMsgList[e].clear(),t.ObjectPool.push(this.m_CharMsgList[e]);for(var e=0;e<this.m_ActionMsgList.length;e++)this.m_ActionMsgList[e].clear(),t.ObjectPool.push(this.m_ActionMsgList[e]);this.m_CharMsgList.length=0,this.m_ActionMsgList.length=0},i.prototype.updateTime=function(e){if(this.m_CharMsgList.length){var i=this.m_CharMsgList.shift();this.dispatchActorMsg(i),t.ObjectPool.push(i)}if(!this.isDead&&((this.m_nAction==t.StandardActions.SAM_UNDER_ATTACK||this.m_nAction==t.StandardActions.SAM_UNDER_RECRUIT)&&this.m_ActionMsgList.length>0&&this.m_ActionMsgList[0].ident!=t.StandardActions.SAM_UNDER_ATTACK&&this.m_ActionMsgList[0].ident!=t.StandardActions.SAM_UNDER_RECRUIT&&(this.m_dwNextActionTime=0,this.m_HitTime=0),e>=this.m_dwNextActionTime)){if(this.m_ActionMsgList.length){var n=this.m_ActionMsgList.shift();return void this.setHumanAction(n)}this.setToIdleAction()}},i.prototype.syncSetCurrentXY=function(t,e){this.endMove(),this.setXY(t,e),this.setToIdleAction()},i.prototype.advanceTime=function(t){e.prototype.advanceTime.call(this,t),this.payFB(),this.updateTime(t),this.updateLabelxy()},i.prototype.payFB=function(){if(this.floatingBloodAry.length&&egret.getTimer()-this.floatingTime>400){var e=this.floatingBloodAry.shift(),i=this.isMy?"num_3_fnt":"";this.floatingTime=egret.getTimer(),t.DefaultMgr.ins().postEntityHpChange(this,DamageTypes.HIT,e,i)}},i.prototype.updateLabelxy=function(){this._nameTxt.visible&&(this._nameTxt.x=this.x-this._nameTxt.textWidth/2*.4,this.isCharRole||this.isDummyCharRole?this._nameTxt.y=this.y-this._nameTxt.textHeight/2*.4-30:this._nameTxt.y=this.y-40),this._hpBar.visible&&(this._hpBar.x=this.x-20,this._hpBar.y=this.y-90),this._Shadow.x=this.x,this._Shadow.y=this.y,this.chassis&&(this.chassis.x=this.x,this.chassis.y=this.y);var t=0;this.gzImage&&(this.gzImage.x=this.x,this.gzImage.y=this.y-113+t,t-=23),this.rageImage&&(this.rageImage.x=this.x,this.rageImage.y=this.y-105+t,t-=20),this._titleImage&&(this._titleImage.x=this.x,this._titleImage.y=this.y-105+t),this._titleMc&&(this._titleMc.x=this.x,this._titleMc.y=this.y-200),this.buffImage&&(this.buffImage.x=this.x,this.buffImage.y=this.y+0)},i.prototype.setToIdleAction=function(){!this.isCharRole||this.m_nAction!=t.StandardActions.SAM_SPELL&&this.m_nAction!=t.StandardActions.SAM_NORMHIT?this._state!=t.EntityAction.STAND&&(this.m_nAction=0,this.playAction(t.EntityAction.STAND)):(this.m_nAction=0,t.PlayerRoleAI.ins().isOpen||this.postActionMessage(t.StandardActions.SAM_UNDER_RECRUIT,0,0,this.dir))},i.prototype.dispatchActorMsg=function(e){switch(e.ident){case t.StandardActions.SAM_REUSE:this.isDead=!1,this.updateHbName(),this.playAction(t.EntityAction.STAND),this.setXY(e.x,e.y);break;case t.StandardActions.BUFF_ADD:this.addBuff(e.data);break;case t.StandardActions.BUFF_DELECT:this.removeBuff(1e4*e.data.type+e.data.group);break;case t.StandardActions.BUFF_DELECT_TYPE:this.removeTypedBuff(e.data.type);break;case t.StandardActions.BUFF_UPDATE:this.updateBuff(e.data.key,e.data.value);break;case t.StandardActions.AM_DAMAGE:e.data&&this.floatingBlood(e.data.nowHp,0,e.data.bong);break;case t.StandardActions.UPDATA_NAME_TYPE:this.updateNameType();
break;case t.StandardActions.NAME_UPDATE_COLOR:this.setNameTxtColor();break;case t.StandardActions.TITLE_UPDATE:this.updateTitle(),this.updateCustomisedTitle()}},i.prototype.floatingBlood=function(t,e,i){void 0===e&&(e=700),void 0===i&&(i=!1);var n=t-this.getHP();this.updateHp(t),0>n&&(this.floatingBloodAry.push(n),this.payFB())},i.prototype.ackEffid=function(e,i){if(e&&i){var n=t.GlobalConfig.SkillsLevelConf[e][i];if(n.prepareId){var s=this.propSet.getAckRate();t.SkillEffPlayer.playAckEff(n.prepareId,this,s)}}},i.prototype.correct=function(e,i,n){this.m_nAction=0,this.m_dwNextActionTime,this.dir=e,this.setXY(i,n),this.playAction(t.EntityAction.STAND)},i.prototype.speedAction=function(){var e,i,n,s;for(this.m_nAction=0;this.m_ActionMsgList.length>0;)switch(e=this.m_ActionMsgList.shift(),e.ident){case t.StandardActions.SAM_WALK:i=e.dir,n=e.x,s=e.y;break;case t.StandardActions.SAM_RUN:i=e.dir,n=e.x,s=e.y;break;case t.StandardActions.SAM_SPELL:i=e.dir;break;case t.StandardActions.SAM_UNDER_ATTACK:i=e.dir;break;case t.StandardActions.SAM_SPECIAL_MOVE:i=e.dir,n=e.x,s=e.y;break;case t.StandardActions.SAM_TELEPORTING:i=e.dir,n=e.x,s=e.y;break;case t.StandardActions.SAM_NOWDEATH:return this.dir=e.dir,n&&s&&this.setXY(n,s),this.m_MoveAction.Action=t.StandardActions.SAM_NOWDEATH,this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_NOWDEATH_TIME,this.getHP()&&this.floatingBlood(0,0),void this.onDead(function(){})}n&&s&&(this.dir=i,this.setXY(n,s),this.playAction(t.EntityAction.STAND))},i.prototype.setHumanAction=function(e){this.m_nAction=e.ident;var i=egret.getTimer();switch(e.ident){case t.StandardActions.SAM_WALK:!this.isMy&&i-e.time>t.StandardActionsTime.SAM_WALK_TIME?this.correct(e.dir,e.x,e.y):(this.m_MoveAction.Action=t.StandardActions.SAM_WALK,this.m_MoveAction.Dir=e.dir,this.m_MoveAction.Step=1,this.dir=e.dir,this.playAction(t.EntityAction.WALK),this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_WALK_TIME,this.moveTo(e.x,e.y,this.m_MoveAction.Step));break;case t.StandardActions.SAM_RUN:!this.isMy&&i-e.time>t.StandardActionsTime.SAM_RUN_TIME?this.correct(e.dir,e.x,e.y):(this.m_MoveAction.Action=t.StandardActions.SAM_RUN,this.m_MoveAction.Dir=e.dir,this.m_MoveAction.Step=2,this.dir=e.dir,this.playAction(t.EntityAction.RUN),this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_RUN_TIME,this.moveTo(e.x,e.y,this.m_MoveAction.Step));break;case t.StandardActions.SAM_NORMHIT:var n=this.getNormhitTime();if(!this.isMy&&i-e.time>n)this.correct(e.dir,this.currentX,this.currentY);else{this.dir=e.dir,this.m_MoveAction.Action=t.StandardActions.SAM_NORMHIT,this.m_MoveAction.Dir=e.dir,this.m_dwNextActionTime=this.m_nCurrentActionTime+n;var s=e.data;if(this.isCharRole)s&&s.skillId?this.ackEffid(s.skillId,s.level):t.SoundUtil.ins().playAck();else{var a=t.GlobalConfig.Monster[this.propSet.getACTOR_ID()];a.attackMusicRate&&a.attackMusicId&&(a.attackMusicRate>=100||100*Math.random()>=a.attackMusicRate)&&t.SoundUtil.ins().playMonster(a.attackMusicId+"_mp3")}this.playAction(t.EntityAction.ATTACK)}break;case t.StandardActions.SAM_SPELL:if(!this.isMy&&i-e.time>t.StandardActionsTime.SAM_SPELL_TIME)this.correct(e.dir,this.currentX,this.currentY);else{this.m_MoveAction.Action=t.StandardActions.SAM_SPELL;var r=e.data;if(this.acktTime=egret.getTimer(),5!=r.skill.id){this.m_MoveAction.Dir=e.dir,this.dir=e.dir,this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_SPELL_TIME;var o=t.GlobalConfig.SkillConf[r.skill.id];r.dir=e.dir;var l=t.EntityMgr.ins().getCharRole(r.hitRecog);r.targeRole=l,this.playDanDao(r,400-(egret.getTimer()-this.acktTime)),o?1==o.action?this.playAction(t.EntityAction.ATTACK):2==o.action?this.playAction(t.EntityAction.CAST):(this.m_dwNextActionTime=0,this.m_nAction=0):this.playAction(t.EntityAction.ATTACK),r&&r.skill&&r.skill.prepareId&&t.SkillEffPlayer.playAckEff(r.skill.prepareId,this)}else this.m_dwNextActionTime=100}break;case t.StandardActions.SAM_UNDER_ATTACK:if(!this.isMy&&i-e.time>t.StandardActionsTime.SAM_UNDER_ATTACK_TIME)this.correct(e.dir,this.currentX,this.currentY);else if(this.dir=e.dir,this.m_MoveAction.Action=t.StandardActions.SAM_UNDER_ATTACK,this.isCharRole)this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_UNDER_ATTACK_TIME,0==this.propSet.getSex()?t.SoundUtil.ins().playManHit():t.SoundUtil.ins().playWoManHit(),this.playAction(t.EntityAction.HIT);else{this.m_dwNextActionTime=this.m_nCurrentActionTime+1;var a=t.GlobalConfig.Monster[this.propSet.getACTOR_ID()];a.damageMusicRate&&a.damageMusicId&&(a.damageMusicRate>=100||100*Math.random()>=a.damageMusicRate)&&t.SoundUtil.ins().playMonster(a.damageMusicId+"_mp3")}break;case t.StandardActions.SAM_IDLE:!this.isMy&&i-e.time>t.StandardActionsTime.SAM_IDLE_TIME?this.correct(e.dir,this.currentX,this.currentY):(this.dir=e.dir,this.m_MoveAction.Action=t.StandardActions.SAM_IDLE,this.m_MoveAction.Dir=e.dir,this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_IDLE_TIME),this.setToIdleAction();break;case t.StandardActions.SAM_NOWDEATH:this.dir=e.dir,this.m_MoveAction.Action=t.StandardActions.SAM_NOWDEATH,this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_NOWDEATH_TIME,this.getHP()&&this.floatingBlood(0,0),this.onDead(function(){});break;case t.StandardActions.SAM_SPECIAL_MOVE:!this.isMy&&i-e.time>t.StandardActionsTime.SAM_SPECIAL_MOVE_TIME?this.correct(e.dir,e.x,e.y):(this.m_MoveAction.Action=t.StandardActions.SAM_SPECIAL_MOVE,this.m_MoveAction.Dir=e.dir,this.m_MoveAction.Step=2,this.dir=e.dir,this.playAction(t.EntityAction.RUN),this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_SPECIAL_MOVE_TIME,this.moveTo(e.x,e.y,this.m_MoveAction.Step),t.SkillEffPlayer.playAckEff(7,this));break;case t.StandardActions.SAM_TELEPORTING:!this.isMy&&i-e.time>t.StandardActionsTime.SAM_TELEPORTING_TIME?this.correct(e.dir,e.x,e.y):(this.m_MoveAction.Action=t.StandardActions.SAM_TELEPORTING,this.m_MoveAction.Dir=e.dir,this.dir=e.dir,this.setXY(e.x,e.y),this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_TELEPORTING_TIME,this.isMy&&t.EntityMgr.ins().resetMakeDummy(!0));break;case t.StandardActions.SAM_UNDER_RECRUIT:!this.isMy&&i-e.time>t.StandardActionsTime.SAM_UNDER_RECRUIT_TIME?this.correct(e.dir,this.currentX,this.currentY):(this.dir=e.dir,this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_UNDER_RECRUIT_TIME,this.playAction(t.EntityAction.STAND1))}},i.prototype.playDanDao=function(e,i){var n=this;if(e&&!e.targeRole&&e.skillId){var s=t.GlobalConfig.SkillConf[e.skillId];s&&2==s.extentType&&(e.ballisticXY={x:t.GameMap.grip2Point(e.targetX),y:t.GameMap.grip2Point(e.targetY)})}var a=e;t.TimerManager.ins().doTimerDelay(i,0,1,function(){a&&a.skill.ballisticId&&t.SkillEffPlayer.PlayBallisticEff(a.skill.ballisticId,n,a.dir,a.targeRole,e.ballisticXY)},this)},i.prototype.postActionMessage=function(e,i,n,s,a){if(void 0===a&&(a=null),this.isShowBody){var r=void 0;if(e==t.StandardActions.SAM_UNDER_ATTACK||e==t.StandardActions.SAM_UNDER_RECRUIT){if(this.m_ActionMsgList.length>0||this.m_nAction>0)return}else this.m_ActionMsgList.length>0&&(t.StandardActions.SAM_UNDER_RECRUIT==this.m_ActionMsgList[this.m_ActionMsgList.length-1].ident||t.StandardActions.SAM_UNDER_ATTACK==this.m_ActionMsgList[this.m_ActionMsgList.length-1].ident)&&(r=this.m_ActionMsgList.pop(),r.clear());r||(r=t.ObjectPool.pop("app.ActorMessage")),r.setInfo(e,i,n,s,a),this.m_ActionMsgList.push(r)}},i.prototype.addChassis=function(e){this.removeChassis(),this.chassis=t.ObjectPool.pop("app.MovieClip"),this.chassis.touchEnabled=!1,this.chassis.sortId=e,t.ViewManager.gamescene.map.addAhassis(this.chassis),this.chassis.playFile(ResDirEnum.RES_DIR_EFF+"chassis"+e,-1)},i.prototype.removeChassis=function(){this.chassis&&this.chassis.destroy(),this.chassis=null},i.prototype.setMcFilter=function(){"webgl"==egret.Capabilities.renderMode&&(this._bodyContainer.filters=t.EntityFilterUtil.buffFilter[this.charEntityType]?t.EntityFilterUtil.buffFilter[this.charEntityType]:null)},i.prototype.setNearChat=function(t){},i.prototype.$onRemoveFromStage=function(){this._hpBar&&(this._hpBar.visible=!1,t.DisplayUtils.removeFromParent(this._hpBar)),this._nameTxt&&(this._nameTxt.visible=!1,t.DisplayUtils.removeFromParent(this._nameTxt)),this._titleImage&&(this._titleImage instanceof t.MovieClip?this._titleImage.destroy():t.DisplayUtils.removeFromParent(this._titleImage)),this._titleImage=null,this._titleMc&&this._titleMc.destroy(),this._titleMc=null,this.rageImage&&(t.DisplayUtils.removeFromParent(this.rageImage),this.rageImage=null),this.gzImage&&(t.DisplayUtils.removeFromParent(this.gzImage),this.gzImage=null),this.buffImage&&(t.DisplayUtils.removeFromParent(this.buffImage),this.buffImage=null),this._bodyContainer.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndClick,this),this._bodyContainer.removeEventListener(mouse.MouseEvent.RIGHT_DOWN,this.rightDown,this),this._bodyContainer.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this._bodyContainer.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this._bodyContainer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEndClick,this),this._bodyContainer.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginClick,this),e.prototype.$onRemoveFromStage.call(this)},i.prototype.$onAddToStage=function(i,n){e.prototype.$onAddToStage.call(this,i,n),this.updateHbName(),this.updateTitle(),this.updateCustomisedTitle(),this._nameTxt&&t.ViewManager.gamescene.map.addNameLabel(this._nameTxt),this._hpBar&&t.ViewManager.gamescene.map.addCharHbBar(this._hpBar),gamelib.DeviceUtils.IsMobile?(this._bodyContainer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEndClick,this),this._bodyContainer.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginClick,this)):(this._bodyContainer.addEventListener(mouse.MouseEvent.RIGHT_DOWN,this.rightDown,this),this._bodyContainer.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndClick,this),this._bodyContainer.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this._bodyContainer.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)),this._chatTxt.visible=!1,this.updateRage(),this.updateGuanzhi(),this.updateRoleBuff()},i.prototype.onBeginClick=function(t){t.stopPropagation()},i.prototype.$setVisible=function(t){e.prototype.$setVisible.call(this,t),t?(this.updateHbName(),this.updateTitle(),this.updateCustomisedTitle()):(this._hpBar&&(this._hpBar.visible=!1),this._nameTxt&&(this._nameTxt.visible=!1),this._titleImage&&(this._titleImage.visible=!1),this._titleMc&&(this._titleMc.visible=!1),this.rageImage&&(this.rageImage.visible=!0),this.gzImage&&(this.gzImage.visible=!0),this.buffImage&&(this.buffImage.visible=!0))},i.prototype.updateHbName=function(){this._hpBar&&!this.isDead&&(this._hpBar.visible=!0),this.updateNameType()},i.prototype.playUpgradeEff=function(){var e=this;if(!this.hasEffById(i.Movie_ID_52)){this.effs[i.Movie_ID_52]=t.ObjectPool.pop("app.MovieClip");var n=ResDirEnum.RES_DIR_EFF+"eff_sj";this.addChild(this.effs[i.Movie_ID_52]),this.effs[i.Movie_ID_52].playFileChar(n,1,function(){e.removeEffect(i.Movie_ID_52)},!1)}},i.prototype.playTaskEff=function(e){var n=this;if(!this.hasEffById(i.Movie_ID_53)){this.effs[i.Movie_ID_53]=t.ObjectPool.pop("app.MovieClip");var s=ResDirEnum.RES_DIR_EFF+e;this.effs[i.Movie_ID_53].y-=250,this.addChild(this.effs[i.Movie_ID_53]),this.effs[i.Movie_ID_53].playFileChar(s,1,function(){n.removeEffect(i.Movie_ID_53)},!1)}},i.prototype.updateTitle=function(){},i.prototype.updateCustomisedTitle=function(){},i.prototype.updateRage=function(){var e=this.propSet.getViolent();e?(this.rageImage||(this.rageImage=t.ViewManager.gamescene.map.getRageImage()),this.rageImage.visible=!0):this.rageImage&&(t.DisplayUtils.removeFromParent(this.rageImage),this.rageImage=null)},i.prototype.updateGuanzhi=function(){if(this.propSet){var e=this.propSet.getOfficialPositicon();e?(this.gzImage||(this.gzImage=t.ViewManager.gamescene.map.getGzImage()),this.gzImage.source="gz_zw_"+e,this.gzImage.visible=!0):this.gzImage&&(t.DisplayUtils.removeFromParent(this.gzImage),this.gzImage=null)}},i.prototype.updateRoleBuff=function(){if(this.propSet){var e=this.buffType5Ary[this.buffType5Ary.length-1];e?(this.buffImage||(this.buffImage=t.ViewManager.gamescene.map.getBuffImage()),this.buffImage.source=e.icon2,this.buffImage.visible=!0):this.buffImage&&(t.DisplayUtils.removeFromParent(this.buffImage),this.buffImage=null)}},i.prototype.updateChild=function(t){},i.prototype.mpaGrey=function(e){this.filters=e?t.FilterUtil.ARRAY_GRAY_FILTER:null,this._nameTxt&&(this._nameTxt.filters=e?t.FilterUtil.ARRAY_GRAY_FILTER:null),this._hpBar&&(this._hpBar.filters=e?t.FilterUtil.ARRAY_GRAY_FILTER:null),this._Shadow&&(this._Shadow.filters=e?t.FilterUtil.ARRAY_GRAY_FILTER:null),this._titleImage&&(this._titleImage.filters=e?t.FilterUtil.ARRAY_GRAY_FILTER:null),this._titleMc&&(this._titleMc.filters=e?t.FilterUtil.ARRAY_GRAY_FILTER:null),this.rageImage&&(this.rageImage.filters=e?t.FilterUtil.ARRAY_GRAY_FILTER:null),this.gzImage&&(this.gzImage.filters=e?t.FilterUtil.ARRAY_GRAY_FILTER:null),this.buffImage&&(this.buffImage.filters=e?t.FilterUtil.ARRAY_GRAY_FILTER:null)},i.Movie_ID_5=5,i.Movie_ID_51=151,i.Movie_ID_52=152,i.Movie_ID_53=153,i.Movie_ID_7=7,i}(t.CharEffect);t.CharMonster=e,__reflect(e.prototype,"app.CharMonster")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.remInitFnction,e),e}return __extends(e,t),e.prototype.addTouchEvent=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_TAP,t,e)},e.prototype.addTouchEndEvent=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_END,t,e)},e.prototype.addChangeEvent=function(t,e){var i=this;t&&t instanceof eui.TabBar?this.addEvent(egret.TouchEvent.CHANGE,t,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.call.apply(e,[i].concat(t))}):this.addEvent(egret.TouchEvent.CHANGE,t,e)},e.prototype.addChangingEvent=function(t,e){this.addEvent(egret.TouchEvent.CHANGING,t,e)},e.prototype.addMouseMoveEvent=function(t,e){gamelib.DeviceUtils.IsMobile||this.addEvent(mouse.MouseEvent.MOUSE_OUT,t,e)},e.prototype.removeMouseMoveEvent=function(t,e){gamelib.DeviceUtils.IsMobile||t&&t.removeEventListener(mouse.MouseEvent.MOUSE_OUT,e,this)},e.prototype.addMouseOverEvent=function(t,e){gamelib.DeviceUtils.IsMobile?this.addTouchEvent(t,e):this.addEvent(mouse.MouseEvent.MOUSE_OVER,t,e)},e.prototype.removeMouseOverEvent=function(t,e){gamelib.DeviceUtils.IsMobile?this.removeTouchEvent(t,e):t&&t.removeEventListener(mouse.MouseEvent.MOUSE_OVER,e,this)},e.prototype.addLeftDownEvent=function(t,e){gamelib.DeviceUtils.IsMobile||this.addEvent(mouse.MouseEvent.LEFT_DOWN,t,e)},e.prototype.addRightDownEvent=function(t,e){gamelib.DeviceUtils.IsMobile||this.addEvent(mouse.MouseEvent.RIGHT_DOWN,t,e)},e.prototype.addEvent=function(t,e,i){return e?void e.addEventListener(t,i,this):void console.error("不存在绑定对象")},e.prototype.removeTouchEvent=function(t,e){t&&t.removeEventListener(egret.TouchEvent.TOUCH_TAP,e,this)},e.prototype.removeChangeEvent=function(t,e){t&&t.removeEventListener(egret.TouchEvent.CHANGE,e,this)},e.prototype.inItFunction=function(){},e.prototype.remInitFnction=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.remInitFnction,this),this.inItFunction()},e}(eui.ItemRenderer);t.BaseItemRender=e,__reflect(e.prototype,"app.BaseItemRender")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.job=0}return t}();t.SpecialRingConfig=e,__reflect(e.prototype,"app.SpecialRingConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"grayFilter",{get:function(){return new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(t,"grayFilter1",{get:function(){return new egret.ColorMatrixFilter([.3086,.5,.082,0,0,.3086,.5,.082,0,0,.3086,.5,.082,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ARRAY_GRAY_FILTER",{get:function(){return[t.grayFilter1]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"greenFilter",{get:function(){return new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,100,0,0,1,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(t,"greenFilter1",{get:function(){return new egret.ColorMatrixFilter([.1,0,0,0,0,0,.80078125,0,0,20,0,0,-1,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ARRAY_GREEN_FILTER",{get:function(){return[t.greenFilter1]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"greenFilter2",{get:function(){return new egret.ColorMatrixFilter([0,0,0,0,50,0,.8,0,0,70,0,0,1,0,70,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ARRAY_LIGHTBLUE_FILTER",{get:function(){return[t.greenFilter2]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"greenFilter3",{get:function(){return new egret.ColorMatrixFilter([0,0,0,.5,100,0,.46,0,.5,100,0,0,.49,.5,100,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ARRAY_DARK_BLUE_FILTER",{get:function(){return[t.greenFilter3]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"blurFilter",{get:function(){return new egret.BlurFilter(10,10,2)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ARRAY_BLUR_FILTER",{get:function(){return[t.blurFilter]},enumerable:!0,configurable:!0}),t.WHITE=function(){return"webgl"!=egret.Capabilities.renderMode?null:[new egret.ColorMatrixFilter([1,.1,.1,0,0,.1,1,.1,0,0,.1,.1,1,0,0,0,0,0,1,0])]},t.SHINE=function(){return"webgl"!=egret.Capabilities.renderMode?null:[new egret.GlowFilter(16756224,.8,35,35,2,3,!1,!1)]},t}();t.FilterUtil=e,__reflect(e.prototype,"app.FilterUtil")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.selectIdx=0,t.actType=0,t.actId=0,t.skinName="ActivityPaySkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.ActivityPayTabItemView,this.tabBar.addEventListener(egret.Event.CHANGE,this.updatePag,this),this.addTouchEvent(this.closeBtn,this.onClick)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(;e[0]instanceof Array;)e=e[0];e[0]&&(this.actType=e[0]),e[1]&&(this.titleImg.source=e[1]),e[2]&&(this.actId=e[2]),this.observe(t.OtherMgr.ins().post_26_28,this.updateView),this.observe(t.ActvityMgr.ins().post_25_1,this.updateView),this.observe(t.ActvityMgr.ins().post_25_2,this.updateView),this.observe(t.ActvityMgr.ins().post_25_3,this.updateView),this.observe(t.ActvityMgr.ins().post_25_4,this.updateView),this.observe(t.ActvityMgr.ins().post_25_5,this.updateView),t.MouseScroller.bind(this.btnScroller),this.updateView(this.actId),this.updatePag()},i.prototype.updateView=function(e){void 0===e&&(e=0);var i=[],n=t.GlobalConfig.ActivityPayConf[this.actType];for(var s in n){var a=t.ActvityMgr.ins().getActivityInfo(n[s].actId);a&&t.ViewManager.ins().isCheckOpen(n[s].openlimit)&&(e&&e==n[s].actId&&(this.selectIdx=i.length),i.push(n[s]))}this.tabBar.dataProvider=new eui.ArrayCollection(i),this.tabBar.selectedIndex=this.selectIdx<=this.tabBar.dataProvider.length-1?this.selectIdx:0},i.prototype.updatePag=function(){this.selectIdx=this.tabBar.selectedIndex;var e=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(e&&e.view){if(1==t.ActivityPayRuleIcon.disposableredpointObj[e.actId]){t.ActivityPayRuleIcon.disposableredpointObj[e.actId]=2,t.EventManager.ins().sendEvent(t.MainEvent.UPDATE_DISPOSABLE_RED,36);var i=this.tabBar.getElementAt(this.selectIdx);i&&i.dataChanged()}this.curPanel&&(t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel.close());var n=egret.getDefinitionByName(e.view);n&&(this.curPanel=new n,this.curPanel&&(this.curPanel.left=0,this.curPanel.right=0,this.curPanel.top=0,this.curPanel.bottom=0,this.infoGrp.addChild(this.curPanel),this.curPanel.open(e.actId)))}e=null},i.prototype.onClick=function(e){t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.btnScroller),this.removeTouchEvent(this.closeBtn,this.onClick),this.tabBar.removeEventListener(egret.Event.CHANGE,this.updatePag,this),this.curPanel&&(t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel.close())},i}(t.BaseEuiView);t.ActivityPayView=e,__reflect(e.prototype,"app.ActivityPayView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="PlatformFuliViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.paneHash={},this.tabBar.itemRenderer=t.PlatformFuliTabItem},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addChangeEvent(this.tabBar,this.setOpenIndex),this.addTouchEvent(this.closeBtn,this.onClick),this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateAllTabRed),this.setTabInfo(),this.setOpenIndex()},i.prototype.setTabInfo=function(){this.tabBar.dataProvider=new eui.ArrayCollection(this.getTabBarAr()),this.tabBar.selectedIndex=0},i.prototype.setOpenIndex=function(){},i.prototype.updateAllTabRed=function(){for(var t=this.tabBar.numElements,e=0;t>e;e++)this.updateTabRed(e)},i.prototype.updateTabRed=function(t){var e=this.tabBar.getElementAt(t);e&&e.updateRed()},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.getTabBarAr=function(){return[]},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.setOpenIndex,this),this.removeTouchEvent(this.closeBtn,this.onClick);for(var n in this.paneHash){var s=this.paneHash[n];s.close(),s=null,delete this.paneHash[n]}this.paneHash=null,this._currPanel=null},i}(t.BaseEuiView);t.PlatformFuliView=e,__reflect(e.prototype,"app.PlatformFuliView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="PlatformFuliViewSkin2",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.closeBtn,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this._currPanel&&this._currPanel.close(),this._currPanel=null},i}(t.BaseEuiView);t.PlatformFuliView2=e,__reflect(e.prototype,"app.PlatformFuliView2")}(app||(app={}));var app;!function(t){var e=function(){function e(){this._layers=new Array}return e.prototype.onEnter=function(){},e.prototype.onExit=function(){t.ViewManager.ins().closeAll(),this.removeAllLayer()},e.prototype.addLayer=function(e){e instanceof t.BaseSpriteLayer?(t.StageUtils.ins().getStage().addChild(e),this._layers.push(e)):e instanceof t.BaseEuiLayer&&(t.StageUtils.ins().getUIStage().addChild(e),this._layers.push(e))},e.prototype.addLayerAt=function(e,i){if(e instanceof t.BaseSpriteLayer)t.StageUtils.ins().getStage().addChildAt(e,i),this._layers.push(e);else if(e instanceof t.BaseEuiLayer){var n=t.StageUtils.ins().getUIStage();n.addChildAt(e,i),this._layers.push(e)}},e.prototype.removeLayer=function(e){e instanceof t.BaseSpriteLayer?(t.StageUtils.ins().getStage().removeChild(e),this._layers.splice(this._layers.indexOf(e),1)):e instanceof t.BaseEuiLayer&&(t.StageUtils.ins().getUIStage().removeChild(e),this._layers.splice(this._layers.indexOf(e),1))},e.prototype.layerRemoveAllChild=function(e){e instanceof t.BaseSpriteLayer?e.removeChildren():e instanceof t.BaseEuiLayer&&e.removeChildren()},e.prototype.removeAllLayer=function(){for(;this._layers.length;){var t=this._layers[0];this.layerRemoveAllChild(t),this.removeLayer(t)}},e}();t.BaseScene=e,__reflect(e.prototype,"app.BaseScene")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.prototype.init=function(){this.getGiftInfo()},e.prototype.getGiftInfo=function(){},e.prototype.getRuleIcon=function(){return null},Object.defineProperty(e.prototype,"loginWay",{get:function(){return window.loginWay?1:0},enumerable:!0,configurable:!0}),e.prototype.getReward_loginWayGift=function(){return[]},e.prototype.onGetReward_loginWayGift=function(){},e.prototype.onMicroDown=function(){window.MicroDownFunction&&window.MicroDownFunction()},e.prototype.getReward_boxDownGift=function(){return[]},e.prototype.onGetReward_boxDownGift=function(){},e.prototype.getReward_boxLoginGift=function(){return[]},e.prototype.onGetReward_boxLoginGift=function(t){},e.prototype.getReward_boxLevelGift=function(){return[]},e.prototype.onGetReward_boxLevelGift=function(t){},e.prototype.onBoxDown=function(){window.BoxDownFunction&&window.BoxDownFunction()},Object.defineProperty(e.prototype,"phoneBindState",{get:function(){return window.userInfo.bindPhone?parseInt(window.userInfo.bindPhone):0},enumerable:!0,configurable:!0}),e.prototype.getReward_phoneBindGift=function(){return[]},e.prototype.onGetReward_phoneBindGift=function(){},e.prototype.queryBindPhoneFunction=function(){if(window.queryBindPhoneFunction){var e=t.FuLi4366Mgr.ins();window.queryBindPhoneFunction(e.post_updatePlatformFuli,e)}},e.prototype.onBindPhone=function(){window.BindPhoneFunction&&window.BindPhoneFunction({serverId:t.LocationProperty.originalSrvid})},Object.defineProperty(e.prototype,"indulgeState",{get:function(){return window.userInfo.cm?parseInt(window.userInfo.cm):0},enumerable:!0,configurable:!0}),e.prototype.getReward_indulgeGift=function(){return[]},e.prototype.onGetReward_indulgeGift=function(){},e.prototype.onActorInfo=function(){window.ActorInfoFunction&&window.ActorInfoFunction()},e.prototype.getReward_weixinGift=function(){return{}},e}();t.PlatformFuliData=e,__reflect(e.prototype,"app.PlatformFuliData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return t.MessageCenter.compile(egret.getDefinitionByName(egret.getQualifiedClassName(i))),i.observe(t.GameApp.ins().postLoginInit,i.initLogin),i.observe(t.GameApp.ins().postZeroInit,i.initZero),i}return __extends(i,e),i.prototype.regNetMsg=function(e,i){t.GameSocket.ins().registerSTCFunc(this.sysId,e,i,this)},i.prototype.initLogin=function(){},i.prototype.initZero=function(){},i.prototype.getGameByteArray=function(){return t.GameSocket.ins().getBytes()},i.prototype.getBytes=function(t){var e=this.getGameByteArray();return e.writeCmd(this.sysId,t),e},i.prototype.getBytesTwo=function(t,e){var i=this.getGameByteArray();return i.writeCmd(t,e),i},i.prototype.sendBaseProto=function(t){var e=this.getGameByteArray();e.writeCmd(this.sysId,t),this.sendToServer(e)},i.prototype.sendToServer=function(e){t.GameSocket.ins().sendToServer(e)},i.prototype.observe=function(e,i){t.MessageCenter.addListener(e,i,this)},i.prototype.removeObserve=function(){t.MessageCenter.ins().removeAll(this)},i}(t.BaseClass);t.BaseSystem=e,__reflect(e.prototype,"app.BaseSystem"),t.MessageCenter.compile(e)}(app||(app={}));var app;!function(t){var e=function(){function e(){this._loginWay=0,this._phoneBindState=0,this._indulgeState=0,this._loginDays=0,this._phoneBindGiftFlag=0,this._indulgeGiftFlag=0,this._svipGiftFlag=0,this._microGiftFlag=0,this._boxDownGiftFlag=0,this._boxLoginGiftFlag=0,this._boxLevelGiftFlag=0,this._weChatGiftFlag=0,this._qqGroupGiftFlag=0,this.initData()}return e.prototype.initData=function(){},e.prototype.readFuliInfo=function(t){},e.prototype.loginWay=function(){return this._loginWay},e.prototype.isWayLogin=function(){return 1==this._loginWay},e.prototype.isBoxLogin=function(){return 3==this._loginWay},e.prototype.isPhoneBind=function(){return this._phoneBindState>0},e.prototype.isIndulge=function(){return this._indulgeState>0},Object.defineProperty(e.prototype,"loginDays",{get:function(){return this._loginDays},enumerable:!0,configurable:!0}),e.prototype.isGetPhoneBindGift=function(){return this._phoneBindGiftFlag>0},e.prototype.isGetIndulgeGift=function(){return this._indulgeGiftFlag>0},e.prototype.isGetMicroGift=function(){return this._microGiftFlag>0},e.prototype.isGetBoxDownGift=function(){return this._boxDownGiftFlag>0},Object.defineProperty(e.prototype,"boxLoginGift",{get:function(){return this._boxLoginGiftFlag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxLevelGift",{get:function(){return this._boxLevelGiftFlag},enumerable:!0,configurable:!0}),e.prototype.isGetWeChatGift=function(){return this._weChatGiftFlag>0},e.prototype.isGetQQGroupGift=function(){return this._qqGroupGiftFlag>0},e.prototype.getRed_phoneBindGift=function(){return 0==this._phoneBindGiftFlag&&this._phoneBindState>0?!0:!1},e.prototype.getRed_indulgeGift=function(){return 0==this._indulgeGiftFlag&&this._indulgeState>0?!0:!1},e.prototype.getRed_svipGift=function(){return 0==this._svipGiftFlag?!0:!1},e.prototype.getRed_microGift=function(){if(0==this._microGiftFlag){if(this.isWayLogin())return!0;if(t.EntityMgr.ins().getPayer&&t.EntityMgr.ins().getPayer.propSet&&t.EntityMgr.ins().getPayer.propSet.getLevel()>50)return!0}return!1},e.prototype.getRed_boxDownGift=function(){return 0==this._boxDownGiftFlag&&this.isBoxLogin()?!0:!1},e.prototype.getRed_boxLoginGift=function(){if(this.isBoxLogin()){var e=this._loginDays,i=this._boxLoginGiftFlag,n=t.PlatformFuliManager.ins().platformFuliData.getReward_boxLoginGift();for(var s in n)if(e>=n[s].day&&!t.MathUtils.getValueAtBit(i,n[s].id))return!0}return!1},e.prototype.getRed_boxLevelGift=function(){if(this.isBoxLogin()){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getLevel(),n=this._boxLevelGiftFlag,s=t.PlatformFuliManager.ins().platformFuliData.getReward_boxLevelGift();for(var a in s)if(i>=s[a].level&&!t.MathUtils.getValueAtBit(n,s[a].id))return!0}return!1},e.prototype.getRed_weChatGift=function(){return 0==this._weChatGiftFlag?!0:!1},e.prototype.getRed_qqGroupGift=function(){return 0==this._qqGroupGiftFlag?!0:!1},e.prototype.getRed_viewGift=function(){return!1},e}();t.PlatformFuliInfo=e,__reflect(e.prototype,"app.PlatformFuliInfo")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.prototype.getViewData=function(){return null},t.prototype.getGiftsViewData=function(){return[]},t.prototype.getBindingGiftData=function(){return null},t.prototype.getIndulgeGiftData=function(){return null},t.prototype.getMicroGiftData=function(){return null},t.prototype.getBoxGiftData=function(){return null},t.prototype.getWeixinGiftData=function(){return null},t.prototype.getSuperVipGiftData=function(){return null},t}();t.PlatformFuliViewData=e,__reflect(e.prototype,"app.PlatformFuliViewData")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.itUndefinedType=0,t.itWeapon=1,t.itDress=2,t.itHelmet=3,t.itNecklace=4,t.itDecoration=5,t.itBracelet=6,t.itRing=7,t.itGirdle=8,t.itShoes=9,t.itEquipDiamond=10,t.itBambooHat=11,t.itAVisor=12,t.itCape=13,t.itShield=14,t.itMoQi=15,t.itBloodSoul=16,t.itGodShield=17,t.itDragonSoul=18,t.itIntellectBall=19,t.itBloodSoul2=20,t.itGodShield2=21,t.itDragonSoul2=22,t.itIntellectBall2=23,t.itQuestItem=101,t.itFunctionItem=102,t.itDailyUse=117,t.DoubleWearSeed=1e3,t.EQUIP_POS=[t.itWeapon,t.itDress,t.itHelmet,t.itNecklace,t.itDecoration,t.itBracelet,t.itRing,t.itGirdle,t.itShoes,t.itEquipDiamond],t}();t.StdItemType=e,__reflect(e.prototype,"app.StdItemType")
}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.viewType=1,t.type=0,t.actId=0,t.skinName="OpenServerTreasureWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.addTouchEvent(this.closeBtn,this.onClick)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e&&e[0]){var n=e[0];n&&n[0]&&(n=n[0]),this.type=n.type;var s=n.id;n.title&&(this.imgTitle.source=n.title);for(var a=0;a<s.length;a++){var r=t.ActvityMgr.ins().getActivityInfo(s[a]);if(r){this.actId=s[a];break}}}this.curPanel||(this.curPanel=new t.OpenServerTreasureView,2==this.viewType&&(this.curPanel.currentState="state2"),this.curPanel.left=0,this.curPanel.right=0,this.curPanel.top=0,this.curPanel.bottom=0,this.infoGrp.addChild(this.curPanel),this.curPanel.open(this.type,this.actId)),t.EventManager.ins().addEvent(t.CompEvent.CLOSE_TREASURE,this.updateActivity,this)},i.prototype.updateActivity=function(){var e=t.ActvityMgr.ins().getActivityInfo(this.actId);e||t.ViewManager.ins().close(this)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.EventManager.ins().removeEvent(t.CompEvent.CLOSE_TREASURE,this.updateActivity,this),this.removeTouchEvent(this.closeBtn,this.onClick),this.curPanel&&(t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel.close())},i}(t.BaseEuiView);t.OpenServerTreasureWin=e,__reflect(e.prototype,"app.OpenServerTreasureWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.data=t,i.skinName=i.data.skinName,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){this.giftData=t.PlatformFuliManager.ins().platformFuliData,this.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo},i.prototype.initUI=function(){this.itemList.itemRenderer=t.PlatformFuliItemItem,this.itemList.dataProvider=new eui.ArrayCollection(this.getRewardList()),this.addTouchEvent(this.getBtn,this.onClick),this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateView),this.updateView()},i.prototype.updateView=function(){this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.receiveFlag?this.receiveImg.visible=!0:(this.getBtn.visible=!0,this.redPoint.visible=this.redValue)},i.prototype.onClick=function(t){switch(t.currentTarget){case this.getBtn:this.onGetBtn()}},i.prototype.onGetBtn=function(){this.data.onGetFunc()},i.prototype.getRewardList=function(){return this.data.rewardList()},Object.defineProperty(i.prototype,"redValue",{get:function(){return this.data.redFunc()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"receiveFlag",{get:function(){return this.data.receiveFlag()},enumerable:!0,configurable:!0}),i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.getBtn,this.onClick),this.giftData=null,this.giftInfo=null,this.data=null},i}(t.BaseView);t.PlatformFuliGift=e,__reflect(e.prototype,"app.PlatformFuliGift")}(app||(app={}));var app;!function(t){var e;!function(t){t[t.one=0]="one",t[t.two=1]="two",t[t.three=2]="three",t[t.four=3]="four",t[t.five=4]="five",t[t.six=5]="six",t[t.seven=6]="seven",t[t.eight=7]="eight",t[t.nine=8]="nine",t[t.ten=9]="ten",t[t.eleven=10]="eleven",t[t.twelve=11]="twelve",t[t.none=12]="none"}(e=t.CommonButtonState||(t.CommonButtonState={}));var i=function(i){function n(){var t=i.call(this)||this;return t.applyFunc=null,t.selectState=e.none,t}return __extends(n,i),n.prototype.setState=function(t){this.selectState=t},n.prototype.setBackFunc=function(t,e,i){this.applyFunc=t,this.targetObj=e},n.prototype.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e)},n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchHandler,this)},n.prototype.onTouchHandler=function(t){t.stopImmediatePropagation()},n.prototype.onClickFunc=function(t){var e=t.currentTarget;null!=this.applyFunc&&this.applyFunc.call(this.targetObj,this.selectState,e)},n.prototype.destroy=function(){this.applyFunc=null,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchHandler,this),t.DisplayUtils.removeFromParent(this)},n}(eui.Component);t.CommonButtonView=i,__reflect(i.prototype,"app.CommonButtonView",["eui.UIComponent","egret.DisplayObject"])}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._itemID=0,t.isShowName=!1,t.skinName="ItemBaseSkin",t.addMouseMoveEvent(t.itemIcon,t.mouseMove),t.addMouseOverEvent(t.itemIcon,t.mouseMove),t}return __extends(i,e),i.prototype.dataChanged=function(){if(this.bestEquip.visible=!1,this.starLabel.visible=!1,this.imgNuBg.visible=!1,this.removeEff(),this.data)if(this.data instanceof t.TradeLineData||this.data instanceof t.userItem){this.starLabel.visible=this.data.wStar>0,this.starLabel.text="+"+this.data.wStar,this._itemID=this.data.wItemId,""!=this.data.topLine&&void 0!=this.data.topLine&&(this.bestEquip.visible=!0);var e=t.GlobalConfig.StdItems[this.data.wItemId];e&&(this.itemBg.source="quality_"+e.showQuality,this.itemIcon.source=e.icon+"",this.itemCount.text=this.data.btCount>1?t.CommonUtils.overLength(this.data.btCount):"",this.imgNuBg.source=e.iseffect?"yan_"+e.iseffect:"",this.imgNuBg.visible=e.iseffect?!0:!1,e.itemEff&&(this.itemMc||(this.itemMc=t.ObjectPool.pop("app.MovieClip"),this.itemMc.scaleX=this.itemMc.scaleY=1,this.itemMc.touchEnabled=!1,this.itemMc.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.itemMc)),this.itemMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zb"+e.itemEff,-1)))}else if(this._itemID=this.data.id,0==this.data.type){var e=t.GlobalConfig.StdItems[this.data.id];e&&(this.itemBg.source="quality_"+e.showQuality,this.itemIcon.source=e.icon+"",this.itemCount.text=this.data.count>1?t.CommonUtils.overLength(this.data.count):"",this.imgNuBg.source=e.iseffect?"yan_"+e.iseffect:"",this.imgNuBg.visible=e.iseffect?!0:!1,e.itemEff&&(this.itemMc||(this.itemMc=t.ObjectPool.pop("app.MovieClip"),this.itemMc.scaleX=this.itemMc.scaleY=1,this.itemMc.touchEnabled=!1,this.itemMc.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.itemMc)),this.itemMc.isPlaying||this.itemMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zb"+e.itemEff,-1)))}else{var i=t.CurrencyUtils.getCurrencyNameIcon(this.data.type);i&&(this.itemBg.source="quality_0",this.itemIcon.source=i[1]+"",this.itemCount.text=this.data.count>1?t.CommonUtils.overLength(this.data.count):"")}else this.itemBg.source="quality_0",this.itemIcon.source="",this.itemCount.text="",this.removeEff()},i.prototype.removeEff=function(){this.itemMc&&(this.itemMc.destroy(),this.itemMc=null)},i.prototype.setVis=function(t){this.itemIcon.visible=t,this.itemCount.visible=t},i.prototype.setVisCompareImg=function(t){this.compareImg.visible=t},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.itemIcon.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.itemIcon.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.removeEff()},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(this.data){var n=i.localToGlobal();if(0==this.data.type){var s=t.GlobalConfig.StdItems[this._itemID];if(s){var a=t.TipsType.TIPS_EQUIP;this.data instanceof t.TradeLineData||this.data instanceof t.userItem?(a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,this.data,{x:n.x+i.width/2,y:n.y+i.height/2})):(a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2}))}s=null}else{var r=t.CurrencyUtils.getCurrencyNameIcon(this.data.type,this.data.id);r&&r[2]&&(t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,r[2],{x:n.x+i.width/2,y:n.y+i.height/2}),r=null)}n=null}i=null}},i}(t.BaseItemRender);t.ItemBase=e,__reflect(e.prototype,"app.ItemBase")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.icon&&(gamelib.DeviceUtils.IsMobile?this.icon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOver,this):(this.icon.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.icon.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this)),this.icon.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onDoubleClick,this)),this.count&&(this.count.visible=!1),this.txtAdd&&(this.txtAdd.visible=!1),this.txtName&&(this.txtName.visible=!1),this.effect&&(this.effect.visible=!1),this.frame&&(this.frame.visible=!1)},i.prototype.onOver=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=i.localToGlobal();if(this._userItem&&this._userItem.series)if(3==this._type){var s=t.CurrencyUtils.getCurrencyNameIcon(this._userItem.wItemId);s&&s[2]&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,s[2],{x:n.x+i.width/2,y:n.y+i.height/2})}else t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_ROLE_EQUIP,this._userItem,{x:n.x+i.width/2,y:n.y+i.height/2},this._type);if(this._stdItems){var a=i.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,this._stdItems,{x:a.x+i.width/2,y:a.y+i.height/2})}if(this.id){var s=t.CurrencyUtils.getCurrencyNameIcon(this.id);s&&s[2]&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,s[2],{x:n.x+i.width/2,y:n.y+i.height/2})}if(this.itemInfo){var a=i.localToGlobal();if(0==this.itemInfo.type?t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,this._stdItems,{x:a.x+i.width/2,y:a.y+i.height/2}):t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,this.itemInfo.item[2],{x:n.x+i.width/2,y:n.y+i.height/2}),0==this.itemInfo.type){var r=t.GlobalConfig.StdItems[this.itemInfo.id];r&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,r,{x:a.x+i.width/2,y:a.y+i.height/2}),r=null}else{var s=t.CurrencyUtils.getCurrencyNameIcon(this.itemInfo.type,this.itemInfo.id);s&&s[2]&&(t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,s[2],{x:a.x+i.width/2,y:a.y+i.height/2}),s=null)}}n=null,i=null}},i.prototype.onDoubleClick=function(e){console.log("double_click"),0==this._type&&(t.SoundManager.ins().playEffect(t.SoundUtil.OTHER_EQUIP),t.EquipItemMgr.ins().sendTakeOffEquip(this._userItem.series,this._userItem.nPos))},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.icon.source=""},i.prototype.removeMc=function(){this.mc&&(this.mc.destroy(),this.mc=null)},i.prototype.removeItemMc=function(){this.itemMc&&(this.itemMc.destroy(),this.itemMc=null)},i.prototype.setEquipBg=function(t){this.equipBg.visible=!0,this.equipBg.source="equipd_"+t},i.prototype.setItem=function(e,i,n,s,a,r,o,l){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=0),void 0===a&&(a=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===l&&(l="quality_0"),this.resum(),this.bg.source=l,this._stdItems=a,this._userItem=e,this.id=o,this.bestEquip.visible=!1,e&&""!=e.topLine&&void 0!=e.topLine&&(this.bestEquip.visible=!0),e?(this.starLabel.visible=e.wStar>0,this.starLabel.text="+"+e.wStar):this.starLabel.visible=!1,e&&e.wItemId){var h=t.GlobalConfig.StdItems[e.wItemId];h?(this.icon.source=h.icon+"",this.count.text=t.CommonUtils.overLength(e.btCount),11!=h.type&&12!=h.type&&13!=h.type&&14!=h.type&&(this.bg.source="quality_"+h.showQuality),h.iseffect&&1==h.iseffect?this.mc?this.mc.play():(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.blendMode=egret.BlendMode.ADD,this.mc.touchEnabled=!1,this.mc.x=32,this.mc.y=30,this.mc.playFileEff(ResDirEnum.RES_DIR_EFF+"wmeff",-1),this.addChild(this.mc)):this.removeMc(),h.itemEff?(this.itemMc||(this.itemMc=t.ObjectPool.pop("app.MovieClip"),this.itemMc.scaleX=this.itemMc.scaleY=1,this.itemMc.x=this.width/2,this.itemMc.y=this.height/2,this.itemMc.touchEnabled=!1,this.itemMc.blendMode=egret.BlendMode.ADD,this.addChild(this.itemMc)),this.itemMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zb"+h.itemEff,-1)):this.removeItemMc()):(this.removeMc(),this.removeItemMc())}else this.removeMc(),this.removeItemMc();i&&(this.bg.source="quality_"+i),n&&(this.icon.source=n+""),r>0?(this.count.text=t.CommonUtils.overLength(r),this.count.visible=!0):this.count.visible=!1,this._type=s},i.prototype.resum=function(t){void 0===t&&(t=0),this._userItem=null,this.bg.source=0==t?"qh_icon_bg":"",this.icon.source="",this.count.text="",this.bestEquip.visible=!1,this.removeMc(),this.removeItemMc(),this.starLabel.visible=!1},Object.defineProperty(i.prototype,"userItem",{get:function(){return this._userItem},enumerable:!0,configurable:!0}),i.prototype.setStengthenData=function(t,e,i,n,s){void 0===s&&(s=0),this.txtAdd.visible=!0,this.txtName.visible=!0,this.txtName.text=i,this.txtAdd.text="+"+n,this.bg.source=t,this.icon.source=e,this.effect.visible=1==s},i.prototype.setGetProps=function(e){var i=t.CurrencyUtils.getCurrencyNameIcon(e.type,e.id);this.itemInfo={item:i,type:e.type,id:e.id},i[1]?this.icon.source=i[1]+"":this.icon.source="",this.frame.source="quality_0";var n=14606562;i[3]>=0&&(n=t.ColorUtil.GOODS_COLOR[i[3]],this.frame.source="quality_"+i[3]);var s=i[0];s?this.txtName.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+n+"&T:"+s+"|"):this.txtName.text="",this.txtName.visible=!0},i.prototype.destroy=function(){this.icon&&(this.icon.removeEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onDoubleClick,this),gamelib.DeviceUtils.IsMobile?this.icon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOver,this):(this.icon.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.icon.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this))),this.removeMc(),t.DisplayUtils.removeFromParent(this)},i}(eui.Component);t.ItemSlot=e,__reflect(e.prototype,"app.ItemSlot",["eui.UIComponent","egret.DisplayObject"])}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.updatePetTime=0,i._petPickUpRange=0,i._hair=t.ObjectPool.pop("app.MovieClip"),i._hair.y=-1,i._hair.x=1,i._hair.visible=!1,i._bodyContainer.addChild(i._hair),i.touchEnabled=!1,i.touchChildren=!0,i}return __extends(i,e),i.prototype.removeAll=function(){this._hair.dispose();for(var e in this._disOrder){var i=this._disOrder[e];i!=this._body&&i!=this._hair&&(i instanceof t.MovieClip?(this.removeMcEvent(i),i.destroy(),i=null):t.DisplayUtils.removeFromParent(i),delete this._mcFileName[e],delete this._disOrder[e])}this._body.dispose(),this.removeBodyEvent(this._body),delete this._mcFileName[CharMcOrder.BODY]},i.prototype.loadOther=function(i){if(this.action==t.EntityAction.DIE){if(i!=CharMcOrder.BODY&&i!=CharMcOrder.WEAPON&&i!=CharMcOrder.BODYEFF&&i!=CharMcOrder.WEAPONEFF&&i!=CharMcOrder.HAIR){var n=this.getMc(i);return void(n&&(n.visible=!1))}}else{var n=this.getMc(i);n&&(n.visible=!0)}e.prototype.loadOther.call(this,i)},i.prototype.playBody=function(t){e.prototype.playBody.call(this,t)},i.prototype.getResDir=function(t){return this.dir%8},i.prototype.updateBlood=function(t){void 0===t&&(t=!1)},i.prototype.updateModel=function(){e.prototype.updateModel.call(this)},i.prototype.updateSuit=function(e){var i=this.propSet.getSuit();i!=e&&(this.propSet.setProperty(t.ActorPropertyModel.BODY_SUIT,e),this.parseModel())},i.prototype.parseModel=function(){this.setCharName(this.charName),this.updateBlood(!0);var t=this.propSet.getSex(),e=this.propSet.getSuit();e?(this.removeAll(),this.initBody(),this.initHair(null),this._hair.visible=!1):(this._hair.visible=!0,this.propSet.getWeapon()?this.setWeaponFileName(this.propSet.getWeaponStr()):this.setWeaponFileName(null),this.initBody(ResDirEnum.RES_DIR_BODY+this.propSet.getBodyStr()+"_"+t),this.propSet.getFacte()?this.initHair(ResDirEnum.RES_DIR_HAIR+this.propSet.getFacteStr()+"_"+t):this.initHair(null),this.setBodyEff(this.propSet.getBodyEFFStr()),this.setWeaponEff(this.propSet.getWeaponEffStr())),this._hpBar.updateChaoWanVip(this.propSet.getVip())},i.prototype.getMapColor=function(){return this.getNameColor()},i.prototype.setNameTxtColor=function(){var e=t.EntityMgr.ins().getPayer;if(t.GameMap.getAACamp)e.propSet.getZYId()==this.propSet.getZYId()?this._nameTxt.textColor=t.ColorUtil.NAME_BLUE:this._nameTxt.textColor=t.ColorUtil.NAME_ORANGE;else{var i=t.FriendMgr.ins().concernIsFriend(this.propSet.getACTOR_ID());if(i)return void(this._nameTxt.textColor=i.getColor());var n=t.GameMap.getIsSafe;n?this.pkTextColor():this.propSet.getGuildId()&&e.propSet.getGuildId()?this.propSet.getGuildId()==e.propSet.getGuildId()?t.GameMap.getAAZY||t.GuildMgr.ins().declareWarAry.length?this._nameTxt.textColor=t.ColorUtil.NAME_BLUE:this.pkTextColor():t.GameMap.getAAZY||t.GuildMgr.ins().getIsDeclareWar(this.propSet.getGuildId())?this._nameTxt.textColor=t.ColorUtil.NAME_ORANGE:this.pkTextColor():t.GameMap.getAAZY?this._nameTxt.textColor=t.ColorUtil.GREEN_COLOR:this.pkTextColor(),t.DefaultMgr.ins().post_updateCharRectColor(this.recog,this.getNameColor())}},i.prototype.pkTextColor=function(){if(this.propSet.getPKState())if(this.isMy)this._nameTxt.textColor=t.ColorUtil.NAME_GREY;else{var e=t.TeamMgr.ins().getIsMyTeam(this.propSet.getACTOR_ID());e?this._nameTxt.textColor=t.ColorUtil.NAME_pinkGreen:this._nameTxt.textColor=t.ColorUtil.NAME_GREY}else if(this.propSet.getPKValue()<=50)if(this.isMy)this._nameTxt.textColor=t.ColorUtil.NAME_WHITE;else{var e=t.TeamMgr.ins().getIsMyTeam(this.propSet.getACTOR_ID());e?this._nameTxt.textColor=t.ColorUtil.NAME_pinkGreen:this._nameTxt.textColor=t.ColorUtil.NAME_WHITE}else this.propSet.getPKValue()>50&&this.propSet.getPKValue()<=100?this._nameTxt.textColor=t.ColorUtil.NAME_YELLOW:this._nameTxt.textColor=t.ColorUtil.NAME_RED},i.prototype.deadDelay=function(){this._hpBar&&(this._hpBar.value=0),this.removeAllBuff(),this.atking=!1,t.TimerManager.ins().removeAll(this)},i.prototype.showBodyContainer=function(){this.isDead=!1,this.deadChar=!1,this.updateHbName(),this.isShowBody?(this.playAction(t.EntityAction.STAND),this.playAction(t.EntityAction.STAND)):e.prototype.showBodyContainer.call(this),this.isMy&&t.ViewManager.gamescene.map.mpaGrey(!1)},i.prototype.resurgenceChar=function(){this.initialize(),this.showBodyContainer(),this.playAction(t.EntityAction.STAND)},i.prototype.hideBodyContainer=function(){this.isShowBody&&e.prototype.hideBodyContainer.call(this)},Object.defineProperty(i.prototype,"isCharRole",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.advanceTime=function(i){if(e.prototype.advanceTime.call(this,i),this.pickUpPet){if(i-this.updatePetTime>t.StandardActionsTime.SAM_WALK_TIME){this.updatePetTime=i;var n=this.currentX-gamelib.AStar.NEIGHBORPOS_X_VALUES[this.dir],s=this.currentY-gamelib.AStar.NEIGHBORPOS_Y_VALUES[this.dir];this.pickUpPet.setXY_Dir(n,s,this.dir,i+t.StandardActionsTime.SAM_WALK_TIME)}this.pickUpPet.advanceTime(i)}},i.prototype.onDead=function(e){this.isDead||(this.isDead=!0,t.EntityMgr.ins().delGridChar(this.recog),this.CharVisible&&(0==this.propSet.getSex()?t.SoundUtil.ins().playManDie():t.SoundUtil.ins().playWoManDie()),this.playAction(t.EntityAction.DIE,e),this.remHP())},i.prototype.setHumanAction=function(t){e.prototype.setHumanAction.call(this,t)},i.prototype.setNearChat=function(e){var i=this;t.TimerManager.ins().removeAll(this._chatTxt),this._chatTxt.visible=!0,this._chatTxt.textFlow=t.TextFlowMaker.generateTextFlow(e),this._chatTxt.y=-102-this._chatTxt.height,t.TimerManager.ins().doTimerDelay(1e4,0,1,function(){i._chatTxt&&(t.TimerManager.ins().removeAll(i._chatTxt),i._chatTxt.visible=!1)},this)},i.prototype.getValueByBit=function(t){var e=t>>5,i=31&t;return Boolean(this.propSet.getAreaState()[e]>>>i&1)},Object.defineProperty(i.prototype,"getIsSafe",{get:function(){return this.getValueByBit(1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"getAAZY",{get:function(){this.getValueByBit(13);return this.getValueByBit(13)},enumerable:!0,configurable:!0}),i.prototype.updateCustomisedTitle=function(){if(this.isMy||t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Bit3)){var e=this.propSet.getCurCustomTitle();if(t.GlobalConfig.CustomisedTitleConfig){var i=t.GlobalConfig.CustomisedTitleConfig[e];if(i)return this._titleMc||(this._titleMc=t.ObjectPool.pop("app.MovieClip")),t.ViewManager.gamescene.map.addTitle2MC(this._titleMc),void this._titleMc.playFile(ResDirEnum.RES_DIR_TITLE+i.icon,-1)}}this._titleMc&&(this._titleMc.destroy(),this._titleMc=null)},i.prototype.updateTitle=function(){if(this.isMy||t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Bit3)){var e=this.propSet.getTITLE();if(e){var i=t.GlobalConfig.TitleConfig[e];if(i)return i.effect?(!this._titleImage||this._titleImage instanceof t.MovieClip||(t.DisplayUtils.removeFromParent(this._titleImage),this._titleImage=null),this._titleImage||(this._titleImage=t.ObjectPool.pop("app.MovieClip")),t.ViewManager.gamescene.map.addTitleMC(this._titleImage),this._titleImage.playFile(ResDirEnum.RES_DIR_TITLE+i.icon,-1)):(this._titleImage&&this._titleImage instanceof t.MovieClip&&(this._titleImage.destroy(),this._titleImage=null),this._titleImage||(this._titleImage=t.ViewManager.gamescene.map.getTitleImage(),t.ViewManager.gamescene.map.addTitleImage(this._titleImage)),this._titleImage.source=i.icon),void(this._titleImage.visible=!0)}}this._titleImage&&(this._titleImage instanceof t.MovieClip?(this._titleImage.destroy(),this._titleImage=null):(t.DisplayUtils.removeFromParent(this._titleImage),this._titleImage=null))},i.prototype.updatePet=function(){var e=this.isShowPetId();e?(this.pickUpPet||(this.pickUpPet=new t.PickUpPet),t.ViewManager.gamescene.map.addPickUpPet(this.pickUpPet),this.pickUpPet.playMC(e)):(this.pickUpPet&&this.pickUpPet.destruct(),this.pickUpPet=null)},Object.defineProperty(i.prototype,"petPickUpRange",{get:function(){return this._petPickUpRange},enumerable:!0,configurable:!0}),i.prototype.isShowPetId=function(){this._petPickUpRange=0;var e=this.propSet.getPickUpPet();if(e){if(t.GameMap.isNoPickUp)return null;if(!this.isMy&&!t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_shieldPet))return null}var i=t.GlobalConfig.lootPetConfig;for(var n in i)for(var s in i[n])if(+s==e)return this._petPickUpRange=i[n][s].nDropPetLootDistance,i[n][s].icon;return null},i}(t.CharMonster);t.CharRole=e,__reflect(e.prototype,"app.CharRole")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.propValueObj=null,this.init()}return e.prototype.init=function(){this.propValueObj={}},e.prototype.readProperty=function(i,n){if(i==t.ActorPropertyModel.NEXT_ACK_SKILLID)return this.propValueObj[t.ActorPropertyModel.ACK_SKILLID]=n.readUnsignedShort(),void(this.propValueObj[t.ActorPropertyModel.ACK_SKILLLEVEL]=n.readUnsignedShort());if(i==t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE)return this.propValueObj[t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE]=n.readUnsignedShort(),void(this.propValueObj[t.ActorPropertyModel.ACTOR_FASHION_DISPLAY]=n.readUnsignedShort());if(i==t.ActorPropertyModel.AP_WEAPON)return this.propValueObj[t.ActorPropertyModel.AP_WEAPON]=n.readUnsignedShort(),void(this.propValueObj[t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY]=n.readUnsignedShort());var s,a=this.getDataType(i);switch(a){case e.DT_UNSIGNED_INT:s=n.readUnsignedInt();break;case e.DT_FLOAT:s=n.readFloat();break;case e.DT_DOUBLE:s=n.readNumber();break;default:s=n.readInt()}this.propValueObj[i]=s},e.prototype.setProperty=function(t,e){this.propValueObj[t]=e},e.prototype.getPropValueObj=function(){return this.propValueObj},e.prototype.getX=function(){return this.getValue(t.ActorPropertyModel.AP_X)},e.prototype.getY=function(){return this.getValue(t.ActorPropertyModel.AP_Y)},e.prototype.getSex=function(){return this.getValue(t.ActorPropertyModel.AP_SEX)},e.prototype.getHp=function(){return this.getValue(t.ActorPropertyModel.AP_HP)},e.prototype.getHpPercentage=function(){return this.getHp()/this.getMaxHp()*100},e.prototype.getCurMp=function(){return this.getValue(t.ActorPropertyModel.AP_MP)},e.prototype.getMaxHp=function(){return this.getValue(t.ActorPropertyModel.AP_MAX_HP)},e.prototype.getMaxMp=function(){return this.getValue(t.ActorPropertyModel.AP_MAX_MP)},e.prototype.getMpPercentage=function(){return this.getCurMp()/this.getMaxMp()*100},e.prototype.getName=function(){return this.getValue(t.ActorPropertyModel.ACTOR_NAME)+""},e.prototype.getGuildName=function(){return this.getValue(t.ActorPropertyModel.ACTOR_GUILD_NAME)+""},e.prototype.getMasterName=function(){return this.getValue(t.ActorPropertyModel.ACTOR_HANDLER_NAME)+""},e.prototype.getColor=function(){return this.getValue(t.ActorPropertyModel.ACTOR_NAME_COLOR)},e.prototype.getLevel=function(){return this.getValue(t.ActorPropertyModel.AP_LEVEL)},e.prototype.getVip=function(){return Main.gameParameter.pfID==t.PlatFormID.QQGame||Main.gameParameter.pfID==t.PlatFormID.YY?this.getValue(t.ActorPropertyModel.AP_ACTOR_VIP_GRADE):0},e.prototype.getZSLevel=function(){return this.getValue(t.ActorPropertyModel.AP_ACTOR_CIRCLE)},e.prototype.getZSSoul=function(){return this.getValue(t.ActorPropertyModel.AP_ACTOR_CIRCLE_SOUL)},e.prototype.getRecycleIntergral=function(){return this.getValue(t.ActorPropertyModel.PROP_RECYCLE_INTEGRAL)},e.prototype.getState=function(){return this.getValue(t.ActorPropertyModel.AP_STATE)},e.prototype.getFacte=function(){return this.getValue(t.ActorPropertyModel.AP_FACE_ID)},e.prototype.getFacteStr=function(){return"hair"+this.PrefixInteger(this.getValue(t.ActorPropertyModel.AP_FACE_ID),3)},e.prototype.getBody=function(){return this.getValue(t.ActorPropertyModel.AP_BODY_ID)},e.prototype.getBodyModelStr=function(){return"body"+this.PrefixInteger(this.getValue(t.ActorPropertyModel.AP_BODY_ID),3)},e.prototype.getBodyStr=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE)?"body"+this.PrefixInteger(this.getValue(t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE),3):"body"+this.PrefixInteger(this.getValue(t.ActorPropertyModel.AP_BODY_ID),3)},e.prototype.getFashionBodyStr=function(){return"body"+this.PrefixInteger(this.getValue(t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE),3)},e.prototype.getFashionWeaponStr=function(){return 0==this.getValue(t.ActorPropertyModel.AP_WEAPON)?"":"weapon"+this.PrefixInteger(this.getValue(t.ActorPropertyModel.AP_WEAPON),3)+"_"+this.getSex()},e.prototype.getBodyEFFStr=function(){return 0==this.getValue(t.ActorPropertyModel.ACTOR_FASHION_DISPLAY)?"":"bodyeff_"+this.getValue(t.ActorPropertyModel.ACTOR_FASHION_DISPLAY)+"_"+this.getSex()},e.prototype.getWeaponEffStr=function(){return 0==this.getValue(t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY)?"":"weaponeff"+this.PrefixInteger(this.getValue(t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY),3)+"_"+this.getSex()},e.prototype.PrefixInteger=function(t,e){return(Array(e).join("0")+t).slice(-e)},e.prototype.getFashionDisplayStr=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE)},e.prototype.getWeaponDisplayStr=function(){return this.getValue(t.ActorPropertyModel.AP_WEAPON)},e.prototype.getRace=function(){return this.getValue(t.ActorPropertyModel.ACTOR_RACE)},e.prototype.getSuit=function(){return this.getValue(t.ActorPropertyModel.BODY_SUIT)},e.prototype.getACTOR_ID=function(){return this.getValue(t.ActorPropertyModel.AP_ACTOR_ID)},e.prototype.getAP_JOB=function(){return this.getValue(t.ActorPropertyModel.AP_JOB)},e.prototype.getNextAckSkillId=function(){return this.getValue(t.ActorPropertyModel.ACK_SKILLID)},e.prototype.getNextAckSkillLevel=function(){return this.getValue(t.ActorPropertyModel.ACK_SKILLLEVEL)},e.prototype.getBindCoin=function(){return this.getValue(t.ActorPropertyModel.AP_BIND_COIN)},e.prototype.getNotBindCoin=function(){return this.getValue(t.ActorPropertyModel.AP_NOT_BIND_COIN)},e.prototype.getBindYuanBao=function(){return this.getValue(t.ActorPropertyModel.AP_BIND_YUANBAO)},e.prototype.getWarCurrency=function(){return this.getValue(t.ActorPropertyModel.WAR_CURRENCY)},e.prototype.getNotBindYuanBao=function(){return this.getValue(t.ActorPropertyModel.AP_NOT_BIND_YUANBAO)},e.prototype.getValue=function(t){return this.propValueObj[t]},e.prototype.getHandler=function(){return this.getValue(t.ActorPropertyModel.ACTOR_HANDLER)},e.prototype.getPowerValue=function(){return this.getValue(t.ActorPropertyModel.AP_POWER_VALUE)},e.prototype.getDir=function(){return this.getValue(t.ActorPropertyModel.AP_DIR)},e.prototype.getSpeedMedicine=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_SPEED_MEDICINE)},e.prototype.getPKtype=function(){return this.getValue(t.ActorPropertyModel.AP_PK_MODE)},e.prototype.getPKState=function(){return this.getValue(t.ActorPropertyModel.AP_MALICE_STATE)},e.prototype.getPKValue=function(){return this.getValue(t.ActorPropertyModel.AP_PK_VALUE)},e.prototype.getEXP=function(){var e=this.getValue(t.ActorPropertyModel.AP_EXP_L),i=this.getValue(t.ActorPropertyModel.AP_EXP_H);return t.MathUtils.MakeLong64(e,i)},e.prototype.getActorId=function(){return this.getValue(t.ActorPropertyModel.ACTOR_HANDLER)},e.prototype.getWeaponStr=function(){return"weapon"+this.PrefixInteger(this.getWeapon(),3)+"_"+this.getSex()},e.prototype.getPetrification=function(){return this.getValue(t.ActorPropertyModel.PETRIFICATION)},e.prototype.getWeapon=function(){return this.getValue(t.ActorPropertyModel.AP_WEAPON)},e.prototype.getmultipleExp=function(){return t.MathUtils.MakeLong64(this.getValue(t.ActorPropertyModel.AP_MAX_EXP_L),this.getValue(t.ActorPropertyModel.AP_MAX_EXP_H))},e.prototype.getFlyshoes=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_FLYSHOES)},e.prototype.getGuildId=function(){return this.getValue(t.ActorPropertyModel.AP_GUILD_ID)},e.prototype.getGuildDevote=function(){return this.getValue(t.ActorPropertyModel.AP_GUILD_CON)},e.prototype.getAreaState=function(){return[this.getValue(t.ActorPropertyModel.PROP_AREASTATE1),this.getValue(t.ActorPropertyModel.PROP_AREASTATE2),0,0]},e.prototype.getBoratnum=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_BORATNUM)},e.prototype.getIntegral=function(){return this.getValue(t.ActorPropertyModel.PROP_RECYCLE_INTEGRAL)},e.prototype.getPhysicalAttackMin=function(){return this.getValue(t.ActorPropertyModel.AP_PHYSICAL_ATTACK_MIN)},e.prototype.getPhysicalAttackMax=function(){return this.getValue(t.ActorPropertyModel.AP_PHYSICAL_ATTACK_MAX)},e.prototype.getMagicAttackMin=function(){return this.getValue(t.ActorPropertyModel.AP_MAGIC_ATTACK_MIN)},e.prototype.getMagicAttackMax=function(){return this.getValue(t.ActorPropertyModel.AP_MAGIC_ATTACK_MAX)},e.prototype.getWizardAttackMin=function(){return this.getValue(t.ActorPropertyModel.AP_WIZARD_ATTACK_MIN)},e.prototype.getWizardAttackMax=function(){return this.getValue(t.ActorPropertyModel.AP_WIZARD_ATTACK_MAX)},e.prototype.getPhysicalDefenceMin=function(){return this.getValue(t.ActorPropertyModel.AP_PHYSICAL_DEFENCE_MIN)},e.prototype.getPhysicalDefenceMax=function(){return this.getValue(t.ActorPropertyModel.AP_PHYSICAL_DEFENCE_MAX)},e.prototype.getMagicDefenceMin=function(){return this.getValue(t.ActorPropertyModel.AP_MAGIC_DEFENCE_MIN)},e.prototype.getMagicDefenceMax=function(){return this.getValue(t.ActorPropertyModel.AP_MAGIC_DEFENCE_MAX)
},e.prototype.getApHitRate=function(){return this.getValue(t.ActorPropertyModel.AP_HIT_RATE)},e.prototype.getApGogeRate=function(){return this.getValue(t.ActorPropertyModel.AP_DOGE_RATE)},e.prototype.getMagicHitRate=function(){return this.getValue(t.ActorPropertyModel.AP_MAGIC_HIT_RATE)},e.prototype.getMagicDogeRate=function(){return this.getValue(t.ActorPropertyModel.AP_MAGIC_DOGERATE)},e.prototype.getApLuck=function(){return this.getValue(t.ActorPropertyModel.AP_LUCK)},e.prototype.getMeridians=function(){return this.getValue(t.ActorPropertyModel.PROP_MERIDIANS_LEVEL)},e.prototype.getTradeQuota=function(){return t.MathUtils.MakeLong64(this.getValue(t.ActorPropertyModel.PROP_TRADING_QUOTA_L),this.getValue(t.ActorPropertyModel.PROP_TRADING_QUOTA_H))},e.prototype.getActivity=function(){return this.getValue(t.ActorPropertyModel.AP_VALUE)},e.prototype.getPopularity=function(){return this.getValue(t.ActorPropertyModel.AP_POPULARITY)},e.prototype.getBless=function(){return this.getValue(t.ActorPropertyModel.AP_ZJ_VALUE)},e.prototype.getHpRenew=function(){return this.getValue(t.ActorPropertyModel.AP_CURSE)},e.prototype.getMpRenew=function(){return this.getValue(t.ActorPropertyModel.AP_TOXIC_DOGERATE)},e.prototype.getZYId=function(){return this.getValue(t.ActorPropertyModel.AP_ZY_ID)},e.prototype.getGoldEquipAttr1=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR1)},e.prototype.getGoldEquipAttr2=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR2)},e.prototype.getGoldEquipAttr3=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR3)},e.prototype.getGoldEquipAttr4=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR4)},e.prototype.getGoldEquipAttr5=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR5)},e.prototype.getGoldEquipAttr6=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR6)},e.prototype.getGoldEquipAttr7=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR7)},e.prototype.getGoldEquipAttr8=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR8)},e.prototype.getPropCritRate=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_CRIT_RATE)},e.prototype.getPropCritPower=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_CRIT_POWER)},e.prototype.getPropCritMutRate=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_CRIT_MUTRATE)},e.prototype.getMonthCardTimer=function(){return this.getValue(t.ActorPropertyModel.AP_VIP_YELLOW_TIME)},e.prototype.getBigDrugMonthCardTimer=function(){return this.getValue(t.ActorPropertyModel.AP_ACTOR_FORCE)},e.prototype.getVipState=function(){return this.getValue(t.ActorPropertyModel.AP_VIP_TYPE)},e.prototype.getVipCardState=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_CIRCLEPOTENTIALPOINT)},e.prototype.getTITLE=function(){return this.getValue(t.ActorPropertyModel.AP_ACTOR_HEAD_TITLE)},e.prototype.getCurCustomTitle=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_CURCUSTOMTITLE)},e.prototype.getForbidenTime=function(){return Math.floor(t.GlobalFunc.formatMiniDateTime(this.getValue(t.ActorPropertyModel.FORBIDEN_TIME))/1e3)},e.prototype.getRechargeSum=function(){return this.getValue(t.ActorPropertyModel.AP_DRAW_YB_COUNT)},e.prototype.getPetState=function(){return this.getValue(t.ActorPropertyModel.PETSTATE)},e.prototype.getDamagebonus=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_DAMAGEBONUS)},e.prototype.getDamagededuct=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_DEDUCT_DAMAGE)},e.prototype.getCut=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_CUT)},e.prototype.getAckRate=function(){var e=this.getValue(t.ActorPropertyModel.ACK_RATE);return e?e/1e4+1:1},e.prototype.getAckRatio=function(){return this.getValue(t.ActorPropertyModel.ACK_RATE)},e.prototype.getPickUpPet=function(){return this.getValue(t.ActorPropertyModel.AP_PICKUPPET)},e.prototype.getPickUpPetRange=function(){return this.getValue(t.ActorPropertyModel.AP_PICKUPPET_RANGE)},e.prototype.getSuckblood=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_SUCKBLOOD)},e.prototype.getIgnordefence=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_IGNORDEFENCE)},e.prototype.getLootbindcoin=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_LOOTBINDCOIN)},e.prototype.getExpPower=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_EXP_POWER)},e.prototype.getHpBonus=function(){return this.getValue(t.ActorPropertyModel.HP_bonus)},e.prototype.getViolent=function(){return this.getValue(t.ActorPropertyModel.AP_ACTOR_VIP_POINT)},e.prototype.getPKDamageReduction=function(){return this.getValue(t.ActorPropertyModel.PK_DAMAGE_REDUCTION)},e.prototype.getOfficialPositicon=function(){return this.getValue(t.ActorPropertyModel.OFFICIAL_POSITION)},e.prototype.getProtection=function(){return this.getValue(t.ActorPropertyModel.PROP_PROTECTION)},e.prototype.getRecoverState=function(){return this.getValue(t.ActorPropertyModel.AP_ACTOR_RECOVERSTATE)},e.prototype.getDimensionKey=function(){return this.getValue(t.ActorPropertyModel.AP_DIMENSION_KEY)},e.prototype.getResurrection=function(){return this.getValue(t.ActorPropertyModel.RESURRECTION_VIP)},e.prototype.getSkillAttr1=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_HALFMONTHS_INCREASEDAMAGE)},e.prototype.getSkillAttr2=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_FIRE_INCREASEDAMAGE)},e.prototype.getSkillAttr3=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_DAYBYDAY_INCREASEDAMAGE)},e.prototype.getSkillAttr4=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_ICESTORM_INCREASEDAMAGE)},e.prototype.getSkillAttr5=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_FIRERAIN_INCREASEDAMAGE)},e.prototype.getSkillAttr6=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_THUNDER_INCREASEDAMAGE)},e.prototype.getSkillAttr7=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_BLOODBITE_INCREASEDAMAGE)},e.prototype.getSkillAttr8=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_FIRESIGN_INCREASEDAMAGE)},e.prototype.getSkillAttr9=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_HALFMONTHS_REDUCEDAMAGE)},e.prototype.getSkillAttr10=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_FIRE_REDUCEDAMAGE)},e.prototype.getSkillAttr11=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_DAYBYDAY_REDUCEDAMAGE)},e.prototype.getSkillAttr12=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_ICESTORM_REDUCEDAMAGE)},e.prototype.getSkillAttr13=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_FIRERAIN_REDUCEDAMAGE)},e.prototype.getSkillAttr14=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_THUNDER_REDUCEDAMAGE)},e.prototype.getSkillAttr15=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_BLOODBITE_REDUCEDAMAGE)},e.prototype.getSkillAttr16=function(){return this.getValue(t.ActorPropertyModel.PROP_ACTOR_FIRESIGN_REDUCEDAMAGE)},e.prototype.getRoleCreateTime=function(){var e=this.getValue(t.ActorPropertyModel.PROP_ACTOR_ROLE_CREATETIME);return t.DateUtils.formatMiniDateTime(e)},e.prototype.getGuildLevel=function(){return this.getValue(t.ActorPropertyModel.PROP_GUILD_LEVEL)},e.prototype.getMonsterAscriptionId=function(){return this.getValue(t.ActorPropertyModel.PROP_MONSTER_ASCRIPTIONID)},e.prototype.getDataType=function(i){switch(i){case t.ActorPropertyModel.AP_X:case t.ActorPropertyModel.AP_Y:case t.ActorPropertyModel.AP_BODY_ID:case t.ActorPropertyModel.AP_DIR:case t.ActorPropertyModel.AP_PHYSICAL_ATTACK_MIN:case t.ActorPropertyModel.AP_PHYSICAL_ATTACK_MAX:case t.ActorPropertyModel.AP_MAGIC_ATTACK_MIN:case t.ActorPropertyModel.AP_MAGIC_ATTACK_MAX:case t.ActorPropertyModel.AP_WIZARD_ATTACK_MIN:case t.ActorPropertyModel.AP_WIZARD_ATTACK_MAX:case t.ActorPropertyModel.AP_PHYSICAL_DEFENCE_MIN:case t.ActorPropertyModel.AP_PHYSICAL_DEFENCE_MAX:case t.ActorPropertyModel.AP_MAGIC_DEFENCE_MIN:case t.ActorPropertyModel.AP_MAGIC_DEFENCE_MAX:case t.ActorPropertyModel.AP_HIT_RATE:case t.ActorPropertyModel.AP_DOGE_RATE:case t.ActorPropertyModel.AP_LUCK:case t.ActorPropertyModel.AP_CURSE:case t.ActorPropertyModel.AP_WEAPON:case t.ActorPropertyModel.BODY_SUIT:case t.ActorPropertyModel.AP_PK_VALUE:case t.ActorPropertyModel.AP_EXPLOIT_VALUE:case t.ActorPropertyModel.NEXT_ACK_SKILLID:case t.ActorPropertyModel.AP_ZY_ID:case t.ActorPropertyModel.AP_ACTOR_SIGNIN:case t.ActorPropertyModel.AP_SIGN_IN:case t.ActorPropertyModel.PROP_ACTOR_TEAMFUBEN_TEAMID:case t.ActorPropertyModel.PROP_ACTOR_TEAMFUBEN_FBID:case t.ActorPropertyModel.AP_ACTOR_FORCE:case t.ActorPropertyModel.PROP_ACTOR_TEAMFUBEN_OUTPUT:case t.ActorPropertyModel.PROP_ACTOR_CRIT_POWER:case t.ActorPropertyModel.PROP_ACTOR_DEDUCT_CRIT:case t.ActorPropertyModel.AP_MAGIC_HIT_RATE:case t.ActorPropertyModel.AP_MAGIC_DOGERATE:case t.ActorPropertyModel.PROP_ACTOR_SPEED_MEDICINE:case t.ActorPropertyModel.PROP_ACTOR_DEDUCT_DAMAGE:case t.ActorPropertyModel.RESURRECTION_VIP:case t.ActorPropertyModel.PROP_ACTOR_ROLE_CREATETIME:return e.DT_INT;default:return e.DT_UNSIGNED_INT}},e.prototype.readMultiProperty=function(t,e){for(var i=0;t>i;i++)this.readProperty(e.readUnsignedByte(),e)},e.getPlayerTips=function(e,i){var n;1==i?n=t.LanguageUtils.tipsAttr:2==i?n=t.LanguageUtils.tipsFaShiAttr:3==i&&(n=t.LanguageUtils.tipsDaoShiAttr);for(var s in n)if(n[s].type==e)return n[s].value;return null},e.prototype.clear=function(){this.propValueObj=null},e.DT_BOOLEAN=1,e.DT_BYTE=2,e.DT_DOUBLE=3,e.DT_FLOAT=4,e.DT_INT=5,e.DT_SHORT=6,e.DT_UNSIGNED_BYTE=7,e.DT_UNSIGNED_INT=8,e.DT_UNSIGNED_SHORT=9,e.DT_STRING=10,e}();t.PropertySet=e,__reflect(e.prototype,"app.PropertySet")}(app||(app={}));var app;!function(t){var e;!function(e){e.language_Error_0="加载 default.thm.json 失败!! 失败次数：%s.",e.language_Error_1="皮肤加载失败，请检查网络重新登录",e.language_Error_2="寻路的起始位置参数无效：(%s,%s)",e.language_Error_3="寻路的目的位置参数无效：(%s,%s)",e.language_Error_4="MessageCenter未实现的类型",e.language_Error_5="打开界面只支持类名和类名的字符串形式,关闭界面只支持类名和类名的字符串以及类的实例形式,错误编号:",e.language_Error_6="新手引导未初始化就调用 canShow()",e.language_Error_7="网络中断--",e.language_Error_8="创建客户端数据包时数据不能为空！",e.language_Error_9="%s资源加载失败!!失败次数：%s",e.language_Error_10="请求进入游戏错误：",e.language_Error_11="名称无效，名称中包含非法字符或长度不合法",e.language_Error_12="玩家的状态不是进入游戏状态",e.language_Error_13="数据服务器返回错误",e.language_Error_14="角色名称重复",e.language_Error_100="未知错误",e.language_Error_101="正在拉起支付...\n如果长时间无响应，请检测网络状况重新购买",e.language_Error_102="测试期间请使用道具充值卡!",e.language_Error_103="订单号获取失败！",e.language_Error_104="请刷新，重新登录！",e.language_Error_105="你的账号在其他地方登录\n\n（请保护账号安全）\n\n请尝试重新登录",e.language_Error_108="当前区服注册已经关闭，请前往新区注册！",e.language_Error_109="订单号获取超时,请检查网络状况！",e.language_Error_110="渠道异常，请点击|C:0xeee104&T:+更多充值方式|充值",e.language_Error_111="+更多充值方式",e.language_Error_112="二维码已超时，请|C:0xeee104&T:刷新|再试",e.language_Error_113="该角色已被封禁！",e.language_Error_114="角色名中含有特殊字符，无法使用",e.language_Color_White="白色",e.language_Color_Green="绿色",e.language_Color_Purple="紫色",e.language_Color_Orange="橙色",e.language_Color_Red="红色",e.language_Color_Golden="金色",e.language_Chine_Yi="亿",e.language_Chine_Wan="万",e.language_Time_Sec="秒",e.language_Time_Min="分",e.language_Time_Hours="时",e.language_Time_Hours2="小时",e.language_Time_Days="天",e.language_Time_Sun="日",e.language_Time_Months="月",e.language_Time_Years="年",e.language_Alert_0="皮肤%s 与 %s 类名重复！！！",e.language_Alert_1="皮肤加载失败，请检查网络重新登录",e.language_Alert_2="皮肤加载失败，请检查网络重新登录",e.language_Alert_3="角色技能为空，isMy:%s,fbType:%s,fubenId:%s",e.language_System0="背包",e.language_System3="神装",e.language_System4="时装",e.language_System5="技能",e.language_System6="通用",e.language_System7="内功",e.language_System8="转生",e.language_System9="神戒",e.language_System10="快捷键设置",e.language_System11="选择玩家",e.language_System12="添加好友",e.language_System13="关系",e.language_System14="添加关注",e.language_System15="添加黑名单",e.language_System16="拆分",e.language_System17="金币转换",e.language_System18="组队",e.language_System19=[{txt:"一键回收",name:"keyRecycle"},{txt:"单件回收",name:"recycleMerchant"}],e.language_System20="物品回收",e.language_System21="回收可获得：",e.language_System22="从背包拖入物品可查看回收奖励",e.language_System23="这个东西我用不上还是你自己留着吧",e.language_System24="(概率获得)",e.language_System25=["金币","绑定金币","银两","元宝","经验值","转生修为","飞鞋点数","喇叭次数","回收积分","行会贡献","声望","活跃度","多倍经验"],e.language_System26="获得修为",e.language_System27="(必得)",e.language_System28="行会",e.language_System29="行会列表",e.language_System30=[{txt:"低级武器",name:"lowEquip"},{txt:"沃玛级及以下",name:"fertileEquip"},{txt:"祖玛级及以下",name:"zuMaEquip"}],e.language_System31="锻造坊",e.language_System32="合成坊",e.language_System33="锻造",e.language_System34="历史记录",e.language_System35="商城",e.language_System36="排行榜",e.language_System37="邮件",e.language_System38="药品",e.language_System39="装备",e.language_System40="材料",e.language_System41="元宝转换",e.language_System42="飞鞋",e.language_System43="私人交易",e.language_System44="邀请交易",e.language_System45="购买",e.language_System46="出售",e.language_System47="正在出售",e.language_System48="领取物品",e.language_System49="洗红名",e.language_System50="成就",e.language_System51="首领",e.language_System52="邀请组队",e.language_System53="膜拜",e.language_System54="水晶鉴定",e.language_System55="|C:0xff7700&T:没有攻击目标|",e.language_System56="升级!",e.language_System57="开启自动挂机",e.language_System58="自动挂机已关闭",e.language_System59="角色",e.language_System60="修改名字",e.language_System61="提示",e.language_System62="礼包选择",e.language_System63="四象之力",e.language_System64="强化",e.language_System65="地图",e.language_System66="神戒",e.language_System67="称号",e.language_System68="材料副本",e.language_System69="双击目标点可以自动寻路",e.language_System70="驻守任务",e.language_System71="获得道具",e.language_System72="激活后属性加成",e.language_System73="|C:0x28ee01&T:下一级属性加成|",e.language_System74="|C:0xcbc2b1&T:当前属性加成|",e.language_System75="聊 天",e.language_System76="经典",e.language_System77="重装",e.language_System78="领主",e.language_System79="禁地",e.language_System80="个人",e.language_System81="奖励预览",e.language_System82="任务提示",e.language_System83="激活",e.language_System84="升级",e.language_System85="已激活",e.language_System86="神魔",e.language_System87="活动",e.language_System88="洗炼",e.language_System89="活动",e.language_System90="沙城争霸",e.language_System91="活动说明",e.language_System92="元",e.language_System93="加官进爵",e.language_System94="挂机时无法切换目标",e.language_System95="切换目标为",e.language_System96="再充值%s元宝就可以显示我的QQ号哦~",e.language_System97="验证填写信息：角色名，服务器，充值金额等，验证成功后，即可享受贴心服务。",e.language_System98="|C:0xff7700&T:您还不是超级会员|",e.language_System99="兵魂",e.language_System100="跨服次元",e.language_System101="圣宠",e.language_System102="再充值%s元宝就可以显示我的微信号哦~",e.language_System103="没有可切换玩家",e.language_System104="没有可切换怪物",e.language_System105="，当前目标为",e.language_System106="再充值%s元宝就可以显示我的QQ号和微信号哦~",e.language_System107="再充值%s元宝就可以加美女客服哦~",e.language_System108="字诀",e.language_Common_0="转",e.language_Common_1="级",e.language_Common_2="【极品】",e.language_Common_3="全职业",e.language_Common_4="【可交易】",e.language_Common_5="【可交易】【不可寄售】",e.language_Common_6="【装备】",e.language_Common_7="【材料】",e.language_Common_8="【慢回药品】",e.language_Common_9="【瞬回药品】",e.language_Common_10="【传送卷轴】",e.language_Common_11="穿戴等级：",e.language_Common_12="穿戴性别：",e.language_Common_13="职业要求：",e.language_Common_14="沙巴克城主专属",e.language_Common_15="转生要求：",e.language_Common_16="转之上",e.language_Common_17="转之下",e.language_Common_18="药品回复率提升+",e.language_Common_19="待拆分道具",e.language_Common_20="第一堆",e.language_Common_21="第二堆",e.language_Common_22="请输入需要拆分的数量",e.language_Common_23="金 币",e.language_Common_24="绑定金币",e.language_Common_25="请输入想要转换的数量",e.language_Common_26="当前拥有",e.language_Common_27="确认丢弃该道具吗？丢弃将直接销毁",e.language_Common_28="玩家战力：",e.language_Common_29="|C:0x28ee01&T:在线|",e.language_Common_30="要开始一键回收吗？默认只会回收商店可出售的无极品属性的装备，可在设置-回收中更改一键回收所包含的物品",e.language_Common_31="将要批量回收背包中所有的炼狱、银蛇、魔杖和普通武器，确定吗？",e.language_Common_32="将要批量回收背包中所有的井中月、无极棍、祈祷之刃、炼狱、银蛇、魔杖和普通武器，确定吗？",e.language_Common_33="获得",e.language_Common_34="合成",e.language_Common_35="锻造一次消耗%s个%s",e.language_Common_36="您当前拥有%s颗",e.language_Common_37="即将消耗",e.language_Common_38="个",e.language_Common_39="你确定使用%s元宝购买%s*%s吗？",e.language_Common_40="元 宝",e.language_Common_41="银 两",e.language_Common_42="特权等级达到",e.language_Common_43="开启",e.language_Common_44="交易请求已发出，请等待对方同意",e.language_Common_45="已锁定",e.language_Common_46="邀请与您交易，是否同意",e.language_Common_47="出售价格：                  元宝",e.language_Common_48="上架手续费:",e.language_Common_49="交易成功后将扣除售价的|C:0x28ee01&T:%s%|交易税",e.language_Common_50="手续费：",e.language_Common_51="获得元宝：",e.language_Common_52="正在出售物品：|C:0x28ee01&T:%s|",e.language_Common_53="无限制",e.language_Common_54="交易额度：",e.language_Common_55=["近战物理攻击，是团队中最坚强的中流砥柱","远程魔法攻击，是团队中输出伤害的佼佼者","远程道术攻击，是团队中的优秀指挥官"],e.language_Common_56="多倍经验：",e.language_Common_57="多倍经验使用完毕\n明日上线自动领取",e.language_Common_58="【多倍经验】",e.language_Common_59="确 定",e.language_Common_60="取 消",e.language_Common_61="次数:",e.language_Common_62="剩余次数：",e.language_Common_63="不限次数",e.language_Common_64="剩余%s次",e.language_Common_65="剩余时间：",e.language_Common_66="确认并退出",e.language_Common_67="退  出",e.language_Common_68="秒后自动领取",e.language_Common_69="秒后自动退出",e.language_Common_70="回城复活",e.language_Common_71="立即复活     *",e.language_Common_72="完成任务",e.language_Common_73="接受任务",e.language_Common_74="目标：",e.language_Common_75="剩余复活次数:",e.language_Common_76="活动已结束,恭喜获得%s积分,排名第%s",e.language_Common_77="原地复活",e.language_Common_78="随机复活",e.language_Common_79="定点复活",e.language_Common_80="回城复活",e.language_Common_81="阵营复活",e.language_Common_82="开放时间：",e.language_Common_83="阵营转换时间：",e.language_Common_84="|C:0xff7700&T:等级或转生等级不足|",e.language_Common_85="|C:0xff7700&T:该装备与性别不符，不可穿戴|",e.language_Common_86="|C:0xff7700&T:该装备与职业不符，不可穿戴|",e.language_Common_87="|C:0xff7700&T:必须为沙巴克城主才可穿戴|",e.language_Common_88="|C:0xff7700&T:战力不足|",e.language_Common_89="转生必须大于等于%s转才可穿戴",e.language_Common_90="转生必须小于等于%s转才可穿戴",e.language_Common_91="区服信息",e.language_Common_92="当前合服次数：",e.language_Common_93="开服天数：第",e.language_Common_94="当前服务器：",e.language_Common_95="第一名  ",e.language_Common_96="第二名  ",e.language_Common_97="第三名  ",e.language_Common_98="  完成了最后一击！",e.language_Common_99="|C:0xf30302&T:只能召唤一只宠物|",e.language_Common_100="免费传送",e.language_Common_101="当前波数：",e.language_Common_102="当前剩余怪物：",e.language_Common_103="|C:0xffffff&T:活动已登录|%s|C:0xffffff&T:天|",e.language_Common_104="剩余",e.language_Common_105="开服第%s天开启",e.language_Common_106="|C:0xb4926c&T:花费||C:0xe07e02&T:%s||C:0xb4926c&T:元宝即可购买||C:0xe07e02&T:%s|",e.language_Common_107="任务目标",e.language_Common_108="|C:0xe5ddcf&T:有效期：|",e.language_Common_109="|C:0xe5ddcf&T:永久|",e.language_Common_110="数量:",e.language_Common_111="新服好礼",e.language_Common_112="日常福利",e.language_Common_113="YY会员1~3级",e.language_Common_114="YY会员4~6级",e.language_Common_115="YY会员7~8级",e.language_Common_116="每日礼包",e.language_Common_117="每周礼包",e.language_Common_118="升级并购买",e.language_Common_119="开通并购买",e.language_Common_120="领 取",e.language_Common_121="升级并领取",e.language_Common_122="开通并领取",e.language_Common_123="新手礼包",e.language_Common_124="登录礼包",e.language_Common_125="等级礼包",e.language_Common_126="YY贵族礼包",e.language_Common_127="|C:0xDCB789&T:使用YY游戏大厅，累计登录||C:0x1EC605&T:%s||C:0xDCB789&T:天领取",e.language_Common_128="|C:0xDCB789&T:使用YY游戏大厅，且游戏角色等级达到||C:0x1EC605&T:%s||C:0xDCB789&T:级可领取",e.language_Common_129="|C:0xDCB789&T:YY等级达到||C:0x1EC605&T:%s||C:0xDCB789&T:级，可领取",e.language_Common_130="|C:0xDCB789&T:成为超级会员||C:0x1EC605&T:VIP%s||C:0xDCB789&T:即可领取",e.language_Common_131="专属",e.language_Common_132="今日剩余次数:",e.language_Common_133="超玩会员特权",e.language_Common_134="超玩每日礼包",e.language_Common_135="攻击中",e.language_Common_136="休息中",e.language_Common_137="自动施毒术（目标未中毒时自动释放）",e.language_Common_138="使用冰咆哮  |C:0xf30302&T:(需要学习冰咆哮)|",e.language_Common_139="金创药(小)",e.language_Common_140="金创药(中)",e.language_Common_141="强效金创药",e.language_Common_142="特级金创药",e.language_Common_143="魔法药(小)",e.language_Common_144="魔法药(中)",e.language_Common_145="强效魔法药",e.language_Common_146="特级魔法药",e.language_Common_147="太阳水",e.language_Common_148="强效太阳水",e.language_Common_149="万年雪霜",e.language_Common_150="疗伤药",e.language_Common_151="高画质",e.language_Common_152="低画质",e.language_Common_153="端游显示模式",e.language_Common_154="部位",e.language_Common_155="获取道具",e.language_Common_156="|C:0xF6883A&T:%s|",e.language_Common_157="自动流星火雨  |C:0xf30302&T:(需要学习流星火雨)|",e.language_Common_158="1倍",e.language_Common_159="1.25倍",e.language_Common_160="1.5倍",e.language_Common_161="当前成功率：",e.language_Common_162="多倍经验使用期间，\n打怪获得10倍经验加成，\n用完为止",e.language_Common_163="可获得%s多倍经验",e.language_Common_164="是否消耗 |C:0xe50000&T:队伍召集令x1| 召唤队友\n召唤位置：|C:0xff7700&T:%s（%s：%s）|",e.language_Common_165="是否消耗 |C:0xe50000&T:行会召集令x1| 召唤行会成员\n召唤位置：|C:0xff7700&T:%s（%s：%s）|",e.language_Common_166="%s使用|C:0xe50000&T:队伍召集令|召唤你\n位置：|C:0xff7700&T:%s（%s：%s）|\n该地图可能存在危险，是否前往？",e.language_Common_167="%s使用|C:0xe50000&T:行会召集令|召唤你\n位置：|C:0xff7700&T:%s（%s：%s）|\n该地图可能存在危险，是否前往？",e.language_Common_168="召唤队友",e.language_Common_169="行会召唤",e.language_Common_170="%s秒后自动进入游戏",e.language_Common_171="当前区服注册已经关闭，请前往新区注册！",e.language_Common_172="活动进行中",e.language_Common_173="今日",e.language_Common_174="明日",e.language_Common_175="祝 福",e.language_Common_176="自动祝福",e.language_Common_177="取 消",e.language_Common_178="|C:0xff7700&T:%s转或%s会员开启自动使用祝福油功能|",e.language_Common_179="点击后消耗飞鞋进行随机传送",e.language_Common_180="点击后回城",e.language_Common_181="会长/副会长点击后可进行行会召集\n行会召集令可在补给商城购买",e.language_Common_182="所有队伍成员点击后可进行队伍召集\n队伍召集令可在补给商城购买",e.language_Common_183="屏蔽他人特效",e.language_Common_184="游戏版本已更新，请重新登录，体验最新内容",e.language_Common_185="职业转换成功后：",e.language_Common_186="职业转换成功将重新登陆游戏转职不可逆转，请慎重选择转职后三内不可再次转置",e.language_Common_187="|C:0xff7700&T:您没有任何修改，请确认|",e.language_Common_189="|C:0xe5ddcf&T:你当前的选择为：||C:0xe50000&T:%s  %s| \n",e.language_Common_190="转职CD：|C:0xe50000&T:%s|",e.language_Common_191="角色名不能为空！",e.language_Common_192="前往官网充值",e.language_Common_193="新手注册礼包",e.language_Common_194="游戏成长礼包",e.language_Common_195="每日活跃礼包",e.language_Common_196="|C:0xDCB789&T:使用QQ游戏大厅，且游戏角色等级达到||C:0x1EC605&T:%s||C:0xDCB789&T:级可领取",e.language_Common_197="特权总览",e.language_Common_198="蓝钻Lv%s可领取",e.language_Common_199="蓝钻豪华版可领取",e.language_Common_200="年费蓝钻贵族可领取",e.language_Common_201="|C:0xDCB789&T:蓝钻用户角色等级达到||C:0x1EC605&T:%s||C:0xDCB789&T:级可领取",e.language_Common_202="%s专属快捷传送",e.language_Common_203="刷新时间段",e.language_Common_204="双击抢归属",e.language_Common_205="出 战",e.language_Common_206="召 回",e.language_Common_207="|U&T:更多蓝钻特权，请关注蓝钻官网",e.language_Common_208="表情无法和文字一起发送",e.language_Common_209="BOSS已刷新",e.language_Common_210="不再提示",e.language_Common_211="快捷使用",e.language_Common_212="使  用",e.language_Common_213="批量使用",e.language_Common_214="|C:0x28ee01&T:%s天后可以使用|",e.language_Common_215="请点击右侧按钮选择交易对象",e.language_Common_216="前往查看",e.language_Common_217="|C:0xe5ddcf&T:已开启特权：智能回收\n装备包裹满时可以自动一键回收\n在【设置-回收】中可以设定|",e.language_Common_218="摇钱树",e.language_Common_219="可获得：      |C:0x1EC605&T:%s(有10%几率暴击)|",e.language_Common_220="剩余次数:|C:0x1EC605&T:%s|",e.language_Common_221="消耗：      |C:0x1EC605&T:%s(优先消耗摇钱树叶)|",e.language_Common_222="|C:0x1EC605&T:累计在线时间：%s|",e.language_Common_223="可领取",e.language_Common_224="%s后领取",e.language_Common_225="|C:0x1EC605&T:(会员特权次数+%s)|",e.language_Common_226="未达成",e.language_Common_227="已达成",e.language_Common_228="次日登录领取",e.language_Common_229="当前已达最大",e.language_Common_230="阶",e.language_Common_231="跨服中......",e.language_Common_232="是否确认使用%s",e.language_Common_233="刷新倒计时：",e.language_Common_234="立即参与",e.language_Common_235="即将退出跨服，回到原服",e.language_Common_236="活动时间",e.language_Common_237="当前剩余人数：%s",e.language_Common_238="|C:0x28ee01&T:%s||C:0xe50000&T: 获得了归属奖励|",e.language_Common_239="您将获得以下奖励，奖励在回到原服后通过邮件发放",e.language_Common_240="次元首领已被击杀",e.language_Common_241="游戏已更新，建议重新登录，\n获得最佳体验！",e.language_Common_242="优先消耗",e.language_Common_243="|C:0xff7700&T:内功等级不足|",e.language_Common_244="内功要求：",e.language_Common_245="每日首次抽奖免费",e.language_Common_246="单次消耗",e.language_Common_247="逃脱人数：%s",e.language_Common_248="参与奖",e.language_Common_249="已逃脱",e.language_Common_250="三端互通",e.language_Common_251="%s后",e.language_Common_252="已拥有:",e.language_Common_253="恭喜你第%s个完成逃脱试炼！",e.language_Common_254="恭喜你获得了本次逃脱试炼的参与奖！",e.language_Common_255="已有",e.language_Common_256="还差",e.language_Common_257="总价",e.language_Common_258="消耗%s元宝补齐%s个%s",e.language_Common_259="%s转开启",e.language_Common_260="进行中",e.language_Common_261="今日剩余次数：",e.language_Common_262="您已完成再次充值",e.language_Common_263="升到",e.language_Common_264="加入行会才可使用",e.language_Common_265="|C:0xeee104&T:大玩家|是360游戏中心的VIP高级用户，在享受游戏给您带来快乐的同时，更享受诸多特权及优质的服务。",e.language_Common_266="使用盒子玩游戏,等级达到%s领取",e.language_Common_267="微端登录礼包",e.language_Common_268="vip等级达到%s领取",e.language_Common_269="角色等级达到%s领取",e.language_Common_270="大厅新手礼包",e.language_Common_271="大厅登录礼包",e.language_Common_272="大厅等级礼包",e.language_Common_273="登录天数达到%s天领取",e.language_Common_274="|C:0xe5ddcf&T:当前会员等级：||C:0x28ee01&T:%s|",e.language_Common_275="成为vip",e.language_Common_276="更多37福利特权,请关注37官网",e.language_Common_277="提高账号安全，账号丢失易找回",e.language_Common_278="获取超值大礼包",e.language_Common_279="会员等级达到%s领取",e.language_Common_280="更多特权",e.language_Common_281="立即开通迅雷会员",e.language_Common_282="恭喜您在线时长已达标,请前往领取奖励",e.language_Common_283="%s后奖励刷新",e.language_Chine_Number_0="零",e.language_Chine_Number_1="一",e.language_Chine_Number_2="二",e.language_Chine_Number_3="三",e.language_Chine_Number_4="四",e.language_Chine_Number_5="五",e.language_Chine_Number_6="六",e.language_Chine_Number_7="七",e.language_Chine_Number_8="八",e.language_Chine_Number_9="九",e.language_Chine_Number_10="十",e.language_Chine_Number_11="十一",e.language_Chine_Number_12="十二",e.language_Chine_Number_13="十三",e.language_Chine_Number_14="十四",e.language_Chine_Number_15="十五",e.language_Chine_Number_16="十六",e.language_Chine_Number_17="十七",e.language_Chine_Number_18="十八",e.language_Chine_Number_19="十九",e.language_Chine_Number_20="二十",e.language_Chine_Number_21="二十一",e.language_Chine_Number_22="二十二",e.language_Chine_Number_23="二十三",e.language_Chine_Number_24="二十四",e.language_Chine_Number_25="二十五",e.language_Chine_Number_26="二十六",e.language_Chine_Number_27="二十七",e.language_Chine_Number_28="二十八",e.language_Chine_Number_29="二十九",e.language_Chine_Number_30="三十",e.language_Chine_Number_31="三十一",e.language_Chine_Number_32="三十二",e.language_Chine_Number_33="三十三",e.language_Chine_Number_34="三十四",e.language_Chine_Number_35="三十五",e.language_Chine_Number_36="三十六",e.language_Chine_Number_37="三十七",e.language_Chine_Number_38="三十八",e.language_Chine_Number_39="三十九",e.language_Chine_Number_40="四十",e.language_Chine_Number_41="四十一",e.language_Chine_Number_42="四十二",e.language_Chine_Number_43="四十三",e.language_Chine_Number_44="四十四",e.language_Chine_Number_45="四十五",e.language_Chine_Number_46="四十六",e.language_Chine_Number_47="四十七",e.language_Chine_Number_48="四十八",e.language_Chine_Number_49="四十九",e.language_Chine_Number_50="五十",e.language_Chine_Number_51="五十一",e.language_Chine_Number_52="五十二",e.language_Chine_Number_53="五十三",e.language_Chine_Number_54="五十四",e.language_Chine_Number_55="五十五",e.language_Chine_Number_56="五十六",e.language_Chine_Number_57="五十七",e.language_Chine_Number_58="五十八",e.language_Chine_Number_59="五十九",e.language_Chine_Number_60="六十",e.language_Chine_Number_61="六十一",e.language_Chine_Number_62="六十二",e.language_Chine_Number_63="六十三",e.language_Chine_Number_64="六十四",e.language_Chine_Number_65="六十五",e.language_Chine_Number_66="六十六",e.language_Chine_Number_67="六十七",e.language_Chine_Number_68="六十八",e.language_Chine_Number_69="六十九",e.language_Chine_Number_70="七十",e.language_Chine_Number_71="七十一",e.language_Chine_Number_72="七十二",e.language_Chine_Number_73="七十三",e.language_Chine_Number_74="七十四",e.language_Chine_Number_75="七十五",e.language_Chine_Number_76="七十六",e.language_Chine_Number_77="七十七",e.language_Chine_Number_78="七十八",e.language_Chine_Number_79="七十九",e.language_Chine_Number_80="八十",e.language_Chine_Number_81="八十一",e.language_Chine_Number_82="八十二",e.language_Chine_Number_83="八十三",e.language_Chine_Number_84="八十四",e.language_Chine_Number_85="八十五",e.language_Chine_Number_86="八十六",e.language_Chine_Number_87="八十七",e.language_Chine_Number_88="八十八",e.language_Chine_Number_89="八十九",e.language_Chine_Number_90="九十",e.language_Chine_Number_91="九十一",e.language_Chine_Number_92="九十二",e.language_Chine_Number_93="九十三",e.language_Chine_Number_94="九十四",e.language_Chine_Number_95="九十五",e.language_Chine_Number_96="九十六",e.language_Chine_Number_97="九十七",e.language_Chine_Number_98="九十八",e.language_Chine_Number_99="九十九",e.language_Role_Name_1="战士",e.language_Role_Name_2="法师",e.language_Role_Name_3="道士",e.language_Role_Name_0="通用",e.language_Role_1="战",e.language_Role_2="法",e.language_Role_3="道",e.language_Role_Sex_0="男",e.language_Role_Sex_1="女",e.chnNumChar=["零","一","二","三","四","五","六","七","八","九"],e.chnUnitSection=["","万","亿","万亿","亿亿"],e.chnUnitChar=["","十","百","千"],e.sToCProptyType={5:"11",7:"12",9:"13",11:"14",13:"15",15:"16",17:"17",19:"18",21:"19",23:"20",25:"21",27:"22",29:"23",31:"24",33:"25",35:"26",37:"27",39:"28",45:"31",49:"28",95:"116",97:"117",99:"118",101:"119",110:"120",112:"121",114:"122",116:"123"},e.language_CURRENCY_NAME_0="经验",e.language_CURRENCY_NAME_1="金币",e.language_CURRENCY_NAME_2="元宝",e.language_CURRENCY_NAME_3="声望",e.language_CURRENCY_NAME_4="精炼石",e.language_CURRENCY_NAME_5="行会贡献",e.language_CURRENCY_NAME_6="行会资金",e.language_CURRENCY_NAME_7="功勋",e.language_CURRENCY_NAME_8="成就",e.language_CURRENCY_NAME_9="战纹精华",e.language_CURRENCY_NAME_10="战纹碎片",e.language_CURRENCY_NAME_11="低级符文碎片",e.language_CURRENCY_NAME_12="高级符文碎片",e.language_CURRENCY_NAME_13="神兵经验",e.language_CURRENCY_NAME_14="威望",e.language_CURRENCY_NAME_15="筹码",e.language_CURRENCY_NAME_16="兽神精魄",e.language_CURRENCY_NAME_17="经验值增加",e.language_CURRENCY_NAME_18="极品属性道具",e.stateName=["|C:0xa6937c&T:等  级 |","|C:0xa6937c&T:当前经验 |","|C:0xa6937c&T:升级经验 |","|C:0xa6937c&T:转  生 |","|C:0xa6937c&T:本服编号 |","|C:0xa6937c&T:开服时间 |","|C:0x00ab08&T:金  币 |","|C:0x00ab08&T:绑定金币 |","|C:0x00ab08&T:元  宝 |","|C:0x00ab08&T:银  两 |","|C:0x00ab08&T:战令币 |","|C:0x00ab08&T:交易额度 |","|C:0x3794fb&T:飞鞋点数 |","|C:0x3794fb&T:喇叭次数 |","|C:0x3794fb&T:PK  值 |","|C:0x3794fb&T:活跃度 |","复活加速","|C:0x3794fb&T:次元钥匙 |"],e.language_Equip_0="武器",e.language_Equip_1="头盔",e.language_Equip_2="衣服",e.language_Equip_3="项链",e.language_Equip_4="护腕",e.language_Equip_5="腰带",e.language_Equip_6="戒指",e.language_Equip_7="鞋子",e.language_Equip_8="官印",e.language_Equip_9="斗笠",e.language_Equip_10="面甲",e.language_Equip_11="披风",e.language_Equip_12="盾牌",e.language_Equip_Type_0="未定义",e.language_Equip_Type_1="武器",e.language_Equip_Type_2="衣服",e.language_Equip_Type_3="头盔",e.language_Equip_Type_4="项链",e.language_Equip_Type_5="勋章",e.language_Equip_Type_6="手镯",e.language_Equip_Type_7="戒指",e.language_Equip_Type_8="腰带",e.language_Equip_Type_9="鞋子",e.language_Equip_Type_10="魂玉",e.language_Equip_Type_11="神装斗笠",e.language_Equip_Type_12="神装面甲",e.language_Equip_Type_13="神装披风",e.language_Equip_Type_14="神装盾牌",e.language_Equip_Type_15="治疗宝玉",e.language_Equip_Type_16="佩饰",e.language_Equip_Type_17="银针",e.language_Equip_Type_18="心决",e.language_Equip_Type_19="金印",e.language_Equip_Type_20="檀珠",e.language_Attribute_Name_0="当前生命",e.language_Attribute_Name_1="当前魔法",e.language_Attribute_Name_2="生命",e.language_Attribute_Name_3="魔法",e.language_Attribute_Name_4="攻击",e.language_Attribute_Name_5="物防",e.language_Attribute_Name_6="魔防",e.language_Attribute_Name_7="暴击",e.language_Attribute_Name_8="抗暴",e.language_Attribute_Name_9="移速",e.language_Attribute_Name_10="攻速",e.language_Attribute_Name_11="生命加成",e.language_Attribute_Name_12="攻击加成",e.language_Attribute_Name_13="麻痹几率",e.language_Attribute_Name_14="麻痹抵抗",e.language_Attribute_Name_15="麻痹时间",e.language_Attribute_Name_16="伤害减免",e.language_Attribute_Name_17="暴击伤害",e.language_Attribute_Name_18="",e.language_Attribute_Name_19="暴击伤害加强",e.language_Attribute_Name_20="",e.language_Attribute_Name_21="[全怒]对所有职业伤害增加",e.language_Attribute_Name_22="[全制]受到所有职业伤害减少",e.language_Attribute_Name_23="物理防御百分比",e.language_Attribute_Name_24="魔法防御百分比",e.language_Attribute_Name_25="当前内功值",e.language_Attribute_Name_26="内功值",e.language_Attribute_Name_27="伤害吸收",e.language_Attribute_Name_28="战士生命",e.language_Attribute_Name_29="法师生命",e.language_Attribute_Name_30="道士生命",e.language_Attribute_Name_31="间隔3秒恢复内功值",e.language_Attribute_Name_32="",e.language_Attribute_Name_33="",e.language_Attribute_Name_34="",e.language_Attribute_Name_35="",e.language_Attribute_Name_36="",e.language_Attribute_Name_37="",e.language_Attribute_Name_38="",e.language_Attribute_Name_39="",e.language_Attribute_Name_40="",e.language_Attribute_Name_41="",e.language_Attribute_Name_42="",e.language_Attribute_Name_43="",e.language_Attribute_Name_44="",e.language_Attribute_Name_45="战士攻击",e.language_Attribute_Name_46="法师攻击",e.language_Attribute_Name_47="道士攻击",e.language_Attribute_Name_48="战士防御",e.language_Attribute_Name_49="法师防御",e.language_Attribute_Name_50="道士防御",e.language_Attribute_Name_51="战士魔防",e.language_Attribute_Name_52="法师魔防",e.language_Attribute_Name_53="道士魔防",e.language_Attribute_Name_54="",e.language_Attribute_Name_55="威慑",e.language_Attribute_Name_56="暴击伤害减免",e.language_Attribute_Name_57="神圣伤害",e.language_Attribute_Name_58="神圣精通",e.language_Attribute_Name_59="",e.language_Attribute_Name_60="合击神圣伤害",e.language_Attribute_Name_61="",e.language_Attribute_Name_62="",e.language_Attribute_Name_63="",e.language_Attribute_Name_64="无影伤害",e.language_Attribute_Name_65="暴击强度",e.language_Attribute_Name_66="内功加成",e.language_Attribute_Name_67="致命一击率",e.language_Attribute_Name_68="致命一击伤害",e.language_Attribute_Name_69="致命一击伤害减免",e.language_Attribute_Name_70="",e.language_Attribute_Name_71="",e.language_Attribute_Name_72="",e.language_Attribute_Name_73="反伤",e.language_Attribute_Name_74="物防穿透",e.language_Attribute_Name_75="魔防穿透",e.language_Attribute_Name_76="致命一击伤害",e.language_Attribute_Name_77="致命一击减免",e.language_Attribute_Name_78="暴击伤害减免",e.language_Attribute_Name_79="",e.language_Attribute_Name_80="",e.language_Attribute_Name_81="",e.language_Attribute_Name_82="夺命追伤",e.language_Attribute_Name2_0="反伤概率",e.language_Attribute_Name2_1="反伤比率",e.language_Attribute_Name2_2="攻击无视反伤效果，增加自身2%攻击力",e.language_Attribute_Name2_3="神佑触发 概率",e.language_Attribute_Name2_4="神佑复活万分比",e.language_Attribute_Name2_5="死咒触发概率",e.language_Attribute_Name2_6="死咒增加伤害",e.language_Attribute_Name2_7="死咒效果展示时间",e.language_Attribute_Name2_8="暴击率",e.language_Attribute_Name2_9="AllCrit暴击触发后，持续的时间, 单位:秒",e.language_Attribute_Name2_10="受到X次攻击时必定闪避",e.language_Attribute_Name2_11="攻击X次必定产生暴击（暴击）",e.language_Attribute_Name2_12="治疗戒指,攻击时候补血的概率",e.language_Attribute_Name2_13="治疗戒指,攻击的时候补血数",e.language_Attribute_Name2_14="[怒战]对战士伤害增加",e.language_Attribute_Name2_15="[怒法]对法师伤害增加",e.language_Attribute_Name2_16="[怒道]对道士伤害增加",e.language_Attribute_Name2_17="[制战]受到战士伤害减少",e.language_Attribute_Name2_18="[制法]受到法师伤害减少",e.language_Attribute_Name2_19="[制道]受到道士伤害减少",e.language_Attribute_Name2_20="合击受到的伤害减少",e.language_Attribute_Name2_21="`合击技能对怪物伤害",e.language_Attribute_Name2_22="合击技能对玩家伤害",e.language_Attribute_Name2_23="怒气恢复速度",e.language_Attribute_Name2_24="伤害增加固定值",e.language_Attribute_Name2_25="伤害减免固定值",e.language_Attribute_Name2_26="闪避",e.language_Attribute_Name2_27="基础及能额外系数加成",e.language_Attribute_Name2_28="多重暴击几率",e.language_Attribute_Name2_29="幸运一击的伤害加深",e.language_Attribute_Name2_30="幸运一击的固定伤害加深",e.language_Attribute_Name2_31="战士伤害",e.language_Attribute_Name2_32="法师伤害",e.language_Attribute_Name2_33="道士伤害",e.language_Attribute_Name2_34="幸运一击的冷却时间",e.language_Attribute_Name2_35="治疗戒指,攻击的时候补血的冷却时间",e.language_Attribute_Name2_36="",e.language_Attribute_Name2_37="",e.language_Attribute_Name2_38="",e.language_Attribute_Name2_39="",e.language_Attribute_Name2_40="",e.language_Attribute_Name2_41="",e.language_Attribute_Name2_42="命中",e.language_Attribute_Name2_43="",e.language_Attribute_Name2_44="",e.language_Attribute_Name2_45="",e.language_Attribute_Name2_46="幸运",e.propName=["体力值","魔法值","物  攻","魔  法","道  术","物  防","魔  御","物理命中","物理闪避","魔法命中","魔法闪避","幸  运","生命回复","魔法回复","药品回复率","暴击率","暴击倍率","暴击附加伤害","破战","破法","破道","破怪","御战","御法","御道","御怪"],e.attrArr=[["物攻","提升战士技能伤害的核心属性"],["法师","提升法师技能伤害的核心属性"],["道术","提升道术技能伤害的核心属性"],["物防","可以减少来自物理攻击技能的伤害"],["魔御","可以减少来自魔法（法师和道士）攻击技能的伤害"],["物理命中","增加物理攻击技能的命中几率"],["物理闪避","增加对物理攻击技能的闪避几率"],["魔法命中","增加魔法（法师和道士）攻击技能的命中几率"],["魔法闪避","增加对魔法（法师和道士）攻击技能的闪避几率"],["幸运","在宝物-祝福系统中提升祝福星级可增加幸运。每点幸运增加3%几率发挥攻击、魔法、道术上限，最高45%"],["生命回复","每2秒生命自动回复值"],["魔法回复","每2秒魔法自动回复值"],["药品回复率","增加慢回和瞬回药品回复效果，每0.1提升10%的回复量"],["暴击率","攻击时触发暴击特效的几率，每1点暴击率提升0.01%几率"],["暴击倍率","触发暴击特效的伤害倍率，每1点暴击倍率提升0.01%的伤害"],["暴击附加伤害","触发暴击特效时追加的伤害数值"],["破战","攻击时增加对战士职业的伤害值"],["破法","攻击时增加对法师职业的伤害值"],["破道","攻击时增加对道士职业的伤害值"],["破怪","攻击时增加对怪物的伤害值"],["御战","受到战士攻击时，降低的伤害值"],["御法","受到法师攻击时，降低的伤害值"],["御道","受到道士攻击时，降低的伤害值"],["御怪","受到怪物攻击时，降低的伤害值"]],e.stateArr2=["升级经验","升到下一级所需剩余经验"],e.stateArr11=["交易额度","支付元宝(寄售行、自由交易)需要消耗额度，橙卡及以上会员不消耗交易额度。充值可提升交易额度"],e.stateArr14=["PK值","恶意PK触犯谋杀罪会增加PK值，PK值达到100会受到红名惩罚"],e.stateArr15=["活跃","游戏内参与副本、活动、击败BOSS等可提升活跃度"],e.stateArr16=["复活加速","特权剩余的时间。使用特权卡可提升时间，橙星会员享永久特权。特权期间所有场景复活时间减半(原服从10秒降为5秒，跨服从12秒降为6秒)"],e.stateArr17=["次元钥匙","开启跨服次元宝箱时消耗的道具。开服2天起每天可获得3枚，也可以使用道具获得，合服时会按开服天数差额补偿"],e.attrMinMax=["物攻：","魔法：","道术：","物防：","魔御：","攻魔道："],e.tipsAttr=[{type:t.ActorPropertyModel.AP_MAX_HP,value:"numsx_3"},{type:t.ActorPropertyModel.AP_PHYSICAL_ATTACK_MIN,value:"numsx_4"},{type:t.ActorPropertyModel.AP_PHYSICAL_ATTACK_MAX,value:"numsx_11"},{type:t.ActorPropertyModel.AP_PHYSICAL_DEFENCE_MIN,value:"numsx_24"},{type:t.ActorPropertyModel.AP_PHYSICAL_DEFENCE_MAX,value:"numsx_5"},{type:t.ActorPropertyModel.AP_MAGIC_DEFENCE_MIN,value:"numsx_12"},{type:t.ActorPropertyModel.AP_MAGIC_DEFENCE_MAX,value:"numsx_18"},{type:t.ActorPropertyModel.AP_HIT_RATE,value:"numsx_23"},{type:t.ActorPropertyModel.AP_DOGE_RATE,value:"numsx_22"},{type:t.ActorPropertyModel.AP_MAGIC_HIT_RATE,value:"numsx_6"},{type:t.ActorPropertyModel.AP_MAGIC_DOGERATE,value:"numsx_13"},{type:t.ActorPropertyModel.AP_POPULARITY,value:"numsx_17"},{type:t.ActorPropertyModel.AP_VALUE,value:"numsx_1"},{type:t.ActorPropertyModel.AP_CURSE,value:"numsx_14"},{type:t.ActorPropertyModel.AP_TOXIC_DOGERATE,value:"numsx_20"},{type:t.ActorPropertyModel.AP_LUCK,value:"numsx_2"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR5,value:"numsx_27"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR6,value:"numsx_26"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR7,value:"numsx_25"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR8,value:"numsx_44"}],e.tipsFaShiAttr=[{type:t.ActorPropertyModel.AP_MAX_HP,value:"numsx_3"},{type:t.ActorPropertyModel.AP_MAGIC_ATTACK_MIN,value:"numsx_9"},{type:t.ActorPropertyModel.AP_MAGIC_ATTACK_MAX,value:"numsx_15"},{type:t.ActorPropertyModel.AP_PHYSICAL_DEFENCE_MIN,value:"numsx_24"},{type:t.ActorPropertyModel.AP_PHYSICAL_DEFENCE_MAX,value:"numsx_5"},{type:t.ActorPropertyModel.AP_MAGIC_DEFENCE_MIN,value:"numsx_12"},{type:t.ActorPropertyModel.AP_MAGIC_DEFENCE_MAX,value:"numsx_18"},{type:t.ActorPropertyModel.AP_HIT_RATE,value:"numsx_23"},{type:t.ActorPropertyModel.AP_DOGE_RATE,value:"numsx_22"},{type:t.ActorPropertyModel.AP_MAGIC_HIT_RATE,value:"numsx_6"},{type:t.ActorPropertyModel.AP_MAGIC_DOGERATE,value:"numsx_13"},{type:t.ActorPropertyModel.AP_POPULARITY,value:"numsx_17"},{type:t.ActorPropertyModel.AP_VALUE,value:"numsx_1"},{type:t.ActorPropertyModel.AP_CURSE,value:"numsx_14"},{type:t.ActorPropertyModel.AP_TOXIC_DOGERATE,value:"numsx_20"},{type:t.ActorPropertyModel.AP_LUCK,value:"numsx_2"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR5,value:"numsx_27"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR6,value:"numsx_26"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR7,value:"numsx_25"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR8,value:"numsx_44"}],e.tipsDaoShiAttr=[{type:t.ActorPropertyModel.AP_MAX_HP,value:"numsx_3"},{type:t.ActorPropertyModel.AP_WIZARD_ATTACK_MIN,value:"numsx_10"},{type:t.ActorPropertyModel.AP_WIZARD_ATTACK_MAX,value:"numsx_16"},{type:t.ActorPropertyModel.AP_PHYSICAL_DEFENCE_MIN,value:"numsx_24"},{type:t.ActorPropertyModel.AP_PHYSICAL_DEFENCE_MAX,value:"numsx_5"},{type:t.ActorPropertyModel.AP_MAGIC_DEFENCE_MIN,value:"numsx_12"},{type:t.ActorPropertyModel.AP_MAGIC_DEFENCE_MAX,value:"numsx_18"},{type:t.ActorPropertyModel.AP_HIT_RATE,value:"numsx_23"},{type:t.ActorPropertyModel.AP_DOGE_RATE,value:"numsx_22"},{type:t.ActorPropertyModel.AP_MAGIC_HIT_RATE,value:"numsx_6"},{type:t.ActorPropertyModel.AP_MAGIC_DOGERATE,value:"numsx_13"},{type:t.ActorPropertyModel.AP_POPULARITY,value:"numsx_17"},{type:t.ActorPropertyModel.AP_VALUE,value:"numsx_1"},{type:t.ActorPropertyModel.AP_CURSE,value:"numsx_14"},{type:t.ActorPropertyModel.AP_TOXIC_DOGERATE,value:"numsx_20"},{type:t.ActorPropertyModel.AP_LUCK,value:"numsx_2"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR5,value:"numsx_27"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR6,value:"numsx_26"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR7,value:"numsx_25"},{type:t.ActorPropertyModel.PROP_ACTOR_GOLDEQ_ATTR8,value:"numsx_44"}],e.language_Lock_Text0="<查看信息>",e.language_Lock_Text1="<选择锁定目标>",e.language_Lock_Text2="<玩家>",e.language_Tips1="|C:0xff7700&T:技能正在冷却中!|",e.language_Tips2="|C:0xff7700&T:该物品不可拖动到快捷栏！!|",e.language_Tips3="|C:0xff7700&T:背包中没有该物品，不可拖动!|",e.language_Tips4="|C:0xff7700&T:背包空间不足!|",e.language_Tips5="|C:0xff7700&T:物品ID错误!|",e.language_Tips6="|C:0xe5ddcf&T:获得：||C:%s&T:%s|",e.language_Tips7="按Ctrl+左键进行数量拆分",e.language_Tips8="|C:0xff7700&T:该道具无法丢弃，请尝试回收或出售|",e.language_Tips9="|C:0xff7700&T:该道具无法回收|",e.language_Tips10="|C:0xff7700&T:回收失败|",e.language_Tips11="|C:0xff7700&T:该物品正在CD中|",e.language_Tips12="|C:0xff7700&T:转生条件不符|",e.language_Tips13="|C:0x28ee01&T:转生成功|",e.language_Tips14="|C:0xff7700&T:转生达到最高等级|",e.language_Tips15="|C:0xff7700&T:兑换数量不足|",e.language_Tips16="|C:0xff7700&T:兑换所需材料不足|",e.language_Tips17="|C:0x28ee01&T:技能升级成功|",e.language_Tips18="|C:0xff7700&T:该功能在等级%s级后开启|",e.language_Tips19="|C:0xff7700&T:背包剩余不足，无法回收|",e.language_Tips20="|C:0xff7700&T:你确认要回收%s吗？|",e.language_Tips21="|C:0xff7700&T:材料不足|",e.language_Tips22="|C:0xff7700&T:%s级开启锻造功能|",e.language_Tips23="|C:0xff7700&T:等级达到%s级开启合成功能|",e.language_Tips24="【元宝】充值获得；可在元宝商城、寄售行购买物品；也可以通过私人交易赠送给其他玩家",e.language_Tips25="【银两】回收装备、击败BOSS、参与游戏内活动都有机会获得，也可以通过元宝兑换获得；可在银两商城购买物品；与角色绑定",e.language_Tips26="|C:0xff7700&T:购买失败，交易额度或元宝不足，真实充值后提升交易额度|",e.language_Tips27="|C:0xff7700&T:手续费不足，请重新上架|",e.language_Tips28="|C:0xff7700&T:%s级开启当前功能|",e.language_Tips29="|C:0xff7700&T:请选择物品|",e.language_Tips30="|C:0xff7700&T:该物品无法出售|",e.language_Tips31="|C:0xff7700&T:请先选择交易对象|",e.language_Tips32="|C:0xff7700&T:请先锁定|",e.language_Tips33="|C:0xff7700&T:出售价格不能为空|",e.language_Tips34="|C:0x28ee01&T:购买成功!|",e.language_Tips35="|C:0xff7700&T:购买失败!|",e.language_Tips36="|C:0x28ee01&T:上架成功，请至正在出售查看!|",e.language_Tips37="|C:0xff7700&T:上架失败!|",e.language_Tips38="|C:0x28ee01&T:下架成功，请至领取物品查看!|",e.language_Tips39="|C:0xff7700&T:下架失败!|",e.language_Tips40="|C:0x28ee01&T:领取成功!|",e.language_Tips41="|C:0xff7700&T:领取失败!|",e.language_Tips42="|C:0xff7700&T:锁定状态无法添加物品!|",e.language_Tips43="|C:0xff7700&T:该物品不可交易!|",e.language_Tips44="|C:0xff7700&T:捡取时间未到!|",e.language_Tips45="|C:0xff7700&T:正在交易中，不可查找!|",e.language_Tips46="|C:0x28ee01&T:祝福星级 +1|",e.language_Tips47="|C:0xff7700&T:祝福星级 -1|",e.language_Tips48="确定要退出副本吗？",e.language_Tips49="|C:0x28ee01&T:膜拜成功|",e.language_Tips50="|C:0xff7700&T:膜拜失败|",e.language_Tips51="|C:0x28ee01&T:鉴定成功|",e.language_Tips52="|C:0xff7700&T:鉴定失败|",e.language_Tips53="|C:0xff7700&T:鉴定次数不足|",e.language_Tips54="|C:0xff7700&T:鉴定材料不足|",e.language_Tips55="|C:0xff7700&T:已达到转生允许的级别上限，无法鉴定|",e.language_Tips56="|C:0xff7700&T:多倍经验超过%s，请消耗后再鉴定|",e.language_Tips57="|C:0xff7700&T:当前位置无人上榜，不可查看|",e.language_Tips58="|C:0xff7700&T:%s不足|",e.language_Tips59="|C:0xff7700&T:新手任务传送失败|",e.language_Tips60="|C:0x28ee01&T:传送成功，主线任务传送不消耗飞鞋|",e.language_Tips61="|C:0xff7700&T:需要在安全区才能进入副本|",e.language_Tips62="|C:0xff7700&T:不是活动时间或已关闭进入|",e.language_Tips63="|C:0xff7700&T:您不满足进入此系统的条件|",e.language_Tips64="",e.language_Tips65="|C:0xff7700&T:次数不足|",e.language_Tips66="|C:0xff7700&T:金币或元宝不足|",e.language_Tips67="|C:0xff7700&T:扣除失败|",e.language_Tips68="|C:0xff7700&T:不能操作（不在世界boss 副本）|",e.language_Tips69="|C:0xff7700&T:等级或转生不符|",e.language_Tips70="|C:0xff7700&T:该活动开服第%s天开启|",e.language_Tips71="|C:0xff7700&T:请先输入新名字|",e.language_Tips72="|C:0xff7700&T:背包剩余格数不足|",e.language_Tips73="|C:0xff7700&T:请先选择奖励|",e.language_Tips74="|C:0x318704&T:%s被发现|",e.language_Tips75="|C:0x28ee01&T:共鸣%s阶已激活|",e.language_Tips76="|C:0xff7700&T:共鸣%s阶失效|",e.language_Tips77="|C:0x28ee01&T:强化成功|",e.language_Tips78="|C:0xff7700&T:任务已完成|",e.language_Tips79="|C:0xff7700&T:没有接取该任务|",e.language_Tips80="|C:0xff7700&T:该地图不允许挂机|",e.language_Tips81="|C:0xff7700&T:限制等级,转生,开服天数条件不满足|",e.language_Tips82="|C:0xff7700&T:任务状态错误|",e.language_Tips83="|C:0xff7700&T:配置错误|",e.language_Tips84="|C:0xff7700&T:不存在该条数据|",e.language_Tips85="|C:0xff7700&T:已达最大等级|",e.language_Tips86="|C:0xff7700&T:任务等级未达到|",e.language_Tips87="|C:0xff7700&T:道具不足|",e.language_Tips88="|C:0xff7700&T:已达当前等级强化上限，%s级后继续强化|",e.language_Tips89="|C:0xff7700&T:数据异常|",e.language_Tips90="|C:0xff7700&T:今日抽奖次数已达上限|",e.language_Tips91="|C:0xff7700&T:元宝不足|",e.language_Tips92="|C:0xff7700&T:需要在安全区才能进行扫荡|",e.language_Tips93="本次任务：在|C:0xff7700&T:%s|驻守|C:0x28ee01&T:%s|分钟\n|C:0xe50000&T:注意：驻守期间离开地图、离线、角色死亡则任务失败。完成任务后自动回到安全区。|",e.language_Tips94="|C:0xff7700&T:使用YY游戏大厅登录游戏才能领取|",e.language_Tips95="|C:0xff7700&T:您的超玩会员等级不足，请升级|",e.language_Tips96="|C:0xff7700&T:时装没有激活|",e.language_Tips97="|C:0xff7700&T:数据错误|",e.language_Tips98="|C:0xff7700&T:当前时装已达满级！|",e.language_Tips99="|C:0xff7700&T:已激活|",e.language_Tips100="|C:0xff7700&T:礼包已被领取|",e.language_Tips101="|C:0xff7700&T:您的超玩会员等级不足，请升级|",e.language_Tips102="|C:0xff7700&T:死亡状态不能进入副本|",e.language_Tips103="|C:0xff7700&T:死亡状态不能使用飞鞋|",e.language_Tips104="|C:0xff7700&T:购买失败，元宝不足|",e.language_Tips105="|C:0xff7700&T:状态切换冷却中，请稍后再试！|",e.language_Tips106="|C:0xff7700&T:当前已经在副本中|",e.language_Tips107="|C:0xff7700&T:完成首充开启专属挂机地图|",e.language_Tips108="|C:0xff7700&T:该传送功能尚未开放|",e.language_Tips109="|C:0xff7700&T:飞鞋点数不足|",e.language_Tips110="|C:0xff7700&T:该地图不可以使用%s|",e.language_Tips111="物品来源",e.language_Tips112="地图：",e.language_Tips113="怪物：",e.language_Tips114="击杀：",e.language_Tips115="时间：",e.language_Tips116="来源：夺宝",e.language_Tips117="来源：合成制造",e.language_Tips118="|C:0xff7700&T:该地图禁止查看他人信息|",e.language_Tips119="|C:0xff7700&T:等级或转生不足|",e.language_Tips120="|C:0xff7700&T:该地图禁止查看排行榜|",e.language_Tips121="|C:0xff7700&T:当前地图无法寻路|",e.language_Tips122="|C:0xff7700&T:关闭自动PK|",e.language_Tips123="|C:0xff7700&T:达到%s转或%s会员才能给对方道具|",e.language_Tips124="|C:0xff7700&T:已经领取过了微信礼包了|",e.language_Tips125="|C:0xff7700&T:请先领取手机礼包与认证礼包|",e.language_Tips126="|C:0xff7700&T:登录天数不足|",e.language_Tips127="|C:0xff7700&T:使用QQ游戏大厅登录游戏才能领取|",e.language_Tips128="|C:0xff7700&T:使用QQ游戏大厅登录游戏才能领取|",e.language_Tips129="开通蓝钻豪华版即可领取本礼包",e.language_Tips130="升级蓝钻豪华版即可领取本礼包",e.language_Tips131="一次性开通12个月或分次凑够12个月的蓝钻，\n就能立即成为年费蓝钻，领取礼包",e.language_Tips132="初阶秘籍*5,祝福油*5,飞行点数*20,绑定金币*50000",e.language_Tips133="双击空地关闭自动挂机",e.language_Tips134="|C:0xff7700&T:开服天数不足%s天，无法进行转生|",e.language_Tips135="|C:0xff7700&T:未激活特权：智能回收|",e.language_Tips136="|C:0xe5ddcf&T:还差点元宝，充点零花钱玩玩！|",e.language_Tips137="|C:0xff7700&T:请先开通%s会员特权|",e.language_Tips138="|C:0xe50000&T:跨服服务器连接失败！|",e.language_Tips139="跨服期间该系统暂不开放",e.language_Tips140=["转生未达到6转，无法参加跨服活动","开服天数未达到32天，无法参加跨服活动"],e.language_Tips141="所有奖励回到原服时邮件发放",e.language_Tips142="|C:0xff7700&T:当前积分不足%s分|",e.language_Tips143="|C:0xff7700&T:等级要求为0-999级|",e.language_Tips144="|C:0xff7700&T:编辑公告最多不能超过255个字|",e.language_Tips145="双击自动智能PK",e.language_Tips146="|C:0xff7700&T:本人是归属者无法攻击|",e.language_Tips147="|C:0xff7700&T:暂时没有归属者，请攻击首领|",e.language_Tips148="|C:0xff7700&T:已达到最大会员等级|",e.language_Tips149="|C:0xff7700&T:手机端无法复制链接|",e.language_Tips150="|C:0xff7700&T:不在同一张地图，无法寻路|",e.language_Tips151="|C:0xff7700&T:内容存在敏感字符，请重新输入|",e.language_Tips152="已经领取过了手机礼包了",e.language_Tips153="已经领取过了该礼包",e.language_Tips154="|C:0xff7700&T:等级不足，无法领取奖励|",e.language_Tips155="|C:0xff7700&T:通过大厅登录可领取奖励|",e.language_Tips156="|C:0xff7700&T:登录天数不足，无法领取奖励|",e.language_Tips157="复制成功",e.language_Tips158="|C:0xff7700&T:您已被禁言，请稍后再试|",e.language_Tips159="|C:0xff7700&T:需要PC和手机端（安卓或IOS）都登录过才能领取奖励哦~|",e.language_Tips160="|C:0xff7700&T:通过顺网盒子登陆才能领取哦|",e.language_Tips161="|C:0xff7700&T:会员等级不足，无法领取奖励|",e.language_Tips162="|C:0xff7700&T:累计在线时长不足|",e.language_Chat_Show_Tips0="|C:0x28ee01&T:查看全部频道|",e.language_Chat_Show_Tips1="|C:0x28ee01&T:查看世界频道|",e.language_Chat_Show_Tips2="|C:0x28ee01&T:查看行会频道|",e.language_Chat_Show_Tips3="|C:0x28ee01&T:查看组队频道|",e.language_Chat_Show_Tips4="|C:0x28ee01&T:查看私聊频道|",e.language_Chat_Show_Tips5="|C:0x28ee01&T:查看个人频道|",e.language_Chat_Show_Tips6="|C:0x28ee01&T:查看系统频道|",e.language_Chat_ShowSetCloseNear_Tips="|C:0xF3311E&T:拒绝接收附近聊天信息|",e.language_Chat_ShowSetCloseGuild_Tips="|C:0xF3311E&T:拒绝接收行会聊天信息|",e.language_Chat_ShowSetClosePrivate_Tips="|C:0xF3311E&T:拒绝接收私聊信息|",e.language_Chat_ShowSetOpenNear_Tips="|C:0x28ee01&T:允许接收附近聊天信息|",e.language_Chat_ShowSetOpenGuild_Tips="|C:0x28ee01&T:允许接收行会聊天信息|",e.language_Chat_ShowSetOpenPrivate_Tips="|C:0x28ee01&T:允许接收私聊信息|",e.language_Chat_ShowInput_Tips="点击输入聊天内容",e.language_Chat_WinTabar_List=[{name:"全部"},{name:"世界"},{name:"行会"},{name:"组队"},{name:"私聊"},{name:"个人"},{name:"系统"}],e.language_Chat_Tabar_List=["全部","世界","附近","行会","组队","私聊","个人"],e.language_Chat_Menu_List=["世 界","附 近","行 会","组 队","私 聊"],e.language_Chat_Stretch_Little="收起",e.language_Chat_Stretch_Big="展开",e.language_Chat_ChatInput_OverLen="|C:0xF3311E&T:发言文字过长|",e.language_Chat_Set_Text="（点击设置）",e.language_Chat_Enter_Name_Text="请输入对方名字：",e.language_Chat_Name_List_Text="<猜你要选>",e.language_Chat_Personal_Text="您获得了：",e.language_Chat_Text0="私 聊",e.language_Fashion_TabBar_Text=["sz_tab_t1","sz_tab_t2","发型","特殊"],e.language_ATTROBJ={0:"未定义属性",1:"血增加",2:"当前血回复比率",3:"当前蓝回复量",4:"当前蓝回复比率",5:"体力上限",6:"体力加成",7:"魔力上限",8:"最大蓝倍率增加",9:"物攻下限",10:"最小物理攻击倍率增加",11:"物攻上限",12:"最大物理攻击倍率增加",13:"魔法下限",14:"最小魔法攻击倍率增加",15:"魔法上限",16:"最大魔法攻击倍率增加",17:"道术下限",18:"最小道术攻击倍率增加",19:"道术上限",20:"最大道术攻击倍率增加",21:"物防下限",22:"最小物理防御倍率增加",23:"物防上限",24:"最大物理防御倍率增加",25:"魔御下限",26:"最小魔法防御倍率增加",27:"魔御上限",28:"最大魔法防御倍率增加",29:"物理命中",30:"准确倍率增加",31:"物理闪避",32:"敏捷倍率增加",33:"魔法命中",34:"魔法命中倍率增加",35:"魔法躲避",36:"魔法闪避倍率增加",37:"毒物闪避增加",38:"毒物闪避倍率增加",39:"生命恢复增加",40:"生命恢复倍率增加",41:"魔法恢复增加",42:"魔法恢复倍率增加",43:"毒物恢复增加",44:"毒物恢复倍率增加",45:"幸运",46:"幸运倍率增加",47:"生命回复",48:"诅咒倍率增加",49:"魔法回复",50:"移动速度倍率增加",51:"攻击速度增加",52:"攻击速度倍率增加",53:"",54:"伤害减免",55:"麻痹,不可移动，不可释放技能",56:"经验增加一个数值",57:"复活保护状态",58:"隐身",59:"打怪经验加成",60:"杀戮值(pk值)的增减",61:"pk保护状态",62:"技能攻击的时候 攻击伤害追加n点",63:"增加神圣",64:"护身效果",65:"麻痹几率",66:"抗麻几率",67:"麻痹时长",68:"麻痹时长减免",69:"守护几率",70:"切割",71:"守护效果",72:"挂机地图中",73:"死亡以后立刻回复的HP的比例",74:"新手保护",75:"伤害加成",76:"全职业攻击下限",77:"全职业攻击上限",78:"坐骑最小物理防御增加",79:"吸血",80:"攻魔道加成",81:"双防加成",82:"无视双防",83:"攻速",84:"PK伤害减免",85:"灵刃CD",86:"灵刃回复率",87:"灵刃回复值",88:"剧毒几率",89:"剧毒伤害",90:"宝石增加的生命的增加",91:"冰冻",92:"抗火率",93:"减少玩家死亡爆装备几率",94:"",95:"御战",96:"百分比降低战士的伤害",97:"御法",98:"固定比降低法师的伤害",99:"御道",100:"固定比降低道士的伤害",101:"御怪",102:"固定比降低怪物的伤害",103:"触发伤害减免的几率",104:"触发伤害减免的值",105:"触发伤害追加的几率",106:"触发伤害追加的值",107:"触发无视防御几率",108:"无视防御的值",109:"抵扣伤害",110:"破战",111:"百分比增加对战士的伤害",112:"破法",113:"固定比增加对法师的伤害",114:"破道",115:"固定比增加对道士的伤害",116:"破怪",117:"固定比增加对怪物的伤害",118:"吃药效果减百分率",119:"攻击时候附加攻击输出的概率",120:"攻击时附加攻击输出的倍率增加",121:"伤害反弹概率",122:"伤害反弹倍率",123:"会心一击附加攻击输出的概率",124:"新的变身属性",125:"定身,不可移动，可释放技能",126:"",127:"",128:"",129:"",130:"",131:"",132:"",133:"内劲值上限",134:"",135:"内劲经验",136:"暴击倍率",137:"回血回蓝",138:"暴击率",139:"暴击附加伤害",140:"抗暴率",141:"药品回复率",142:"增加经验buff",143:"英雄增加经验倍率buff",144:"打怪金币加成",145:"半月增伤",146:"烈火增伤",147:"逐日增伤",148:"冰咆哮增伤",149:"火雨增伤",150:"雷电增伤",151:"噬血术增伤",152:"火符增伤",153:"半月减伤",154:"烈火减伤",155:"逐日减伤",156:"冰咆哮减伤",157:"火雨减伤",158:"雷电减伤",159:"噬血术减伤",160:"火符减伤"},e.language_bless={1:"当前",2:"下一级",3:"需要祝福值"},e.language_SetUp_Title="设  置",e.language_SetUp_Tab0="t_sz_jc",e.language_SetUp_Tab1="t_sz_wp",e.language_SetUp_Tab2="t_sz_yp",e.language_SetUp_Tab3="t_sz_bh",e.language_SetUp_Tab4="t_sz_gj",e.language_SetUp_Tab5="t_sz_xt",e.language_SetUp_Text0="通用选项",e.language_SetUp_Btn="恢复默认",e.language_SetUp_Text1="|C:0xf30302&T:人物|显名",e.language_SetUp_Text2="|C:0xf30302&T:怪物|显名",e.language_SetUp_Text3="称号显示",e.language_SetUp_Text4="网络状况",e.language_SetUp_Text5="推荐装备",e.language_SetUp_Text6="战士技能",e.language_SetUp_Text7="自动追击",e.language_SetUp_Text8="自动烈火",e.language_SetUp_Text9="自动逐日",e.language_SetUp_Text10="道士技能",e.language_SetUp_Text11="自动神圣战甲",e.language_SetUp_Text12="法师技能",e.language_SetUp_Text13="自动魔法盾",e.language_SetUp_Text14="开启音效",e.language_SetUp_Text15="开启背景音乐",e.language_SetUp_Text16="系统设置",e.language_SetUp_Text17="自动捡取",e.language_SetUp_Text18="物品标红",e.language_SetUp_Text19="全部自动捡取",e.language_SetUp_Text20="全部物品标红",e.language_SetUp_dropDownBtn="全部",e.language_SetUp_Text21="全 部",e.language_SetUp_Text22="武 器",e.language_SetUp_Text23="防 具",e.language_SetUp_Text24="首 饰",e.language_SetUp_Text25="消耗品",e.language_SetUp_Text26="材 料",e.language_SetUp_Text27="其 他",e.language_SetUp_Text28="<u>按百分比自动吃药</u>",e.language_SetUp_Text29="<u>按血量自动吃药</u>",e.language_SetUp_Text30="普通红药",e.language_SetUp_Text31="普通蓝药",e.language_SetUp_Text32="瞬回红药",e.language_SetUp_Text33="瞬回蓝药",e.language_SetUp_Text34="物品名称",e.language_SetUp_Text35="普通红药       剩余HP                   间隔               毫秒",e.language_SetUp_Text36="普通蓝药       剩余MP                   间隔               毫秒",e.language_SetUp_Text37="瞬回红药       剩余HP                   间隔               毫秒",e.language_SetUp_Text38="瞬回蓝药       剩余MP                   间隔               毫秒",e.language_SetUp_Text39="角色保护设置",e.language_SetUp_Text40="   血量低于",e.language_SetUp_Text41="挂机设置",e.language_SetUp_Text42=" 血量低于                   时使用治愈术",e.language_SetUp_Text43="优先打满血怪",e.language_SetUp_Text44="挂机时不捡取任何物品",e.language_SetUp_Text45="捡取挂机物品（物品设置中已勾选“自动捡取”）",e.language_SetUp_Text46="挂机使用灵魂火符  |C:0xf30302&T:(需要学习灵魂火符)|",e.language_SetUp_Text47="自动召唤神兽",e.language_SetUp_Text48="自动噬血术  |C:0xf30302&T:(需要学习噬血术)|",e.language_SetUp_Text49="使用雷电术  |C:0xf30302&T:(需要学习雷电术)|",e.language_SetUp_Text50="|C:0xf30302&T:触发保护设置：%s|",e.language_SetUp_Text51="特权",e.language_SetUp_Text52="回收选项",e.language_SetUp_Text53="沃玛装备",e.language_SetUp_Text54="祖玛装备",e.language_SetUp_Text55="洞穴极品",e.language_SetUp_Text56="矿洞极品",e.language_SetUp_Text57="沃玛极品",e.language_SetUp_Text58="40级神装",e.language_SetUp_Text59="50级神装",e.language_SetUp_Text60="一转神装",e.language_SetUp_Text61="场景缩放",e.language_SetUp_Text62="反击提示",e.language_SetUp_Text63="|C:0xf30302&T:宠物|显示",e.language_SetUp_Text64="自动雷霆一击(战)  |C:0xf30302&T:(需要学习雷霆一击)|",e.language_SetUp_Text65="自动雷霆一击(法)  |C:0xf30302&T:(需要学习雷霆一击)|",e.language_SetUp_Text66="自动雷霆一击(道)  |C:0xf30302&T:(需要学习雷霆一击)|",e.language_SetUp_Text67="摇杆操作模式",e.language_SetUp_Text68="单摇杆",e.language_SetUp_Text69="双摇杆",e.language_Friend_NoGoodFriend_tips="您现在还没有好友\n快去添加吧",e.language_Friend_NoNear_tips="附近没有其他玩家\n去别的地方看看吧",e.language_Friend_NoBlackList_tips="当前未添加玩家进入黑名单",e.language_Friend_NoConcern_tips="您现在还没有关注别人\n快去添加吧！",e.language_Friend_NoFriend_Apply_tips="当前无好友申请",e.language_Friend_NoReport_tips="当前没有战报",e.language_Friend_Menu_List=[{txt:"私聊",name:"chatBtn"},{txt:"查看信息",name:"showInfoBtn"},{txt:"私人交易",name:"privateTradeLineBtn"},{txt:"删除好友",name:"delFriendBtn"},{txt:"邀请组队",name:"inviteTeamBtn"},{txt:"申请入队",name:"applyTeamBtn"},{txt:"添加关注",name:"addConBtn"},{txt:"加黑名单",name:"addBlackBtn"}],e.language_Friend_Menu_List1=[{txt:"私聊",name:"chatBtn"},{txt:"查看信息",name:"showInfoBtn"},{txt:"私人交易",name:"privateTradeLineBtn"},{txt:"添加好友",name:"addFriendBtn"},{txt:"邀请组队",name:"inviteTeamBtn"},{txt:"申请入队",name:"applyTeamBtn"},{txt:"添加关注",name:"addConBtn"},{txt:"加黑名单",name:"addBlackBtn"}],e.language_Friend_Selected_tips="请选择玩家",e.language_Friend_Add_Friend_tips="请输入想要添加好友的玩家名字",e.language_Friend_Add_Concern_tips="请输入想要关注的玩家名字",e.language_Friend_Add_Black_tips="请输入想要添加黑名单的玩家名字",e.language_Friend_Req_SelectPlay_tips="请选择玩家",e.language_Friend_Turn_txt="转",e.language_Friend_Level_txt="级",e.language_Friend_Txt0="角色名",e.language_Friend_Txt1="等级",e.language_Friend_Txt2="职业",e.language_Friend_Txt3="所属行会",e.language_Friend_Txt4="显示颜色",e.language_Friend_Txt5="性别",e.language_Friend_Txt6="日期",e.language_Friend_Txt7="当前经验",e.language_Friend_Txt8="升级还需",e.language_Friend_Btn_Txt0="添 加",e.language_Friend_Btn_Txt1="操 作",e.language_Friend_Btn_Txt2=e.language_Friend_Btn_Txt1,e.language_Friend_Btn_Txt3="设置颜色",e.language_Friend_Btn_Txt4="添加关注",e.language_Friend_Btn_Txt5="取消关注",e.language_Friend_Btn_Txt6=e.language_Friend_Btn_Txt0,e.language_Friend_Btn_Txt7="删 除",e.language_Friend_Btn_Txt8="全部接受",e.language_Friend_Btn_Txt9="接 受",e.language_Friend_Btn_Txt10="拒 绝",e.language_Friend_Btn_Txt11=e.language_Friend_Btn_Txt1,e.language_Team_NoTeam_tips="您现在还没有队伍",e.language_Team_NearNoTeamList_tips="当前附近没有队伍",e.language_Team_NoOnlineFriendList_tips="当前没有好友在线",e.language_Team_ExitTeam_tips="您确定要退出队伍吗？",e.language_Team_LeaderKickExitTeam_tips_0="您确定要求 ",e.language_Team_LeaderKickExitTeam_tips_1=" 离开队伍吗？",e.language_Team_LeaderinviteJonTeam_tips_0="您确定邀请 ",e.language_Team_LeaderinviteJonTeam_tips_1=" 加入队伍吗？",e.language_Team_ApplyAddTeam_tips_0="您确定申请加入 ",e.language_Team_ApplyAddTeam_tips_1=" 的队伍吗？",e.language_Team_ReqAddTeam_tips=" 请求加入您的队伍，是否同意？",e.Language_Team_Text0=["角色名","等级","职业","所在地图"],e.Language_Team_Text1=["角色名","等级","职业","所属行会"],e.Language_Team_Text2=["队长名","等级","成员人数","队长行会"],e.Language_Team_Text3="允许组队",e.Language_Team_Btn_Text0="踢出队伍",e.Language_Team_Btn_Text1="添 加",e.Language_Team_Btn_Text2="退出队伍",e.Language_Team_Btn_Text3="操 作",e.Language_Team_Btn_Text4="申请入队",e.Language_Team_Btn_Text5="邀请入队",e.language_Team_Add_Team_Text="请输入想要邀请入队的玩家名字",e.language_Guild_Tar_txt=["行会"],e.language_Guild_Opt_tar_txt=[{name:"行会信息"},{name:"行会管理"},{name:"成员列表"},{name:"入会审批"},{name:"行会列表"},{name:"行会商店"}],e.language_Guild_Approve_txt="|C:0xF6AF41&T:需要审批|",e.language_Guild_No_Approve_txt="|C:0x0fee27&T:不需要审批|",e.language_Guild_Jobs_txt=["成员","|C:0x0fee27&T:精英|","|C:0x3389ff&T:长老|","|C:0xff22ed&T:副会长|","|C:0xf1ed02&T:会长|"],e.language_Guild_Jobs_Log_txt=["成员","精英","长老","副会长","会长"],e.language_Guild_Exit_txt="是否确定退出行会，退出后贡献值不会清零!",e.language_Guild_Del_txt="是否确定解散行会？",e.language_Guild_Apply_State_txt="已申请",e.language_Guild_Apply_State_txt1="申请",e.language_Guild_Apply_Fail_txt="已发送",e.language_Guild_Apply_Level_Fail_txt="等级不足",e.language_Guild_Apply_Level_Fail1_txt="级无法加入行会！",e.language_Guild_Btn_Exit_txt="退出行会",e.language_Guild_Btn_Del_txt="解散行会",e.language_Guild_Btn_Th_txt={txt:"弹劾",name:"setThBtn"},e.language_Guild_Btn_Setvice_txt={txt:"设副会长",name:"setViceBtn"},e.language_Guild_Btn_Delvice_txt={txt:"撤副会长",name:"delViceBtn"},e.language_Guild_Btn_KickGuild_txt={txt:"踢出行会",name:"kickBuildBtn"},e.language_Guild_Btn_GiveLeaderGuild_txt={txt:"禅让会长",name:"GiveLeaderBuildBtn"},e.language_Guild_kickRole_txt="是否确定删除此玩家？",e.language_Guild_GiveLeaderRole_txt="是否确定将会长禅让给玩家？",e.language_Guild_SetViceRole_txt="是否确定将此玩家设置为副会长？",e.language_Guild_DelViceRole_txt="是否确定撤销此玩家副会长职务？",e.language_Guild_ThLeader_txt="弹劾需要消耗|C:0xf1ed02&T:%s元宝|，请确认是否对%s进行弹劾？",e.language_Guild_CreatGuild_txt="创建行会",e.language_Guild_DevoteTitle_txt="捐献物资",e.language_Guild_Devote_txt="",e.language_Guild_DayNum_txt="今日次数",e.language_Guild_Shop_Title_txt="行会商城",e.language_Guild_Edit_Noti_txt="编辑公告",e.language_Guild_Save_Noti_txt="保存公告",e.language_Guild_Set_Title_txt="招贤设置",e.language_Guild_Build_Txt0="等级：",e.language_Guild_Build_Txt1="决定行会等级",e.language_Guild_Build_Txt2="决定其他建筑最高级",e.language_Guild_Build_Txt3="增加行会人数上限",e.language_Guild_Build_Txt4="需资金：",e.language_Guild_Build_Txt5=e.language_Guild_Build_Txt0,e.language_Guild_Build_Txt6="敬请期待",e.language_Guild_Build_Txt7=e.language_Guild_Build_Txt4,e.language_Guild_Build_Txt8=e.language_Guild_Build_Txt0,e.language_Guild_Build_Txt9="增加行会捐献次数",e.language_Guild_Build_Txt10="加强行会商店功能",e.language_Guild_Build_Txt11=e.language_Guild_Build_Txt4,e.language_Guild_Build_Txt12="行会日志",e.Language_Guild_Btn_Txt="升  级",e.Language_Guild_Devote_Txt0="可获得：",e.Language_Guild_Devote_Txt1="资金",e.Language_Guild_Devote_Txt2="贡献",e.Language_Guild_Devote_Txt3="捐献",e.Language_Guild_Info_Txt0="我的职位：",e.Language_Guild_Info_Txt1="我的贡献：",e.Language_Guild_Info_Txt2="成员数量：",e.Language_Guild_Info_Txt3="行会公告",e.Language_Guild_Info_Txt4="行会商店",e.Language_Guild_Info_Txt5="行会公告",e.Language_Guild_Info_Btn_Txt0="设置条件",e.Language_Guild_Info_Btn_Txt1="全部同意",e.Language_Guild_Info_Btn_Txt2="全部拒绝",e.Language_Guild_Info_Btn_Txt3="操作",e.Language_Guild_Member_Txt0="贡献度：",e.Language_Guild_Member_Txt1="职位：",e.Language_Guild_Member_Txt2="上次在线：",e.Language_Guild_Member_Btn_Txt0="拒绝",e.Language_Guild_Member_Btn_Txt1="同意",e.Language_Guild_Creat_Txt0="请输入行会名称",e.Language_Guild_Creat_Txt1="消耗元宝：",e.Language_Guild_ListItem_Txt0="人数：",e.Language_Guild_ListItem_Txt1="等级要求：",e.Language_Guild_ListItem_Txt2="宣战",e.Language_Guild_ListItem_Txt3="会长：",e.Language_Guild_ListItem_Txt4="宣战中",e.Language_Guild_Set_Txt0="是否需要审批：",e.Language_Guild_Set_Txt1="等级要求：",e.Language_Guild_Set_Txt2="是",e.Language_Guild_Set_Txt3="否",e.Language_Guild_Set_Txt4=e.language_Common_1,e.Language_Guild_OneKeyApply="一键申请",e.Language_Guild_Vip=["","|C:0xe5ddcf&T:白|卡特权才可以创建行会","|C:0x28ee01&T:绿|卡特权才可以创建行会","|C:0x0066ff&T:蓝|卡特权才可以创建行会","|C:0x7d21d9&T:紫|卡特权才可以创建行会","|C:0xff7700&T:橙|卡特权才可以创建行会","|C:0xff7700&T&T:橙星|特权才可以创建行会","|C:0xff7700&T&T:橙月|特权才可以创建行会"],e.language_Shop_Opt_tar_txt=["热 销","限 时","折 扣"],e.language_Shop_Buy_Item_txt="花费",e.language_Shop_Txt0="当前拥有：",e.language_Shop_NotShop_Txt="当前没有任何商品",e.language_Shop_Limit_Txt="|C:0xff7700&T:已达到每日次数上限！|",e.language_Rule_Title="规则说明",e.language_Delay="延迟",e.language_Transmit="移动传送",e.language_TransmitConsume="是否消耗%s传送？",e.language_NPC1="|C:0xff7700&T:传送需要等级达到%s级|",e.language_NPC2="|C:0xff7700&T:传送需要转生达到%s转|",e.language_NPC3="|C:0xff7700&T:传送开服第%s天开启|",e.language_Meridians_NeedLevel_text="需要等级:",e.language_Meridians_OpenDay_text="开服天数:",e.language_Meridians_CostExp_text="消耗经验:",e.language_Meridians_CostBindcoin_text="消耗绑金:",e.language_Meridians_CostGoods_text="消耗物品:",e.language_Meridians_CostCircleLevel_text="需要转生：",e.language_Meridians_Up_text1="突破",e.language_Meridians_Up_text0="冲穴",e.language_Meridians_Max_Lv="内功已达最大等级",e.language_WashRedName_text1="突破",e.language_WashRedName_text2="清除",e.language_WashRedName_text3="PK值",e.language_WashRedName_text4="无限",e.language_Wash_txt0="费用",e.language_Achievement_TabText=["成 就","勋 章"],e.language_Achievement_GetText="领取",e.language_Achievement_TxtGift="可获得奖励：",e.language_Achievement_Txtpro="进度：",e.language_Achievement_TxtPopularity="我的声望点数：",e.language_Achievement_TxtCurAtt="当前属性",e.language_Achievement_TxtNextAtt="下级属性",e.language_Achievement_ShowText="查看",e.language_Achievement_Title="成就奖励",e.language_Achievement_GetGiftFail="成就奖励领取失败",e.language_Achieve_Medal_NeedLevel_text="等级达到%s级",e.language_Achieve_Medal_OpenDay_text="开服天数达到%s天",e.language_Achieve_Medal_CostCircleLevel_text="转生等级达到%s级",e.language_Achieve_Medal_CostFinishAch_text="完成成就：",e.language_Achieve_Medal_MaxLevel_text="已满级",e.language_FuBen_Text1="积分排行",e.language_FuBen_Text2="查看排名",e.language_FuBen_Text3="我的积分",e.language_FuBen_Text4="积分排名",e.language_FuBen_Text5="排名奖励",e.language_FuBen_Text6="积分奖励",e.language_FuBen_Text7="我的排名：",e.language_FuBen_Text8="积分",e.language_FuBen_Text9="奖励",e.language_FuBen_Text10="排名",e.language_FuBen_Text11="",e.language_FuBen_Text12="已击败：",e.language_FuBen_Text15="击杀奖励",e.language_FuBen_Text16="沙巴克",e.language_FuBen_Text17="神装BOSS次数：",e.language_FuBen_Text18="开放",e.language_Player_Text1="创建角色",e.language_Player_Text2="切换角色",e.language_Player_Text3="行会：",e.language_Pay_Text1="",e.language_Pay_Text2="",e.language_Pay_Text3="|C:0xF6883A&T:累计充值%s元宝|",e.language_Pay_Text4="|C:0xF6883A&T:限购：%s/%s|",e.language_Pay_Text5="购 买",e.language_Pay_Text6="任意购买",e.language_Pay_Text7="活动剩余时间：",e.language_FourImages_MaxText="已达满阶",e.language_FourImages_Text0="需要四象神兽都达到%s才能升阶",e.language_FourImages_Text1="青龙之魂",e.language_FourImages_Text2="白虎之魂",e.language_FourImages_Text3="朱雀之魂",e.language_FourImages_Text4="玄武之魂",e.language_FourImages_Title_Text1="青龙",e.language_FourImages_Title_Text2="白虎",e.language_FourImages_Title_Text3="朱雀",e.language_FourImages_Title_Text4="玄武",e.language_FourImages_Tips1="|C:0x3794fb&T:破怪:攻击时增加对怪物的伤害值\n御怪:受击时减少来自怪物的伤害值|",e.language_FourImages_Tips2="|C:0x3794fb&T:破道:攻击时增加对道士职业的伤害值\n御道:受击时减少来自道士职业的伤害值|",e.language_FourImages_Tips3="|C:0x3794fb&T:破法:攻击时增加对法师职业的伤害值\n御法:受击时减少来自法师职业的伤害值|",e.language_FourImages_Tips4="|C:0x3794fb&T:破战:攻击时增加对战士职业的伤害值\n御战:受击时减少来自战士职业的伤害值|",e.language_WordFormula_MaxText="已达满阶",e.language_WordFormula_Text0="需要天下无双都达到%s才能升阶",e.language_WordFormula_names=["天字诀","下字诀","无字诀","双字诀"],e.language_Wlelfare_Text1="未达标",e.language_Wlelfare_Text2="领取奖励",e.language_Wlelfare_Text3="签到",e.language_Wlelfare_Text4=["该激活码兑换成功，请邮件查收！","|C:0xff7700&T:该激活码已被使用，请邮件查看|","|C:0xff7700&T:激活码不存在|","|C:0xff7700&T:已使用过同类型|","|C:0xff7700&T:SQL查询错误|","|C:0xff7700&T:未到使用时间|","|C:0xff7700&T:礼包码过期了|","","","","","|C:0xff7700&T:HTTP接口错误|","|C:0xff7700&T:非本平台礼包码|","|C:0xff7700&T:已使用过同类型激活码|"],e.language_Wlelfare_Text5="次",e.language_Wlelfare_Text6="已购买",e.language_Wlelfare_Text7="已领取",e.language_War_Text0=["奖励","任务","商店"],e.language_War_Text1=["每日任务","每日挑战","活动达人","斩妖除魔"],e.language_War_Text2="奖励进阶",e.language_War_Text3="购买%s级可以获得以下奖励！",e.language_War_Text4="购买%s级可提升至%s级！",e.language_War_Text5="每日任务积分上限！",e.language_War_Text6="每日挑战积分上限！",e.language_War_Text7="本期活动达人积分上限！",e.language_War_Text8="本期斩妖除魔积分上限！",e.language_War_Text9="积分获取达到上限！",e.language_War_Text10="至尊凭证奖励",e.language_War_Text11="购买至尊凭证可以直接获得以下所有奖励！",e.language_War_Text12="|C:0xff7700&T:暂无奖励可领取|",e.language_War_Text13="|C:0xff7700&T:需要%s级才可以购买战令等级|",e.language_War_Text14="黄金凭证奖励",e.language_War_Text15="购买等级",e.language_War_Text16="是否提交",e.language_War_Text17="玛法战令",e.language_War_Text18="前往",e.language_War_Text19="已完成",e.language_War_Text20="|C:0xff7700&T:%s数量不足|",e.language_War_Text21="开服第%s天才开启该任务，请耐心等待。",e.language_War_Text22="当前已满级！",e.language_Refining_Text1=["已装备","背包"],e.language_Refining_Text2="/个替换",e.language_Refining_Text3="查看详情",e.language_Refining_Text4="您确认替换当前洗炼属性吗？",e.language_Refining_Text5="|C:0xff7700&T:洗炼失败|",e.language_Refining_Text6="洗炼成功",e.language_UpStar_Text1=["已装备"],e.language_UpStar_Text2="/个替换",e.language_UpStar_Text3="查看详情",e.language_UpStar_Text4="您确认替换当前洗炼属性吗？",e.language_UpStar_Text5="|C:0xff7700&T:洗炼失败|",e.language_UpStar_Text6="洗炼成功",e.language_Omission_txt1="需要等级：",e.language_Omission_txt2="需要转生：",e.language_Omission_txt3="消耗绑金：",e.language_Omission_txt4="消耗",e.language_Omission_txt5="获得道具",e.language_Omission_txt6="未学习",e.language_Omission_txt7="设",e.language_Omission_txt8="升 级",e.language_Omission_txt9="|C:0xFFFFFF&T:为技能||C:0xFFF000&T:%s||C:0xFFFFFF&T:设置快捷键",e.language_Omission_txt10="使用",e.language_Omission_txt11="兑换",e.language_Omission_txt12="|C:0xF4D1A4&T:修为",e.language_Omission_txt13="当前转生等级：",e.language_Omission_txt14="转生已达最大等级",e.language_Omission_txt15="转生修为:",e.language_Omission_txt16="0转玩家数:已完成",e.language_Omission_txt17="转玩家数:",e.language_Omission_txt18="祝福星级:",e.language_Omission_txt19="祝福值",e.language_Omission_txt20="每天0点自动回收",e.language_Omission_txt21="是否删除好友:|C:0x3073D2&T:%s",e.language_Omission_txt22="我的排名：未开启",e.language_Omission_txt23="我的排名：未上榜",e.language_Omission_txt24="当前祝福值:",e.language_Omission_txt25="系统邮件",e.language_Omission_txt26="已刷新",e.language_Omission_txt27="刷新时间:",e.language_Omission_txt28="怪物血量:",e.language_Omission_txt29="今日快捷挑战次数：",e.language_Omission_txt30="增加|C:0x28ee01&T:",e.language_Omission_txt31="经验兑换：消耗|C:0x28ee01&T:",e.language_Omission_txt32="|C:0xF4D1A4&T:经验|",e.language_Omission_txt33="经验兑换：消耗|C:0xe50000&T:",e.language_Omission_txt34="回收积分:消耗",e.language_Omission_txt35="今日剩余:",e.language_Omission_txt36="展 示",e.language_Omission_txt37="不展示",e.language_Omission_txt38="|C:0xEDE6D3&T:击杀%s只开启下一档BOSS|",e.language_Omission_txt39="|C:0xF1ED02&T:下一级",e.language_Omission_txt40="|C:0xF1ED02&T:已满级",e.language_Omission_txt41="|C:0xe98c54&T:级别未满",e.language_Omission_txt42="强 化",e.language_Omission_txt43=[["qh_icon_wuqi","武器"],["qh_icon_yifu","衣服"],["qh_icon_yaodai","腰带"],["qh_icon_xiezi","鞋子"],["qh_icon_jiezhi","戒指"],["qh_icon_huwan","护腕"],["qh_icon_xianglian","项链"],["qh_icon_toukui","头盔"]],e.language_Omission_txt44="激 活",e.language_Omission_txt45="转生成功后等级下降|C:0xe50000&T: %s| 级",e.language_Omission_txt46="自动泡点中...",e.language_Omission_txt47="|C:0xe50000&T:你已被石化|",e.language_Omission_txt48="赞助|C:0xf1ed02&T: %s%s|激活永久|C:%s&T:%s会员|",e.language_Omission_txt49="任意回收",e.language_Omission_txt50="回收可得",e.language_Omission_txt51="|C:0x28ee01&T:回收成功!|",e.language_Omission_txt52="倒计时：",e.language_Omission_txt53="赞助|C:0xf1ed02&T: %s%s|或|C:0xf1ed02&T: %s%s|激活永久|C:%s&T:%s会员|",e.language_Omission_txt54="|C:0xff7700&T:未激活特权：智能回收|",e.language_Omission_txt55="金币回收",e.language_Omission_txt56="毫秒",e.language_Omission_txt57="|C:0xff7700&T:银两不足|",e.language_Omission_txt58="祝福",e.language_GrowWay_txt0="成长之路",e.language_Omission_txt59="当前等级：",e.language_Omission_txt60="下一等级：",e.language_Omission_txt61="已激活套装属性：共鸣%s阶",e.language_Omission_txt62="未加入行会",e.language_Omission_txt63="当前行会非沙巴克行会",e.language_Omission_txt64="当前职位没有奖励",e.language_Omission_txt65="奖励已领取",e.language_Omission_txt66="活动进行中，不能领取",e.language_Omission_txt67="|C:0x28ee01&T:升星成功|",e.language_Omission_txt68="|C:0xff7700&T:当前位置无法升星|",e.language_Omission_txt69="|C:0xff7700&T:当前已是最大星级|",e.language_Omission_txt70="|C:0xff7700&T:转生已达最大等级|",e.language_Omission_txt71="|C:0xff7700&T:该功能只对角色目标生效|",e.language_Omission_txt72="|C:0xff7700&T:您已开启狂暴状态|",e.language_Omission_txt73="|C:0x28ee01&T:开启成功|",e.language_Omission_txt74="开启狂暴",e.language_Omission_txt75="狂暴介绍",e.language_Omission_txt76="狂暴状态",e.language_Omission_txt77="已开启",e.language_Omission_txt78="未开启",e.language_Omission_txt79="当前狂暴状态:",e.language_Omission_txt80="|C:0xff7700&T:请选择购买数量|",e.language_Omission_txt81="|C:0xff7700&T:配置表错误|",e.language_Omission_txt82="价格",e.language_Omission_txt83="拥有",e.language_Omission_txt84="好友数量",e.language_Omission_txt85="在线好友",e.language_Omission_txt86="捐献排行榜",e.language_Omission_txt87="捐献说明",e.language_Omission_txt88="捐献排行",e.language_Omission_txt89="暂无",e.language_Omission_txt90="未上榜",e.language_Omission_txt91="每次捐献元宝数量需要为|C:0x28ee01&T:%s|的倍数",e.language_Omission_txt92="每月1号或合区会重置榜单|C:0xe50000&T:（属性奖励重新登录后生效）|",e.language_Omission_txt93="我已捐献",e.language_Omission_txt94="捐献元宝",e.language_Omission_txt95="物攻",e.language_Omission_txt96="道术",e.language_Omission_txt97="秒后自动回城",e.language_Omission_txt98="秒后原地复活",e.language_Omission_txt99="秒后场景内复活",e.language_Omission_txt100="回城变强",e.language_Omission_txt101="绑金",e.language_Omission_txt102="材料不足",e.language_Omission_txt103="吸血",e.language_Omission_txt104="吸血效果",e.language_Omission_txt105="主题",e.language_Omission_txt106="未读",e.language_Omission_txt107="已读",e.language_Omission_txt108="剩余元宝：",e.language_Omission_txt109="沙城行会:",e.language_Omission_txt110="沙城争霸将在|C:0x28ee01&T:%s|后开启",e.language_Omission_txt111="私聊",e.language_Omission_txt112="查看信息",e.language_Omission_txt113="删除好友",e.language_Omission_txt114="加黑名单",e.language_Omission_txt115="强化已达最高等级",e.language_Omission_txt116="微信礼包",e.language_Omission_txt117="手机礼包",e.language_Omission_txt118="认证礼包",e.language_Omission_txt119="登录礼包",e.language_Omission_txt120="基础经验",e.language_Omission_txt121="|C:0x28ee01&T:(%s加成)|",e.language_Omission_txt122="单价",e.language_Omission_txt123="",e.language_Omission_txt124="已被击败！",e.language_Omission_txt125="原价",e.language_Omission_txt126="现价",e.language_Omission_txt127="|C:0xDCB789&T:累计登录第||C:0x1EC605&T:%s||C:0xDCB789&T:天领取",e.language_Omission_txt128="本月已签到",e.language_Omission_txt129="后刷新",e.language_Omission_txt130="你被|C:0xe50000&T:%s%s|在|C:0x0066ff&T:【%s】|击败了！",e.language_Omission_txt131="你在|C:0x0066ff&T:%s|击败了|C:0x28ee01&T:%s|！",e.language_Omission_txt132="玩家",e.language_Omission_txt133="极",e.language_Omission_txt134="锻造属性",e.language_Omission_txt135="基础属性",e.language_Omission_txt136="特殊属性",e.language_Omission_txt137="套装属性",e.language_Omission_txt138="秒后自动关闭",e.language_Omission_txt139="秒后自动穿戴",e.language_Omission_txt140="快捷传送要求:",e.language_Omission_txt141="加群福利",e.language_Omission_txt142="失败会降星哟",e.language_Omission_txt143="当前阶数：",e.language_Omission_txt144="下一阶数：",e.language_Omission_txt145="需要内功等级：",e.language_Omission_txt146="内功共鸣",e.language_Omission_txt147="使用|C:0xf1ed02&T: %s%s|激活永久|C:%s&T:%s会员|",e.language_Omission_txt148="绑定礼包",e.language_Omission_txt149="防沉迷礼包",e.language_Omission_txt150="vip福利",e.language_Omission_txt151="会员福利",e.language_Omission_txt152="盒子福利",e.language_Omission_txt153="平台vip1-3",e.language_Omission_txt154="平台vip4-6",e.language_Omission_txt155="平台vip7-9",e.language_Omission_txt156="铂金会员及以上",e.language_Omission_txt157="钻石会员及以上",e.language_Omission_txt158="每日福利",e.language_Omission_txt159="下载盒子获得超强BUFF",e.language_Omission_txt160="系统检测到您还没有进行实名制认证，根据国家相关政策规定，网游用户必须进行实名制认证。请您尽快完成实名认证，否则将会影响您的正常游戏体验及收益。现在完成实名认证还可以领取实名礼包。",e.language_Omission_txt161="您已完成实名认证，感谢您的配合，点击下方领取按钮即可领取实名认证礼包。",e.language_Omission_txt162="三端福利",e.language_Omission_txt163="微信福利",e.language_Omission_txt164="盒子礼包",e.language_Omission_txt165="会员专属称号",e.language_Omission_txt166="会员特权",e.language_Omission_txt167="白金会员",e.language_Omission_txt168="超级会员",e.language_Omission_txt169="白金年费会员",e.language_Omission_txt170="超级年费会员",e.language_Omission_txt171="特权礼包",e.language_Omission_txt172="每日礼包",e.language_Omission_txt173="暂无会员",e.language_Omission_txt174="赞助|C:%s&T:%s会员|",e.language_Ghost_TITLE="神魔",e.language_Ghost_TABl="神魔之体",e.language_Ghost_TAB2="神魔共鸣",e.language_Ghost_TAB3="神魔说明",e.language_Ghost_TAB4="神魔保险",e.language_Ghost_DESC="神魔之体满级10级，成功率40%，成功+1，失败清零！",e.language_Ghost_DESC2="当前所有神魔均达|C:0x28ee01&T:%s|级，最高|C:0x28ee01&T:%s|级，额外获得攻魔道上限：|C:0x28ee01&T:+%s|",e.language_Ghost_DESC3="Lv.%s",e.language_Ghost_DESC4="神魔之体修炼每级消耗均为一颗",e.language_Ghost_DESC5="所有神魔条目达标、单个神魔提升更高级，都可获额外攻魔道上限！",e.language_Ghost_DESC6="所有神魔条目达标、单个神魔提升更高级，都可获额外攻魔道上限！",e.language_Ghost_DESC7="五个神魔全部10级会得到稀有称号！（邮件发放）",e.language_Ghost_DESC8="激活称号：",e.language_Ghost_DESC9="称号激活属性奖励：",e.language_Ghost_DESC10="|C:0xeee104&T:神魔原几率为40%，为了防止玩家脸黑设定保险机制！|\n每修炼|C:0x28ee01&T:1|次增加|C:0x28ee01&T:5|点祝福值，|C:0x28ee01&T:100|点祝福值提高|C:0x28ee01&T:0.1%|几率！\n积累|C:0x28ee01&T:10000|祝福值则每次升级必定|C:0x28ee01&T:100%|成功！祝福值只增不减",e.language_Ghost_DESC11="当前成功率：",e.language_Ghost_DESC12="当前神魔总等级：|C:0x28ee01&T:%s级|",e.language_Ghost_DESC13="使用元宝代替%s，%s元宝/个",e.language_Ghost_DESC14="消耗%s自动修炼神魔之体",e.language_Ghost_Btn="修 炼",e.language_Ghost_Btn2="前往领取",e.language_Ghost_Btn3="前往升级",e.language_Ghost_Btn4="自动修炼",e.language_Ghost_Btn5="取消自动",e.language_Ghost_result=["最大等级","时间未到","等级转生未到","失败"],e.language_GuanZhi_Label="当前官职：",e.language_GuanZhi_Label2="需要等级：%s转%s级",e.language_SoldierSoul_Text1="救主灵刃",e.language_SoldierSoul_Text2="剧毒裁决",e.language_SoldierSoul_Text3="霜之哀伤",e.language_SoldierSoul_Text4="血饮狂刀",e.language_SoldierSoul_MaxText="已达满级",e.language_VipPrivilege_Title_1="|C:0xeee104&T:会员专属特权|",e.language_VipPrivilege_Title_2="|C:0xeee104&T:会员专属称号|",e.language_VipPrivilege_Title_3="|C:0xeee104&T:会员专属豪礼|",e.language_VipPrivilege_Desc_1="1.每日|C:0x28ee01&T:150|次世界聊天次数\n2.每日|C:0x28ee01&T:25|次摇钱树次数\n3.复活特权：跨服本服所有场景复活等待时间直接|C:0x28ee01&T:减半|(原服世界BOSS、竞技大乱斗、夜战沃玛三等从等待10秒降为5秒，跨服次元BOSS、跨服头领、跨服竞技大乱斗、跨服夜战沃玛三等，从等待12秒降为6秒)\n4.随身仓库格数+42",e.language_VipPrivilege_Desc_2="<橙星会员>称号\n|C:0xe50000&T:全属性加成|，攻魔道|C:0x28ee01&T:+1%|、双防|C:0x28ee01&T:+1%|、体力加成|C:0x28ee01&T:+1%|、伤害加成|C:0x28ee01&T:+1%|、伤害吸收|C:0x28ee01&T:+1%|，效果跨服|C:0xe50000&T:翻倍|",e.language_VipPrivilege_Desc_3="|C:0xe50000&T:天之散件自选箱|\n顶级魂玉、勋章、治疗宝玉任意挑",e.language_VipPrivilege_Desc_4="|C:0xe50000&T:[特权]复活加速|\n所有场景复活时间立即减半",e.language_VipPrivilege_Desc_5="|C:0xff7700&T:血饮狂刀[魄]| |C:0x28ee01&T:*300|\n兵魂血饮狂刀升级、洗炼，升级属性加成跨服翻倍",e.language_VipPrivilege_Desc_6="神魔结晶|C:0x28ee01&T:*666|\n神魔升级一次爽",e.language_VipPrivilege_Desc_7="多倍经验瓶|C:0x28ee01&T:*100|\n等级大幅提升",e.language_VipPrivilege_Desc_2_1="1.每日|C:0x28ee01&T:180|次世界聊天次数\n2.每日|C:0x28ee01&T:25|次摇钱树次数",e.language_VipPrivilege_Desc_2_2="<橙月会员>称号\n|C:0xe50000&T:专属称号|，伤害加成|C:0x28ee01&T:+5%|、护身特效（受到伤害掉血用魔法抵消）|C:0x28ee01&T:+5%|",e.language_VipPrivilege_Desc_2_3="|C:0xe50000&T:天月神装自选箱|\n顶级神装任意挑",e.language_VipPrivilege_Desc_2_4="|C:0xe50000&T:黑夜侠客|\n绝版时装免费领",e.language_VipPrivilege_Desc_2_5="|C:0xff7700&T:内功秘籍| |C:0x28ee01&T:*1888|\n内功技能随心修炼",e.language_VipPrivilege_Desc_2_6="神魔结晶|C:0x28ee01&T:*666|\n神魔升级一次爽",e.language_VipPrivilege_Desc_2_7="玛法宝石|C:0x28ee01&T:*158|\n装备升星，提升战力"
}(e=t.LanguageUtils||(t.LanguageUtils={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.ruleId=0,t.titleStr="",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.initUI(),this._roleType==t.RoleViewEnum.myRolePanel?this.initMyRoleView():this._roleType==t.RoleViewEnum.otherPlayerPanel&&this.initOtherPlayerView()},i.prototype.open=function(e){this._roleType=e.roleType,this._roleType==t.RoleViewEnum.myRolePanel?this.roleData=t.EntityMgr.ins().getPayer.propSet:this._roleType==t.RoleViewEnum.otherPlayerPanel&&t.EquipItemMgr.ins().otherPlayerEquips&&(this.roleData=t.EquipItemMgr.ins().otherPlayerEquips.propSet)},i.prototype.initUI=function(){},i.prototype.initMyRoleView=function(){},i.prototype.initOtherPlayerView=function(){},i}(t.BaseView);t.RoleBasePanel=e,__reflect(e.prototype,"app.RoleBasePanel")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._container=t,t.touchChildren=t.touchEnabled=!1,this.init()}return e.prototype.init=function(){this._helmet=this._container.getChildByName("helmet"),this._cloth=this._container.getChildByName("cloth"),this._arm=this._container.getChildByName("arm"),this.bg=this._container.getChildByName("bg")},e.prototype.onTouchTap=function(t){console.log("onTouchTap")},Object.defineProperty(e.prototype,"skin",{get:function(){return this._container},enumerable:!0,configurable:!0}),e.prototype.setData=function(i){if(void 0===i&&(i=null),i){var n,s=0;this._arm.source="",this._helmet.source="",this.bg.source="",this.bg.visible=!1;var a=t.EntityMgr.ins().getPayer,r=a.propSet.getSex();0==r?this._cloth.source="body"+e.INIT_MODEL[0]+"_"+r+"_png":this._cloth.source="body"+e.INIT_MODEL[1]+"_"+r+"_png",this._helmet.source=a.propSet.getFacteStr()+"_"+r+"_png";for(var o=0;o<i.length;o++){n=i[o];var l=t.GlobalConfig.StdItems[n.wItemId];if(l){var h=Number(l.type);1==h?(this._arm.source="weapon_"+l.icon+"_png",s=l.imgeff):2==h?(this._cloth.source=a.propSet.getBodyModelStr()+"_"+r+"_png",l.imgeff&&(this.bg.source="bodyimgeff"+l.imgeff+"_"+r+"_png",this.bg.visible=!0)):3==h&&(this._helmet.source="helmet_"+l.icon+"_png")}}s?(this.weaponMC||(this.weaponMC=t.ObjectPool.pop("app.MovieClip"),this.weaponMC.blendMode=egret.BlendMode.ADD,this._container.addChild(this.weaponMC)),this.weaponMC.playFileEff(ResDirEnum.RES_DIR_WIMGEFF+"weaponeff"+s+"_n",-1)):this.weaponMC&&(this.weaponMC.destroy(),this.weaponMC=null)}},e.prototype.setOtherData=function(i,n){if(void 0===i&&(i=null),i){var s,a=0;this._arm.source="",this._helmet.source="",this.bg.source="",this.bg.visible=!1;var r=n.propSet.getSex();0==r?this._cloth.source="body"+e.INIT_MODEL[0]+"_"+r+"_png":this._cloth.source="body"+e.INIT_MODEL[1]+"_"+r+"_png",this._helmet.source=n.propSet.getFacteStr()+"_"+r+"_png";for(var o=0;o<i.length;o++){s=i[o];var l=t.GlobalConfig.StdItems[s.wItemId];if(l){var h=Number(l.type);1==h?(this._arm.source="weapon_"+l.icon+"_png",a=l.imgeff):2==h?(this._cloth.source=n.propSet.getBodyModelStr()+"_"+r+"_png",l.imgeff&&(this.bg.source="bodyimgeff"+l.imgeff+"_"+r+"_png",this.bg.visible=!0)):3==h&&(this._helmet.source="helmet_"+l.icon+"_png")}}a?(this.weaponMC||(this.weaponMC=t.ObjectPool.pop("app.MovieClip"),this.weaponMC.blendMode=egret.BlendMode.ADD,this._container.addChild(this.weaponMC)),this.weaponMC.playFileEff(ResDirEnum.RES_DIR_WIMGEFF+"weaponeff"+a+"_n",-1)):this.weaponMC&&(this.weaponMC.destroy(),this.weaponMC=null)}},e.prototype.destory=function(){this.weaponMC&&(this.weaponMC.destroy(),this.weaponMC=null),t.DisplayUtils.removeFromParent(this._container)},e.INIT_MODEL=["001","002"],e}();t.RoleInnerModel=e,__reflect(e.prototype,"app.RoleInnerModel")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.newIcon=new eui.Image,t.keyArr=["1","2","3","4","5","6","Q","W","E","R","T","Y"],t.skinName="RoleSkilltemSkin",t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.phoneTipsGrp.visible=!1,gamelib.DeviceUtils.IsMobile?(this.phoneTipsGrp.visible=!0,this.phoneTipsGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.phoneSkillTips,this)):(this.btn_upgrade.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMoveUpgrade,this),this.btn_upgrade.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMoveUpgrade,this)),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMoveUpgrade,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMoveUpgrade,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchAp,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchAp,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchAp,this),this.btn_key.addEventListener(egret.TouchEvent.TOUCH_TAP,this.setSkillKey,this),this.btn_upgrade.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),t.EventManager.ins().addEvent(t.CompEvent.SHORTCUTKEY_SET,this.onClickSelectHandler,this),this.icon_group.addChild(this.newIcon),this.btn_key.textFlow=t.TextFlowMaker.generateTextFlow("<u>快捷设置</u>")},i.prototype.mouseMoveUpgrade=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)this.closeTips();else if(e.type==mouse.MouseEvent.MOUSE_OVER){var i=this.data.level,n=t.GlobalConfig.SkillsLevelConf[this.data.skillId][i];if(this.data.isMax)this.showTips([{skillId:this.data.skillId,desc:n.skillDesc,name:this.data.name,level:i}]);else{var s=t.GlobalConfig.SkillsLevelConf[this.data.skillId][i+1];s&&(i?this.showTips([{skillId:this.data.skillId,desc:n.skillDesc,name:this.data.name,level:i},{skillId:this.data.skillId,conds:s.upgradeConds,desc:n.skillNextDesc,name:this.data.name,level:i+1}]):this.showTips([{skillId:this.data.skillId,desc:s.skillDesc,name:this.data.name,level:i},{skillId:this.data.skillId,conds:s.upgradeConds,desc:s.skillDesc,name:this.data.name,level:i+1}]))}}},i.prototype.phoneSkillTips=function(e){var i=this.data.level,n=t.GlobalConfig.SkillsLevelConf[this.data.skillId][i];if(this.data.isMax)this.showTips([{skillId:this.data.skillId,desc:n.skillDesc,name:this.data.name,level:i}]);else{var s=t.GlobalConfig.SkillsLevelConf[this.data.skillId][i+1];s&&(i?this.showTips([{skillId:this.data.skillId,desc:n.skillDesc,name:this.data.name,level:i},{skillId:this.data.skillId,conds:s.upgradeConds,desc:n.skillNextDesc,name:this.data.name,level:i+1}]):this.showTips([{skillId:this.data.skillId,desc:s.skillDesc,name:this.data.name,level:i},{skillId:this.data.skillId,conds:s.upgradeConds,desc:s.skillDesc,name:this.data.name,level:i+1}]))}},i.prototype.closeTips=function(){t.EventManager.ins().sendEvent(t.CompEvent.ROLE_CLOSE_SKILL_DESC)},i.prototype.showTips=function(e){t.EventManager.ins().sendEvent(t.CompEvent.ROLE_SKILL_DESC,e)},i.prototype.register=function(t){this.data.dragName&&dragDropItemUtils.register(t,this.icon_group)},i.prototype.setSkillKey=function(){t.EventManager.ins().sendEvent(t.CompEvent.SHORTCUTKEY_SET,[this.btn_key.id,this.btn_key.skillId])},i.prototype.onTouchAp=function(e){t.UserTips.ins().closeTips()},i.prototype.showGetPropsView=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getBindCoin();if(!this.data.upgradeConds)return!0;for(var n=this.data.upgradeConds,s=0;s<n.length;s++){var a=n[s];if(1!=a.cond){if(2==a.cond){if(!a.consume)continue;if(a.value>i)return this.onGetProps(932),!1}else if(3==a.cond){if(!a.consume)continue;var r=void 0;if(r=t.GlobalConfig.StdItems[a.value]){var o=t.CurrencyUtils.getCurrency(QatEnum.qatEquipment,r.id);if(a.count>o)return this.onGetProps(r.id),!1}}if(4!=a.cond);else if(a.consume)continue}else if(a.consume)continue}return!0},i.prototype.onGetProps=function(e){var i=t.ViewManager.ins().getView(t.RoleView);if(i&&!t.ViewManager.ins().isShow(t.GaimItemWin)){this.parent.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,e,{x:i.x,y:i.y},{height:i.height,width:i.width},8888)}},i.prototype.onClickHandler=function(e){if(t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_INSIDE),this.data.isUpgrade){if(!this.showGetPropsView())return;t.SkillMgr.ins().send_5_3(this.data.skillId)}else(1==this.data.errorType||4==this.data.errorType)&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Common_84),6==this.data.errorType&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Common_243)},i.prototype.dataChanged=function(){this.icon.filters=null,this.icon_group.visible=!0,this.txt_level.visible=!1,this.txt_level.text=t.LanguageUtils.language_Omission_txt6,this.txt_desc.visible=!this.data.skillType,this.btn_key.visible=this.data.skillType&&!gamelib.DeviceUtils.IsMobile,this.txt_max.visible=this.data.isMax,this.btn_upgrade.visible=!this.data.isMax,this.keyLab.visible=gamelib.DeviceUtils.IsMobile?!1:!0,this.icon.source=this.data.icon,this.txt_name.text=this.data.name,this.redDot.visible=!!this.data.isRedDot,this.data.type?this.data.level?(this.txt_level.visible=!this.data.isMax,this.txt_level.text="Lv "+this.data.level,this.btn_key.id=this.data.state,this.keyLab.text=this.keyArr[this.data.state]?this.keyArr[this.data.state]:"",this.btn_key.skillId=this.data.skillId,this.data.skillType&&!gamelib.DeviceUtils.IsMobile&&(this.newIcon.width=60,this.newIcon.visible=!0,this.newIcon.height=60,this.newIcon.source=this.data.icon,this.icon_group.name=this.data.dragName,this.newIcon.name=this.data.dragName,this.register(this.newIcon))):(this.btn_key.visible=!1,this.icon_group.visible=!1):(this.btn_key.visible=!1,this.btn_upgrade.visible=!1,this.txt_level.visible=!this.data.isMax,this.txt_level.text="Lv "+this.data.level),this.data.level||(this.txt_level.visible=!0,this.icon.filters=t.FilterUtil.ARRAY_GRAY_FILTER)},i.prototype.playMC=function(){this.upMc||(this.upMc=t.ObjectPool.pop("app.MovieClip"),this.upMc.blendMode=egret.BlendMode.ADD,this.upMc.x=40,this.upMc.y=40),this.addChild(this.upMc),this.upMc.playFile(ResDirEnum.RES_DIR_EFF+"eff_jnsj",1,this.stopMC.bind(this))},i.prototype.stopMC=function(){this.upMc&&(this.upMc.destroy(),this.upMc=null)},i.prototype.onClickSelectHandler=function(e){var i=(e[0],e[1]);i==this.data.skillId&&(t.ViewManager.ins().isShow(t.ShortcutKeySetView)||(t.ShortcutKeySetView.BUTTON_STATE=this.data.state,t.ShortcutKeySetView.SKILL_ITEM=this.data,t.ViewManager.ins().open(t.ShortcutKeySetView)))},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchAp,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchAp,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchAp,this),this.data.dragName},i.prototype.addListener=function(){this.data.dragName,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchAp,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchAp,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchAp,this)},i.prototype.destroy=function(){this.stopMC(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchAp,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchAp,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchAp,this),t.EventManager.ins().removeEvent(t.CompEvent.SHORTCUTKEY_SET,this.onClickSelectHandler,this),this.btn_key.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.setSkillKey,this),this.btn_upgrade.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMoveUpgrade,this),this.btn_upgrade.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMoveUpgrade,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMoveUpgrade,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMoveUpgrade,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchAp,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchAp,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchAp,this),this.btn_upgrade.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),t.EventManager.ins().removeEvent(t.CompEvent.SHORTCUTKEY_SET,this.onClickSelectHandler,this),gamelib.DeviceUtils.IsMobile?this.phoneTipsGrp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.phoneSkillTips,this):(this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMoveUpgrade,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMoveUpgrade,this)),this.btn_key=null,this.callFunc&&(this.callFunc=null),this.data.dragName&&dragDropItemUtils.destroy(this.data.dragName),t.DisplayUtils.removeFromParent(this.newIcon),t.DisplayUtils.removeFromParent(this.icon_group),t.DisplayUtils.removeFromParent(this)},i.SKILL_BG=["bg_jineng_1","bg_jineng_2"],i}(eui.ItemRenderer);t.RoleSkillItemView=e,__reflect(e.prototype,"app.RoleSkillItemView");var i=function(){function t(){}return t}();t.RoleSkillVo=i,__reflect(i.prototype,"app.RoleSkillVo");var n=function(){function t(){}return t}();t.SkillConds=n,__reflect(n.prototype,"app.SkillConds")}(app||(app={}));var app;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=null);var n=e.call(this)||this;return n._isShow=!1,n.pos=0,n.isDelayUpdateShow=!1,n.isDelayUpdate=!1,n.isDelayUpdateCount=!1,n.id=t,n.tar=i,n}return __extends(i,e),Object.defineProperty(i.prototype,"isShow",{get:function(){return this._isShow},set:function(t){this._isShow!=t&&this.updateMC(t),this._isShow=t},enumerable:!0,configurable:!0}),i.prototype.updateMC=function(t){},i.prototype.getTar=function(){return this.tar?this.tar:this.createTar()},i.prototype.createTar=function(){var e=this.getConfig(),i=e.iconCls?egret.getDefinitionByName(e.iconCls):t.MainButton,n=new i;return e.iconSkin&&(n.skinName=e.iconSkin),e.icon&&(n.icon=e.icon),n.ID=e.id,this.tar=n,n},i.prototype.getConfig=function(){return t.GlobalConfig.PlayFunConfig[this.id]},i.prototype.checkShowIcon=function(){var e=this.getConfig();return t.GameSocket.IsCrossService&&!e.displayType?!1:t.ViewManager.ins().isCheckOpen(e.isShowNeed)},i.prototype.isCheckOpen=function(){var e=this.getConfig();return t.ViewManager.ins().isCheckOpen(e.isOpenNeed)},i.prototype.checkShowRedPoint=function(){return 0},i.prototype.checkShowCountDown=function(){return 0},i.prototype.getEffName=function(t){return null},i.prototype.playMovie=function(){},i.prototype.tapExecute=function(t){egret.Tween.removeTweens(this),1==t&&this.tar.currentState?egret.Tween.get(this).call(function(){this.tar.currentState="down"}).wait(200).call(function(){this.tar.currentState="up",egret.Tween.removeTweens(this),this.onClick()}):this.onClick()},i.prototype.onClick=function(){var e=this.getConfig();e.view&&this.isCheckOpen()&&(t.SoundManager.ins().playEffect(t.SoundUtil.VIEW),t.ViewManager.ins().isShow(e.view)?t.ViewManager.ins().close(e.view):t.ViewManager.ins().open(e.view,e.param))},i.prototype.mouseMove=function(e){var i=this.getConfig();if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else if(i.str){var n=this.tar.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,i.str,{x:n.x+this.tar.width/2,y:n.y+this.tar.height/2}),n=null}},i.prototype.addEventListeners=function(){this.tar&&(this.tar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tapExecute,this),this.tar.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.tar.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)),this.addRedEvents()},i.prototype.removeEventListeners=function(){this.isShow=!1,this.tar&&(this.tar.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.tapExecute,this),this.tar.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.tar.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)),this.removeRedEvents()},i.prototype.delayUpdate=function(){this.isDelayUpdate||(this.isDelayUpdate=!0,t.TimerManager.ins().doTimer(500,1,this.update,this))},i.prototype.update=function(){this.isDelayUpdate=!1,i.update(this)},i.prototype.delayUpdateCount=function(){this.isDelayUpdateCount||(this.isDelayUpdateCount=!0,t.TimerManager.ins().doTimer(500,1,this.updateCount,this))},i.prototype.updateCount=function(){this.isDelayUpdateCount=!1,i.updateCount(this)},i.prototype.delayUpdateShow=function(){this.isDelayUpdateShow||(this.isDelayUpdateShow=!0,t.TimerManager.ins().doTimer(500,1,this.updateShow,this))},i.prototype.updateShow=function(){this.isDelayUpdateShow=!1,i.updateShow(this)},i.prototype.addShowEvents=function(){if(this.showMessage)for(var e=0,i=this.showMessage;e<i.length;e++){var n=i[e];t.MessageCenter.addListener(n,this.delayUpdateShow,this)}},i.prototype.addRedEvents=function(){if(this.updateMessage)for(var e=0,i=this.updateMessage;e<i.length;e++){var n=i[e];t.MessageCenter.addListener(n,this.delayUpdate,this)}},i.prototype.addCountEvents=function(){if(this.countMessage)for(var e=0,i=this.countMessage;e<i.length;e++){var n=i[e];t.MessageCenter.addListener(n,this.delayUpdateCount,this)}},i.prototype.removeRedEvents=function(){if(this.updateMessage)for(var e=0,i=this.updateMessage;e<i.length;e++){var n=i[e];t.MessageCenter.ins().removeListener(n.funcallname,this.delayUpdate,this)}},i.prototype.removeCountEvents=function(){if(this.countMessage)for(var e=0,i=this.countMessage;e<i.length;e++){var n=i[e];t.MessageCenter.ins().removeListener(n.funcallname,this.delayUpdateCount,this)}},i.prototype.removeEvents=function(){t.MessageCenter.ins().removeAll(this)},i.prototype.removeAll=function(){t.MessageCenter.ins().removeAll(this),t.EventManager.ins().removeAllEvents(),this.removeEventListeners(),t.DisplayUtils.removeFromParent(this.tar),egret.Tween.removeTweens(this)},i}(egret.HashObject);t.RuleIconBase=e,__reflect(e.prototype,"app.RuleIconBase")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.checkboxAry=[],t.basicsLab=[],t.labAry={},t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initUI()},i.prototype.initUI=function(){this.dsph=new how.DSpriteSheet;for(var t=0;t<this.checkboxAry.length;t++)this.addQuickLabel2(this.checkboxAry[t]);for(var t=0;t<this.basicsLab.length;t++)this.addQuickLabel(this.basicsLab[t]);this.dsph.render()},i.prototype.addQuickLabel2=function(t){var e=this.labAry[t.name];if(e){var i=how.getQuickLabel(this.dsph);i.touchEnabled=!1,i.x=t.x+40,i.y=t.y+7,i.size=24,i.textStroke=2,i.textStrokeColor=0,i.textWidth=600,i.textHeight=30,i.textVerticalAlign="middle",i.textColor=14471870;for(var n in e)i[n]=e[n],"nX"==n&&(i.x=t.x+e[n]);t.parent.addChild(i)}},i.prototype.addQuickLabel=function(t){var e=how.getQuickLabel(this.dsph);e.touchEnabled=!1,e.size=24,e.textStroke=2,e.textStrokeColor=0,e.textWidth=600,e.textHeight=30,e.textVerticalAlign="middle",e.textColor=13744500;for(var i in t)e[i]=t[i];t.group?t.group.addChild(e):this.addChild(e)},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dsph.dispose(),this.removeChildren(),t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.SetUpBaseView=e,__reflect(e.prototype,"app.SetUpBaseView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.xy=null,t.touchChildren=!1,t.touchEnabled=!1,t}return __extends(i,e),i.prototype.inItFunction=function(){},i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.addEventListener(egret.Event.RESIZE,this.onResize,this)},i.prototype.onResize=function(){this.xy&&this.onResizeUI(null,this.xy)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.xy=null,this.removeEventListener(egret.Event.RESIZE,this.onResize,this)},i.prototype.onResizeUI=function(e,i){this.xy={x:i.x,y:i.y},this.x=i.x,this.y=i.y;var n=t.StageUtils.ins().getWidth(),s=t.StageUtils.ins().getHeight();this.x+this.width>n&&(this.x=n-this.width),this.y+this.height>s&&(this.y=s-this.height)},i.prototype.remInitFnction=function(){},i.prototype.close=function(){},i}(eui.Component);t.TipsBase=e,__reflect(e.prototype,"app.TipsBase")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.registerView={},this.dragRect={}}return e.prototype.register=function(t,e){void 0===e&&(e=null),this.registerView[t.name]!=t&&(this.registerView[t.name]=t,this.addEventListener(t))},e.prototype.setRect=function(t){this.dragRect[t.name]=t},e.prototype.addEventListener=function(t){t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startMove,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this)},e.prototype.removeEventListener=function(){for(var t in this.registerView){var e=this.registerView[t];e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startMove,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this)}},e.prototype.getAllView=function(){return this.registerView},e.prototype.setChildPos=function(t){for(var e in this.dragRect){var i=this.dragRect[e];if(i.name==t.name)for(var n in this.registerView){var s=this.registerView[n];if(s==t&&t.parent){var a=t.parent;a.setChildIndex(t,a.numChildren-1);break}}}},e.prototype.startMove=function(i){e.isMoving=!0;var n=i.currentTarget;for(var s in this.dragRect){var a=this.dragRect[s];if(a.name==n.name){var r=a.localToGlobal(a.x,a.y);if(!(r.x<i.stageX&&i.stageX<r.x+a.width&&r.y<i.stageY&&i.stageY<r.y+a.height))return;this._currentTarget=n;for(var o in this.registerView){var l=this.registerView[o];if(l==n&&n.parent){var h=n.parent;h.setChildIndex(n,h.numChildren-1);break}}this._offsetX=i.stageX-n.x,this._offsetY=i.stageY-n.y,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this)}}},e.prototype.stopMove=function(i){t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),e.isMoving=!1},e.prototype.onMove=function(t){this._currentTarget.visible=!0;for(var e in this.registerView){var i=this.registerView[e];if(i.name==this._currentTarget.name){this._currentTarget.x=t.stageX-this._offsetX,this._currentTarget.y=t.stageY-this._offsetY;break}}},e.prototype.closeView=function(t){var e=this.registerView[t];e&&e.parent&&(e.parent.removeChild(e),e.closeView&&e.closeView()),this.removeEventListener()},e.prototype.closeAll=function(){for(var t in this.registerView)this.closeView(t)},e.prototype.removeDic=function(t){var e=this.registerView[t];null!=e&&(e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startMove,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.registerView[t]=null,delete this.registerView[t]);var i=this.dragRect[t];null!=i&&(this.dragRect[t]=null,delete this.dragRect[t])},e.prototype.destroy=function(t){this.removeDic(t)},e.isMoving=!1,e}();t.DragDropUtils=e,__reflect(e.prototype,"app.DragDropUtils")}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===s&&(s=!1);var a=t.call(this,e,n,s)||this;return a.data=i,a}return __extends(e,t),e.SHOW_GUILD_UI="SHOW_GUILD_UI",e}(egret.Event);t.GuildEvent=e,__reflect(e.prototype,"app.GuildEvent")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._actID=0,i.skinName="ActivityMaterialSkin",i.name="ActivityMaterial",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setCurrentState("default13"),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System68),this.itemArrayCollection=new eui.ArrayCollection,this.list.itemRenderer=t.ActivityMaterialItemView,this.list.dataProvider=this.itemArrayCollection,this.scroller.verticalScrollBar.autoVisibility=!1,this.scroller.verticalScrollBar.visible=!1,this.observe(t.ActvityMgr.ins().post_25_3,this.refreshData)},i.prototype.refreshData=function(t){t&&this.itemArrayCollection.replaceAll(this.dataAry)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this._actID=e[0]),t.MouseScroller.bind(this.scroller),this.dataAry=[],this.setData()},i.prototype.setData=function(){var e=t.GlobalConfig.Activity12Config,i=[];for(var n in e){var s=e[n];0!=s.Id&&i.push(s)}var a=i.length;if(5>a)for(var r=0;5-a>r;r++)i.push(t.GlobalConfig.Activity12Config[0]);this.creatItem(i)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this.itemArrayCollection.replaceAll(this.dataAry)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.scroller),this.dragDropUI.destroy(),this.dragDropUI=null,this.scroller=null,this.list=null,this.dataAry.length=0,this.dataAry=null,this.itemArrayCollection.removeAll(),this.itemArrayCollection=null},i}(t.BaseEuiView);t.ActivityMaterialView=e,__reflect(e.prototype,"app.ActivityMaterialView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.actId=0,t.cdTime=0,t.skinName="ActivityAdvertViewSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e[0]&&(this.actId=e[0]),this.curValue.text="",0!=this.actId){var n=t.ActvityMgr.ins().getActivitConf(this.actId);n&&(this.observe(t.ActvityMgr.ins().post_25_3,this.updateInfo),this.observe(t.ActvityMgr.ins().post_25_4,this.updateInfo),this.updateView(this.actId))}},i.prototype.updateInfo=function(){0!=this.actId&&this.updateView(this.actId)},i.prototype.updateView=function(e){var i=t.ActvityMgr.ins().getActivitConf(e),n=t.GlobalConfig.Activity10018Config[e];i.description&&(this.actDesc.textFlow=t.TextFlowMaker.generateTextFlow(i.description)),i.bg?this.bgImg.source=i.bg+"":this.bgImg.source="festival_tqxunli_png",n.bgpicture&&(this.advertImg.source=n.bgpicture+"_png");var s=t.ActvityMgr.ins().getActivityInfo(e);s&&(s.endTime-1262275200==0?(this.actTime.visible=!1,this.timeLab.visible=!1,this.descLab.y=18,this.actDesc.y=18):(this.actTime.visible=!0,this.timeLab.visible=!0,this.descLab.y=48,this.actDesc.y=48,this.cdTime=s.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.cdTime&&(this.cdTime+=Math.floor(egret.getTimer()/1e3),this.updateCDTime(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this))))},i.prototype.updateCDTime=function(){var e=this.cdTime-Math.floor(egret.getTimer()/1e3);this.actTime.text=t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.actTime.text="")},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.TimerManager.ins().remove(this.updateCDTime,this)},i}(t.BaseEuiView);t.ActivityAdvertView=e,__reflect(e.prototype,"app.ActivityAdvertView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.exchangeBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.exchangeBtn,this.onTouch)},i.prototype.onTouch=function(e){this.data&&(t.ViewManager.ins().isCheckOpen(this.data.mergelimit)?t.ActvityMgr.ins().send_25_1(this.data.id,t.Operate.cExchange,[this.data.subid]):t.UserTips.ins().showUITips(this.data.limitTips))},i.prototype.dataChanged=function(){if(this.redPoint.visible=!1,this.countLab.text="",this.exchangeBtn.y=35,this.data){this.data.table&&this.data.table[0]&&(this.itemData0.data=this.data.table[0],this.itemLab0.text=t.CurrencyUtils.getCurrencyNameIcon(this.data.table[0].type,this.data.table[0].id)[0]),this.data.compose&&this.data.compose[0]&&(this.targetItem.data=this.data.compose[0],this.targetLab.text=t.CurrencyUtils.getCurrencyNameIcon(this.data.compose[0].type,this.data.compose[0].id)[0]);var e=t.ActvityMgr.ins().getActivityInfo(this.data.id);e&&e.info&&e.info[this.data.subid]&&e.info[this.data.subid].limitCount>=0&&(this.countLab.text="剩余次数："+e.info[this.data.subid].limitCount,this.exchangeBtn.y=22),this.data.limitTips&&(this.descLab.textFlow=t.TextFlowMaker.generateTextFlow(this.data.limitTips)),t.ViewManager.ins().isCheckOpen(this.data.mergelimit)?(this.exchangeBtn.enabled=!0,this.descLab.visible=!1,this.data.redpoint&&e&&e.info&&e.info[this.data.subid]&&e.info[this.data.subid].limitCount>0&&(this.redPoint.visible=t.CurrencyUtils.isRedDot(this.data.table)?!0:!1,this.redPoint.setRedImg(this.data.redpoint))):(this.exchangeBtn.enabled=!1,this.descLab.visible=!0)}},i}(t.BaseItemRender);t.ActivityExchangeItemView=e,__reflect(e.prototype,"app.ActivityExchangeItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.actId=0,t.cdTime=0,t.skinName="ActivityExchangeViewSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e[0]&&(this.actId=e[0]),this.curValue.text="",t.MouseScroller.bind(this.sportsScroller),this.sportsArr=new eui.ArrayCollection,this.sportsList.itemRenderer=t.ActivityExchangeItemView,this.sportsList.dataProvider=this.sportsArr,this.sportsScroller.viewport.scrollV=0,0!=this.actId){var n=t.ActvityMgr.ins().getActivitConf(this.actId);n&&(this.observe(t.ActvityMgr.ins().post_25_3,this.updateInfo),this.observe(t.ActvityMgr.ins().post_25_4,this.updateInfo),this.updateView(this.actId))}},i.prototype.updateInfo=function(){0!=this.actId&&this.updateView(this.actId)},i.prototype.updateViewInfo=function(t){this.sportsScroller.viewport.scrollV=0,this.updateView(t)},i.prototype.updateView=function(e){var i=t.ActvityMgr.ins().getActivitConf(e);i.description&&(this.actDesc.textFlow=t.TextFlowMaker.generateTextFlow(i.description)),i.bg?this.bgImg.source=i.bg+"_png":this.bgImg.source="festival_tqxunli_png";var n=t.ActvityMgr.ins().getActivityInfo(e);if(n&&n.info){n.endTime-1262275200==0?(this.actTime.visible=!1,this.timeLab.visible=!1,this.descLab.y=18,this.actDesc.y=18):(this.actTime.visible=!0,this.timeLab.visible=!0,this.descLab.y=48,this.actDesc.y=48,this.cdTime=n.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.cdTime&&(this.cdTime+=Math.floor(egret.getTimer()/1e3),this.updateCDTime(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this)));var s=[],a=t.ActvityMgr.ins().getActivityConfigById(e);if(a)for(var r in a)t.ViewManager.ins().isCheckOpen(a[r].displaylimit)&&s.push(a[r]);this.sportsArr.replaceAll(s)}},i.prototype.updateCDTime=function(){var e=this.cdTime-Math.floor(egret.getTimer()/1e3);this.actTime.text=t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.actTime.text="")},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.sportsScroller),t.TimerManager.ins().remove(this.updateCDTime,this)},i}(t.BaseEuiView);t.ActivityExchangeView=e,__reflect(e.prototype,"app.ActivityExchangeView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.labelDisplay.text=this.data.name+"",this.redDot.visible=!1,1==t.ActivityPayRuleIcon.disposableredpointObj[this.data.actId]&&(this.redDot.visible=!0,this.redDot.setRedImg(1));var e=t.ActvityMgr.ins().getActivityInfo(this.data.actId);e&&e.info&&(e&&0!=e.redDot&&(this.redDot.visible=!0,this.redDot.setRedImg(1)),this.data.redpoint&&(this.redDot.visible=!0,this.redDot.setRedImg(this.data.redpoint)))},i}(eui.ItemRenderer);t.ActivityPayTabItemView=e,__reflect(e.prototype,"app.ActivityPayTabItemView")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.MiniDateTimeBase=12622752e5,t}();
t.GameConst=e,__reflect(e.prototype,"app.GameConst")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.ActivityPayView);t.ActivityPayView1=e,__reflect(e.prototype,"app.ActivityPayView1"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.ActivityPayView);t.ActivityPayView2=e,__reflect(e.prototype,"app.ActivityPayView2"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.ActivityPayView);t.ActivityPayView3=e,__reflect(e.prototype,"app.ActivityPayView3"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.ActivityPayView);t.ActivityPayView4=e,__reflect(e.prototype,"app.ActivityPayView4"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.actId=0,t.cdTime=0,t.skinName="ActivityPreferentialSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e[0]&&(this.actId=e[0]),t.MouseScroller.bind(this.itemScroller),this.list.itemRenderer=t.ActpItemRender,this.arrayCollection=new eui.ArrayCollection,this.list.dataProvider=this.arrayCollection,0!=this.actId){var n=t.ActvityMgr.ins().getActivitConf(this.actId);n&&(this.observe(t.DefaultMgr.ins().postMoneyChange,this.updateInfo),this.observe(t.ActvityMgr.ins().post_25_3,this.updateInfo),this.observe(t.ActvityMgr.ins().post_25_4,this.updateInfo),n.bg?this.bgImg.source=n.bg+"_png":this.bgImg.source="festival_tqxunli_png",n.description&&(this.descLabel.textFlow=t.TextFlowMaker.generateTextFlow(n.description)),this.updateView(this.actId))}},i.prototype.updateInfo=function(){0!=this.actId&&this.updateView(this.actId)},i.prototype.updateView=function(e){var i=t.ActvityMgr.ins().getActivityInfo(e);if(i&&i.info){this.cdTime=i.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.cdTime&&(this.cdTime+=Math.floor(egret.getTimer()/1e3),this.updateCDTime(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this));var n=[];for(var s in i.info)n.push({activityID:e,num:i.info[s].times,giftId:i.info[s].id});n.sort(this.sortFun),this.arrayCollection.replaceAll(n)}},i.prototype.sortFun=function(t,e){return t.giftId<e.giftId?-1:t.giftId>e.giftId?1:0},i.prototype.updateCDTime=function(){var e=this.cdTime-Math.floor(egret.getTimer()/1e3);this.timeLabel.text=t.LanguageUtils.language_Pay_Text7+t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.timeLabel.text="")},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.itemScroller)},i}(t.BaseEuiView);t.ActivityPreferentialView=e,__reflect(e.prototype,"app.ActivityPreferentialView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.$onRemoveFromStage=function(){this.dataProvider=null,this.removeTouchEvent(this.buyButton,this.onClickFunction),e.prototype.$onRemoveFromStage.call(this)},i.prototype.$onAddToStage=function(i,n){e.prototype.$onAddToStage.call(this,i,n),this.list.itemRenderer=t.ItemBase,this.addTouchEvent(this.buyButton,this.onClickFunction)},i.prototype.onClickFunction=function(){this.data&&t.ActvityMgr.ins().send_25_1(this.data.activityID,t.Operate.cBuy,[this.data.giftId])},i.prototype.dataChanged=function(){if(this.info10001.visible=!1,this.info10002.visible=!0,this.discountGroup.visible=!1,this.redImage.visible=!1,this.endImage.visible=!1,this.buyButton.visible=!1,this.buyButton.labelDisplay.textColor=15779990,this.buyButton.label=t.LanguageUtils.language_Pay_Text5,this.data){var e=t.ActvityMgr.ins().getActivityConfigById(this.data.activityID);if(e&&e[this.data.giftId]){var i=e[this.data.giftId];this.list.dataProvider=new eui.ArrayCollection(i.award);this.data.num>0||-1==i.BuyLimit?"0xF6883A":"0xe50000";this.desLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_156,i.name)),this.limitLab.text=i.BuyLimit?"限购："+this.data.num+"/"+i.BuyLimit:i.Dailylimit?"限购："+this.data.num+"/"+i.Dailylimit:"",this.moneyLabel.text=""+i.price[0].count;var n=t.CurrencyUtils.getCurrency(i.price[0].type);n<i.price[0].count?this.moneyLabel.textColor=15007744:this.moneyLabel.textColor=15779990;var s=t.CurrencyUtils.getMoneyIcon(i.price[0].type);this.moneyImage.source=s;var a=i.BuyLimit?i.BuyLimit:i.Dailylimit?i.Dailylimit:-1;i.redpoint?-1==a||this.data.num>=a?(this.redImage.visible=!0,this.redImage.setRedImg(i.redpoint)):this.redImage.visible=!1:i.redType&&(-1==a||this.data.num>=a)&&(this.redImage.visible=t.CurrencyUtils.isRedDot(i.price)?!0:!1),i.discount&&(this.discountGroup.visible=!0,this.discountImage.source=i.discount),this.data.num>0||-1==a?(this.buyButton.visible=!0,-1==a&&(this.limitLab.text=t.LanguageUtils.language_Pay_Text6)):(this.endImage.source="apay_yishouwan",this.endImage.visible=!0,this.info10002.visible=!1)}}},i}(t.BaseItemRender);t.ActpItemRender=e,__reflect(e.prototype,"app.ActpItemRender")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay.text=this.data.name+"",this.redDot.updateShowFunctions="ActvityMgr.getActivityPayRedById",this.redDot.param=this.data.actId},e}(eui.ItemRenderer);t.PayTabBarItemRenderer=e,__reflect(e.prototype,"app.PayTabBarItemRenderer")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.effArr=[],i.curDay=1,i.secondChargeId=10274,i.skinName="ActivitySecondChargeViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.awardArr=new eui.ArrayCollection,this.itemList.itemRenderer=t.ItemBase,this.itemList.dataProvider=this.awardArr},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.label.text=t.LanguageUtils.language_Common_262;var n=t.GlobalConfig.Activity10021Config[this.secondChargeId][1][1];n&&n.Description&&(this.imgDesc.source=n.Description),this.mouseMc||(this.mouseMc=t.ObjectPool.pop("app.MovieClip"),this.mouseMc.scaleX=this.mouseMc.scaleY=1,this.mouseMc.touchEnabled=!1,this.effGrp.addChild(this.mouseMc)),this.effArr=[];for(var s,a=0;2>a;a++)s=t.ObjectPool.pop("app.MovieClip"),s.scaleX=s.scaleY=1,s.x=66*a,s.y=0,s.touchEnabled=!1,s.blendMode=egret.BlendMode.ADD,s.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zbk",-1),this.effArr.push(s),this.itemEffGrp.addChild(s);this.addTouchEvent(this.btnCharge,this.onClick),this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.btnGetGfit,this.onClick),this.observe(t.ActvityMgr.ins().post_25_3,this.updateInfo),this.showCurData(this.curDay)},i.prototype.showCurData=function(e){this.receiveGroup.visible=!1,this.label.visible=!1;var i=t.EntityMgr.ins().getPayer,n=i.propSet.getAP_JOB(),s=t.GlobalConfig.Activity10021Config[this.secondChargeId][n];s=s[e];var a=[],r=s&&s.GiftTable;for(var o in r)a.push(r[o]);this.awardArr.replaceAll(a),s&&s.weaponeff?(this.mouseMc.playFileEff(ResDirEnum.RES_DIR_EFF+s.weaponeff,-1),this.effGrp.visible=!0):(this.mouseMc.stop(),this.effGrp.visible=!1);var l=t.ActvityMgr.ins().getActivityInfo(this.secondChargeId);l&&(l.info.sum>=2?(this.label.visible=!0,this.receiveGroup.visible=t.MathUtils.getValueAtBit(l.info.state,e)>0,this.receiveGroup.visible?(this.btnGetGfit.visible=!1,this.btnCharge.visible=!1):(this.btnGetGfit.visible=!0,this.btnCharge.visible=!1)):(this.btnGetGfit.visible=!1,this.btnCharge.visible=!0))},i.prototype.updateInfo=function(){this.showCurData(this.curDay)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnCharge:t.RechargeMgr.ins().onPay("");break;case this.btnGetGfit:t.ActvityMgr.ins().send_25_1(this.secondChargeId,t.Operate.cBuy,[this.curDay]);break;case this.btnClose:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.btnCharge,this.onClick),this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.btnGetGfit,this.onClick),this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null);for(var i=0;i<this.effArr.length;i++){var n=this.effArr[i];n.destroy()}this.effArr=null,this.itemEffGrp.removeChildren()},i}(t.BaseEuiView);t.ActvitySecondChargeView=e,__reflect(e.prototype,"app.ActvitySecondChargeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.ins=function(){return e.ins.call(this)},n.prototype.getConfigList=function(){this.configList=[];var e=t.ActvityMgr.ins().warActId,i=t.ActvityMgr.ins().getActivityInfo(e),s=i&&i.info&&i.info.warNum,a=t.GlobalConfig.Activity14Config[e][s];for(var r in a){var o=a[Number(r)];if(o){var l=o,h=new n;h.data=l,h.state=this.findWarActInfo(l.Id,l.tokenlevel).state,h.state1=this.findWarActInfo(l.Id,l.tokenlevel).state1,h.goldState=i.info.goldState,this.configList.push(h)}}},n.prototype.removeConfig=function(){this.configList=[]},n.prototype.getFindlvItem=function(t){for(var e=this.configList,i=0;i<e.length;i++){var n=e[i];if(n.data.tokenlevel==t)return n}return null},n.prototype.getWarMaxLv=function(){var t=this.configList.length;0==t&&(this.getConfigList(),t=this.configList.length);var e=this.configList[t-1].data.tokenlevel;return e},n.prototype.getLvAward=function(e,i){var n=this.configList;0==n.length&&(this.getConfigList(),n=this.configList);for(var s=[],a=(t.GlobalConfig.Activity14Config,t.ActvityMgr.ins().warActId),r=t.ActvityMgr.ins().getActivityInfo(a),o=r&&r.info&&r.info.goldState,l=0;l<n.length;l++){var h=n[l];h.data.tokenlevel>e&&h.data.tokenlevel<=i&&(h.data.rewardA&&s.push(h.data.rewardA[0]),h.data.rewardB&&o&&s.push(h.data.rewardB[0]))}return s},n.prototype.getLvMoney=function(e,i){var s=n.ins().getFindlvItem(i),a=t.ActvityMgr.ins().warActId,r=t.ActvityMgr.ins().getActivityInfo(a),o=r&&r.info&&r.info.warNum,l=t.GlobalConfig.ActivitysetConfig[a][o],h=l&&l.proportion,p=s.data.accumulate-r.info.score;return Math.ceil(p/h)},n.prototype.getSetConfig=function(){var e=t.ActvityMgr.ins().warActId,i=t.ActvityMgr.ins().getActivityInfo(e),n=t.GlobalConfig.ActivitysetConfig[e][i.info.warNum];return n},n.prototype.getTaskCnfList=function(e){var n=[],s=t.ActvityMgr.ins().getActivityInfo(e);if(!s||!s.info)return n;var a=t.GlobalConfig.Activity15Config[e][s.info.warNum];for(var r in a){var o=a[r];if(o){var l=new i;l.data=o,l.rate=this.findActInfo(e,l.data.taskID).rate,l.state=this.findActInfo(e,l.data.taskID).state,n.push(l)}}return n},n.prototype.findActRedState=function(e){if(e instanceof Array)for(var i=0,n=e;i<n.length;i++){var s=n[i],a=t.ActvityMgr.ins().getActivityInfo(s);if(a&&a.redDot)return 1}else{var a=t.ActvityMgr.ins().getActivityInfo(Number(e));if(a&&a.redDot)return 1}return 0},n.prototype.getTaskDayScore=function(t){for(var e=this.getTaskCnfList(t),i=0,n=0,s=e;n<s.length;n++){var a=s[n];2==a.state&&(i+=a.data.GiftTable[0].count)}return i},n.prototype.findWarActInfo=function(e,i){var n=t.ActvityMgr.ins().getActivityInfo(e);if(n&&n.info&&n.info.warArr)for(var s in n.info.warArr)if(n.info.warArr[Number(s)].lv==i)return n.info.warArr[s];return null},n.prototype.findActInfo=function(e,i){var n=t.ActvityMgr.ins().getActivityInfo(e);if(n&&n.info&&n.info.taskArr)for(var s in n.info.taskArr)if(n.info.taskArr[Number(s)].index==i)return n.info.taskArr[s];return null},n}(t.BaseSystem);t.ActivityWarData=e,__reflect(e.prototype,"app.ActivityWarData");var i=function(){function t(){}return t}();t.ActivityTaskData=i,__reflect(i.prototype,"app.ActivityTaskData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="ActivityWarGiftAdvGoodsViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setCurrentState("default12"),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_War_Text15),this.itemArr=new eui.ArrayCollection,this.list.itemRenderer=t.ItemBase,this.list.dataProvider=this.itemArr,this.observe(t.ActvityMgr.ins().post_25_2,this.initData),this.observe(t.ActvityMgr.ins().post_25_4,this.initData)},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.btnAdd,this.onClick),this.addTouchEvent(this.btnBuy,this.onClick),this.addTouchEvent(this.btnCannel,this.onClick),this.addTouchEvent(this.btnSub,this.onClick)},i.prototype.initData=function(){if(this.actId=t.ActvityMgr.ins().warActId,this.actInfo=t.ActvityMgr.ins().getActivityInfo(this.actId),this.actInfo&&this.actInfo.info){if(this.currentLv=this.actInfo.info.tokenLv,this.lbCount.text="1",this.currentLv>=t.ActivityWarData.ins().getWarMaxLv())return void t.ViewManager.ins().close(this);this.showDesc()}},i.prototype.addLv=function(){var e=Number(this.lbCount.text),i=e+this.currentLv;if(this.actInfo&&this.actInfo.info){var n=(this.actInfo.info.warNum,t.ActivityWarData.ins().getWarMaxLv());if(i>=n)return;e++,this.lbCount.text=e+"",this.showDesc()}},i.prototype.subLv=function(){var t=Number(this.lbCount.text);1>=t||(t--,this.lbCount.text=t+"",this.showDesc())},i.prototype.showDesc=function(){var e=Number(this.lbCount.text),i=e+this.currentLv,n=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_War_Text3,e));this.lbTitle.textFlow=n;var s=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_War_Text4,e,i));this.lbBuyDesc.textFlow=s;var a=(this.actInfo&&this.actInfo.info&&this.actInfo.info.warNum,t.ActivityWarData.ins().getLvMoney(this.currentLv,i));this.lbCost.text=""+a+t.LanguageUtils.language_CURRENCY_NAME_2;var r=t.ActivityWarData.ins().getLvAward(this.currentLv,i);this.itemArr.replaceAll(r)},i.prototype.onClick=function(e){var i=this;switch(e.currentTarget){case this.btnCannel:t.ViewManager.ins().close(this);break;case this.btnAdd:this.addLv();break;case this.btnSub:this.subLv();break;case this.btnBuy:var n="|C:0xFFFFFF&T:"+t.LanguageUtils.language_Shop_Buy_Item_txt+"|C:0xDBC789&T:"+this.lbCost.text+"|C:0xFFFFFF&T:"+t.LanguageUtils.language_System45+"|C:0xDBC789&T:"+this.lbCount.text+t.LanguageUtils.language_Common_1+t.LanguageUtils.language_War_Text17,s=t.TextFlowMaker.generateTextFlow(n);t.CautionView.show(s,function(){var e=Number(i.lbCount.text);t.ActvityMgr.ins().send_25_1(i.actId,t.Operate.cWarBuyLv,[e])},this)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];this.removeTouchEvent(this.btnAdd,this.onClick),this.removeTouchEvent(this.btnBuy,this.onClick),this.removeTouchEvent(this.btnCannel,this.onClick),this.removeTouchEvent(this.btnSub,this.onClick),e.prototype.close.call(this,i),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.itemArr.removeAll(),this.itemArr=null,t.ViewManager.ins().isShow(t.ActivityWarView)||t.ActivityWarData.ins().removeConfig()},i}(t.BaseEuiView);t.ActivityWarGiftAdvGoodsView=e,__reflect(e.prototype,"app.ActivityWarGiftAdvGoodsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="ActivityWarGiftAdvViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.observe(t.ActvityMgr.ins().post_25_2,this.initData),this.observe(t.ActvityMgr.ins().post_25_4,this.initData)},i.prototype.initData=function(){var e=t.ActvityMgr.ins().warActId,i=t.ActvityMgr.ins().getActivityInfo(e);if(i&&i.info){var n=i.info.warNum,s=i.info.goldState;i.info.extrState;this.btnBuy1.enabled=!s,this.btnBuy1.label=s?t.LanguageUtils.language_Wlelfare_Text6:t.LanguageUtils.language_System45;var a=t.GlobalConfig.ActivitysetConfig[e][n];this.setConf=a,this.lbGoldDesc.textFlow=t.TextFlowMaker.generateTextFlow(a.rewardBdescribe);var r=a.rewardBPrice.count,o=(s?a.rewardCPrice.count:a.rewardCPrice.count+r,t.ShopConfData.convertItemIcon(a.rewardBPrice));t.ShopConfData.convertItemIcon(a.rewardCPrice);this.lbGoldCost.text=""+r+o.name}},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.btnBuy1,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick)},i.prototype.onClick=function(e){var i=this;if(e.currentTarget==this.btnBuy1){var n="|C:0xFFFFFF&T:"+t.LanguageUtils.language_Shop_Buy_Item_txt+"|C:0xDBC789&T:"+this.lbGoldCost.text+"|C:0xFFFFFF&T:"+t.LanguageUtils.language_System45+"|C:0xDBC789&T:"+t.LanguageUtils.language_War_Text14,s=t.TextFlowMaker.generateTextFlow(n);t.CautionView.show(s,function(){t.ActvityMgr.ins().send_25_1(i.setConf.ID,t.Operate.cWarBuy,[2])},this)}else t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.removeTouchEvent(this.btnBuy1,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),e.prototype.close.call(this,t),this.$onClose()},i}(t.BaseEuiView);t.ActivityWarGiftAdvView=e,__reflect(e.prototype,"app.ActivityWarGiftAdvView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="ActivityWarGiftGoodsViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setCurrentState("default12"),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_War_Text10),this.list.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.btnCannel,this.onClick),this.addTouchEvent(this.btnBuy,this.onClick)},i.prototype.initData=function(){var e=t.ActivityWarData.ins().configList,i=e[0],n=new eui.ArrayCollection(i.data.rewardC);this.list.dataProvider=n},i.prototype.onClick=function(e){var i=this;if(e.currentTarget==this.btnCannel)t.ViewManager.ins().close(this);else{var n=t.ActivityWarData.ins().getSetConfig(),s=t.GlobalConfig.BagRemainConfig[n.VIPbagremain];if(s){var a=t.BagMgr.ins().getBagCapacity(s.bagremain);if(a){var r=n.rewardBPrice.count,o=t.ShopConfData.convertItemIcon(n.rewardCPrice),l="|C:0xFFFFFF&T:"+t.LanguageUtils.language_Shop_Buy_Item_txt+"|C:0xDBC789&T:"+r+o.name+"|C:0xFFFFFF&T:"+t.LanguageUtils.language_System45+"|C:0xDBC789&T:"+t.LanguageUtils.language_War_Text10,h=t.TextFlowMaker.generateTextFlow(l);t.CautionView.show(h,function(){t.ActvityMgr.ins().send_25_1(i.actId,t.Operate.cWarBuy,[3])},this)}else t.UserTips.ins().showUITips(s.bagtips)}}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.removeTouchEvent(this.btnCannel,this.onClick),this.removeTouchEvent(this.btnBuy,this.onClick),e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null},i}(t.BaseEuiView);t.ActivityWarGiftGoodsView=e,__reflect(e.prototype,"app.ActivityWarGiftGoodsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.goodsGoldMc=t.ObjectPool.pop("app.MovieClip"),this.goodsGoldMc.touchEnabled=!1,this.goodsGoldMc.blendMode=egret.BlendMode.ADD,this.goodsGoldMc.x=this.goodsGoldMc.y,this.groupGold.addChild(this.goodsGoldMc),this.goodsCommondMc=t.ObjectPool.pop("app.MovieClip"),this.goodsCommondMc.touchEnabled=!1,this.goodsCommondMc.blendMode=egret.BlendMode.ADD,this.goodsCommondMc.x=this.goodsCommondMc.y,this.groupCommon.addChild(this.goodsCommondMc),this.addTouchEvent(this.itemCommon,this.onClick),this.addTouchEvent(this.itemGold,this.onClick),this.iconCommonLock.visible=!1,this.iconGoldLock.visible=!1},i.prototype.onClick=function(e){if(e.currentTarget==this.itemCommon){if(2!=this.itemData.state)return}else if(2!=this.itemData.state1)return;var i=t.ActivityWarData.ins().getSetConfig(),n=t.GlobalConfig.BagRemainConfig[i.bagremain];if(n){var s=t.BagMgr.ins().getBagCapacity(n.bagremain);s?e.currentTarget==this.itemCommon?t.ActvityMgr.ins().send_25_1(this.itemData.data.Id,t.Operate.cWarGetAward,[1,this.itemData.data.tokenlevel]):t.ActvityMgr.ins().send_25_1(this.itemData.data.Id,t.Operate.cWarGetAward,[2,this.itemData.data.tokenlevel]):t.UserTips.ins().showUITips(n.bagtips)}},i.prototype.setGlodEffPayer=function(t){t?(this.goodsGoldMc.visible=!0,this.goodsGoldMc.isPlaying||this.goodsGoldMc.playFileEff(ResDirEnum.RES_DIR_EFF+"zl",-1,null,!1)):(this.goodsGoldMc&&(this.goodsGoldMc.visible=!1),this.goodsGoldMc&&this.goodsGoldMc.stop())},i.prototype.setCommonEffPayer=function(t){t?(this.goodsCommondMc.visible=!0,this.goodsCommondMc.isPlaying||this.goodsCommondMc.playFileEff(ResDirEnum.RES_DIR_EFF+"zl",-1,null,!1)):(this.goodsCommondMc&&(this.goodsCommondMc.visible=!1),this.goodsCommondMc&&this.goodsCommondMc.stop())},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),t.DisplayUtils.removeFromParent(this.goodsGoldMc),t.DisplayUtils.removeFromParent(this.goodsCommondMc),this.goodsGoldMc&&(this.goodsGoldMc.destroy(),this.goodsGoldMc=null),this.goodsCommondMc&&(this.goodsCommondMc.destroy(),this.goodsCommondMc=null),this.removeTouchEvent(this.itemCommon,this.onClick),this.removeTouchEvent(this.itemGold,this.onClick),this.itemData=null},i.prototype.dataChanged=function(){this.itemData=this.data,this.lbTitle.text=this.itemData.data.tokenlevel+t.LanguageUtils.language_Common_1;var e=void 0==this.itemData.data.rewardA?null:this.itemData.data.rewardA[0],i=void 0==this.itemData.data.rewardB?null:this.itemData.data.rewardB[0];this.iconCommonLock.visible=null==e?!0:!1,this.iconGoldLock.visible=null==i?!0:!1,this.setItem(e,i),this.setGlodEffPayer(2==this.itemData.state1&&null!=i),this.setCommonEffPayer(2==this.itemData.state&&null!=e),this.imgCommon.visible=1==this.itemData.state,this.imgGold.visible=1==this.itemData.state1,this.itemGold.filters=this.itemData.goldState?null:t.FilterUtil.ARRAY_GRAY_FILTER},i.prototype.setItem=function(t,e){this.itemCommon.data=t,this.itemGold.data=e},i}(t.BaseItemRender);t.ActivityWarItemView=e,__reflect(e.prototype,"app.ActivityWarItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.goButton,this.onTouch)},i.prototype.dataChanged=function(){this.itemData=this.data;var e=this.itemData.data.value,i=this.itemData.rate,n=2682369;i>=e?(n=2682369,i=e):n=15007744,0==this.itemData.state?(this.goButton.label=t.LanguageUtils.language_War_Text18,this.goButton.enabled=!0,this.redDot.visible=!1):1==this.itemData.state?(this.goButton.label=t.LanguageUtils.language_Achievement_GetText,this.goButton.enabled=!0,this.redDot.visible=!0):(this.goButton.label=t.LanguageUtils.language_War_Text19,this.goButton.enabled=!1,this.redDot.visible=!1);t.GlobalConfig.NumericalIcon[this.itemData.data.GiftTable[0].type];this.lbScoreName.text=t.LanguageUtils.language_FuBen_Text8+"：",this.lbScore.text=this.itemData.data.GiftTable[0].count,this.lbDesc.text=this.itemData.data.describe,this.lbTitle.textFlow=t.TextFlowMaker.generateTextFlow(this.itemData.data.name+("：|C:"+n+"&T:"+i+"/"+e+"|"))},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.goButton,this.onTouch),this.itemData=null},i.prototype.onTouch=function(e){var i=this;if(0==this.itemData.state)if(this.itemData.data.buttonUI)t.GlobalData.sectionOpenDay<this.itemData.data.openday?t.ViewManager.ins().open(t.ActivityWarTipsView,this.itemData.data.openday):this.openView(this.itemData.data.buttonUI);else{var n=t.ShopConfData.convertItemIcon(this.itemData.data.data[0]),s=this.itemData.data.data[0].count,a=this.itemData.data.data[0].type,r="|C:0xFFFFFF&T:"+t.LanguageUtils.language_War_Text16+"|C:0xDBC789&T:"+n.name+"*"+t.CommonUtils.overLength(s)+"？",o=t.TextFlowMaker.generateTextFlow(r);if(this.itemData.data.PropValue){var l=t.EntityMgr.ins().getPayer.propSet,h=l.getPropValueObj()[this.itemData.data.PropValue];if(s>h){var p=t.StringUtils.replace(t.LanguageUtils.language_War_Text20,n.name);return void t.UserTips.ins().showUITips(p)}}else{var u=t.CurrencyUtils.getCurrency(a,this.itemData.data.data[0].id);if(s>u){var c=t.StringUtils.replace(t.LanguageUtils.language_War_Text20,n.name);return void t.UserTips.ins().showUITips(c)}}t.CautionView.show(o,function(){t.ActvityMgr.ins().send_25_1(i.itemData.data.ID,t.Operate.cWarTask,[i.itemData.data.taskID])},this)}else t.ActvityMgr.ins().send_25_1(this.itemData.data.ID,t.Operate.cWarGetTaskScore,[this.itemData.data.taskID])},i.prototype.openView=function(e){switch(e.type){case 1:e.param1&&t.ViewManager.ins().open(e.param1);break;case 2:e.param1&&t.ViewManager.ins().open(e.param1),e.param2&&t.ViewManager.ins().open(e.param2);break;case 3:e.param1&&e.param2&&t.ViewManager.ins().open(e.param1,e.param2);break;case 4:t.GuildMgr.ins().sendGuildInfo(!0)}},i}(t.BaseItemRender);t.ActivityWarTaskItemView=e,__reflect(e.prototype,"app.ActivityWarTaskItemView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.tabConf=this.data,this.labelDisplay.text=this.tabConf.tabname,this.setRedDot()},e.prototype.setRedDot=function(){var t="ActvityMgr.post_25_4",e="ActivityWarData.findActRedState";this.redDot.param=this.tabConf.ID,this.redDot.updateShowFunctions=e,this.redDot.showMessages=t},e}(t.BaseItemRender);t.ActivityWarTaskTabItemView=e,__reflect(e.prototype,"app.ActivityWarTaskTabItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="ActivityCommonViewSkin",i.name="ActivityWarTipsView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System61)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e[0]){var n=e[0],s=t.StringUtils.replace(t.LanguageUtils.language_War_Text21,n);this.strLab.textFlow=t.TextFlowMaker.generateTextFlow(s)}this.addTouchEvent(this.closeBtn,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.ActivityWarTipsView=e,__reflect(e.prototype,"app.ActivityWarTipsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.pageCount=7,i.pageNums=7,i.pageContentLen=60,i.crrentPage=0,i.warAwardPageDic={},i.lastIndex=0,i.selectIdx=0,i.skinName="ActivityWarViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.warAwardArr=new eui.ArrayCollection,this.warTaskArr=new eui.ArrayCollection,this.listWar.itemRenderer=t.ActivityWarItemView,this.listWar.dataProvider=this.warAwardArr,this.shopList=new eui.ArrayCollection,this.bindShopList(),t.ActivityWarData.ins().getConfigList()},i.prototype.bindTabBar=function(){var e=t.GlobalConfig.Activity15Config,i=Object.keys(e);this.addTouchEvent(this.rewardButton,this.onClickButton),this.addTouchEvent(this.taskButton,this.onClickButton),this.addTouchEvent(this.shopButton,this.onClickButton),this.rewardDot.param=this.actId,this.rewardDot.updateShowFunctions="ActivityWarData.findActRedState",this.rewardDot.showMessages="ActvityMgr.post_25_4",this.taskDot.param=i,this.taskDot.updateShowFunctions="ActivityWarData.findActRedState",this.taskDot.showMessages="ActvityMgr.post_25_4"},i.prototype.onClickButton=function(t){var e=t.currentTarget;switch(e){case this.rewardButton:this.selectIdx=0;break;case this.taskButton:this.selectIdx=1;break;case this.shopButton:this.selectIdx=2}this.updateView()},i.prototype.updateView=function(){0==this.selectIdx?(this.tabBarMenu.visible=!1,this.tabBarMenu.height=0,this.group_award.visible=!0,this.group_task.visible=!1,this.group_shop.visible=!1,t.ActvityMgr.ins().send_25_2(this.actId)):1==this.selectIdx?(this.tabBarMenu.visible=!0,this.tabBarMenu.height=40*this.tabBarMenu.dataProvider.length,this.group_award.visible=!1,this.group_task.visible=!0,this.group_shop.visible=!1,t.ViewManager.ins().close(t.ActivityWarGiftAdvView),t.ActvityMgr.ins().send_25_2(this.tabBarMenu.selectedItem.ID)):2==this.selectIdx&&(this.tabBarMenu.visible=!1,this.tabBarMenu.height=0,t.ShopMgr.ins().sendShopList(6,1),this.group_award.visible=!1,this.group_task.visible=!1,this.group_shop.visible=!0,t.ViewManager.ins().close(t.ActivityWarGiftAdvView)),this.rewardButton.currentState=0==this.selectIdx?"down":"up",this.taskButton.currentState=1==this.selectIdx?"down":"up",this.shopButton.currentState=2==this.selectIdx?"down":"up"},i.prototype.updateShopList=function(){6==t.ShopMgr.ins().shopType&&this.shopList.replaceAll(t.ShopMgr.ins().getShopList())},i.prototype.changeMoney=function(){var e=t.EntityMgr.ins().getPlayerPropertySet();if(e&&e.propSet){var i=e.propSet,n=t.CurrencyUtils.getCurrencyNameIcon(QatEnum.warNumber);this.warNum.text=n[0]+":"+t.CommonUtils.zhuanhuan(i.getWarCurrency())}else this.warNum.text="0"},i.prototype.updateBuyGoods=function(e){var i=e[0],n=e[1],s=e[2],a=e[3];if(n&&s>0){for(var r in this.shopList.source)if(this.shopList.source[r].shopId==i){this.shopList.source[r].buyCountNum=a,this.shopList.source[r].buyLimitNum=s,this.shopList.replaceAll(this.shopList.source);break}}i>0&&t.ViewManager.ins().isShow(t.ShopBatchBuyView)&&t.ViewManager.ins().close(t.ShopBatchBuyView)},i.prototype.bindOptTabBar=function(){var e=this.getTabList();this.tabBarMenu.itemRenderer=t.ActivityWarTaskTabItemView;var i=new eui.ArrayCollection(e);this.tabBarMenu.dataProvider=i},i.prototype.bindTaskView=function(){this.list_task.itemRenderer=t.ActivityWarTaskItemView,this.list_task.dataProvider=this.warTaskArr},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.group_task.visible=!1,t.MouseScroller.bind(this.scroller),t.MouseScroller.bind(this.scrollerShop);t.GlobalConfig.Activity14Config;this.actId=t.ActvityMgr.ins().warActId,this.bindTaskView(),this.changeMoney(),this.bindTabBar(),this.bindOptTabBar(),e&&e[0]>=0?this.selectIdx=e[0]:this.selectIdx=0,this.lastIndex=this.tabBarMenu.selectedIndex=0,this.updateView(),this.updateData(),this.tabBarMenu.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.btnActVoucher,this.onClick),this.addTouchEvent(this.btnFastBuy,this.onClick),this.addTouchEvent(this.btnGetCredit,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),this.addTouchEvent(this.btnLeft,this.onClick),this.addTouchEvent(this.btnOnekeyGet,this.onClick),this.addTouchEvent(this.btnRight,this.onClick),this.observe(t.ActvityMgr.ins().post_25_2,this.updateData),this.observe(t.ActvityMgr.ins().post_25_4,this.updateData25_4),this.observe(t.ShopMgr.ins().post_onReceiveshopList,this.updateShopList),this.observe(t.ShopMgr.ins().post_onReceivesBuyGoods,this.updateBuyGoods),this.observe(t.DefaultMgr.ins().postPlayerChange,this.changeMoney),this.rewardButton.currentState=0==this.selectIdx?"down":"up",this.taskButton.currentState=1==this.selectIdx?"down":"up",this.shopButton.currentState=2==this.selectIdx?"down":"up"
},i.prototype.bindShopList=function(){this.gList.itemRenderer=t.WarShopItemView,this.gList.useVirtualLayout=!0,this.gList.dataProvider=this.shopList},i.prototype.updateData25_4=function(){t.ActivityWarData.ins().getConfigList(),this.updateData()},i.prototype.updateData=function(){if(0==this.selectIdx){if(this.actInfo=t.ActvityMgr.ins().getActivityInfo(this.actId),this.actInfo&&this.actInfo.info){var e=this.actInfo.endTime-Math.floor(t.GlobalData.serverTime/1e3);this.lbTimer.text=t.LanguageUtils.language_Common_65+t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18)}this.setWarAwardPage()}else this.initWarTaskData()},i.prototype.onClick=function(e){var i=e.currentTarget;switch(i){case this.btnClose:t.ViewManager.ins().close(this);break;case this.btnActVoucher:t.ViewManager.ins().open(t.ActivityWarGiftAdvView);break;case this.btnGetCredit:this.group_shop.visible=!1,this.group_award.visible=!1,this.group_task.visible=!0,this.selectIdx=1,this.updateView();break;case this.btnOnekeyGet:var n=t.ActivityWarData.ins().getSetConfig(),s=t.GlobalConfig.BagRemainConfig[n.bagremain];if(s){var a=t.BagMgr.ins().getBagCapacity(s.bagremain);a?t.ActvityMgr.ins().send_25_1(this.actId,t.Operate.cWarOneKeyGetAward):t.UserTips.ins().showUITips(s.bagtips)}break;case this.btnFastBuy:this.actInfo=t.ActvityMgr.ins().getActivityInfo(this.actId);var r=this.actInfo.info.tokenLv;if(r>=t.ActivityWarData.ins().getWarMaxLv())return void t.UserTips.ins().showUITips(t.LanguageUtils.language_War_Text22);t.ViewManager.ins().open(t.ActivityWarGiftAdvGoodsView);break;case this.btnLeft:this.prePage();break;case this.btnRight:this.nextPage()}},i.openCheck=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.ActvityMgr.ins().warActId;if(0!=n){var s=t.ActvityMgr.ins().getActivityInfo(n);if(s)return!0}return!1},i.prototype.getTabList=function(){var e=t.GlobalConfig.Activity14tabConfig,i=[];for(var n in e)if(e[Number(n)]){var s=t.ActvityMgr.ins().getActivityInfo(Number(n));s&&i.push(e[n])}return i},i.prototype.setWarAwardPage=function(){if(this.actInfo&&this.actInfo.info){var e=t.ActivityWarData.ins().configList;this.lbVoucherLv.text=this.actInfo.info.tokenLv+"";var i=this.actInfo.info.tokenLv==t.ActivityWarData.ins().getWarMaxLv()?this.actInfo.info.tokenLv:this.actInfo.info.tokenLv+1,n=t.ActivityWarData.ins().getFindlvItem(i),s=this.actInfo.info.goldState;this.imageRed.source=s?"zl_hd_2":"zl_hd_4",this.imgGold.filters=s?null:t.FilterUtil.ARRAY_GRAY_FILTER,this.pbTaskInt.labelFunction=function(t,e){return t+"/"+e},this.setRedDot(),this.pbTaskInt.maximum=n.data.accumulate,this.pbTaskInt.value=this.actInfo.info.score,this.pageContentLen=e.length,this.pageNums=Math.ceil(this.pageContentLen/this.pageCount);for(var a=0;a<this.pageNums;a++){for(var r=[],o=a*this.pageCount;o<(a+1)*this.pageCount&&o<e.length;o++)r.push(e[o]);this.warAwardPageDic[a]=r}this.initWarData()}},i.prototype.setRedDot=function(){var e="ActvityMgr.post_25_4",i="ActivityWarData.findActRedState";this.redDot.param=t.ActvityMgr.ins().warActId,this.redDot.updateShowFunctions=i,this.redDot.showMessages=e},i.prototype.prePage=function(){this.crrentPage--,this.updateWarData(),this.setPageBtnState()},i.prototype.nextPage=function(){this.crrentPage++,this.updateWarData(),this.setPageBtnState()},i.prototype.setPageBtnState=function(){0==this.crrentPage&&(this.btnLeft.visible=!1),this.crrentPage+1==this.pageNums&&(this.btnRight.visible=!1),this.crrentPage>0&&(this.btnLeft.visible=!0),this.crrentPage+1<this.pageNums&&(this.btnRight.visible=!0)},i.prototype.updateWarData=function(){var t=[];for(var e in this.warAwardPageDic[this.crrentPage])t.push(this.warAwardPageDic[this.crrentPage][e]);this.warAwardArr.source=t},i.prototype.initWarData=function(){this.crrentPage=this.findAwardArr(),this.warAwardArr.replaceAll(this.warAwardPageDic[this.crrentPage]),this.setPageBtnState()},i.prototype.findAwardArr=function(){var t=-1,e=-1,i=this.actInfo&&this.actInfo.info&&this.actInfo.info.goldState;for(var n in this.warAwardPageDic)for(var s=this.warAwardPageDic[n],a=0,r=s;a<r.length;a++){var o=r[a];2==o.state&&0>t&&(t=Number(n)),i&&2==o.state1&&0>e&&(e=Number(n))}if(t>-1||e>-1)return t>-1&&e>-1?Math.min(t,e):Math.max(t,e);for(var n in this.warAwardPageDic)for(var s=this.warAwardPageDic[n],l=0,h=s;l<h.length;l++){var o=h[l];0==o.state&&o.data.rewardA&&0>t&&(t=Number(n)),i&&0==o.state1&&0>e&&(e=Number(n))}return-1==t&&-1==e?0:t>-1&&e>-1?Math.min(t,e):Math.max(t,e)},i.prototype.getWarTaskIndex=function(){for(var t=0;t<this.tabBarMenu.numElements;t++){var e=this.tabBarMenu.getVirtualElementAt(t);if(e&&e.itemIndex==this.lastIndex)return e.tabConf}},i.prototype.initWarTaskData=function(){var e=this.getWarTaskIndex();this.warTaskArr.replaceAll(t.ActivityWarData.ins().getTaskCnfList(e.ID)),this.pbTask.labelFunction=function(t,e){return t+"/"+e};var i=t.ActivityWarData.ins().getTaskCnfList(e.ID)[0];this.pbTask.maximum=i&&i.data.UpperLimit[0];var n=t.ActivityWarData.ins().getTaskDayScore(e.ID);this.pbTask.value=n,this.lbTaskDesc.text=e.describe},i.prototype.onBarItemTap=function(e){this.warTaskArr.removeAll(),this.scroller.stopAnimation(),this.scroller.viewport.validateNow(),this.scroller.viewport.scrollV=0,this.lastIndex=e.itemIndex,t.ActvityMgr.ins().send_25_2(e.item.ID),this.initWarTaskData()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];this.tabBarMenu.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.btnActVoucher,this.onClick),this.removeTouchEvent(this.btnFastBuy,this.onClick),this.removeTouchEvent(this.btnGetCredit,this.onClick),this.removeTouchEvent(this.btnHelp,this.onClick),this.removeTouchEvent(this.btnLeft,this.onClick),this.removeTouchEvent(this.btnOnekeyGet,this.onClick),this.removeTouchEvent(this.btnRight,this.onClick),t.ViewManager.ins().close(t.ActivityWarGiftAdvView),t.ObjectPool.wipe(this.warAwardPageDic),this.warTaskArr.removeAll(),this.warTaskArr=null,this.warAwardArr.removeAll(),this.warAwardArr=null,this.warAwardPageDic=null,t.MouseScroller.unbind(this.scroller),t.MouseScroller.unbind(this.scrollerShop),t.ActivityWarData.ins().removeConfig(),t.ViewManager.ins().isShow(t.ActivityWarGiftAdvGoodsView)&&t.ViewManager.ins().close(t.ActivityWarGiftAdvGoodsView),e.prototype.close.call(this,i),this.$onClose()},i}(t.BaseEuiView);t.ActivityWarView=e,__reflect(e.prototype,"app.ActivityWarView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.barText.text=this.data.str,this.setRedDot()},e.prototype.setRedDot=function(){var t="ActvityMgr.post_25_4",e="ActivityWarData.findActRedState";this.redDot.param=this.data.actId,this.redDot.updateShowFunctions=e,this.redDot.showMessages=t},e}(t.BaseItemRender);t.ActWarTarBtnView=e,__reflect(e.prototype,"app.ActWarTarBtnView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.batchbuy=0,i.item=new Object,i.hot=new t.ShopHotView,i.buyBtn=new t.ShopBuyBtnView,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.hot.x=this.hot.y=0,this.buyBtn.x=111,this.buyBtn.y=85,this.addChild(this.hot),this.addChild(this.buyBtn),this.addTouchEvent(this.buyBtn,this.onClick),this.addMouseMoveEvent(this.goodsItem,this.mouseMove),this.addMouseOverEvent(this.goodsItem,this.mouseMove)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(i&&this.itemId){var n=i.localToGlobal(),s=t.GlobalConfig.StdItems[this.itemId];if(this.item.type>0)return;if(s){var a=t.TipsType.TIPS_EQUIP;a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2})}n=null}i=null}},i.prototype.onClick=function(){var e=this;if(this.batchbuy){var i=""==this.numLb.text?-1:Number(this.numLb.text);return 0==i?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Shop_Limit_Txt):void t.ViewManager.ins().open(t.ShopBatchBuyView,this.itemData.shopId,6,1,i)}var n="|C:0xFFFFFF&T:"+t.LanguageUtils.language_Shop_Buy_Item_txt+"|C:0xDBC789&T:"+t.CommonUtils.overLength(this.item.price)+this.item.moneyType+"|C:0xFFFFFF&T:"+t.LanguageUtils.language_System45+"|C:0xDBC789&T:"+this.item.name+"*"+t.CommonUtils.overLength(this.item.count),s=t.TextFlowMaker.generateTextFlow(n);3==this.item.id||4==this.item.id?t.CautionView.show(s,function(){t.ShopMgr.ins().sendBuyShop(6,1,e.itemData.shopId,0)},this):t.ShopMgr.ins().sendBuyShop(6,1,this.itemData.shopId,0)},i.prototype.dataChanged=function(){if(this.itemData=this.data,null!=this.itemData){0==this.itemData.buyLimitNum?(this.numTxt.visible=this.numLb.visible=!1,this.numLb.text=""):(this.numTxt.text=t.LanguageUtils.language_Common_62,this.numTxt.visible=this.numLb.visible=!0,-1==this.itemData.buyLimitNum?this.numLb.text="":this.numLb.text=""+(this.itemData.buyLimitNum-this.itemData.buyCountNum));var e=t.ShopConfData.findShopCnf(this.itemData.shopId,this.itemData.shopType,this.itemData.shopSmallType);this.buyBtn.labelDisplay.text=e&&t.CommonUtils.overLength(e.price.count);var i=e&&{type:e.price.type,id:e.price.id};this.buyBtn.iconDisplay.source=e&&t.ShopConfData.convertItemIcon(i).icon.toString(),this.countLb.text=e&&t.CommonUtils.overLength(e.shop.count);var n=t.ShopConfData.findItemIcon(this.itemData.shopId,this.itemData.shopType,this.itemData.shopSmallType);if(this.item.moneyType=e&&t.GlobalConfig.NumericalIcon[e.price.type].name,this.item.id=e&&t.GlobalConfig.NumericalIcon[e.price.type].id,this.item.price=e&&e.price.count,this.item.count=e&&e.shop.count,this.item.type=e&&e.shop.type,this.batchbuy=e.batchbuy,0==this.itemData.buySell)this.hot.visible=!1;else if(this.hot.visible=!0,this.itemData.buySell=this.itemData.buySell<10?10:this.itemData.buySell,this.itemData.buySell%10==0||this.itemData.buySell>=100)this.hot.setState(!0),this.hot.setOddNum(this.itemData.buySell);else{this.hot.setState(!1);var s=this.itemData.buySell.toString().split("");this.hot.setDualNum(s[0],s[1])}n?(this.itemId=n.id,this.goodsItem.source=n.icon.toString(),this.shopItemNameLb.text=n.name,this.item.name=n.name):this.shopItemNameLb.text=t.LanguageUtils.language_Tips83,e=null,t.ObjectPool.wipe(i),n=null}},i.prototype.destroy=function(){for(this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.goodsItem.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.goodsItem.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.hot.destroy(),this.buyBtn.destroy(),this.data=null,this.itemData=null,this.buyBtn=null,t.ObjectPool.wipe(this.item),this.item=null,this.hot=null;this.gp.numChildren>0;){var e=this.gp.getChildAt(0);e&&(e=null),this.gp.removeChildAt(0)}this.gp=null},i}(t.BaseItemRender);t.WarShopItemView=e,__reflect(e.prototype,"app.WarShopItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ActivityWlelfareCardItemView",t}return __extends(i,e),i.prototype.dataChanged=function(){this.labelDisplay.textFlow=t.TextFlowMaker.generateTextFlow(this.data[0])},i}(t.BaseItemRender);t.ActivityWlelfareCardItem=e,__reflect(e.prototype,"app.ActivityWlelfareCardItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.redDotActIdArr=[10005],t.isPast=0,t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.getRedPosArr=function(e){var i=t.ActvityMgr.ins().getActivityInfo(e),n=[];if(i)for(var s=1;7>=s;s++)n.push(t.MathUtils.getValueAtBit(i.redDot,s));return n},i.prototype.getMonthCardPosArr=function(e){for(var i=t.EntityMgr.ins().getPayer.propSet.getMonthCardTimer(),n=t.DateUtils.formatMiniDateTime(i)-t.GlobalData.serverTime,s=t.EntityMgr.ins().getPayer.propSet.getBigDrugMonthCardTimer(),a=t.EntityMgr.ins().getPayer.propSet.getBindCoin(),r=t.DateUtils.formatMiniDateTime(s)-t.GlobalData.serverTime,o=[],l=t.EntityMgr.ins().getPayer.propSet.getVipState(),h=1;3>h;h++)o.push(t.MathUtils.getValueAtBit(l,h));for(var p=t.EntityMgr.ins().getPayer.propSet.getVipCardState(),u=[],h=1;5>h;h++)u.push(t.MathUtils.getValueAtBit(p,h));var c=t.GlobalConfig.Activity10007Config[e];if(c){var g=c.type;return 2==g?0==u[1]&&n>0?1:0:1==g?a>=2e5&&0==o[0]?2:0:3==g?0==u[2]&&r>0?1:0:4==g?0==u[3]&&1==o[1]?1:0:void 0}},i.prototype.getAllRedDotState=function(){var e;if(e=t.ActvityMgr.ins().getActivityInfo(10148),e&&0!=e.redDot)return 1;if(e=t.ActvityMgr.ins().getActivityInfo(10149),e&&0!=e.redDot)return 1;if(t.OtherMgr.ins().getRedCashCow()>0)return 1;for(var i=0,n=0;n<this.redDotActIdArr.length;n++){var s=this.redDotActIdArr[n];if(i=this.getMonthCardPosArr(s),1==i)break}if(0==i)for(var n=0;n<this.redDotActIdArr.length;n++){var s=this.redDotActIdArr[n];if(i=this.getMonthCardPosArr(s),2==i)break}return 1==i||1==this.getSignRedPosState(10005)?1:2==i||2==this.getSignRedPosState(10005)?2:0},i.prototype.getSignRedPosState=function(t){var e=this.getRedPosArr(t),i=e.lastIndexOf(1);return e?1==e[0]?0==i?2:1:i>=0?1:0:0},i.prototype.getRedPosState=function(t){return t>10005?i.ins().getMonthCardPosArr(t):i.ins().getSignRedPosState(t)},i}(t.BaseSystem);t.ActivityWlelfareData=e,__reflect(e.prototype,"app.ActivityWlelfareData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.dayAwardInfo=[],i.vipCardStateArr=[],i.vipStateArr=[],i._helpDic={10005:68,10007:64,10008:66,10009:65,10010:67},i.cashCowTimes=-1,i.cardBuytype=1,i.skinName="ActivityWlelfareViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.itemList.itemRenderer=t.ItemBase,this.listCalenda.itemRenderer=t.SignItemView,this.listCardDesc.itemRenderer=t.ActivityWlelfareCardItem},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.selectActivityId=e[0],this.infoGrp.visible=!1,t.MouseScroller.bind(this.CalendaScroller),this.addTouchEvent(this.btnSign,this.onClick),this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.btnGetGift,this.onClick),this.addTouchEvent(this.btnBuy,this.onClick),this.addTouchEvent(this.btnPaste,this.onClick),this.addTouchEvent(this.btnGetAward,this.onClick),this.addTouchEvent(this.btnCash,this.onClick),this.tabBarMenu.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.tabItem.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onShowItemTap,this),this.observe(t.ActvityMgr.ins().post_25_3,this.updateInfo),this.observe(t.ActvityMgr.ins().post_25_4,this.updateInfo),this.observe(t.DefaultMgr.ins().post_g_0_7,this.updateCardData),this.observe(t.DefaultMgr.ins().post_g_0_7,this.updateCashCow),this.observe(t.OtherMgr.ins().post_26_83,this.updateCashCow),this.observe(t.BagMgr.ins().post_8_1,this.updateCashCowRed),this.observe(t.BagMgr.ins().post_8_3,this.updateCashCowRed),this.observe(t.BagMgr.ins().post_8_4,this.updateCashCowRed),this.vipDataInit(),this.bindOptTabBar(),this.bindAwardTabBar(),this.selectActivityId?(this.setDefaultTab(),this.setGroup(this.selectActivityId),this.setData(this.selectActivityId)):(t.ActvityMgr.ins().send_25_2(t.ActvityInfoEnum.sign),this.tabBarMenu.selectedIndex=0,this.setGroup(t.ActvityInfoEnum.sign),this.setData(t.ActvityInfoEnum.sign)),t.OtherMgr.ins().send_26_68(),this.updateCashCow(),this.cash_imgTree.visible=!0,this.cash_effGrp.visible=!1,this.cash_effGrp.touchEnabled=!1},i.prototype.updateCode=function(){var e=t.OtherMgr.ins().codeState;t.LanguageUtils.language_Wlelfare_Text4[e]?t.UserTips.ins().showUITips(t.LanguageUtils.language_Wlelfare_Text4[e]):t.UserTips.ins().showUITips("未知错误")},i.prototype.setGroup=function(t){for(var e=this.getTabList(),i=0;i<e.length;i++){var n=e[i];this["group_"+n.actId]&&(this["group_"+n.actId].visible=!1)}this.btnHelp.ruleId=this._helpDic[t],(10008==t||10009==t||10010==t)&&(t=10007),this["group_"+t]&&(this["group_"+t].visible=!0)},i.prototype.setDefaultTab=function(){for(var t=0;t<this.tabBarMenu.numElements;t++){var e=this.tabBarMenu.getVirtualElementAt(t);e&&e.activityWelfareConf.actId==this.selectActivityId&&(this.tabBarMenu.selectedIndex=e.itemIndex)}},i.prototype.bindItemList=function(t){this.itemList.dataProvider=new eui.ArrayCollection(this.getAwawrdList(t))},i.prototype.getAwardIndex=function(e){var i=t.GlobalConfig.Activity10005Config[t.ActvityInfoEnum.sign];return i[e].GiftNums},i.prototype.getAwardSignArr=function(){var e=t.GlobalConfig.Activity10005Config[t.ActvityInfoEnum.sign],i=[];for(var n in e)e[Number(n)]&&i.push(e[n].GiftNums);return i},i.prototype.getTabList=function(){var e=!0,i=t.GlobalConfig.ActivityWelfareConf;t.GlobalData.sectionOpenDay>7&&1==this.vipStateArr[0]&&(e=!1);var n=[];for(var s in i)if(i[Number(s)]){if(10008==i[s].actId&&!e)continue;if(!t.ViewManager.ins().isCheckOpen(i[s].openlimit))continue;n.push(i[s])}var a=t.GlobalConfig.FunExhibitionConfig[26];return t.ViewManager.ins().isCheckOpen(a.isOpenNeed)&&n.push({Id:n.length+1,name:t.LanguageUtils.language_Common_218,actId:"yqs"}),n},i.prototype.getAwawrdTabList=function(){var e=t.GlobalConfig.Activity10005Config[t.ActvityInfoEnum.sign],i=[];for(var n in e)if(e[Number(n)]){var s={tabName:""+t.LanguageUtils.language_Wlelfare_Text3+e[n].GiftNums+t.LanguageUtils.language_Wlelfare_Text5,signNum:e[n].GiftNums,index:n};i.push(s)}return i},i.prototype.getAwawrdList=function(e){var i=t.GlobalConfig.Activity10005Config[t.ActvityInfoEnum.sign],n=[];for(var s in i)i[Number(s)]&&e==i[s].GiftNums&&(n=i[Number(s)].GiftTable);return n},i.prototype.bindOptTabBar=function(){var e=this.getTabList();this.tabBarMenu.itemRenderer=t.SignShowTabItemView,this.tabList=new eui.ArrayCollection(e),this.tabBarMenu.dataProvider=this.tabList},i.prototype.bindAwardTabBar=function(){var e=this.getAwawrdTabList();this.tabItem.itemRenderer=t.SignAwardTabItem;var i=new eui.ArrayCollection(e);this.tabItem.dataProvider=i},i.prototype.updateCashCow=function(){var e=t.GlobalConfig.MoneytreeconstConfig;if(this.cash_txtCondition.textFlow=t.TextFlowMaker.generateTextFlow(e.ruledisplay),t.ViewManager.ins().isCheckOpen(e.limit)){var i=t.OtherMgr.ins().cashCowData.times,n=t.StringUtils.replace(t.LanguageUtils.language_Common_220,i),s=(t.EntityMgr.ins().getPayer,t.VipData.ins().getMyVipLv()),a=t.CommonUtils.objectToArray(e.times);a[s]>a[0]&&(n+=t.StringUtils.replace(t.LanguageUtils.language_Common_225,a[s]-a[0])),this.cash_txtTime.textFlow=t.TextFlowMaker.generateTextFlow(n);var r=e.cost2;r&&(this.cash_txtCost.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_221,r[0].count)),this.cast_imgCost.source=t.CurrencyUtils.getMoneyIcon(r[0].type)+"");var o=t.GlobalData.sectionOpenDay,l=t.GlobalConfig.MoneytreeRewardConfig,h=void 0;for(var p in l)o>=l[p].Opendaylimit&&(!h||h.Opendaylimit<l[p].Opendaylimit)&&(h=l[p]);if(h)for(var p in h.reward)2==h.reward[p].type&&(this.cash_txtAward.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_219,h.reward[p].count)),this.cash_imgAward.source=t.CurrencyUtils.getMoneyIcon(h.reward[p].type)+"");this.cashCowTimes>-1&&this.cashCowTimes>i&&this.playCashEffect(),this.cashCowTimes=i,this.cash_txtCondition.visible=!1,this.cash_txtAward.visible=!0,this.cash_txtCost.visible=!0,this.cash_txtTime.visible=!0,this.cast_imgCost.visible=!0,this.cash_imgAward.visible=!0,this.btnCash.visible=!0,this.updateCashCowRed()}else this.cash_txtCondition.visible=!0,this.cash_txtAward.visible=!1,this.cash_txtCost.visible=!1,this.cash_txtTime.visible=!1,this.cast_imgCost.visible=!1,this.cash_imgAward.visible=!1,this.btnCash.visible=!1,this.cash_redPoint.visible=!1},i.prototype.playCashEffect=function(){var e=this;e.cash_imgTree.visible=!1,e.cash_effGrp.visible=!0,this.cashCowMc||(this.cashCowMc=t.ObjectPool.pop("app.MovieClip"),this.cash_effGrp.addChild(this.cashCowMc)),this.cashCowMc.isPlaying||this.cashCowMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_fcs",2,function(){e.cash_imgTree.visible=!0,e.cash_effGrp.visible=!1},!1)},i.prototype.updateCashCowRed=function(){this.cash_redPoint.visible=t.OtherMgr.ins().getRedCashCow()>0},i.prototype.onBarItemTap=function(e){var i=e.item;this.selectActivityId!=i.actId&&(this.infoGrp.visible=!1,this.curPanel&&(t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel.close()),this.selectActivityId=i.actId,this.setGroup(this.selectActivityId),this.setData(this.selectActivityId),this.bgImg2.visible=this.bgImg1.visible=!0,i.view&&(this.bgImg2.visible=this.bgImg1.visible=!1,this.infoGrp.visible=!0,this.setView(i.view,this.selectActivityId)),"yqs"==this.selectActivityId&&(this.bgImg2.visible=this.bgImg1.visible=!1,t.OtherMgr.ins().redCashCowOnce=!1,this.updateCashCowRed(),this.setObtTabRedDotState()))},i.prototype.onShowItemTap=function(t){var e=t.item;this.lastItemIndex=e.index,this.bindItemList(e.signNum),this.awawardIndex=this.getAwardIndex(this.lastItemIndex),this.imgYiGet.visible=Boolean(this.dayAwardInfo[this.awawardIndex]),this.btnGetGift.visible=!Boolean(this.dayAwardInfo[this.awawardIndex]),this.setItemState()},i.prototype.setItemState=function(){this.imgYiGet.visible=Boolean(this.dayAwardInfo[this.awawardIndex]),this.btnGetGift.visible=!Boolean(this.dayAwardInfo[this.awawardIndex]),this.btnGetGift.label=t.LanguageUtils.language_Wlelfare_Text1,this.btnGetGift.enabled=!1,!this.dayAwardInfo[this.awawardIndex]&&(this.actInfo&&this.actInfo.info.signdays)>=this.awawardIndex&&(this.btnGetGift.label=t.LanguageUtils.language_Wlelfare_Text2,this.btnGetGift.enabled=!0)},i.prototype.updateInfo=function(){if(this.actInfo=t.ActvityMgr.ins().getActivityInfo(t.ActvityInfoEnum.sign),this.actInfo&&this.signArrs){for(var e=parseInt(this.actInfo.info.signStates).toString(2),i=(parseInt(this.actInfo.info.awardStates).toString(2),[]),n=1;32>=n;n++)i.push(t.MathUtils.getValueAtBit(this.actInfo.info.signStates,n));this.dayAwardInfo=[];for(var n=1;27>=n;n++)this.dayAwardInfo.push(t.MathUtils.getValueAtBit(this.actInfo.info.awardStates,n));for(var s=e.split("").reverse(),a=0;a<this.signArrs.source.length;a++){var r=this.signArrs.source[a];r.noCurDay||"1"==s[r.day]&&(r.state=1)}this.signArrs.refresh(),this.listCalenda.validateNow(),this.bmpLb_signNum.text=t.LanguageUtils.language_Omission_txt128+this.actInfo.info.signdays+t.LanguageUtils.language_Time_Days;for(var o=this.getAwardSignArr(),n=0;n<o.length;n++)if(0==this.dayAwardInfo[o[n]]){this.awawardIndex=o[n];break}null==this.awawardIndex&&(this.awawardIndex=o[0]),this.setItemState(),this.setDefaultItemTab(this.awawardIndex),this.bindItemList(this.awawardIndex);for(var l=t.ActvityMgr.ins().getActivityInfo(t.ActvityInfoEnum.sign),h=[],n=1;7>=n;n++)h.push(t.MathUtils.getValueAtBit(l.redDot,n));this.setObtTabRedDotState(),this.setItemTabRedDotState();for(var n=1;n<h.length;n++)if(1==h[n]){this.setDefaultItemTabRedDotState(o[n-1]);break}}},i.prototype.setObtTabRedDotState=function(){for(var e=0;e<this.tabBarMenu.numElements;e++){var i=this.tabBarMenu.getVirtualElementAt(e),n=i.activityWelfareConf.actId;n==t.ActvityInfoEnum.sign||10148==n||10149==n?i.setRedDot():"yqs"==n&&i.setRedDot2()}},i.prototype.setItemTabRedDotState=function(){for(var t=0;t<this.tabItem.numElements;t++){var e=this.tabItem.getVirtualElementAt(t);e&&(e.redPoint.visible=!1)}},i.prototype.setDefaultItemTabRedDotState=function(t){for(var e=0;e<this.tabItem.numElements;e++){var i=this.tabItem.getVirtualElementAt(e);i&&i.signData.signNum==t&&(i.redPoint.visible=!0)}},i.prototype.setDefaultItemTab=function(t){for(var e=0;e<this.tabItem.numElements;e++){var i=this.tabItem.getVirtualElementAt(e);i&&i.signData.signNum==t&&(this.tabItem.selectedIndex=i.itemIndex)}},i.prototype.setData=function(e){if(e==t.ActvityInfoEnum.sign)this.setSignData();else if(10007==e||10008==e||10009==e||10010==e){this.updateCardData();var i=t.GlobalConfig.Activity10007Config[this.selectActivityId];if(!i)return;this.listCardDesc.dataProvider=new eui.ArrayCollection(i.name)}},i.prototype.setView=function(t,e){var i=egret.getDefinitionByName(t);i&&(this.curPanel=new i,this.curPanel&&(this.curPanel.left=0,this.curPanel.right=0,this.curPanel.top=0,this.curPanel.bottom=0,this.infoGrp.addChild(this.curPanel),this.curPanel.open(e)))},i.prototype.setSignData=function(){for(var e=[],i=new Date(t.GlobalData.serverTime),n=(i.getFullYear(),i.getMonth(),i.getDate(),i.getFullYear()),s=i.getMonth()+1,a=new Date(n,s,0),r=a.getDate(),o=new Date(n,s-1,1),l=(o.getDay(),new Date(n,s-1,0)),h=(l.getDate(),1);r>=h;h++){var p=new t.ActivityWlelfareData;p.day=h,n===i.getFullYear()&&s===i.getMonth()+1&&i.getDate()>h?p.isPast=1:n===i.getFullYear()&&s===i.getMonth()+1&&i.getDate()<h&&(p.isPast=2),n===i.getFullYear()&&s===i.getMonth()+1&&i.getDate()===h&&(p.today=1),e.push(p)}this.signArrs=new eui.ArrayCollection(e),this.listCalenda.dataProvider=this.signArrs,this.bmpLb_curM.text=s+t.LanguageUtils.language_Time_Months,this.updateInfo()},i.prototype.parsteCode=function(){var t=this;if(navigator.clipboard){var e=navigator.clipboard.readText();e&&navigator.clipboard.readText().then(function(e){t.InputCode.text=e})["catch"](function(t){console.error("Failed to read clipboard contents: ",t)})}},i.prototype.updateCardData=function(){var e=t.GlobalConfig.Activity10007Config[this.selectActivityId];e&&(this.vipDataInit(),this.imgMonthCardTitle.source=e.titleIcon,this.imgCardIcon.source=e.bg,this.cardBuytype=e.type,1==e.countdown?(this.imgMonthCardDay.source="yk_30tian",this.lbDay.visible=!0):(this.imgMonthCardDay.source="yk_30tian2",this.lbDay.visible=!1),this.monthCardTimer=t.EntityMgr.ins().getPayer.propSet.getMonthCardTimer(),this.bigDrugMonthCardTimer=t.EntityMgr.ins().getPayer.propSet.getBigDrugMonthCardTimer(),10007==this.selectActivityId?(this.cardTimer=t.DateUtils.formatMiniDateTime(this.monthCardTimer)-t.GlobalData.serverTime,this.cardTimer<=0?this.lbDay.visible=!1:this.lbDay.visible=!0):10009==this.selectActivityId&&(this.cardTimer=t.DateUtils.formatMiniDateTime(this.bigDrugMonthCardTimer)-t.GlobalData.serverTime,this.cardTimer<=0?this.lbDay.visible=!1:this.lbDay.visible=!0),this.lbDay.text=t.LanguageUtils.language_Common_104+t.DateUtils.getFormatBySecond(Math.floor(this.cardTimer/1e3),t.DateUtils.TIME_FORMAT_7),this.setMonthState(e.buttontxt))},i.prototype.vipDataInit=function(){var e=t.EntityMgr.ins().getPayer.propSet.getVipState();this.vipStateArr=[];for(var i=1;3>i;i++)this.vipStateArr.push(t.MathUtils.getValueAtBit(e,i));var n=t.EntityMgr.ins().getPayer.propSet.getVipCardState();this.vipCardStateArr=[];for(var i=1;5>i;i++)this.vipCardStateArr.push(t.MathUtils.getValueAtBit(n,i))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnSign:t.ActvityMgr.ins().send_25_1(t.ActvityInfoEnum.sign,t.Operate.cSign);break;case this.btnGetGift:var i=t.GlobalConfig.BagRemainConfig[4];if(i){var n=t.BagMgr.ins().getBagCapacity(i.bagremain);n?t.ActvityMgr.ins().send_25_1(t.ActvityInfoEnum.sign,t.Operate.cBuy,[this.awawardIndex]):t.UserTips.ins().showUITips(i.bagtips)}break;case this.btnBuy:1==this.cardBuytype?0==this.vipStateArr[0]&&t.OtherMgr.ins().send_26_61(this.cardBuytype):2==this.cardBuytype?0==this.vipCardStateArr[1]&&(this.cardTimer>0?this.buyTips(this.cardBuytype):t.OtherMgr.ins().send_26_61(this.cardBuytype)):3==this.cardBuytype?0==this.vipCardStateArr[2]&&(this.cardTimer>0?this.buyTips(this.cardBuytype):t.OtherMgr.ins().send_26_61(this.cardBuytype)):4==this.cardBuytype&&(0==this.vipStateArr[1]?t.OtherMgr.ins().send_26_61(this.cardBuytype):0==this.vipCardStateArr[3]&&this.buyTips(this.cardBuytype));break;case this.btnClose:t.ViewManager.ins().close(this);break;case this.btnPaste:this.parsteCode();break;case this.btnGetAward:if(""==this.InputCode.text.trim()||this.InputCode.text.length<5)return;t.OtherMgr.ins().send_26_63(this.InputCode.text);break;case this.btnCash:var s=t.GlobalConfig.MoneytreeconstConfig;t.ViewManager.ins().isCheckOpen(s.limit)?t.OtherMgr.ins().cashCowData.times<=0?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips65):t.OtherMgr.ins().send_26_69():t.UserTips.ins().showUITips(s.ruledisplay)}},i.prototype.buyTips=function(e){var i=t.GlobalConfig.BagRemainConfig[4];if(i){var n=t.BagMgr.ins().getBagCapacity(i.bagremain);n?t.OtherMgr.ins().send_26_62(e):t.UserTips.ins().showUITips(i.bagtips)}},i.prototype.setMonthState=function(e){1==this.cardBuytype?0==this.vipStateArr[0]?(this.btnBuy.label=e,this.btnBuy.enabled=!0):(this.btnBuy.label=t.LanguageUtils.language_Wlelfare_Text6,this.btnBuy.enabled=!1):2==this.cardBuytype?0==this.vipCardStateArr[1]?(this.cardTimer>0?this.btnBuy.label=t.LanguageUtils.language_Wlelfare_Text2:this.btnBuy.label=e,this.btnBuy.enabled=!0):(this.btnBuy.label=t.LanguageUtils.language_Wlelfare_Text7,this.btnBuy.enabled=!1):3==this.cardBuytype?0==this.vipCardStateArr[2]?(this.cardTimer>0?this.btnBuy.label=t.LanguageUtils.language_Wlelfare_Text2:this.btnBuy.label=e,this.btnBuy.enabled=!0):(this.btnBuy.label=t.LanguageUtils.language_Wlelfare_Text7,this.btnBuy.enabled=!1):4==this.cardBuytype&&(1==this.vipStateArr[1]?this.vipCardStateArr[3]>0?(this.btnBuy.label=t.LanguageUtils.language_Wlelfare_Text7,this.btnBuy.enabled=!1):(this.btnBuy.enabled=!0,this.btnBuy.label=t.LanguageUtils.language_Wlelfare_Text2):(this.btnBuy.label=e,this.btnBuy.enabled=!0))},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.curPanel&&(t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel.close()),this.cashCowMc&&(this.cashCowMc.destroy(),this.cashCowMc=null),t.MouseScroller.unbind(this.CalendaScroller),this.removeTouchEvent(this.btnSign,this.onClick),this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.btnGetGift,this.onClick),this.removeTouchEvent(this.btnBuy,this.onClick),this.removeTouchEvent(this.btnPaste,this.onClick),this.removeTouchEvent(this.btnGetAward,this.onClick),this.removeTouchEvent(this.btnCash,this.onClick),this.tabBarMenu.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.tabItem.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onShowItemTap,this),this.signArrs&&this.signArrs.removeAll(),this.signArrs=null,this.vipCardStateArr=[],this.vipStateArr=[],this.dayAwardInfo=[],this.dayAwardInfo=null,this.actInfo=null,this.tabList.removeAll(),this.tabList=null},i}(t.BaseEuiView);t.ActivityWlelfareView=e,__reflect(e.prototype,"app.ActivityWlelfareView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.signData=this.data,this.labelDisplay.text=this.data.tabName},e}(t.BaseItemRender);t.SignAwardTabItem=e,__reflect(e.prototype,"app.SignAwardTabItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.addTouchEvent(t,t.onClick),t}return __extends(i,e),i.prototype.onClick=function(){this.data.today&&t.ActvityMgr.ins().send_25_1(t.ActvityInfoEnum.sign,t.Operate.cSign)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this,this.onClick)},i.prototype.dataChanged=function(){if(this.data){var e=t.GlobalConfig.SignPrizeConfig[this.data.day];if(e&&e.prz){var i=e.prz[0];if(this.itemCount.text=i.count,0==i.type){var n=t.GlobalConfig.StdItems[i.id];n&&(this.imgIcon.source=n.icon+"")}else{var s=t.CurrencyUtils.getCurrencyNameIcon(i.type);s&&(this.imgIcon.source=s[1]+"")}}this.curDay.visible=this.data.isPast&&1==this.data.isPast||this.data.today?!1:!0,this.imgIcon.alpha=this.data.isPast&&1==this.data.isPast?.6:1;
var a=new Date(t.GlobalData.serverTime),r=a.getMonth()+1;this.curDay.text=r+"月"+this.data.day+"日",this.curDay.textColor=this.data.today?2682369:15064527,this.imgYiqiandao.source=this.data.state?"flqd_qd1":"flqd_qd2",this.imgYiqiandao.visible=this.lastImg.visible=this.data.isPast&&1==this.data.isPast||this.data.today&&this.data.state,this.imgToday.visible=this.data.today,this.signLab.visible=this.data.today&&!this.data.state}},i}(t.BaseItemRender);t.SignItemView=e,__reflect(e.prototype,"app.SignItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.activityWelfareConf=this.data,this.labelDisplay.text=this.activityWelfareConf.name},i.prototype.setRedDot=function(){if(this.data.view){var e=t.ActvityMgr.ins().getActivityInfo(this.activityWelfareConf.actId);e&&(this.redDot.visible=0!=e.redDot)}else{var i="DefaultMgr.postPlayerChange",n="ActivityWlelfareData.getRedPosState";this.redDot.param=this.activityWelfareConf.actId,this.redDot.updateShowFunctions=n,this.redDot.showMessages=i}},i.prototype.setRedDot2=function(){var t="OtherMgr.post_26_83;BagMgr.post_8_1;BagMgr.post_8_3;BagMgr.post_8_4",e="OtherMgr.getRedCashCow";this.redDot.updateShowFunctions=e,this.redDot.showMessages=t},i}(t.BaseItemRender);t.SignShowTabItemView=e,__reflect(e.prototype,"app.SignShowTabItemView")}(app||(app={}));var app;!function(t){var e;!function(t){t[t.PActivity=1]="PActivity",t[t.Appraisal=2]="Appraisal",t[t.PActivity3=3]="PActivity3",t[t.Worship=4]="Worship",t[t.Inspire=8]="Inspire",t[t.Tower=9]="Tower",t[t.NightVoma=11]="NightVoma",t[t.Material=12]="Material",t[t.DefendTask=13]="DefendTask",t[t.War=14]="War",t[t.WarTask=15]="WarTask",t[t.DonaTion=16]="DonaTion",t[t.CrossServerChaos=17]="CrossServerChaos",t[t.CrossServerNightVoma=18]="CrossServerNightVoma",t[t.CrossServerBoss=19]="CrossServerBoss",t[t.CrossServerShabak=21]="CrossServerShabak",t[t.CrossServerWorship=23]="CrossServerWorship",t[t.WorldBoss=25]="WorldBoss",t[t.EscapeFromTrial=26]="EscapeFromTrial",t[t.SecretLandTreasure=28]="SecretLandTreasure",t[t.CumulativeRecharge=10001]="CumulativeRecharge",t[t.Discount=10002]="Discount",t[t.firstCharge=10003]="firstCharge",t[t.sevenDay=10004]="sevenDay",t[t.sign=10005]="sign",t[t.investment=10006]="investment",t[t.sports=10009]="sports",t[t.openServerTreasure=10010]="openServerTreasure",t[t.preferentialGift=10015]="preferentialGift",t[t.exChangeAct=10017]="exChangeAct",t[t.IndividualsSports=10019]="IndividualsSports",t[t.GlobalTreasure=10020]="GlobalTreasure",t[t.secondCharge=10021]="secondCharge",t[t.onlineRewards=10038]="onlineRewards"}(e=t.ActvityInfoEnum||(t.ActvityInfoEnum={}));var i;!function(t){t[t.cEnterFuBen=1]="cEnterFuBen",t[t.cGetPhaseAward=2]="cGetPhaseAward",t[t.cWorship=3]="cWorship",t[t.cAppraisal=4]="cAppraisal",t[t.cPersonBox=5]="cPersonBox",t[t.cTreasure=6]="cTreasure",t[t.cGetBonusNum=7]="cGetBonusNum",t[t.cInspire=8]="cInspire",t[t.cSign=10]="cSign",t[t.cReceive=11]="cReceive",t[t.cBuy=12]="cBuy",t[t.cBuyInvestment=13]="cBuyInvestment",t[t.cReceiveInvestment=14]="cReceiveInvestment",t[t.cSportsReveive=15]="cSportsReveive",t[t.cMaterialMopUp=16]="cMaterialMopUp",t[t.cOpenServerTreasure=17]="cOpenServerTreasure",t[t.cWarBuy=18]="cWarBuy",t[t.cWarBuyLv=19]="cWarBuyLv",t[t.cWarTask=20]="cWarTask",t[t.cWarOneKeyGetAward=21]="cWarOneKeyGetAward",t[t.cWarGetAward=22]="cWarGetAward",t[t.cWarGetTaskScore=23]="cWarGetTaskScore",t[t.cDonateRank=24]="cDonateRank",t[t.cExchange=25]="cExchange",t[t.cWarShop=26]="cWarShop",t[t.cKuaFu=28]="cKuaFu",t[t.sPostRankData=1]="sPostRankData",t[t.sPostMyRankData=2]="sPostMyRankData",t[t.sPostFubenResult=4]="sPostFubenResult",t[t.sWorship=5]="sWorship",t[t.sAppraisal=6]="sAppraisal",t[t.sNextAwardIndex=7]="sNextAwardIndex",t[t.sjingjiTime=10]="sjingjiTime",t[t.sinspire=12]="sinspire",t[t.sSendBonusNum=11]="sSendBonusNum",t[t.sSendMonsterNum=13]="sSendMonsterNum",t[t.szhenyingTime=14]="szhenyingTime",t[t.sOpenServerTreasure=16]="sOpenServerTreasure",t[t.sDefendTask=17]="sDefendTask",t[t.sWorldBossTime=18]="sWorldBossTime",t[t.sDuoBaoTime=19]="sDuoBaoTime",t[t.sWarUpdate=21]="sWarUpdate",t[t.sShaBakRank=23]="sShaBakRank",t[t.sShaBakMyRank=24]="sShaBakMyRank",t[t.sShaBakNextReward=25]="sShaBakNextReward",t[t.sKuaFu=28]="sKuaFu"}(i=t.Operate||(t.Operate={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.actvityDatas={},i.pActvityDatas={},i.nextAward=1,i.warActId=0,i.YYClick=!1,i._crossServerActID=0,i._warCurrency=0,i.pActRed={},i.actRed={},i._currentActId=0,i.towerMonsterNum=0,i.towerBonusNum=0,i.jingjiTime=0,i.worldBossTime=0,i.zhenyingTime=0,i.resuleInfo=null,i.EscapeRoleNum=0,i.EscapeRoleInfo=[],i.secretBoxScore=0,i.wordsBoxScore=0,i.materialsBoxScore=0,i.sysId=t.PackageID.Actvity,i.regNetMsg(1,i.post_25_1),i.regNetMsg(2,i.post_25_2),i.regNetMsg(3,i.post_25_3),i.regNetMsg(4,i.post_25_4),i.regNetMsg(5,i.post_25_5),i.regNetMsg(6,i.post_25_6),i.regNetMsg(7,i.post_25_7),i.regNetMsg(8,i.post_25_8),i.regNetMsg(9,i.post_25_9),i.regNetMsg(10,i.post_25_10),i.regNetMsg(11,i.post_25_11),i.regNetMsg(12,i.post_25_12),i.regNetMsg(15,i.post_25_15),i.pActvityDatas={},i.actvityDatas={},i}return __extends(i,e),Object.defineProperty(i.prototype,"crossServerActID",{get:function(){return this._crossServerActID},set:function(t){this._crossServerActID=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"warCurrency",{get:function(){return this._warCurrency},set:function(t){this._warCurrency=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"warShopInfo",{get:function(){return this._warShopInfo},enumerable:!0,configurable:!0}),i.ins=function(){return e.ins.call(this)},i.prototype.send_25_1=function(e,i,n){void 0===n&&(n=null);var s=this.getActivitConf(e);if(s){var a=this.getBytes(1);a.writeInt(e),a.writeByte(i),n&&(s.ActivityType==t.ActvityInfoEnum.Appraisal||s.ActivityType==t.ActvityInfoEnum.Worship||s.ActivityType==t.ActvityInfoEnum.Inspire||s.ActivityType==t.ActvityInfoEnum.CumulativeRecharge||s.ActivityType==t.ActvityInfoEnum.Discount||s.ActivityType==t.ActvityInfoEnum.preferentialGift||s.ActivityType==t.ActvityInfoEnum.sign||s.ActivityType==t.ActvityInfoEnum.sevenDay||s.ActivityType==t.ActvityInfoEnum.investment||s.ActivityType==t.ActvityInfoEnum.WarTask||s.ActivityType==t.ActvityInfoEnum.firstCharge||s.ActivityType==t.ActvityInfoEnum.exChangeAct||s.ActivityType==t.ActvityInfoEnum.secondCharge?a.writeByte(n[0]):s.ActivityType==t.ActvityInfoEnum.War?n&&(a.writeByte(n[0]),a.writeByte(n[1])):s.ActivityType==t.ActvityInfoEnum.DonaTion||s.ActivityType==t.ActvityInfoEnum.sports||t.ActvityInfoEnum.IndividualsSports?a.writeInt(n[0]):a.writeByte(n[0])),this.sendToServer(a)}},i.prototype.send_25_2=function(t){var e=this.getBytes(2);e.writeInt(t),this.sendToServer(e)},i.prototype.post_25_1=function(e){this.pActvityDatas={},this.pActRed={};for(var n,s=e.readShort(),a=e.position,r=0;s>r;r++){if(a+=e.readUnsignedShort(),a>e.length){t.CommonPopView.ins().showTextView("活动数据错误! 数据剩余长度不够！");break}n=this.readData(e);var o=i.ins().getActivityConfigById(n.id);n.redDot&&o&&o.buttoncolor&&13!=n.id&&36!=n.id&&(this.pActRed[n.id]=o.buttoncolor),this.pActvityDatas[n.id]=n,a!=e.position&&(a<e.length?e.position=a:t.CommonPopView.ins().showTextView("活动数据错误! Id:"+n.id))}},i.prototype.post_25_2=function(e){this.actvityDatas={},this.actRed={};for(var n,s=e.readShort(),a=e.position,r=0;s>r;r++){if(a+=e.readUnsignedShort(),a>e.length){t.CommonPopView.ins().showTextView("活动数据错误! 数据剩余长度不够！");break}if(n=this.readData(e,1),n.redDot){var o=i.ins().getActivityConfigById(n.id);o&&o.buttoncolor&&13!=n.id&&28!=n.id&&29!=n.id&&30!=n.id&&31!=n.id&&32!=n.id&&(this.actRed[n.id]=o.buttoncolor)}this.actvityDatas[n.id]=n,a!=e.position&&(a<e.length?e.position=a:t.CommonPopView.ins().showTextView("活动数据错误! Id:"+n.id))}},i.prototype.post_25_3=function(t){var e=this.readData(t);this.pActvityDatas[e.id]=e;var n=i.ins().getActivityConfigById(e.id);return e.redDot?n&&n.buttoncolor&&13!=e.id&&36!=e.id&&(this.pActRed[e.id]=n.buttoncolor):this.pActRed[e.id]&&(this.pActRed[e.id]=e.redDot),e.id},i.prototype.post_25_4=function(t){var e=this.readData(t,1);if(this.actvityDatas[e.id]=e,e.redDot){var n=i.ins().getActivityConfigById(e.id);n&&n.buttoncolor&&13!=e.id&&28!=e.id&&29!=e.id&&30!=e.id&&31!=e.id&&32!=e.id&&(this.actRed[e.id]=n.buttoncolor)}else this.actRed[e.id]&&(this.actRed[e.id]=e.redDot);return e.id},i.prototype.post_25_5=function(t){var e=t.readUnsignedInt();return delete this.actvityDatas[e],delete this.pActvityDatas[e],delete this.actRed[e],delete this.pActRed[e],e},i.prototype.readData=function(e,i){void 0===i&&(i=0);var n=new t.ActvityData;n.id=e.readUnsignedInt(),i&&(n.openTime=Math.floor(t.GlobalFunc.formatMiniDateTime(e.readUnsignedInt())/1e3)),n.endTime=Math.floor(t.GlobalFunc.formatMiniDateTime(e.readUnsignedInt())/1e3),n.redDot=e.readByte();var s,a=this.getActivitConf(n.id),r=[];if(a)switch(a.ActivityType){case t.ActvityInfoEnum.PActivity:n.info={times:e.readInt()};break;case t.ActvityInfoEnum.Appraisal:s=e.readInt();for(var o=0;s>o;o++){var l=new Object;l.itemID=e.readByte(),l.useNum=e.readInt(),l.allNum=e.readInt(),r.push(l)}n.info={item:r};break;case t.ActvityInfoEnum.Worship:case t.ActvityInfoEnum.CrossServerWorship:n.info={times:e.readInt()};break;case t.ActvityInfoEnum.Inspire:case t.ActvityInfoEnum.CrossServerBoss:case t.ActvityInfoEnum.WorldBoss:s=e.readByte(),r=[];for(var o=0;s>o;o++){var h=new Object;h.type=e.readByte(),h.value=e.readInt(),h.times=e.readInt(),r.push(h)}n.info={item:r};break;case t.ActvityInfoEnum.CumulativeRecharge:n.info=[];var p=e.readUnsignedInt();s=e.readByte();for(var o=0;s>o;o++)n.info.push({value:p,id:e.readByte(),type:e.readByte()});break;case t.ActvityInfoEnum.Discount:case t.ActvityInfoEnum.preferentialGift:n.info=[],s=e.readByte();for(var o=0;s>o;o++)n.info.push({id:e.readByte(),times:e.readShort()});break;case t.ActvityInfoEnum.firstCharge:case t.ActvityInfoEnum.secondCharge:var u=e.readUnsignedInt(),c=e.readByte();n.info={sum:u,state:c};break;case t.ActvityInfoEnum.sign:var g=e.readUnsignedInt(),d=e.readUnsignedInt(),m=e.readByte();n.info={signStates:g,awardStates:d,signdays:m};break;case t.ActvityInfoEnum.sevenDay:var f=e.readUnsignedInt(),v=e.readByte();n.info={dayInfo:f,loginDay:v};break;case t.ActvityInfoEnum.investment:var _=e.readByte(),y=e.readUnsignedInt(),T=e.readByte(),M=1e3*e.readUnsignedInt()+egret.getTimer();n.info={IsBuy:_,DayInfo:y,LoginDay:T,BuyTime:M};break;case t.ActvityInfoEnum.sports:case t.ActvityInfoEnum.IndividualsSports:n.info=[],s=e.readInt();for(var o=0;s>o;o++)n.info.push({state:e.readByte(),index:e.readInt(),value:e.readInt()});break;case t.ActvityInfoEnum.openServerTreasure:case t.ActvityInfoEnum.GlobalTreasure:n.info={extractCount:e.readUnsignedShort()};break;case t.ActvityInfoEnum.War:this.warActId=e.readInt();var C=e.readByte(),b=e.readInt(),I=e.readInt(),S=e.readByte(),E=e.readByte();s=e.readByte(),r=[];for(var o=0;s>o;o++){var w=e.readByte(),A=e.readByte(),x=e.readByte(),L={lv:w,state:A,state1:x};r.push(L)}r.sort(function(t,e){return t.lv<e.lv?-1:e.lv>t.lv?1:0}),n.info={extrState:E,goldState:S,warNum:C,tokenLv:I,score:b,warArr:r};break;case t.ActvityInfoEnum.WarTask:C=e.readByte(),s=e.readByte(),n.info={},n.info.taskArr=[];for(var o=0;s>o;o++){var D=e.readByte(),P=e.readInt(),k=e.readByte(),U={actId:n.id,index:D,rate:P,state:k};n.info.taskArr.push(U)}n.info.warNum=C;break;case t.ActvityInfoEnum.Material:n.info={times:e.readInt()};break;case t.ActvityInfoEnum.DefendTask:c=e.readByte();var B=e.readInt();n.info={state:c,times:B};break;case t.ActvityInfoEnum.DonaTion:var R=e.readInt(),O=e.readUnsignedShort();s=e.readByte(),r=[];for(var o=0;s>o;o++){var G=new Object;G.actorid=e.readUnsignedInt(),G.value=e.readUnsignedInt(),G.name=e.readString(),G.playerReg=e.readNumber(),G.idx=o+1,r.push(G)}n.info={myDonaTion:R,myRanking:O,item:r};break;case t.ActvityInfoEnum.exChangeAct:s=e.readInt(),r=[];for(var F={},V=void 0,o=0;s>o;o++)V=new Object,V.id=e.readByte(),V.limitCount=e.readInt(),F[V.id]=V;n.info=F;break;case t.ActvityInfoEnum.onlineRewards:var N=e.readUnsignedInt(),H=e.readByte();n.info={time:N-Math.floor(egret.getTimer()/1e3),index:H},t.OnlineRewardsManager.ins().init()}return n},Object.defineProperty(i.prototype,"currentActId",{get:function(){return this._currentActId},set:function(t){this._currentActId=t},enumerable:!0,configurable:!0}),i.prototype.post_25_6=function(e){this.crossServerActID=0;var n=e.readUnsignedInt(),s=e.readByte(),a=i.ins().getActivitConf(n);if(a)switch(a.ActivityType){case t.ActvityInfoEnum.PActivity3:case t.ActvityInfoEnum.NightVoma:case t.ActvityInfoEnum.CrossServerChaos:case t.ActvityInfoEnum.CrossServerNightVoma:case t.ActvityInfoEnum.EscapeFromTrial:s==t.Operate.sPostRankData?this.post_RankData(e):s==t.Operate.sPostMyRankData?this.post_MyRankData(e):s==t.Operate.sNextAwardIndex&&this.post_NextAwardIndex(e);break;case t.ActvityInfoEnum.Inspire:case t.ActvityInfoEnum.CrossServerBoss:case t.ActvityInfoEnum.WorldBoss:s==t.Operate.sPostRankData?this.post_RankData(e):s==t.Operate.sPostMyRankData&&this.post_MyRankData(e);break;case t.ActvityInfoEnum.CrossServerShabak:s==t.Operate.sShaBakRank?this.post_shaBakRank(e):s==t.Operate.sShaBakMyRank?this.post_shaBakMyRank(e):s==t.Operate.sShaBakNextReward&&this.post_shaBakNextArard(e)}if(s==t.Operate.sPostFubenResult)this.post_currentActId(n);else if(s==t.Operate.sAppraisal){var r=e.readInt(),o=e.readByte();this.postCrytaldentifyResult({appid:r,issure:o})}else if(s==t.Operate.sWorship){var l=e.readByte(),o=e.readByte();this.postWroshipResult({idx:l,issure:o})}else if(s==t.Operate.sjingjiTime)this.post_jingjiTime(e);else if(s==t.Operate.sSendMonsterNum)this.post_TowerMonsterNum(e);else if(s==t.Operate.szhenyingTime)this.post_zhenyingTime(e);else if(s==t.Operate.sSendBonusNum)this.post_TowerBonusNum(e);else{if(s==t.Operate.sinspire){var h=e.readByte();if(0==h){var p=e.readByte(),u=e.readInt(),c=e.readInt();return{type:p,value:u,times:c}}switch(h){case 1:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips83);break;case 2:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips65);break;case 3:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips66);break;case 4:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips67);break;case 5:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips68)}return null}if(s==t.Operate.sOpenServerTreasure)this.post_extractResult(e);else if(s==t.Operate.sDefendTask)this.post_defendTaskResult(e);else if(s==t.Operate.sWorldBossTime)this.post_worldBossTime(e);else if(s==t.Operate.sDuoBaoTime)this.postDuoBaoCD(n,e);else if(s==t.Operate.sWarUpdate)this._warCurrency=e.readInt();else if(s==t.Operate.sKuaFu){var g=e.readByte();g?t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_Tips140[g-1]+"|"):(this.crossServerActID=n,t.KFManager.ins().s_33_1())}}},i.prototype.post_WarUpdate=function(t){for(var e=t.readShort(),i=0;e>i;i++)this._warShopInfo[t.readShort()]=t.readShort()},i.prototype.post_WarUpdateGoods=function(t){this._warShopInfo[t.readShort()]=t.readShort()},i.prototype.post_defendTaskResult=function(e){var i=e.readByte(),n=e.readUnsignedInt();0==i&&t.EventManager.ins().sendEvent(t.CompEvent.Clear_Timer_Event);var s={result:i,times:n};return s},i.prototype.post_TowerBonusNum=function(t){this.towerBonusNum=t.readByte()},i.prototype.post_TowerMonsterNum=function(t){this.towerMonsterNum=t.readByte()},i.prototype.post_currentActId=function(e){if(this.currentActId=e,10==this.currentActId){var i=this.getActivityInfo(this.currentActId);if(i.endTime){var n=t.GlobalData.serverTimeBase/1e3,s=i.endTime-n;s>0&&t.EventManager.ins().sendEvent(t.CompEvent.TimerEvent,[s])}}},i.prototype.post_shaBakRank=function(t){return this.post_RankData(t)},i.prototype.post_shaBakMyRank=function(t){return this.post_MyRankData(t)},i.prototype.post_shaBakNextArard=function(t){return[t.readUnsignedInt(),t.readByte()]},i.prototype.post_RankData=function(t){for(var e=[],i=t.readByte(),n=0;i>n;n++)e.push({playerId:t.readUnsignedInt(),score:t.readUnsignedInt(),name:t.readString(),playerReg:t.readNumber()});return e},i.prototype.post_MyRankData=function(t){return[t.readUnsignedInt(),t.readShort()]},i.prototype.post_NextAwardIndex=function(t){this.nextAward=t.readByte()},i.prototype.post_jingjiTime=function(t){t.readByte();this.jingjiTime=1e3*t.readUnsignedInt()+egret.getTimer()},i.prototype.post_worldBossTime=function(t){this.worldBossTime=1e3*t.readUnsignedInt()+egret.getTimer()},i.prototype.post_zhenyingTime=function(t){t.readByte();this.zhenyingTime=1e3*t.readUnsignedInt()+egret.getTimer()},i.prototype.postCrytaldentifyResult=function(t){return t},i.prototype.postWroshipResult=function(t){return t},i.prototype.postDuoBaoCD=function(e,i){var n=Math.floor(t.GlobalFunc.formatMiniDateTime(i.readInt())/1e3);return{ID:e,time:n}},i.prototype.post_extractResult=function(t){for(var e,i=t.readByte(),n=[],s=0;i>s;s++)e=new Object,e.type=t.readUnsignedInt(),e.id=t.readUnsignedInt(),e.count=t.readUnsignedInt(),n.push(e);return n},i.prototype.post_25_7=function(e){var n=new Object,s=e.readInt(),a=e.readByte();n.actid=s,n.issuccess=a;var r=i.ins().getActivitConf(s);if(r)if(3==r.ActivityType||r.ActivityType==t.ActvityInfoEnum.NightVoma||r.ActivityType==t.ActvityInfoEnum.CrossServerNightVoma||r.ActivityType==t.ActvityInfoEnum.CrossServerChaos)n.source=e.readUnsignedInt(),n.rank=e.readShort();else if(r.ActivityType==t.ActvityInfoEnum.Inspire||r.ActivityType==t.ActvityInfoEnum.CrossServerBoss||r.ActivityType==t.ActvityInfoEnum.WorldBoss)n.first=e.readString(),n.second=e.readString(),n.third=e.readString(),n.skill=e.readString(),n.islast=e.readUnsignedShort(),n.rank=e.readUnsignedShort();else if(r.ActivityType==t.ActvityInfoEnum.EscapeFromTrial){n.rank=e.readUnsignedInt(),n.first=e.readString(),n.second=e.readString(),n.third=e.readString();for(var o=e.readByte(),l=[],h=void 0,p=0;o>p;p++)h=new Object,h.type=e.readUnsignedInt(),h.id=e.readUnsignedInt(),h.count=e.readUnsignedInt(),l.push(h);n.list=l}else r.ActivityType==t.ActvityInfoEnum.SecretLandTreasure&&(n.secretBoxScore=e.readUnsignedInt(),n.wordsBoxScore=e.readUnsignedInt(),n.materialsBoxScore=e.readUnsignedInt());this.resuleInfo=n,t.ViewManager.ins().open(t.FightResultWin,n)},i.prototype.actvityShowFun=function(e,i){var n=t.GlobalConfig["Activity"+e+"Config"];if(n&&n[i]){if(n[i].showFun){var s=n[i].showFun.split("."),a=egret.getDefinitionByName("app."+s[1]);if(a&&a.ins&&a.ins()[s[2]])return a.ins()[s[2]](n[i].showParam)}return!n[i].isCheckTime||this.actvityDatas[n[i].Id]||this.pActvityDatas[n[i].Id]?t.ViewManager.ins().isCheckOpen(n[i].showParam):!1}return!1},i.prototype.actvityByIdShowFun=function(t){var e,i=this.getActivitConf(t);return i&&(e=this.actvityShowFun(i.ActivityType,t)),e},i.prototype.enterActivity=function(e){var i=this.getActivitConf(e);if(i){var n=this.getActivityConfigById(e);if(n){if(n.toflyid)return void t.MoveMgr.ins().s_1_5(n.toflyid.FlyTable,n.toflyid.Flyid);if(n.openFun){var s=n.openFun.split("."),a=egret.getDefinitionByName("app."+s[0]);if(a&&a.ins&&a.ins()[s[1]])return void a.ins()[s[1]](n.openParam)}if(n.openView&&n.openParam)return void(t.ViewManager.ins().isCheckOpen(n.openParam)?t.ViewManager.ins().isShow(n.openView)||t.ViewManager.ins().open(n.openView,n.Id):t.ViewManager.ins().openSystemTips(n.openParam));if(t.ViewManager.ins().isCheckOpen(n.openParam)){var r=this.getActivityInfo(e);if(r){var o=t.EntityMgr.ins().getPayer;o&&o.propSet&&(o.propSet.getState()&t.ActorState.DEATH?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips102):this.send_25_1(e,t.Operate.cEnterFuBen))}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips62)}else t.ViewManager.ins().openSystemTips(n.openParam)}}},i.prototype.getActivitConf=function(e){return t.GlobalConfig.ActivitiesConf[e]||t.GlobalConfig.PActivitiesConf[e]||t.GlobalConfig.ActivitiesShowConf[e]},i.prototype.getActivityInfo=function(t){return this.actvityDatas[t]||this.pActvityDatas[t]},i.prototype.getActivityConfig=function(e,i){var n=t.GlobalConfig["Activity"+e+"Config"];return n&&n[i]?n[i]:n?n:null},i.prototype.getActivityConfigById=function(t){var e=this.getActivitConf(t);return e?this.getActivityConfig(e.ActivityType,t):null},i.prototype.getActivityPayRed=function(){},i.prototype.getActivityPayRedById=function(e){var n=i.ins().getActivitConf(e);if(n){var s=i.ins().getActivityConfig(n.ActivityType,e);if(s){var a=void 0;switch(n.ActivityType){case t.ActvityInfoEnum.CumulativeRecharge:if(a=i.ins().getActivityInfo(e),a&&a.info)for(var r=0;r<a.info.length;r++)if(a.info[r].type&&a.info[r].value>=s.GiftTable[a.info[r].id].value)return 1;break;case t.ActvityInfoEnum.Discount:a=i.ins().getActivityInfo(e);var o=0;if(a&&a.info){for(var r=0;r<a.info.length;r++)if(a.info[r].times&&s.GiftTable[a.info[r].id].redType){if(1==s.GiftTable[a.info[r].id].redType)return 1;o=2}return o}}}}return 0},i.prototype.getFristChargeRedState=function(){var e=this.getActivityInfo(t.ActvityInfoEnum.firstCharge);return e?e.redDot:0},i.prototype.post_25_8=function(e){var n=e.readUnsignedInt();i.ins().send_25_2(n);var s=t.GlobalConfig.ActivityAutoConfig;for(var a in s){var r=s[a];if(r&&r.actId&&r.actId==n)return void t.DefaultMgr.ins().showCrossServerView(r.id)}t.ViewManager.ins().open(t.ActivityTipsWin,n)},i.prototype.post_25_9=function(e){this.YYInfo=new t.YYInfoData,this.YYInfo.readYYInfo(e)},i.prototype.post_25_10=function(e){this.YYMemberInfo=new t.YYMemberInfoData,this.YYMemberInfo.readYYInfo(e)},i.prototype.post_25_11=function(t){var e=new Object;e.vipGift=t.readUnsignedInt(),e.dailyGift=t.readUnsignedInt(),this.YYchaowanInfo=e},i.prototype.post_25_12=function(t){this.EscapeRoleNum=t.readUnsignedShort();for(var e=0;e<this.EscapeRoleNum;e++){var i=t.readUnsignedInt();this.EscapeRoleInfo.indexOf(i)<0&&this.EscapeRoleInfo.push(i)}},i.prototype.post_25_15=function(t){this.secretBoxScore=t.readUnsignedInt(),this.wordsBoxScore=t.readUnsignedInt(),this.materialsBoxScore=t.readUnsignedInt()},i.prototype.send_25_3=function(){var t=this.getBytes(3);this.sendToServer(t)},i.prototype.send_25_4=function(t){var e=this.getBytes(4);e.writeByte(t),this.sendToServer(e)},i.prototype.send_25_5=function(t){var e=this.getBytes(5);e.writeByte(t),this.sendToServer(e)},i.prototype.send_25_6=function(t){var e=this.getBytes(6);e.writeByte(t),this.sendToServer(e)},i.prototype.send_25_7=function(t){var e=this.getBytes(7);e.writeByte(t),this.sendToServer(e)},i.prototype.send_25_8=function(t){var e=this.getBytes(8);e.writeByte(t),this.sendToServer(e)},i.prototype.send_25_9=function(t){var e=this.getBytes(9);e.writeByte(t),this.sendToServer(e)},i.prototype.send_25_10=function(t){var e=this.getBytes(10);e.writeByte(t),this.sendToServer(e)},i.prototype.send_25_11=function(t){var e=this.getBytes(11);e.writeByte(t),this.sendToServer(e)},i.prototype.getAppraisalRed=function(e){var n=t.GlobalConfig.AppraisalMainConfig[e],s=i.ins().getActivityInfo(e);if(s&&s.info&&s.info.item)for(var a in n){var r=n[a];if(4!=r.id&&3!=r.id&&2!=r.id){var o=s.info.item[r.id-1];if(r.gold){var l=t.BagMgr.ins().getItemCountById(r.number[0].id),h=t.CurrencyUtils.getCurrency(r.gold[0].type);if(l>=r.number[0].count&&o.allNum>0&&h>=r.gold[0].count)return!0}}}return!1},i.prototype.updateYYRed=function(e,n){var s,a=1,r=0;if(1==e){s=i.ins().YYInfo;var o=void 0,l=0,h=t.EntityMgr.ins().getPayer;if(h&&h.propSet&&(l=h.propSet.getLevel()),1==n){if(10001==Main.gameParameter.pfID&&window.loginWay&&s&&0==s.YYNoviceGift)return 1}else if(2==n){if(o=t.GlobalConfig.YYMemberConfig.loginGift,10001==Main.gameParameter.pfID&&window.loginWay&&o&&s)for(var p in o){if(s.YYLoginDay>=a&&(r=t.MathUtils.getValueAtBit(s.YYLoginGift,a),!r))return 1;a++}}else if(3==n){if(o=t.GlobalConfig.YYMemberConfig.levelGift,10001==Main.gameParameter.pfID&&window.loginWay&&o&&s)for(var p in o){if(l>=o[p].lvl&&(r=t.MathUtils.getValueAtBit(s.YYLevelGift,a),!r))return 1;a++}}else if(4==n&&10001==Main.gameParameter.pfID&&window.loginWay&&(o=t.GlobalConfig.YYMemberConfig.nobleGift,o&&s))for(var p in o){if(s.YYIdentity>=a&&(r=t.MathUtils.getValueAtBit(s.YYNobleGift,a),!r))return 1;a++}}else if(2==e){s=i.ins().YYMemberInfo;var u=void 0;if((1==n||2==n||3==n)&&s&&s.isYYVip){u=t.GlobalConfig.YYVIPConfig.newServerGiftDisplay;for(var p in u)if(n-1==+p)for(var c in u[p])if(s.YYVipLv>=u[p][c].viplvl&&(r=t.MathUtils.getValueAtBit(s.newServerGift,u[p][c].index),!r))return 1}}else if(3==e){var g=void 0,d=i.ins().YYchaowanInfo,m=0,h=t.EntityMgr.ins().getPayer;if(h&&h.propSet&&(m=h.propSet.getVip()),d)if(1==n){g=t.GlobalConfig.GameVIPConfig.vipGiftDisplay;for(var p in g)if(m>=g[p].viplvl&&(r=t.MathUtils.getValueAtBit(d.vipGift,g[p].index),!r))return 1}else if(2==n){g=t.GlobalConfig.GameVIPConfig.dailyGiftDisplay;for(var p in g)if(m>=g[p].viplvl&&(r=t.MathUtils.getValueAtBit(d.dailyGift,g[p].index),!r))return 1}}else if(4==e){var f=t.FuLi4366Mgr.ins().ku25GameInfo;if(1==n){if(window.loginWay&&!f.boxDown)return 1}else if(2==n){if(window.loginWay&&t.FuLi4366Mgr.ins().ku25GameInfo&&!t.FuLi4366Mgr.ins().ku25GameInfo.everyDayLogin)return 1}else if(3==n){if(f){var v=t.GlobalConfig.LoginKU25Config;for(var p in v){var _=t.MathUtils.getValueAtBit(f.everyDayPay,v[p].id);if(!_&&f.todayPayNum/10>=v[p].Target)return 1}}}else if(5==n&&window.userInfo&&2==+window.userInfo.adult&&!f.isCard)return 1}return 0},i.prototype.send_25_15=function(){var t=this.getBytes(15);this.sendToServer(t)},i}(t.BaseSystem);t.ActvityMgr=e,__reflect(e.prototype,"app.ActvityMgr")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActvityData=e,__reflect(e.prototype,"app.ActvityData")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.prototype.read=function(t){this.rankAry=[];for(var e=t.readByte(),i=0;e>i;i++)this.rankAry.push({playerId:t.readUnsignedInt(),score:t.readUnsignedInt(),name:t.readString()});this.score=t.readUnsignedInt(),this.rank=t.readShort()},t}();t.ActvityData3=e,__reflect(e.prototype,"app.ActvityData3")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.YYIdentity=0,this.YYNoviceGift=0,this.YYLoginDay=0,this.YYLoginGift=0,this.YYLevelGift=0,this.YYNobleGift=0}return t.prototype.readYYInfo=function(t){this.YYIdentity=t.readByte(),this.YYNoviceGift=t.readByte(),this.YYLoginDay=t.readShort(),this.YYLoginGift=t.readUnsignedInt(),this.YYLevelGift=t.readUnsignedInt(),this.YYNobleGift=t.readUnsignedInt()},t}();t.YYInfoData=e,__reflect(e.prototype,"app.YYInfoData")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.isYYVip=0,this.YYVipLv=1,this.YYExpiredTime=0,this.newServerGift=0,this.everyDayGift=0,this.everyWeekGift=0}return t.prototype.readYYInfo=function(t){this.isYYVip=t.readByte(),this.YYVipLv=t.readByte(),this.YYExpiredTime=t.readNumber(),this.newServerGift=t.readUnsignedInt(),this.everyDayGift=t.readUnsignedInt(),this.everyWeekGift=t.readUnsignedInt()},t}();t.YYMemberInfoData=e,__reflect(e.prototype,"app.YYMemberInfoData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._giftInfo=null,i._qqGiftInfo=null,i._actorValidationInfo=null,i.isDown=0,i.commonIsDown=0,i.phoneSelect=!1,i.cardSelect=!1,i.actorInfo=null,i.ku25GameInfo={},i.sysId=t.PackageID.platform4366,i.regNetMsg(1,i.post_32_1),i.regNetMsg(2,i.post_32_2),i.regNetMsg(3,i.post_32_3),i.regNetMsg(4,i.post_32_4),i.regNetMsg(5,i.post_32_5),i.regNetMsg(15,i.post_32_15),i.regNetMsg(16,i.post_32_16),i.regNetMsg(17,i.post_32_17),i.regNetMsg(18,i.post_32_18),i.regNetMsg(19,i.post_32_19),i.regNetMsg(20,i.post_32_20),i.regNetMsg(24,i.post_32_24),i.regNetMsg(25,i.post_32_25),i.regNetMsg(26,i.post_32_26),i.regNetMsg(27,i.post_32_27),i.regNetMsg(28,i.post_32_28),i.regNetMsg(29,i.post_32_29),i.regNetMsg(35,i.post_32_35),i.regNetMsg(38,i.post_updatePlatformFuli),i.regNetMsg(40,i.post_updatePlatformFuli),i.regNetMsg(42,i.post_updatePlatformFuli),i.regNetMsg(44,i.post_updatePlatformFuli),i.regNetMsg(46,i.post_updatePlatformFuli),i.regNetMsg(48,i.post_updatePlatformFuli),i.regNetMsg(51,i.post_updatePlatformFuli),i.regNetMsg(56,i.post_updatePlatformFuli),i.regNetMsg(61,i.post_updatePlatformFuli),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.post_updatePlatformFuli=function(e){t.PlatformFuliManager.ins().initPlatformFuliInfo(e),console.log("更新平台福利信息~~")},Object.defineProperty(i.prototype,"giftInfo",{get:function(){return this._giftInfo},set:function(t){this._giftInfo=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"QQGiftInfo",{get:function(){return this._qqGiftInfo},set:function(t){this._qqGiftInfo=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actorValidationInfo",{get:function(){return this._actorValidationInfo},set:function(t){this._actorValidationInfo=t},enumerable:!0,configurable:!0}),i.prototype.send_32_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.post_32_1=function(t){var e=t.readByte(),n=t.readByte(),s=t.readByte(),a=t.readShort(),r=t.readUnsignedInt(),o=t.readByte();i.ins().giftInfo={isWxGift:e,isPhoneGift:n,isCardGift:s,loginDayNum:a,isLoginGift:r,isMicro:o}},i.prototype.send_32_2=function(t){var e=this.getBytes(2);e.writeByte(t),this.sendToServer(e)},i.prototype.send_32_3=function(){var t=this.getBytes(3);this.sendToServer(t)},i.prototype.send_32_4=function(){var t=this.getBytes(4);this.sendToServer(t)},i.prototype.send_32_5=function(t){var e=this.getBytes(5);e.writeByte(t),this.sendToServer(e)},i.prototype.send_32_6=function(){var t=this.getBytes(6);this.sendToServer(t)},i.prototype.getActorInfo=function(){this.httpReq=new egret.HttpRequest,this.httpReq.addEventListener(egret.Event.COMPLETE,this.completeFunction,this),this.httpReq.addEventListener(egret.IOErrorEvent.IO_ERROR,this.errorFunction,this),this.httpReq.open(window.getActorInfoUrl+"?user_name="+Main.gameParameter.userInfo.uid,egret.HttpMethod.GET),this.httpReq.send()},i.prototype.completeFunction=function(t){var e=t.target;if(null!=e.response||""!=e.response){var n=JSON.parse(e.response);this.actorInfo={},this.actorInfo.isBingPhone=n.BIND_CELLPHONE,this.actorInfo.isBingcard=n.is_adult,this.actorInfo.isBingwx=n.IS_OPENID,i.ins().actorValidationInfo=this.actorInfo,i.ins().postRuleIconRed()}},i.prototype.errorFunction=function(t){},i.prototype.postRuleIconRed=function(){},i.prototype.getRedPoint=function(e){if(1==e)return i.ins().giftInfo&&Main.gameParameter.userInfo&&(0==i.ins().giftInfo.isPhoneGift&&1==Main.gameParameter.userInfo.isBingPhone||0==i.ins().giftInfo.isPhoneGift&&!i.ins().phoneSelect)?1:0;if(2==e)return i.ins().giftInfo&&Main.gameParameter.userInfo&&(0==i.ins().giftInfo.isCardGift&&1==Main.gameParameter.userInfo.isBingcard||0==i.ins().giftInfo.isCardGift&&!i.ins().cardSelect)?1:0;if(3==e){if(i.ins().giftInfo&&1==i.ins().giftInfo.isPhoneGift&&1==i.ins().giftInfo.isCardGift){var n=t.GlobalConfig.Login4366Config;for(var s in n)if(i.ins().giftInfo.loginDayNum>=n[s].day){var a=t.MathUtils.getValueAtBit(i.ins().giftInfo.isLoginGift,n[s].day);if(!a)return 1}}return 0}},i.prototype.send_32_7=function(){var t=this.getBytes(7);this.sendToServer(t)},i.prototype.post_32_2=function(t){var e=t.readByte(),n=t.readByte(),s=t.readUnsignedInt();i.ins().QQGiftInfo={isActiveGift:e,ifRegisterGift:n,isLevelGift:s}},i.prototype.send_32_8=function(){var t=this.getBytes(8);this.sendToServer(t)},i.prototype.send_32_9=function(t){var e=this.getBytes(9);e.writeByte(t),this.sendToServer(e)},i.prototype.send_32_10=function(){var t=this.getBytes(10);this.sendToServer(t)},i.prototype.updateQQRed=function(e,n){if(t.isQQpf()){var s,a=1,r=0;if(1==e){s=i.ins().QQGiftInfo;var o=void 0,l=0,h=t.EntityMgr.ins().getPayer;if(h&&h.propSet&&(l=h.propSet.getLevel()),1==n){if(s&&0==s.ifRegisterGift)return 1}else if(2==n){if(o=t.GlobalConfig.LoginQQConfig,o&&s)for(var p in o){if(l>=o[p].level&&(r=t.MathUtils.getValueAtBit(s.isLevelGift,a),!r))return 1;
a++}}else if(3==n&&s&&0==s.isActiveGift)return 1}}return 0},i.prototype.post_32_3=function(e){this.fuli360Info=this.fuli360Info||new t.Fuli360Info,this.fuli360Info.readFuliInfo(e)},i.prototype.send_32_11=function(){var t=this.getBytes(11);this.sendToServer(t)},i.prototype.send_32_14=function(t,e){var i=this.getBytes(14);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},i.prototype.getRed_dawanjia=function(){return this.fuli360Info&&this.fuli360Info.getRed_dawanjia()?1:0},i.prototype.getRed_attestation=function(){return this.fuli360Info&&this.fuli360Info.getRed_attestation()?1:0},i.prototype.post_32_4=function(t){var e=t.readByte();i.ins().fuli7gameInfo={isWxGift:e}},i.prototype.send_32_12=function(t){var e=this.getBytes(12);e.writeByte(t),this.sendToServer(e)},i.prototype.post_32_5=function(e){this.fuliLuDaShiInfo=this.fuliLuDaShiInfo||new t.FuliLuDaShiInfo,this.fuliLuDaShiInfo.readFuliInfo(e)},i.prototype.send_32_13=function(t,e,i){var n=this.getBytes(13);n.writeByte(t),n.writeByte(e),n.writeByte(i),this.sendToServer(n)},i.prototype.send_32_15=function(t,e,i){var n=this.getBytes(15);n.writeInt(t),n.writeInt(e),n.writeInt(0),n.writeInt(i),this.sendToServer(n)},i.prototype.post_32_15=function(e){this.fuli37Info=this.fuli37Info||new t.Fuli37Info,this.fuli37Info.readFuliInfo(e),i.ins().post37Gift()},i.prototype.send_32_16=function(){var t=this.getBytes(16);this.sendToServer(t)},i.prototype.post_32_16=function(t){var e=t.readByte();1==e&&(this.fuli37Info.microGiftFlag=1,i.ins().post37Gift())},i.prototype.send_32_17=function(){var t=this.getBytes(17);this.sendToServer(t)},i.prototype.post_32_17=function(t){var e=t.readByte();1==e&&(this.fuli37Info.indulgeGiftFlag=1,i.ins().post37Gift())},i.prototype.send_32_18=function(){var t=this.getBytes(18);this.sendToServer(t)},i.prototype.post_32_18=function(t){var e=t.readByte();1==e&&(this.fuli37Info.bindingGiftFlag=1,i.ins().post37Gift())},i.prototype.send_32_19=function(t){var e=this.getBytes(19);e.writeByte(t),this.sendToServer(e)},i.prototype.post_32_19=function(t){var e=t.readByte(),n=t.readInt();1==e&&(this.fuli37Info.dayGiftFlag=n,i.ins().post37Gift())},i.prototype.send_32_20=function(t){var e=this.getBytes(20);e.writeByte(t),this.sendToServer(e)},i.prototype.post_32_20=function(t){var e=t.readByte(),n=t.readInt();1==e&&(this.fuli37Info.levelGiftFlag=n,i.ins().post37Gift())},i.prototype.post37Gift=function(){},i.prototype.send_32_24=function(t){var e=this.getBytes(24);e.writeByte(t),this.sendToServer(e)},i.prototype.post_32_24=function(e){this.fuliSogouInfo=this.fuliSogouInfo||new t.FuliSogouInfo,this.fuliSogouInfo.readFuliInfo(e),i.ins().postSogouGift()},i.prototype.send_32_25=function(){var t=this.getBytes(25);this.sendToServer(t)},i.prototype.post_32_25=function(t){var e=t.readByte();1==e&&(this.fuliSogouInfo.microGiftFlag=1,i.ins().postSogouGift())},i.prototype.send_32_26=function(){var t=this.getBytes(26);this.sendToServer(t)},i.prototype.post_32_26=function(t){var e=t.readByte();1==e&&(this.fuliSogouInfo.noviceGiftFlag=1,i.ins().postSogouGift())},i.prototype.send_32_27=function(t){var e=this.getBytes(27);e.writeByte(t),this.sendToServer(e)},i.prototype.post_32_27=function(t){var e=t.readByte(),n=t.readInt();1==e&&(this.fuliSogouInfo.loginGiftFlag=n,i.ins().postSogouGift())},i.prototype.send_32_28=function(t){var e=this.getBytes(28);e.writeByte(t),this.sendToServer(e)},i.prototype.post_32_28=function(t){var e=t.readByte(),n=t.readInt();1==e&&(this.fuliSogouInfo.levelGiftFlag=n,i.ins().postSogouGift())},i.prototype.send_32_29=function(){var t=this.getBytes(29);this.sendToServer(t)},i.prototype.post_32_29=function(t){var e=t.readByte();1==e&&(this.fuliSogouInfo.phoneBindGiftFlag=1,i.ins().postSogouGift())},i.prototype.postSogouGift=function(){},i.prototype.send_32_35=function(t){var e=this.getBytes(35);e.writeByte(t),this.sendToServer(e)},i.prototype.send_32_36=function(t,e){void 0===e&&(e=0);var i=this.getBytes(36);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},i.prototype.post_32_35=function(t){i.ins().ku25GameInfo={todayPayNum:t.readUnsignedInt(),boxDown:t.readByte(),isCard:t.readByte(),everyDayLogin:t.readByte(),everyDayPay:t.readUnsignedInt(),wxGift:t.readByte()}},i.prototype.send_32_37=function(t){var e=this.getBytes(37);e.writeByte(t),this.sendToServer(e)},i.prototype.send_32_38=function(t){var e=this.getBytes(38);e.writeByte(t),this.sendToServer(e)},i.prototype.send_32_39=function(t){var e=this.getBytes(39);e.writeByte(t),this.sendToServer(e)},i.prototype.send_32_40=function(t){var e=this.getBytes(40);e.writeByte(t),this.sendToServer(e)},i.prototype.send_32_41=function(){var t=this.getBytes(41);this.sendToServer(t)},i.prototype.send_32_42=function(){var t=this.getBytes(42);this.sendToServer(t)},i.prototype.send_32_43=function(){var e=gamelib.DeviceUtils.IsNative?2:t.PlatformFuliManager.ins().platformFuliData.loginWay,i=this.getBytes(43);i.writeByte(e),this.sendToServer(i)},i.prototype.send_32_44=function(t){var e=this.getBytes(44);e.writeByte(t),this.sendToServer(e)},i.prototype.send_32_45=function(){var t=this.getBytes(45);this.sendToServer(t)},i.prototype.send_32_46=function(t){var e=this.getBytes(46);e.writeByte(t),this.sendToServer(e)},i.prototype.send_32_47=function(){var t=this.getBytes(47);this.sendToServer(t),console.log("send_32_47")},i.prototype.send_32_48=function(t){var e=this.getBytes(48);e.writeByte(t),this.sendToServer(e),console.log("send_32_48  type:"+t)},i.prototype.send_32_50=function(){var t=this.getBytes(50);this.sendToServer(t),console.log("send_32_50")},i.prototype.send_32_51=function(t){var e=this.getBytes(51);e.writeByte(t),this.sendToServer(e),console.log("send_32_51  type:"+t)},i.prototype.send_32_55=function(t){var e=this.getBytes(55);e.writeByte(t),this.sendToServer(e),console.log("send_32_55")},i.prototype.send_32_56=function(t,e){void 0===e&&(e=0);var i=this.getBytes(56);i.writeByte(t),i.writeByte(e),this.sendToServer(i),console.log("send_32_56  type:"+t+"  smallType:"+e)},i.prototype.send_32_60=function(){var t=this.getBytes(60);this.sendToServer(t),console.log("send_32_60")},i.prototype.send_32_61=function(t,e){void 0===e&&(e=0);var i=this.getBytes(61);i.writeByte(t),i.writeByte(e),this.sendToServer(i),console.log("send_32_61  type:"+t+"   smallType:"+e)},i}(t.BaseSystem);t.FuLi4366Mgr=e,__reflect(e.prototype,"app.FuLi4366Mgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._currPlatformFuliData=null,t._currPlatformFuliInfo=null,t._currPlatformFuliViewData=null,t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.initPlatformFuli=function(){switch(Main.gameParameter.pfID){case t.PlatFormID.YY:t.DefaultMgr.ins().s_0_25_YY(2);break;case t.PlatFormID.PF4366:t.FuLi4366Mgr.ins().send_32_1(),t.FuLi4366Mgr.ins().send_32_5(window.loginWay);break;case t.PlatFormID.QQGame:var e=0,i=0,n=0,s=t.OtherMgr.ins().getQQBlueInfo();e=s[0],i=s[1],n=s[2],t.OtherMgr.ins().send_26_6(e,i,n),t.FuLi4366Mgr.ins().send_32_7(),t.OtherMgr.ins().send_26_7();break;case t.PlatFormID.PF360:t.DefaultMgr.ins().s_0_30_360();break;case t.PlatFormID.PF7game:t.DefaultMgr.ins().s_0_31_7game();break;case t.PlatFormID.PFLuDaShi:t.FuLi4366Mgr.ins().send_32_12(t.FuliLuDaShiInfo.loginWay);break;case t.PlatFormID.PFAQIYI:this._currPlatformFuliData=this._currPlatformFuliData||new t.FuliIqiyiData;break;case t.PlatFormID.PFQIDIAN:this._currPlatformFuliData=this._currPlatformFuliData||new t.FuliQidianData;break;case t.PlatFormID.PFYAODOU:this._currPlatformFuliData=this._currPlatformFuliData||new t.FuliYaodouData;break;case t.PlatFormID.HUYU37:t.FuLi4366Mgr.ins().send_32_15(t.Fuli37Info.vipLevel,t.Fuli37Info.loginWay,t.Fuli37Info.fcm);break;case t.PlatFormID.PFKu25:t.FuLi4366Mgr.ins().send_32_35(window.loginWay);break;case t.PlatFormID.SOUGOU:t.FuLi4366Mgr.ins().send_32_24(t.FuliSogouInfo.loginWay);break;case t.PlatFormID.FeiHuo:this._currPlatformFuliData=this._currPlatformFuliData||new t.FuliFeihuoData;break;case t.PlatFormID.TanWan:this._currPlatformFuliData=this._currPlatformFuliData||new t.FuliTanwanData;break;case t.PlatFormID.GeMen:this._currPlatformFuliData=this._currPlatformFuliData||new t.FuliGame2Data;break;case t.PlatFormID.PF2144Game:this._currPlatformFuliData=this._currPlatformFuliData||new t.Fuli2144Data;break;case t.PlatFormID.teeqee:this._currPlatformFuliData=this._currPlatformFuliData||new t.FuliKuaiwanData;break;case t.PlatFormID.shunwang:this._currPlatformFuliData=this._currPlatformFuliData||new t.FuliShunwangData;break;case t.PlatFormID.xunwan:this._currPlatformFuliData=this._currPlatformFuliData||new t.FuliXunwanData}this._currPlatformFuliData&&this._currPlatformFuliData.init()},i.prototype.initPlatformFuliInfo=function(e){if(void 0===e&&(e=null),!this._currPlatformFuliInfo)switch(Main.gameParameter.pfID){case t.PlatFormID.PFAQIYI:this._currPlatformFuliInfo=new t.FuliIqiyiInfo;break;case t.PlatFormID.PFQIDIAN:this._currPlatformFuliInfo=new t.FuliQidianInfo;break;case t.PlatFormID.PFYAODOU:this._currPlatformFuliInfo=new t.FuliYaodouInfo;break;case t.PlatFormID.FeiHuo:this._currPlatformFuliInfo=new t.FuliFeihuoInfo;break;case t.PlatFormID.TanWan:this._currPlatformFuliInfo=new t.FuliTanwanInfo;break;case t.PlatFormID.GeMen:this._currPlatformFuliInfo=new t.FuliGame2Info;break;case t.PlatFormID.PF2144Game:this._currPlatformFuliInfo=new t.Fuli2144Info;break;case t.PlatFormID.teeqee:this._currPlatformFuliInfo=new t.FuliKuaiwanInfo;break;case t.PlatFormID.shunwang:this._currPlatformFuliInfo=new t.FuliShunwangInfo;break;case t.PlatFormID.xunwan:this._currPlatformFuliInfo=new t.FuliXunwanInfo}this._currPlatformFuliInfo&&e&&this._currPlatformFuliInfo.readFuliInfo(e)},i.prototype.initPlatformFuliViewData=function(){if(!this._currPlatformFuliViewData)switch(Main.gameParameter.pfID){case t.PlatFormID.PFAQIYI:this._currPlatformFuliViewData=new t.FuliIqiyiViewData;break;case t.PlatFormID.PFQIDIAN:this._currPlatformFuliViewData=new t.FuliQidianViewData;break;case t.PlatFormID.PFYAODOU:this._currPlatformFuliViewData=new t.FuliYaodouViewData;break;case t.PlatFormID.FeiHuo:this._currPlatformFuliViewData=new t.FuliFeihuoViewData;break;case t.PlatFormID.TanWan:this._currPlatformFuliViewData=new t.FuliTanwanViewData;break;case t.PlatFormID.PF2144Game:this._currPlatformFuliViewData=new t.Fuli2144ViewData;break;case t.PlatFormID.teeqee:this._currPlatformFuliViewData=new t.FuliKuaiwanViewData;break;case t.PlatFormID.shunwang:this._currPlatformFuliViewData=new t.FuliShunwangViewData;break;case t.PlatFormID.xunwan:this._currPlatformFuliViewData=new t.FuliXunwanViewData}},Object.defineProperty(i.prototype,"platformFuliData",{get:function(){return this._currPlatformFuliData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"platformFuliInfo",{get:function(){return this._currPlatformFuliInfo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"platformFuliViewData",{get:function(){return this._currPlatformFuliViewData||(this.initPlatformFuliInfo(),this.initPlatformFuliViewData()),this._currPlatformFuliViewData},enumerable:!0,configurable:!0}),i}(t.BaseClass);t.PlatformFuliManager=e,__reflect(e.prototype,"app.PlatformFuliManager")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getGiftInfo=function(){t.FuLi4366Mgr.ins().send_32_47()},Object.defineProperty(i.prototype,"phoneBindState",{get:function(){return window.userInfo.bind_cellphone?parseInt(window.userInfo.bind_cellphone):0},enumerable:!0,configurable:!0}),i.prototype.getReward_phoneBindGift=function(){var e=t.GlobalConfig.Platform2144Config;return e&&e.bindPhoneReward?e.bindPhoneReward:[]},i.prototype.onGetReward_phoneBindGift=function(){t.FuLi4366Mgr.ins().send_32_48(1)},Object.defineProperty(i.prototype,"indulgeState",{get:function(){return window.userInfo.adult?parseInt(window.userInfo.adult):0},enumerable:!0,configurable:!0}),i.prototype.getReward_indulgeGift=function(){var e=t.GlobalConfig.Platform2144Config;return e&&e.authentication?e.authentication:[]},i.prototype.onGetReward_indulgeGift=function(){t.FuLi4366Mgr.ins().send_32_48(2)},i}(t.PlatformFuliData);t.Fuli2144Data=e,__reflect(e.prototype,"app.Fuli2144Data")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initData=function(){var e=t.PlatformFuliManager.ins().platformFuliData;e&&(this._phoneBindState=e.phoneBindState,this._indulgeState=e.indulgeState)},i.prototype.readFuliInfo=function(t){this._phoneBindGiftFlag=t.readByte(),this._indulgeGiftFlag=t.readByte(),console.log("this._phoneBindGiftFlag:"+this._phoneBindGiftFlag),console.log("this._indulgeGiftFlag:"+this._indulgeGiftFlag)},i.prototype.getRed_viewGift=function(){return this.getRed_phoneBindGift()?!0:this.getRed_indulgeGift()?!0:!1},i}(t.PlatformFuliInfo);t.Fuli2144Info=e,__reflect(e.prototype,"app.Fuli2144Info")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getViewData=function(){return{titleStr:"biaoti_2144fuli"}},i.prototype.getGiftsViewData=function(){var e=t.PlatformFuliManager.ins().platformFuliInfo;return[{id:1,tabLab:t.LanguageUtils.language_Omission_txt117,redFunc:e.getRed_phoneBindGift.bind(e),viewClass:t.PlatformFuliBindingGift,viewData:{skinName:"PlatformFuliBindingGiftSkin"}},{id:2,tabLab:t.LanguageUtils.language_Omission_txt118,redFunc:e.getRed_indulgeGift.bind(e),viewClass:t.PlatformFuliIndulgeGift,viewData:{skinName:"PlatformFuliIndulgeGiftSkin"}}]},i.prototype.getSuperVipGiftData=function(){return{showLimit:t.GlobalConfig.Platform2144Config.limit,qqStr:"800052276",copyValue:"800052276",skinName:"Fuli2144SuperVipGiftSkin"}},i}(t.PlatformFuliViewData);t.Fuli2144ViewData=e,__reflect(e.prototype,"app.Fuli2144ViewData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Fuli360AttestationWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.FuLi4366TabItemView,this.tabBar.addEventListener(egret.Event.CHANGE,this.updatePag,this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.giftInfo=t.FuLi4366Mgr.ins().fuli360Info;var n=[{txt:t.LanguageUtils.language_Omission_txt118}];this.tabBar.dataProvider=new eui.ArrayCollection(n),this.tabBar.selectedIndex=0,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.itemList.itemRenderer=t.FuLi4366ItemView;var s=t.GlobalConfig.Platform360Config;s&&s.authentication&&(this.itemList.dataProvider=new eui.ArrayCollection(s.authentication)),this.observe(t.FuLi4366Mgr.ins().post_32_3,this.updateInfo),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.getBtn,this.onClick),t.MouseScroller.bind(this.btnScroller),this.updateInfo()},i.prototype.updateInfo=function(){this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.giftInfo&&(0==this.giftInfo.fcmGiftFlag?(this.getBtn.visible=!0,this.redPoint.visible=this.giftInfo.getRed_attestation()):this.receiveImg.visible=!0),0==this.giftInfo.fcm?this.descLab.text=t.LanguageUtils.language_Omission_txt160:this.descLab.text=t.LanguageUtils.language_Omission_txt161},i.prototype.updatePag=function(){},i.prototype.onClick=function(e){switch(e.currentTarget){case this.getBtn:this.giftInfo&&(0==this.giftInfo.fcmGiftFlag?1==this.giftInfo.fcm?t.FuLi4366Mgr.ins().send_32_14(1,1):window.ActorInfoFunction&&window.ActorInfoFunction():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips152));break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.btnScroller),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.getBtn,this.onClick),this.tabBar.removeEventListener(egret.Event.CHANGE,this.updatePag,this),this.giftInfo=null},i}(t.BaseEuiView);t.Fuli360AttestationWin=e,__reflect(e.prototype,"app.Fuli360AttestationWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay.text=this.data.name+""},e}(eui.ItemRenderer);t.Fuli360TabItemView=e,__reflect(e.prototype,"app.Fuli360TabItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.effArr=[],i.skinName="FuLi360WinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.awardArr=new eui.ArrayCollection,this.itemList.itemRenderer=t.ItemBase,this.itemList.dataProvider=this.awardArr},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.GlobalConfig.Platform360Config,s=[],a=n&&n.reward1;for(var r in a)s.push(a[r]);this.awardArr.replaceAll(s),this.descLab.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Common_265),this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.btnGetGfit,this.onClick),this.observe(t.FuLi4366Mgr.ins().post_32_3,this.updateInfo),this.updateInfo()},i.prototype.updateInfo=function(){var e=t.FuLi4366Mgr.ins().fuli360Info;e&&(e.isGetAllDawanjia()?t.ViewManager.ins().close(this):this.redPoint.visible=e.getRed_dawanjia())},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnGetGfit:t.FuLi4366Mgr.ins().send_32_11();break;case this.btnClose:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.btnGetGfit,this.onClick)},i}(t.BaseEuiView);t.FuLi360Win=e,__reflect(e.prototype,"app.FuLi360Win"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function t(){this.dawanjiaFlag=0,this._fcm=0,this.fcmGiftFlag=0}return t.prototype.readFuliInfo=function(t){this.dawanjiaFlag=t.readByte(),this._fcm=t.readByte(),this.fcmGiftFlag=t.readByte()},Object.defineProperty(t.prototype,"fcm",{get:function(){return this._fcm?this._fcm:window.userInfo.cm?parseInt(window.userInfo.cm):0},enumerable:!0,configurable:!0}),t.prototype.isGetAllDawanjia=function(){return 0==this.dawanjiaFlag?!1:!0},t.prototype.isGetAllFcm=function(){return 0==this.fcmGiftFlag?!1:!0},t.prototype.getRed_dawanjia=function(){return 0==this.dawanjiaFlag?!0:!1},t.prototype.getRed_attestation=function(){return 0==this.fcmGiftFlag&&0!=this.fcm?!0:!1},t}();t.Fuli360Info=e,__reflect(e.prototype,"app.Fuli360Info")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="Fuli37WinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.FuLi4366TabItemView},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.infoGroup.visible=!1,this.bannerGroup.visible=!1,this.infoGroup2.visible=!1,this.descLab1.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_274,t.Fuli37Info.vipLevel)),this.descLab2.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_275+"</u>"),this.descLab3.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_276+"</u>"),this.addChangeEvent(this.tabBar,this.setOpenIndex),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.descLab2,this.onClick),this.addTouchEvent(this.descLab3,this.onClick),this.setTabInfo(),this.setOpenIndex()},i.prototype.setTabInfo=function(){var e=[];e.push({index:1,txt:t.LanguageUtils.language_Common_116}),e.push({index:2,txt:t.LanguageUtils.language_Common_125}),e.push({index:3,txt:t.LanguageUtils.language_Common_267}),e.push({index:4,txt:t.LanguageUtils.language_Omission_txt117}),e.push({index:5,txt:t.LanguageUtils.language_Omission_txt118}),this.tabBar.dataProvider=new eui.ArrayCollection(e),this.tabBar.selectedIndex=0},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.descLab2:var i=t.LocationProperty.originalSrvid%1e4;window.open("http://pay.37.com/select.php?gamename=shuangbei&gameserver=S"+i+"&username="+Main.gameParameter.userInfo.user_name);break;case this.descLab3:window.open37Vip&&window.open37Vip()}},i.prototype.setOpenIndex=function(){var e=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(e){this.infoGroup.visible=!1,this.bannerGroup.visible=!1,this.infoGroup2.visible=!1;var i=e.index;this._currPanel&&(this._currPanel.visible=!1),1==i?(this.dayGift||(this.dayGift=new t.Fuli37DayGift,this.infoGroup2.addChild(this.dayGift)),this._currPanel=this.dayGift,this.bannerGroup.visible=!0,this.infoGroup2.visible=!0):2==i?(this.levelGift||(this.levelGift=new t.Fuli37LevelGift,this.infoGroup2.addChild(this.levelGift)),this._currPanel=this.levelGift,this.bannerGroup.visible=!0,this.infoGroup2.visible=!0):3==i?(this.microGift||(this.microGift=new t.Fuli37MicroGift,this.infoGroup.addChild(this.microGift)),this._currPanel=this.microGift,this.infoGroup.visible=!0):4==i?(this.bindingGift||(this.bindingGift=new t.Fuli37BindingGift,this.infoGroup.addChild(this.bindingGift)),this._currPanel=this.bindingGift,this.infoGroup.visible=!0):5==i&&(this.indulgeGift||(this.indulgeGift=new t.Fuli37IndulgeGift,this.infoGroup.addChild(this.indulgeGift)),this._currPanel=this.indulgeGift,this.infoGroup.visible=!0),this._currPanel.visible=!0}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.setOpenIndex,this),this.removeTouchEvent(this.closeBtn,this.onClick),this._currPanel=null,this.levelGift&&(this.levelGift.close(),this.levelGift.visible=!1),this.microGift&&(this.microGift.close(),this.microGift.visible=!1),this.bindingGift&&(this.bindingGift.close(),this.bindingGift.visible=!1),this.indulgeGift&&(this.indulgeGift.close(),this.indulgeGift.visible=!1)},i}(t.BaseEuiView);t.Fuli37Win=e,__reflect(e.prototype,"app.Fuli37Win"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function e(){this.bindPhone=0,this.dayGiftFlag=0,this.levelGiftFlag=0,this.bindingGiftFlag=0,this.indulgeGiftFlag=0,this.microGiftFlag=0}return e.prototype.readFuliInfo=function(t){this.microGiftFlag=t.readByte(),t.readByte(),this.indulgeGiftFlag=t.readByte(),this.levelGiftFlag=t.readInt(),this.dayGiftFlag=t.readInt(),console.log("this.microGiftFlag:  "+this.microGiftFlag),console.log("this.indulgeGiftFlag:  "+this.indulgeGiftFlag),console.log("this.levelGiftFlag:  "+this.levelGiftFlag),console.log("this.dayGiftFlag:  "+this.dayGiftFlag)},Object.defineProperty(e,"fcm",{get:function(){return window.userInfo.is_adult?parseInt(window.userInfo.is_adult):0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"vipLevel",{get:function(){return window.userInfo.pt_vip?parseInt(window.userInfo.pt_vip):0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loginWay",{get:function(){if(window.userInfo.client){var t=parseInt(window.userInfo.client);if(1==t)return 0;if(2==t)return 1;if(3==t)return 1;if(4==t)return 2}return 0},enumerable:!0,configurable:!0}),e.prototype.getRed_dayGift=function(){var i=e.vipLevel,n=this.dayGiftFlag,s=t.GlobalConfig.Platform37Config.dailyGift;for(var a in s)if(i>=s[a].viplvl&&0==t.MathUtils.getValueAtBit(n,a))return!0;return!1},e.prototype.getRed_levelGift=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getLevel(),n=this.levelGiftFlag,s=t.GlobalConfig.Platform37Config.levelGift;for(var a in s)if(i>=s[a].lvl&&0==t.MathUtils.getValueAtBit(n,a))return!0;return!1},e.prototype.getRed_binding=function(){return 0==this.bindingGiftFlag?!0:!1},e.prototype.getRed_indulge=function(){return 0==this.indulgeGiftFlag&&0!=e.fcm?!0:!1},e.prototype.getRed_micro=function(){return 0==this.microGiftFlag&&1==e.loginWay?!0:!1},e}();t.Fuli37Info=e,__reflect(e.prototype,"app.Fuli37Info")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Fuli37BindingGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuli37Info,this.bindingBtn.visible=!1,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.itemList.itemRenderer=t.FuLi4366ItemView;var e=t.GlobalConfig.Platform37Config;e&&e.bindPhoneReward&&(this.itemList.dataProvider=new eui.ArrayCollection(e.bindPhoneReward)),this.observe(t.FuLi4366Mgr.ins().post37Gift,this.updateView),this.addTouchEvent(this.bindingBtn,this.onClick),this.addTouchEvent(this.getBtn,this.onClick),this.updateView()},i.prototype.updateView=function(){this.bindingBtn.visible=!1,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.giftInfo&&(0==this.giftInfo.bindingGiftFlag?0==this.giftInfo.bindPhone?this.bindingBtn.visible=!0:(this.getBtn.visible=!0,this.redPoint.visible=!0):this.receiveImg.visible=!0)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.bindingBtn:window.BindPhoneFunction&&window.BindPhoneFunction({roleId:t.LocationProperty.roleId});break;case this.getBtn:this.giftInfo&&(0==this.giftInfo.bindingGiftFlag?1==this.giftInfo.bindPhone&&t.FuLi4366Mgr.ins().send_32_18():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips152))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.bindingBtn,this.onClick),this.removeTouchEvent(this.getBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.Fuli37BindingGift=e,__reflect(e.prototype,"app.Fuli37BindingGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Fuli37LevelGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuli37Info,this.list.itemRenderer=t.Fuli37DayGiftItem,this.observe(t.FuLi4366Mgr.ins().post37Gift,this.updateView),this.updateView()},i.prototype.updateView=function(){var e=t.Fuli37Info.vipLevel,i=this.giftInfo.dayGiftFlag,n=t.GlobalConfig.Platform37Config.dailyGift,s=[];for(var a in n)s.push({id:a,needLevel:n[a].viplvl,roleLevel:e,reward:n[a].awards,giftFlag:t.MathUtils.getValueAtBit(i,a)});this.list.dataProvider=new eui.ArrayCollection(s)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose()},i}(t.BaseEuiView);t.Fuli37DayGift=e,__reflect(e.prototype,"app.Fuli37DayGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Fuli37IndulgeGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuli37Info,this.indulgeBtn.visible=!1,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.itemList.itemRenderer=t.FuLi4366ItemView;var e=t.GlobalConfig.Platform37Config;e&&e.FcmReward&&(this.itemList.dataProvider=new eui.ArrayCollection(e.FcmReward)),this.observe(t.FuLi4366Mgr.ins().post37Gift,this.updateView),this.addTouchEvent(this.indulgeBtn,this.onClick),this.addTouchEvent(this.getBtn,this.onClick),this.updateView()},i.prototype.updateView=function(){this.indulgeBtn.visible=!1,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.giftInfo&&(0==this.giftInfo.indulgeGiftFlag?0==t.Fuli37Info.fcm?this.indulgeBtn.visible=!0:(this.getBtn.visible=!0,this.redPoint.visible=!0):this.receiveImg.visible=!0)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.indulgeBtn:window.ActorInfoFunction&&window.ActorInfoFunction();break;case this.getBtn:this.giftInfo&&(0==this.giftInfo.indulgeGiftFlag?0!=t.Fuli37Info.fcm&&t.FuLi4366Mgr.ins().send_32_17():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips152))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.indulgeBtn,this.onClick),this.removeTouchEvent(this.getBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.Fuli37IndulgeGift=e,__reflect(e.prototype,"app.Fuli37IndulgeGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Fuli37LevelGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuli37Info,this.list.itemRenderer=t.Fuli37LevelGiftItem,this.observe(t.FuLi4366Mgr.ins().post37Gift,this.updateView),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateView),this.updateView()},i.prototype.updateView=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getLevel(),n=this.giftInfo.levelGiftFlag,s=t.GlobalConfig.Platform37Config.levelGift,a=[];for(var r in s)a.push({id:r,needLevel:s[r].lvl,roleLevel:i,reward:s[r].awards,giftFlag:t.MathUtils.getValueAtBit(n,r)});this.list.dataProvider=new eui.ArrayCollection(a)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose()},i}(t.BaseEuiView);t.Fuli37LevelGift=e,__reflect(e.prototype,"app.Fuli37LevelGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Fuli37MicroGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuli37Info,this.microDownBtn.visible=!1,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.itemList.itemRenderer=t.FuLi4366ItemView;var e=t.GlobalConfig.Platform37Config;e&&e.downloadBoxReward&&(this.itemList.dataProvider=new eui.ArrayCollection(e.downloadBoxReward)),this.observe(t.FuLi4366Mgr.ins().post37Gift,this.updateView),this.addTouchEvent(this.getBtn,this.onClick),this.addTouchEvent(this.microDownBtn,this.onClick),this.updateView()},i.prototype.updateView=function(){this.microDownBtn.visible=!1,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,1==t.Fuli37Info.loginWay?0==this.giftInfo.microGiftFlag?(this.getBtn.visible=!0,this.redPoint.visible=!0):this.receiveImg.visible=!0:(this.microDownBtn.visible=!0,0==this.giftInfo.microGiftFlag&&t.EntityMgr.ins().getPayer&&t.EntityMgr.ins().getPayer.propSet&&t.EntityMgr.ins().getPayer.propSet.getLevel()>50&&(this.redPoint.visible=!0))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.getBtn:this.giftInfo&&1==t.Fuli37Info.loginWay&&t.FuLi4366Mgr.ins().send_32_16();break;case this.microDownBtn:window.MicroDownFunction&&window.MicroDownFunction(),t.FuLi4366Mgr.ins().isDown=1,ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.getBtn,this.onClick),this.removeTouchEvent(this.microDownBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.Fuli37MicroGift=e,__reflect(e.prototype,"app.Fuli37MicroGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onTouch),this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.list.itemRenderer=t.ItemBase},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onTouch)},i.prototype.onTouch=function(e){return this.data.roleLevel<this.data.needLevel?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips154):void t.FuLi4366Mgr.ins().send_32_19(this.data.id)
},i.prototype.dataChanged=function(){if(this.data){var e=this.data;this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,e.giftFlag?this.receiveImg.visible=!0:(this.getBtn.visible=!0,e.roleLevel>=e.needLevel&&(this.redPoint.visible=!0));var i="|C:0xe50000&T:"+e.needLevel+"|";e.roleLevel>=e.needLevel&&(i="|C:0x28ee01&T:"+e.needLevel+"|"),this.list.dataProvider=new eui.ArrayCollection(e.reward),this.desLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_268,i))}},i}(t.BaseItemRender);t.Fuli37DayGiftItem=e,__reflect(e.prototype,"app.Fuli37DayGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onTouch),this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.list.itemRenderer=t.ItemBase},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onTouch)},i.prototype.onTouch=function(e){return this.data.roleLevel<this.data.needLevel?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips154):void t.FuLi4366Mgr.ins().send_32_20(this.data.id)},i.prototype.dataChanged=function(){if(this.data){var e=this.data;this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,e.giftFlag?this.receiveImg.visible=!0:(this.getBtn.visible=!0,e.roleLevel>=e.needLevel&&(this.redPoint.visible=!0));var i="|C:0xe50000&T:"+e.needLevel+"|";e.roleLevel>=e.needLevel&&(i="|C:0x28ee01&T:"+e.needLevel+"|"),this.list.dataProvider=new eui.ArrayCollection(e.reward),this.desLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_269,i))}},i}(t.BaseItemRender);t.Fuli37LevelGiftItem=e,__reflect(e.prototype,"app.Fuli37LevelGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rewards.itemRenderer=t.ItemBase,this.addTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.onTouch=function(e){t.FuLi4366Mgr.ins().giftInfo&&(0==t.FuLi4366Mgr.ins().giftInfo.isPhoneGift||0==t.FuLi4366Mgr.ins().giftInfo.isCardGift?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips125):t.FuLi4366Mgr.ins().giftInfo.loginDayNum<this.data.day?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips126):t.FuLi4366Mgr.ins().send_32_2(this.data.day))},i.prototype.dataChanged=function(){if(this.data&&(this.receiveBtn.enabled=!0,this.receiveImg.visible=this.redPoint.visible=!1,this.curDay.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt127,this.data.day)),this.rewards.dataProvider=new eui.ArrayCollection(this.data.reward),t.FuLi4366Mgr.ins().giftInfo))if(0==t.FuLi4366Mgr.ins().giftInfo.isPhoneGift||0==t.FuLi4366Mgr.ins().giftInfo.isCardGift||t.FuLi4366Mgr.ins().giftInfo.loginDayNum<this.data.day)this.receiveBtn.currentState="disabled",this.receiveBtn.visible=!0;else{var e=t.MathUtils.getValueAtBit(t.FuLi4366Mgr.ins().giftInfo.isLoginGift,this.data.day);e?(this.receiveImg.visible=!0,this.receiveBtn.visible=!1):(this.receiveImg.visible=!1,this.receiveBtn.visible=!0,this.receiveBtn.currentState="",this.redPoint.visible=!0)}},i}(t.BaseItemRender);t.FuLi4366GiftItemView=e,__reflect(e.prototype,"app.FuLi4366GiftItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.data){this.ItemData.data=this.data;var e=t.CurrencyUtils.getCurrencyNameIcon(this.data.type,this.data.id);e&&(this.itemName.text=e[0]+"")}},i}(t.BaseItemRender);t.FuLi4366ItemView=e,__reflect(e.prototype,"app.FuLi4366ItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuLi4366MicroWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.rewards.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.redPoint.visible=!1,this.microDownBtn.visible=this.receiveBtn.visible=!0,1==window.loginWay?(this.microDownBtn.visible=!1,1!=t.FuLi4366Mgr.ins().giftInfo.isMicro&&(this.redPoint.visible=!0)):0==window.loginWay&&(this.receiveBtn.visible=!1,1!=t.FuLi4366Mgr.ins().giftInfo.isMicro&&t.EntityMgr.ins().getPayer&&t.EntityMgr.ins().getPayer.propSet&&t.EntityMgr.ins().getPayer.propSet.getLevel()>50&&(this.redPoint.visible=!0)),this.receiveImg.visible=1==t.FuLi4366Mgr.ins().giftInfo.isMicro,this.addTouchEvent(this.receiveBtn,this.onClick),this.addTouchEvent(this.microDownBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick);var n=t.GlobalConfig.Platform4366Config;n&&n.rewardClient?this.rewards.dataProvider=new eui.ArrayCollection(n.rewardClient):this.rewards.dataProvider=new eui.ArrayCollection([])},i.prototype.onClick=function(e){switch(e.currentTarget){case this.receiveBtn:t.FuLi4366Mgr.ins().send_32_6();break;case this.microDownBtn:window.MicroDownFunction(),t.FuLi4366Mgr.ins().isDown=1,ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1);break;case this.closeBtn:t.ViewManager.ins().close(this),1!=window.loginWay&&0==t.FuLi4366Mgr.ins().isDown&&(window.MicroDownFunction&&window.MicroDownFunction(),ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.receiveBtn,this.onClick),this.removeTouchEvent(this.microDownBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.FuLi4366MicroWin=e,__reflect(e.prototype,"app.FuLi4366MicroWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i)},i.prototype.$onRemoveFromStage=function(){t.MessageCenter.ins().removeAll(this),e.prototype.$onRemoveFromStage.call(this)},i.prototype.dataChanged=function(){this.redPoint.visible=!1,this.data&&this.data.txt&&(this.labelDisplay.text=this.data.txt+"",this.redPoint.visible=t.FuLi4366Mgr.ins().getRedPoint(this.data.index)?!0:!1)},i}(eui.ItemRenderer);t.FuLi4366TabItemView=e,__reflect(e.prototype,"app.FuLi4366TabItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._curIndex=-1,t._qqGroupBtnNum="599125384",t.actorValidationInfo=null,t.giftInfo=null,t._curGrpIdx=0,t.skinName="FuLi4366WinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.FuLi4366TabItemView,this.loginItemList.itemRenderer=t.FuLi4366GiftItemView,this.phoneItemList.itemRenderer=t.FuLi4366ItemView,this.cardItemList.itemRenderer=t.FuLi4366ItemView,this.loginArr=new eui.ArrayCollection,this.loginItemList.dataProvider=this.loginArr,t.MouseScroller.bind(this.loginItemScroller)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._curIndex=0,this.addChangeEvent(this.tabBar,this.onTabTouch),this.addTouchEvent(this.wxBuyBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.phoneBuyBtn,this.onClick),this.addTouchEvent(this.cardBuyBtn,this.onClick),this.addTouchEvent(this.addGroupBtn,this.onClick),this.addMouseMoveEvent(this.giftTips,this.mouseMove),this.addMouseOverEvent(this.giftTips,this.mouseMove),this.observe(t.FuLi4366Mgr.ins().post_32_1,this.updateActorInfo),this.observe(t.FuLi4366Mgr.ins().postRuleIconRed,this.setTabInfo),t.FuLi4366Mgr.ins().send_32_1()},i.prototype.updateActorInfo=function(){this.giftInfo=t.FuLi4366Mgr.ins().giftInfo,this.setTabInfo(),this.setOpenIndex(),this.updateView()},i.prototype.setTabInfo=function(){var e=[];this.giftInfo&&(e.push({index:0,txt:t.LanguageUtils.language_Omission_txt116}),0==this.giftInfo.isPhoneGift&&e.push({index:1,txt:t.LanguageUtils.language_Omission_txt117}),0==this.giftInfo.isCardGift&&e.push({index:2,txt:t.LanguageUtils.language_Omission_txt118}),this.giftInfo.isLoginGift<127&&e.push({index:3,txt:t.LanguageUtils.language_Omission_txt119}),e.push({index:4,txt:t.LanguageUtils.language_Omission_txt141})),this.tabBar.dataProvider=new eui.ArrayCollection(e),this.tabBar.selectedIndex=this._curIndex<=this.tabBar.dataProvider.length-1?this._curIndex:0},i.prototype.updateView=function(){var e=t.GlobalConfig.Platform4366Config;e&&(e.reward1&&e.reward1[0]&&(this.wxItemData.data=e.reward1[0]),e.reward2&&(this.phoneItemList.dataProvider=new eui.ArrayCollection(e.reward2)),e.reward3&&(this.cardItemList.dataProvider=new eui.ArrayCollection(e.reward3)));var i=t.GlobalConfig.Login4366Config,n=[];if(i)for(var s in i)n.push(i[s]);this.loginArr.replaceAll(n),this.redPoint1.visible=this.redPoint1.visible=!1,this.giftInfo&&(0==this.giftInfo.isPhoneGift&&Main.gameParameter.userInfo&&1==Main.gameParameter.userInfo.isBingPhone&&(this.redPoint1.visible=!0),0==this.giftInfo.isCardGift&&Main.gameParameter.userInfo&&1==Main.gameParameter.userInfo.isBingcard&&(this.redPoint2.visible=!0))},i.prototype.onTabTouch=function(t){this._curIndex=t.currentTarget.selectedIndex,this._curGrpIdx=t.currentTarget.selectedItem.index,this.setOpenIndex()},i.prototype.setOpenIndex=function(){var e=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(e){for(var i=0;5>i;i++)i==e.index?this["grp"+i].visible=!0:this["grp"+i].visible=!1;1==e.index?t.FuLi4366Mgr.ins().phoneSelect||(t.FuLi4366Mgr.ins().phoneSelect=!0,t.FuLi4366Mgr.ins().postRuleIconRed()):2==e.index&&(t.FuLi4366Mgr.ins().cardSelect||(t.FuLi4366Mgr.ins().cardSelect=!0,t.FuLi4366Mgr.ins().postRuleIconRed()))}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.wxBuyBtn:this.giftInfo&&(0==this.giftInfo.isWxGift?""!=this.InputCode.text&&t.OtherMgr.ins().send_26_63(this.InputCode.text):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips124));break;case this.closeBtn:t.ViewManager.ins().close(this);break;case this.phoneBuyBtn:this.giftInfo&&(0==this.giftInfo.isPhoneGift?Main.gameParameter.userInfo&&1==Main.gameParameter.userInfo.isBingPhone?t.FuLi4366Mgr.ins().send_32_3():window.BindPhoneFunction():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips152));break;case this.cardBuyBtn:this.giftInfo&&(0==this.giftInfo.isCardGift?Main.gameParameter.userInfo&&1==Main.gameParameter.userInfo.isBingcard?t.FuLi4366Mgr.ins().send_32_4():window.ActorInfoFunction&&window.ActorInfoFunction():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips152));break;case this.addGroupBtn:var i=document.createElement("input");i.value=this._qqGroupBtnNum,document.body.appendChild(i),i.select(),i.setSelectionRange(0,i.value.length),document.execCommand("Copy"),document.body.removeChild(i)}},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=t.GlobalConfig.Platform4366Config;if(i&&i.reward4&&i.reward4[0]){var n=t.GlobalConfig.StdItems[i.reward4[0].id];if(n){var s=e.currentTarget.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,n,{x:s.x+200,y:s.y}),s=null}}}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.loginItemScroller),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.removeTouchEvent(this.wxBuyBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.phoneBuyBtn,this.onClick),this.removeTouchEvent(this.cardBuyBtn,this.onClick),this.removeMouseMoveEvent(this.giftTips,this.mouseMove),this.removeMouseOverEvent(this.giftTips,this.mouseMove)},i}(t.BaseEuiView);t.FuLi4366Win=e,__reflect(e.prototype,"app.FuLi4366Win"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.percentHeight=100,t.percentWidth=100,t.skinName="VIP4366CodeSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.dialogCloseBtn,this.onClick)},i.prototype.onClick=function(e){t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.dialogCloseBtn,this.onClick)},i}(t.BaseEuiView);t.VIP4366CodeView=e,__reflect(e.prototype,"app.VIP4366CodeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.showLimit=5e3,t.showLabValue="3008871242",t.skinName="VIP4366Skin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.rechargeBtn,this.onClick),this.addTouchEvent(this.copyBtn,this.onClick),this.addTouchEvent(this.codeBtn,this.onClick),this.lab2.text=t.LanguageUtils.language_System97,this.qqLabel.text=this.showLabValue,this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateData),this.updateData()},i.prototype.updateData=function(){var e=t.EntityMgr.ins().getPayer,i=this.showLimit-e.propSet.getRechargeSum();i>0?(this.lab.text=t.StringUtils.replace(t.LanguageUtils.language_System96,i),this.lab.visible=!0,this.qqLabel.visible=!1,this.copyBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER,this.codeBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER):(this.lab.visible=!1,this.qqLabel.visible=!0,this.copyBtn.filters=null,this.codeBtn.filters=null)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.rechargeBtn:t.RechargeMgr.ins().onPay("");break;case this.copyBtn:if(this.qqLabel.visible){if(gamelib.DeviceUtils.IsMobile)return void t.UserTips.ins().showUITips("手机版暂不支持~");var i=document.createElement("input");i.value=this.showLabValue,document.body.appendChild(i),i.select(),i.setSelectionRange(0,i.value.length),document.execCommand("Copy"),document.body.removeChild(i)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_System98);break;case this.codeBtn:this.qqLabel.visible?t.ViewManager.ins().open(t.VIP4366CodeView):t.UserTips.ins().showUITips(t.LanguageUtils.language_System98)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.rechargeBtn,this.onClick),this.removeTouchEvent(this.copyBtn,this.onClick),this.removeTouchEvent(this.codeBtn,this.onClick)},i}(t.BaseEuiView);t.VIP4366View=e,__reflect(e.prototype,"app.VIP4366View"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.showLabValue="3005128008",i.skinName="Fuli7GameVipWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.showLimit=t.GlobalConfig.Platform7youxiConfig.limit,this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.rechargeBtn,this.onClick),this.addTouchEvent(this.copyBtn,this.onClick),this.lab2.text=t.LanguageUtils.language_System97,this.qqLabel.text=this.showLabValue,this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateData),this.updateData()},i.prototype.updateData=function(){var e=t.EntityMgr.ins().getPayer,i=this.showLimit-e.propSet.getRechargeSum();i>0?(this.lab.text=t.StringUtils.replace(t.LanguageUtils.language_System96,i),this.lab.visible=!0,this.qqLabel.visible=!1,this.copyBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER):(this.lab.visible=!1,this.qqLabel.visible=!0,this.copyBtn.filters=null)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.rechargeBtn:t.RechargeMgr.ins().onPay("");break;case this.copyBtn:if(this.qqLabel.visible){if(gamelib.DeviceUtils.IsMobile)return void t.UserTips.ins().showUITips("手机版暂不支持~");var i=document.createElement("input");i.value=this.showLabValue,document.body.appendChild(i),i.select(),i.setSelectionRange(0,i.value.length),document.execCommand("Copy"),document.body.removeChild(i)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_System98)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.rechargeBtn,this.onClick),this.removeTouchEvent(this.copyBtn,this.onClick)},i}(t.BaseEuiView);t.Fuli7GameVipWin=e,__reflect(e.prototype,"app.Fuli7GameVipWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.giftInfo=null,i.skinName="Fuli7GameWXGiftWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this.wxBuyBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.observe(t.FuLi4366Mgr.ins().post_32_4,this.updateActorInfo),this.observe(t.OtherMgr.ins().post_26_80,this.updateCode),this.giftInfo=t.FuLi4366Mgr.ins().fuli7gameInfo},i.prototype.updateActorInfo=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuli7gameInfo,this.giftInfo&&this.giftInfo.isWxGift&&t.ViewManager.ins().close(this)},i.prototype.updateCode=function(e){0==e&&t.FuLi4366Mgr.ins().send_32_11()},i.prototype.onClick=function(e){switch(e.currentTarget){case this.wxBuyBtn:this.giftInfo&&(0==this.giftInfo.isWxGift?""!=this.InputCode.text&&t.OtherMgr.ins().send_26_63(this.InputCode.text):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips124));break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.wxBuyBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.Fuli7GameWXGiftWin=e,__reflect(e.prototype,"app.Fuli7GameWXGiftWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getGiftInfo=function(){t.PlatformFuliManager.ins().initPlatformFuliInfo()},i}(t.PlatformFuliData);t.FuliFeihuoData=e,__reflect(e.prototype,"app.FuliFeihuoData")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.PlatformFuliInfo);t.FuliFeihuoInfo=e,__reflect(e.prototype,"app.FuliFeihuoInfo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getSuperVipGiftData=function(){return{showLimit:t.GlobalConfig.PlatformqidianConfig.limit,skinName:"FuliFeihuoSuperVipGiftSkin",qqStr:"2852375509",copyValue:"2852375509"}},i}(t.PlatformFuliViewData);t.FuliFeihuoViewData=e,__reflect(e.prototype,"app.FuliFeihuoViewData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="PlatformFuliViewSkin3",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.titleImg.source="biaoti_wanshanziliao"},i.prototype.open=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.open.apply(this,i),this._currPanel=new t.PlatformFuliBindingGift({skinName:"FuliGame2BindingGiftSkin"}),this.infoGroup.addChild(this._currPanel)},i}(t.PlatformFuliView2);t.FuliGame2BindingView=e,__reflect(e.prototype,"app.FuliGame2BindingView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getGiftInfo=function(){t.FuLi4366Mgr.ins().send_32_43()},Object.defineProperty(i.prototype,"loginWay",{get:function(){return window.userInfo.wei&&1==parseInt(window.userInfo.wei)?1:0},enumerable:!0,configurable:!0}),i.prototype.getReward_phoneBindGift=function(){var e=t.GlobalConfig.PlatformGame2Config;return e&&e.PhoneReward?e.PhoneReward:[]},i.prototype.onGetReward_phoneBindGift=function(){t.FuLi4366Mgr.ins().send_32_46(1)},i}(t.PlatformFuliData);t.FuliGame2Data=e,__reflect(e.prototype,"app.FuliGame2Data")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initData=function(){var e=t.PlatformFuliManager.ins().platformFuliData;e&&(this._loginWay=e.loginWay)},i.prototype.readFuliInfo=function(t){this._phoneBindState=t.readByte(),this._phoneBindGiftFlag=t.readByte()},i}(t.PlatformFuliInfo);t.FuliGame2Info=e,__reflect(e.prototype,"app.FuliGame2Info")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="FuliIqiyiQQGroupViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.rewards.itemRenderer=t.ItemBase,this.rewards.dataProvider=new eui.ArrayCollection(this.getRewardList()),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.getBtn,this.onClick),t.FuLi4366Mgr.ins().send_32_40(4)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.getBtn:window.AdditiveGroup&&window.AdditiveGroup();break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.getRewardList=function(){var e=t.GlobalConfig.PlatformaiqiyiConfig;return e&&e.QQReward?e.QQReward:[]},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.getBtn,this.onClick)},i}(t.BaseEuiView);t.FuliIqiyiQQGroupView=e,__reflect(e.prototype,"app.FuliIqiyiQQGroupView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getGiftInfo=function(){t.FuLi4366Mgr.ins().send_32_39(this.loginWay)},Object.defineProperty(i.prototype,"loginWay",{get:function(){return window.userInfo.is_client&&1==parseInt(window.userInfo.is_client)?1:0},enumerable:!0,configurable:!0}),i.prototype.getReward_loginWayGift=function(){var e=t.GlobalConfig.PlatformaiqiyiConfig;return e&&e.rewardClient?e.rewardClient:[]},i.prototype.onGetReward_loginWayGift=function(){t.FuLi4366Mgr.ins().send_32_40(1)},i.prototype.getReward_weixinGift=function(){var e=t.GlobalConfig.PlatformaiqiyiConfig;return e&&e.WechatReward?e.WechatReward[0]:{}},i}(t.PlatformFuliData);t.FuliIqiyiData=e,__reflect(e.prototype,"app.FuliIqiyiData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initData=function(){var e=t.PlatformFuliManager.ins().platformFuliData;e&&(this._loginWay=e.loginWay)},i.prototype.readFuliInfo=function(t){this._microGiftFlag=t.readByte(),this._weChatGiftFlag=t.readByte(),this._svipGiftFlag=t.readByte(),this._qqGroupGiftFlag=t.readByte()},i}(t.PlatformFuliInfo);t.FuliIqiyiInfo=e,__reflect(e.prototype,"app.FuliIqiyiInfo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getSuperVipGiftData=function(){return{showLimit:t.GlobalConfig.PlatformaiqiyiConfig.limit,skinName:"FuliIqiyiSuperVipGiftSkin",qqStr:"800147567",copyValue:"800147567"}},i.prototype.getMicroGiftData=function(){return{skinName:"PlatformFuliMicroWinSkin"}},i.prototype.getWeixinGiftData=function(){return{skinName:"FuliIqiyiWeixinGiftSkin"}},i}(t.PlatformFuliViewData);t.FuliIqiyiViewData=e,__reflect(e.prototype,"app.FuliIqiyiViewData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rewards.itemRenderer=t.ItemBase,this.addTouchEvent(this.buyButton,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.buyButton,this.onTouch)},i.prototype.onTouch=function(e){t.FuLi4366Mgr.ins().send_32_36(4,this.data.id)},i.prototype.dataChanged=function(){if(this.buyButton.y=22,this.redPoint.y=20,this.data){var e=t.FuLi4366Mgr.ins().ku25GameInfo;if(this.imgBg.source=this.data.id%2==0?"bg_quyu_1":"bg_quyu_2",this.receiveImg.visible=!1,this.buyButton.visible=!0,this.buyButton.enabled=!0,this.redPoint.visible=!1,this.curValue.visible=!1,this.taskName.textColor=14724725,this.taskName.text="充值金额满",this.taskValue.visible=!0,this.taskValue.textFlow=t.TextFlowMaker.generateTextFlow(this.data.Target+""),this.rewards.dataProvider=new eui.ArrayCollection(this.data.reward),e){this.buyButton.y=10,this.redPoint.y=8,this.curValue.visible=!0;var i=e.todayPayNum>=this.data.Target?2682369:15926028;this.curValue.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+i+"&T:"+e.todayPayNum+"||C:0xe5ddcf&T:/"+this.data.Target+"|");var n=t.MathUtils.getValueAtBit(e.everyDayPay,this.data.id);1==n?(this.receiveImg.visible=!0,this.buyButton.visible=this.curValue.visible=!1):e.todayPayNum>=this.data.Target?(this.buyButton.label=t.LanguageUtils.language_Wlelfare_Text2,this.redPoint.visible=!0):(this.taskName.textColor=8420211,this.buyButton.enabled=!1,this.buyButton.label=t.LanguageUtils.language_Wlelfare_Text1)}}},i}(t.BaseItemRender);t.Ku25BoxPayRewardsItemRender=e,__reflect(e.prototype,"app.Ku25BoxPayRewardsItemRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rewards.itemRenderer=t.ItemBase,this.addTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.onTouch=function(e){t.FuLi4366Mgr.ins().ku25GameInfo&&!t.FuLi4366Mgr.ins().ku25GameInfo.everyDayLogin&&t.FuLi4366Mgr.ins().send_32_36(3)},i.prototype.dataChanged=function(){this.receiveBtn.enabled=!0,this.receiveBtn.visible=!0,this.receiveBtn.currentState="",this.receiveImg.visible=!1,this.redPoint.visible=!1,this.data&&1==this.data.type&&(this.curDay.textFlow=t.TextFlowMaker.generateTextFlow("|C:0xDCB789&T:使用盒子登录游戏，每日登录奖励|"),this.rewards.dataProvider=new eui.ArrayCollection(this.data.reward),window.loginWay?t.FuLi4366Mgr.ins().ku25GameInfo&&t.FuLi4366Mgr.ins().ku25GameInfo.everyDayLogin?(this.receiveBtn.visible=!1,this.receiveImg.visible=!0):(this.receiveImg.visible=!1,this.receiveBtn.enabled=!0,this.receiveBtn.currentState="",this.receiveBtn.visible=!0,this.redPoint.visible=!0):(this.receiveBtn.currentState="disabled",this.receiveBtn.enabled=!1))},i}(t.BaseItemRender);t.Ku25BoxRewardsItemRender=e,__reflect(e.prototype,"app.Ku25BoxRewardsItemRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.selectIdx=0,i.skinName="Ku25BoxRewardsWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.receiveBtn:var i=t.GlobalConfig.BagRemainConfig[16];if(i){var n=t.BagMgr.ins().getBagCapacity(i.bagremain);n?t.FuLi4366Mgr.ins().send_32_36(1):t.UserTips.ins().showUITips(i.bagtips)}break;case this.downBtn:window.downKu25Box&&window.downKu25Box();break;case this.wxCodeBtn:""!=this.InputCode.text&&t.OtherMgr.ins().send_26_63(this.InputCode.text);break;case this.cardBtn:window.userInfo&&2==+window.userInfo.adult?t.FuLi4366Mgr.ins().send_32_36(2):window.IdCardFunction&&window.IdCardFunction()}},i.prototype.updateCode=function(e){0==e&&t.FuLi4366Mgr.ins().send_32_36(5)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.tabArr=new eui.ArrayCollection,this.tabBar.dataProvider=this.tabArr,this.tabBar.itemRenderer=t.YYLobbyPrivilegesTabView,this.tabBar.addEventListener(egret.Event.CHANGE,this.updatePag,this),this.boxRewards.itemRenderer=t.ItemBase,this.cardList.itemRenderer=t.ItemBase,this.boxLoginList.itemRenderer=t.Ku25BoxRewardsItemRender,this.loginPayList.itemRenderer=t.Ku25BoxPayRewardsItemRender,this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.receiveBtn,this.onClick),this.addTouchEvent(this.downBtn,this.onClick),this.addTouchEvent(this.wxCodeBtn,this.onClick),this.addTouchEvent(this.cardBtn,this.onClick),this.observe(t.OtherMgr.ins().post_26_80,this.updateCode),this.observe(t.FuLi4366Mgr.ins().post_32_35,this.updateData),this.tabBar.selectedIndex=0,t.MouseScroller.bind(this.btnScroller),t.MouseScroller.bind(this.loginPayScroller),t.MouseScroller.bind(this.boxLoginScroller),this.updateData()},i.prototype.updateTabInfo=function(){this.allPanels=[],t.FuLi4366Mgr.ins().ku25GameInfo&&(t.FuLi4366Mgr.ins().ku25GameInfo.boxDown||this.allPanels.push({type:4,index:1,txt:"盒子福利"}),this.allPanels.push({type:4,index:2,txt:"每日登录"}),this.allPanels.push({type:4,index:3,txt:"每日充值"}),t.FuLi4366Mgr.ins().ku25GameInfo.wxGift||this.allPanels.push({type:4,index:4,txt:"微信礼包"}),t.FuLi4366Mgr.ins().ku25GameInfo.isCard||this.allPanels.push({type:4,index:5,txt:"身份认证"})),this.tabArr.replaceAll(this.allPanels),this.tabBar.selectedIndex=this.tabBar.selectedIndex<=this.tabArr.length-1?this.tabBar.selectedIndex:0},i.prototype.updateData=function(){this.updateTabInfo(),this.updatePag()},i.prototype.updatePag=function(){var t=0,e=this.tabArr.getItemAt(this.tabBar.selectedIndex);if(e){for(var i=0;5>i;i++)i==e.index-1?(t=i,this["grp"+i].visible=!0):this["grp"+i].visible=!1;this.updateInfo(t)}},i.prototype.updateInfo=function(e){var i=t.GlobalConfig.PlatformKU25Config;switch(e){case 0:window.loginWay?(this.receiveBtn.visible=this.boxRewardRed.visible=!0,this.downBtn.visible=!1):(this.receiveBtn.visible=this.boxRewardRed.visible=!1,this.downBtn.visible=!0),i.BoxReward&&(this.boxRewards.dataProvider=new eui.ArrayCollection(i.BoxReward));break;case 1:i.LoginReward&&(this.boxLoginList.dataProvider=new eui.ArrayCollection([{type:1,reward:i.LoginReward}]));break;case 2:var n=[];for(var s in t.GlobalConfig.LoginKU25Config)n.push(t.GlobalConfig.LoginKU25Config[s]);this.loginPayList.dataProvider=new eui.ArrayCollection(n);break;case 3:i.WeChatReward&&(this.wxItemData.data=i.WeChatReward[0]);break;case 4:window.userInfo&&2==+window.userInfo.adult?this.cardRed.visible=!0:this.cardRed.visible=!1,i.RealnameReward&&(this.cardList.dataProvider=new eui.ArrayCollection(i.RealnameReward))}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.receiveBtn,this.onClick),this.removeTouchEvent(this.downBtn,this.onClick),this.removeTouchEvent(this.wxCodeBtn,this.onClick),this.removeTouchEvent(this.cardBtn,this.onClick),this.tabBar.removeEventListener(egret.Event.CHANGE,this.updatePag,this),t.MouseScroller.unbind(this.btnScroller),t.MouseScroller.unbind(this.loginPayScroller),t.MouseScroller.unbind(this.boxLoginScroller)
},i}(t.BaseEuiView);t.Ku25BoxRewardsWin=e,__reflect(e.prototype,"app.Ku25BoxRewardsWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Ku25SuperVipSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this.rechargeBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.copyBtn,this.onClick),this.qqLabel.visible=!1,this.showLimit=t.GlobalConfig.PlatformKU25Config.limit;var n=t.EntityMgr.ins().getPayer;n&&n.propSet&&n.propSet.getRechargeSum()>=this.showLimit&&(this.qqLabel.visible=!0)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.rechargeBtn:t.RechargeMgr.ins().onPay("");break;case this.copyBtn:if(this.qqLabel.visible){if(gamelib.DeviceUtils.IsMobile)return void t.UserTips.ins().showUITips("手机版暂不支持~");var i=document.createElement("input");i.value=this.qqLabel.text,document.body.appendChild(i),i.select(),i.setSelectionRange(0,i.value.length),document.execCommand("Copy"),document.body.removeChild(i),t.UserTips.ins().showUITips("复制成功")}else t.UserTips.ins().showUITips(t.LanguageUtils.language_System98)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.rechargeBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.copyBtn,this.onClick)},i}(t.BaseEuiView);t.Ku25BoxSuperVipView=e,__reflect(e.prototype,"app.Ku25BoxSuperVipView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getGiftInfo=function(){t.FuLi4366Mgr.ins().send_32_50()},i.prototype.getReward_weixinGift=function(){var e=t.GlobalConfig.PlatformteeqeeConfig;return e&&e.WechatRewardGift?e.WechatRewardGift[0]:{}},i}(t.PlatformFuliData);t.FuliKuaiwanData=e,__reflect(e.prototype,"app.FuliKuaiwanData")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.readFuliInfo=function(t){this._svipGiftFlag=t.readByte(),this._weChatGiftFlag=t.readByte(),console.log("超级VIP 礼包领取标志:"+this._phoneBindGiftFlag),console.log("微信 礼包领取标志:"+this._indulgeGiftFlag)},e.prototype.getRed_viewGift=function(){return this.getRed_svipGift()?!0:this.getRed_weChatGift()?!0:!1},e}(t.PlatformFuliInfo);t.FuliKuaiwanInfo=e,__reflect(e.prototype,"app.FuliKuaiwanInfo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getSuperVipGiftData=function(){return{showLimit:t.GlobalConfig.PlatformteeqeeConfig.limit,qqStr:"800098844",copyValue:"800098844",skinName:"FuliKuaiwanSuperVipGiftSkin"}},i.prototype.getWeixinGiftData=function(){return{skinName:"FuliKuaiwanWeixinGiftSkin"}},i}(t.PlatformFuliViewData);t.FuliKuaiwanViewData=e,__reflect(e.prototype,"app.FuliKuaiwanViewData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="FuliLuDaShiGiftWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.FuliLuDaShiGiftTab,this.tabBar2.itemRenderer=t.FuLi4366TabItemView},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.giftArr={},this.giftArr[1]={giftType:1,data:t.GlobalConfig.LudashivipConfig[1]},this.giftArr[2]={giftType:1,data:t.GlobalConfig.LudashivipConfig[2]},this.giftArr[3]={giftType:1,data:t.GlobalConfig.LudashivipConfig[3]},this.giftArr[4]={giftType:2,data:t.GlobalConfig.LudashimemberConfig[1]},this.giftArr[5]={giftType:2,data:t.GlobalConfig.LudashimemberConfig[2]},this.addChangeEvent(this.tabBar,this.setOpenIndex),this.addChangeEvent(this.tabBar2,this.setOpenIndex2),this.addTouchEvent(this.closeBtn,this.onClick),this.setTabInfo()},i.prototype.setTabInfo=function(){var e=[];e.push({index:1,txt:t.LanguageUtils.language_Omission_txt150}),e.push({index:2,txt:t.LanguageUtils.language_Omission_txt151}),e.push({index:3,txt:t.LanguageUtils.language_Omission_txt152}),this.tabBar.dataProvider=new eui.ArrayCollection(e),this.tabBar.selectedIndex=0,this.setOpenIndex()},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.setOpenIndex=function(){var e=[],i=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(i){var n=i.index;1==n?(e.push({index:1,txt:t.LanguageUtils.language_Omission_txt153}),e.push({index:2,txt:t.LanguageUtils.language_Omission_txt154}),e.push({index:3,txt:t.LanguageUtils.language_Omission_txt155})):2==n?(e.push({index:4,txt:t.LanguageUtils.language_Omission_txt156}),e.push({index:5,txt:t.LanguageUtils.language_Omission_txt157}),e.push({index:6,txt:t.LanguageUtils.language_Omission_txt158})):3==n&&(e.push({index:7,txt:t.LanguageUtils.language_Common_116}),e.push({index:8,txt:t.LanguageUtils.language_Common_125}))}this.tabBar2.dataProvider=new eui.ArrayCollection(e),this.tabBar2.selectedIndex=0,this.setOpenIndex2()},i.prototype.setOpenIndex2=function(){var e=this.tabBar2.dataProvider.getItemAt(this.tabBar2.selectedIndex);if(e){var i=e.index;this._currPanel&&(this._currPanel.visible=!1),1==i||2==i||3==i||4==i||5==i?(this.singleGift||(this.singleGift=new t.FuliLuDaShiSingleGift,this.infoGroup.addChild(this.singleGift)),this._currPanel=this.singleGift):6==i?(this.dayGift||(this.dayGift=new t.FuliLuDaShiDayGift,this.infoGroup.addChild(this.dayGift)),this._currPanel=this.dayGift):7==i?(this.boxGift||(this.boxGift=new t.FuliLuDaShiBoxGift,this.infoGroup.addChild(this.boxGift)),this._currPanel=this.boxGift):8==i?(this.levelGift||(this.levelGift=new t.FuliLuDaShiLevelGift,this.infoGroup.addChild(this.levelGift)),this._currPanel=this.levelGift):9==i&&(this.boxPanel||(this.boxPanel=new t.FuliLuDaShiBoxBuff,this.infoGroup.addChild(this.boxPanel)),this._currPanel=this.boxPanel),this._currPanel.update&&this._currPanel.update(this.giftArr[i]),this._currPanel.visible=!0}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.setOpenIndex,this),this.tabBar2.removeEventListener(egret.TouchEvent.CHANGE,this.setOpenIndex2,this),this.removeTouchEvent(this.closeBtn,this.onClick),this._currPanel=null,this.singleGift&&(this.singleGift.close(),this.singleGift=null),this.dayGift&&(this.dayGift.close(),this.dayGift=null),this.levelGift&&(this.levelGift.close(),this.levelGift=null),this.boxGift&&(this.boxGift.close(),this.boxGift=null),this.boxPanel&&(this.boxPanel.close(),this.boxPanel=null);for(var n in this.giftArr)delete this.giftArr[n];this.giftArr=null},i}(t.BaseEuiView);t.FuliLuDaShiGiftWin=e,__reflect(e.prototype,"app.FuliLuDaShiGiftWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="FuliLuDaShiMicroWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.rewards.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.giftInfo=t.FuLi4366Mgr.ins().fuliLuDaShiInfo,this.redPoint.visible=!1,this.microDownBtn.visible=!1,this.receiveBtn.visible=!1,window.loginWay?(this.receiveBtn.visible=!0,1!=this.giftInfo.gameBoxGiftFlag&&(this.redPoint.visible=!0)):(this.microDownBtn.visible=!0,1!=this.giftInfo.gameBoxGiftFlag&&t.EntityMgr.ins().getPayer&&t.EntityMgr.ins().getPayer.propSet&&t.EntityMgr.ins().getPayer.propSet.getLevel()>50&&(this.redPoint.visible=!0)),this.receiveImg.visible=1==this.giftInfo.gameBoxGiftFlag,this.addTouchEvent(this.receiveBtn,this.onClick),this.addTouchEvent(this.microDownBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick);var n=t.GlobalConfig.PlatformludashiConfig;n&&n.downloadBoxReward?this.rewards.dataProvider=new eui.ArrayCollection(n.downloadBoxReward):this.rewards.dataProvider=new eui.ArrayCollection([])},i.prototype.onClick=function(e){switch(e.currentTarget){case this.receiveBtn:t.FuLi4366Mgr.ins().send_32_13(4,1,0);break;case this.microDownBtn:window.MicroDownFunction&&window.MicroDownFunction(),t.FuLi4366Mgr.ins().isDown=1,ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1);break;case this.closeBtn:t.ViewManager.ins().close(this),1!=window.loginWay&&0==t.FuLi4366Mgr.ins().isDown&&(window.MicroDownFunction&&window.MicroDownFunction(),ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.receiveBtn,this.onClick),this.removeTouchEvent(this.microDownBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.FuliLuDaShiMicroWin=e,__reflect(e.prototype,"app.FuliLuDaShiMicroWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="FuliLuDaShiPhoneGiftWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.FuLi4366TabItemView},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addChangeEvent(this.tabBar,this.setOpenIndex),this.addTouchEvent(this.closeBtn,this.onClick),this.setTabInfo(),this.setOpenIndex()},i.prototype.setTabInfo=function(){var e=[];e.push({index:1,txt:t.LanguageUtils.language_Omission_txt148}),e.push({index:2,txt:t.LanguageUtils.language_Omission_txt116}),e.push({index:3,txt:t.LanguageUtils.language_Omission_txt149}),this.tabBar.dataProvider=new eui.ArrayCollection(e),this.tabBar.selectedIndex=0},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.setOpenIndex=function(){var e=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(e){var i=e.index;this._currPanel&&(this._currPanel.visible=!1),1==i?(this.bindingGift||(this.bindingGift=new t.FuliLuDaShiBindingGift,this.infoGroup.addChild(this.bindingGift)),this._currPanel=this.bindingGift):2==i?(this.weiXinGift||(this.weiXinGift=new t.FuliLuDaShiWeiXinGift,this.infoGroup.addChild(this.weiXinGift)),this._currPanel=this.weiXinGift):3==i&&(this.indulgeGift||(this.indulgeGift=new t.FuliLuDaShiIndulgeGift,this.infoGroup.addChild(this.indulgeGift)),this._currPanel=this.indulgeGift),this._currPanel.visible=!0}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.setOpenIndex,this),this.removeTouchEvent(this.closeBtn,this.onClick),this._currPanel=null,this.bindingGift&&(this.bindingGift.close(),this.bindingGift.visible=!1),this.weiXinGift&&(this.weiXinGift.close(),this.weiXinGift.visible=!1),this.indulgeGift&&(this.indulgeGift.close(),this.indulgeGift.visible=!1)},i}(t.BaseEuiView);t.FuliLuDaShiPhoneGiftWin=e,__reflect(e.prototype,"app.FuliLuDaShiPhoneGiftWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.percentHeight=100,t.percentWidth=100,t.skinName="FuliLuDaShiVipCodeSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.dialogCloseBtn,this.onClick)},i.prototype.onClick=function(e){t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.FuLi4366MicroWin,this.removeTouchEvent(this.dialogCloseBtn,this.onClick)},i}(t.BaseEuiView);t.FuliLuDaShiVipCodeView=e,__reflect(e.prototype,"app.FuliLuDaShiVipCodeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.showLabValue="800198124",i.showLabValue2="Ludashi-VIP",i.skinName="FuliLuDaShiVipWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.showLimit=t.GlobalConfig.PlatformludashiConfig.limit,this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.rechargeBtn,this.onClick),this.addTouchEvent(this.copyBtn,this.onClick),this.addTouchEvent(this.codeBtn,this.onClick),this.qqLabel.text=this.showLabValue,this.wxLabel.text=this.showLabValue2,this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateData),this.updateData()},i.prototype.updateData=function(){var e=t.EntityMgr.ins().getPayer,i=this.showLimit-e.propSet.getRechargeSum();i>0?(this.lab.text=t.StringUtils.replace(t.LanguageUtils.language_System106,i),this.lab.visible=!0,this.qqLabel.visible=!1,this.wxLabel.visible=!1,this.copyBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER,this.codeBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER):(this.lab.visible=!1,this.qqLabel.visible=!0,this.wxLabel.visible=!0,this.copyBtn.filters=null,this.codeBtn.filters=null)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.rechargeBtn:t.RechargeMgr.ins().onPay("");break;case this.copyBtn:if(this.qqLabel.visible){if(gamelib.DeviceUtils.IsMobile)return void t.UserTips.ins().showUITips("手机版暂不支持~");var i=document.createElement("input");i.value=this.showLabValue,document.body.appendChild(i),i.select(),i.setSelectionRange(0,i.value.length),document.execCommand("Copy"),document.body.removeChild(i)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_System98);break;case this.codeBtn:this.wxLabel.visible?t.ViewManager.ins().open(t.FuliLuDaShiVipCodeView):t.UserTips.ins().showUITips(t.LanguageUtils.language_System98)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.rechargeBtn,this.onClick),this.removeTouchEvent(this.copyBtn,this.onClick),this.removeTouchEvent(this.codeBtn,this.onClick)},i}(t.BaseEuiView);t.FuliLuDaShiVipWin=e,__reflect(e.prototype,"app.FuliLuDaShiVipWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function t(){this.vipLevel=0,this.plusLevel=0,this.bindPhone=0,this.fcm=0,this.sVipGiftFlag=0,this.gameBoxGiftFlag=0,this.phoneBindGiftFlag=0,this.weChatGiftFlag=0,this.fcmGiftFlag=0,this.vipTitleFlag=0,this.vipGiftFlag=0,this.memberTitleFlag=0,this.memberGiftFlag=0,this.memberDailyGiftFlag=0,this.gameBoxDailyGiftFlag=0,this.gameBoxLevelGiftFlag=0}return t.prototype.readFuliInfo=function(t){this.vipLevel=t.readByte(),this.plusLevel=t.readByte(),this.bindPhone=t.readByte(),this.fcm=t.readByte(),this.sVipGiftFlag=t.readByte(),this.gameBoxGiftFlag=t.readByte(),this.phoneBindGiftFlag=t.readByte(),this.weChatGiftFlag=t.readByte(),this.fcmGiftFlag=t.readByte(),this.vipTitleFlag=t.readUnsignedInt(),this.vipGiftFlag=t.readUnsignedInt(),this.memberTitleFlag=t.readUnsignedInt(),this.memberGiftFlag=t.readUnsignedInt(),this.memberDailyGiftFlag=t.readByte(),this.gameBoxDailyGiftFlag=t.readByte(),this.gameBoxLevelGiftFlag=t.readUnsignedInt()},t.prototype.isGetAllVip=function(){return 0==this.sVipGiftFlag?!1:!0},t.prototype.isGetAllMicro=function(){return 0==this.gameBoxGiftFlag?!1:!0},Object.defineProperty(t,"loginWay",{get:function(){return window.userInfo.loginWay?1:0},enumerable:!0,configurable:!0}),t}();t.FuliLuDaShiInfo=e,__reflect(e.prototype,"app.FuliLuDaShiInfo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuliLuDaShiBindingGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuliLuDaShiInfo,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.itemList.itemRenderer=t.FuLi4366ItemView;var e=t.GlobalConfig.PlatformludashiConfig;e&&e.bindPhoneReward&&(this.itemList.dataProvider=new eui.ArrayCollection(e.bindPhoneReward)),this.observe(t.FuLi4366Mgr.ins().post_32_5,this.updateView),this.addTouchEvent(this.getBtn,this.onClick),this.updateView()},i.prototype.updateView=function(){this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.giftInfo&&(0==this.giftInfo.phoneBindGiftFlag?(this.getBtn.visible=!0,1==this.giftInfo.bindPhone&&(this.redPoint.visible=!0)):this.receiveImg.visible=!0)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.getBtn:this.giftInfo&&(0==this.giftInfo.phoneBindGiftFlag?1==this.giftInfo.bindPhone?t.FuLi4366Mgr.ins().send_32_13(3,1,0):window.BindPhoneFunction&&window.BindPhoneFunction():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips152))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.getBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.FuliLuDaShiBindingGift=e,__reflect(e.prototype,"app.FuliLuDaShiBindingGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuliLuDaShiBoxBuffSkin",t.initUI(),t}return __extends(i,e),i.prototype.onClick=function(e){switch(e.currentTarget){case this.microDownBtn:window.MicroDownFunction&&window.MicroDownFunction(),t.FuLi4366Mgr.ins().isDown=1,ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.microDownBtn,this.onClick)},i}(t.BaseEuiView);t.FuliLuDaShiBoxBuff=e,__reflect(e.prototype,"app.FuliLuDaShiBoxBuff")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuliLuDaShiBoxGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuliLuDaShiInfo,this.receiveBtn.visible=!1,this.microDownBtn.visible=!1,this.receiveImg.visible=!1,window.loginWay?this.receiveBtn.visible=!0:this.microDownBtn.visible=!0,this.itemList.itemRenderer=t.FuLi4366ItemView;var e=t.GlobalConfig.PlatformludashiConfig;e&&e.boxdailyGift&&(this.itemList.dataProvider=new eui.ArrayCollection(e.boxdailyGift)),this.observe(t.FuLi4366Mgr.ins().post_32_5,this.updateView),this.addTouchEvent(this.receiveBtn,this.onClick),this.addTouchEvent(this.microDownBtn,this.onClick),this.updateView()},i.prototype.updateView=function(){this.redPoint.visible=!1,this.giftInfo&&(0==this.giftInfo.gameBoxDailyGiftFlag?(this.receiveBtn.visible=!0,this.receiveImg.visible=!1,window.loginWay&&(this.redPoint.visible=!0)):(this.receiveBtn.visible=!1,this.receiveImg.visible=!0))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.receiveBtn:this.giftInfo&&(0==this.giftInfo.gameBoxDailyGiftFlag?t.FuLi4366Mgr.ins().send_32_13(4,2,0):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips153));break;case this.microDownBtn:window.MicroDownFunction&&window.MicroDownFunction(),t.FuLi4366Mgr.ins().isDown=1,ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.receiveBtn,this.onClick),this.removeTouchEvent(this.microDownBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.FuliLuDaShiBoxGift=e,__reflect(e.prototype,"app.FuliLuDaShiBoxGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuliLuDaShiDayGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuliLuDaShiInfo,this.receiveBtn.visible=!1,this.receiveImg.visible=!1,this.receiveBtn.visible=!0,this.itemList.itemRenderer=t.FuLi4366ItemView;var e=t.GlobalConfig.LudashimemberConfig[3];e&&e.giftReward&&(this.itemList.dataProvider=new eui.ArrayCollection(e.giftReward)),this.observe(t.FuLi4366Mgr.ins().post_32_5,this.updateView),this.addTouchEvent(this.receiveBtn,this.onClick),this.updateView()},i.prototype.updateView=function(){this.redPoint.visible=!1,this.giftInfo&&(0==this.giftInfo.memberDailyGiftFlag?(this.receiveBtn.visible=!0,this.receiveImg.visible=!1,this.giftInfo.plusLevel>0&&(this.redPoint.visible=!0)):(this.receiveBtn.visible=!1,this.receiveImg.visible=!0))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.receiveBtn:this.giftInfo&&(0==this.giftInfo.memberDailyGiftFlag?t.FuLi4366Mgr.ins().send_32_13(2,3,0):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips153))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.receiveBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.FuliLuDaShiDayGift=e,__reflect(e.prototype,"app.FuliLuDaShiDayGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuliLuDaShiIndulgeGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuliLuDaShiInfo,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.itemList.itemRenderer=t.FuLi4366ItemView;var e=t.GlobalConfig.PlatformludashiConfig;e&&e.FcmReward&&(this.itemList.dataProvider=new eui.ArrayCollection(e.FcmReward)),this.observe(t.FuLi4366Mgr.ins().post_32_5,this.updateView),this.addTouchEvent(this.getBtn,this.onClick),this.updateView()},i.prototype.updateView=function(){this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.giftInfo&&(0==this.giftInfo.fcmGiftFlag?(this.getBtn.visible=!0,1==this.giftInfo.fcm&&(this.redPoint.visible=!0)):this.receiveImg.visible=!0)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.getBtn:this.giftInfo&&(0==this.giftInfo.fcmGiftFlag?this.giftInfo.fcm?t.FuLi4366Mgr.ins().send_32_13(3,2,0):window.ActorInfoFunction&&window.ActorInfoFunction():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips152))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.getBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.FuliLuDaShiIndulgeGift=e,__reflect(e.prototype,"app.FuliLuDaShiIndulgeGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuliLuDaShiLevelGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuliLuDaShiInfo,this.list.itemRenderer=t.FuliLuDaShiLevelGiftItem,this.observe(t.FuLi4366Mgr.ins().post_32_5,this.updateView),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateView),this.updateView()},i.prototype.updateView=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getLevel(),n=this.giftInfo.gameBoxLevelGiftFlag,s=t.GlobalConfig.PlatformludashiConfig.levelGift,a=[];for(var r in s)a.push({id:r,needLevel:s[r].lvl,roleLevel:i,reward:s[r].awards,giftFlag:t.MathUtils.getValueAtBit(n,r)});this.list.dataProvider=new eui.ArrayCollection(a)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose()},i}(t.BaseEuiView);t.FuliLuDaShiLevelGift=e,__reflect(e.prototype,"app.FuliLuDaShiLevelGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuliLuDaShiSingleGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuliLuDaShiInfo,this.observe(t.FuLi4366Mgr.ins().post_32_5,this.updateView)},i.prototype.update=function(t){this._data=t,this.updateView()},i.prototype.updateView=function(){if(this._data){var e=this._data,i=0,n=0,s=0,a=0,r=e.data,o=r.description[0],l=r.description[1];1==e.giftType?(i=t.MathUtils.getValueAtBit(this.giftInfo.vipTitleFlag,r.id),n=t.MathUtils.getValueAtBit(this.giftInfo.vipGiftFlag,r.id),s=r.vipLevel,a=this.giftInfo.vipLevel):2==e.giftType&&(i=t.MathUtils.getValueAtBit(this.giftInfo.memberTitleFlag,r.id),n=t.MathUtils.getValueAtBit(this.giftInfo.memberGiftFlag,r.id),s=r.memberLevel,a=this.giftInfo.plusLevel),this.giftItem1.data={giftType:e.giftType,type:1,id:r.id,titleImg:o.titleImg,title:o.title,itemDesc:o.itemDesc,lvDesc:o.ldsDesc,rewardState:i,needLevel:s,vipLevel:a},this.giftItem2.data={giftType:e.giftType,type:2,id:r.id,reward:r.giftShowReward[0],title:l.title,itemDesc:l.itemDesc,lvDesc:l.ldsDesc,rewardState:n,needLevel:s,vipLevel:a}}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.giftInfo=null},i}(t.BaseEuiView);t.FuliLuDaShiSingleGift=e,__reflect(e.prototype,"app.FuliLuDaShiSingleGift")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="FuliLuDaShiWeiXinGiftSkin",e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this,e),this.$onClose()},e}(t.BaseEuiView);t.FuliLuDaShiWeiXinGift=e,__reflect(e.prototype,"app.FuliLuDaShiWeiXinGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i)},i.prototype.$onRemoveFromStage=function(){t.MessageCenter.ins().removeAll(this),e.prototype.$onRemoveFromStage.call(this)},i.prototype.dataChanged=function(){this.labelDisplay.text=this.data.txt+""},i}(eui.ItemRenderer);t.FuliLuDaShiGiftTab=e,__reflect(e.prototype,"app.FuliLuDaShiGiftTab")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuliLuDaShiLevelGiftItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onTouch),this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.list.itemRenderer=t.ItemBase},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onTouch)},i.prototype.onTouch=function(e){return this.data.roleLevel<this.data.needLevel?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips154):void t.FuLi4366Mgr.ins().send_32_13(4,3,this.data.id)},i.prototype.dataChanged=function(){if(this.data){var e=this.data;this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,e.giftFlag?this.receiveImg.visible=!0:(this.getBtn.visible=!0,e.roleLevel>=e.needLevel&&(this.redPoint.visible=!0)),this.list.dataProvider=new eui.ArrayCollection(e.reward);var i="|C:0xe50000&T:"+e.needLevel+"|";e.roleLevel>=e.needLevel&&(i="|C:0x28ee01&T:"+e.needLevel+"|"),this.desLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_266,i))}},i}(t.BaseItemRender);t.FuliLuDaShiLevelGiftItem=e,__reflect(e.prototype,"app.FuliLuDaShiLevelGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.buyBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.buyBtn,this.onTouch)},i.prototype.onTouch=function(e){return this.data.vipLevel<this.data.needLevel?void window.openLDSVip():void t.FuLi4366Mgr.ins().send_32_13(this.data.giftType,this.data.type,this.data.id)},i.prototype.dataChanged=function(){if(this.data){var e=this.data;this.itemData.visible=!1,this.titleImg.visible=!1,this.buyBtn.visible=!1,this.redPoint.visible=!1,this.receiveImg.visible=!1,e.rewardState?(this.buyBtn.visible=!1,this.receiveImg.visible=!0):(e.vipLevel>=e.needLevel?(this.buyBtn.label=t.LanguageUtils.language_Common_120,this.redPoint.visible=!0):e.vipLevel>0?this.buyBtn.label=t.LanguageUtils.language_Common_121:this.buyBtn.label=t.LanguageUtils.language_Common_122,this.buyBtn.visible=!0),this.titleDesc.textFlow=t.TextFlowMaker.generateTextFlow(e.title),this.lvDesc.textFlow=t.TextFlowMaker.generateTextFlow(e.lvDesc),this.itemDesc.textFlow=t.TextFlowMaker.generateTextFlow(e.itemDesc),e.titleImg&&(this.titleImg.visible=!0,this.titleImg.source=e.titleImg+""),e.reward&&(this.itemData.visible=!0,this.itemData.data=e.reward)}},i}(t.BaseItemRender);t.FuliLuDaShiSingleGiftItem=e,__reflect(e.prototype,"app.FuliLuDaShiSingleGiftItem")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"serverTime",{get:function(){return t.serverTimeBase+egret.getTimer()},enumerable:!0,configurable:!0}),t.serverTimeBase=0,t.serverTimeDifference=0,t.serverID=0,t.combineServerCount=0,t.sectionOpenDay=0,t.roleLevel=0,t.roleCircle={},t.otherPlayerId=0,t.otherPlayerName="",t.dicIcon={},t}();t.GlobalData=e,__reflect(e.prototype,"app.GlobalData")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.startDay=-1,this.startDayTime=-1,this.combineDay=-1,this.combineTime=-1,this.hasLogin=0,this.isSiege=-1}return t.prototype.getOpenDay=function(){return null},t}();t.ThemeActiveMgr=e,__reflect(e.prototype,"app.ThemeActiveMgr")}(app||(app={}));var how;!function(t){var e=function(){function e(t,e,i){void 0===t&&(t=300),void 0===e&&(e=2048),void 0===i&&(i=null),this.textMap={},this.needRender=!1,this.maxWidth=0,this.maxLabelWidth=0,this.maxLabelHeight=0,"webgl"==egret.Capabilities.renderMode&&(this.maxSize=e,this.compFun=i,this.container=new egret.DisplayObjectContainer,this.updateTime=egret.setInterval(this.render,this,t))}return e.prototype.debug=function(t){t.addChild(this.container)},e.prototype.addChild=function(t){if("webgl"==egret.Capabilities.renderMode&&t.key){this.textMap[t.key]=this.textMap[t.key]||{},this.textMap[t.key].qlabelList=this.textMap[t.key].qlabelList||[];var e=this.textMap[t.key].qlabelList;e.push(t),this.textMap[t.key].qlabelList=e,this.refresh()}},e.prototype.removeChild=function(t){if("webgl"==egret.Capabilities.renderMode){var e=this.textMap[t.key];if(e&&e.length>1){var i=e.indexOf(t);e.splice(i,1),this.textMap[t.key].qlabelList=e}else delete this.textMap[t.key];this.refresh()}},e.prototype.onChange=function(t,e){if("webgl"==egret.Capabilities.renderMode&&e.stage&&t!=e.key){if(this.textMap[e.key]=this.textMap[e.key]||{},t){var i=this.textMap[t];if(i&&i.length>1){var n=i.indexOf(e);i.splice(n,1),this.textMap[t].qlabelList=i}else delete this.textMap[t]}if(e.key){this.textMap[e.key].qlabelList=this.textMap[e.key].qlabelList||[];var i=this.textMap[e.key].qlabelList;i.push(e),this.textMap[e.key].qlabelList=i}this.refresh()}},e.prototype.refresh=function(){this.needRender=!0},e.prototype.render=function(){if(this.needRender){this.needRender=!1,this.maxLabelWidth=0,this.maxLabelHeight=0,this.container.removeChildren(),this.pack=new t.MaxRectsBinPack(this.maxSize,this.maxSize,!1);
var e=this.textMap;for(var i in e){var n=e[i].qlabelList,s=n[0].textField,a=s.getBounds();a.width+=4,a.height+=4;var r=this.pack.insert(a.width,a.height);if(!r.width)throw"DSpriteSheet的尺寸"+this.maxSize+"溢出，请新建一个DSpriteSheet对象";s.x=r.x,s.y=r.y,e[i].bounds=r,this.container.addChild(s)}this.spriteTexture||(this.spriteTexture=new egret.RenderTexture),this.spriteTexture.drawToTexture(this.container,new egret.Rectangle(0,0,this.maxSize,this.maxSize)),this.spriteSheet||(this.spriteSheet=new egret.SpriteSheet(this.spriteTexture));for(var i in e)for(var n=e[i].qlabelList,o=0;o<n.length;o++){var l=n[o],a=e[i].bounds;l.texture=this.spriteSheet.createTexture(i,Math.round(a.x),Math.round(this.maxSize-a.height-a.y+2),Math.round(a.width),Math.round(a.height-2)),this.maxLabelWidth=Math.max(this.maxLabelWidth,l.width+l.x-4),this.maxLabelHeight=Math.max(this.maxLabelHeight,l.height+l.y-4)}this.compFun&&this.compFun(this.maxLabelWidth,this.maxLabelHeight),this.container.removeChildren()}},e.prototype.updateCallback=function(t){void 0===t&&(t=null),this.compFun=t},e.prototype.dispose=function(){egret.clearInterval(this.updateTime),this.container&&this.container.numChildren>0&&this.container.removeChildren(),this.spriteSheet&&this.spriteSheet.dispose(),this.spriteTexture&&this.spriteTexture.dispose(),this.spriteSheet=this.spriteTexture=null},e}();t.DSpriteSheet=e,__reflect(e.prototype,"how.DSpriteSheet")}(how||(how={}));var how;!function(t){var e=function(){function t(t,e,i){this.binWidth=0,this.binHeight=0,this.allowRotations=!1,this.usedRectangles=[],this.freeRectangles=[],this.score1=0,this.score2=0,this.init(t,e,i)}return t.prototype.init=function(t,e,i){if(this.count(t)%1!=0||this.count(e)%1!=0)throw new Error("Must be 2,4,8,16,32,...512,1024,...");this.binWidth=t,this.binHeight=e,this.allowRotations=i;var n=new egret.Rectangle;n.x=0,n.y=0,n.width=t,n.height=e,this.usedRectangles.length=0,this.freeRectangles.length=0,this.freeRectangles.push(n)},t.prototype.count=function(t){return t>=2?this.count(t/2):t},t.prototype.insert=function(t,e,n){void 0===n&&(n=i.BestAreaFit);var s=new egret.Rectangle;switch(this.score1=0,this.score2=0,n){case i.BestShortSideFit:s=this.findPositionForNewNodeBestShortSideFit(t,e);break;case i.BottomLeftRule:s=this.findPositionForNewNodeBottomLeft(t,e,this.score1,this.score2);break;case i.ContactPointRule:s=this.findPositionForNewNodeContactPoint(t,e,this.score1);break;case i.BestLongSideFit:s=this.findPositionForNewNodeBestLongSideFit(t,e,this.score2,this.score1);break;case i.BestAreaFit:s=this.findPositionForNewNodeBestAreaFit(t,e,this.score1,this.score2)}return 0==s.height?s:(this.placeRectangle(s),s)},t.prototype.findPositionForNewNodeBestShortSideFit=function(t,e){var i=new egret.Rectangle;this.bestShortSideFit=Number.MAX_VALUE,this.bestLongSideFit=this.score2;for(var n,s,a,r,o,l=0;l<this.freeRectangles.length;l++){n=this.freeRectangles[l],n.width>=t&&n.height>=e&&(s=Math.abs(n.width-t),a=Math.abs(n.height-e),r=Math.min(s,a),o=Math.max(s,a),(r<this.bestShortSideFit||r==this.bestShortSideFit&&o<this.bestLongSideFit)&&(i.x=n.x,i.y=n.y,i.width=t,i.height=e,this.bestShortSideFit=r,this.bestLongSideFit=o));if(this.allowRotations&&n.width>=e&&n.height>=t){var h=Math.abs(n.width-e),p=Math.abs(n.height-t),u=Math.min(h,p),c=Math.max(h,p);(u<this.bestShortSideFit||u==this.bestShortSideFit&&c<this.bestLongSideFit)&&(i.x=n.x,i.y=n.y,i.width=e,i.height=t,this.bestShortSideFit=u,this.bestLongSideFit=c)}}return i},t.prototype.findPositionForNewNodeBottomLeft=function(t,e,i,n){var s=new egret.Rectangle;i=Number.MAX_VALUE;for(var a,r,o=0;o<this.freeRectangles.length;o++)a=this.freeRectangles[o],a.width>=t&&a.height>=e&&(r=a.y+e,(i>r||r==i&&a.x<n)&&(s.x=a.x,s.y=a.y,s.width=t,s.height=e,i=r,n=a.x)),this.allowRotations&&a.width>=e&&a.height>=t&&(r=a.y+t,(i>r||r==i&&a.x<n)&&(s.x=a.x,s.y=a.y,s.width=e,s.height=t,i=r,n=a.x));return s},t.prototype.findPositionForNewNodeContactPoint=function(t,e,i){var n=new egret.Rectangle;i=-1;for(var s,a,r=0;r<this.freeRectangles.length;r++)s=this.freeRectangles[r],s.width>=t&&s.height>=e&&(a=this.contactPointScoreNode(s.x,s.y,t,e),a>i&&(n.x=s.x,n.y=s.y,n.width=t,n.height=e,i=a)),this.allowRotations&&s.width>=e&&s.height>=t&&(a=this.contactPointScoreNode(s.x,s.y,e,t),a>i&&(n.x=s.x,n.y=s.y,n.width=e,n.height=t,i=a));return n},t.prototype.contactPointScoreNode=function(t,e,i,n){var s=0;(0==t||t+i==this.binWidth)&&(s+=n),(0==e||e+n==this.binHeight)&&(s+=i);for(var a,r=0;r<this.usedRectangles.length;r++)a=this.usedRectangles[r],(a.x==t+i||a.x+a.width==t)&&(s+=this.commonIntervalLength(a.y,a.y+a.height,e,e+n)),(a.y==e+n||a.y+a.height==e)&&(s+=this.commonIntervalLength(a.x,a.x+a.width,t,t+i));return s},t.prototype.commonIntervalLength=function(t,e,i,n){return i>e||t>n?0:Math.min(e,n)-Math.max(t,i)},t.prototype.findPositionForNewNodeBestLongSideFit=function(t,e,i,n){var s=new egret.Rectangle;n=Number.MAX_VALUE;for(var a,r,o,l,h,p=0;p<this.freeRectangles.length;p++)a=this.freeRectangles[p],a.width>=t&&a.height>=e&&(r=Math.abs(a.width-t),o=Math.abs(a.height-e),l=Math.min(r,o),h=Math.max(r,o),(n>h||h==n&&i>l)&&(s.x=a.x,s.y=a.y,s.width=t,s.height=e,i=l,n=h)),this.allowRotations&&a.width>=e&&a.height>=t&&(r=Math.abs(a.width-e),o=Math.abs(a.height-t),l=Math.min(r,o),h=Math.max(r,o),(n>h||h==n&&i>l)&&(s.x=a.x,s.y=a.y,s.width=e,s.height=t,i=l,n=h));return s},t.prototype.findPositionForNewNodeBestAreaFit=function(t,e,i,n){var s=new egret.Rectangle;i=Number.MAX_VALUE;for(var a,r,o,l,h,p=0;p<this.freeRectangles.length;p++)a=this.freeRectangles[p],h=a.width*a.height-t*e,a.width>=t&&a.height>=e&&(r=Math.abs(a.width-t),o=Math.abs(a.height-e),l=Math.min(r,o),(i>h||h==i&&n>l)&&(s.x=a.x,s.y=a.y,s.width=t,s.height=e,n=l,i=h)),this.allowRotations&&a.width>=e&&a.height>=t&&(r=Math.abs(a.width-e),o=Math.abs(a.height-t),l=Math.min(r,o),(i>h||h==i&&n>l)&&(s.x=a.x,s.y=a.y,s.width=e,s.height=t,n=l,i=h));return s},t.prototype.placeRectangle=function(t){for(var e=this.freeRectangles.length,i=0;e>i;i++)this.splitFreeNode(this.freeRectangles[i],t)&&(this.freeRectangles.splice(i,1),--i,--e);this.pruneFreeList(),this.usedRectangles.push(t)},t.prototype.splitFreeNode=function(t,e){if(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)return!1;var i;return e.x<t.x+t.width&&e.x+e.width>t.x&&(e.y>t.y&&e.y<t.y+t.height&&(i=t.clone(),i.height=e.y-i.y,this.freeRectangles.push(i)),e.y+e.height<t.y+t.height&&(i=t.clone(),i.y=e.y+e.height,i.height=t.y+t.height-(e.y+e.height),this.freeRectangles.push(i))),e.y<t.y+t.height&&e.y+e.height>t.y&&(e.x>t.x&&e.x<t.x+t.width&&(i=t.clone(),i.width=e.x-i.x,this.freeRectangles.push(i)),e.x+e.width<t.x+t.width&&(i=t.clone(),i.x=e.x+e.width,i.width=t.x+t.width-(e.x+e.width),this.freeRectangles.push(i))),!0},t.prototype.pruneFreeList=function(){for(var t=0;t<this.freeRectangles.length;t++)for(var e=t+1;e<this.freeRectangles.length;e++){if(this.isContainedIn(this.freeRectangles[t],this.freeRectangles[e])){this.freeRectangles.splice(t,1);break}this.isContainedIn(this.freeRectangles[e],this.freeRectangles[t])&&this.freeRectangles.splice(e,1)}},t.prototype.isContainedIn=function(t,e){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height},t}();t.MaxRectsBinPack=e,__reflect(e.prototype,"how.MaxRectsBinPack");var i;!function(t){t[t.BestShortSideFit=0]="BestShortSideFit",t[t.BottomLeftRule=1]="BottomLeftRule",t[t.ContactPointRule=2]="ContactPointRule",t[t.BestLongSideFit=3]="BestLongSideFit",t[t.BestAreaFit=4]="BestAreaFit"}(i=t.FreeRectangleChoiceHeuristic||(t.FreeRectangleChoiceHeuristic={}))}(how||(how={}));var how;!function(t){t.getQuickLabel=function(t,n){return void 0===n&&(n=1),"webgl"==egret.Capabilities.renderMode&&n?new i(t):new e};var e=function(t){function e(){var e=t.call(this)||this;return e.htmlParser=new egret.HtmlTextParser,e.size=i.modoleSize,e.textWidth=1,e}return __extends(e,t),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.width},set:function(t){this.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.height},set:function(t){this.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"htmlText",{get:function(){return this.text},set:function(t){this.textFlow=this.htmlParser.parser(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textStroke",{get:function(){return this.stroke},set:function(t){this.stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textStrokeColor",{get:function(){return this.strokeColor},set:function(t){this.strokeColor=t},enumerable:!0,configurable:!0}),e.modoleSize=30,e}(egret.TextField);t.CanvasQuickLabel=e,__reflect(e.prototype,"how.CanvasQuickLabel");var i=function(t){function e(i){var n=t.call(this)||this;n.htmlParser=new egret.HtmlTextParser,n._dSpriteSheet=i,n._textField=new egret.TextField,n._textField.size=e.modoleSize;n.textWidth;return n}return __extends(e,t),Object.defineProperty(e.prototype,"textField",{get:function(){return this._textField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dSpriteSheet",{get:function(){return this._dSpriteSheet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._textField.text},set:function(t){t.length||(t=" ");var e=this.key;this._textField.text=t,this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"htmlText",{get:function(){return this.text?this._htmlText:""},set:function(t){t.length||(t=" ");var e=this.key;this._htmlText=t,this._textField.textFlow=this.htmlParser.parser(t),this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFlow",{get:function(){return this._textField.textFlow},set:function(t){var e=this.key;this._textField.textFlow=t,this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._textField.textColor},set:function(t){var e=this.key;this._textField.textColor=t,this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this._textField.width},set:function(t){var e=this.key;this._textField.width=t,this.width=t,this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this._textField.height},set:function(t){var e=this.key;this._textField.height=t,this.height=t,this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineSpacing",{get:function(){return this._textField.lineSpacing},set:function(t){this._textField.lineSpacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._textField.size},set:function(t){var e=this.key;this._textField.size=t,this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this._textField.textAlign},set:function(t){var e=this.key;this._textField.textAlign=t,this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textVerticalAlign",{get:function(){return this._textField.verticalAlign},set:function(t){var e=this.key;this._textField.verticalAlign=t,this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textStroke",{get:function(){return this._textField.stroke},set:function(t){var e=this.key;this._textField.stroke=t,this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textStrokeColor",{get:function(){return this._textField.strokeColor},set:function(t){var e=this.key;this._textField.strokeColor=t,this._dSpriteSheet.onChange(e,this)},enumerable:!0,configurable:!0}),e.prototype.$onAddToStage=function(e,i){t.prototype.$onAddToStage.call(this,e,i),this._dSpriteSheet.addChild(this)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this._dSpriteSheet.removeChild(this)},Object.defineProperty(e.prototype,"textBoldType",{set:function(t){this._textField.bold=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._textField.text?this.getRealText()+","+this.textColor+","+this.textWidth+","+this.textHeight+","+this.size+","+this.textAlign+","+this._textField.hashCode:null},enumerable:!0,configurable:!0}),e.prototype.getRealText=function(){for(var t="",e=0;e<this.textFlow.length;e++){t+=this.textFlow[e].text;for(var i in this.textFlow[e].style)t+=this.textFlow[e].style[i]}return t},e.modoleSize=24,e}(egret.Bitmap);t.QuickLabel=i,__reflect(i.prototype,"how.QuickLabel")}(how||(how={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformFuliGiftViewData=e,__reflect(e.prototype,"app.PlatformFuliGiftViewData")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformFuliSuperVipGiftData=e,__reflect(e.prototype,"app.PlatformFuliSuperVipGiftData")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformFuliTabViewData=e,__reflect(e.prototype,"app.PlatformFuliTabViewData")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){return e.call(this,t)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){this.giftData=t.PlatformFuliManager.ins().platformFuliData,this.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo},i.prototype.initUI=function(){this.itemList.itemRenderer=t.PlatformFuliItemItem,this.itemList.dataProvider=new eui.ArrayCollection(this.getRewardList()),this.addTouchEvent(this.bindingBtn,this.onClick),this.addTouchEvent(this.getBtn,this.onClick),this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateView),this.updateView()},i.prototype.updateView=function(){this.bindingBtn.visible=!1,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.receiveFlag?this.receiveImg.visible=!0:this.bindPhone?(this.getBtn.visible=!0,this.redPoint.visible=this.redValue):this.bindingBtn.visible=!0},i.prototype.onClick=function(t){switch(t.currentTarget){case this.bindingBtn:this.onBindingBtn();break;case this.getBtn:this.onGetBtn()}},i.prototype.onBindingBtn=function(){this.giftData.onBindPhone()},i.prototype.onGetBtn=function(){this.giftData.onGetReward_phoneBindGift()},i.prototype.getRewardList=function(){return this.giftData.getReward_phoneBindGift()},Object.defineProperty(i.prototype,"redValue",{get:function(){return this.giftInfo.getRed_phoneBindGift()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"receiveFlag",{get:function(){return this.giftInfo.isGetPhoneBindGift()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bindPhone",{get:function(){return this.giftInfo.isPhoneBind()},enumerable:!0,configurable:!0}),i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.bindingBtn,this.onClick),this.removeTouchEvent(this.getBtn,this.onClick),this.giftData=null,this.giftInfo=null,this.data=null},i}(t.PlatformFuliGift);t.PlatformFuliBindingGift=e,__reflect(e.prototype,"app.PlatformFuliBindingGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.data=t,i.skinName=i.data.skinName,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){this.giftData=t.PlatformFuliManager.ins().platformFuliData,this.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo},i.prototype.initUI=function(){this.itemList.itemRenderer=t.PlatformFuliItemItem,this.itemList.dataProvider=new eui.ArrayCollection(this.getRewardList()),this.addTouchEvent(this.boxDownBtn,this.onClick),this.addTouchEvent(this.getBtn,this.onClick),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateView),this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateView),this.updateView()},i.prototype.updateView=function(){this.boxDownBtn.visible=!1,this.getBtn.visible=!1,this.redPoint.visible=!1,this.receiveImg.visible=!1,this.receiveFlag?this.receiveImg.visible=!0:(this.giftInfo.isBoxLogin()?this.getBtn.visible=!0:this.boxDownBtn.visible=!0,this.redPoint.visible=this.redValue)},i.prototype.onClick=function(t){switch(t.currentTarget){case this.boxDownBtn:this.onBoxDownBtn();break;case this.getBtn:this.onGetBtn()}},i.prototype.onBoxDownBtn=function(){this.giftData.onBoxDown()},i.prototype.onGetBtn=function(){this.giftInfo.isBoxLogin()&&this.giftData.onGetReward_boxDownGift()},i.prototype.getRewardList=function(){return this.giftData.getReward_boxDownGift()},Object.defineProperty(i.prototype,"redValue",{get:function(){return this.giftInfo.getRed_boxDownGift()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"receiveFlag",{get:function(){return this.giftInfo.isGetBoxDownGift()},enumerable:!0,configurable:!0}),i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.boxDownBtn,this.onClick),this.removeTouchEvent(this.getBtn,this.onClick),this.giftData=null,this.giftInfo=null,this.data=null},i}(t.BaseView);t.PlatformFuliBoxGift=e,__reflect(e.prototype,"app.PlatformFuliBoxGift")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);t.LoadingUI=e,__reflect(e.prototype,"app.LoadingUI")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.data=t,i.skinName=i.data.skinName,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){this.giftData=t.PlatformFuliManager.ins().platformFuliData,this.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo},i.prototype.initUI=function(){this.data.descList&&this.descList&&(this.descList.itemRenderer=t.PlatformFuliDescItem,this.descList.dataProvider=new eui.ArrayCollection(this.data.descList)),this.itemList.itemRenderer=t.PlatformFuliItemItem,this.itemList.dataProvider=new eui.ArrayCollection(this.getRewardList()),this.addTouchEvent(this.indulgeBtn,this.onClick),this.addTouchEvent(this.getBtn,this.onClick),this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateView),this.updateView()},i.prototype.updateView=function(){this.indulgeBtn.visible=!1,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.receiveFlag?this.receiveImg.visible=!0:this.indulge?(this.getBtn.visible=!0,this.redPoint.visible=this.redValue):this.indulgeBtn.visible=!0},i.prototype.onClick=function(t){switch(t.currentTarget){case this.indulgeBtn:this.onIndulgeBtn();break;case this.getBtn:this.onGetBtn()}},i.prototype.onIndulgeBtn=function(){this.giftData.onActorInfo()},i.prototype.onGetBtn=function(){return this.giftData.onGetReward_indulgeGift()},i.prototype.getRewardList=function(){return this.giftData.getReward_indulgeGift()},Object.defineProperty(i.prototype,"redValue",{get:function(){return this.giftInfo.getRed_indulgeGift()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"receiveFlag",{get:function(){return this.giftInfo.isGetIndulgeGift()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"indulge",{get:function(){return this.giftInfo.isIndulge()},enumerable:!0,configurable:!0}),i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.indulgeBtn,this.onClick),this.removeTouchEvent(this.getBtn,this.onClick),this.giftData=null,this.giftInfo=null,this.data=null},i}(t.BaseView);t.PlatformFuliIndulgeGift=e,__reflect(e.prototype,"app.PlatformFuliIndulgeGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.data=t,i.skinName=i.data.skinName,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){},i.prototype.initUI=function(){this.list.itemRenderer=this.data.itemClass,this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateView),this.updateView()},i.prototype.updateView=function(){this.list.dataProvider=new eui.ArrayCollection(this.data.rewardList)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.data=null},i}(t.BaseView);t.PlatformFuliLevelGift=e,__reflect(e.prototype,"app.PlatformFuliLevelGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.data=t,i.skinName=i.data.skinName,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){this.giftData=t.PlatformFuliManager.ins().platformFuliData,this.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo},i.prototype.initUI=function(){this.itemList.itemRenderer=t.PlatformFuliItemItem,this.itemList.dataProvider=new eui.ArrayCollection(this.getRewardList()),this.addTouchEvent(this.microDownBtn,this.onClick),this.addTouchEvent(this.getBtn,this.onClick),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateView),this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateView),this.updateView()},i.prototype.updateView=function(){this.microDownBtn.visible=!1,this.getBtn.visible=!1,this.redPoint.visible=!1,this.receiveImg.visible=!1,this.receiveFlag?this.receiveImg.visible=!0:(this.giftInfo.isWayLogin()?this.getBtn.visible=!0:this.microDownBtn.visible=!0,this.redPoint.visible=this.redValue)},i.prototype.onClick=function(t){switch(t.currentTarget){case this.microDownBtn:this.onMicroDownBtn();break;case this.getBtn:this.onGetBtn()}},i.prototype.onMicroDownBtn=function(){this.giftData.onMicroDown(),t.FuLi4366Mgr.ins().isDown=1,ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1)},i.prototype.onGetBtn=function(){this.giftInfo.isWayLogin()&&this.giftData.onGetReward_loginWayGift()},i.prototype.getRewardList=function(){return this.giftData.getReward_loginWayGift()},Object.defineProperty(i.prototype,"redValue",{get:function(){return this.giftInfo.getRed_microGift()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"receiveFlag",{get:function(){return this.giftInfo.isGetMicroGift()},enumerable:!0,configurable:!0}),i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.microDownBtn,this.onClick),this.removeTouchEvent(this.getBtn,this.onClick),this.giftData=null,this.giftInfo=null,this.data=null},i}(t.BaseView);t.PlatformFuliMicroGift=e,__reflect(e.prototype,"app.PlatformFuliMicroGift")}(app||(app={}));var app;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.skinName=i.data.skinName,i}return __extends(e,t),e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.data=null},e}(t.BaseView);t.PlatformFuliNothing=e,__reflect(e.prototype,"app.PlatformFuliNothing")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.isComplete=!1,i.data=t,i.skinName=i.data.skinName,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){},i.prototype.initUI=function(){this.lab2&&(this.lab2.text=t.LanguageUtils.language_System97),this.qqLabel&&(this.qqLabel.text=this.data.qqStr),this.wxLabel&&(this.wxLabel.text=this.data.wxStr),this.rechargeBtn&&this.addTouchEvent(this.rechargeBtn,this.onClick),this.copyBtn&&this.addTouchEvent(this.copyBtn,this.onClick),this.codeBtn&&this.addTouchEvent(this.codeBtn,this.onClick),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateData),this.updateData()},i.prototype.updateData=function(){this.isComplete=!1;var e=t.EntityMgr.ins().getPayer,i=this.data.showLimit-e.propSet.getRechargeSum();i>0?(this.qqLabel&&this.wxLabel?(this.lab.text=t.StringUtils.replace(t.LanguageUtils.language_System106,i),this.qqLabel.visible=!1,this.wxLabel.visible=!1):this.qqLabel?(this.lab.text=t.StringUtils.replace(t.LanguageUtils.language_System96,i),this.qqLabel.visible=!1):this.wxLabel?(this.lab.text=t.StringUtils.replace(t.LanguageUtils.language_System102,i),this.wxLabel.visible=!1):this.lab.text=t.StringUtils.replace(t.LanguageUtils.language_System107,i),this.lab.visible=!0,this.copyBtn&&(this.copyBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER),this.codeBtn&&(this.codeBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER)):(this.isComplete=!0,this.lab.visible=!1,this.qqLabel&&(this.qqLabel.visible=!0),this.wxLabel&&(this.wxLabel.visible=!0),this.copyBtn&&(this.copyBtn.filters=null),this.codeBtn&&(this.codeBtn.filters=null))},i.prototype.onClick=function(t){switch(t.currentTarget){case this.rechargeBtn:this.onRechargeBtn();break;case this.copyBtn:this.onCopyBtn();break;case this.codeBtn:this.onCodeBtn()}},i.prototype.onRechargeBtn=function(){t.RechargeMgr.ins().onPay("")},i.prototype.onCopyBtn=function(){if(this.isComplete){if(gamelib.DeviceUtils.IsMobile)return void t.UserTips.ins().showUITips("手机版暂不支持~");var e=document.createElement("input");e.value=this.data.copyValue,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e),t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips157)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_System98)},i.prototype.onCodeBtn=function(){this.isComplete?t.ViewManager.ins().open(t.PlatformFuliVipCodeView,this.data):t.UserTips.ins().showUITips(t.LanguageUtils.language_System98)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.rechargeBtn&&this.removeTouchEvent(this.rechargeBtn,this.onClick),this.copyBtn&&this.removeTouchEvent(this.copyBtn,this.onClick),this.codeBtn&&this.removeTouchEvent(this.codeBtn,this.onClick),this.data=null},i}(t.BaseView);t.PlatformFuliSuperVipGift=e,__reflect(e.prototype,"app.PlatformFuliSuperVipGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.data=t,i.skinName=i.data.skinName,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){this.giftData=t.PlatformFuliManager.ins().platformFuliData,this.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo},i.prototype.initUI=function(){this.itemData&&(this.itemData.data=this.getRewardList()),this.addTouchEvent(this.wxBuyBtn,this.onClick),this.observe(t.OtherMgr.ins().post_26_80,this.updateCode)},i.prototype.onClick=function(t){switch(t.currentTarget){case this.wxBuyBtn:this.onWxBuyBtn()}},i.prototype.updateCode=function(t){0==t&&this.giftData.getGiftInfo()},i.prototype.onWxBuyBtn=function(){""!=this.InputCode.text&&t.OtherMgr.ins().send_26_63(this.InputCode.text)},i.prototype.getRewardList=function(){return this.giftData.getReward_weixinGift()},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.wxBuyBtn,this.onClick),this.giftData=null,this.giftInfo=null,this.data=null},i}(t.BaseView);t.PlatformFuliWXGift=e,__reflect(e.prototype,"app.PlatformFuliWXGift")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="PlatformFuliBannerSkin",e}return __extends(e,t),e.prototype.update=function(t){this.bannerImg.source=t},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose()},e}(t.BaseView);t.PlatformFuliBanner=e,__reflect(e.prototype,"app.PlatformFuliBanner")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.numb.source="mun_"+this.data.index,this.descLab.text=this.data.desc)},e}(t.BaseItemRender);t.PlatformFuliDescItem=e,__reflect(e.prototype,"app.PlatformFuliDescItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.data){this.ItemData.data=this.data;var e=t.CurrencyUtils.getCurrencyNameIcon(this.data.type,this.data.id);e&&(this.itemName.text=e[0]+"")}},i}(t.BaseItemRender);t.PlatformFuliItemItem=e,__reflect(e.prototype,"app.PlatformFuliItemItem")}(app||(app={}));var PlatformFuliLevelGiftItem=function(){function t(){}return t}();__reflect(PlatformFuliLevelGiftItem.prototype,"PlatformFuliLevelGiftItem");var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i)},i.prototype.$onRemoveFromStage=function(){t.MessageCenter.ins().removeAll(this),e.prototype.$onRemoveFromStage.call(this)},i.prototype.dataChanged=function(){this.data&&(this.data.tabLab&&(this.labelDisplay.text=this.data.tabLab+""),this.updateRed())},i.prototype.updateRed=function(){this.data.redFunc&&(this.redPoint.visible=this.data.redFunc())},i}(eui.ItemRenderer);t.PlatformFuliTabItem=e,__reflect(e.prototype,"app.PlatformFuliTabItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.viewData=t.PlatformFuliManager.ins().platformFuliViewData,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.bannerGroup.visible=!1,this.titleImg.source=this.viewData.getViewData().titleStr},i.prototype.setOpenIndex=function(){var t=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(t){if(this._currPanel&&(this._currPanel.visible=!1),!this.paneHash[t.id]){var e=t.viewClass,i=new e(t.viewData);this.infoGroup.addChild(i),this.paneHash[t.id]=i}this._currPanel=this.paneHash[t.id],this._currPanel.visible=!0,this.showBanner(t.banner)}},i.prototype.showBanner=function(e){if(e&&!this._bannerPanel){var i=t.PlatformFuliManager.ins().platformFuliViewData.getViewData().banner;this._bannerPanel=new i,this._bannerPanel.update(e),this.bannerGroup.addChild(this._bannerPanel)}this.bannerGroup.visible=!!e},i.prototype.getTabBarAr=function(){return this.viewData.getGiftsViewData()},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this),this.viewData=null},i}(t.PlatformFuliView);t.PlatformFuliHallView=e,__reflect(e.prototype,"app.PlatformFuliHallView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.viewData=t.PlatformFuliManager.ins().platformFuliViewData,i.giftData=t.PlatformFuliManager.ins().platformFuliData,i.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo,i.skinName="PlatformFuliViewSkin3",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.titleImg.source="biaoti_wanshanziliao"},i.prototype.open=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.open.apply(this,i),this._currPanel=new t.PlatformFuliIndulgeGift(this.viewData.getIndulgeGiftData()),this.infoGroup.addChild(this._currPanel),this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateActorInfo)
},i.prototype.updateActorInfo=function(){this.giftInfo.isGetBoxDownGift()&&t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.viewData=null,this.giftData=null,this.giftInfo=null},i}(t.PlatformFuliView2);t.PlatformFuliIndulgeView=e,__reflect(e.prototype,"app.PlatformFuliIndulgeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.viewData=t.PlatformFuliManager.ins().platformFuliViewData,i.giftData=t.PlatformFuliManager.ins().platformFuliData,i.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo,i.skinName=i.viewData.getMicroGiftData().skinName,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.rewards.itemRenderer=t.ItemBase,this.rewards.dataProvider=new eui.ArrayCollection(this.getRewardList()),this.addTouchEvent(this.receiveBtn,this.onClick),this.addTouchEvent(this.microDownBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateView),this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateView),this.updateView()},i.prototype.updateView=function(){return this.giftInfo.isGetMicroGift()?void t.ViewManager.ins().close(this):(this.microDownBtn.visible=!1,this.receiveBtn.visible=!1,this.giftInfo.isWayLogin()?this.receiveBtn.visible=!0:this.microDownBtn.visible=!0,this.redPoint.visible=this.redValue,void(this.receiveImg.visible=this.receiveFlag))},i.prototype.onClick=function(t){switch(t.currentTarget){case this.receiveBtn:this.onReceiveBtn();break;case this.microDownBtn:this.onMicroDownBtn();break;case this.closeBtn:this.onCloseBtn()}},i.prototype.onReceiveBtn=function(){this.giftInfo.isWayLogin()&&this.giftData.onGetReward_loginWayGift()},i.prototype.onMicroDownBtn=function(){this.giftData.onMicroDown(),t.FuLi4366Mgr.ins().isDown=1,ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1)},i.prototype.onCloseBtn=function(){this.giftInfo.isWayLogin()||0!=t.FuLi4366Mgr.ins().isDown||(this.giftData.onMicroDown(),ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1)),t.ViewManager.ins().close(this)},i.prototype.getRewardList=function(){return this.giftData.getReward_loginWayGift()},Object.defineProperty(i.prototype,"redValue",{get:function(){return this.giftInfo.getRed_microGift()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"receiveFlag",{get:function(){return this.giftInfo.isGetMicroGift()},enumerable:!0,configurable:!0}),i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.receiveBtn,this.onClick),this.removeTouchEvent(this.microDownBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.viewData=null,this.giftData=null,this.giftInfo=null},i}(t.BaseEuiView);t.PlatformFuliMicroView=e,__reflect(e.prototype,"app.PlatformFuliMicroView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.viewData=t.PlatformFuliManager.ins().platformFuliViewData,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.titleImg.source="biaoti_chaojivip"},i.prototype.open=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.open.apply(this,i),this._currPanel=new t.PlatformFuliSuperVipGift(this.viewData.getSuperVipGiftData()),this.infoGroup.addChild(this._currPanel)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this),this.viewData=null},i}(t.PlatformFuliView2);t.PlatformFuliSuperVipView=e,__reflect(e.prototype,"app.PlatformFuliSuperVipView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.percentHeight=100,t.percentWidth=100,t}return __extends(i,e),i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.skinName=t[0].codeSkinName,this.addTouchEvent(this.dialogCloseBtn,this.onClick)},i.prototype.onClick=function(e){t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.dialogCloseBtn,this.onClick)},i}(t.BaseEuiView);t.PlatformFuliVipCodeView=e,__reflect(e.prototype,"app.PlatformFuliVipCodeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.viewData=t.PlatformFuliManager.ins().platformFuliViewData,i.giftData=t.PlatformFuliManager.ins().platformFuliData,i.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.titleImg.source="biaoti_weixinlibao"},i.prototype.open=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.open.apply(this,i),this._currPanel=new t.PlatformFuliWXGift(this.viewData.getWeixinGiftData()),this.infoGroup.addChild(this._currPanel),this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateActorInfo)},i.prototype.updateActorInfo=function(){this.giftInfo.isGetWeChatGift()&&t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.viewData=null,this.giftData=null,this.giftInfo=null},i}(t.PlatformFuliView2);t.PlatformFuliWeixinView=e,__reflect(e.prototype,"app.PlatformFuliWeixinView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getGiftInfo=function(){t.FuLi4366Mgr.ins().send_32_37(this.loginWay)},Object.defineProperty(i.prototype,"loginWay",{get:function(){return window.userInfo.wei&&1==parseInt(window.userInfo.wei)?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fcm",{get:function(){return window.userInfo.adult?parseInt(window.userInfo.adult):0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bindPhone",{get:function(){return window.userInfo.bindPhone?parseInt(window.userInfo.bindPhone):0},enumerable:!0,configurable:!0}),i.prototype.getReward_phoneBindGift=function(){var e=t.GlobalConfig.PlatformqidianConfig;return e&&e.bindPhoneReward?e.bindPhoneReward:[]},i.prototype.onGetReward_phoneBindGift=function(){t.FuLi4366Mgr.ins().send_32_38(2)},i}(t.PlatformFuliData);t.FuliQidianData=e,__reflect(e.prototype,"app.FuliQidianData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initData=function(){var e=t.PlatformFuliManager.ins().platformFuliData;e&&e.queryBindPhoneFunction()},i.prototype.readFuliInfo=function(t){this._phoneBindState=t.readByte(),this._svipGiftFlag=t.readByte(),this._phoneBindGiftFlag=t.readByte()},i}(t.PlatformFuliInfo);t.FuliQidianInfo=e,__reflect(e.prototype,"app.FuliQidianInfo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getViewData=function(){return{titleStr:"biaoti_bangdingyouli"}},i.prototype.getGiftsViewData=function(){var e=t.PlatformFuliManager.ins().platformFuliInfo;return[{id:1,tabLab:t.LanguageUtils.language_Omission_txt117,redFunc:e.getRed_phoneBindGift.bind(e),viewClass:t.PlatformFuliBindingGift,viewData:{skinName:"FuliQidianBindingGiftSkin"}}]},i.prototype.getSuperVipGiftData=function(){return{showLimit:t.GlobalConfig.PlatformqidianConfig.limit,qqStr:"800038605",copyValue:"800038605",skinName:"FuliQidianSuperVipGiftSkin"}},i}(t.PlatformFuliViewData);t.FuliQidianViewData=e,__reflect(e.prototype,"app.FuliQidianViewData")}(app||(app={}));var app;!function(t){var e;!function(t){t[t.OverviewPanel=0]="OverviewPanel",t[t.NovicePanel=1]="NovicePanel",t[t.GrowPanel=2]="GrowPanel",t[t.DayPanel=3]="DayPanel"}(e=t.QQBlueDiamondTabEnum||(t.QQBlueDiamondTabEnum={}));var i=function(i){function n(){var t=i.call(this)||this;return t._curIndex=-1,t.skinName="QQBlueDiamondViewSkin",t}return __extends(n,i),n.prototype.initUI=function(){i.prototype.initUI.call(this),this.tabBar.itemRenderer=t.QQBlueDiamondTabView,this.otherList.itemRenderer=t.QQBlueGiftItemRenderer,this.otherList2.itemRenderer=t.QQBlueOverviewItemRenderer,this.otherList3.itemRenderer=t.QQBlueGiftItemRenderer,this.otherList4.itemRenderer=t.QQBlueGiftItemRenderer,this.noviceList.itemRenderer=t.ItemBase,this.otherData=new eui.ArrayCollection,this.otherList.dataProvider=this.otherData,this.otherData2=new eui.ArrayCollection,this.otherList3.dataProvider=this.otherData2,this.otherData3=new eui.ArrayCollection,this.otherList4.dataProvider=this.otherData3,this.otherList2.dataProvider=new eui.ArrayCollection(["lz_tqzl1","lz_tqzl2","lz_tqzl3","lz_tqzl4"])},n.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._curIndex=0,this.blueLinkLab.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Common_207),t.MouseScroller.bind(this.otherScroller),this.addChangeEvent(this.tabBar,this.onTabTouch),this.addChangingEvent(this.tabBar,this.onTabTouching),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.receiveBtn,this.onClick),this.addTouchEvent(this.blueTipsImg,this.onClick),this.addTouchEvent(this.blueOpenBtn,this.onClick),this.addTouchEvent(this.blueOpenBtn2,this.onClick),this.addTouchEvent(this.blueLinkLab,this.onClick),this.observe(t.OtherMgr.ins().post_26_82,this.updateCurInfo),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateCurInfo),this.tabBar.dataProvider=new eui.ArrayCollection([{type:1,index:1,txt:t.LanguageUtils.language_Common_197},{type:1,index:2,txt:t.LanguageUtils.language_Common_193},{type:1,index:3,txt:t.LanguageUtils.language_Common_194},{type:1,index:4,txt:t.LanguageUtils.language_Common_195}]),this.tabBar.selectedIndex=this._curIndex,this.setOpenIndex(this._curIndex),t.OtherMgr.ins().send_26_7();var n=t.OtherMgr.ins().getQQBlueInfo();n[2]>0?(this.blueOpenBtn.source="lz_xflzbt",this.blueOpenBtn2.source="lz_xfnflzbt"):(this.blueOpenBtn.source="lz_ktlzbt",this.blueOpenBtn2.source="lz_ktnflzbt")},n.prototype.updateCurInfo=function(){-1!=this._curIndex&&this.setOpenIndex(this._curIndex)},n.prototype.onTabTouch=function(t){this.otherScroller.viewport.scrollV=0,this.otherScroller.stopAnimation(),this._curIndex=t.currentTarget.selectedIndex,this.setOpenIndex(t.currentTarget.selectedIndex)},n.prototype.onTabTouching=function(t){return this.checkIsOpen(t.currentTarget.selectedIndex)?void 0:void t.preventDefault()},n.prototype.checkIsOpen=function(t){switch(t){case e.OverviewPanel:return!0;case e.DayPanel:return!0;case e.NovicePanel:return!0;case e.GrowPanel:return!0}},n.prototype.setOpenIndex=function(i){this.noviceGrp.visible=!1,this.otherScroller.visible=!1,this.otherScroller2.visible=!1,this.dayGrp.visible=!1,this.receiveImg.visible=!1,this.receiveBtn.filters=null,this.receiveBtn.enabled=!0,this.receiveBtn.visible=!1,this.redPoint.visible=!1,this.blueTipsImg.visible=!1;var n,s=[],a=t.OtherMgr.ins().QQGiftInfo,r=t.OtherMgr.ins().getQQBlueInfo();switch(i){case e.OverviewPanel:this.otherScroller2.visible=!0;break;case e.DayPanel:this.dayGrp.visible=!0,n=t.GlobalConfig.BlueDiamondDailyConfig;var o=r?r[2]:0,l=n[o],h=[];if(!l){var p=0,u=0;for(var c in n)(n[c].level<p||0==p)&&(p=n[c].level),(n[c].level>u||0==p)&&(u=n[c].level);p>o?o=p:o>u&&(o=u),l=n[o]}for(var c in n){var g={rewards:n[c].reward1,lv:n[c].level,type:e.DayPanel,giftType:1,desc:t.StringUtils.replace(t.LanguageUtils.language_Common_198,n[c].level)};o==n[c].level?s.unshift([g]):s.push([g])}l&&(h.push([{rewards:l.reward2,lv:l.level,type:e.DayPanel,giftType:2,desc:t.LanguageUtils.language_Common_199,tips:t.LanguageUtils.language_Tips130}]),h.push([{rewards:l.reward3,lv:l.level,type:e.DayPanel,giftType:3,desc:t.LanguageUtils.language_Common_200,tips:t.LanguageUtils.language_Tips131}])),this.otherData2.replaceAll(s),this.otherData3.replaceAll(h);break;case e.NovicePanel:this.noviceGrp.visible=!0,n=t.GlobalConfig.PlatformQQConfig.reward3,n&&(this.noviceList.dataProvider=new eui.ArrayCollection(n)),t.isQQpf()&&a&&r&&r[0]>0?1==a.isNoviceGift?this.receiveImg.visible=!0:(this.receiveBtn.visible=!0,this.redPoint.visible=!0):(this.receiveBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER,this.receiveBtn.enabled=!1,this.receiveBtn.visible=!0);break;case e.GrowPanel:if(this.otherScroller.visible=!0,n=t.GlobalConfig.LevelBlueDiamondConfig)for(var c in n)s.push([{rewards:n[c].reward,day:n[c].id,lv:n[c].level,type:e.GrowPanel}]);this.otherData.replaceAll(s)}},n.prototype.onClick=function(i){switch(i.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.receiveBtn:if(t.isQQpf()){var n=t.OtherMgr.ins().QQGiftInfo,s=t.OtherMgr.ins().getQQBlueInfo();n&&s&&s[0]>0?this._curIndex==e.NovicePanel&&0==n.isNoviceGift&&t.OtherMgr.ins().send_26_8(1,0):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips128)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips128);break;case this.blueTipsImg:case this.blueOpenBtn:case this.blueOpenBtn2:window.openBlueFunction();break;case this.blueLinkLab:window.openQQBlueDiamond()}},n.prototype.close=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.prototype.close.call(this,e),this.$onClose(),t.MouseScroller.unbind(this.otherScroller),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.receiveBtn,this.onClick),this.removeTouchEvent(this.blueTipsImg,this.onClick),this.removeTouchEvent(this.blueOpenBtn,this.onClick),this.removeTouchEvent(this.blueOpenBtn2,this.onClick),this.removeTouchEvent(this.blueLinkLab,this.onClick),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.tabBar.removeEventListener(egret.TouchEvent.CHANGING,this.onTabTouching,this)},n}(t.BaseEuiView);t.QQBlueDiamondView=i,__reflect(i.prototype,"app.QQBlueDiamondView"),t.ViewManager.ins().reg(i,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e;!function(t){t[t.NovicePanel=0]="NovicePanel",t[t.GrowPanel=1]="GrowPanel",t[t.DayPanel=2]="DayPanel"}(e=t.QQLobbyTabEnum||(t.QQLobbyTabEnum={}));var i=function(i){function n(){var t=i.call(this)||this;return t._curIndex=-1,t.skinName="QQLobbyPrivilegesWinSkin",t}return __extends(n,i),n.prototype.initUI=function(){i.prototype.initUI.call(this),this.tabBar.itemRenderer=t.QQLobbyPrivilegesTabView,this.otherList.itemRenderer=t.QQLobbyPrivilegesGiftItemView,this.noviceList.itemRenderer=t.ItemBase,this.otherData=new eui.ArrayCollection,this.otherList.dataProvider=this.otherData},n.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._curIndex=0,t.MouseScroller.bind(this.otherScroller),this.addChangeEvent(this.tabBar,this.onTabTouch),this.addChangingEvent(this.tabBar,this.onTabTouching),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.receiveBtn,this.onClick),this.observe(t.FuLi4366Mgr.ins().post_32_2,this.updateCurInfo),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateCurInfo),this.tabBar.dataProvider=new eui.ArrayCollection([{type:1,index:1,txt:t.LanguageUtils.language_Common_193},{type:1,index:2,txt:t.LanguageUtils.language_Common_194},{type:1,index:3,txt:t.LanguageUtils.language_Common_195}]),this.tabBar.selectedIndex=this._curIndex,this.setOpenIndex(this._curIndex),t.FuLi4366Mgr.ins().send_32_7()},n.prototype.updateCurInfo=function(){-1!=this._curIndex&&this.setOpenIndex(this._curIndex)},n.prototype.onTabTouch=function(t){this.otherScroller.viewport.scrollV=0,this.otherScroller.stopAnimation(),this._curIndex=t.currentTarget.selectedIndex,this.setOpenIndex(t.currentTarget.selectedIndex)},n.prototype.onTabTouching=function(t){return this.checkIsOpen(t.currentTarget.selectedIndex)?void 0:void t.preventDefault()},n.prototype.checkIsOpen=function(t){switch(t){case e.NovicePanel:return!0;case e.GrowPanel:return!0;case e.DayPanel:return!0}},n.prototype.setOpenIndex=function(i){this.noviceGrp.visible=!1,this.otherScroller.visible=!1,this.receiveImg.visible=!1,this.receiveBtn.visible=!1,this.redPoint.visible=!1;var n,s=[],a=t.FuLi4366Mgr.ins().QQGiftInfo;switch(i){case e.NovicePanel:this.noviceGrp.visible=!0,this.noviceTitleImg.source="qqdt_xinshou_dabiaoti",n=t.GlobalConfig.PlatformQQConfig.reward1,n&&(this.noviceList.dataProvider=new eui.ArrayCollection(n)),t.isQQpf()&&a?1==a.ifRegisterGift?this.receiveImg.visible=!0:(this.receiveBtn.currentState="up",this.receiveBtn.visible=!0,1==window.loginWay&&(this.redPoint.visible=!0)):(this.receiveBtn.currentState="disabled",this.receiveBtn.visible=!0);break;case e.GrowPanel:if(this.otherScroller.visible=!0,n=t.GlobalConfig.LoginQQConfig)for(var r in n)s.push([{rewards:n[r].reward,day:n[r].id,lv:n[r].level,type:e.GrowPanel}]);this.otherData.replaceAll(s);break;case e.DayPanel:this.noviceGrp.visible=!0,this.noviceTitleImg.source="qqdt_meir_dabiaoti",n=t.GlobalConfig.PlatformQQConfig.reward2,n&&(this.noviceList.dataProvider=new eui.ArrayCollection(n)),t.isQQpf()&&a?1==a.isActiveGift?this.receiveImg.visible=!0:(this.receiveBtn.currentState="up",this.receiveBtn.visible=!0,1==window.loginWay&&(this.redPoint.visible=!0)):(this.receiveBtn.currentState="disabled",this.receiveBtn.visible=!0)}},n.prototype.onClick=function(i){switch(i.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.receiveBtn:if(t.isQQpf()){var n=t.FuLi4366Mgr.ins().QQGiftInfo;n?this._curIndex==e.NovicePanel?0==n.ifRegisterGift&&t.FuLi4366Mgr.ins().send_32_8():this._curIndex==e.DayPanel&&0==n.isActiveGift&&t.FuLi4366Mgr.ins().send_32_10():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips127)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips127)}},n.prototype.close=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.prototype.close.call(this,e),this.$onClose(),t.MouseScroller.unbind(this.otherScroller),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.receiveBtn,this.onClick),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.tabBar.removeEventListener(egret.TouchEvent.CHANGING,this.onTabTouching,this)},n}(t.BaseEuiView);t.QQLobbyPrivilegesWinView=i,__reflect(i.prototype,"app.QQLobbyPrivilegesWinView"),t.ViewManager.ins().reg(i,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.percentHeight=100,t.percentWidth=100,t.skinName="QQVipCodeSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.dialogCloseBtn,this.onClick)},i.prototype.onClick=function(e){t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.dialogCloseBtn,this.onClick)},i}(t.BaseEuiView);t.QQVipCodeView=e,__reflect(e.prototype,"app.QQVipCodeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.showLimit=1e4,t.showLabValue="TuTuG99",t.skinName="QQVipFuLiSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.rechargeBtn,this.onClick),this.addTouchEvent(this.copyBtn,this.onClick),this.addTouchEvent(this.codeBtn,this.onClick),this.lab2.text=t.LanguageUtils.language_System97,this.qqLabel.text=this.showLabValue,this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateData),this.updateData()},i.prototype.updateData=function(){var e=t.EntityMgr.ins().getPayer,i=this.showLimit-e.propSet.getRechargeSum();i>0?(this.lab.text=t.StringUtils.replace(t.LanguageUtils.language_System102,i),this.lab.visible=!0,this.qqLabel.visible=!1,this.copyBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER,this.codeBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER):(this.lab.visible=!1,this.qqLabel.visible=!0,this.copyBtn.filters=null,this.codeBtn.filters=null)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.rechargeBtn:t.RechargeMgr.ins().onPay("");break;case this.copyBtn:if(this.qqLabel.visible){var i=document.createElement("input");i.value=this.showLabValue,document.body.appendChild(i),i.select(),i.setSelectionRange(0,i.value.length),document.execCommand("Copy"),document.body.removeChild(i)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_System98);break;case this.codeBtn:this.qqLabel.visible?t.ViewManager.ins().open(t.QQVipCodeView):t.UserTips.ins().showUITips(t.LanguageUtils.language_System98)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.rechargeBtn,this.onClick),this.removeTouchEvent(this.copyBtn,this.onClick),this.removeTouchEvent(this.codeBtn,this.onClick)},i}(t.BaseEuiView);t.QQVipFuLiView=e,__reflect(e.prototype,"app.QQVipFuLiView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._showMessages="",t}return __extends(i,e),i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.addMsgListener()},i.prototype.$onRemoveFromStage=function(){t.MessageCenter.ins().removeAll(this),e.prototype.$onRemoveFromStage.call(this)},i.prototype.addMsgListener=function(){if(t.MessageCenter.ins().removeAll(this),this._showMessages="OtherMgr.post_26_82;DefaultMgr.post_updateLevel;",this._showMessages){for(var e=this._showMessages.split(";"),i=e.length,n=null,s=null,a=0;i>a;a++)s=e[a].split("."),n=egret.getDefinitionByName("app."+s[0]),n&&n.ins&&n.ins()[s[1]]&&t.MessageCenter.addListener(n.ins()[s[1]],this.delayUpdateShow,this);this.delayUpdateShow()}},i.prototype.delayUpdateShow=function(){t.TimerManager.ins().isExists(this.updateShow,this)||t.TimerManager.ins().doTimer(500,1,this.updateShow,this)},i.prototype.updateShow=function(){t.TimerManager.ins().remove(this.updateShow,this);var e=t.OtherMgr.ins().updateQQRed(this.data.type,this.data.index);this.redPoint.visible=e>0},i.prototype.dataChanged=function(){this.data&&this.data.txt&&(this.labelDisplay.text=this.data.txt+"")},i}(eui.ItemRenderer);t.QQBlueDiamondTabView=e,__reflect(e.prototype,"app.QQBlueDiamondTabView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.canGet=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rewards.itemRenderer=t.ItemBase,this.addTouchEvent(this.receiveBtn,this.onTouch),this.addMouseMoveEvent(this.receiveBtn,this.mouseMove),this.addMouseOverEvent(this.receiveBtn,this.mouseMove)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.receiveBtn,this.onTouch),this.removeMouseMoveEvent(this.receiveBtn,this.mouseMove),this.removeMouseOverEvent(this.receiveBtn,this.mouseMove)},i.prototype.onTouch=function(e){switch(e.currentTarget){case this.receiveBtn:this.data[0].type==t.QQBlueDiamondTabEnum.DayPanel?this.canGet&&t.OtherMgr.ins().send_26_8(3,this.data[0].giftType):this.data[0].type==t.QQBlueDiamondTabEnum.GrowPanel&&t.OtherMgr.ins().send_26_8(2,this.data[0].day)}},i.prototype.mouseMove=function(e){if(this.data[0].type==t.QQBlueDiamondTabEnum.DayPanel&&!this.canGet)if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else if(this.data[0].tips){var i=e.currentTarget.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,this.data[0].tips,{x:i.x+e.currentTarget.width/2,y:i.y+e.currentTarget.height/2}),i=null}},i.prototype.dataChanged=function(){if(this.data){this.receiveBtn.currentState="",this.receiveBtn.enabled=!0,this.receiveBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.canGet=!1;var e=t.OtherMgr.ins().QQGiftInfo,i=t.OtherMgr.ins().getQQBlueInfo(),n=0,s=0,a=t.EntityMgr.ins().getPayer;if(a&&a.propSet&&(n=a.propSet.getLevel()),this.rewards.dataProvider=new eui.ArrayCollection(this.data[0].rewards),this.data[0].type==t.QQBlueDiamondTabEnum.DayPanel)if(1==this.data[0].giftType?this.curDay.text=this.data[0].desc:this.curImg.source=2==this.data[0].giftType?"wenzi_lzhhbewlq":"wenzi_nflzgzewlq",t.isQQpf()){var r=i?i[2]:0;r==this.data[0].lv&&(1==this.data[0].giftType?i[0]>0&&(this.canGet=!0):2==this.data[0].giftType?2==i[0]&&(this.canGet=!0):3==this.data[0].giftType&&1==i[1]&&(this.canGet=!0)),e&&this.canGet?(s=t.MathUtils.getValueAtBit(e.isDayGift,this.data[0].giftType),s?this.receiveImg.visible=!0:(this.receiveBtn.visible=!0,this.redPoint.visible=!0)):(this.receiveBtn.currentState="disabled",this.receiveBtn.visible=!0)}else this.receiveBtn.enabled=!1,this.receiveBtn.visible=!0;else this.data[0].type==t.QQBlueDiamondTabEnum.GrowPanel&&(this.curDay.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_201,this.data[0].lv)),t.isQQpf()?e&&i&&i[0]>0&&n>=this.data[0].lv?(s=t.MathUtils.getValueAtBit(e.isLevelGift,this.data[0].day),s?this.receiveImg.visible=!0:(this.receiveImg.visible=!1,this.receiveBtn.visible=!0,this.redPoint.visible=!0)):(this.receiveBtn.enabled=!1,this.receiveBtn.currentState="disabled",this.receiveBtn.visible=!0):(this.receiveBtn.enabled=!1,this.receiveBtn.visible=!0))}},i}(t.BaseItemRender);t.QQBlueGiftItemRenderer=e,__reflect(e.prototype,"app.QQBlueGiftItemRenderer")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.img.source=this.data},e}(eui.ItemRenderer);t.QQBlueOverviewItemRenderer=e,__reflect(e.prototype,"app.QQBlueOverviewItemRenderer")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rewards.itemRenderer=t.ItemBase,this.addTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.onTouch=function(e){t.FuLi4366Mgr.ins().send_32_9(this.data[0].day)},i.prototype.dataChanged=function(){if(this.data){this.receiveBtn.enabled=!0,this.receiveBtn.visible=!0,this.receiveBtn.currentState="",this.receiveImg.visible=!1,this.redPoint.visible=!1;var e=t.FuLi4366Mgr.ins().QQGiftInfo,i=0,n=0,s=t.EntityMgr.ins().getPayer;s&&s.propSet&&(i=s.propSet.getLevel()),this.rewards.dataProvider=new eui.ArrayCollection(this.data[0].rewards),this.data[0].type==t.QQLobbyTabEnum.GrowPanel&&(this.curDay.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_196,this.data[0].lv)),t.isQQpf()?e&&i>=this.data[0].lv?(n=t.MathUtils.getValueAtBit(e.isLevelGift,this.data[0].day),n?(this.receiveBtn.visible=!1,this.receiveImg.visible=!0):(this.receiveImg.visible=!1,this.receiveBtn.enabled=!0,this.receiveBtn.visible=!0,this.redPoint.visible=!0,this.receiveBtn.currentState="")):(this.receiveBtn.enabled=!1,this.receiveBtn.currentState="disabled"):this.receiveBtn.enabled=!1)}},i}(t.BaseItemRender);t.QQLobbyPrivilegesGiftItemView=e,__reflect(e.prototype,"app.QQLobbyPrivilegesGiftItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._showMessages="",t}return __extends(i,e),i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.addMsgListener()},i.prototype.$onRemoveFromStage=function(){t.MessageCenter.ins().removeAll(this),e.prototype.$onRemoveFromStage.call(this)},i.prototype.addMsgListener=function(){if(t.MessageCenter.ins().removeAll(this),this._showMessages="FuLi4366Mgr.post_32_2;DefaultMgr.post_updateLevel;",this._showMessages){for(var e=this._showMessages.split(";"),i=e.length,n=null,s=null,a=0;i>a;a++)s=e[a].split("."),n=egret.getDefinitionByName("app."+s[0]),n&&n.ins&&n.ins()[s[1]]&&t.MessageCenter.addListener(n.ins()[s[1]],this.delayUpdateShow,this);this.delayUpdateShow()}},i.prototype.delayUpdateShow=function(){t.TimerManager.ins().isExists(this.updateShow,this)||t.TimerManager.ins().doTimer(500,1,this.updateShow,this)},i.prototype.updateShow=function(){t.TimerManager.ins().remove(this.updateShow,this);var e=t.FuLi4366Mgr.ins().updateQQRed(this.data.type,this.data.index);this.redPoint.visible=e>0},i.prototype.dataChanged=function(){this.data&&this.data.txt&&(this.labelDisplay.text=this.data.txt+"")},i}(eui.ItemRenderer);t.QQLobbyPrivilegesTabView=e,__reflect(e.prototype,"app.QQLobbyPrivilegesTabView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getGiftInfo=function(){t.FuLi4366Mgr.ins().send_32_55(this.loginWay)},i.prototype.getRuleIcon=function(){return"icon_shunwanghezi"},Object.defineProperty(i.prototype,"loginWay",{get:function(){if(window.userInfo.play_type){if("pc"==window.userInfo.play_type)return 1;if("box"==window.userInfo.play_type)return 3}return 0},enumerable:!0,configurable:!0}),i.prototype.getReward_phoneBindGift=function(){var e=t.GlobalConfig.PlatformshunwangConfig;return e&&e.bindPhoneReward?e.bindPhoneReward:[]},i.prototype.onGetReward_phoneBindGift=function(){t.FuLi4366Mgr.ins().send_32_56(2)},Object.defineProperty(i.prototype,"indulgeState",{get:function(){return window.userInfo.card_state&&1==parseInt(window.userInfo.card_state)&&window.userInfo.fcm?0==parseInt(window.userInfo.fcm)?1:2:0},enumerable:!0,configurable:!0}),i.prototype.getReward_indulgeGift=function(){var e=t.GlobalConfig.PlatformshunwangConfig;return e&&e.FcmReward?e.FcmReward:[]},i.prototype.onGetReward_indulgeGift=function(){t.FuLi4366Mgr.ins().send_32_56(3)},i.prototype.getReward_boxDownGift=function(){var e=t.GlobalConfig.PlatformshunwangConfig;return e&&e.downloadBoxReward?e.downloadBoxReward:[]},i.prototype.onGetReward_boxDownGift=function(){t.FuLi4366Mgr.ins().send_32_56(4)},i.prototype.getReward_boxLoginGift=function(){var e=[],i=t.GlobalConfig.PlatformshunwangConfig.loginGift;for(var n in i)e.push({id:n,day:i[n].day,reward:i[n].awards});return e},i.prototype.onGetReward_boxLoginGift=function(e){t.FuLi4366Mgr.ins().send_32_56(5,e)},i.prototype.getReward_boxLevelGift=function(){var e=[],i=t.GlobalConfig.PlatformshunwangConfig.levelGift;for(var n in i)e.push({id:n,level:i[n].lvl,reward:i[n].awards});return e},i.prototype.onGetReward_boxLevelGift=function(e){t.FuLi4366Mgr.ins().send_32_56(6,e)},i}(t.PlatformFuliData);t.FuliShunwangData=e,__reflect(e.prototype,"app.FuliShunwangData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initData=function(){var e=t.PlatformFuliManager.ins().platformFuliData;e&&(this._loginWay=e.loginWay,this._indulgeState=e.indulgeState)},i.prototype.readFuliInfo=function(t){this._loginDays=t.readDouble(),this._weChatGiftFlag=t.readByte(),this._phoneBindGiftFlag=t.readByte(),this._indulgeGiftFlag=t.readByte(),this._boxDownGiftFlag=t.readByte(),this._boxLoginGiftFlag=t.readByte(),this._boxLevelGiftFlag=t.readDouble(),console.log("登录天数:"+this._loginDays),console.log("微信 礼包领取标志:"+this._weChatGiftFlag),console.log("绑定手机 礼包领取标志:"+this._phoneBindGiftFlag),console.log("实名认证 礼包领取标志:"+this._indulgeGiftFlag),console.log("盒子下载 礼包领取标志:"+this._boxDownGiftFlag),console.log("盒子登录 礼包领取标志:"+this._boxLoginGiftFlag),console.log("盒子等级 礼包领取标志:"+this._boxLevelGiftFlag)
},i.prototype.getRed_viewGift=function(){return this.getRed_boxDownGift()?!0:this.getRed_boxLoginGift()?!0:this.getRed_boxLevelGift()?!0:!1},i}(t.PlatformFuliInfo);t.FuliShunwangInfo=e,__reflect(e.prototype,"app.FuliShunwangInfo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getViewData=function(){return{titleStr:"biaoti_datingtequan",banner:t.PlatformFuliBanner}},i.prototype.getGiftsViewData=function(){var e=t.PlatformFuliManager.ins().platformFuliInfo;return[{id:1,tabLab:t.LanguageUtils.language_Omission_txt164,banner:"banner_shunwang",redFunc:e.getRed_boxDownGift.bind(e),viewClass:t.PlatformFuliBoxGift,viewData:{skinName:"FuliShunwangBoxGiftSkin",redFunc:e.getRed_boxDownGift.bind(e)}},{id:2,tabLab:t.LanguageUtils.language_Common_125,banner:"banner_shunwang",redFunc:e.getRed_boxLevelGift.bind(e),viewClass:t.FuliShunwangLevelGift,viewData:{skinName:"FuliLuDaShiBoxGiftSkin"}},{id:3,tabLab:t.LanguageUtils.language_Common_124,banner:"banner_shunwang",redFunc:e.getRed_boxLoginGift.bind(e),viewClass:t.FuliShunwangLoginGift,viewData:{skinName:"FuliLuDaShiBoxGiftSkin"}}]},i.prototype.getIndulgeGiftData=function(){return{skinName:"PlatformFuliIndulgeGiftSkin2",descList:[{index:1,desc:t.LanguageUtils.language_Common_277},{index:2,desc:t.LanguageUtils.language_Common_278}]}},i.prototype.getWeixinGiftData=function(){return{skinName:"FuliShunwangWeixinGiftSkin"}},i}(t.PlatformFuliViewData);t.FuliShunwangViewData=e,__reflect(e.prototype,"app.FuliShunwangViewData")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.skinName="PlatformFuliLevelGiftSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){this.giftData=t.PlatformFuliManager.ins().platformFuliData,this.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo},i.prototype.initUI=function(){this.list.itemRenderer=t.FuliShunwangLevelGiftItem,this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateView),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateView),this.updateView()},i.prototype.updateView=function(){for(var e=t.EntityMgr.ins().getPayer,i=e.propSet.getLevel(),n=this.giftInfo.boxLevelGift,s=this.giftData.getReward_boxLevelGift(),a=[],r=0;r<s.length;r++){var o=s[r];a.push({id:o.id,needLevel:o.level,roleLevel:i,reward:o.reward,giftFlag:t.MathUtils.getValueAtBit(n,o.id)})}this.list.dataProvider=new eui.ArrayCollection(a)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.giftData=null,this.giftInfo=null,this.data=null},i}(t.BaseView);t.FuliShunwangLevelGift=e,__reflect(e.prototype,"app.FuliShunwangLevelGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.skinName="PlatformFuliLevelGiftSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){this.giftData=t.PlatformFuliManager.ins().platformFuliData,this.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo},i.prototype.initUI=function(){this.list.itemRenderer=t.FuliShunwangLoginGiftItem,this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateView),this.updateView()},i.prototype.updateView=function(){for(var e=this.giftInfo.loginDays,i=this.giftInfo.boxLoginGift,n=this.giftData.getReward_boxLoginGift(),s=[],a=0;a<n.length;a++){var r=n[a];s.push({id:r.id,needDay:r.day,day:e,reward:r.reward,giftFlag:t.MathUtils.getValueAtBit(i,r.id)})}this.list.dataProvider=new eui.ArrayCollection(s)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.giftData=null,this.giftInfo=null,this.data=null},i}(t.BaseView);t.FuliShunwangLoginGift=e,__reflect(e.prototype,"app.FuliShunwangLoginGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="PlatformFuliLevelGiftItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onTouch),this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.list.itemRenderer=t.ItemBase},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onTouch)},i.prototype.onTouch=function(e){return t.PlatformFuliManager.ins().platformFuliInfo.isBoxLogin()?this.data.roleLevel<this.data.needLevel?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips154):void t.PlatformFuliManager.ins().platformFuliData.onGetReward_boxLevelGift(this.data.id):void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips160)},i.prototype.dataChanged=function(){if(this.data){var e=this.data;this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,e.giftFlag?this.receiveImg.visible=!0:(this.getBtn.visible=!0,t.PlatformFuliManager.ins().platformFuliInfo.isBoxLogin()&&e.roleLevel>=e.needLevel&&(this.redPoint.visible=!0)),this.list.dataProvider=new eui.ArrayCollection(e.reward);var i="|C:0xe50000&T:"+e.needLevel+"|";e.roleLevel>=e.needLevel&&(i="|C:0x28ee01&T:"+e.needLevel+"|"),this.desLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_266,i))}},i}(t.BaseItemRender);t.FuliShunwangLevelGiftItem=e,__reflect(e.prototype,"app.FuliShunwangLevelGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="PlatformFuliLevelGiftItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onTouch),this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.list.itemRenderer=t.ItemBase},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onTouch)},i.prototype.onTouch=function(e){return t.PlatformFuliManager.ins().platformFuliInfo.isBoxLogin()?this.data.day<this.data.needDay?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips156):void t.PlatformFuliManager.ins().platformFuliData.onGetReward_boxLoginGift(this.data.id):void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips160)},i.prototype.dataChanged=function(){if(this.data){var e=this.data;this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,e.giftFlag?this.receiveImg.visible=!0:(this.getBtn.visible=!0,t.PlatformFuliManager.ins().platformFuliInfo.isBoxLogin()&&e.day>=e.needDay&&(this.redPoint.visible=!0)),this.list.dataProvider=new eui.ArrayCollection(e.reward);var i="|C:0xe50000&T:"+e.needDay+"|";e.day>=e.needDay&&(i="|C:0x28ee01&T:"+e.needDay+"|"),this.desLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_273,i))}},i}(t.BaseItemRender);t.FuliShunwangLoginGiftItem=e,__reflect(e.prototype,"app.FuliShunwangLoginGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="FuliSogouMicroWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.rewards.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.giftInfo=t.FuLi4366Mgr.ins().fuliSogouInfo,this.redPoint.visible=!1,this.microDownBtn.visible=!1,this.receiveBtn.visible=!1,3==t.FuliSogouInfo.loginWay?(this.receiveBtn.visible=!0,1!=this.giftInfo.microGiftFlag&&(this.redPoint.visible=!0)):(this.microDownBtn.visible=!0,1!=this.giftInfo.microGiftFlag&&t.EntityMgr.ins().getPayer&&t.EntityMgr.ins().getPayer.propSet&&t.EntityMgr.ins().getPayer.propSet.getLevel()>50&&(this.redPoint.visible=!0)),this.receiveImg.visible=1==this.giftInfo.microGiftFlag,this.addTouchEvent(this.receiveBtn,this.onClick),this.addTouchEvent(this.microDownBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick);var n=t.GlobalConfig.PlatformSogouConfig;n&&n.reward2?this.rewards.dataProvider=new eui.ArrayCollection(n.reward2):this.rewards.dataProvider=new eui.ArrayCollection([])},i.prototype.onClick=function(e){switch(e.currentTarget){case this.receiveBtn:3==t.FuliSogouInfo.loginWay&&t.FuLi4366Mgr.ins().send_32_25();break;case this.microDownBtn:window.MicroDownFunction&&window.MicroDownFunction(),t.FuLi4366Mgr.ins().isDown=1,ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1);break;case this.closeBtn:t.ViewManager.ins().close(this),1!=window.loginWay&&0==t.FuLi4366Mgr.ins().isDown&&(window.MicroDownFunction&&window.MicroDownFunction(),ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.receiveBtn,this.onClick),this.removeTouchEvent(this.microDownBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.FuliSogouMicroWin=e,__reflect(e.prototype,"app.FuliSogouMicroWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.showLabValue="2851638994",i.skinName="FuliSogouVipWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.showLimit=t.GlobalConfig.PlatformSogouConfig.limit,this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.rechargeBtn,this.onClick),this.addTouchEvent(this.copyBtn,this.onClick),this.qqLabel.text=this.showLabValue,this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateData),this.updateData()},i.prototype.updateData=function(){var e=t.EntityMgr.ins().getPayer,i=this.showLimit-e.propSet.getRechargeSum();i>0?(this.lab.text=t.StringUtils.replace(t.LanguageUtils.language_System96,i),this.lab.visible=!0,this.qqLabel.visible=!1,this.copyBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER):(this.lab.visible=!1,this.qqLabel.visible=!0,this.copyBtn.filters=null)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.rechargeBtn:t.RechargeMgr.ins().onPay("");break;case this.copyBtn:if(this.qqLabel.visible){if(gamelib.DeviceUtils.IsMobile)return void t.UserTips.ins().showUITips("手机版暂不支持~");var i=document.createElement("input");i.value=this.showLabValue,document.body.appendChild(i),i.select(),i.setSelectionRange(0,i.value.length),document.execCommand("Copy"),document.body.removeChild(i)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_System98)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.rechargeBtn,this.onClick),this.removeTouchEvent(this.copyBtn,this.onClick)},i}(t.BaseEuiView);t.FuliSogouVipWin=e,__reflect(e.prototype,"app.FuliSogouVipWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="FuliSogouWeixinWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.giftInfo=t.FuLi4366Mgr.ins().fuliSogouInfo,this.addTouchEvent(this.wxBuyBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.observe(t.FuLi4366Mgr.ins().postSogouGift,this.updateActorInfo),this.observe(t.OtherMgr.ins().post_26_80,this.updateCode)},i.prototype.updateActorInfo=function(){this.giftInfo&&this.giftInfo.isWxGift&&t.ViewManager.ins().close(this)},i.prototype.updateCode=function(e){0==e&&t.FuLi4366Mgr.ins().send_32_24(t.FuliSogouInfo.loginWay)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.wxBuyBtn:this.giftInfo&&(0==this.giftInfo.isWxGift?""!=this.InputCode.text&&t.OtherMgr.ins().send_26_63(this.InputCode.text):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips124));break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.wxBuyBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.FuliSogouWeixinWin=e,__reflect(e.prototype,"app.FuliSogouWeixinWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="FuliSogouWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.FuLi4366TabItemView},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.infoGroup.visible=!1,this.infoGroup2.visible=!1,this.bannerGroup.visible=!1,this.addChangeEvent(this.tabBar,this.setOpenIndex),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.downBtn,this.onClick),this.setTabInfo(),this.setOpenIndex()},i.prototype.setTabInfo=function(){var e=[];e.push({index:1,txt:t.LanguageUtils.language_Common_270}),e.push({index:2,txt:t.LanguageUtils.language_Common_271}),e.push({index:3,txt:t.LanguageUtils.language_Common_272}),e.push({index:4,txt:t.LanguageUtils.language_Omission_txt117}),this.tabBar.dataProvider=new eui.ArrayCollection(e),this.tabBar.selectedIndex=0},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.downBtn:window.datingDownFunction&&window.datingDownFunction()}},i.prototype.setOpenIndex=function(){var e=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(e){this.infoGroup.visible=!1,this.infoGroup2.visible=!1,this.bannerGroup.visible=!1;var i=e.index;this._currPanel&&(this._currPanel.visible=!1),1==i?(this.noviceGift||(this.noviceGift=new t.FuliSougouNoviceGift,this.infoGroup.addChild(this.noviceGift)),this._currPanel=this.noviceGift,this.infoGroup.visible=!0,this.bannerGroup.visible=!0):2==i?(this.dayGift||(this.dayGift=new t.FuliSougouLoginGift,this.infoGroup.addChild(this.dayGift)),this._currPanel=this.dayGift,this.infoGroup.visible=!0,this.bannerGroup.visible=!0):3==i?(this.levelGift||(this.levelGift=new t.FuliSougouLevelGift,this.infoGroup.addChild(this.levelGift)),this._currPanel=this.levelGift,this.infoGroup.visible=!0,this.bannerGroup.visible=!0):4==i&&(this.bindingGift||(this.bindingGift=new t.FuliSougouBindingGift,this.infoGroup2.addChild(this.bindingGift)),this._currPanel=this.bindingGift,this.infoGroup2.visible=!0),this._currPanel.visible=!0}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.setOpenIndex,this),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.downBtn,this.onClick),this._currPanel=null,this.noviceGift&&(this.noviceGift.close(),this.noviceGift.visible=!1),this.dayGift&&(this.dayGift.close(),this.dayGift.visible=!1),this.levelGift&&(this.levelGift.close(),this.levelGift.visible=!1),this.bindingGift&&(this.bindingGift.close(),this.bindingGift.visible=!1)},i}(t.BaseEuiView);t.FuliSogouWin=e,__reflect(e.prototype,"app.FuliSogouWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function e(){this.loginDays=0,this.isWxGift=0,this.noviceGiftFlag=0,this.loginGiftFlag=0,this.levelGiftFlag=0,this.microGiftFlag=0,this.phoneBindGiftFlag=0}return e.prototype.readFuliInfo=function(t){this.loginDays=t.readByte(),this.isWxGift=t.readByte(),this.microGiftFlag=t.readByte(),this.noviceGiftFlag=t.readByte(),this.loginGiftFlag=t.readInt(),this.levelGiftFlag=t.readInt(),this.phoneBindGiftFlag=t.readByte(),console.log("登陆天数:  "+this.loginDays),console.log("微信礼包是否领取:  "+this.isWxGift),console.log("输入法登陆礼包是否领取:  "+this.microGiftFlag),console.log("游戏大厅登陆新手礼包是否领取:  "+this.noviceGiftFlag),console.log("每日礼包:  "+this.loginGiftFlag),console.log("等级礼包:  "+this.levelGiftFlag),console.log("手机绑定:  "+this.phoneBindGiftFlag)},e.prototype.isGetAllMicro=function(){return 0==this.microGiftFlag?!1:!0},Object.defineProperty(e,"loginWay",{get:function(){if(window.userInfo.isLocal&&1==parseInt(window.userInfo.isLocal))return 1;if(window.userInfo.wanclient){if("mini"==window.userInfo.wanclient)return 2;if("skin"==window.userInfo.wanclient)return 3}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"fcm",{get:function(){return window.userInfo.cm?parseInt(window.userInfo.cm):0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bindPhone",{get:function(){return window.userInfo.bindPhone?parseInt(window.userInfo.bindPhone):0},enumerable:!0,configurable:!0}),e.prototype.getRed_weixinGift=function(){return 0==this.isWxGift?!0:!1},e.prototype.getRed_noviceGift=function(){return 0==this.noviceGiftFlag?!0:!1},e.prototype.getRed_loginGift=function(){return 0==this.loginGiftFlag?!0:!1},e.prototype.getRed_levelGift=function(){return 0==this.levelGiftFlag?!0:!1},e.prototype.getRed_microGift=function(){if(0==this.microGiftFlag){if(3==e.loginWay)return!0;if(t.EntityMgr.ins().getPayer&&t.EntityMgr.ins().getPayer.propSet&&t.EntityMgr.ins().getPayer.propSet.getLevel()>50)return!0}return!1},e.prototype.getRed_phoneBindGift=function(){return 0==this.phoneBindGiftFlag&&0!=e.bindPhone?!0:!1},e}();t.FuliSogouInfo=e,__reflect(e.prototype,"app.FuliSogouInfo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuliSougouBindingGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuliSogouInfo,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.itemList.itemRenderer=t.FuLi4366ItemView;var e=t.GlobalConfig.PlatformSogouConfig;e&&e.PhoneReward&&(this.itemList.dataProvider=new eui.ArrayCollection(e.PhoneReward)),this.observe(t.FuLi4366Mgr.ins().postSogouGift,this.updateView),this.addTouchEvent(this.getBtn,this.onClick),this.updateView()},i.prototype.updateView=function(){this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.giftInfo&&(0==this.giftInfo.phoneBindGiftFlag?(this.getBtn.visible=!0,1==t.FuliSogouInfo.bindPhone&&(this.redPoint.visible=!0)):this.receiveImg.visible=!0),window.queryBindPhoneFunction&&window.queryBindPhoneFunction()},i.prototype.onClick=function(e){switch(e.currentTarget){case this.getBtn:this.giftInfo&&(0==this.giftInfo.phoneBindGiftFlag?1==t.FuliSogouInfo.bindPhone?t.FuLi4366Mgr.ins().send_32_29():window.BindPhoneFunction&&window.BindPhoneFunction():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips152))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.getBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.FuliSougouBindingGift=e,__reflect(e.prototype,"app.FuliSougouBindingGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Fuli37LevelGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuliSogouInfo,this.list.itemRenderer=t.FuliSougouLevelGiftItem,this.observe(t.FuLi4366Mgr.ins().postSogouGift,this.updateView),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateView),this.updateView()},i.prototype.updateView=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getLevel(),n=this.giftInfo.levelGiftFlag,s=t.GlobalConfig.LevelSogouConfig,a=[];for(var r in s)a.push({id:r,needLevel:s[r].level,roleLevel:i,reward:s[r].reward,giftFlag:t.MathUtils.getValueAtBit(n,r)});this.list.dataProvider=new eui.ArrayCollection(a)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose()},i}(t.BaseEuiView);t.FuliSougouLevelGift=e,__reflect(e.prototype,"app.FuliSougouLevelGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Fuli37LevelGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuliSogouInfo,this.list.itemRenderer=t.FuliSougouLoginGiftItem,this.observe(t.FuLi4366Mgr.ins().postSogouGift,this.updateView),this.updateView()},i.prototype.updateView=function(){var e=this.giftInfo.loginDays,i=this.giftInfo.loginGiftFlag,n=t.GlobalConfig.LoginSogouConfig,s=[];for(var a in n)s.push({id:a,needLevel:n[a].day,roleLevel:e,reward:n[a].reward,giftFlag:t.MathUtils.getValueAtBit(i,a)});this.list.dataProvider=new eui.ArrayCollection(s)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose()},i}(t.BaseEuiView);t.FuliSougouLoginGift=e,__reflect(e.prototype,"app.FuliSougouLoginGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuliSougouNoviceGiftSkin",t.initUI(),t}return __extends(i,e),i.prototype.initUI=function(){this.giftInfo=t.FuLi4366Mgr.ins().fuliSogouInfo,this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.itemList.itemRenderer=t.FuLi4366ItemView;var e=t.GlobalConfig.PlatformSogouConfig;e&&e.reward1&&(this.itemList.dataProvider=new eui.ArrayCollection(e.reward1)),this.observe(t.FuLi4366Mgr.ins().postSogouGift,this.updateView),this.addTouchEvent(this.getBtn,this.onClick),this.updateView()},i.prototype.updateView=function(){this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.giftInfo&&(0==this.giftInfo.noviceGiftFlag?(this.getBtn.visible=!0,2==t.FuliSogouInfo.loginWay&&(this.redPoint.visible=!0)):this.receiveImg.visible=!0)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.getBtn:this.giftInfo&&(0==this.giftInfo.noviceGiftFlag?2==t.FuliSogouInfo.loginWay?t.FuLi4366Mgr.ins().send_32_26():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips155):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips152))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.getBtn,this.onClick),this.giftInfo=null},i}(t.BaseEuiView);t.FuliSougouNoviceGift=e,__reflect(e.prototype,"app.FuliSougouNoviceGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onTouch),this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.list.itemRenderer=t.ItemBase},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onTouch)},i.prototype.onTouch=function(e){return 2!=t.FuliSogouInfo.loginWay?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips155):this.data.roleLevel<this.data.needLevel?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips154):void t.FuLi4366Mgr.ins().send_32_28(this.data.id)},i.prototype.dataChanged=function(){if(this.data){var e=this.data;this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,e.giftFlag?this.receiveImg.visible=!0:(this.getBtn.visible=!0,e.roleLevel>=e.needLevel&&2==t.FuliSogouInfo.loginWay&&(this.redPoint.visible=!0));var i="|C:0xe50000&T:"+e.needLevel+"|";e.roleLevel>=e.needLevel&&(i="|C:0x28ee01&T:"+e.needLevel+"|"),this.list.dataProvider=new eui.ArrayCollection(e.reward),this.desLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_269,i))}},i}(t.BaseItemRender);t.FuliSougouLevelGiftItem=e,__reflect(e.prototype,"app.FuliSougouLevelGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onTouch),this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.list.itemRenderer=t.ItemBase},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onTouch)},i.prototype.onTouch=function(e){return 2!=t.FuliSogouInfo.loginWay?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips155):this.data.roleLevel<this.data.needLevel?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips156):void t.FuLi4366Mgr.ins().send_32_27(this.data.id)},i.prototype.dataChanged=function(){if(this.data){var e=this.data;this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,e.giftFlag?this.receiveImg.visible=!0:(this.getBtn.visible=!0,e.roleLevel>=e.needLevel&&2==t.FuliSogouInfo.loginWay&&(this.redPoint.visible=!0));var i="|C:0xe50000&T:"+e.needLevel+"|";e.roleLevel>=e.needLevel&&(i="|C:0x28ee01&T:"+e.needLevel+"|"),this.list.dataProvider=new eui.ArrayCollection(e.reward),this.desLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_273,i))}},i}(t.BaseItemRender);t.FuliSougouLoginGiftItem=e,__reflect(e.prototype,"app.FuliSougouLoginGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getGiftInfo=function(){t.FuLi4366Mgr.ins().send_32_43()},Object.defineProperty(i.prototype,"loginWay",{get:function(){return window.userInfo.type&&"pc"==window.userInfo.type?1:0},enumerable:!0,configurable:!0}),i.prototype.getReward_phoneBindGift=function(){var e=t.GlobalConfig.PlatformTanwanConfig;return e&&e.PhoneReward?e.PhoneReward:[]},i.prototype.onGetReward_phoneBindGift=function(){t.FuLi4366Mgr.ins().send_32_44(2)},i.prototype.getReward_indulgeGift=function(){var e=t.GlobalConfig.PlatformTanwanConfig;return e&&e.IdentityReward?e.IdentityReward:[]},i.prototype.onGetReward_indulgeGift=function(){t.FuLi4366Mgr.ins().send_32_44(5)},i.prototype.getReward_sanduanGift=function(){var e=t.GlobalConfig.PlatformTanwanConfig;return e&&e.ClientReward?e.ClientReward:[]},i.prototype.onGetReward_sanduanGift=function(){var e=t.PlatformFuliManager.ins().platformFuliInfo;return e.isLoginPhonePC()?void t.FuLi4366Mgr.ins().send_32_44(7):void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips159)},i.prototype.getReward_weixinGift=function(){var e=t.GlobalConfig.PlatformTanwanConfig;return e&&e.WechatRewardGift?e.WechatRewardGift[0]:{}},i}(t.PlatformFuliData);t.FuliTanwanData=e,__reflect(e.prototype,"app.FuliTanwanData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.platformLoginFlag=0,t.downLoadBoxGiftFlag=0,t.platformLoginGiftFlag=0,t}return __extends(i,e),i.prototype.initData=function(){var e=t.PlatformFuliManager.ins().platformFuliData;e&&(this._loginWay=e.loginWay)},i.prototype.readFuliInfo=function(t){this._indulgeState=t.readByte(),this._phoneBindState=t.readByte(),this.platformLoginFlag=t.readByte(),this._svipGiftFlag=t.readByte(),this._phoneBindGiftFlag=t.readByte(),this._qqGroupGiftFlag=t.readByte(),this._weChatGiftFlag=t.readByte(),this._indulgeGiftFlag=t.readByte(),this.downLoadBoxGiftFlag=t.readByte(),this.platformLoginGiftFlag=t.readByte()},i.prototype.isLoginPhonePC=function(){return this.platformLoginFlag>4},i.prototype.isGetSanduanGift=function(){return this.platformLoginGiftFlag>0},i.prototype.getRed_sanduanGift=function(){return!this.isGetSanduanGift()&&this.isLoginPhonePC()?!0:!1},i.prototype.getRed_viewGift=function(){return this.getRed_phoneBindGift()?!0:this.getRed_indulgeGift()?!0:this.getRed_qqGroupGift()?!0:this.getRed_sanduanGift()?!0:this.getRed_weChatGift()?!0:!1},i}(t.PlatformFuliInfo);t.FuliTanwanInfo=e,__reflect(e.prototype,"app.FuliTanwanInfo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getViewData=function(){return{titleStr:"biaoti_yxdt"}},i.prototype.getGiftsViewData=function(){var e=t.PlatformFuliManager.ins().platformFuliInfo;return[{id:1,tabLab:t.LanguageUtils.language_Omission_txt117,redFunc:e.getRed_phoneBindGift.bind(e),viewClass:t.PlatformFuliBindingGift,viewData:{skinName:"PlatformFuliBindingGiftSkin"}},{id:2,tabLab:t.LanguageUtils.language_Omission_txt118,redFunc:e.getRed_indulgeGift.bind(e),viewClass:t.PlatformFuliIndulgeGift,viewData:{skinName:"PlatformFuliIndulgeGiftSkin"}},{id:3,tabLab:t.LanguageUtils.language_Omission_txt141,redFunc:e.getRed_qqGroupGift.bind(e),viewClass:t.PlatformFuliNothing,viewData:{skinName:"FuliTanwanQQGroupGiftSkin",redFunc:e.getRed_qqGroupGift.bind(e)}},{id:5,tabLab:t.LanguageUtils.language_Omission_txt163,redFunc:e.getRed_weChatGift.bind(e),viewClass:t.PlatformFuliWXGift,viewData:{skinName:"FuliTanwanWeixinGiftSkin"}}]},i.prototype.getSuperVipGiftData=function(){return{showLimit:2e4,skinName:"FuliTanwanSuperVipGiftSkin",codeSkinName:"FuliTanwanVipCodeSkin"}},i}(t.PlatformFuliViewData);t.FuliTanwanViewData=e,__reflect(e.prototype,"app.FuliTanwanViewData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.viewData=t.PlatformFuliManager.ins().platformFuliViewData,i.giftData=t.PlatformFuliManager.ins().platformFuliData,i.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo,i.skinName="FuliXunwanGiftWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.paneHash={},this.tabBar.itemRenderer=t.FuliLuDaShiGiftTab,this.tabBar2.itemRenderer=t.PlatformFuliTabItem},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.labVipLevel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_274,this.giftData.getVipStr(this.giftInfo.vipLevel))),this.openVipLab1.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_280+"</u>"),this.openVipLab2.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_281+"</u>"),this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateAllTabRed),this.addChangeEvent(this.tabBar,this.setOpenIndex),this.addChangeEvent(this.tabBar2,this.setOpenIndex2),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.openVipLab1,this.onClick),this.addTouchEvent(this.openVipLab2,this.onClick),this.tabBar.dataProvider=new eui.ArrayCollection(this.getTabBarAr()),this.tabBar.selectedIndex=0,this.setOpenIndex()},i.prototype.updateAllTabRed=function(){for(var t=this.tabBar2.numElements,e=0;t>e;e++){var i=this.tabBar2.getElementAt(e);i&&i.updateRed()}},i.prototype.setOpenIndex=function(){this.tabBar2.dataProvider=new eui.ArrayCollection(this.getTabBarAr2()[this.tabBar.selectedIndex]),this.tabBar2.selectedIndex=0,this.setOpenIndex2()},i.prototype.setOpenIndex2=function(){this.updatePanel()},i.prototype.updatePanel=function(){var t=0,e=this.tabBar.selectedIndex,i=this.tabBar2.selectedIndex;1==e&&(0==i?t=1:1==i&&(t=2));var n=this.viewData.getGiftsViewData()[t];if(n){if(this._currPanel&&(this._currPanel.visible=!1),!this.paneHash[n.id]){var s=n.viewClass,a=new s(n.viewData);this.infoGroup.addChild(a),this.paneHash[n.id]=a}this._currPanel=this.paneHash[n.id],this._currPanel.visible=!0,0==t&&this._currPanel.update(i)}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);
break;case this.openVipLab1:case this.openVipLab2:this.giftData.openSuperVip()}},i.prototype.getTabBarAr=function(){return[{txt:t.LanguageUtils.language_Omission_txt165},{txt:t.LanguageUtils.language_Omission_txt166}]},i.prototype.getTabBarAr2=function(){return[[{tabLab:t.LanguageUtils.language_Omission_txt167,redFunc:this.giftInfo.getRed_MemberTitleGift.bind(this.giftInfo,1)},{tabLab:t.LanguageUtils.language_Omission_txt168,redFunc:this.giftInfo.getRed_MemberTitleGift.bind(this.giftInfo,2)},{tabLab:t.LanguageUtils.language_Omission_txt169,redFunc:this.giftInfo.getRed_MemberTitleGift.bind(this.giftInfo,3)},{tabLab:t.LanguageUtils.language_Omission_txt170,redFunc:this.giftInfo.getRed_MemberTitleGift.bind(this.giftInfo,4)}],[{tabLab:t.LanguageUtils.language_Omission_txt171,redFunc:this.giftInfo.getRed_MemberPrivilegeGift.bind(this.giftInfo)},{tabLab:t.LanguageUtils.language_Omission_txt172,redFunc:this.giftInfo.getRed_MemberDailyGift.bind(this.giftInfo)}]]},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this),this.$onClose(),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.setOpenIndex,this.giftInfo),this.tabBar2.removeEventListener(egret.TouchEvent.CHANGE,this.setOpenIndex2,this.giftInfo),this.removeTouchEvent(this.closeBtn,this.onClick);for(var n in this.paneHash){var s=this.paneHash[n];s.close(),s=null,delete this.paneHash[n]}this.paneHash=null,this._currPanel=null,this.viewData=null,this.giftData=null,this.giftInfo=null},i}(t.BaseEuiView);t.FuliXunwanGiftWin=e,__reflect(e.prototype,"app.FuliXunwanGiftWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getGiftInfo=function(){t.FuLi4366Mgr.ins().send_32_60()},Object.defineProperty(i.prototype,"vipLevel",{get:function(){var t=parseInt(window.userInfo.isvip),e=parseInt(window.userInfo.isyear),i=parseInt(window.userInfo.vas_type);parseInt(window.userInfo.xlvip);return t>0?i>3?1==e?4:2:1==e?3:1:0},enumerable:!0,configurable:!0}),i.prototype.onGetReward_titleGift=function(e){t.FuLi4366Mgr.ins().send_32_61(1,e)},i.prototype.getReward_titleGift=function(){var e=[],i=t.GlobalConfig.XunwantitleConfig;for(var n in i)e.push(i[n]);return e},i.prototype.onGetReward_tequanGift=function(e){t.FuLi4366Mgr.ins().send_32_61(2,e)},i.prototype.getReward_tequanGift=function(){var e=[],i=t.GlobalConfig.PlatformxunwanConfig;if(i&&i.vipGift)for(var n in i.vipGift){var s=i.vipGift[n];e.push({id:n,needLevel:s.vip,reward:s.awards})}return e},i.prototype.onGetReward_dayGift=function(e){t.FuLi4366Mgr.ins().send_32_61(3,e)},i.prototype.getReward_dayGift=function(){var e=[],i=t.GlobalConfig.PlatformxunwanConfig;if(i&&i.dailyGift)for(var n in i.dailyGift){var s=i.dailyGift[n];e.push({id:n,needLevel:s.viplvl,reward:s.awards})}return e},i.prototype.openSuperVip=function(){window.openSuperVip&&window.openSuperVip()},i.prototype.getVipStr=function(e){return 1==e?t.LanguageUtils.language_Omission_txt167:2==e?t.LanguageUtils.language_Omission_txt168:3==e?t.LanguageUtils.language_Omission_txt169:4==e?t.LanguageUtils.language_Omission_txt170:t.LanguageUtils.language_Omission_txt173},i}(t.PlatformFuliData);t.FuliXunwanData=e,__reflect(e.prototype,"app.FuliXunwanData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.vipLevel=0,t.MemberTitleGiftFlag=0,t.MemberPrivilegeGiftFlag=0,t.MemberDailyGiftFlag=0,t}return __extends(i,e),i.prototype.initData=function(){var e=t.PlatformFuliManager.ins().platformFuliData;e&&(this._loginWay=e.loginWay,this.vipLevel=e.vipLevel)},i.prototype.readFuliInfo=function(t){this.MemberTitleGiftFlag=t.readUnsignedInt(),this.MemberPrivilegeGiftFlag=t.readUnsignedInt(),this.MemberDailyGiftFlag=t.readUnsignedInt(),console.log("会员专属称号领取标志:"+this.MemberTitleGiftFlag),console.log("特权礼包领取标志:"+this.MemberPrivilegeGiftFlag),console.log("每日礼包领取标志:"+this.MemberDailyGiftFlag)},i.prototype.getRed_MemberTitleGift=function(e){if(void 0===e&&(e=0),0==e){for(var i=1;5>i;i++)if(this.vipLevel>=i&&!t.MathUtils.getValueAtBit(this.MemberTitleGiftFlag,i))return!0}else if(this.vipLevel>=e&&!t.MathUtils.getValueAtBit(this.MemberTitleGiftFlag,e))return!0;return!1},i.prototype.getRed_MemberPrivilegeGift=function(e){if(void 0===e&&(e=0),0==e){for(var i=1;5>i;i++)if(this.vipLevel>=i&&!t.MathUtils.getValueAtBit(this.MemberPrivilegeGiftFlag,i))return!0}else if(this.vipLevel>=e&&!t.MathUtils.getValueAtBit(this.MemberPrivilegeGiftFlag,e))return!0;return!1},i.prototype.getRed_MemberDailyGift=function(e){if(void 0===e&&(e=0),0==e){for(var i=1;5>i;i++)if(this.vipLevel>=i&&!t.MathUtils.getValueAtBit(this.MemberDailyGiftFlag,i))return!0}else if(this.vipLevel>=e&&!t.MathUtils.getValueAtBit(this.MemberDailyGiftFlag,e))return!0;return!1},i.prototype.getRed_viewGift=function(){return this.getRed_MemberTitleGift()?!0:this.getRed_MemberPrivilegeGift()?!0:this.getRed_MemberDailyGift()?!0:!1},i}(t.PlatformFuliInfo);t.FuliXunwanInfo=e,__reflect(e.prototype,"app.FuliXunwanInfo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getViewData=function(){return{titleStr:""}},i.prototype.getGiftsViewData=function(){var e=t.PlatformFuliManager.ins().platformFuliData;return[{id:1,tabLab:"",viewClass:t.FuliXunwanSingleGift,viewData:{skinName:"FuliXunwanSingleGiftSkin",rewardList:e.getReward_titleGift()}},{id:2,tabLab:"",viewClass:t.PlatformFuliLevelGift,viewData:{skinName:"FuliXunwanLevelGiftSkin",rewardList:e.getReward_tequanGift(),itemClass:t.FuliXunwanVipGiftItem}},{id:3,tabLab:"",viewClass:t.PlatformFuliLevelGift,viewData:{skinName:"FuliXunwanLevelGiftSkin",rewardList:e.getReward_dayGift(),itemClass:t.FuliXunwanDayGiftItem}}]},i}(t.PlatformFuliViewData);t.FuliXunwanViewData=e,__reflect(e.prototype,"app.FuliXunwanViewData")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.data=t,i.skinName=i.data.skinName,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.initUI()},i.prototype.initData=function(){this.giftData=t.PlatformFuliManager.ins().platformFuliData,this.giftInfo=t.PlatformFuliManager.ins().platformFuliInfo},i.prototype.initUI=function(){this.observe(t.FuLi4366Mgr.ins().post_updatePlatformFuli,this.updateView)},i.prototype.update=function(t){this._index=t,this.updateView()},i.prototype.updateView=function(){this.giftItem.data=this.data.rewardList[this._index]},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.giftData=null,this.giftInfo=null},i}(t.BaseView);t.FuliXunwanSingleGift=e,__reflect(e.prototype,"app.FuliXunwanSingleGift")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onTouch),this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.list.itemRenderer=t.ItemBase},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onTouch)},i.prototype.onTouch=function(e){var i=t.PlatformFuliManager.ins().platformFuliData,n=t.PlatformFuliManager.ins().platformFuliInfo,s=n.vipLevel,a=this.data.needLevel;return a>s?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips161):void i.onGetReward_dayGift(this.data.id)},i.prototype.dataChanged=function(){if(this.data){var e=this.data,i=t.PlatformFuliManager.ins().platformFuliData,n=t.PlatformFuliManager.ins().platformFuliInfo,s=n.vipLevel,a=e.needLevel,r=t.MathUtils.getValueAtBit(n.MemberDailyGiftFlag,e.id),o=e.reward;this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,r?this.receiveImg.visible=!0:(this.getBtn.visible=!0,s>=a&&(this.redPoint.visible=!0)),this.list.dataProvider=new eui.ArrayCollection(o);var l=void 0;l=s>=a?"|C:0x28ee01&T:"+i.getVipStr(a)+"|":"|C:0xe50000&T:"+i.getVipStr(a)+"|",this.desLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_279,l))}},i}(t.BaseItemRender);t.FuliXunwanDayGiftItem=e,__reflect(e.prototype,"app.FuliXunwanDayGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.buyBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.buyBtn,this.onTouch)},i.prototype.onTouch=function(e){var i=t.PlatformFuliManager.ins().platformFuliData,n=t.PlatformFuliManager.ins().platformFuliInfo;return n.vipLevel<this.data.vipLevel?void i.openSuperVip():void i.onGetReward_titleGift(this.data.id)},i.prototype.dataChanged=function(){if(this.data){var e=this.data,i=t.PlatformFuliManager.ins().platformFuliInfo,n=i.vipLevel,s=e.vipLevel,a=t.MathUtils.getValueAtBit(i.MemberTitleGiftFlag,e.id),r=e.description[0];this.itemData.visible=!1,this.titleImg.visible=!1,this.buyBtn.visible=!1,this.redPoint.visible=!1,this.receiveImg.visible=!1,a?(this.buyBtn.visible=!1,this.receiveImg.visible=!0):(n>=s?(this.buyBtn.label=t.LanguageUtils.language_Common_120,this.redPoint.visible=!0):n>0?this.buyBtn.label=t.LanguageUtils.language_Common_121:this.buyBtn.label=t.LanguageUtils.language_Common_122,this.buyBtn.visible=!0),this.titleDesc.textFlow=t.TextFlowMaker.generateTextFlow(r.title),this.lvDesc.textFlow=t.TextFlowMaker.generateTextFlow(r.ldsDesc),this.itemDesc.textFlow=t.TextFlowMaker.generateTextFlow(r.itemDesc),r.titleImg&&(this.titleImg.visible=!0,this.titleImg.source=r.titleImg+""),r.titleReward&&(this.itemData.visible=!0,this.itemData.data=r.titleReward)}},i}(t.BaseItemRender);t.FuliXunwanSingleGiftItem=e,__reflect(e.prototype,"app.FuliXunwanSingleGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onTouch),this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.list.itemRenderer=t.ItemBase},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onTouch)},i.prototype.onTouch=function(e){var i=t.PlatformFuliManager.ins().platformFuliData,n=t.PlatformFuliManager.ins().platformFuliInfo,s=n.vipLevel,a=this.data.needLevel;return a>s?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips161):void i.onGetReward_tequanGift(this.data.id)},i.prototype.dataChanged=function(){if(this.data){var e=this.data,i=t.PlatformFuliManager.ins().platformFuliData,n=t.PlatformFuliManager.ins().platformFuliInfo,s=n.vipLevel,a=e.needLevel,r=t.MathUtils.getValueAtBit(n.MemberPrivilegeGiftFlag,e.id),o=e.reward;this.getBtn.visible=!1,this.receiveImg.visible=!1,this.redPoint.visible=!1,r?this.receiveImg.visible=!0:(this.getBtn.visible=!0,s>=a&&(this.redPoint.visible=!0)),this.list.dataProvider=new eui.ArrayCollection(o);var l=void 0;l=s>=a?"|C:0x28ee01&T:"+i.getVipStr(a)+"|":"|C:0xe50000&T:"+i.getVipStr(a)+"|",this.desLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_279,l))}},i}(t.BaseItemRender);t.FuliXunwanVipGiftItem=e,__reflect(e.prototype,"app.FuliXunwanVipGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.getGiftInfo=function(){t.FuLi4366Mgr.ins().send_32_41()},i}(t.PlatformFuliData);t.FuliYaodouData=e,__reflect(e.prototype,"app.FuliYaodouData")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.readFuliInfo=function(t){this._svipGiftFlag=t.readByte()},e}(t.PlatformFuliInfo);t.FuliYaodouInfo=e,__reflect(e.prototype,"app.FuliYaodouInfo")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSuperVipGiftData=function(){return{showLimit:2e4,skinName:"FuliYaodaoSuperVipGiftSkin",wxStr:"tcyydyx",copyValue:"tcyydyx"}},e}(t.PlatformFuliViewData);t.FuliYaodouViewData=e,__reflect(e.prototype,"app.FuliYaodouViewData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rewards.itemRenderer=t.ItemBase,this.addTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.onTouch=function(e){var i=t.ActvityMgr.ins().YYchaowanInfo,n=0,s=t.EntityMgr.ins().getPayer;if(s&&s.propSet&&(n=s.propSet.getVip()),i&&n>=this.data[0].lv){var a=t.MathUtils.getValueAtBit(i.dailyGift,this.data[0].day);a?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips100):t.ActvityMgr.ins().send_25_11(this.data[0].day)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips101)},i.prototype.dataChanged=function(){if(this.redPoint.visible=!1,this.data&&this.data[0]){this.rewards.dataProvider=new eui.ArrayCollection(this.data[0].rewards);var e="V"+this.data[0].lv+"-V"+this.data[0].maxLv+t.LanguageUtils.language_Common_131,i=1==this.data[0].day?"0x24D8FF":2==this.data[0].day?"0xFC00FF":"0xFFE624";this.title.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+i+"&T:"+e+"|");var n=t.ActvityMgr.ins().YYchaowanInfo,s=0,a=t.EntityMgr.ins().getPayer;if(a&&a.propSet&&(s=a.propSet.getVip()),n&&s>=this.data[0].lv){this.count.visible=!0;var r=t.MathUtils.getValueAtBit(n.dailyGift,this.data[0].day);r?this.count.text=t.LanguageUtils.language_Common_132+"0/1":(this.count.text=t.LanguageUtils.language_Common_132+"1/1",this.redPoint.visible=!0)}else this.count.visible=!1}},i}(t.BaseItemRender);t.YYChaoWanDailyItem=e,__reflect(e.prototype,"app.YYChaoWanDailyItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._curIndex=-1,t.maxLvArr=[5,8,10],t.skinName="YYChaoWanWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.YYLobbyPrivilegesTabView,this.otherList.itemRenderer=t.YYLobbyPrivilegesGiftItemView,this.dailyList.itemRenderer=t.YYChaoWanDailyItem,this.otherData=new eui.ArrayCollection,this.otherList.dataProvider=this.otherData,this.dailyData=new eui.ArrayCollection,this.dailyList.dataProvider=this.dailyData},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._curIndex=0,this.addChangeEvent(this.tabBar,this.onTabTouch),this.addChangingEvent(this.tabBar,this.onTabTouching),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.exchangeChaoWan,this.onClick),this.addTouchEvent(this.moreGift,this.onClick),this.addTouchEvent(this.chaowanLv,this.onClick),this.observe(t.ActvityMgr.ins().post_25_11,this.updateCurInfo),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateCurInfo),this.tabBar.dataProvider=new eui.ArrayCollection([{type:3,index:1,txt:t.LanguageUtils.language_Common_133},{type:3,index:2,txt:t.LanguageUtils.language_Common_134}]),this.tabBar.selectedIndex=this._curIndex;var n=0,s=t.EntityMgr.ins().getPayer;s&&s.propSet&&(n=s.propSet.getVip()),this.chaowanLv.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+n+"</u>"),this.setOpenIndex(this._curIndex)},i.prototype.updateCurInfo=function(){-1!=this._curIndex&&this.setOpenIndex(this._curIndex)},i.prototype.onTabTouch=function(t){this._curIndex=t.currentTarget.selectedIndex,this.setOpenIndex(t.currentTarget.selectedIndex)},i.prototype.onTabTouching=function(t){return this.checkIsOpen(t.currentTarget.selectedIndex)?void 0:void t.preventDefault()},i.prototype.checkIsOpen=function(t){switch(t){case 0:return!0;case 1:return!0}},i.prototype.setOpenIndex=function(e){this.otherScroller.visible=!0,this.dailyScroller.visible=!0;var i,n=[];if(0==e){if(this.dailyScroller.visible=!1,i=t.GlobalConfig.GameVIPConfig.vipGiftDisplay)for(var s in i)n.push([{rewards:i[s].rewards,day:i[s].index,type:4,lv:i[s].viplvl}]);this.otherData.replaceAll(n),this.otherData.refresh()}else if(1==e){if(this.otherScroller.visible=!1,i=t.GlobalConfig.GameVIPConfig.dailyGiftDisplay)for(var s in i)n.push([{rewards:i[s].rewards,day:i[s].index,lv:i[s].viplvl,maxLv:this.maxLvArr[i[s].index-1]}]);this.dailyData.replaceAll(n),this.dailyData.refresh()}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.exchangeChaoWan:window.openChaoWanVip();break;case this.moreGift:window.openChaoWanVip();break;case this.chaowanLv:window.openChaoWanVip()}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.exchangeChaoWan,this.onClick),this.removeTouchEvent(this.moreGift,this.onClick),this.removeTouchEvent(this.chaowanLv,this.onClick),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.tabBar.removeEventListener(egret.TouchEvent.CHANGING,this.onTabTouching,this)},i}(t.BaseEuiView);t.YYChaoWanWin=e,__reflect(e.prototype,"app.YYChaoWanWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rewards.itemRenderer=t.ItemBase,this.addTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.onTouch=function(e){if(1==this.data[0].type)t.ActvityMgr.ins().send_25_4(this.data[0].day);else if(2==this.data[0].type)t.ActvityMgr.ins().send_25_5(this.data[0].day);else if(3==this.data[0].type)t.ActvityMgr.ins().send_25_6(this.data[0].day);else if(4==this.data[0].type){var i=0,n=t.EntityMgr.ins().getPayer;n&&n.propSet&&(i=n.propSet.getVip()),i>=this.data[0].lv?t.ActvityMgr.ins().send_25_10(this.data[0].day):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips95)}},i.prototype.dataChanged=function(){if(this.data){this.receiveBtn.enabled=!0,this.receiveBtn.visible=!0,this.receiveBtn.currentState="",this.receiveImg.visible=!1,this.redPoint.visible=!1;var e=t.ActvityMgr.ins().YYInfo,i=0,n=0,s=t.EntityMgr.ins().getPayer;if(s&&s.propSet&&(i=s.propSet.getLevel()),this.rewards.dataProvider=new eui.ArrayCollection(this.data[0].rewards),1==this.data[0].type)this.curDay.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_127,this.data[0].day)),10001==Main.gameParameter.pfID&&window.loginWay?e&&e.YYLoginDay>=this.data[0].day?(n=t.MathUtils.getValueAtBit(e.YYLoginGift,this.data[0].day),n?(this.receiveBtn.visible=!1,this.receiveImg.visible=!0):(this.receiveImg.visible=!1,this.receiveBtn.enabled=!0,this.receiveBtn.visible=!0,this.redPoint.visible=!0,this.receiveBtn.currentState="")):(this.receiveBtn.enabled=!1,this.receiveBtn.currentState="disabled"):this.receiveBtn.enabled=!1;else if(2==this.data[0].type)this.curDay.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_128,this.data[0].lv)),10001==Main.gameParameter.pfID&&window.loginWay?e&&i>=this.data[0].lv?(n=t.MathUtils.getValueAtBit(e.YYLevelGift,this.data[0].day),n?(this.receiveBtn.visible=!1,this.receiveImg.visible=!0):(this.receiveImg.visible=!1,this.receiveBtn.enabled=!0,this.receiveBtn.visible=!0,this.redPoint.visible=!0,this.receiveBtn.currentState="")):(this.receiveBtn.enabled=!1,this.receiveBtn.currentState="disabled"):this.receiveBtn.enabled=!1;else if(3==this.data[0].type)this.curDay.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_129,this.data[0].yyLv)),10001==Main.gameParameter.pfID&&window.loginWay?e&&e.YYIdentity>=this.data[0].day?(n=t.MathUtils.getValueAtBit(e.YYNobleGift,this.data[0].day),n?(this.receiveBtn.visible=!1,this.receiveImg.visible=!0):(this.receiveImg.visible=!1,this.receiveBtn.enabled=!0,this.receiveBtn.visible=!0,this.receiveBtn.currentState="",this.redPoint.visible=!0)):(this.receiveBtn.enabled=!1,this.receiveBtn.currentState="disabled"):this.receiveBtn.enabled=!1;else if(4==this.data[0].type){this.curDay.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_130,this.data[0].lv));var a=0;s&&s.propSet&&(a=s.propSet.getVip());var r=t.ActvityMgr.ins().YYchaowanInfo;r&&a>=this.data[0].lv?(n=t.MathUtils.getValueAtBit(r.vipGift,this.data[0].day),n?(this.receiveBtn.visible=!1,this.receiveImg.visible=!0):(this.receiveImg.visible=!1,this.receiveBtn.enabled=!0,this.receiveBtn.currentState="",this.receiveBtn.visible=!0,this.redPoint.visible=!0)):this.receiveBtn.currentState="disabled"}}},i}(t.BaseItemRender);t.YYLobbyPrivilegesGiftItemView=e,__reflect(e.prototype,"app.YYLobbyPrivilegesGiftItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._showMessages="",t}return __extends(i,e),i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.addMsgListener()},i.prototype.$onRemoveFromStage=function(){t.MessageCenter.ins().removeAll(this),e.prototype.$onRemoveFromStage.call(this)},i.prototype.addMsgListener=function(){if(t.MessageCenter.ins().removeAll(this),this._showMessages="ActvityMgr.post_25_9;ActvityMgr.post_25_10;ActvityMgr.post_25_11;FuLi4366Mgr.post_32_35;",this._showMessages){for(var e=this._showMessages.split(";"),i=e.length,n=null,s=null,a=0;i>a;a++)s=e[a].split("."),n=egret.getDefinitionByName("app."+s[0]),n&&n.ins&&n.ins()[s[1]]&&t.MessageCenter.addListener(n.ins()[s[1]],this.delayUpdateShow,this);this.delayUpdateShow()}},i.prototype.delayUpdateShow=function(){t.TimerManager.ins().isExists(this.updateShow,this)||t.TimerManager.ins().doTimer(500,1,this.updateShow,this)},i.prototype.updateShow=function(){t.TimerManager.ins().remove(this.updateShow,this);var e=t.ActvityMgr.ins().updateYYRed(this.data.type,this.data.index);this.redPoint.visible=e>0},i.prototype.dataChanged=function(){this.data&&this.data.txt&&(this.labelDisplay.text=this.data.txt+"")},i}(eui.ItemRenderer);t.YYLobbyPrivilegesTabView=e,__reflect(e.prototype,"app.YYLobbyPrivilegesTabView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._curIndex=-1,t.YYLv=[4,16,64],t.skinName="YYLobbyPrivilegesWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.YYLobbyPrivilegesTabView,this.otherList.itemRenderer=t.YYLobbyPrivilegesGiftItemView,this.noviceList.itemRenderer=t.ItemBase,this.otherData=new eui.ArrayCollection,this.otherList.dataProvider=this.otherData},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._curIndex=0,10001==Main.gameParameter.pfID&&window.loginWay&&(this.receiveImg.visible=!1),t.MouseScroller.bind(this.otherScroller),this.addChangeEvent(this.tabBar,this.onTabTouch),this.addChangingEvent(this.tabBar,this.onTabTouching),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.receiveBtn,this.onClick),this.addTouchEvent(this.downImg,this.onClick),this.observe(t.ActvityMgr.ins().post_25_9,this.updateCurInfo),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateCurInfo),this.tabBar.dataProvider=new eui.ArrayCollection([{type:1,index:1,txt:t.LanguageUtils.language_Common_123},{type:1,index:2,txt:t.LanguageUtils.language_Common_124},{type:1,index:3,txt:t.LanguageUtils.language_Common_125},{type:1,index:4,txt:t.LanguageUtils.language_Common_126}]),this.tabBar.selectedIndex=this._curIndex,this.setOpenIndex(this._curIndex)},i.prototype.updateCurInfo=function(){-1!=this._curIndex&&this.setOpenIndex(this._curIndex)},i.prototype.onTabTouch=function(t){this.otherScroller.viewport.scrollV=0,this.otherScroller.stopAnimation(),this._curIndex=t.currentTarget.selectedIndex,this.setOpenIndex(t.currentTarget.selectedIndex)},i.prototype.onTabTouching=function(t){return this.checkIsOpen(t.currentTarget.selectedIndex)?void 0:void t.preventDefault()},i.prototype.checkIsOpen=function(t){switch(t){case 0:return!0;case 1:return!0;case 2:return!0;case 3:return!0}},i.prototype.setOpenIndex=function(e){this.noviceGrp.visible=!1,this.otherScroller.visible=!0,this.receiveImg.visible=!1,this.receiveBtn.visible=!0;var i,n=[],s=1,a=t.ActvityMgr.ins().YYInfo;switch(e){case 0:this.noviceGrp.visible=!0,this.otherScroller.visible=!1,i=t.GlobalConfig.YYMemberConfig.freshmanGift,i&&(this.noviceList.dataProvider=new eui.ArrayCollection(i)),10001==Main.gameParameter.pfID&&a&&window.loginWay?1==a.YYNoviceGift?(this.receiveBtn.visible=!1,this.receiveImg.visible=!0,this.redPoint.visible=!1):(this.receiveBtn.currentState="up",this.redPoint.visible=!0):(this.receiveBtn.currentState="disabled",this.redPoint.visible=!1);break;case 1:if(i=t.GlobalConfig.YYMemberConfig.loginGift)for(var r in i)n.push([{rewards:i[r],day:s,type:1}]),s+=1;this.otherData.replaceAll(n);break;case 2:if(i=t.GlobalConfig.YYMemberConfig.levelGift)for(var r in i)n.push([{rewards:i[r].awards,day:s,type:2,lv:i[r].lvl}]),s+=1;this.otherData.replaceAll(n);break;case 3:if(i=t.GlobalConfig.YYMemberConfig.nobleGift)for(var r in i)n.push([{rewards:i[r],day:s,yyLv:this.YYLv[s-1],type:3}]),s+=1;this.otherData.replaceAll(n)}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.downImg:window.downYYGameHallFun(),ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1);break;case this.receiveBtn:if(10001==Main.gameParameter.pfID&&window.loginWay){var i=t.ActvityMgr.ins().YYInfo;i?0==i.YYNoviceGift&&t.ActvityMgr.ins().send_25_3():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips94)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips94)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.otherScroller),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.downImg,this.onClick),this.removeTouchEvent(this.receiveBtn,this.onClick),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.tabBar.removeEventListener(egret.TouchEvent.CHANGING,this.onTabTouching,this)},i}(t.BaseEuiView);t.YYLobbyPrivilegesWin=e,__reflect(e.prototype,"app.YYLobbyPrivilegesWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.buyBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.buyBtn,this.onTouch)},i.prototype.onTouch=function(e){var i=t.ActvityMgr.ins().YYMemberInfo;if(i)if(i.isYYVip){var n=t.MathUtils.getValueAtBit(i.newServerGift,this.data.index);n||(i.YYVipLv>=this.data.viplvl?t.ActvityMgr.ins().send_25_7(this.data.index):window.openYYVip())}else window.openYYVip();else window.openYYVip()},i.prototype.dataChanged=function(){if(this.data){this.itemData.visible=!0,this.titleImg.visible=!0,this.buyBtn.visible=!0,this.redPoint.visible=!1,this.receiveImg.visible=!1;var e=t.ActvityMgr.ins().YYMemberInfo;if(e)if(e.isYYVip){var i=t.MathUtils.getValueAtBit(e.newServerGift,this.data.index);i?(this.buyBtn.visible=!1,this.receiveImg.visible=!0):e.YYVipLv>=this.data.viplvl?(this.buyBtn.label=t.LanguageUtils.language_Common_120,this.redPoint.visible=!0):this.buyBtn.label=t.LanguageUtils.language_Common_121}else this.buyBtn.label=t.LanguageUtils.language_Common_122;else this.buyBtn.label=t.LanguageUtils.language_Common_122;this.data.YYdesc&&(this.YYDesc.textFlow=t.TextFlowMaker.generateTextFlow(this.data.YYdesc)),this.data.itemDesc&&(this.itemDesc.textFlow=t.TextFlowMaker.generateTextFlow(this.data.itemDesc)),this.data.titleImg&&(this.itemData.visible=!1,this.titleImg.source=this.data.titleImg+""),this.data.item&&(this.titleImg.visible=!1,this.itemData.data=this.data.item)}},i}(t.BaseItemRender);t.YYMemberGiftItem=e,__reflect(e.prototype,"app.YYMemberGiftItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.buyBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.buyBtn,this.onTouch)},i.prototype.onTouch=function(e){var i=t.ActvityMgr.ins().YYMemberInfo;if(i)if(i.isYYVip){var n=0;1==this.data.type?n=t.MathUtils.getValueAtBit(i.everyDayGift,this.data.index):2==this.data.type&&(n=t.MathUtils.getValueAtBit(i.everyWeekGift,this.data.index)),n||(i.YYVipLv>=this.data.viplvl?1==this.data.type?t.ActvityMgr.ins().send_25_8(this.data.index):2==this.data.type&&t.ActvityMgr.ins().send_25_9(this.data.index):window.openYYVip())}else window.openYYVip();else window.openYYVip()},i.prototype.dataChanged=function(){if(this.data){this.buyBtn.visible=!0,this.receiveImg.visible=!1;var e=t.ActvityMgr.ins().YYMemberInfo;if(e)if(e.isYYVip){var i=0;1==this.data.type?i=t.MathUtils.getValueAtBit(e.everyDayGift,this.data.index):2==this.data.type&&(i=t.MathUtils.getValueAtBit(e.everyWeekGift,this.data.index)),i?(this.buyBtn.visible=!1,this.receiveImg.visible=!0):e.YYVipLv>=this.data.viplvl?this.buyBtn.label=t.LanguageUtils.language_Pay_Text5:this.buyBtn.label=t.LanguageUtils.language_Common_118}else this.buyBtn.label=t.LanguageUtils.language_Common_119;else this.buyBtn.label=t.LanguageUtils.language_Common_119;if(this.data.item&&(this.itemData.data=this.data.item,this.data.item.id)){var n=t.GlobalConfig.StdItems[this.data.item.id];n&&(this.title.textFlow=t.TextFlowMaker.generateTextFlow(n.name))}this.data.itemDesc&&(this.itemDesc.textFlow=t.TextFlowMaker.generateTextFlow(this.data.itemDesc)),this.data.yyDesc&&(this.YYDesc.textFlow=t.TextFlowMaker.generateTextFlow(this.data.yyDesc)),this.data.originalprice&&(this.originalPrice.text=t.LanguageUtils.language_Omission_txt125+"：      "+this.data.originalprice),this.data.yb&&(this.curPrice.text=t.LanguageUtils.language_Omission_txt126+"：      "+this.data.yb)}},i}(t.BaseItemRender);t.YYMemberNewServerItem=e,__reflect(e.prototype,"app.YYMemberNewServerItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._curIndex=-1,t.skinName="YYMemberWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tab.itemRenderer=t.SoldierSoulTabBarWin,this.tabBar.itemRenderer=t.YYLobbyPrivilegesTabView},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._curIndex=0,this.YYmemberGrp.visible=!1,this.openYyGrp.visible=!0;var n=t.ActvityMgr.ins().YYMemberInfo;n&&(n.isYYVip?(this.openYyGrp.visible=!1,this.YYmemberGrp.visible=!0,this.YYLvImg.source="YY_t_hy"+n.YYVipLv):(this.YYmemberGrp.visible=!1,this.openYyGrp.visible=!0)),this.addChangeEvent(this.tab,this.onTabTouch),this.tabBar.addEventListener(egret.Event.CHANGE,this.updatePag,this),this.addChangingEvent(this.tab,this.onTabTouching),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.openYYBtn,this.onClick),this.observe(t.ActvityMgr.ins().post_25_10,this.updatePag),this.observe(t.ActvityMgr.ins().post_25_10,this.updateRed),this.tab.dataProvider=new eui.ArrayCollection([{icon:"kf_fanye_xfhl"},{icon:"kf_fanye_rcfl"}]),this.tab.selectedIndex=this._curIndex,this.setOpenIndex(this._curIndex),this.updateRed()
},i.prototype.updateRed=function(){var e=2;this.redPoint.visible=!1;for(var i=1;3>=i;i++)t.ActvityMgr.ins().updateYYRed(e,i)>0&&(this.redPoint.visible=!0)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.openYYBtn:window.openYYVip()}},i.prototype.onTabTouch=function(t){this._curIndex=t.currentTarget.selectedIndex,this.setOpenIndex(t.currentTarget.selectedIndex)},i.prototype.onTabTouching=function(t){return this.checkIsOpen(t.currentTarget.selectedIndex)?void 0:void t.preventDefault()},i.prototype.checkIsOpen=function(t){switch(t){case 0:return!0;case 1:return!0}},i.prototype.setOpenIndex=function(e){this.giftGrp.visible=!0,this.fuliGrp.visible=!0,this.tabBar.selectedIndex=0,0==e?(this.fuliGrp.visible=!1,this.tabBar.dataProvider=new eui.ArrayCollection([{type:2,index:1,txt:t.LanguageUtils.language_Common_113},{type:2,index:2,txt:t.LanguageUtils.language_Common_114},{type:2,index:3,txt:t.LanguageUtils.language_Common_115}])):1==e&&(this.tabBar.dataProvider=new eui.ArrayCollection([{type:2,index:4,txt:t.LanguageUtils.language_Common_116},{type:2,index:5,txt:t.LanguageUtils.language_Common_117}]),this.giftGrp.visible=!1),this.updatePag()},i.prototype.updatePag=function(){var e=this.tabBar.selectedIndex,i=t.GlobalConfig.YYVIPConfig;if(0==this.tab.selectedIndex){if(i)for(var n in i.newServerGiftDisplay)if(e==+n){var s=0;for(var a in i.newServerGiftDisplay[n])this["giftItem"+s].data=i.newServerGiftDisplay[n][a],s++}}else if(1==this.tab.selectedIndex){var r=0;if(0==e)for(var o in i.dailyGiftDisplay)this["fuliItem"+r].data=i.dailyGiftDisplay[o],r++;else if(1==e)for(var o in i.weeklyGiftDisplay)this["fuliItem"+r].data=i.weeklyGiftDisplay[o],r++}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.openYYBtn,this.onClick),this.tabBar.removeEventListener(egret.Event.CHANGE,this.updatePag,this),this.tab.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.tab.removeEventListener(egret.TouchEvent.CHANGING,this.onTabTouching,this)},i}(t.BaseEuiView);t.YYMemberWin=e,__reflect(e.prototype,"app.YYMemberWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="YYWxGiftWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.btnGetAward,this.onClick)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.cdKeyText.text="";var n=t.ActvityMgr.ins().getActivityConfigById(10027);n&&(this.itemData.data=n.NormalRewards[0])},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.btnGetAward:if(""==this.cdKeyText.text.trim())return;t.OtherMgr.ins().send_26_63(this.cdKeyText.text)}},i.prototype.updateCode=function(){var e=t.OtherMgr.ins().codeState;t.LanguageUtils.language_Wlelfare_Text4[e]?t.UserTips.ins().showUITips(t.LanguageUtils.language_Wlelfare_Text4[e]):t.UserTips.ins().showUITips("未知错误")},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.btnGetAward,this.onClick)},i}(t.BaseEuiView);t.YYWxGiftWin=e,__reflect(e.prototype,"app.YYWxGiftWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._cdTime=10,t.reviveInfo=null,t.reviveID=-1,t.receiveStr="",t.btnArr=[],t.skinName="AutoReviveWinSkin",t.bottom=t.top=t.right=t.left=0,t.touchEnabled=!1,t}return __extends(i,e),i.prototype.playDieTween=function(){this.bgImg.alpha=0,egret.Tween.removeTweens(this.bgImg);var t=egret.Tween.get(this.bgImg,{loop:!0});t.to({alpha:1},250).to({alpha:0},250).to({alpha:1},250).to({alpha:0},1500)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(t.ViewManager.gamescene.map.mpaGrey(!0),this.playDieTween(),e[0]&&(this.reviveInfo=e[0]),this.moneyGrp.visible=!1,this.reviveNumLab.visible=!1,this.addTouchEvent(this.backCity0,this.onClick),this.addTouchEvent(this.backCity1,this.onClick),this.addTouchEvent(this.backCity2,this.onClick),this.addTouchEvent(this.powerFul,this.onClick),this.observe(t.DefaultMgr.ins().postPlayerChange,this.closeView),this.reviveInfo){this.killName.textFlow=t.TextFlowMaker.generateTextFlow("你被 |C:0xe50000&T:"+this.reviveInfo.name+"| 击败了！"),-1!=this.reviveInfo.fubenReviveCount&&(this.reviveNumLab.visible=!0,this.reviveNumLab.text=t.LanguageUtils.language_Common_75+this.reviveInfo.fubenReviveCount),this.reviveID=this.reviveInfo.id;var n=t.GlobalConfig.ReliveConfig[this.reviveID];if(n&&(1==n.description?this.receiveStr=t.LanguageUtils.language_Omission_txt97:2==n.description?this.receiveStr=t.LanguageUtils.language_Omission_txt98:3==n.description&&(this.receiveStr=t.LanguageUtils.language_Omission_txt99),n.VipRevive&&n.expire!=n.VipRevive&&t.EntityMgr.ins().getPayer.propSet&&0!=t.EntityMgr.ins().getPayer.propSet.getResurrection()?(this._cdTime=n.VipRevive+1,this.receiveStr+="(复活特权已加速)"):this._cdTime=n.expire+1,this.btnArr=[],n.selectInfo)){var s="",a=0;for(var r in n.selectInfo){switch(n.selectInfo[r].type){case 1:s=t.LanguageUtils.language_Common_77;break;case 2:s=t.LanguageUtils.language_Common_78;break;case 3:s=t.LanguageUtils.language_Common_79;break;case 4:s=t.LanguageUtils.language_Common_80;break;case 5:s=t.LanguageUtils.language_Common_81;break;case 6:s=t.LanguageUtils.language_Omission_txt100}var o=new eui.Button;if(o.skinName="BtnResurrectionSkin",o.label=s,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),o.index=a,o.type=n.selectInfo[r].type,this.btnGrp.addChild(o),this.btnArr.push(o),n.selectInfo[r].consume){this.moneyGrp.visible=!0;var l=n.selectInfo[r].consume,h=t.CurrencyUtils.getMoneyIcon(l.type);h&&(this.moneyImg.source=h[1]+""),this.moneyNum.text=l.count}a++}}}this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this)},i.prototype.btnClick=function(e){var i=e.currentTarget;t.DefaultMgr.ins().send_0_22(this.reviveID,i.index),i.touchEnabled=!1,egret.setTimeout(function(){i.touchEnabled=!0},this,2e3),6==i.type&&(t.ViewManager.ins().isShow(t.ChangePowerfulWin)||t.ViewManager.ins().open(t.ChangePowerfulWin))},i.prototype.closeView=function(){var e=t.EntityMgr.ins().getPlayerPropertySet();if(e&&e.propSet){var i=e.propSet.getHp();i>0&&t.ViewManager.ins().close(this)}},i.prototype.onClick=function(t){t.currentTarget},i.prototype.reviveBtnClick=function(t){},i.prototype.updateTime=function(){var e=this._cdTime-=1;0>e?(t.TimerManager.ins().remove(this.updateTime,this),this.cdTimeLab.text="",t.ViewManager.ins().close(this)):this.cdTimeLab.text=e+this.receiveStr},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.removeTouchEvent(this.backCity0,this.onClick),this.removeTouchEvent(this.backCity1,this.onClick),this.removeTouchEvent(this.backCity2,this.onClick),this.removeTouchEvent(this.powerFul,this.onClick),t.TimerManager.ins().remove(this.updateTime,this);for(var s=0;s<this.btnArr.length;s++){var a=this.btnArr[s];a.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)}this.bgImg.alpha=0,egret.Tween.removeTweens(this.bgImg),this.btnArr=[],this.btnGrp.removeChildren(),this._cdTime=null},i}(t.BaseEuiView);t.AutoReviveWin=e,__reflect(e.prototype,"app.AutoReviveWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Drag)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.autoRecycleTime=-1,t._recycleItemlevel=0,t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.onUseItem=function(e,n){void 0===n&&(n=1);var s=t.GlobalConfig.StdItems[e.wItemId];if(s)if(s.openUi)this.openUi(s.openUi,e);else{var a=i.ins().getItemUseState(s);if(1==a)1==e.bagType?t.EquipItemMgr.ins().sendWearEquip(e.series):i.ins().useItem(e.series,e.wItemId,n);else{var r=t.AttributeData.isUseItem(s.conds);""!=r&&t.UserTips.ins().showUITips(r)}}},i.prototype.useItem=function(e,i,n){void 0===n&&(n=1);var s=t.BagMgr.ins().cdItemArr[i];if(s&&egret.getTimer()<=s)return t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips11),!1;1==n?t.BagMgr.ins().send_8_8(e):t.BagMgr.ins().send_8_11(i,n,e);var a=t.GlobalConfig.StdItems[i];return a&&t.BagMgr.ins().setItemUseCD(a.colGroup),!0},i.prototype.openUi=function(e,i){1==e.type?t.ViewManager.ins().open(e.view,i.wItemId,i):2==e.type?t.ViewManager.ins().open(e.view,e.param1):3==e.type&&(e.param2?this.getRoleIsOpen(e.param2)&&t.ViewManager.ins().open(e.view,e.param1):t.ViewManager.ins().open(e.view,e.param1))},i.prototype.getRoleIsOpen=function(e){var i=t.GlobalConfig.SystemOpen[e];if(i){var n=t.EntityMgr.ins().getPayer;if(n&&n.propSet){var s=n.propSet;if(s.getLevel()<i.level||s.getZSLevel()<i.circle||t.GlobalData.sectionOpenDay<i.day||s.getLevel()<i.openLevel||s.getZSLevel()<i.openCircle||t.GlobalData.sectionOpenDay<i.openDay)return t.UserTips.ins().showUITips(i.name),!1}}return!0},i.prototype.autoRecycle=function(){if(this.autoRecycleTime<0||egret.getTimer()-this.autoRecycleTime>3e3){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet&&1==e.propSet.getRecoverState()&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoRecycle)&&t.BagMgr.ins().getBagItemNum(1)<=100){var i=t.GlobalConfig.BagRemainConfig[5];if(i){var n=t.BagMgr.ins().getBagCapacity(i.bagremain);n&&(this.batchRecycle(),this.autoRecycleTime=egret.getTimer())}}}},i.prototype.batchRecycle=function(){var e=new t.ItemSeries;e.setData(0);var i=this.getBaseNum();t.BagMgr.ins().send_8_10(1e6,e,i)},i.prototype.getBaseNum=function(e){void 0===e&&(e=0);var i=this.PrefixInteger(0,this.recycleItemlevel),n="111"+i.slice(3),s=n.split(""),a=t.GlobalConfig.RecyclingSettingConfig;for(var r in a){var o=a[r];for(var l in o)t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Recycle,o[l].optionid-1)&&s.splice(o[l].itemlevel-1,1,"1")}var h=this.reverseFun(s.join(""));return h},Object.defineProperty(i.prototype,"recycleItemlevel",{get:function(){if(0==this._recycleItemlevel){var e=t.GlobalConfig.RecyclingSettingConfig,i=0;for(var n in e){var s=e[n];for(var a in s)i<s[a].itemlevel&&(i=s[a].itemlevel)}this._recycleItemlevel=i}return this._recycleItemlevel},enumerable:!0,configurable:!0}),i.prototype.PrefixInteger=function(t,e){return(Array(e).join("0")+t).slice(-e)},i.prototype.reverseFun=function(t){return t.split("").reverse().join("")},i.prototype.getItemUseState=function(e){var i=t.EntityMgr.ins().getPlayerPropertySet();if(i&&i.propSet&&!i.propSet.getAP_JOB())return-1;var n=this.getItemUseCondMismatch(e);return(n&1<<t.StdItemCondition.ucGender)>0||(n&1<<t.StdItemCondition.ucJob)>0?-1:(n&1<<t.StdItemCondition.ucLevel)>0||(n&1<<t.StdItemCondition.ucCircle)>0||(n&1<<t.StdItemCondition.ucCircleLess)>0||(n&1<<t.StdItemCondition.ucChief_Mark)>0||(n&1<<t.StdItemCondition.ucChatelain_Mark)>0||(n&1<<t.StdItemCondition.ucPower)>0||(n&1<<t.StdItemCondition.ucNeiGongLevel)>0||(n&1<<t.StdItemCondition.ucGuildLevel)>0?0:1},i.prototype.getItemUseCondMismatch=function(e){var i,n,s,a,r=e.conds,o={},l=t.EntityMgr.ins().getPlayerPropertySet();if(r){for(var h=0;h<r.length;h++)o[r[h].cond]=r[h].value;if(l&&l.propSet)for(var p=0;p<r.length;p++)switch(i=r[p].cond){case t.StdItemCondition.ucGender:2!=r[p].value&&r[p].value!=l.propSet.getSex()&&(n|=1<<i);break;case t.StdItemCondition.ucJob:r[p].value&&r[p].value!=l.propSet.getAP_JOB()&&(n|=1<<i);break;case t.StdItemCondition.ucLevel:a=o[t.StdItemCondition.ucLevel],l.propSet.getLevel()<a&&(n|=1<<t.StdItemCondition.ucLevel);break;case t.StdItemCondition.ucCircle:s=o[t.StdItemCondition.ucCircle],l.propSet.getZSLevel()<s&&(n|=1<<t.StdItemCondition.ucCircle);break;case t.StdItemCondition.ucCircleLess:l.propSet.getZSLevel()>r[p].value&&(n|=1<<i);break;case t.StdItemCondition.ucChief:r[p].value==t.StdItemCondition.Post_Chief||r[p].value==t.StdItemCondition.Post_Castellan;break;case t.StdItemCondition.ucPower:r[p].value&&r[p].value>l.propSet.getPowerValue()&&(n|=1<<i);break;case t.StdItemCondition.ucVipLevel:break;case t.StdItemCondition.ucNeiGongLevel:l.propSet.getMeridians()<r[p].value&&(n|=1<<i);break;case t.StdItemCondition.ucGuildLevel:l.propSet.getGuildLevel()<r[p].value&&(n|=1<<i)}}return n},i}(t.BaseClass);t.BagManager=e,__reflect(e.prototype,"app.BagManager")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var n=e.call(this)||this;return n._bagRecycleSelect={},n.itemGridNum=0,n.equipGridNum=0,n.materialGridNum=0,n.gridNumArr=[],n._itemInfo=[],n._bagItem=[],n._keyXY=[],n._bagGeZiPoint=null,n._globalPoint=null,n._globalPoint2=null,n._sellGlobalPoint=null,n._bagItemCount={},n.cdItemArr={},n._bagItem[0]=[],n._bagItem[1]=[],n._bagItem[2]=[],n._itemInfo[0]=[],n._itemInfo[1]=[],n._itemInfo[2]=[],n._bagItemCount={},n.sysId=t.PackageID.Bag,n.regNetMsg(1,n.post_8_1),n.regNetMsg(2,n.post_8_2),n.regNetMsg(3,n.post_8_3),n.regNetMsg(4,n.post_8_4),n.regNetMsg(6,n.post_8_6),n.regNetMsg(7,n.post_8_7),n.regNetMsg(10,n.post_8_10),n.regNetMsg(11,n.post_8_11),n.regNetMsg(12,n.post_8_12),n.regNetMsg(13,n.post_8_13),i.itemTips=new t.userItem,n}return __extends(i,e),Object.defineProperty(i.prototype,"itemInfo",{get:function(){return this._itemInfo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bagItem",{get:function(){return this._bagItem},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keyXY",{get:function(){return this._keyXY},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bagGeZiPoint",{get:function(){return this._bagGeZiPoint},set:function(t){this._bagGeZiPoint=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"globalPoint",{get:function(){return this._globalPoint},set:function(t){this._globalPoint=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"globalPoint2",{get:function(){return this._globalPoint2},set:function(t){this._globalPoint2=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sellGlobalPoint",{get:function(){return this._sellGlobalPoint},set:function(t){this._sellGlobalPoint=t},enumerable:!0,configurable:!0}),i.prototype.getBagRecycleSelect=function(t){return this._bagRecycleSelect[t]},i.prototype.setBagRecycleSelect=function(t,e){this._bagRecycleSelect[t]=e},i.prototype.delBagRecycleSelect=function(){this._bagRecycleSelect={}},i.prototype.bagItemCount=function(t){return this._bagItemCount[t]},i.ins=function(){return e.ins.call(this)},i.prototype.send_8_2=function(){var t=this.getBytes(2);this.sendToServer(t)},i.prototype.post_8_2=function(e){i.redPointArr=[],i.yellowPointArr=[],this._bagItem[0].length=0,this._bagItem[1].length=0,this._bagItem[2].length=0,this._itemInfo[0].length=0,this._itemInfo[1].length=0,this._itemInfo[2].length=0,this._bagItemCount={},this.itemGridNum=e.readInt(),this.equipGridNum=e.readInt(),this.materialGridNum=e.readInt(),t.ItemUserTipsManage.ins().clearAllData(),this.gridNumArr=[this.itemGridNum,this.equipGridNum,this.materialGridNum];for(var n=e.readShort(),s=t.EntityMgr.ins().getPlayerPropertySet(),a=0;n>a;a++){var r=new t.userItem(e);this._bagItem[r.bagType].push(r),this._bagItemCount[r.wItemId]=this._bagItemCount[r.wItemId]?this._bagItemCount[r.wItemId]+r.btCount:r.btCount;var o=t.GlobalConfig.StdItems[r.wItemId];o&&(0==r.btQuality&&(r.btQuality=o.showQuality),r.itemRed=o.forcetips,o.Redpointlimit&&0==t.CurrencyUtils.isRedDot(o.Redpointlimit)&&(r.itemRed=0),1==r.itemRed?i.redPointArr.push(1):2==r.itemRed&&i.yellowPointArr.push(2));var l=t.EquipMgr.equipScore(r,s.propSet.getAP_JOB());r.itemScore=l,1==r.bagType&&s&&s.propSet&&t.EquipMgr.getIsGoodEquip(r,s.propSet.getAP_JOB())}this.init_bagItems(),t.EquipMgr.ins().showGoodEquipTips(),t.BagManager.ins().autoRecycle(),t.ForgeMgr.ins().forgeRed(),n=null,r=null},i.prototype.init_bagItems=function(){this.createBagData()},i.prototype.send_8_1=function(){var t=this.getBytes(1);t.writeShort(2);for(var e=0;2>e;e++)t.writeShort(260),t.writeShort(1),t.writeByte(1),t.writeByte(1),t.writeByte(0);this.sendToServer(t)},i.prototype.post_8_1=function(e){var i=e.readByte();if(0==i){var n=new t.userItem(e),s=e.readUnsignedByte();n.needShowBatchPanel=s;var a=1==e.readUnsignedByte()?!0:!1;this.addItem(n,a),t.EventManager.ins().sendEvent(t.CompEvent.ITEM_NUM_UPDATE,n.wItemId)}else 1==i?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips4):2==i&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips5);t.ForgeMgr.ins().forgeRed(),i=null},i.prototype.addItem=function(e,n){var s=t.EntityMgr.ins().getPlayerPropertySet(),a=t.GlobalConfig.StdItems[e.wItemId];if(a){var r=this.airIndex(e.bagType);if(-1!=r&&(this._itemInfo[e.bagType][r]=e,this._bagItem[e.bagType].push(e),this._bagItemCount[e.wItemId]=this._bagItemCount[e.wItemId]?this._bagItemCount[e.wItemId]+e.btCount:e.btCount,e.itemRed=a.forcetips,a.Redpointlimit&&0==t.CurrencyUtils.isRedDot(a.Redpointlimit)&&(e.itemRed=0),1==e.itemRed?i.redPointArr.push(1):2==e.itemRed&&i.yellowPointArr.push(2),0==e.btQuality&&(e.btQuality=a.showQuality),s&&s.propSet)){var o=t.EquipMgr.equipScore(e,s.propSet.getAP_JOB());e.itemScore=o,o=null}a.UseLimit&&this.send_8_13(a.id),t.ItemUserTipsManage.ins().addTipsObj(e),r=null}if(n){var l=t.GlobalConfig.StdItems[e.wItemId],h=t.ColorUtil.GOODS_COLOR[l.showQuality];h=h?h:16777215;var p=t.StringUtils.replace(t.LanguageUtils.language_Tips6,h,l.name);t.UserTips.ins().showJingYanTips(p);var u=t.StringUtils.replace(t.LanguageUtils.language_Tips74,l.name);t.ChatModel.ins().setPersonalData(u),l=null}t.EquipMgr.ins().getRecommendEquip(),a=null,t.EventManager.ins().sendEvent(t.CompEvent.STRENGTHEN_RED),t.EventManager.ins().sendEvent(t.CompEvent.FASHION_RED),t.BagManager.ins().autoRecycle()},i.prototype.send_8_3=function(t){var e=this.getBytes(3);t.writeToBytes(e),this.sendToServer(e)},i.prototype.post_8_3=function(e){var i=new t.ItemSeries(e);this.del_bagItem(i);for(var n=0;3>n;n++)for(var s=this._itemInfo[n],a=0;a<s.length;a++){var r=s[a];if(r&&r.series&&r.series.toString()==i.toString()){this._itemInfo[n][a]=null,this._bagItemCount[r.wItemId]=this._bagItemCount[r.wItemId]?this._bagItemCount[r.wItemId]-r.btCount:0,t.ItemUserTipsManage.ins().removeTipsObj(r),t.EventManager.ins().sendEvent(t.CompEvent.STRENGTHEN_RED),t.EventManager.ins().sendEvent(t.CompEvent.FASHION_RED),t.EventManager.ins().sendEvent(t.CompEvent.ITEM_NUM_UPDATE,r.wItemId);var o=t.GlobalConfig.StdItems[r.wItemId];return void(o&&o.UseLimit&&this.send_8_13(o.id))}}console.log("没找到的唯一标识"+i.toString()),i=null},i.prototype.del_bagItem=function(t){for(var e=0;3>e;e++)for(var n=this._bagItem[e],s=0;s<n.length;s++){var a=n[s];a&&a.series&&a.series.toString()==t.toString()&&(this._bagItem[e].splice(s,1),a.itemRed&&(1==a.itemRed?i.redPointArr.splice(0,1):2==a.itemRed&&i.yellowPointArr.splice(0,1)))}},i.prototype.post_8_4=function(e){var i=new t.ItemSeries(e),n=e.readShort(),s=e.readBoolean(),a=e.readUnsignedByte(),r=this.getItemDataBySeries(i);if(r){var o=r.btCount-n,l=n>r.btCount;if(r.btCount=n,this._bagItemCount[r.wItemId]=this._bagItemCount[r.wItemId]?this._bagItemCount[r.wItemId]-o:0,l){var h=t.GlobalConfig.StdItems[r.wItemId];if(h){var p=t.ColorUtil.GOODS_COLOR[h.showQuality];p=p?p:16777215;var u=t.StringUtils.replace(t.LanguageUtils.language_Tips6,p,h.name);t.UserTips.ins().showJingYanTips(u);var c=t.StringUtils.replace(t.LanguageUtils.language_Tips74,h.name);t.ChatModel.ins().setPersonalData(c)}t.ItemUserTipsManage.ins().addTipsObj(r)}t.EventManager.ins().sendEvent(t.CompEvent.ITEM_NUM_UPDATE,r.wItemId);var g=t.GlobalConfig.StdItems[r.wItemId];g&&g.UseLimit&&this.send_8_13(g.id)}t.ForgeMgr.ins().forgeRed(),n=null,s=null,a=null,t.EventManager.ins().sendEvent(t.CompEvent.STRENGTHEN_RED),t.EventManager.ins().sendEvent(t.CompEvent.FASHION_RED)},i.prototype.post_8_6=function(e){var i=new t.userItem(e),n=i.series,s=this.getItemDataBySeries(n);s&&(s.topLine=i.topLine,s.refining=i.refining)},i.prototype.send_8_5=function(t,e){var i=this.getBytes(5);t.writeToBytes(i),i.writeShort(e),this.sendToServer(i)},i.prototype.send_8_6=function(t,e){var i=this.getBytes(6);t.writeToBytes(i),e.writeToBytes(i),this.sendToServer(i)},i.prototype.send_8_7=function(){var t=this.getBytes(7);this.sendToServer(t)},i.prototype.post_8_10=function(){this.tidyItems(this._bagItem[0]),this.tidyItems(this._bagItem[1]),this.tidyItems(this._bagItem[2]),this._itemInfo[0].length=0,this._itemInfo[1].length=0,this._itemInfo[2].length=0,this.createBagData()},i.prototype.send_8_8=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=0),t){var n=this.getBytes(8);t.writeToBytes(n),n.writeByte(e?1:0),n.writeInt(i),this.sendToServer(n)}},i.prototype.post_8_7=function(t){var e=new Object;return e.itemID=t.readShort(),e.isSuccess=t.readByte(),e},i.prototype.send_8_9=function(t,e){var i=this.getBytes(9);i.writeByte(t),i.writeInt(e),this.sendToServer(i)},i.prototype.send_8_10=function(t,e,i,n){void 0===i&&(i=""),void 0===n&&(n="");var s=this.getBytes(10);s.writeInt(t),e.writeToBytes(s),s.writeString(i),s.writeString(n),this.sendToServer(s)},i.prototype.post_8_11=function(t){var e=new Object;return e.isSuccess=t.readBoolean(),e.type=t.readByte(),e},i.prototype.send_8_11=function(t,e,i){var n=this.getBytes(11);n.writeInt(t),n.writeInt(e),i.writeToBytes(n),this.sendToServer(n)},i.prototype.post_8_12=function(t){this.surplusUseCount={};for(var e=t.readInt(),i=0;e>i;i++){var n=t.readInt(),s=t.readInt();this.surplusUseCount[n]=s}},i.prototype.send_8_12=function(){var t=this.getBytes(12);this.sendToServer(t)},i.prototype.post_8_13=function(t){var e=t.readInt(),i=t.readInt();return this.surplusUseCount[e]=i,e},i.prototype.send_8_13=function(t){var e=this.getBytes(13);e.writeInt(t),this.sendToServer(e)},i.prototype.getBagTwoArr=function(t){for(var e=[],i=0;i<this._itemInfo[t].length;i++)e[Math.floor(i/8)]||(e[Math.floor(i/8)]=[]),e[Math.floor(i/8)].push(this._itemInfo[t][i]);return e},i.prototype.getLineXY=function(t){for(var e={},i=0,n=0;n<t.length;n++)0==n?(e[n]={x:0,y:0},i=0):(e[n]={x:0,y:60+i+2.5},i=e[n].y);return e},i.prototype.createBagData=function(){for(var e=0;3>e;e++)if(this._bagItem)for(var i=this._bagItem[e],n=0;n<this.gridNumArr[e];n++)if(i&&i[n]&&i[n].wItemId)this._itemInfo[e].push(i[n]);else{var s=new t.userItem(null);this._itemInfo[e].push(s)}else for(var a=0;a<this.gridNumArr[e];a++){var s=new t.userItem(null);this._itemInfo[e].push(s)}},i.prototype.postItemRecycle=function(t){return t},i.prototype.tidyItems=function(t){return t&&t.sort(this.sortFunction),t},i.prototype.sortFunction=function(t,e){return t.btQuality<e.btQuality?1:t.btQuality>e.btQuality?-1:t.wItemId<e.wItemId?1:t.wItemId>e.wItemId?-1:t.wStar<e.wStar?1:t.wStar>e.wStar?-1:0},i.prototype.getItemDataBySeries=function(t){for(var e=0;3>e;e++)for(var i=this._itemInfo[e],n=0;n<i.length;n++){var s=i[n];if(s&&s.series&&s.series.toString()==t.toString())return this._itemInfo[e][n]}return null},i.prototype.getItemById=function(t){for(var e=0;3>e;e++)for(var n=this._itemInfo[e],s=0;s<n.length;s++){var a=n[s];if(a&&a.wItemId&&a.wItemId==t&&a._itemState==i.STATE_NORMAL)return a}return null},i.prototype.getItemCountById=function(t){for(var e=0,n=0;3>n;n++)for(var s=this._itemInfo[n],a=0;a<s.length;a++){var r=s[a];r&&r.wItemId&&r.wItemId==t&&r._itemState==i.STATE_NORMAL&&(e+=r.btCount)}return e},i.prototype.getBagCapacity=function(t){for(var e=0;3>e;e++){var i=this._bagItem[e],n=this.gridNumArr[e]-i.length;if(n<t[e])return!1}return!0},i.prototype.getBagItemNum=function(t){var e=this._bagItem[t];return e?this.gridNumArr[t]-e.length:0},i.prototype.getBagTypeItemNum=function(t){var e=this.getBagItemNum(t);return 0==t?e:e-10},i.prototype.getBagNumEnough=function(t){void 0===t&&(t=5);for(var e=0;3>e;e++){var i=this._bagItem[e],n=this.gridNumArr[e]-i.length;if(t>=n)return!1}return!0},i.prototype.setItemUseCD=function(e){for(var i=0;i<this._bagItem[0].length;i++){var n=this._bagItem[0][i],s=t.GlobalConfig.StdItems[n.wItemId];if(s&&s.colGroup==e){var a=egret.getTimer()+s.cdTime;this.cdItemArr[n.wItemId]=a}}},i.prototype.formatMiniDateTime=function(t){return i.MiniDateTimeBase+1e3*(2147483647&t)},i.prototype.airIndex=function(t){for(var e=0;e<i.ins().gridNumArr[t];e++)if(!this._itemInfo[t][e]||!this._itemInfo[t][e].wItemId)return e;return-1},i.prototype.postKeyXY=function(){},i.prototype.getBagRed=function(){if(i.redPointArr.length>0)return 1;if(i.yellowPointArr.length>0)return 2;for(var t in this.surplusUseCount)if(this.surplusUseCount[t]>0&&this.getItemCountById(parseInt(t))>0)return 1;return 0},i.prototype.postBagRecycleSelect=function(){},i.STATE_NORMAL=0,i.STATE_MARKET=1,i.STATE_GUILD_STORE=2,i.STATE_RECOVER=3,i.STATE_LvUp=4,i.STATE_Trading=5,i.STATE_SALE=6,i.clickCd=!1,i.redPointArr=[],i.yellowPointArr=[],i.MiniDateTimeBase=12622752e5,i}(t.BaseSystem);t.BagMgr=e,__reflect(e.prototype,"app.BagMgr")}(app||(app={}));var app;!function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.type=t,this.value=e}return t.prototype.isFloat=function(e){switch(e){case t.aHpPower:case t.aMpPower:case t.aMaxHpPower:case t.aMaxMpPower:case t.aPhysicalAttackMinPower:case t.aPhysicalAttackMaxPower:case t.aMagicAttackMinPower:case t.aMagicAttackMaxPower:case t.aWizardAttackMinPower:case t.aWizardAttackMaxPower:case t.aPhysicalDefenceMinPower:case t.aPhysicalDefenceMaxPower:case t.aMagicDefenceMinPower:case t.aMagicDefenceMaxPower:case t.aMagicHitRateAdd:case t.aMagicHitRatePower:case t.aMagicDogerateAdd:case t.aMagicDogeratePower:case t.aToxicDogerateAdd:case t.aToxicDogeratePower:case t.aHpRenewAdd:case t.aHpRenewPower:case t.aMpRenewAdd:case t.aMpRenewPower:case t.aToxicRenewAdd:case t.aToxicRenewPower:case t.aLuckPower:case t.aCursePower:case t.aMoveSpeedPower:case t.aAttackSpeedPower:case t.aDamageAbsorbRate:case t.aExpPower:case t.aDamagePower:case t.aHpDamage2MpDropRateAdd:case t.aMountMinAttackRateAdd:case t.aMountMaxAttackRateAdd:case t.aMountMinPhyDefenceRateAdd:case t.aMountMaxPhyDefenceRateAdd:case t.aMountMinMagicDefenceRateAdd:case t.aMountMaxMagicDefenceRateAdd:case t.aMountHpRateAdd:case t.aMountMpRateAdd:case t.aDiamondMinAttackRateAdd:case t.aDiamondMaxAttackRateAdd:case t.aDiamondMinPhyDefenceRateAdd:case t.aDiamondMaxPhyDefenceRateAdd:case t.aDiamondMinMagicDefenceAdd:case t.aDiamondMaxMagiceDefence:case t.aDiamondHpRateAdd:case t.aDiamondMpRateAdd:case t.aDeductDamagePower:case t.aHPMPDeductPower:case t.aAddDamageReboundPower:case t.aDamage2SelfHpRate:case t.aInnerStrengthExp:case t.aBuffHeroExpRate:case t.aFastMedicamentRenew:return!0;default:return!1}},t.aUndefined=0,t.aHpAdd=1,t.aHpPower=2,t.aMpAdd=3,t.aMpPower=4,t.aMaxHpAdd=5,t.aMaxHpPower=6,t.aMaxMpAdd=7,t.aMaxMpPower=8,t.aPhysicalAttackMinAdd=9,t.aPhysicalAttackMinPower=10,t.aPhysicalAttackMaxAdd=11,t.aPhysicalAttackMaxPower=12,t.aMagicAttackMinAdd=13,t.aMagicAttackMinPower=14,t.aMagicAttackMaxAdd=15,t.aMagicAttackMaxPower=16,t.aWizardAttackMinAdd=17,t.aWizardAttackMinPower=18,t.aWizardAttackMaxAdd=19,t.aWizardAttackMaxPower=20,t.aPhysicalDefenceMinAdd=21,t.aPhysicalDefenceMinPower=22,t.aPhysicalDefenceMaxAdd=23,t.aPhysicalDefenceMaxPower=24,t.aMagicDefenceMinAdd=25,t.aMagicDefenceMinPower=26,t.aMagicDefenceMaxAdd=27,t.aMagicDefenceMaxPower=28,t.aHitValueAdd=29,t.aHitValuePower=30,t.aDogValueAdd=31,t.aDogValuePower=32,t.aMagicHitRateAdd=33,t.aMagicHitRatePower=34,t.aMagicDogerateAdd=35,t.aMagicDogeratePower=36,t.aToxicDogerateAdd=37,t.aToxicDogeratePower=38,t.aHpRenewAdd=39,t.aHpRenewPower=40,t.aMpRenewAdd=41,t.aMpRenewPower=42,t.aToxicRenewAdd=43,t.aToxicRenewPower=44,t.aLuckAdd=45,t.aLuckPower=46,t.aCurseAdd=47,t.aCursePower=48,t.aMoveSpeedAdd=49,t.aMoveSpeedPower=50,t.aAttackSpeedAdd=51,t.aAttackSpeedPower=52,t.GamePropertyCount=53,t.aDamageAbsorbRate=54,t.aExpAdd=56,t.aHide=58,t.aExpPower=59,t.aPkValueAdd=60,t.aSelfAttackAppend=62,t.aSacredValueAdd=63,t.aHpDamage2MpDropRateAdd=64,t.aDizzyRateAdd=65,t.aDamagePower=66,t.aAddPhysicalDamageRate=67,t.aAddPhysicalDamageValue=68,t.aDamage2SelfHpPro=69,t.aDamage2SelfHpRate=70,t.aSkillExpValue=71,t.aDieRefreshHpPro=73,t.aHp2DamageAdd=75,t.aMountMinAttackRateAdd=76,t.aMountMaxAttackRateAdd=77,t.aMountMinPhyDefenceRateAdd=78,t.aMountMaxPhyDefenceRateAdd=79,t.aMountMinMagicDefenceRateAdd=80,t.aMountMaxMagicDefenceRateAdd=81,t.aMountHpRateAdd=82,t.aMountMpRateAdd=83,t.aDiamondMinAttackRateAdd=84,t.aDiamondMaxAttackRateAdd=85,t.aDiamondMinPhyDefenceRateAdd=86,t.aDiamondMaxPhyDefenceRateAdd=87,t.aDiamondMinMagicDefenceAdd=88,t.aDiamondMaxMagiceDefence=89,t.aDiamondHpRateAdd=90,t.aDiamondMpRateAdd=91,t.aFireDefenseRate=92,t.aReduceEquipDropRate=93,t.aWarriorDamageValueDec=95,t.aWarriorDamageRateDec=96,t.aMagicianDamageValueDesc=97,t.aMagicianDamageRateDesc=98,t.aWizardDamageValueDesc=99,t.aWizardDamageRateDesc=100,t.aMonsterDamageValueDesc=101,t.aMonsterDamageRateDesc=102,t.aDamageReduceRate=103,t.aDamageReduceValue=104,t.aDamageAddRate=105,t.aDamageAddValue=106,t.aIgnorDefenceRate=107,t.aIgnorDefenceValue=108,t.aDeductDamagePower=109,t.aWarriorTargetDamageValue=110,t.aWarriorTargetDamageRate=111,t.aMagicianTargetDamageValue=112,t.aMagicianTargetDamageRate=113,t.aWizardTargetDamageValue=114,t.aWizardTargetDamageRate=115,t.aMonsterTargetDamageValue=116,t.aMonsterTargetDamageRate=117,t.aHPMPDeductPower=118,t.aAddAllDamageRate=119,t.aAddAllDamagePower=120,t.aAddDamageReboundRate=121,t.aAddDamageReboundPower=122,t.aAddAllDamageRateEx=123,t.aFixed=125,t.aChengMo=132,t.maxInnerStrength=133,t.aInnerStrengthExp=135,t.aCritRate=136,t.aCritDamageRate=138,t.aCritDamagePower=139,t.aDeductCriteDamageRate=140,t.aFastMedicamentRenew=141,t.aBuffExpAdd=142,t.aBuffHeroExpRate=143,t.aAddGoldToMonster=144,t.aWrathBY=145,t.aWrathFires=146,t.aWrathZR=147,t.aWrathBPX=148,t.aWrathHY=149,t.aWrathLD=150,t.aWrathSXS=151,t.aWrathHF=152,t.aReduceBY=153,t.aReduceLH=154,t.aReduceZR=155,t.aReduceBPX=156,t.aReduceHY=157,t.aReduceLD=158,t.aReduceSXS=159,t.aReduceHF=160,t.aDizzy=55,t.aReliveProtectState=57,t.aPkProtectState=61,t.aOnPracticeMap=72,t.aNewPlayerProtect=74,t.aDamageDropTime=94,t.aChangeMonsterModle=124,t.aHpMpAdd=137,t}();t.ComAttribute=e,__reflect(e.prototype,"app.ComAttribute")}(app||(app={}));var app;!function(t){var e=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.rate=t,this.type=e,this.id=i,this.count=n}return t}();t.ItemRecycleData=e,__reflect(e.prototype,"app.ItemRecycleData")}(app||(app={}));var app;!function(t){var e=function(){function t(t){void 0===t&&(t=null),this.itemSeriesText="",t&&(this.createTime=t.readDouble(),this.itemSeriesText=this.createTime.toString())}return t.prototype.isCompleteEquals=function(t){return this.createTime==t.createTime&&this.wSeries==t.wSeries&&this.btServer==t.btServer&&this.btReserve==t.btReserve},t.prototype.isZero=function(){return 0==this.createTime&&0==this.wSeries&&0==this.btServer&&0==this.btReserve},t.prototype.writeToBytes=function(t){t.writeDouble(this.createTime)},t.prototype.setData=function(t){this.createTime=t,this.itemSeriesText=t.toString()},t.prototype.toString=function(){return this.itemSeriesText},t}();t.ItemSeries=e,__reflect(e.prototype,"app.ItemSeries")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.ucLevel=1,t.ucGender=2,t.ucJob=3,t.ucChief=4,t.ucPower=5,t.ucCircle=6,t.ucCircleLess=7,t.ucVipLevel=8,t.ucNeiGongLevel=9,t.ucGuildLevel=10,t.ucFamousPeople=15,t.Post_Chief=9,t.Post_Castellan=10,t.ucChief_Mark=21,t.ucChatelain_Mark=22,t}();t.StdItemCondition=e,__reflect(e.prototype,"app.StdItemCondition")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.recordLog=!1,this.denyStorage=!1,this.denyGuildDepot=!1,this.autoBindOnTake=!1,this.autoStartTime=!1,this.denyDeal=!1,this.denySell=!1,this.denyDestroy=!1,this.destroyOnOffline=!1,this.destroyOnDie=!1,this.denyDropdown=!1,this.dieDropdown=!1,this.offlineDropdown=!1,this.asQuestItem=!1,this.showLootTips=!1,this.bagSell=!1,this.denyBuffOverlay=!1,this.matchAllSuit=!1,this.canMoveKb=!1
}return t}();t.StdItemFlag=e,__reflect(e.prototype,"app.StdItemFlag")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.type1=1,t.type2=2,t.type3=3,t}();t.ItemSource=e,__reflect(e.prototype,"app.ItemSource");var i=function(){function i(e){if(void 0===e&&(e=null),this.smith=[],this.itemScore=0,this.itemRed=0,this.needShowBatchPanel=0,this._sourceStr="",this.type=0,this._itemState=t.BagMgr.STATE_NORMAL,this.smith=[],e){this.series=new t.ItemSeries(e),this.wItemId=e.readUnsignedShort(),this.btQuality=e.readUnsignedByte(),this.btStrong=e.readUnsignedByte(),this.btCount=e.readUnsignedInt(),this.nStrongMax=e.readUnsignedByte(),this.inscriptLevel=e.readUnsignedByte(),this.wIdentifySlotNum=e.readUnsignedShort(),this.wStar=e.readUnsignedShort(),this.nDeadline=Math.floor(t.GlobalFunc.formatMiniDateTime(e.readUnsignedInt())/1e3);for(var i,n=0;5>n;n++)i=e.readUnsignedInt(),i&&this.smith.push(this.decodeSmith(i));if(this.scenesId=e.readUnsignedInt(),this.btFlag=e.readUnsignedByte(),this.btLuck=e.readByte(),this.monsterId=e.readUnsignedShort(),this.btDeportId=e.readUnsignedByte(),this.btHandPos=e.readByte(),this.btSharp=e.readUnsignedByte(),this.bagType=e.readUnsignedShort(),this.topLine=e.readString(),this.refining=e.readString(),this.killName=e.readString(),1==this.bagType){var s=t.GlobalConfig.StdItems[this.wItemId];s&&(s.dup||this.setSourceStr())}}}return i.prototype.setSourceStr=function(){if(this._sourceStr="|C:0xf1ed02&T:["+t.LanguageUtils.language_Tips111+"]|",this.inscriptLevel==e.type1){var i="",n=t.GlobalConfig.Scenes[this.scenesId];n&&(i=n.scencename),this._sourceStr+="|C:0x78fff5&T:\n"+t.LanguageUtils.language_Tips112+i;var s="",a=t.GlobalConfig.Monster[this.monsterId];a&&(s=a.name),this._sourceStr+="\n"+t.LanguageUtils.language_Tips113+s,this._sourceStr+="\n"+t.LanguageUtils.language_Tips114+this.killName,this._sourceStr+="\n"+t.LanguageUtils.language_Tips115+t.DateUtils.getFormatBySecond(this.nDeadline,t.DateUtils.TIME_FORMAT_16),this._sourceStr+="|\n"}else if(this.inscriptLevel==e.type2){var i="",n=t.GlobalConfig.Scenes[this.scenesId];n&&(i=n.scencename),this._sourceStr+="|C:0x78fff5&T:\n"+t.LanguageUtils.language_Tips116,this._sourceStr+="\n"+t.LanguageUtils.language_Tips112+i,this._sourceStr+="\n"+t.LanguageUtils.language_Tips115+t.DateUtils.getFormatBySecond(this.nDeadline,t.DateUtils.TIME_FORMAT_16),this._sourceStr+="|\n"}else this.inscriptLevel==e.type3?(this._sourceStr+="|C:0x78fff5&T:\n"+t.LanguageUtils.language_Tips117,this._sourceStr+="\n"+t.LanguageUtils.language_Tips115+t.DateUtils.getFormatBySecond(this.nDeadline,t.DateUtils.TIME_FORMAT_16),this._sourceStr+="|\n"):this._sourceStr=""},Object.defineProperty(i.prototype,"sourceStr",{get:function(){return this._sourceStr},enumerable:!0,configurable:!0}),i.prototype.decodeSmith=function(e){var i=new t.ComAttribute;i.type=255&e;var n=e>>8&255?-1:1;return i.value=n*(e>>16&65535),i.isFloat(i.type)&&(i.value/=1e4),i},i}();t.userItem=i,__reflect(i.prototype,"app.userItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.itemID=0,i.curItemNum=0,i.curSelectNum=0,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="BagBatchUseSkin",i.top=i.bottom=i.left=i.right=0,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.addTouchEvent(this.btn_close,this.onClick),this.addTouchEvent(this.lessLessBtn,this.onClick),this.addTouchEvent(this.lessBtn,this.onClick),this.addTouchEvent(this.addBtn,this.onClick),this.addTouchEvent(this.addaddBtn,this.onClick),this.addTouchEvent(this.sure,this.onClick),this.addTouchEvent(this.rect,this.onClick),this.enterNum.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.itemID=e[0]),e[1]&&(this.curItem=e[1]),t.MouseScroller.bind(this.descScroller),this.descScroller.verticalScrollBar.autoVisibility=!1,this.descScroller.verticalScrollBar.visible=!1;var n=5395542;if(0!=this.itemID){var s=t.GlobalConfig.StdItems[this.itemID];s&&(n=t.ColorUtil.GOODS_COLOR[s.showQuality],s.showQuality>0?(this.imgBg.visible=!0,this.imgBg.source="bag_piliangbg_"+s.showQuality):this.imgBg.visible=!1,this.itemName.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+n+"&T:"+s.name+"|"),this.itemDesc.textFlow=t.TextFlowMaker.generateTextFlow(s.desc),this.itemAttr.text=t.AttributeData.getItemBindByType(s)),this.curItem&&(this.curItemNum=this.curItem.btCount,this.itemNum.text=t.LanguageUtils.language_Common_110+this.curItemNum,this.enterNum.text=this.curItemNum+"",this.curSelectNum=this.curItemNum,this.itemData.data={type:0,id:this.itemID,count:1})}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btn_close:case this.rect:t.ViewManager.ins().close(this);break;case this.lessLessBtn:this.curSelectNum=1,this.enterNum.text=this.curSelectNum+"";break;case this.lessBtn:this.curSelectNum-=1,this.curSelectNum<1&&(this.curSelectNum=1),this.enterNum.text=this.curSelectNum+"";break;case this.addBtn:this.curSelectNum+=1,this.curSelectNum>this.curItemNum&&(this.curSelectNum=this.curItemNum),this.enterNum.text=this.curSelectNum+"";break;case this.addaddBtn:this.curSelectNum=this.curItemNum,this.enterNum.text=this.curSelectNum+"";break;case this.sure:0!=this.itemID&&this.curItem&&(t.BagMgr.ins().send_8_11(this.itemID,this.curSelectNum,this.curItem.series),t.ViewManager.ins().close(this))}},i.prototype.onFocusOut=function(t){switch(t.currentTarget){case this.enterNum:this.enterNum.text=Math.max(Math.min(+this.enterNum.text,this.curItemNum),1)+"",this.curSelectNum=+this.enterNum.text}},i.prototype.closeView=function(e){e&&1==e.isSuccess&&t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.curItem=null,t.MouseScroller.unbind(this.descScroller),this.enterNum.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.removeTouchEvent(this.rect,this.onClick),this.removeTouchEvent(this.btn_close,this.onClick),this.removeTouchEvent(this.lessLessBtn,this.onClick),this.removeTouchEvent(this.lessBtn,this.onClick),this.removeTouchEvent(this.addBtn,this.onClick),this.removeTouchEvent(this.addaddBtn,this.onClick),this.removeTouchEvent(this.sure,this.onClick)},i}(t.BaseEuiView);t.BagBatchUseWin=e,__reflect(e.prototype,"app.BagBatchUseWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.iconList=[],t.skinName="FriendFunMenuViewSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.gList.itemRenderer=t.FriendFunMenuItem,this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i.prototype.onChange=function(){var e=this.gList.selectedIndex,i=this.gList.getChildAt(e),n=i.menuBtn.name;t.EventManager.ins().sendEvent(t.FriendEvent.BAG_MENU_ONCLICK,[n])},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.iconList=e[1],this.x=e[0].x-12;var n=t.StageUtils.ins().getWidth();t.StageUtils.ins().getHeight();this.x+this.width>n&&(this.x=n-this.width),this.height=48*this.iconList.length,this.bg.height=47*this.iconList.length+5,this.y=e[0].y-this.height;var s=new eui.ArrayCollection(this.iconList);this.gList.dataProvider=s},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.gList=null,this.bg=null},i}(t.BaseEuiView);t.BagFunMenuView=e,__reflect(e.prototype,"app.BagFunMenuView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.pos=null,i.size=null,i._hashCode=0,i.moneyType=-1,i.textNumber=0,i.curMoney=-1,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="BagGoldChangeSkin",i.name="BagGoldChangeView",i.dSpriteSheet=new how.DSpriteSheet,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setCurrentState("default5"),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System17)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e&&(e[0]&&(this.moneyType=e[0]),e[1]&&(this.pos=e[1]),e[2]&&(this.size=e[2]),e[3]&&(this._hashCode=e[3])),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateCurGold),this.observe(t.DefaultMgr.ins().post_gaimItemView,this.closeView),this.inputNum.text="0",this.textNumber=0,this.inputNum.addEventListener(egret.FocusEvent.FOCUS_IN,this.textFocusOn,this),this.inputNum.addEventListener(egret.FocusEvent.CHANGE,this.textChange,this),this.addTouchEvent(this.sure,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.addYiBai,this.onClick),this.addTouchEvent(this.jianYiBai,this.onClick),this.addTouchEvent(this.addBtn,this.onClick),this.addTouchEvent(this.jianBtn,this.onClick),this.updateCurGold()},i.prototype.closeView=function(e){e==this._hashCode&&t.ViewManager.ins().close(this)},i.prototype.initViewPos=function(){e.prototype.initViewPos.call(this),this.pos&&this.size&&this.setPos()},i.prototype.setPos=function(){var t=this.formatView(0,.5*this.size.width);isNaN(t)||(this.x=this.pos.x+Math.round((this.size.width-this.width)/2+t));var e=this.formatView(0,.5*this.size.height);isNaN(e)||(this.y=this.pos.y+Math.round((this.size.height-this.height)/2+e))},i.prototype.formatView=function(t,e){if(!t||"number"==typeof t)return t;var i=t,n=i.indexOf("%");if(-1==n)return+i;var s=+i.substring(0,n);return.01*s*e},i.prototype.onClick=function(e){switch(e.currentTarget){case this.sure:"0"!=this.inputNum.text&&t.BagMgr.ins().send_8_9(this.moneyType,this.textNumber);break;case this.closeBtn:t.ViewManager.ins().close(this);break;case this.addYiBai:-1!=this.curMoney&&(this.textNumber+=100,this.textNumber>this.curMoney&&(this.textNumber=this.curMoney),this.inputNum.text=this.textNumber+"");break;case this.jianYiBai:-1!=this.curMoney&&0!=this.textNumber&&(this.textNumber-=100,this.textNumber<0&&(this.textNumber=0),this.inputNum.text=this.textNumber+"");break;case this.addBtn:-1!=this.curMoney&&(this.textNumber=this.curMoney,this.inputNum.text=this.textNumber+"");break;case this.jianBtn:-1!=this.curMoney&&(this.textNumber=0,this.inputNum.text=this.textNumber+"")}},i.prototype.textChange=function(t){this.textNumber=+t.target.text},i.prototype.textFocusOn=function(t){this.inputNum.text=""},i.prototype.updateCurGold=function(){var e="",i="",n=t.EntityMgr.ins().getPlayerPropertySet();if(n&&n.propSet){var s=n.propSet;-1!=this.moneyType&&(1==this.moneyType?(this.leftMoney.source="icon_jinbi",this.rightMoney.source="icon_bangding",this.curImg.source="icon_jinbi",this.curYuanBao.text=t.LanguageUtils.language_Omission_txt83+":"+t.CommonUtils.overLengthChange(s.getNotBindCoin()),this.curYinLiang.text=t.LanguageUtils.language_Omission_txt83+":"+t.CommonUtils.overLengthChange(s.getBindCoin()),this.dragDropUI.setTitle(t.LanguageUtils.language_System17),this.curMoney=+s.getNotBindCoin()):2==this.moneyType&&(this.leftMoney.source="icon_yuanbao",this.rightMoney.source="icon_yinliang",this.curImg.source="icon_yuanbao",this.curYuanBao.text=t.LanguageUtils.language_Omission_txt83+":"+t.CommonUtils.overLengthChange(s.getNotBindYuanBao()),this.curYinLiang.text=t.LanguageUtils.language_Omission_txt83+":"+t.CommonUtils.overLengthChange(s.getBindYuanBao()),this.dragDropUI.setTitle(t.LanguageUtils.language_System41),this.curMoney=+s.getNotBindYuanBao()))}e=null,i=null},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.sure,this.onClick),this.removeTouchEvent(this.addYiBai,this.onClick),this.removeTouchEvent(this.jianYiBai,this.onClick),this.removeTouchEvent(this.addBtn,this.onClick),this.removeTouchEvent(this.jianBtn,this.onClick),this.inputNum.removeEventListener(egret.FocusEvent.FOCUS_IN,this.textFocusOn,this),this.inputNum.removeEventListener(egret.FocusEvent.CHANGE,this.textChange,this),this.dragDropUI.destroy(),this.dragDropUI=null,this.inputNum=null,this.addYiBai=null,this.addYiWan=null,this.addYiBaiWan=null,this.sure=null,this.curImg=null,this.leftMoney=null,this.rightMoney=null,this.dSpriteSheet.dispose(),this.dSpriteSheet=null,this.goldTxt=null,this.bindGoldTxt=null,this.inputBindGoldTxt=null,this.curOwnTxt=null,this.curOwnGold=null,this.moneyType=null,this.textNumber=null},i}(t.BaseEuiView);t.BagGoldChangeView=e,__reflect(e.prototype,"app.BagGoldChangeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.userItemCount=0,i.showNum=1,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="BagItemSplitSkin",i.name="BagItemSplitView",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this.sure,this.onClick),this.addTouchEvent(this.Cancels,this.onClick),this.addTouchEvent(this.minBtn,this.onClick),this.addTouchEvent(this.maxBtn,this.onClick),this.inputNum.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.addTouchEvent(this.minimumBtn,this.onClick),this.addTouchEvent(this.biggestBtn,this.onClick);var n=e[0];n&&n instanceof t.userItem&&(this.articlesData=n,this.updateView(n)),n=null},i.prototype.updateView=function(e){this.imgBg.visible=!1;var i=t.GlobalConfig.StdItems[e.wItemId];i&&(this.itemBg.source="quality_"+i.showQuality,i.showQuality>0&&(this.imgBg.visible=!0,this.imgBg.source="bag_piliangbg_"+i.showQuality),this.itemName.textColor=t.ColorUtil.GOODS_COLOR[i.showQuality]?t.ColorUtil.GOODS_COLOR[i.showQuality]:15064527,this.itemName.text=i.name+"",this.curItem.source=i.icon+"",this.userItemCount=e.btCount,this.curItemNum.text=t.LanguageUtils.language_Common_110+e.btCount,this.showNum=Math.floor(e.btCount/2),this.updateText(this.showNum)),i=null},i.prototype.updateText=function(t){this.inputNum.text=t+""},i.prototype.onFocusOut=function(t){switch(t.currentTarget){case this.inputNum:this.inputNum.text=Math.max(Math.min(+this.inputNum.text,this.userItemCount),1)+"",this.showNum=+this.inputNum.text}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.sure:this.articlesData&&this.articlesData.series&&(t.BagMgr.ins().send_8_5(this.articlesData.series,this.showNum),t.ViewManager.ins().close(this));break;case this.Cancels:t.ViewManager.ins().close(this);break;case this.minBtn:this.setShowTxt(0);break;case this.maxBtn:this.setShowTxt(1);break;case this.minimumBtn:this.setShowTxt(2);break;case this.biggestBtn:this.setShowTxt(3)}},i.prototype.setShowTxt=function(t){0==t?(this.showNum-=1,this.showNum<1&&(this.showNum=1)):1==t?(this.showNum+=1,this.showNum>this.articlesData.btCount-1&&(this.showNum=this.articlesData.btCount-1)):2==t?(this.showNum-=10,this.showNum<1&&(this.showNum=1)):3==t&&(this.showNum+=10,this.showNum>this.articlesData.btCount-1&&(this.showNum=this.articlesData.btCount-1)),this.updateText(this.showNum)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.inputNum.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.removeTouchEvent(this.sure,this.onClick),this.removeTouchEvent(this.Cancels,this.onClick),this.removeTouchEvent(this.minBtn,this.onClick),this.removeTouchEvent(this.maxBtn,this.onClick),this.removeTouchEvent(this.minimumBtn,this.onClick),this.removeTouchEvent(this.biggestBtn,this.onClick),this.dragDropUI=null,this.sure=null,this.Cancels=null,this.minBtn=null,this.maxBtn=null,this.curItem=null,this.curItemNum=null,this.showNum=null},i}(t.BaseEuiView);t.BagItemSplitView=e,__reflect(e.prototype,"app.BagItemSplitView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.isData=null,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="BagRecycleSkin",i.name="BagRecycleView",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setCurrentState("default4"),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System20),this.itemList.itemRenderer=t.ItemBase,this.itemGrp.visible=!1},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this.sure,this.onClick),this.addEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.observe(t.BagMgr.ins().postItemRecycle,this.updateItem),this.observe(t.BagMgr.ins().post_8_11,this.updateView),this.observe(t.BagMgr.ins().post_8_7,this.closeView)},i.prototype.initViewPos=function(){e.prototype.initViewPos.call(this),t.BagMgr.ins().globalPoint=this.itemBg.localToGlobal(0,0),t.BagMgr.ins().globalPoint2=this.itemBg.localToGlobal(this.itemBg.width,this.itemBg.height)},i.prototype.closeView=function(t){t&&1==t.isSuccess&&null!=this.isData&&t.itemID==this.isData.wItemId&&this.updateItem(this.isData)},i.prototype.onClick=function(e){var i=this;switch(e.currentTarget){case this.sure:var n=t.GlobalConfig.BagRemainConfig[5];if(n){var s=t.BagMgr.ins().getBagCapacity(n.bagremain);if(s)if(null!=this.isData){var a=t.GlobalConfig.StdItems[this.isData.wItemId];if(a&&a.recoverView)if(""!=this.isData.topLine&&void 0!=this.isData.topLine){var r=t.StringUtils.replace(t.LanguageUtils.language_Tips20,a.name);t.CautionView.show(t.TextFlowMaker.generateTextFlow(r),function(){t.BagMgr.ins().send_8_10(-1,i.isData.series)},this)}else t.BagMgr.ins().send_8_10(-1,this.isData.series);else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips9)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips9);else t.UserTips.ins().showUITips(n.bagtips)}}},i.prototype.updateView=function(e){var i=this;1==e.isSuccess&&-1==e.type?(this.itemGrp.visible=!1,this.itemList.dataProvider=new eui.ArrayCollection([]),this.itemTxt.text=t.LanguageUtils.language_System22,this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.x=214,this.mc.y=132,this.addChild(this.mc)),this.mc.visible=!0,this.mc.playFile(ResDirEnum.RES_DIR_EFF+"litboom",1,function(){i.mc.visible=!1},!1)):0==e.isSuccess&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips10)},i.prototype.refushPos=function(){t.BagMgr.ins().globalPoint=this.itemBg.localToGlobal(0,0),t.BagMgr.ins().globalPoint2=this.itemBg.localToGlobal(this.itemBg.width,this.itemBg.height)},i.prototype.updateItem=function(e){if(e){this.itemList.dataProvider=new eui.ArrayCollection([]),this.itemGrp.visible=!0;var i=e,n=t.GlobalConfig.StdItems[i.wItemId];if(n){this.itemIcon.source=n.icon+"",this.itemQua.source="quality_"+n.showQuality,this.itemNum.text=i.btCount+"";var s="";n.recoverView?(this.isData=e,this.itemList.dataProvider=new eui.ArrayCollection(n.recoverView)):(this.isData=null,s="|C:0xEC613A&T:"+t.LanguageUtils.language_System23+"|"),this.itemTxt.textFlow=t.TextFlowMaker.generateTextFlow(s)}i=null,n=null}},i.prototype.stopMove=function(){t.BagMgr.ins().globalPoint=this.itemBg.localToGlobal(0,0),t.BagMgr.ins().globalPoint2=this.itemBg.localToGlobal(this.itemBg.width,this.itemBg.height)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.sure,this.onClick),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.mc&&(this.mc.destroy(),this.mc=null),this.mc=null,this.dragDropUI.destroy(),this.dragDropUI=null,this.itemGrp=null,this.itemQua=null,this.itemIcon=null,this.itemNum=null,this.sure=null,this.itemBg=null,this.itemTxt=null,this.isData=null},i}(t.BaseEuiView);t.BagRecycleView=e,__reflect(e.prototype,"app.BagRecycleView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.bagClickType=0,i.moneyArray=[],i.oldIndex=0,i.bagGridArr=[],i.itemGrid=[],i.shiftClick=!1,i.ctrlClick=!1,i.grpOldIdx=-1,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="BagViewSkin",i.name="BagView",i.dSpriteSheet=new how.DSpriteSheet,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System0),this.newGrp=new eui.Group,this.newGrp.width=60,this.newGrp.height=60,this.newIcon=new eui.Image,this.newIcon.horizontalCenter=0,this.newIcon.verticalCenter=0,this.newGrp.addChild(this.newIcon),this.newGrp.x=this.x,this.newGrp.y=this.y,this.newGrp.visible=!1,this.newGrp.touchThrough=!0,this.newGrp.touchChildren=!1,this.newIcon.touchEnabled=!1,t.LayerManager.UI_Drag.addChild(this.newGrp)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(;e[0]instanceof Array;)e=e[0];var n=1;e[0]&&(n=e[0]),this.tab.dataProvider=new eui.ArrayCollection([t.LanguageUtils.language_System38,t.LanguageUtils.language_System39,t.LanguageUtils.language_System40]),this.observe(t.DefaultMgr.ins().postPlayerChange,this.changeMoney),this.observe(t.BagMgr.ins().post_8_1,this.updateBagItemGrid),this.observe(t.BagMgr.ins().post_8_3,this.updateBagItemGrid),this.observe(t.BagMgr.ins().post_8_4,this.updateBagItemGrid),this.observe(t.BagMgr.ins().post_8_10,this.updateBagItemGrid),this.observe(t.BagMgr.ins().postBagRecycleSelect,this.updateBagItemGrid),this.observe(t.DefaultMgr.ins().post_dimensionalKey,this.updateBagItemGrid),this.observe(t.BagMgr.ins().post_8_13,this.updateBagRed),this.observe(t.BagMgr.ins().post_8_1,this.setBagMaxMc),this.observe(t.BagMgr.ins().post_8_3,this.setBagMaxMc),this.observe(t.BagMgr.ins().post_8_4,this.setBagMaxMc),this.addEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.silding.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),gamelib.os.KeyBoard.addKeyDown(this.keyDown,this),gamelib.os.KeyBoard.addKeyUp(this.keyUp,this),this.addTouchEvent(this.wareHouseBtn,this.onClick),this.addTouchEvent(this.recoveryBtn,this.onClick),this.addTouchEvent(this.recoveryBtn2,this.onClick),this.addTouchEvent(this.upBtn,this.onClick),this.addTouchEvent(this.downBtn,this.onClick),this.addTouchEvent(this.goldIcon,this.onClick),this.addTouchEvent(this.yuanbaoIcon,this.onClick),this.addTouchEvent(this["function"],this.onClick),this.addChangeEvent(this.tab,this.onClick),this.addTouchEvent(this.arrange,this.onClick),t.MouseScroller.bind(this.equipScroller),t.MouseScroller.addCallbackFunction(this.equipScroller,this.onScrollerMouse.bind(this)),t.BagMgr.ins().postKeyXY(),this.changeMoney(),this.tab.selectedIndex=n,this.setBagData(n),this.setBagMaxMc(),gamelib.DeviceUtils.IsMobile&&(t.TimerManager.ins().doTimer(1e3,0,this.updateTask,this),this.updateTask())},i.prototype.initViewPos=function(){e.prototype.initViewPos.call(this),t.BagMgr.ins().bagGeZiPoint=this.equipList.localToGlobal(0,0),t.BagMgr.ins().bagGeZiPoint.y-=13},i.prototype.stopMove=function(){t.BagMgr.ins().bagGeZiPoint=this.equipList.localToGlobal(0,0),t.BagMgr.ins().bagGeZiPoint.y-=13},i.prototype.setBagMaxMc=function(){var e=t.BagMgr.ins().getBagTypeItemNum(1)<=0;e?(this.mouseMc||(this.mouseMc=t.ObjectPool.pop("app.MovieClip"),this.mouseMc.scaleX=this.mouseMc.scaleY=1,this.mouseMc.touchEnabled=!1,this.effGrp.addChild(this.mouseMc)),this.mouseMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_xsyd1",-1),t.TimerManager.ins().remove(this.stopMaxMc,this),t.TimerManager.ins().doTimer(3e3,1,this.stopMaxMc,this)):this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null)},i.prototype.stopMaxMc=function(){t.TimerManager.ins().remove(this.stopMaxMc,this),this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null)},i.prototype.onScrollerMouse=function(t){var e=this.equipScroller,i=this.tab.selectedIndex;if(0!=i){var n=0,s=0;t.data<0?(n=this.silding.value-62.5,s=this.equipScroller.viewport.scrollV+62.5):(n=this.silding.value+62.5,s=this.equipScroller.viewport.scrollV-62.5),this.silding.value=Math.max(Math.min(n,this.equipMaxHight),0),e.viewport.scrollV=Math.max(Math.min(s,this.equipMaxHight),0),this.setBagDataVis(i),i=null}},i.prototype.changeMoney=function(){var e=t.EntityMgr.ins().getPlayerPropertySet();if(e&&e.propSet){var i=e.propSet,n="|C:0xe5ddcf&T:"+t.CommonUtils.zhuanhuan(i.getNotBindCoin())+"|";this.goldNum.textFlow=t.TextFlowMaker.generateTextFlow(n);var s="|C:0xe5ddcf&T:"+t.CommonUtils.zhuanhuan(i.getBindCoin())+"|";this.bindGoldNum.textFlow=t.TextFlowMaker.generateTextFlow(s);var a=t.ColorUtil.getMoneyColor(i.getNotBindYuanBao()),r="|C:"+a+"&T:"+t.CommonUtils.zhuanhuan(i.getNotBindYuanBao())+"|";this.yuanbaoNum.textFlow=t.TextFlowMaker.generateTextFlow(r);var o=t.ColorUtil.getMoneyColor(i.getBindYuanBao()),l="|C:"+o+"&T:"+t.CommonUtils.zhuanhuan(i.getBindYuanBao())+"|";this.yinliangNum.textFlow=t.TextFlowMaker.generateTextFlow(l)}else this.goldNum.text="0",this.yuanbaoNum.text="0",this.bindGoldNum.text="0",this.yinliangNum.text="0"},i.prototype.updateTask=function(){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoTask)&&!t.PlayerRoleAI.ins().isFinding&&0==t.GameMap.fubenID&&1==t.OtherMgr.ins().isLargeMapAct){var e=t.MainTaskMgr.ins().getTaskArr(),i=t.ViewManager.ins().getView(t.SetUpView);if(e&&e[0]&&(!i||5!=i.getUpViewIdx)&&(7==e[0].taskID&&e[0].taskState||11==e[0].taskID&&e[0].taskState||20==e[0].taskID&&e[0].taskState||27==e[0].taskID&&e[0].taskState||29==e[0].taskID&&e[0].taskState)){var n=t.GlobalConfig.TaskDisplayConfig[e[0].taskID][e[0].taskState];if(n&&1==n.taskstate)return t.TimerManager.ins().isExists(this.stopMaxMc,this)&&t.TimerManager.ins().remove(this.stopMaxMc,this),t.MainTaskMgr.ins().postUpdateTask(1),this.mouseMc||(this.mouseMc=t.ObjectPool.pop("app.MovieClip"),this.mouseMc.scaleX=this.mouseMc.scaleY=1,this.mouseMc.touchEnabled=!1,this.effGrp.addChild(this.mouseMc)),t.MainTaskWin.isTaskSetUpMC=!0,t.TimerManager.ins().doTimer(1e3*n.automatic,1,this.updateMouseEff,this),this.mouseMc.isPlaying||this.mouseMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_xsyd1",-1),void(10==n.taskname.type)}}this.stopTaskMC()},i.prototype.updateMouseEff=function(){t.TimerManager.ins().remove(this.updateMouseEff,this),t.ViewManager.ins().isShow(t.SetUpView)&&t.ViewManager.ins().close(t.SetUpView),t.ViewManager.ins().open(t.SetUpView,5,1)},i.prototype.stopTaskMC=function(){t.TimerManager.ins().remove(this.updateMouseEff,this),t.MainTaskWin.isTaskSetUpMC=!1,t.TimerManager.ins().isExists(this.stopMaxMc,this)||this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null)},i.prototype.changeHandler=function(t){var e=this.tab.selectedIndex,i=t.target.value;this.equipScroller.viewport.scrollV=-(i-this.equipMaxHight),this.setBagDataVis(e),e=null,i=null},i.prototype.updateBagItemGrid=function(){this.updateBagRed();var e=this.tab.selectedIndex,i=t.BagMgr.ins().gridNumArr[e];this.curCapacity.text=0==e?t.BagMgr.ins()._bagItem[e].length+"/"+i:t.BagMgr.ins()._bagItem[e].length+"/"+(i-10),this.cleanBagGrid(),this.setBagDataVis(e),e=null,i=null},i.prototype.updateBagRed=function(){this.redPoint0.visible=this.redPoint1.visible=this.redPoint2.visible=!1;for(var e=0;3>e;e++){for(var i=0,n=t.BagMgr.ins().bagItem[e],s=0;s<n.length;s++){var a=t.GlobalConfig.StdItems[n[s].wItemId];if(a&&(1!=n[s].itemRed&&2!=n[s].itemRed||!a.Redpointlimit||0!=t.CurrencyUtils.isRedDot(a.Redpointlimit)?0==n[s].itemRed&&a.Redpointlimit&&1==t.CurrencyUtils.isRedDot(a.Redpointlimit)?(1==a.forcetips?t.BagMgr.redPointArr.push(1):2==a.forcetips&&t.BagMgr.yellowPointArr.push(2),n[s].itemRed=a.forcetips):a.UseLimit&&(n[s].itemRed=t.BagMgr.ins().surplusUseCount[a.id]>0?1:0):(1==n[s].itemRed?t.BagMgr.redPointArr.splice(0,1):2==n[s].itemRed&&t.BagMgr.yellowPointArr.splice(0,1),n[s].itemRed=0),n[s].itemRed>0&&(i=n[s].itemRed),1==i))break}this["redPoint"+e].visible=i>0,this["redPoint"+e].setRedImg(i)}},i.prototype.cleanBagGrid=function(){for(var t in this.bagGridArr){for(var e in this.bagGridArr[t])this.pushBagGrid(this.bagGridArr[t][e]);delete this.bagGridArr[t]}},i.prototype.setBagDataVis=function(e){var i=this.equipScroller.viewport.scrollV,n=Math.floor(i/60),s=this.equipScroller.viewport.scrollV+372,a=Math.ceil(s/60),r=t.BagMgr.ins().getBagTwoArr(e);a>r.length&&(a=r.length);var o=t.BagMgr.ins().getLineXY(r);for(var l in this.bagGridArr)if(n>+l||+l>a){for(var h in this.bagGridArr[l])this.pushBagGrid(this.bagGridArr[l][h]);delete this.bagGridArr[l]}for(var p=n;a>p;p++)this.bagGridArr[p]||this.addBagItem(p,{x:o[p].x,y:o[p].y},r[p]);i=null,n=null,s=null,a=null,r=null,o=null},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=i.curData;if(n&&n.wItemId){var s=i.localToGlobal(),a=t.GlobalConfig.StdItems[n.wItemId];if(1!=n.bagType&&n.series){var r=t.TipsType.TIPS_EQUIP;a&&a.fashionTips&&(r=t.TipsType.TIPS_FASHION),t.UserTips.ins().shouwTips(e.target,r,n,{x:s.x+i.width/2,y:s.y+i.height/2})}else if(1==n.bagType&&n.series){var o=t.EquipItemMgr.ins().getEquipsByPos(a.type-1);if(o&&o.series){var l=t.GlobalConfig.StdItems[o.wItemId],h=l&&a;h?t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIPCONTRAST,n,{x:s.x+i.width/2,y:s.y+i.height/2},o):t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,n,{x:s.x+i.width/2,y:s.y+i.height/2})}else t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,n,{x:s.x+i.width/2,y:s.y+i.height/2})}s=null}i=null,n=null}},i.prototype.touchBeginFunction=function(e){e.type==mouse.MouseEvent.RIGHT_DOWN?this.bagClickType=t.ClickClass.CLICK_RIGHT:this.bagClickType=t.ClickClass.CLICK_LEFT,this.checkFuncion()},i.prototype.keyDown=function(t){t==gamelib.KeyCode.KC_SHIFT?(this.shiftClick=!0,this.checkFuncion()):t==gamelib.KeyCode.KC_CONTROL&&(this.ctrlClick=!0,this.checkFuncion())},i.prototype.endFunction=function(e){t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.bagClickType=t.ClickClass.CLICK_TYPE0,this.shiftClick=!1,this.ctrlClick=!1,this.checkFuncion()},i.prototype.keyUp=function(t){t==gamelib.KeyCode.KC_SHIFT?(this.shiftClick=!1,this.checkFuncion()):t==gamelib.KeyCode.KC_CONTROL&&(this.ctrlClick=!1,this.checkFuncion())},i.prototype.checkFuncion=function(){if(this.bagClickType==t.ClickClass.CLICK_LEFT){var e=this.tab.selectedIndex,i=t.BagMgr.ins().itemInfo[e],n=i[this.grpOldIdx];if(this.shiftClick)n&&n.series&&t.EventManager.ins().sendEvent(t.ChatEvent.GOODS_SHOW,[{info:n}]);else if(this.ctrlClick&&this.grpOldIdx>=0){var s=n?t.GlobalConfig.StdItems[n.wItemId]:null;n&&n.series&&n.btCount>1&&s&&s.dup>1&&(t.ViewManager.ins().open(t.BagItemSplitView,n),this.grpOldIdx=-1,this.ctrlClick=!1,this.shiftClick=!1),s=null}e=null,i=null,n=null}},i.prototype.onTouchTap=function(e){if(t.WarehouseMgr.ins().saveSelect&&t.ViewManager.ins().isShow(t.WarehouseWin)){var i=e.target.itemInfo;i&&i.wItemId&&t.WarehouseMgr.ins().send_23_2(i.series)}},i.prototype.onTouchDouble=function(e){if(gamelib.DeviceUtils.IsMobile&&t.UserTips.ins().closeTips(),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.resetPos(this),e.target instanceof eui.Image){var i=this.tab.selectedIndex,n=e.target.idx,s=t.BagMgr.ins().itemInfo[i][n];if(s&&s.wItemId&&s.series){var a=t.GlobalConfig.StdItems[s.wItemId];if(a){if(t.ViewManager.ins().isShow(t.WarehouseWin))return void t.WarehouseMgr.ins().send_23_2(s.series);this.setSoundByEquipType(a.type),t.BagManager.ins().onUseItem(s)}}i=null,n=null,s=null}},i.prototype.setSoundByEquipType=function(e){switch(e){case 1:t.SoundManager.ins().playEffect(t.SoundUtil.ARMS);break;case 2:t.SoundManager.ins().playEffect(t.SoundUtil.CLOTHES);break;case 3:case 5:case 8:case 9:case 10:case 11:case 12:case 13:case 14:t.SoundManager.ins().playEffect(t.SoundUtil.OTHER_EQUIP);
break;case 4:t.SoundManager.ins().playEffect(t.SoundUtil.NECKLACE);break;case 6:t.SoundManager.ins().playEffect(t.SoundUtil.BRACELET);break;case 7:t.SoundManager.ins().playEffect(t.SoundUtil.RING)}},i.prototype.onTouchBegin=function(e){if(e.target instanceof eui.Image){this.newIcon.source=e.target.source,this.newGrp.name=e.target.name;var i=e.currentTarget.localToGlobal(0,0);this.newGrp.x=i.x,this.newGrp.y=i.y,t.UserTips.ins().closeTips(),this.grpOldIdx=e.target.idx,this.XTouch=e.stageX-this.newGrp.x,this.YTouch=e.stageY-this.newGrp.y,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}},i.prototype.onTouchMove=function(t){if(this.newGrp){this.newGrp.visible=!0,this.newGrp.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this);var e=Math.floor(this.grpOldIdx/8),i=this.grpOldIdx%8,n=this.bagGridArr[e]&&this.bagGridArr[e][i]?this.bagGridArr[e][i]:null;n&&(n.imgicon.visible=!1,n.lab.visible=!1,n.bestEquip.visible=!1,n.imgNuBg.visible=!1,n.imgLock.visible=!1,n.effGrp.visible=!1,n.redPoint.visible=!1,n.imgAscension.visible=!1),this.newGrp.x=t.stageX-this.XTouch,this.newGrp.y=t.stageY-this.YTouch}},i.prototype.onTouchEnd=function(e){if(1==this.newGrp.visible){var i=this,n=-1,s=50,a=0,r=this.newGrp.localToGlobal(0,0),o=this.tab.selectedIndex,l=t.BagMgr.ins().itemInfo[o];for(var h in this.bagGridArr)for(var p in this.bagGridArr[h]){var u=this.bagGridArr[h][p],c=u.imgicon.localToGlobal(0,0);a=Math.sqrt(Math.pow(c.x-r.x,2)+Math.pow(c.y-r.y,2)),s>a&&(s=a,n=u.imgicon.idx)}var g,d,m=l[this.grpOldIdx],f=l[n];if(m&&(g=t.GlobalConfig.StdItems[m.wItemId]),f&&(d=t.GlobalConfig.StdItems[f.wItemId]),-1!=n&&n!=this.grpOldIdx)if(m&&f&&m.wItemId&&f.wItemId&&m.wItemId==f.wItemId&&g&&d&&g.dup>1&&m.btCount<g.dup&&f.btCount<d.dup)t.BagMgr.ins().send_8_6(m.series,f.series),this.resetPos(i);else{var v=l[this.grpOldIdx];l[this.grpOldIdx]=l[n],l[n]=v,this.newGrp.x=this.x,this.newGrp.y=this.y,this.newGrp.visible=!1}else if(n==this.grpOldIdx)this.resetPos(i);else{var _=!1;null!=t.BagMgr.ins().globalPoint&&(_=t.BagMgr.ins().globalPoint.x<=r.x&&r.x<t.BagMgr.ins().globalPoint2.x&&t.BagMgr.ins().globalPoint.y<=r.y&&r.y<t.BagMgr.ins().globalPoint2.y);var y=!1;null!=t.BagMgr.ins().sellGlobalPoint&&(y=t.BagMgr.ins().sellGlobalPoint.x<=r.x&&r.x<t.BagMgr.ins().sellGlobalPoint.x+137&&t.BagMgr.ins().sellGlobalPoint.y<=r.y&&r.y<t.BagMgr.ins().sellGlobalPoint.y+120);var T=!1;null!=t.WarehouseMgr.ins().warehousePoint&&(T=t.WarehouseMgr.ins().warehousePoint.x<=r.x&&r.x<t.WarehouseMgr.ins().warehousePoint.x+383&&t.WarehouseMgr.ins().warehousePoint.y<=r.y&&r.y<t.WarehouseMgr.ins().warehousePoint.y+455);var M=t.ViewManager.ins().getView(t.TradeLineWin),C=-1;M&&(C=M.tab.selectedIndex);var b=this.quickKey(),I=this.privateTradePos();if(-1!=b)m&&m.series&&g&&g.canMoveKb?gamelib.DeviceUtils.IsMobile?t.SettingMgr.ins().send_17_12(b,0,m.wItemId,-1):t.SettingMgr.ins().send_17_2(b,0,m.wItemId,-1):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips2),this.resetPos(i);else if(t.ViewManager.ins().isShow(t.BagRecycleView)&&null!=t.BagMgr.ins().globalPoint&&_)m&&m.series&&g&&t.BagMgr.ins().postItemRecycle(m),this.resetPos(i);else if(t.ViewManager.ins().isShow(t.WarehouseWin)&&null!=t.WarehouseMgr.ins().warehousePoint&&T)m&&m.series&&g&&t.WarehouseMgr.ins().send_23_2(m.series),this.resetPos(i);else if(t.ViewManager.ins().isShow(t.TradeLineWin)&&null!=t.BagMgr.ins().sellGlobalPoint&&y&&1==C)m&&""!=m.topLine&&void 0!=m.topLine?t.TradeLineMgr.ins().postItemSell(m):m&&m.series&&g&&(g.denySell?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips30):t.TradeLineMgr.ins().postItemSell(m)),this.resetPos(i);else if(t.ViewManager.ins().isShow(t.PrivateDealsWin)&&-1!=I){if(m&&""!=m.topLine&&void 0!=m.topLine)if(t.PrivateDealsMgr.ins().isDeals)if(t.PrivateDealsMgr.ins().isLock)t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips42);else{var S=t.GlobalConfig.taxconfig.Jiaodemand;if(S){var E=t.EntityMgr.ins().getPayer;if(E&&E.propSet)if(E.propSet.getZSLevel()>=S[0]||t.VipData.ins().getMyVipLv()>=S[1])t.PrivateDealsMgr.ins().send_13_3(1,I,m.series);else{var w=t.VipData.ins().getVipDataByLv(S[1]);w&&t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips123,S[0],w.name))}}}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips31);else m&&m.series&&g&&(g.denyDeal?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips43):t.PrivateDealsMgr.ins().isDeals?t.PrivateDealsMgr.ins().isLock?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips42):t.PrivateDealsMgr.ins().send_13_3(1,I,m.series):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips31));this.resetPos(i)}else m&&""!=m.topLine&&void 0!=m.topLine?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips8):m&&m.series&&g&&g.denyDestroy?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips8):m&&m.series&&t.CautionView.show(t.LanguageUtils.language_Common_27,function(){t.BagMgr.ins().send_8_3(m.series)},this),this.resetPos(i);b=null,I=null,M=null,C=null}t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.newGrp.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.updateBagItemGrid(),i=null,n=null,s=null,a=null,r=null,o=null,l=null,f=null,g=null,d=null}},i.prototype.quickKey=function(){for(var e=-1,i=50,n=0,s=this.newGrp.localToGlobal(0,0),a=t.BagMgr.ins().keyXY,r=0;r<a.length;r++)n=Math.sqrt(Math.pow(a[r].x-s.x,2)+Math.pow(a[r].y-s.y,2)),i>n&&(i=n,e=r);return e},i.prototype.privateTradePos=function(){var e=-1,i=50,n=0,s=this.newGrp.localToGlobal(0,0),a=t.PrivateDealsMgr.ins().itemGlobalPos;if(a.length>0)for(var r=0;5>r;r++)n=Math.sqrt(Math.pow(a[r].x-s.x,2)+Math.pow(a[r].y-s.y,2)),i>n&&(i=n,e=r);return e},i.prototype.resetPos=function(t){this.newGrp.x=this.x,this.newGrp.y=this.y,this.newGrp.visible=!1},i.prototype.onClick=function(e){switch(e.currentTarget){case this.tab:this.setBagData(this.tab.selectedIndex);break;case this.arrange:t.BagMgr.ins().send_8_7();break;case this.goldIcon:t.ViewManager.ins().open(t.BagGoldChangeView,1,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode);break;case this.yuanbaoIcon:t.ViewManager.ins().open(t.BagGoldChangeView,2,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode);break;case this["function"]:break;case this.upBtn:if(this.equipScroller.viewport.scrollV>0){var i=this.equipScroller.viewport.scrollV-62.5;0>i?this.equipScroller.viewport.scrollV=0:this.equipScroller.viewport.scrollV-=62.5,this.silding.value+=62.5,this.setBagDataVis(this.tab.selectedIndex)}break;case this.downBtn:if(this.equipScroller.viewport.scrollV<this.equipMaxHight){var n=this.equipScroller.viewport.scrollV+62.5;n>this.equipMaxHight?this.equipScroller.viewport.scrollV=this.equipMaxHight:this.equipScroller.viewport.scrollV+=62.5,this.silding.value-=62.5,this.setBagDataVis(this.tab.selectedIndex)}break;case this.wareHouseBtn:if(t.GameSocket.IsCrossService)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips139);var s=t.GlobalConfig.WarehouseConfig;s&&s.openprivilegewith&&(t.ViewManager.ins().isCheckOpen(s.openprivilegewith)?t.ViewManager.ins().open(t.WarehouseWin):s.tips&&t.ViewManager.ins().open(t.BagWareHouseTipsView,s.tips));break;case this.recoveryBtn:t.ViewManager.ins().isShow(t.SetUpView)||t.ViewManager.ins().open(t.SetUpView,5);break;case this.recoveryBtn2:t.ViewManager.ins().open(t.BagRecycleView)}},i.prototype.onMenuClick=function(e){var i=e[0];switch(i){case"keyRecycle":t.ViewManager.ins().isShow(t.SetUpView)||t.ViewManager.ins().open(t.SetUpView,5);break;case"recycleMerchant":t.ViewManager.ins().open(t.BagRecycleView);break;case"sortout":t.BagMgr.ins().send_8_7()}},i.prototype.setBagData=function(t){switch(void 0===t&&(t=1),t){case 0:this.sildGrp.visible=!1;break;case 1:case 2:this.sildGrp.visible=!0}this.equipMaxHight=1188,this.silding.maximum=this.equipMaxHight,this.silding.value=this.equipMaxHight,this.equipScroller.viewport.scrollV=0,this.oldIndex!=t?this.oldIndex=t:this.tab.selectedIndex=t,this.updateBagItemGrid()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.BagMgr.ins().bagGeZiPoint=null,this.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.silding.removeEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),gamelib.os.KeyBoard.removeKeyDown(this.keyDown,this),gamelib.os.KeyBoard.removeKeyUp(this.keyUp,this),this.removeTouchEvent(this.wareHouseBtn,this.onClick),this.removeTouchEvent(this.arrange,this.onClick),this.removeTouchEvent(this.goldIcon,this.onClick),this.removeTouchEvent(this.yuanbaoIcon,this.onClick),this.removeTouchEvent(this["function"],this.onClick),this.removeTouchEvent(this.upBtn,this.onClick),this.removeTouchEvent(this.downBtn,this.onClick),t.MouseScroller.unbind(this.equipScroller),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.tab.removeEventListener(egret.TouchEvent.CHANGE,this.onClick,this),t.DisplayUtils.removeFromParent(this.newGrp),this.dSpriteSheet.dispose(),this.cleanBagGrid(),t.TimerManager.ins().remove(this.updateMouseEff,this),t.TimerManager.ins().remove(this.updateTask,this),this.dragDropUI.destroy(),this.dragDropUI=null,this.moneyGrp=null,this.equipList=null,this.tab=null,this.arrange=null,this["function"]=null,this.sildGrp=null,this.upBtn=null,this.downBtn=null,this.silding=null,this.equipScroller=null,this.equipMaxHight=null,this.dSpriteSheet=null,this.moneyArray=null,this.oldIndex=null,this.goldIcon=null,this.yuanbaoIcon=null,this.equipBg=null,this.equipLab=null,this.equipStar=null,this.itemEffGrp=null,this.newGrp=null,this.newIcon=null,this.bagGridArr=null,this.itemGrid=null},i.prototype.getBagGrid=function(e,i,n,s,a){return this.itemGrid.pop()||new t.BbgItemGrid(e,i,n,s,a)},i.prototype.pushBagGrid=function(t){t.imgicon.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),t.imgicon.removeEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),t.imgicon.removeEventListener(mouse.MouseEvent.LEFT_DOWN,this.touchBeginFunction,this),t.imgicon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),t.imgicon.removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),this.removeTouchEvent(t.imgicon,this.mouseMove),this.removeTouchEvent(t.imgicon,this.mouseMove),t.cleanImg(),t.setVis(!1),this.itemGrid.push(t)},i.prototype.addBagItem=function(t,e,i){for(var n,s=0,a=0;a<i.length;a++)n=this.getBagGrid(this.equipBg,this.equipLab,this.equipStar,this.itemEffGrp,this.dSpriteSheet),n.cleanImg(),this.bagGridArr[t]||(this.bagGridArr[t]=[]),this.bagGridArr[t].push(n),0==a?(n.x=0,s=0):(n.x=60+s+2.5,s=n.x),n.y=e.y,n.setVis(!0),n.imgicon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),n.imgicon.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),n.imgicon.addEventListener(mouse.MouseEvent.LEFT_DOWN,this.touchBeginFunction,this),n.imgicon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),n.imgicon.addEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),this.addMouseMoveEvent(n.imgicon,this.mouseMove),this.addMouseOverEvent(n.imgicon,this.mouseMove),n.dataChange(i[a],t,a);n=null,s=null},i}(t.BaseEuiView);t.BagView=e,__reflect(e.prototype,"app.BagView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="ActivityCommonViewSkin",i.name="BagWareHouseTipsView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System61)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.strLab.textFlow=t.TextFlowMaker.generateTextFlow(e[0])),this.addTouchEvent(this.closeBtn,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.BagWareHouseTipsView=e,__reflect(e.prototype,"app.BagWareHouseTipsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n,s,a,r){var o=e.call(this)||this;return o.lab=new eui.Label,o.lab.textColor=t.ColorUtil.WHITE_COLOR,o.lab.textAlign="right",o.lab.size=16,o.lab.width=50,o.lab.stroke=1,o.lab.strokeColor=0,o.imgBg=new eui.Image,o.imgNuBg=new eui.Image,o.imgicon=new eui.Image,o.imgLock=new eui.Image("quality_lock"),o.imgAscension=new eui.Image,o.imgSelectIcon=new eui.Image,o.bestEquip=new eui.Image,o.effGrp=new eui.Group,o.effGrp.touchEnabled=!1,o.effGrp.touchChildren=!1,o.redPoint=new eui.Image("redPoint"),o.imgNuBg.touchEnabled=!1,o.imgLock.touchEnabled=!1,o.imgSelectIcon.touchEnabled=!1,o.imgAscension.touchEnabled=!1,o.bestEquip.touchEnabled=!1,i.addChild(o.imgBg),i.addChild(o.imgicon),i.addChild(o.imgNuBg),i.addChild(o.imgLock),i.addChild(o.imgAscension),i.addChild(o.imgSelectIcon),i.addChild(o.bestEquip),i.addChild(o.redPoint),n.addChild(o.lab),a.addChild(o.effGrp),o.starLabel=new eui.BitmapLabel,o.starLabel.textAlign,o.starLabel.width=50,o.starLabel.letterSpacing=-3,o.starLabel.textAlign="right",o.starLabel.font="num_8_fnt",s.addChild(o.starLabel),o}return __extends(i,e),i.prototype.dataChange=function(e,i,n){if(e&&e.wItemId){this.curItem=e,this.starLabel.visible=e.wStar>0,this.starLabel.text="+"+e.wStar;var s=t.GlobalConfig.StdItems[this.curItem.wItemId];if(s){this.bestEquip.visible=!1,this.redPoint.visible=!1,s.forcetips>0&&(s.Redpointlimit?this.redPoint.visible=t.CurrencyUtils.isRedDot(s.Redpointlimit)?!0:!1:this.redPoint.visible=!0,this.redPoint.source=1==s.forcetips?"redPoint":"orangePoint"),s.UseLimit&&(t.BagMgr.ins().surplusUseCount[s.id]>0&&(this.redPoint.source="redPoint",this.redPoint.visible=!0),t.MessageCenter.addListener(t.BagMgr.ins().post_8_13,this.updateSurplusUseCount,this),t.BagMgr.ins().send_8_13(s.id)),this.imgBg.source="quality_"+s.showQuality,this.imgNuBg.source=s.iseffect?"yan_"+s.iseffect:"",this.imgNuBg.visible=s.iseffect?!0:!1,this.imgLock.visible=s.openDaylimit&&t.GlobalData.sectionOpenDay<=s.openDaylimit;var a=t.ViewManager.ins().getView(t.SetUpView),r=t.BagMgr.ins().getBagRecycleSelect(s.itemlevel);this.imgSelectIcon.source=a&&5==a.getUpViewIdx&&r?"quality_huishou":"",this.imgSelectIcon.visible=a&&5==a.getUpViewIdx&&r?!0:!1,this.imgAscension.source="",this.imgAscension.visible=!1;var o=t.BagManager.ins().getItemUseState(s),l=t.EntityMgr.ins().getPlayerPropertySet(),h=l.propSet.getAP_JOB();if(1==s.packageType&&(0==s.suggVocation||s.suggVocation==h)&&1==o){var p=t.EquipItemMgr.ins().getEquipsByPos(s.type-1);p&&p.series?p.itemScore<e.itemScore&&(this.imgAscension.source="quality_sheng",this.imgAscension.visible=!0):(this.imgAscension.source="quality_sheng",this.imgAscension.visible=!0)}this.imgicon.source=s.icon+"",this.lab.text=e.btCount>1?e.btCount+"":"",""!=e.topLine&&void 0!=e.topLine&&(this.bestEquip.source="quality_jipin",this.bestEquip.visible=!0),s.itemEff&&(this.effGrp.visible=!0,this.itemMC||(this.itemMC=t.ObjectPool.pop("app.MovieClip"),this.itemMC.scaleX=this.itemMC.scaleY=1,this.itemMC.touchEnabled=!1,this.itemMC.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.itemMC)),this.itemMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zb"+s.itemEff,-1)),this.imgicon.curData=e}}else this.starLabel.visible=!1,this.imgBg.source="quality_0",this.imgNuBg.source="",this.imgicon.source="",this.imgSelectIcon.source="",this.imgAscension.source="",this.bestEquip.source="",this.lab.text="",this.imgLock.visible=!1,this.itemMC&&(this.itemMC.destroy(),this.itemMC=null);this.imgicon.idx=8*i+n,this.imgicon.itemInfo=e},i.prototype.updateSurplusUseCount=function(e){e==this.curItem.wItemId&&t.BagMgr.ins().surplusUseCount[this.curItem.wItemId]>0&&(this.redPoint.source="redPoint",this.redPoint.visible=!0)},Object.defineProperty(i.prototype,"curData",{get:function(){return this.curItem},enumerable:!0,configurable:!0}),i.prototype.setVis=function(t){this.imgBg.visible=t,this.imgNuBg.visible=!1,this.imgLock.visible=!1,this.redPoint.visible=!1,this.imgicon.visible=t,this.lab.visible=t,this.effGrp.visible=!1,this.imgSelectIcon.visible=t,this.imgAscension.visible=t,this.bestEquip.visible=!1,this.itemMC&&(this.itemMC.destroy(),this.itemMC=null)},i.prototype.cleanImg=function(){t.MessageCenter.ins().removeAll(this),this.imgBg.source="quality_0",this.imgNuBg.source="",this.imgicon.source="",this.imgSelectIcon.source="",this.imgAscension.source="",this.bestEquip.source="",this.imgLock.visible=!1,this.bestEquip.visible=!1,this.redPoint.visible=!1,this.effGrp.visible=!1,this.starLabel.visible=!1,this.lab.text="",this.itemMC&&(this.itemMC.destroy(),this.itemMC=null)},Object.defineProperty(i.prototype,"x",{get:function(){return this.imgBg.x},set:function(t){this.imgBg.x=t,this.redPoint.x=t+43,this.imgicon.x=t,this.imgNuBg.x=t,this.imgLock.x=t,this.imgSelectIcon.x=t,this.imgAscension.x=t,this.bestEquip.x=t,this.effGrp.x=t+30,this.lab.x=t+5,this.starLabel.x=t+5},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.imgBg.y},set:function(t){this.imgBg.y=t,this.redPoint.y=t+2,this.imgicon.y=t,this.imgNuBg.y=t,this.imgLock.y=t,this.imgSelectIcon.y=t,this.imgAscension.y=t,this.bestEquip.y=t,this.effGrp.y=t+30,this.lab.y=t+42,this.starLabel.y=t+38},enumerable:!0,configurable:!0}),i}(eui.Component);t.BbgItemGrid=e,__reflect(e.prototype,"app.BbgItemGrid")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.dimensionBossRoleInfo={},i.sysId=t.PackageID.Boss,i.regNetMsg(1,i.post_49_1),i.regNetMsg(2,i.post_49_2),i.regNetMsg(3,i.post_49_3),i.regNetMsg(4,i.post_49_4),i.regNetMsg(6,i.post_49_6),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_49_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.send_49_2=function(e,i){t.ModelManager.ins().bossModel.bossId=e;var n=this.getBytes(2);n.writeInt(e),n.writeInt(i),this.sendToServer(n)},i.prototype.post_49_1=function(e){for(var i,n,s=e.readInt(),a=0;s>a;a++)i=new t.BoosVo,i.serial=e.readInt(),i.refreshTime=t.DateUtils.formatMiniDateTime(e.readInt()),i.deliveryTime=e.readInt(),i.hpMaxCount=e.readInt(),i.hpCurrent=e.readInt(),n=t.GlobalConfig.BossConfig[i.serial],n&&(t.ModelManager.ins().bossModel.bossList[i.serial]={mold:n.mold,bossVo:i})},i.prototype.post_49_2=function(e){var i=e.readByte(),n=e.readUnsignedInt(),s=t.GlobalData.serverTime/1e3;return t.ModelManager.ins().bossModel.isSuccess=i,{actTime:n-s}},i.prototype.post_49_3=function(e){var i=new t.BossBelongVo;e.readByte();i.nBossid=e.readInt(),i.isBelong=e.readByte(),1==i.isBelong&&(i.playerId=e.readUnsignedInt(),i.job=e.readByte(),i.sex=e.readByte(),i.playerName=e.readString(),i.guildName=e.readString(),i.isSbk=e.readByte(),i.maxHp=e.readInt(),i.currentHp=e.readInt(),i.recog=e.readNumber()),t.ModelManager.ins().bossModel.bossBelongVo=i},i.prototype.post_49_4=function(e){var i=e.readByte(),n=e.readInt(),s=0,a=0;0==i?(s=7,a=t.GlobalConfig.ShenZhuangBossConfig.level):1==i&&(s=16,a=t.GlobalConfig.ShenZhuangBossConfig.pidlevel),t.ModelManager.ins().bossModel.bossTimesDic[s]={bossTimes:n,levelLimt:a}},i.prototype.post_49_5=function(e){var i=e.readUnsignedInt();this.dimensionBossRoleInfo={roleNum:i},t.ViewManager.ins().isShow(t.DimensionBossRoleInfo)||t.ViewManager.ins().open(t.DimensionBossRoleInfo)},i.prototype.post_49_6=function(e){var i={};i.name=e.readString();for(var n,s=e.readByte(),a=[],r=0;s>r;r++)n=new Object,n.type=e.readUnsignedInt(),n.id=e.readUnsignedInt(),n.count=e.readUnsignedInt(),a.push(n);i.list=a,t.ViewManager.ins().open(t.FightResultWin2,i)},i.prototype.isShowRed=function(){var e=t.ModelManager.ins().bossModel.bossList,i=0,n=t.EntityMgr.ins().getPayer,s=n.propSet.getLevel(),a=t.GlobalConfig.ShenZhuangBossConfig.pidlevel;for(var r in e){var o=e[r].mold,l=e[r].bossVo.deliveryTime;if(6==o&&l>0&&s>=a){i=2;break}}return i},i.prototype.getRedDimensionBoss=function(){var e=new Date(t.GlobalData.serverTime),i=e.getHours()*t.DateUtils.SECOND_PER_HOUR+e.getMinutes()*t.DateUtils.SECOND_PER_MUNITE+e.getSeconds(),n=t.ModelManager.ins().bossModel.getDimensionBossCfgList();for(var s in n){var a=n[s];for(var r in a.timeslot){var o=a.timeslot[r];if(i>=o.StartTime&&i<=o.EndTime)return 1}}return 0},i.addBoss=function(e){if(i.isShowTip){var n=t.GlobalConfig.BossConfig[e];if(n&&n.showwindow){if(2==n.showwindow){var s=null;for(var a in i.bossSouce)if(s=i.bossSouce[a],2==s.showwindow)return}var r=(t.EntityMgr.ins().getPayer,n.showlimit);if(r){var o={};if(o.level=r.lv,o.openDay=r.openday,o.zsLevel=r.zslv,o.vip=r.viplv,!t.ViewManager.ins().isCheckOpen(o))return}this.bossSouce[e]={bossId:e,entityid:n.entityid,showwindow:n.showwindow,mold:n.mold,AutoFly:n.AutoFly},t.UserTips.ins().showBossRefreshTips()}}},i.isShowTip=!0,i.bossSouce={},i}(t.BaseSystem);t.BossMgr=e,__reflect(e.prototype,"app.BossMgr")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.bossList={},this.isSuccess=0,this.tabBarDic={1:t.LanguageUtils.language_System3,2:"boss_tab_classic",3:"boss_tab_reinstall",4:"boss_tab_Lord",5:t.LanguageUtils.language_System79,6:t.LanguageUtils.language_System80},this.bossTimesDic={}}return e.prototype.getListByTab=function(t){var e,i={},n=this.tabBarArr[t];for(var s in this.bossList)e=this.bossList[s],e.mold&&n.mold==e.mold&&(i[s]=this.bossList[s]);return i},e.prototype.getRankTab=function(){var e,i,n=[];this.tabBarArr?this.tabBarArr.length=0:this.tabBarArr=[];for(var s in this.tabBarDic){e=this.tabBarDic[s];for(var a in this.bossList)if(i=this.bossList[a],i.mold==+s){if(6==i.mold){var r=t.EntityMgr.ins().getPayer,o=r.propSet.getLevel(),l=t.GlobalConfig.ShenZhuangBossConfig.pidlevel;if(l>o)continue}this.tabBarArr.push(i),n.push(e);break}}return n},e.prototype.getMagicBossCfgList=function(e,i){var n=t.GlobalConfig.BossConfig,s=[];for(var a in n)n[a].Serial==e&&(s=0==i?n[a].showascription:1==i?n[a].showbrave:n[a].showpartake);return s},e.prototype.getDimensionBossInfo=function(){for(var t in this.bossList)if(7==this.bossList[t].mold)return this.bossList[t];return null},e.prototype.getDimensionBossCfgList=function(){var e=[],i=t.GlobalConfig.BossConfig;for(var n in i)7==i[n].mold&&e.push(i[n]);return e},e}();t.BossData=e,__reflect(e.prototype,"app.BossData");var i=function(){function t(){}return t}();t.BoosVo=i,__reflect(i.prototype,"app.BoosVo");var n=function(){function t(){}return t}();t.BossBelongVo=n,__reflect(n.prototype,"app.BossBelongVo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="BossDropItemSkin",t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=void 0,i=void 0;0==this.data.type?(e=t.GlobalConfig.StdItems[this.data.id],this.itemSlot.setItem(null,e.showQuality,e.icon,2,e,this.data.count)):(i=t.GlobalConfig.NumericalIcon[this.data.type],this.itemSlot.setItem(null,0,i.icon,3,null,this.data.count,i.id))}},i.prototype.destroy=function(){this.data=null,t.DisplayUtils.removeFromParent(this)},i}(t.BaseItemRender);t.BossDropItemView=e,__reflect(e.prototype,"app.BossDropItemView")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._itemArrayCollection=null,this.dataAry=[],this._container=t,t&&(this._itemArrayCollection=new eui.ArrayCollection,this.init())}return e.prototype.init=function(){this._scrollViewContainer=new t.ScrollViewContainer(this._container),this._scrollViewContainer.callFunc([null,null,null],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.scrollPolicyH=eui.ScrollPolicy.OFF,this._scrollViewContainer.itemRenderer=t.BossDropItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.dataAry=[]},e.prototype.setData=function(e){if(this.dataAry.length>0&&t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0,e)for(var i in e){var n=e[i];this.dataAry.push(n)}this._itemArrayCollection.replaceAll(this.dataAry),this._itemArrayCollection.refresh()},e.prototype.destroy=function(){for(;this._list.numChildren>0;){var e=this._list.getChildAt(0);e.destroy(),e=null}this._scrollViewContainer.destory(),this._scrollViewContainer=null,this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,this._container.numElements>0&&this._container.removeChildren(),t.DisplayUtils.removeFromParent(this._container),t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0,this.dataAry=null},e}();t.BossDropView=e,__reflect(e.prototype,"app.BossDropView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.selectedUrl="boss_yeqian_bg1",t.noSelectedUrl="boss_yeqian_bg2",t.skinName="BossItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=1==this.data.isSelected?this.selectedUrl:this.noSelectedUrl;this.bg.source=e,this.txt_name.text=this.data.name,this.icon.source="monhead"+this.data.icon;var i=void 0;if(0==this.data.type)if(2==this.data.mold||3==this.data.mold){var n=this.data.refreshTime-t.GlobalData.serverTime;if(n>0){var s=t.DateUtils.getFormatBySecond(Math.floor(this.data.refreshTime/1e3),t.DateUtils.TIME_FORMAT_17),a=t.DateUtils.getFormatBySecond(Math.floor(n/1e3),t.DateUtils.TIME_FORMAT_5),r=a.indexOf(t.LanguageUtils.language_Time_Days);i=r>-1?"|C:0xF0C896&T:"+s+t.LanguageUtils.language_Omission_txt129:"|C:0xF0C896&T:"+t.LanguageUtils.language_Omission_txt27+s;var o=t.GlobalData.sectionOpenDay,l=t.GlobalConfig.BossConfig[this.data.id];(!l.openday||o>=l.openday)&&(i+="  |C:0x28ee01&T:"+t.LanguageUtils.language_Common_104+a)}else i="|C:0x28ee01&T:"+t.LanguageUtils.language_Omission_txt26;this.txt_refresh.textFlow=t.TextFlowMaker.generateTextFlow(i)}else(4==this.data.mold||5==this.data.mold||6==this.data.mold)&&(i=t.LanguageUtils.language_Omission_txt28+"|C:0xF0C896&T:"+this.data.hp,this.txt_refresh.textFlow=t.TextFlowMaker.generateTextFlow(i));else i="|C:0xF0C896&T:"+this.data.monsterName,this.txt_refresh.textFlow=t.TextFlowMaker.generateTextFlow(i);this.select.visible=1==this.data.isSelected,this.data.vip>0?(this.imgVip.source="bs_tq_"+this.data.vip,this.imgVip.visible=!0):this.imgVip.visible=!1}},i}(t.BaseItemRender);t.BossItemView=e,__reflect(e.prototype,"app.BossItemView")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._itemArrayCollection=null,this._container=t,t&&(this._itemArrayCollection=new eui.ArrayCollection,this.init())}return e.prototype.init=function(){this._scrollViewContainer=new t.ScrollViewContainer(this._container),this._scrollViewContainer.callFunc([null,null,this.onItemTap],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.itemRenderer=t.BossItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.dataAry=[],t.MouseScroller.bind(this._scroller)},e.prototype.stopAnimation=function(){this._scroller.stopAnimation()},e.prototype.onClickSelectHandler=function(e){void 0===e&&(e=null),t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_INSIDE)},e.prototype.onItemTap=function(t,e){this.target=t,this.curIndex!=e&&(this.dataAry[this.curIndex].isSelected=0,this._itemArrayCollection.replaceItemAt(this.dataAry[this.curIndex],this.curIndex),this.dataAry[e].isSelected=1,this._itemArrayCollection.replaceItemAt(this.dataAry[e],e),this.curIndex=e,this._callfunc&&this._callfunc(this.dataAry[e].id))},e.prototype.setData=function(t,e){var i=0;this.curIndex=i;for(var n in t){var s=t[n].bossVo;if(s.serial==e){this.curIndex=i;break}i++}this.creatItem(t)},e.prototype.creatItem=function(e){if(this.dataAry.length>0&&t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0,e){var i=void 0,n=void 0,s=void 0,a=void 0,r=0;for(var o in e)a=e[o].bossVo,n=t.GlobalConfig.BossConfig[a.serial],1!=e[o].mold?(i=t.GlobalConfig.Monster[n.entityid],s=t.GlobalConfig.Props[i.propid],this.dataAry.push({type:0,id:a.serial,entityid:n.entityid,icon:i.modelid,isSelected:r==this.curIndex?1:0,name:i.name,refreshTime:a.refreshTime,reborn:n.reborn,desc:n.describe,mold:n.mold,hp:s&&s.nMaxHpAdd,vip:n.vip})):(i=t.GlobalConfig.Scenes[n.endmap],s=t.GlobalConfig.Monster[n.entityid],this.dataAry.push({type:1,id:a.serial,icon:s.modelid,isSelected:r==this.curIndex?1:0,name:i.scencename,refreshTime:a.refreshTime,desc:n.describe,monsterName:n.monsterName,vip:n.vip})),r++}this.getNoRepeat(this.dataAry),this._itemArrayCollection.replaceAll(this.dataAry),this._itemArrayCollection.refresh()},e.prototype.getNoRepeat=function(t){if(t){for(var e=0;e<t.length-1;e++)for(var i=e+1;i<t.length;i++)t[e].entityid===t[i].entityid&&(t[e].refreshTime>t[i].refreshTime?t[i].entityid=null:t[e].entityid=null);for(var n=0;n<t.length;n++)null==t[n].entityid&&(t.splice(n,1),n--)}},e.prototype.remove_duplicates=function(e){for(var i={},n=0;n<e.length;n++)i[e[n].entityid]=e[n];this.dataAry.length=0;for(var s in i)this.dataAry.push(i[s]);t.ObjectPool.wipe(i)},e.prototype.unique=function(t,e){for(var i=1;i<t.length;)0===e(t[i-1],t[i])?t.splice(i,1):i++},e.prototype.compareFunc=function(t,e){var i=t.entityid,n=e.entityid;return n>i?-1:i==n?0:1},e.prototype.destroy=function(){t.MouseScroller.unbind(this._scroller),this._scrollViewContainer.destory(),this._scrollViewContainer=null,this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,this._container.numElements>0&&this._container.removeChildren(),t.DisplayUtils.removeFromParent(this._container),t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0,this.dataAry=null,this._callfunc&&(this._callfunc=null)},e}();t.BossListView=e,__reflect(e.prototype,"app.BossListView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.tabArr=[],i.curIndex=0,i.mold=-1,i.bossId=-1,i.itemId=463,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="BossSkin",i.name="BossView",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.CommonTabBarWin,this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System51),this.bossListView=new t.BossListView(this.item_list),this.bossListView._callfunc=this.callfunc.bind(this),this.bossDropView=new t.BossDropView(this.drop_list)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(;e[0]instanceof Array;)e=e[0];e[0]&&(this.mold=e[0]),e[1]&&(this.bossId=e[1]),this.tabArr=t.ModelManager.ins().bossModel.getRankTab(),this.tabArr&&(this.tabBar.dataProvider=new eui.ArrayCollection(this.tabArr)),this.addChangeEvent(this.tabBar,this.onTabTouch),this.addTouchEvent(this.btn_go,this.onGoto),this.addTouchEvent(this.btn_go2,this.onGoto),this.observe(t.BossMgr.ins().post_49_1,this.onRefreshData),this.observe(t.BossMgr.ins().post_49_2,this.onEnterMap),t.BossMgr.ins().send_49_1(),this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.txt_get.visible=!1,t.GetPropsView.getPropsTxt(this.txt_get,this.itemId)},i.prototype.onGetProps=function(){var e=t.GlobalConfig.GetItemRouteConfig[this.itemId];t.ViewManager.ins().isShow(t.GaimItemWin)||t.ViewManager.ins().open(t.GaimItemWin,e.itemid,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode)
},i.prototype.onTabTouch=function(e){this.curIndex=e.currentTarget.selectedIndex,this.bossListView.stopAnimation(),t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_LEVEL),this.mold=-1,this.onRefreshData()},i.prototype.onRefreshData=function(){if(this.mold>-1){for(var e=t.ModelManager.ins().bossModel.tabBarArr,i=0,n=e.length;n>i;i++)if(e[i].mold==this.mold){this.curIndex=i;break}var s=new egret.TouchEvent(egret.TouchEvent.CHANGE);return s.$currentTarget=this.tabBar,s.$currentTarget.selectedIndex=this.curIndex,void this.onTabTouch(s)}var a=t.ModelManager.ins().bossModel.getListByTab(this.curIndex);if(this.setId(),a){var r=void 0;for(var o in a){r=a[o].mold;break}if(1==r)this.commonGp.visible=!1,this.personalGp.visible=!1,this.magicBossGp.visible=!0,this.mboss.initData();else if(6==r)this.commonGp.visible=!1,this.magicBossGp.visible=!1,this.personalGp.visible=!0,this.personalBoss.setData(a);else{if(this.magicBossGp.visible=!1,this.personalGp.visible=!1,this.commonGp.visible=!0,this.bossListView.setData(a,this.bossId),this.bossId>0)t.ModelManager.ins().bossModel.bossId=this.bossId;else{var o=Number(Object.keys(a)[0]);t.ModelManager.ins().bossModel.bossId=o}if(this.bossId=-1,t.ModelManager.ins().bossModel.bossId){var l=void 0,h=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId];h&&(l=h.dropId),this.bossDropView.setData(l)}else this.bossDropView.setData(null);this.refreshContent()}}},i.prototype.setId=function(){var e=t.ModelManager.ins().bossModel.tabBarArr[this.curIndex];if(e){var i=t.ModelManager.ins().bossModel.tabBarArr[this.curIndex].mold;switch(this.txt_get.visible=5==i,this.helpBtn.x=477,this.helpBtn.y=573,i){case 1:this.helpBtn.ruleId=58,this.helpBtn.x=589,this.helpBtn.y=560;break;case 2:this.helpBtn.ruleId=44;break;case 3:this.helpBtn.ruleId=45;break;case 4:this.helpBtn.ruleId=46;break;case 5:this.helpBtn.ruleId=47;break;case 6:this.helpBtn.ruleId=79}}},i.prototype.onEnterMap=function(e){var n=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId];if(5==n.mold||6==n.mold){var s=e.actTime;n&&0==t.ModelManager.ins().bossModel.isSuccess&&(s&&s>0&&t.EventManager.ins().sendEvent(t.CompEvent.TimerEvent,[s]),t.ViewManager.ins().close(i,t.LayerManager.UI_Main))}else 0==t.ModelManager.ins().bossModel.isSuccess&&t.ViewManager.ins().close(i,t.LayerManager.UI_Main)},i.prototype.onChangeTab=function(){t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_LEVEL),this.onRefreshData()},i.prototype.callfunc=function(e){if(t.ModelManager.ins().bossModel.bossId=e,t.ModelManager.ins().bossModel.bossId){var i=void 0,n=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId];n&&(i=n.dropId),this.bossDropView.setData(i)}else this.bossDropView.setData(null);this.refreshContent()},i.prototype.onGoto=function(e){var i=e.target;if(i==this.btn_go){var n=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId],s=0;s=n.entityid?n.entityid:0,t.BossMgr.ins().send_49_2(t.ModelManager.ins().bossModel.bossId,n.entityid)}else{var n=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId];if(n){var a=n.flytab;t.ViewManager.ins().close(t.FlyShoesView),t.ViewManager.ins().open(t.FlyShoesView,a.tabid,a.flyid)}}},i.prototype.refreshContent=function(){if(t.ModelManager.ins().bossModel.bossId){var e=void 0,i=void 0;e=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId],e&&(i=e.describe);var n=t.ModelManager.ins().bossModel.bossList;if(this.btn_go.visible=e.delivery>0,this.btn_go2.visible=0==e.delivery&&e.flytab,e.vip>0){var s=t.VipData.ins().getVipDataByLv(e.vip);s&&(this.txt_trans.text=t.StringUtils.replace(t.LanguageUtils.language_Common_202,s.name)),this.txt_trans.visible=!0}else{var a=n[t.ModelManager.ins().bossModel.bossId].bossVo.deliveryTime;this.txt_trans.text=t.LanguageUtils.language_Omission_txt29+a,this.txt_trans.visible=e.delivery>0&&-1!=a}this.txt_trans2.visible=e.flydesc,this.txt_trans2.visible&&(this.txt_trans2.text=e.flydesc),this.txt_infos.text=i?i:""}else this.btn_go.visible=!1,this.btn_go2.visible=!1,this.txt_trans2.visible=!1,this.txt_trans2.text="",this.txt_trans.text="",this.txt_infos.text=""},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.tabBar=null,this.dragDropUI&&this.dragDropUI.destroy(),this.bossListView&&this.bossListView.destroy(),this.bossDropView&&this.bossDropView.destroy(),this.personalBoss&&this.personalBoss.destroy(),this.mboss&&this.mboss.destroy(),this.mboss=null,this.dragDropUI=null,this.bossListView=null,this.bossDropView=null,t.ModelManager.ins().bossModel.bossId=null,this.removeTouchEvent(this.btn_go,this.onGoto),this.removeTouchEvent(this.btn_go2,this.onGoto),this.removeFromParent()},i}(t.BaseEuiView);t.BossView=e,__reflect(e.prototype,"app.BossView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.lockSkillId=0,i.isPlayMc=!1,i.snatchPlayer=!1,23==t.GameMap.fubenID?(i.skinName="MagicBossInfoShowSkin2",i.percentHeight=100,i.percentWidth=100):(i.skinName="MagicBossInfoShowSkin",i.horizontalCenter=80,i.top=10),i.touchEnabled=!1,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.gpBoss.visible=!1,this.gpPlayer.visible=!1},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.btnPlayer.filters=t.FilterUtil.ARRAY_GRAY_FILTER,this.playBossMc(this.btnBOSS),this.observe(t.BossMgr.ins().post_49_3,this.updatePlayerData),this.observe(t.DefaultMgr.ins().post_g_0_6,this.updateBossInfo),this.observe(t.DefaultMgr.ins().post_g_0_5,this.updateBossDead),this.observe(t.DefaultMgr.ins().post_g_0_4,this.updateSetNameColor),t.EventManager.ins().addEvent(t.CommonEvent.PLAYER_PK_MODE,this.updatePkMode,this),this.addTouchEvent(this.btnBOSS,this.onClick),this.addTouchEvent(this.btnPlayer,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnBOSS:t.PlayerRoleAI.ins().startAI(),this.stopBossMc(),this.stopPlayerMc();break;case this.btnPlayer:this.snatchPlayer=!0,this.onClickPK()}},i.prototype.updatePkMode=function(t){5==t&&this.snatchPlayer&&this.onClickPK(),this.snatchPlayer=!1},i.prototype.onClickPK=function(){if(this.recog){var e=t.EntityMgr.ins().getPayer;if(e.recog==this.recog)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips146);t.MapView.m_Move_Char=null;var i=t.EntityMgr.ins().getPayer;t.DefaultMgr.ins().postUpdateTarget(this.recog),i.lockTarget=this.recog,t.DefaultMgr.ins().post_pk(),this.stopBossMc(),this.stopPlayerMc()}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips147)},i.prototype.updateBossDead=function(){var e,i,n=t.EntityMgr.ins().getAllEntity();for(var s in n){var a=n[s];i=t.GlobalConfig.Monster[a.propSet.getACTOR_ID()],!i||a instanceof t.CharPet||(e=n[s])}e||(this.gpBoss.visible=!1)},i.prototype.updateBossInfo=function(){var e,i,n=t.EntityMgr.ins().getAllEntity();for(var s in n){var a=n[s];i=t.GlobalConfig.Monster[a.propSet.getACTOR_ID()],!i||a instanceof t.CharPet||(e=n[s])}e&&(this.bossRecog=e.recog,this.gpBoss.visible=!0,this.gpBoss.touchEnabled=!1,this.gpBoss.touchChildren=!1,this.bossHpBar.labelFunction=function(e,i){return t.CommonUtils.overLength(e)+"/"+t.CommonUtils.overLength(i)},this.bossHpBar.maximum=e.propSet.getMaxHp(),this.bossHpBar.value=Math.min(e.propSet.getHp(),e.propSet.getMaxHp()),this.bossName.text=e.charName,i=t.GlobalConfig.Monster[e.propSet.getACTOR_ID()],this.bossAvatar.source="monhead"+i.modelid,i.nameQuality&&i.nameQuality>1?this.bossName.textColor=t.ColorUtil.GOODS_COLOR[i.nameQuality-1]?t.ColorUtil.GOODS_COLOR[i.nameQuality-1]:t.ColorUtil.NAME_WHITE:this.bossName.textColor=t.ColorUtil.NAME_WHITE)},i.prototype.updatePlayerData=function(){this.btnPlayer.filters=t.FilterUtil.ARRAY_GRAY_FILTER;var e=t.ModelManager.ins().bossModel.bossBelongVo;if(0==e.isBelong)return this.recog=0,void(this.gpPlayer.visible=!1);this.recog=e.recog;var i=t.EntityMgr.ins().getCharRole(e.recog),n=t.EntityMgr.ins().getPayer;if(n&&n.recog==e.recog){if(!n.propSet)return;this.propSet=n.propSet,this.pkTextColor()}else i&&i.propSet&&(this.propSet=i.propSet,this.setNameTxtColor(),this.btnPlayer.filters=null,this.isPlayMc||this.playPlayerMc(this.btnPlayer));this.gpPlayer.visible=!0,this.playerHpBar.labelFunction=function(t,e){return t+"/"+e},this.playerHpBar.maximum=e.maxHp,this.playerHpBar.value=e.currentHp,this.playerHpLabel.text=e.currentHp+"/"+e.maxHp,this.playerName.text=e.playerName,this.playerAvatar.source="name_"+e.job+"_"+e.sex,""!=e.guildName?this.playerGuild.text=0==e.isSbk?"<"+e.guildName+">":"<"+e.guildName+">("+t.LanguageUtils.language_FuBen_Text16+")":this.playerGuild.text=""},i.prototype.updateSetNameColor=function(){var e=t.EntityMgr.ins().getCharRole(this.recog);e&&(this.propSet=e.propSet,this.setNameTxtColor(),this.btnPlayer.filters=null,this.isPlayMc||this.playPlayerMc(this.btnPlayer))},i.prototype.setNameTxtColor=function(){var e=t.EntityMgr.ins().getPayer;if(t.GameMap.getAACamp)e.propSet.getZYId()==this.propSet.getZYId()?(this.playerName.textColor=t.ColorUtil.NAME_BLUE,this.playerGuild.textColor=t.ColorUtil.NAME_BLUE):(this.playerName.textColor=t.ColorUtil.NAME_ORANGE,this.playerGuild.textColor=t.ColorUtil.NAME_ORANGE);else{var i=t.FriendMgr.ins().concernIsFriend(this.propSet.getACTOR_ID());if(i)return this.playerName.textColor=i.getColor(),void(this.playerGuild.textColor=i.getColor());t.GameMap.getIsSafe?this.pkTextColor():this.propSet.getGuildId()&&e.propSet.getGuildId()?this.propSet.getGuildId()==e.propSet.getGuildId()?t.GameMap.getAAZY||t.GuildMgr.ins().declareWarAry.length?(this.playerName.textColor=t.ColorUtil.NAME_BLUE,this.playerGuild.textColor=t.ColorUtil.NAME_BLUE):this.pkTextColor():t.GameMap.getAAZY||t.GuildMgr.ins().getIsDeclareWar(this.propSet.getGuildId())?(this.playerName.textColor=t.ColorUtil.NAME_ORANGE,this.playerGuild.textColor=t.ColorUtil.NAME_ORANGE):this.pkTextColor():t.GameMap.getAAZY?(this.playerName.textColor=t.ColorUtil.GREEN_COLOR,this.playerGuild.textColor=t.ColorUtil.GREEN_COLOR):this.pkTextColor()}},i.prototype.pkTextColor=function(){this.propSet&&(this.propSet.getPKState()?(this.playerName.textColor=t.ColorUtil.NAME_GREY,this.playerGuild.textColor=t.ColorUtil.NAME_GREY):this.propSet.getPKValue()<=50?(this.playerName.textColor=t.ColorUtil.NAME_WHITE,this.playerGuild.textColor=t.ColorUtil.NAME_WHITE):this.propSet.getPKValue()>50&&this.propSet.getPKValue()<=100?(this.playerName.textColor=t.ColorUtil.NAME_YELLOW,this.playerGuild.textColor=t.ColorUtil.NAME_YELLOW):(this.playerName.textColor=t.ColorUtil.NAME_RED,this.playerGuild.textColor=t.ColorUtil.NAME_RED))},i.prototype.playBossMc=function(e){this.btnBOSSMc||(this.btnBOSSMc=t.ObjectPool.pop("app.MovieClip"),this.btnBOSSMc.scaleX=this.btnBOSSMc.scaleY=1,this.btnBOSSMc.x=48,this.btnBOSSMc.y=37,this.btnBOSSMc.touchEnabled=!1,e.addChild(this.btnBOSSMc)),this.btnBOSSMc.playFileEff(ResDirEnum.RES_DIR_EFF+"xsyd",-1)},i.prototype.stopBossMc=function(){this.btnBOSSMc&&(this.btnBOSSMc.destroy(),this.btnBOSSMc=null)},i.prototype.playPlayerMc=function(e){this.isPlayMc||(this.isPlayMc=!0,this.btnPlayerMc||(this.btnPlayerMc=t.ObjectPool.pop("app.MovieClip"),this.btnPlayerMc.scaleX=this.btnPlayerMc.scaleY=1,this.btnPlayerMc.x=48,this.btnPlayerMc.y=37,this.btnPlayerMc.touchEnabled=!1,e.addChild(this.btnPlayerMc)),this.btnPlayerMc.playFileEff(ResDirEnum.RES_DIR_EFF+"xsyd",-1))},i.prototype.stopPlayerMc=function(){this.isPlayMc=!0,this.btnPlayerMc&&(this.btnPlayerMc.destroy(),this.btnPlayerMc=null)},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.btnBOSSMc&&(this.btnBOSSMc.destroy(),this.btnBOSSMc=null),this.btnPlayerMc&&(this.btnPlayerMc.destroy(),this.btnPlayerMc=null),this.addTouchEvent(this.btnBOSS,this.onClick),this.addTouchEvent(this.btnPlayer,this.onClick),t.EventManager.ins().removeEvent(t.CommonEvent.PLAYER_PK_MODE,this.updatePkMode,this),this.$onClose()},i}(t.BaseEuiView);t.MagicBossInfoShowView=e,__reflect(e.prototype,"app.MagicBossInfoShowView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="MagicBossInfoShowSkin3",t.horizontalCenter=0,t.top=100,t.touchEnabled=!1,t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.gpBoss.visible=!1,this.gpPlayer.visible=!1},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.observe(t.DefaultMgr.ins().post_g_0_13,this.seekShowBossInfo),this.observe(t.DefaultMgr.ins().post_g_0_67,this.onMonsterShow),this.observe(t.DefaultMgr.ins().post_g_0_5,this.onMonsterDisappear),this.observe(t.DefaultMgr.ins().post_g_0_6,this.onMonsterUpdate),this.observe(t.DefaultMgr.ins().post_g_0_7,this.onMonsterUpdate2),this.observe(t.EquipMgr.ins().post_7_15,this.updatePlayerData),this.seekShowBossInfo()},i.prototype.onInit=function(){this.currBossRecog=null},i.prototype.onMonsterShow=function(e){if(!this.currBossRecog){var i=t.EntityMgr.ins().getAllEntity()[e];if(i&&i.propSet){var n=t.GlobalConfig.Monster[i.propSet.getACTOR_ID()];n&&1==n.ascriptionopen&&(this.currBossRecog=e,this.updateBossInfo())}}},i.prototype.onMonsterDisappear=function(t){this.currBossRecog==t&&this.seekShowBossInfo()},i.prototype.onMonsterUpdate=function(t){this.currBossRecog==t&&this.updateBossInfo(),this.currBelongRecog==t&&this.updatePlayerHp()},i.prototype.onMonsterUpdate2=function(){var e=t.EntityMgr.ins().getPayer.recog;this.currBelongRecog==e&&this.updatePlayerHp()},i.prototype.seekShowBossInfo=function(){this.currBossRecog=t.PlayerRoleAI.ins().getNearestMonster_magicBOSS(),this.currBossId=0,this.currBelongRecog=0,this.currBelongId=0,this.currBossRecog?this.updateBossInfo():(this.gpBoss.visible=!1,this.gpPlayer.visible=!1)},i.prototype.updateBossInfo=function(){var e=t.EntityMgr.ins().getAllEntity()[this.currBossRecog];if(e&&e.propSet){var i=e.propSet.getHp(),n=e.propSet.getMaxHp();this.currBossId=e.propSet.getACTOR_ID(),this.bossName.text=e.charName,this.bossHpBar.value=Math.min(i,n),this.bossHpBar.maximum=n,this.bossHpLabel.text=t.CommonUtils.overLength(i)+"/"+t.CommonUtils.overLength(n),this.gpBoss.visible=!0;var s=t.GlobalConfig.Monster[e.propSet.getACTOR_ID()];if(s&&1==s.ascriptionopen){var a=e.propSet.getMonsterAscriptionId();this.currBelongId!=a&&(this.currBelongId=a,a?t.EquipMgr.ins().send_7_15(a,this.currBossId):this.gpPlayer.visible=!1)}}},i.prototype.updatePlayerData=function(e){if(this.currBossRecog&&e.nBossid==this.currBossId&&0!=e.isBelong){this.currBelongRecog=e.recog,this.playerName.text=e.playerName,this.playerAvatar.source="name_"+e.job+"_"+e.sex,""!=e.guildName?this.playerGuild.text=0==e.isSbk?"<"+e.guildName+">":"<"+e.guildName+">("+t.LanguageUtils.language_FuBen_Text16+")":this.playerGuild.text="";var i=e.currentHp,n=e.maxHp;this.playerHpBar.value=Math.min(i,n),this.playerHpBar.maximum=n,this.playerHpLabel.text=t.CommonUtils.overLength(i)+"/"+t.CommonUtils.overLength(n),this.gpPlayer.visible=!0}},i.prototype.updatePlayerHp=function(){var e=t.EntityMgr.ins().getCharRole(this.currBelongRecog);if(e&&e.propSet){var i=e.propSet.getHp(),n=e.propSet.getMaxHp();this.playerHpBar.value=Math.min(i,n),this.playerHpBar.maximum=n,this.playerHpLabel.text=t.CommonUtils.overLength(i)+"/"+t.CommonUtils.overLength(n)}},i}(t.BaseEuiView);t.MagicBossInfoShowView2=e,__reflect(e.prototype,"app.MagicBossInfoShowView2"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.selectedUrl="boss_yeqian_bg4",t.noSelectedUrl="boss_yeqian_bg5",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=1==this.data.isSelected?this.selectedUrl:this.noSelectedUrl;this.bg.source=e,this.txt_name.text=this.data.monsterName,this.icon.source="monhead"+this.data.icon;var i=void 0;if(this.data.refreshTime-t.GlobalData.serverTime>0){var n=t.DateUtils.getFormatBySecond(Math.floor(this.data.refreshTime/1e3),t.DateUtils.TIME_FORMAT_17),s=n.indexOf(t.LanguageUtils.language_Time_Days);i=s>-1?"|C:0xF0C896&T:"+n+t.LanguageUtils.language_Omission_txt129:""+t.LanguageUtils.language_Omission_txt27+n,this.txt_dead.visible=!0,this.txt_refresh.visible=!0}else this.txt_refresh.visible=!1,this.txt_dead.visible=!1;this.data.levellimit?this.txtNeeds.text=this.data.levellimit+t.LanguageUtils.language_Common_1:this.txtNeeds.text=this.data.berebornlimit+t.LanguageUtils.language_Common_0,this.hpBar.maximum=this.data.hpMaxCount,this.hpBar.value=this.data.hpCurrent,this.txt_refresh.textFlow=t.TextFlowMaker.generateTextFlow(i),this.select.visible=1==this.data.isSelected,this.transShow(this.data)}},i.prototype.transShow=function(e){var i,n=t.EntityMgr.ins().getPayer;e.levellimit>0?e.levellimit>n.propSet.getLevel()?(i=e.levellimit+t.LanguageUtils.language_Friend_Level_txt+t.LanguageUtils.language_FuBen_Text18,this.txt_taget.visible=!0):this.txt_taget.visible=!1:e.berebornlimit>n.propSet.getZSLevel()?(i=e.berebornlimit+t.LanguageUtils.language_Friend_Turn_txt+t.LanguageUtils.language_FuBen_Text18,this.txt_taget.visible=!0):this.txt_taget.visible=!1,this.txt_taget.text=i},i}(t.BaseItemRender);t.MagicBossItemView=e,__reflect(e.prototype,"app.MagicBossItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.curIndex=0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initUI()},i.prototype.initUI=function(){this.arrItemList=new eui.ArrayCollection,this.showpartake=new eui.ArrayCollection,this.showascription=new eui.ArrayCollection,this.showbrave=new eui.ArrayCollection,this.dataAry=[],t.MouseScroller.bind(this.scroller_r),t.MouseScroller.bind(this.scroller_l),this.list_item.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.addTouchEvent(this.btn_go,this.onGoto)},i.prototype.initData=function(){this.curIndex=0;var e=t.ModelManager.ins().bossModel.getListByTab(0);this.creatItem(e),this.id=this.dataAry[0].id;var i=t.LanguageUtils.language_FuBen_Text17+this.dataAry[0].deliveryTime;this.txt_trans.text=i,this.bindGoodsList(this.id),this.bindBossList()},i.prototype.bindBossList=function(){this.list_item.itemRenderer=t.MagicBossItemView,this.list_item.dataProvider=this.arrItemList},i.prototype.bindGoodsList=function(e){this.showascription.source=t.ModelManager.ins().bossModel.getMagicBossCfgList(e,0),this.list0.itemRenderer=t.BossDropItemView,this.list0.dataProvider=this.showascription,this.showbrave.source=t.ModelManager.ins().bossModel.getMagicBossCfgList(e,1),this.list1.itemRenderer=t.BossDropItemView,this.list1.dataProvider=this.showbrave,this.showpartake.source=t.ModelManager.ins().bossModel.getMagicBossCfgList(e,2),this.list2.itemRenderer=t.BossDropItemView,this.list2.dataProvider=this.showpartake},i.prototype.creatItem=function(e){this.dataAry.length>0&&t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0;var i=[];if(e){for(var n in e)this.dataAry.push(e[n]);var s=void 0,a=void 0,r=void 0,o=void 0,l=void 0,h=void 0;for(l=0,h=this.dataAry.length;h>l;l++)o=this.dataAry[l].bossVo,a=t.GlobalConfig.BossConfig[o.serial],s=t.GlobalConfig.Scenes[a.endmap],r=t.GlobalConfig.Monster[a.entityid],i[l]={id:o.serial,levellimit:void 0==a.levellimit?0:a.levellimit,berebornlimit:void 0==a.berebornlimit?0:a.berebornlimit,icon:r.modelid,isSelected:0,hpMaxCount:o.hpMaxCount,hpCurrent:o.hpCurrent,refreshTime:o.refreshTime,monsterName:r.name,deliveryTime:o.deliveryTime};this.dataAry=i}var p=this.dataAry.sort(this.sort2);p[0].isSelected=1,this.arrItemList.replaceAll(p),this.arrItemList.refresh()},i.prototype.sort2=function(e,i){var n=t.EntityMgr.ins().getPayer,s=n.propSet.getZSLevel(),a=n.propSet.getLevel(),r=e.berebornlimit<s?1:-1,o=i.berebornlimit<s?1:-1;r=0==e.refreshTime&&Number(e.berebornlimit)<=s&&Number(e.levellimit)<=a?1:-1,o=0==i.refreshTime&&Number(i.berebornlimit)<=s&&Number(i.levellimit)<=a?1:-1;var l=e.berebornlimit*r,h=i.berebornlimit*o,p=e.levellimit*r,u=i.levellimit*o;return l>h?-1:h>l?1:p>u?-1:u>p?1:0},i.prototype.onItemTap=function(t){var e=t.itemIndex;this.curIndex!=e&&(this.dataAry[this.curIndex].isSelected=0,this.arrItemList.replaceItemAt(this.dataAry[this.curIndex],this.curIndex),this.dataAry[e].isSelected=1,this.arrItemList.replaceItemAt(this.dataAry[e],e),this.curIndex=e,this.id=this.dataAry[e].id,this.bindGoodsList(this.id))},i.prototype.onGoto=function(){var e=t.GlobalConfig.BossConfig[this.id],i=0;i=e.entityid?e.entityid:0,t.BossMgr.ins().send_49_2(this.id,e.entityid)},i.prototype.destroy=function(){t.MouseScroller.unbind(this.scroller_r),t.MouseScroller.unbind(this.scroller_l),this.list_item.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.removeTouchEvent(this.btn_go,this.onGoto),this.arrItemList.removeAll(),this.dataAry=[],t.ObjectPool.wipe(this.dataAry),this.showascription.removeAll(),this.showbrave.removeAll(),this.showpartake.removeAll()},i}(t.BaseView);t.MagicBossView=e,__reflect(e.prototype,"app.MagicBossView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.sliderWidth=298,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initUI()},i.prototype.initUI=function(){this.bossListView=new t.BossListView(this.item_list),this.bossListView._callfunc=this.callfunc.bind(this),this.bossDropView=new t.BossDropView(this.drop_list),this.bossAwardView=new t.BossDropView(this.award_list),this.addTouchEvent(this.btn_go,this.onGoto),this.addTouchEvent(this.btn_go2,this.onGoto),this.scroller.verticalScrollBar.autoVisibility=!1,this.scroller.verticalScrollBar.visible=!1,this.slider.labelFunction=function(t,e){return t+"%"},this.slider.value=0,t.MouseScroller.bind(this.scroller);var e=t.GlobalConfig.ShenZhuangBossConfig.number;this.txt_skill_desc.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt38,e))},i.prototype.setData=function(e){this.red.visible=!1;var i=[],n=[];for(var s in e)n.push(e[s]);n.sort(this.sortByOpenDay);for(var a=0;a<n.length;a++){var r=n[a].bossVo;i.push(r.serial)}var o=i[0],l=t.GlobalConfig.BossConfig[o];o+=1;var h=t.GlobalConfig.BossConfig[o];if(h){var p=t.GlobalData.sectionOpenDay,u=t.GlobalData.serverTime,c=new Date(u),g=c.getHours(),d=Math.floor(100/(h.openday-l.openday)/24*(24*(p-l.openday)+g));d>=100&&(d=100);var m=d+"%";this.txt_slider.text=m,this.slider.labelFunction=function(t,e){return t+"%"},this.slider.maximum=100,this.slider.value=d}else this.slider.labelFunction=function(t,e){return t+"%"},this.slider.maximum=100,this.slider.value=100;if(this.bossListView.setData(n,null),o-=1,t.ModelManager.ins().bossModel.bossId=o,t.ModelManager.ins().bossModel.bossId){var f=void 0,v=void 0,_=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId];_&&(f=_.dropId,v=_.firstprize),this.bossDropView.setData(f),this.bossAwardView.setData(v)}else this.bossDropView.setData(null),this.bossAwardView.setData(null);this.refreshContent()},i.prototype.sortByOpenDay=function(e,i){var n=t.GlobalConfig.BossConfig[e.bossVo.serial],s=t.GlobalConfig.BossConfig[i.bossVo.serial];return n.openday>s.openday?-1:1},i.prototype.onGoto=function(e){var i=e.target;if(i==this.btn_go){var n=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId],s=0;s=n.entityid?n.entityid:0,t.BossMgr.ins().send_49_2(t.ModelManager.ins().bossModel.bossId,n.entityid)}else{var n=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId];if(n){var a=n.flytab;t.ViewManager.ins().close(t.FlyShoesView),t.ViewManager.ins().open(t.FlyShoesView,a.tabid,a.flyid)}}},i.prototype.callfunc=function(e){if(t.ModelManager.ins().bossModel.bossId=e,t.ModelManager.ins().bossModel.bossId){var i=t.GlobalConfig.BossConfig[e],n=e+1,s=t.GlobalConfig.BossConfig[n];if(s){var a=t.GlobalData.sectionOpenDay,r=t.GlobalData.serverTime,o=new Date(r),l=o.getHours(),h=Math.floor(100/(s.openday-i.openday)/24*(24*(a-i.openday)+l));h>=100&&(h=100);var p=h+"%";this.txt_slider.text=p,this.slider.labelFunction=function(t,e){return t+"%"},this.slider.maximum=100,this.slider.value=h}else this.slider.labelFunction=function(t,e){return t+"%"},this.slider.maximum=100,this.slider.value=100;var u=void 0,c=void 0,g=t.GlobalConfig.BossConfig[e];g&&(u=g.dropId,c=g.firstprize),this.bossDropView.setData(u),this.bossAwardView.setData(c)}else this.bossDropView.setData(null),this.bossAwardView.setData(null);this.refreshContent()},i.prototype.refreshContent=function(){if(t.ModelManager.ins().bossModel.bossId){var e=void 0,i=void 0;e=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId],e&&(i=e.describe),this.btn_go.visible=e.delivery>0,this.btn_go2.visible=0==e.delivery&&e.flytab,this.txt_trans.visible=e.delivery>0,this.txt_trans2.visible=e.flydesc,this.txt_trans2.visible&&(this.txt_trans2.text=e.flydesc);var n=t.ModelManager.ins().bossModel.bossList,s=n[t.ModelManager.ins().bossModel.bossId].bossVo.deliveryTime;this.red.visible=s>0,this.txt_trans.text=t.LanguageUtils.language_Omission_txt29+s,this.txt_infos.text=i?i:""}else this.btn_go.visible=!1,this.red.visible=!1,this.btn_go2.visible=!1,this.txt_trans2.visible=!1,this.txt_trans2.text="",this.txt_trans.text="",this.txt_infos.text=""},i.prototype.destroy=function(){t.MouseScroller.unbind(this.scroller),this.removeTouchEvent(this.btn_go,this.onGoto),this.bossListView&&this.bossListView.destroy(),this.bossDropView&&this.bossDropView.destroy(),this.removeTouchEvent(this.btn_go,this.onGoto),this.removeTouchEvent(this.btn_go2,this.onGoto),t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.PersonalBossView=e,__reflect(e.prototype,"app.PersonalBossView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cautionType=0,t.percentHeight=100,t.percentWidth=100,t}return __extends(i,e),i.show=function(e,i,n,s,a,r,o,l){if(void 0===s&&(s=null),void 0===a&&(a=null),void 0===r&&(r="normal"),void 0===o&&(o=null),void 0===l&&(l=0),l){var h=t.SettingMgr.ins().getCautionValue(l);if(h&&i&&null!=i)return void i.call(n)}t.UserCaution.ins().setCautionLabel(e,{func:i,thisObj:n},{func2:s,thisObj2:a},r,o,l)},i.showContent=function(e,i,n,s,a,r,o){void 0===s&&(s=null),void 0===a&&(a=null),void 0===r&&(r="normal"),void 0===o&&(o=null),t.UserCaution.ins().setCautionContent(e,{func:i,thisObj:n},{func2:s,thisObj2:a},r,o)},i.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="CautionViewSkin"},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.confirmBtn,this.onTap),this.addTouchEvent(this.cancelBtn,this.onTap),this.addTouchEvent(this.dialogCloseBtn,this.onTap),this.checkBox.setCallback(this,this.onTap)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this.confirmBtn,this.onTap),this.removeTouchEvent(this.cancelBtn,this.onTap),this.removeTouchEvent(this.dialogCloseBtn,this.onTap),this.$onClose(),this.callBack=null,this.calback2=null},i.prototype.onTap=function(e){var i=this.callBack,n=this.calback2;switch(e.currentTarget){case this.confirmBtn:i&&null!=i.func&&i.func.call(i.thisObj),t.ViewManager.ins().close(this);break;case this.cancelBtn:n&&n.func2&&n.func2.call(n.thisObj2),t.ViewManager.ins().close(this);break;case this.dialogCloseBtn:t.ViewManager.ins().close(this);break;case this.checkBox:this.cautionType&&t.SettingMgr.ins().setCautionValue(this.cautionType,e.currentTarget.selected)}},Object.defineProperty(i.prototype,"isShowWin",{get:function(){return this._isShowWin},set:function(t){this._isShowWin!=t&&(this._isShowWin=t)},enumerable:!0,configurable:!0}),i.prototype.setCautionLabel=function(e,i,n,s,a,r){void 0===n&&(n=null),void 0===s&&(s="normal"),void 0===a&&(a=null),void 0===r&&(r=0),this.cautionType=r,this.checkLabel.visible=r>0,this.checkBox.visible=r>0,"string"==typeof e?this.cautionLabel.textFlow=t.TextFlowMaker.generateTextFlow(e):this.cautionLabel.textFlow=e,this.callBack=i,this.calback2=n,this.currentState=s,a&&(a.btnName&&(this.confirmBtn.label=a.btnName),a.title&&(this.titleLabel.text=a.title))},i.prototype.setCautionContent=function(t,e,i,n,s){void 0===i&&(i=null),void 0===n&&(n="normal"),void 0===s&&(s=null),this.cautionLabel.visible=!1,this.callBack=e,this.calback2=i,this.currentState=n,s&&(s.btnName&&(this.confirmBtn.label=s.btnName),s.title&&(this.titleLabel.text=s.title));var a=null;"string"==typeof t?(a=new eui.Component,a.skinName=t):a=t,this.addChild(a),a.x=.5*(480-a.width),a.y=.5*(800-a.height)},i}(t.BaseEuiView);t.CautionView=e,__reflect(e.prototype,"app.CautionView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.setCautionLabel=function(e,i,n,s,a,r){void 0===s&&(s="normal"),void 0===a&&(a=null),void 0===r&&(r=null),t.ViewManager.ins().open(t.CautionView).setCautionLabel(e,i,n,s,a,r)},i.prototype.setCautionContent=function(e,i,n,s,a){void 0===s&&(s="normal"),void 0===a&&(a=null),t.ViewManager.ins().open(t.CautionView).setCautionContent(e,i,n,s,a)},i}(t.BaseSystem);t.UserCaution=e,__reflect(e.prototype,"app.UserCaution"),t.MessageCenter.compile(e)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.power0,this.onTouch),this.addTouchEvent(this.power1,this.onTouch),this.addTouchEvent(this.power2,this.onTouch),this.addTouchEvent(this.power3,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.power0,this.onTouch),this.removeTouchEvent(this.power1,this.onTouch),this.removeTouchEvent(this.power2,this.onTouch),this.removeTouchEvent(this.power3,this.onTouch)},i.prototype.dataChanged=function(){if(this.power0.visible=this.power1.visible=this.power2.visible=this.power3.visible=!1,this.data){var e=t.GlobalConfig.GrowTipsTagConfig[this.data];e&&(this.imgIcon.source=e.icon+"");var i=t.GlobalConfig.GrowTipsConfig[this.data];if(i){var n=0;for(var s in i){var a=i[s],r=t.ViewManager.ins().isCheckOpen(a.openparam),o=t.ViewManager.ins().isCheckClose(a.closeparam);1==r&&0==o&&(this["power"+n].visible=!0,this["power"+n].powerID=a.id,a.buttonUI?this["power"+n].textFlow=t.TextFlowMaker.generateTextFlow("|C:0x28ee01&U&T:"+a.buttontext+"|"):this["power"+n].textFlow=t.TextFlowMaker.generateTextFlow("|C:0xFFFFFF&T:"+a.buttontext+"|"),n++)}}}},i.prototype.onTouch=function(e){var i,n=t.GlobalConfig.GrowTipsConfig[this.data];n&&(i=n[e.currentTarget.powerID]),i&&i.buttonUI&&this.openView(i.buttonUI)},i.prototype.openView=function(e){switch(e.type){case 1:e.param1&&t.ViewManager.ins().open(e.param1);break;case 2:e.param1&&t.ViewManager.ins().open(e.param1),e.param2&&t.ViewManager.ins().open(e.param2);break;case 3:e.param1&&e.param2&&t.ViewManager.ins().open(e.param1,e.param2);break;case 4:t.ViewManager.ins().isShow(t.BagView)||t.ViewManager.ins().open(t.BagView);var i=t.ViewManager.ins().getView(t.ChangePowerfulWin);i&&!t.ViewManager.ins().isShow(t.BagGoldChangeView)&&t.ViewManager.ins().open(t.BagGoldChangeView,1,{x:i.x,y:i.y},{height:i.height,width:i.width},10001);break;case 5:e.param1&&e.param2&&e.param3&&t.ViewManager.ins().open(e.param1,e.param2,e.param3)}},i}(t.BaseItemRender);t.ChangePowerfulItemView=e,__reflect(e.prototype,"app.ChangePowerfulItemView")
}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ChangePowerfulSkin",t.setPostData({top:55,left:200}),t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.powerList.itemRenderer=t.ChangePowerfulItemView,this.powerArr=new eui.ArrayCollection,this.powerList.dataProvider=this.powerArr,this.dragDropUI.setParent(this),this.dragDropUI.setTitle("")},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.MouseScroller.bind(this.powerScroller);var n=this.getPowerList();this.powerArr.replaceAll(n)},i.prototype.getPowerList=function(){var e=[];for(var i in t.GlobalConfig.GrowTipsTagConfig){var n=t.GlobalConfig.GrowTipsTagConfig[i];if(n&&n.openparam){var s=t.ViewManager.ins().isCheckOpen(n.openparam);s&&e.push(n.tagid)}}return e},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(10001),t.MouseScroller.unbind(this.powerScroller)},i}(t.BaseEuiView);t.ChangePowerfulWin=e,__reflect(e.prototype,"app.ChangePowerfulWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.loadData()},e.prototype.loadData=function(){var t=this.data,e=t.selected;e?this.tarText.source=t.down:this.tarText.source=t.up},e}(t.BaseItemRender);t.ChatBtnItem=e,__reflect(e.prototype,"app.ChatBtnItem")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){this.img.source=this.data.img,this.red&&this.data.redadd&&(this.red.updateShowFunctions=this.data.redadd),this.red&&this.data.redShow&&(this.red.showMessages=this.data.redShow)},e.prototype.$onAddToStage=function(e,i){this.addMouseMoveEvent(this,this.mouseMove),this.addMouseOverEvent(this,this.mouseMove),t.prototype.$onAddToStage.call(this,e,i)},e.prototype.$onRemoveFromStage=function(){this.removeMouseMoveEvent(this,this.mouseMove),this.removeMouseOverEvent(this,this.mouseMove),t.prototype.$onRemoveFromStage.call(this)},e.prototype.mouseMove=function(t){t.type==mouse.MouseEvent.MOUSE_OUT?this.selectImg.visible=!1:t.type==mouse.MouseEvent.MOUSE_OVER&&(this.selectImg.visible=!0)},e}(t.BaseItemRender);t.ChatChanSelectRender=e,__reflect(e.prototype,"app.ChatChanSelectRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.chatLab.addEventListener(egret.TextEvent.LINK,function(e){console.log(e.text),t.EventManager.ins().sendEvent(t.ChatEvent.CHAT_SHOW_GOODS_TIPS,[{info:e.text}])},this)},i.prototype.dataChanged=function(){var e=this.data,i="";if(this.playerName=e.senderName,this.systemGrp.visible=!1,this.txtGrp.x=0,this.qqGrp.visible=!1,this.qqGrp.x=0,this.bgColor.visible=!1,this.chatLab.x=0,this.icoImage.x=0,Main.gameParameter.pfID==t.PlatFormID.QQGame){var n=e.chaoWan>>16,s=n>>8,a=255&n,r=65535&e.chaoWan;this.blueImg.visible=this.qqGrp.visible=s&&r>0,this.blueImg.source=s&&r>0?1==s?"name_lz_pt"+(r+1):"name_lz_hh"+(r+1):"",this.blueYearImg.visible=1==a}t.EntityMgr.ins().getCharRole(e.playerId);this.logo.visible=!1;var o=e.message,l=-1!=e.message.indexOf("E:}{;");if(l?(o="",this.chatLab.visible=!1,t.DisplayUtils.removeFromParent(this.chatLab),this.bqGroup.visible=!0,this.txtGrp.addChild(this.bqGroup)):(this.chatLab.visible=!0,this.txtGrp.addChild(this.chatLab),this.bqGroup.visible=!1,t.DisplayUtils.removeFromParent(this.bqGroup)),e.showChannelID==t.ChannelID.ChannelSystemTips)this.systemGrp.visible=!0,this.txtGrp.x=this.systemGrp.width+14,i="|C:"+t.ColorUtil.WHITE_COLOR+"&T:"+o,this.bgColor.visible=!0,this.bgColor.fillColor=t.ColorUtil.CHAT_RED_COLOR,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.qqGrp.x=1==this.qqGrp.visible?62:0);else if(e.showChannelID==t.ChannelID.ChannelSecret)i=e.isMe?"|C:"+t.ColorUtil.CHAT_BLUE_COLOR+"&T:"+e.senderName+"  "+o:"|C:"+t.ColorUtil.CHAT_BLUE_COLOR+"&T:"+e.senderName+"[Lv"+e.level+"]=>"+o,this.chatLab.background=!1,this.bgColor.visible=!0,this.bgColor.fillColor=6357187,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.qqGrp.x=1,this.txtGrp.x=1==this.qqGrp.visible?46:0);else if(e.showChannelID==t.ChannelID.ChannelWorld){var h=""==e.senderName?"":e.senderName+"：";i="|C:"+t.ColorUtil.CHAT_YELLOW_COLOR+"&T:"+h+o,this.bgColor.visible=!0,this.bgColor.fillColor=197,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.qqGrp.x=1,this.txtGrp.x=1==this.qqGrp.visible?46:0)}else if(e.showChannelID==t.ChannelID.ChannelNear){var h=""==e.senderName?"":e.senderName+"：";i="|C:"+t.ColorUtil.CHAT_BLACK_COLOR+"&T:"+h+o,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.qqGrp.x=1,this.txtGrp.x=1==this.qqGrp.visible?46:0)}else if(e.showChannelID==t.ChannelID.ChannelGuild){var h=""==e.senderName?"":e.senderName+"：";i="|C:"+t.ColorUtil.CHAT_GREEN_COLOR+"&T:"+h+o,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.qqGrp.x=1,this.txtGrp.x=1==this.qqGrp.visible?46:0)}else if(e.showChannelID==t.ChannelID.ChannelTeam){var h=""==e.senderName?"":e.senderName+"：";i="|C:"+t.ColorUtil.CHAT_BROWN_COLOR+"&T:"+h+o,this.bgColor.visible=!0,this.bgColor.fillColor=15035136,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.qqGrp.x=1,this.txtGrp.x=1==this.qqGrp.visible?46:0)}else e.showChannelID==t.ChannelID.ChannelPersonal&&(i="|C:"+t.ColorUtil.CHAT_GREEN_COLOR+"&T:"+o,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.qqGrp.x=1,this.txtGrp.x=1==this.qqGrp.visible?46:0));if(l){this.bqLab.textFlow=t.TextFlowMaker.generateTextFlow1(i);var p=e.message.substr(5);this.icoImage.source=p}else this.chatLab.textFlow=t.TextFlowMaker.generateTextFlow1(i);e.chaoWan>0&&Main.gameParameter.pfID!=t.PlatFormID.QQGame?(this.logo.visible=!0,this.chatLab.x=15,this.icoImage.x=15):this.logo.visible=!1},i}(t.BaseItemRender);t.chatListItem=e,__reflect(e.prototype,"app.chatListItem")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="Btn2Skin",e}return __extends(e,t),e}(eui.Button);t.ChatMenuBtnItem=e,__reflect(e.prototype,"app.ChatMenuBtnItem")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this)},e.prototype.onClick=function(){},e.prototype.dataChanged=function(){this.btnIcon.source=this.data},e}(t.BaseItemRender);t.ChatMenuItem=e,__reflect(e.prototype,"app.ChatMenuItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.gList.itemRenderer=t.ChatMenuItem;var i=["chat_t_2_1","chat_t_6_1","chat_t_3_1","chat_t_4_1","chat_t_5_1"];this.gList.dataProvider=new eui.ArrayCollection(i),this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i.prototype.onChange=function(){this.visible=!this.visible,t.EventManager.ins().sendEvent(t.ChatEvent.MENUITEM_SLECT,[{indexText:this.gList.selectedItem,indexItem:this.gList.selectedIndex}])},i.prototype.destroy=function(){for(this.gList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this);this.gList.numChildren>0;){var t=this.gList.getChildAt(0);t&&(t=null),this.gList.removeChildAt(0)}this.gList=null},i}(t.BaseEuiView);t.ChatMenuView=e,__reflect(e.prototype,"app.ChatMenuView")}(app||(app={}));var app;!function(t){var e=function(){function t(t){void 0===t&&(t=null),this.isMe=!1,this.chaoWan=0,this.itemSeriesText="",t&&(this.showChannelID=t.readByte(),this.roleID=t.readUnsignedInt(),this.senderName=t.readString(),this.message=t.readString(),this.level=t.readInt(),this.playerId=t.readNumber(),this.chaoWan=t.readUnsignedInt(),this.isGoods=t.readByte(),1==this.isGoods&&(this.createTime=t.readUnsignedInt(),this.wSeries=t.readUnsignedShort(),this.btServer=t.readByte(),this.btReserve=t.readByte()))}return t}();t.ChatMessage=e,__reflect(e.prototype,"app.ChatMessage")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.isPrivateChat=!1,i.priMessage=new t.ChatMessage,i._chatViewType=0,i._bulletFrameAry=[],i._bulletFrameAry2=[],i._requesCDTime=0,i._kfNoticeAry=[],i.initData(),i.sysId=t.PackageID.Chat,i.regNetMsg(1,i.postChatInfo),i.regNetMsg(2,i.postSystemChat),i.regNetMsg(3,i.postPrivateChat),i.regNetMsg(4,i.postChatState),i.regNetMsg(6,i.post_LookItem),i.regNetMsg(11,i.post_9_11),i.regNetMsg(12,i.post_9_12),i.regNetMsg(15,i.post_9_15),i}return __extends(i,e),Object.defineProperty(i.prototype,"chatViewType",{get:function(){return this._chatViewType},set:function(t){this._chatViewType=t},enumerable:!0,configurable:!0}),i.ins=function(){return e.ins.call(this)},i.prototype.initData=function(){t.ChatModel.ins().init()},i.prototype.s_9_1=function(e,i,n,s,a){void 0===e&&(e=1),void 0===i&&(i=""),void 0===n&&(n="");var r=t.GlobalData.serverTime/1e3;if(window.prohibitText&&r>1625068680&&1625155080>r){if(Main.gameParameter.pfID==t.PlatFormID.PF4366&&("t1"==t.LocationProperty.serverAlias||"t2"==t.LocationProperty.serverAlias||"t3"==t.LocationProperty.serverAlias||"t4"==t.LocationProperty.serverAlias||"t5"==t.LocationProperty.serverAlias||"h1"==t.LocationProperty.serverAlias||"t7"==t.LocationProperty.serverAlias||"t6"==t.LocationProperty.serverAlias||"t8"==t.LocationProperty.serverAlias||"t9"==t.LocationProperty.serverAlias||"t10"==t.LocationProperty.serverAlias||"t11"==t.LocationProperty.serverAlias||"t12"==t.LocationProperty.serverAlias))return void t.UserTips.ins().showUITips("|C:0xff7700&T:该功能暂不可用，7月2日重新开启|");if(Main.gameParameter.pfID==t.PlatFormID.YY)return void t.UserTips.ins().showUITips("|C:0xff7700&T:该功能暂不可用，7月2日重新开启|")}if(""!=i){if("@#@debug"==i)return void(t.ViewManager.ins().isShow(t.DebugView)?t.ViewManager.ins().close(t.DebugView):t.ViewManager.ins().open(t.DebugView));if("@#@kf"==i)return void t.KFManager.ins().s_33_1();if("@#@onLogout"==i)return void Main.onLogout("");var o=this.getBytes(1);o.writeByte(e),o.writeString(i),o.writeString(n),o.writeByte(s.isGood),s.isGood&&(o.writeDouble(s.series.createTime),o.writeUnsignedShort(s.series.wSeries),o.writeByte(s.series.btServer),o.writeByte(s.series.btReserve));var l=t.EntityMgr.ins().getPayer,h=l.propSet.getForbidenTime();if(h&&h>Math.floor(t.GlobalData.serverTime/1e3))return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips158);var p=2,u="";t.GameMap.fubenID;if(e)u=l.propSet.getName();else{if(""==n)return;p=1,u=n}ReportMgr.reporting(t.ReportDataEnum.Chat,{chatType:p,receiveName:u,chatContent:a,gameSceneId:e,channelId:e});var c=this;if(Main.gameParameter.pfID==t.PlatFormID.HUYU37){var g=1==p?"&to_username="+u+"&to_actor="+u+"&to_actor_id"+u:"",d=2==e?"&guildid="+l.propSet.getGuildId:"",m="?game_key="+window.game+"&sid="+ +window.userInfo.server%2e4+"&username="+window.userInfo.uid+"&actor="+u+"&actor_id="+t.LocationProperty.roleId+g+"&content="+i+"&channel="+e+d+"&time="+Date.parse((new Date).toString())/1e3+"&level="+l.propSet.getLevel()+"&zsLevel="+l.propSet.getZSLevel(),f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status){JSON.parse(f.responseText);1==parseInt(f.responseText)?c.sendToServer(o):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips151)}},f.open("GET",window.verification+m,!0),f.send(null)}else if(Main.gameParameter.pfID==t.PlatFormID.xiaoqi){var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status){JSON.parse(f.responseText);1==parseInt(f.responseText)?c.sendToServer(o):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips151)}};var v=gamelib.DeviceUtils.IsIOS?3:1;f.open("GET",window.verification+"?guid="+t.LocationProperty.openID+"&detectionMessage="+i+"&type="+v,!0),f.send(null)}else this.sendToServer(o)}},i.prototype.postChatInfo=function(e){var i=new t.ChatMessage(e);i&&this.insertChatMsg(i)},i.prototype.postChatState=function(e){var i=e.readByte();1==i&&(1==this.isPrivateChat&&(t.ChatModel.ins().setPrivateData(this.priMessage),t.ChatModel.ins().setAllChatData(this.priMessage)),t.EventManager.ins().sendEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT))},i.prototype.lookItem=function(t){var e=this.getBytes(6);-1!=t.indexOf("e")?e.writeDouble(t):e.writeNumber(t),this.sendToServer(e)},i.prototype.post_LookItem=function(e){var i=e.readByte();if(i){var n=new t.userItem(e);return n}return null},i.prototype.insertChatMsg=function(e){if(t.GameSocket.IsCrossService&&""!=e.senderName){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getName(),s=n.indexOf("."),a=e.senderName.indexOf(".");if(i=null,n.substring(0,s)!=e.senderName.substring(0,a))return n=null,s=null,void(a=null)}switch(e.showChannelID){case t.ChannelID.ChannelWorld:t.ChatModel.ins().setWorldData(e);break;case t.ChannelID.ChannelNear:if(!t.ChatView.isCloseNearChannel){if(t.ChatModel.ins().setNearData(e),-1!=e.message.indexOf("E:}{;"))break;var r="|C:"+t.ColorUtil.WHITE_COLOR+"&T:"+e.senderName+"："+e.message,o=t.EntityMgr.ins().getPayer.charName.replace(/[\\]/g,"");o==e.senderName&&t.EntityMgr.ins().getPayer.setNearChat(r),t.EntityMgr.ins().FindChatNearPlayer(e)}break;case t.ChannelID.ChannelGuild:t.ChatView.isCloseGuildChannel||t.ChatModel.ins().setGuildData(e);break;case t.ChannelID.ChannelTeam:t.ChatModel.ins().setTeamData(e);break;case t.ChannelID.ChannelSecret:t.ChatView.isClosePrivateChannel||t.ChatModel.ins().setPrivateData(e);break;case t.ChannelID.ChannelSystemTips:t.ChatModel.ins().setSystemData(e)}e.showChannelID==t.ChannelID.ChannelNear&&t.ChatView.isCloseNearChannel||e.showChannelID==t.ChannelID.ChannelGuild&&t.ChatView.isCloseGuildChannel||e.showChannelID==t.ChannelID.ChannelSecret&&t.ChatView.isClosePrivateChannel||t.ChatModel.ins().setAllChatData(e)},i.prototype.setChatPrivatePlayerListData=function(t){this._chatPrivatePlayerListData||(this._chatPrivatePlayerListData=new eui.ArrayCollection);for(var e=0;e<this._chatPrivatePlayerListData.length;e++){var i=this._chatPrivatePlayerListData.getItemAt(e);if(i==t)return}this._chatPrivatePlayerListData.addItem(t)},i.prototype.getChatPrivatePlayerListData=function(){return this._chatPrivatePlayerListData},i.prototype.postAddExp=function(){},i.prototype.postSystemChat=function(e){var i=e.readUnsignedShort();if(e.length>0){var n=e.readString();switch(i){case 1:t.UserTips.ins().showJingYanTips(n);break;case 2:var s=t.EntityMgr.ins().getPayer;if(s&&t.GameMap.isBubble){var a=s.propSet.getRechargeSum();a&&(n+="|C:0x28ee01&T:(特权+20%)|"),!t.GameMap.scenes||3!=t.GameMap.scenes.sceneid&&249!=t.GameMap.scenes.sceneid||this.postAddExp()}var r=t.VipData.ins().getMyVipLv();if(r>=3){var o=t.VipData.ins().getVipDataByLv(r);o&&(n+=t.StringUtils.replace(t.LanguageUtils.language_Omission_txt121,o.name))}t.UserTips.ins().showJingYanTips(n);break;case 3:t.UserTips.ins().showMoneyTips(n);break;case 4:t.UserTips.ins().showFightTips(n);break;case 5:t.UserTips.ins().showUITips(n);break;case 6:break;case 7:break;case 8:case 9:this.postAddnotice(n,2);break;case 10:t.ViewManager.ins().isShow(t.GongGaoWin)||t.ViewManager.ins().open(t.GongGaoWin,n);break;case 11:this.postAddnotice(n,1);break;case 12:this.postAddnotice(n,0);break;case 13:this._bulletFrameAry.push(n),t.ViewManager.ins().isShow(t.BulletFrameView)||t.ViewManager.ins().open(t.BulletFrameView);break;case 14:t.BossMgr.addBoss(n);break;case 15:this._bulletFrameAry2.push(n),t.ViewManager.ins().isShow(t.BulletFrameView2)||t.ViewManager.ins().open(t.BulletFrameView2);break;case 16:t.ViewManager.ins().open(t.JumpTipsView,n,"app.SetUpView",[5]);break;case 17:t.UserTips.ins().showUITips(n);break;case 18:t.UserTips.ins().showUITips(n);break;case 19:t.UserTips.ins().showUITips(n);break;case 20:t.ViewManager.ins().open(t.TipsInsuffResourcesView,QatEnum.qatYuanbao);break;case 21:t.VersionUpdateView.openView();default:t.UserTips.ins().showUITips(n)}}},i.prototype.getBulletFrameStr=function(){return this._bulletFrameAry.length?this._bulletFrameAry.shift():null},i.prototype.getBulletFrameStr2=function(){return this._bulletFrameAry2.length?this._bulletFrameAry2.shift():null},i.prototype.postAddnotice=function(t,e){return void 0===e&&(e=0),[t+"",e]},i.prototype.postPrivateChat=function(t){},Object.defineProperty(i.prototype,"requesCDTime",{get:function(){return this._requesCDTime},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"kfNoticeAry",{get:function(){return this._kfNoticeAry},enumerable:!0,configurable:!0}),i.prototype.requestKFNotice=function(){var e=egret.getTimer();if(e-this._requesCDTime>3e3){this._requesCDTime=e+3e3;var i=0;this._kfNoticeAry.length&&(i=this._kfNoticeAry[this._kfNoticeAry.length-1].time);var n=this.getBytes(11);n.writeByte(5),n.writeInt(t.LocationProperty.srvid),n.writeUnsignedInt(i),this.sendToServer(n)}},i.prototype.post_9_11=function(t){t.readByte();for(var e=t.readInt(),i=0;e>i;i++){var n=t.readByte(),s=t.readUnsignedInt(),a=t.readString();this._kfNoticeAry.push({type:n,time:s,msg:a})}return this._kfNoticeAry},i.prototype.post_9_12=function(e){t.ChatModel.ins().removeAllArr()},i.prototype.post_9_15=function(e){for(var i=e.readUnsignedInt(),n=t.ChatModel.ins().getAllChatData(),s=t.ChatModel.ins().getAllMsgData(),a=n.source.length-1;a>=0;a--){var r=n.source[a];(0!=i&&r.roleID&&r.roleID==i||1==r.isMe)&&n.removeItemAt(a)}for(var o=t.ChatModel.ins().getWorldData(),a=o.source.length-1;a>=0;a--){var l=o.source[a];(0!=i&&l.roleID&&l.roleID==i||1==l.isMe)&&o.removeItemAt(a)}for(var h=t.ChatModel.ins().getGuildData(),a=h.source.length-1;a>=0;a--){var p=h.source[a];(0!=i&&p.roleID&&p.roleID==i||1==p.isMe)&&h.removeItemAt(a)}for(var u=t.ChatModel.ins().getNeardData(),a=u.source.length-1;a>=0;a--){var c=u.source[a];(0!=i&&c.roleID&&c.roleID==i||1==c.isMe)&&u.removeItemAt(a)}for(var g=t.ChatModel.ins().getPrivateData(),a=g.source.length-1;a>=0;a--){var d=g.source[a];(0!=i&&d.roleID&&d.roleID==i||1==d.isMe)&&g.removeItemAt(a)}for(var m=t.ChatModel.ins().getTeamData(),a=m.source.length-1;a>=0;a--){var f=m.source[a];(0!=i&&f.roleID&&f.roleID==i||1==f.isMe)&&m.removeItemAt(a)}for(var v=s.length-1;v>=0;v--){var _=s[v];(0!=i&&_.roleID&&_.roleID==i||1==_.isMe)&&s.splice(v,1)}},i}(t.BaseSystem);t.ChatMgr=e,__reflect(e.prototype,"app.ChatMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._allMsg=[],t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.init=function(){this._allMsg=[],this._allChatArr=new eui.ArrayCollection,this._worldChatArr=new eui.ArrayCollection,this._guildChatArr=new eui.ArrayCollection,this._privateChatArr=new eui.ArrayCollection,this._systemChatArr=new eui.ArrayCollection,this._nearChatArr=new eui.ArrayCollection,this._teamChatArr=new eui.ArrayCollection,this._personalLogArr=new eui.ArrayCollection},i.prototype.setAllChatData=function(t){if(this._allChatArr.length>=200){var e=this._allChatArr.removeItemAt(0);this.removeAllChatMsg(this._nearChatArr,e)}this._allChatArr.addItem(t),this._allMsg.length>=200&&this._allMsg.shift(),this._allMsg.push(t)},i.prototype.getAllChatData=function(){return this._allChatArr},i.prototype.getAllMsgData=function(){return this._allMsg},i.prototype.setWorldData=function(t){if(this._worldChatArr.length>=200){var e=this._worldChatArr.removeItemAt(0);this.removeAllChatMsg(this._worldChatArr,e)}this._worldChatArr.addItem(t)},i.prototype.getWorldData=function(){return this._worldChatArr},i.prototype.setNearData=function(t){if(this._nearChatArr.length>=200){var e=this._nearChatArr.removeItemAt(0);this.removeAllChatMsg(this._nearChatArr,e)}this._nearChatArr.addItem(t)},i.prototype.getNeardData=function(){return this._nearChatArr},i.prototype.setGuildData=function(t){if(this._guildChatArr.length>=200){var e=this._guildChatArr.removeItemAt(0);this.removeAllChatMsg(this._guildChatArr,e)}this._guildChatArr.addItem(t)},i.prototype.getTeamData=function(){return this._teamChatArr},i.prototype.setTeamData=function(t){if(this._teamChatArr.length>=200){var e=this._teamChatArr.removeItemAt(0);this.removeAllChatMsg(this._teamChatArr,e)}this._teamChatArr.addItem(t)},i.prototype.getGuildData=function(){return this._guildChatArr},i.prototype.setPrivateData=function(t){if(this._privateChatArr.length>=200){var e=this._privateChatArr.removeItemAt(0);this.removeAllChatMsg(this._privateChatArr,e)}this._privateChatArr.addItem(t)},i.prototype.getPrivateData=function(){return this._privateChatArr},i.prototype.setPersonalData=function(e){if(this._personalLogArr){if(this._personalLogArr.length>=200){var i=this._personalLogArr.removeItemAt(0);this.removeAllChatMsg(this._personalLogArr,i)}var n=new t.ChatMessage;n.message=e,n.showChannelID=t.ChannelID.ChannelPersonal,this._personalLogArr.addItem(n)}},i.prototype.getPersonalData=function(){return this._personalLogArr},i.prototype.getSystemData=function(){return this._systemChatArr},i.prototype.setSystemData=function(t){return this._systemChatArr.addItem(t)},i.prototype.removeAllChatMsg=function(t,e){var i=t.getItemIndex(e);i>=0&&t.removeItemAt(i)},i.prototype.removeAllArr=function(){this._allMsg&&(this._allMsg=[]),this._allChatArr&&this._allChatArr.removeAll(),this._worldChatArr&&this._worldChatArr.removeAll(),this._guildChatArr&&this._guildChatArr.removeAll(),this._privateChatArr&&this._privateChatArr.removeAll(),this._systemChatArr&&this._systemChatArr.removeAll(),this._nearChatArr&&this._nearChatArr.removeAll(),this._teamChatArr&&this._teamChatArr.removeAll(),this._personalLogArr&&this._personalLogArr.removeAll()},i}(t.BaseSystem);t.ChatModel=e,__reflect(e.prototype,"app.ChatModel")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.onClick=function(){},e.prototype.dataChanged=function(){this.playNameLb.text=this.data},e}(t.BaseItemRender);t.ChatPrivatePlayerListItem=e,__reflect(e.prototype,"app.ChatPrivatePlayerListItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._type=0,i.skinName="ChatShowFriendOrNearListSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.txt_enter_name.text=t.LanguageUtils.language_Chat_Enter_Name_Text,this.txt_list_name.text=t.LanguageUtils.language_Chat_Name_List_Text,this.ConfirmBtn.label=t.LanguageUtils.language_Common_59},i.prototype.open=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.open.call(this,i),i[0]&&(this._type=i[0]),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System11),this.updateView(t.ChatPrivatePlayerListItem,t.ChatMgr.ins().getChatPrivatePlayerListData()),this.playerList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.addTouchEndEvent(this.ConfirmBtn,this.onSendChatPrivateName)},i.prototype.onSendChatPrivateName=function(){if(1==this._type){if(""==this.playerNameText.text.trim())return;t.EventManager.ins().sendEvent(t.ChatEvent.PLAY_NAME_SLECT,[{indexText:this.playerNameText.text}]),t.ViewManager.ins().close(this)}else 2==this._type&&""!=this.playerNameText.text&&(t.PrivateDealsMgr.ins().send_13_1(0,this.playerNameText.text),t.ViewManager.ins().close(this))},i.prototype.onChange=function(){this.playerNameText.text=this.playerList.selectedItem},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.ConfirmBtn,this.onSendChatPrivateName),this.playerList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),t.TimerManager.ins().removeAll(this)},i.prototype.updateView=function(t,e){this.playerList.itemRenderer=t,this.playerList.dataProvider=e},i}(t.BaseEuiView);t.ChatShowFriendOrNearListView=e,__reflect(e.prototype,"app.ChatShowFriendOrNearListView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cruIndex=0,t.channelID=1,t._tempChatStr="",t.isGoodsChat=!1,t.pattern=/\[.*?\]\]/g,t.includeGoodsChatInfo="",t._touchStatus=!1,t._distance=new egret.Point,t._isRoll=!0,t.currentExp=0,t.chanArr=[{img:"m_chat_t_shijie",index:0},{img:"m_chat_t_fujin",index:1},{img:"m_chat_t_hanghui",index:2},{img:"m_chat_t_zudui",index:3},{img:"m_chat_t_siliao",index:4}],t.isDownEnter=!0,t.lastindex=0,t.msgInfo={},t.lastMsg="",t.sendMsg=!1,t.goodsItemId=0,t.skinName="ChatSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype._pkClickFunction=function(t){this.nearBy.ImageDisplay.source=t.img,this.channelID=t.index,4==t.index?(this.showPlayerListBtn.visible=!0,this.chatInput.x=this.showPlayerListBtn.width+85,this.chatInput.width=this.chatInput.width-this.chatInput.x+70):(this.showPlayerListBtn.visible=!1,this.chatInput.width=480,this.chatInput.x=76)},i.prototype.updatePersonalData=function(){var e=t.EntityMgr.ins().getPayer;if(0!=this.currentExp){if(e&&e.propSet){var i=e.propSet.getEXP(),n=i-this.currentExp;this.currentExp=i,n>0&&t.ChatModel.ins().setPersonalData(""+t.LanguageUtils.language_CURRENCY_NAME_17+n)}}else this.currentExp=e.propSet.getEXP()},i.prototype.updateChatData=function(){this.isGoodsChat=!1,this.updateList(!0)},i.prototype.clearChatData=function(){this.isGoodsChat=!1,this.updateList(!0),this.chatArr.refresh()},i.prototype.chatShowTips=function(e){var i=e[0],n=i.info.split(",");if(-1==n[0]){var s=t.EntityMgr.ins().getPayer;if(s){var a=s.ifFindTask(+n[3],+n[1],+n[2]);if(a&&-1==a.x&&-1==a.y)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips121);s.setTask(+n[3],+n[1],+n[2],-1,-1,0,+n[4])}}else-2==n[0]?t.ViewManager.ins().openViewId(+n[1]):this.seriesId=n[2]},i.prototype.lookItemFunction=function(e){if(e&&1==t.ChatMgr.ins().chatViewType){t.ChatMgr.ins().chatViewType=0;var i=t.GlobalConfig.StdItems[e.wItemId];if(i){var n=t.TipsType.TIPS_EQUIP;n=i.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(this,n,e,this.clickPoint)}}},i.prototype.showTips=function(e){var i=(this.chatList.selectedItem,e.currentTarget);i&&this.seriesId&&(this.clickPoint.x=e.stageX,this.clickPoint.y=e.stageY,t.ChatMgr.ins().chatViewType=1,t.ChatMgr.ins().lookItem(this.seriesId),this.seriesId=0)},i.prototype._onScrollerMouseWheelChange=function(t){if(!(this.barList.viewport.measuredHeight<this.barList.height||this.barList.viewport.contentHeight<=this.barList.height)){var e=0,i=0;t.data<0?(e=this.scrollBar.value-20,i=this.barList.viewport.scrollV+20):(e=this.scrollBar.value+20,i=this.barList.viewport.scrollV-20),this.scrollBar.value=Math.max(Math.min(e,this.barList.viewport.contentHeight-this.barList.height),0),this.barList.viewport.scrollV=Math.max(Math.min(i,this.barList.viewport.contentHeight-this.barList.height),0)}},i.prototype.onScrollerChange=function(t){this.barList.viewport.scrollV=Math.max(Math.min(this.barList.viewport.scrollV,this.barList.viewport.contentHeight-this.barList.height),0);var e=this.barList.viewport.scrollV,i=Math.abs(e)/(this.barList.viewport.contentHeight-this.barList.height),n=i*this.scrollBar.maximum;this.scrollBar.value=this.scrollBar.maximum-n},i.prototype.changeHandler=function(t){var e=t.target.value;this.barList.viewport.scrollV=-(e-(this.barList.viewport.contentHeight-this.barList.height))},i.prototype.onTouchDouble=function(){if(this.chatList.selectedItem){var e=this.chatList.selectedItem;if(""==e.senderName||e.isMe||t.EntityMgr.ins().getPayer.recog==e.playerId)return void egret.TouchEvent.dispatchTouchEvent(t.StageUtils.ins().getStage(),egret.TouchEvent.TOUCH_BEGIN,!0,!0,this.chatInput.x,this.chatInput.y,0,!0);this.nearBy.ImageDisplay.source="m_chat_t_siliao",this.channelID=4,this.showPlayerListBtn.text=e.senderName,this.showPlayerListBtn.visible=!0,this.chatInput.x=this.showPlayerListBtn.width+85,this.chatInput.width=this.chatInput.width-this.chatInput.x+70}},i.prototype.onShowPrivateName=function(t){var e=t[0];this.showPlayerListBtn.text=e.indexText,this.showChatMenu()},i.prototype.keyDown=function(e){if(e==gamelib.KeyCode.KC_ENTER){if(this.chatInput&&t.LanguageUtils.language_Chat_ShowInput_Tips==this.chatInput.text)return;var i="";if(""!=this.chatInput.text){if(this.chatInput.text.length>120)return void t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ChatInput_OverLen);this.getChannelId(this.channelID)==t.ChannelID.ChannelSecret?(this.priChatMeSendMsg(this.chatInput.text),i=this.showPlayerListBtn.text.toString().trim()):t.ChatMgr.ins().isPrivateChat=!1;var n="",s=void 0;this.isGoodsChat?(n=this.includeGoodsChatInfo,s={isGood:1,series:this.infoTemp.series}):(n=this.chatInput.text,s={isGood:0});var a=this.chatInput.text;Main.gameParameter.pfID==t.PlatFormID.QQGame?(this.msgInfo.type=this.getChannelId(this.channelID),this.msgInfo.msg=n,this.msgInfo.target=i,this.msgInfo.goodsObj=s,this.msgInfo.contentStr=a,t.OtherMgr.ins().qqHallTextFiltering(n,t.QQHallMsgType.msgInfo),this.sendMsg=!0):Main.gameParameter.pfID==t.PlatFormID.YY?(this.msgInfo.type=this.getChannelId(this.channelID),this.msgInfo.msg=n,this.msgInfo.target=i,this.msgInfo.goodsObj=s,this.msgInfo.contentStr=a,t.OtherMgr.ins().yyHallTextFiltering(n,t.YYHallMsgType.chatMsg),this.sendMsg=!0):t.ChatMgr.ins().s_9_1(this.getChannelId(this.channelID),n,i,s,a)}else this.chatInput.dispatchEvent(new egret.Event(egret.FocusEvent.FOCUS_OUT)),egret.TouchEvent.dispatchTouchEvent(t.StageUtils.ins().getStage(),egret.TouchEvent.TOUCH_BEGIN,!0,!0,0,0,0,!0),this.chatInput.text=t.LanguageUtils.language_Chat_ShowInput_Tips}},i.prototype.priChatMeSendMsg=function(e){if(this.showPlayerListBtn.text.toString().trim()!=t.LanguageUtils.language_Chat_Set_Text){var i=this.showPlayerListBtn.text.toString().trim(),n=new t.ChatMessage;n.senderName="/"+i,n.message=e,n.showChannelID=t.ChannelID.ChannelSecret,n.isMe=!0,t.ChatMgr.ins().isPrivateChat=!0,t.ChatMgr.ins().priMessage=n}},i.prototype.keyUp=function(e){e==gamelib.KeyCode.KC_ENTER&&this.chatInput&&t.LanguageUtils.language_Chat_ShowInput_Tips==this.chatInput.text},i.prototype.onClearChatInput=function(){-1==this.lastMsg.indexOf("E:}{;")&&(this.chatInput.text="",this.isGoodsChat=!1,this.includeGoodsChatInfo="",this.goodsItemId=0),this.lastMsg=""},i.prototype.updateList=function(e){switch(void 0===e&&(e=!1),this.cruIndex){case 0:this.chatArr.replaceAll(t.ChatModel.ins().getAllMsgData()),this.refScroller()}},i.prototype.refScroller=function(){t.TimerManager.ins().remove(this.refushBarList,this),t.TimerManager.ins().doTimer(10,2,this.refushBarList,this)},i.prototype.refushBarList=function(){if(this.barList.validateNow(),this.barList.viewport.contentHeight>this.barList.viewport.height){this.barList.viewport.scrollV=this.barList.viewport.contentHeight-this.barList.viewport.height;var t=this.barList.viewport.scrollV,e=Math.abs(t)/(this.barList.viewport.contentHeight-this.barList.height),i=e*this.scrollBar.maximum;this.scrollBar.value=this.scrollBar.maximum-i}this.scrollBar.maximum=this.barList.viewport.contentHeight-this.barList.height},i.prototype.refushBarListTop=function(){this.barList.viewport.scrollV=0},i.prototype.onCloseMenu=function(){this.chatMenuView.visible=!1,t.UserTips.ins().closeTips()},i.prototype.onShowChatMenu=function(t){var e=t[0],i=["m_chat_t_shijie","m_chat_t_fujin","m_chat_t_hanghui","m_chat_t_zudui","m_chat_t_siliao"];this.nearBy.ImageDisplay.source=i[e.indexItem],this.channelID=e.indexItem,4==e.indexItem?(this.showPlayerListBtn.visible=!0,this.chatInput.x=this.showPlayerListBtn.width+85,this.chatInput.width=this.chatInput.width-this.chatInput.x+70):(this.showPlayerListBtn.visible=!1,this.chatInput.width=507,this.chatInput.x=76)
},i.prototype.showChatMenu=function(){this.nearBy.ImageDisplay.source="m_chat_t_siliao",this.channelID=4,this.showPlayerListBtn.visible=!0,this.chatInput.x=this.showPlayerListBtn.width+85,this.chatInput.width=this.chatInput.width-this.chatInput.x+70},i.prototype.open=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.open.call(this,i),this.clickPoint=new egret.Point,this.barList.verticalScrollBar.autoVisibility=!1,this.barList.verticalScrollBar.visible=!1,this.barList.viewport=this.chatList,this.chatList.itemRenderer=t.chatListItem,this.chatArr=new eui.ArrayCollection,this.chatList.dataProvider=this.chatArr,this.chatMenuView.visible=!1,this.showPlayerListBtn.visible=!1,this.cruIndex=0,this.updateList(!0),this.barList.scrollPolicyH=eui.ScrollPolicy.OFF,this.chatInput.addEventListener(egret.FocusEvent.FOCUS_IN,this.textFocusOn,this),this.chatInput.addEventListener(egret.FocusEvent.FOCUS_OUT,this.textFocusOn,this),this.chatInput.addEventListener(egret.FocusEvent.CHANGE,this.textChange,this),this.scrollBar.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),t.EventManager.ins().addEvent(t.ChatEvent.MENUITEM_SLECT,this.onShowChatMenu,this),t.EventManager.ins().addEvent(t.ChatEvent.GOODS_SHOW,this.onShowGoods,this),t.EventManager.ins().addEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT,this.onClearChatInput,this),t.EventManager.ins().addEvent(t.ChatEvent.PLAY_NAME_SLECT,this.onShowPrivateName,this),t.EventManager.ins().addEvent(t.ChatEvent.CHAT_SHOW_GOODS_TIPS,this.chatShowTips,this),this.addTouchEvent(this.sendBtn,this.onClick),this.addTouchEvent(this.nearBy,this.onClick),this.addTouchEvent(this.showPlayerListBtn,this.onClick),gamelib.os.KeyBoard.addKeyDown(this.keyDown,this),gamelib.os.KeyBoard.addKeyUp(this.keyUp,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_TAP,this.stageBegin,this),this.chatList.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),this.barList.addEventListener(eui.UIEvent.CHANGE,this.onScrollerChange,this),this.addTouchEvent(this.chatList,this.showTips),this.observe(t.ChatMgr.ins().postChatInfo,this.updateChatData),this.observe(t.ChatMgr.ins().postPrivateChat,this.updateChatData),this.observe(t.ChatMgr.ins().post_9_12,this.clearChatData),this.observe(t.ChatMgr.ins().post_9_15,this.clearChatData),t.EventManager.ins().addEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT,this.updateChatData,this),this.observe(t.DefaultMgr.ins().post_g_0_7,this.updatePersonalData),this.observe(t.ChatMgr.ins().post_LookItem,this.lookItemFunction),this.observe(t.OtherMgr.ins().post_qqHallTextFiltering,this.qqHallSendMsg),this.observe(t.OtherMgr.ins().postYYVerification,this.yyHallSendMsg),this.bgInput.visible=!1,this.showPlayerListBtn.text=t.LanguageUtils.language_Chat_Set_Text,this.chatInput.text=t.LanguageUtils.language_Chat_ShowInput_Tips,this.chatInput.prompt=t.LanguageUtils.language_Chat_ShowInput_Tips,t.MouseScroller.bind(this.barList),t.MouseScroller.addCallbackFunction(this.barList,this._onScrollerMouseWheelChange.bind(this)),this.chanSelect.setClickFunction=this._pkClickFunction.bind(this),this.chanSelect.itemRenderer(t.MainSelectRender,"ChatSelectArrItem"),this.chanSelect.dataProvider=this.chanArr;for(var s,a=0;43>a;a++)s=this.faceImgGrpup.getChildByName("face_"+a),s.visible=!0,s.face="E:}{;chat_bqb_"+(a+1),s.source="chat_bqb_"+(a+1),this.addTouchEvent(s,this.onClickFace)},i.prototype.stageBegin=function(t){this.faceBtn.hitTestPoint(t.stageX,t.stageY)?this.faceGrpup.visible=!this.faceGrpup.visible:this.faceGrpup.visible=!1},i.prototype.onClickFace=function(t){this.faceGrpup.visible=!1;var e=t.currentTarget.face;this.sendFunction(2,e)},i.prototype.updateView=function(t,e){this.chatList.itemRenderer=t,this.chatList.dataProvider=e},i.prototype.getChannelId=function(e){var i=null;switch(e){case 0:i=t.ChannelID.ChannelWorld;break;case 1:i=t.ChannelID.ChannelNear;break;case 2:i=t.ChannelID.ChannelGuild;break;case 3:i=t.ChannelID.ChannelTeam;break;case 4:i=t.ChannelID.ChannelSecret;break;case 5:i=t.ChannelID.ChannelPersonal}return i},i.prototype.sendFunction=function(e,i){void 0===e&&(e=1),void 0===i&&(i="");var n="";if(1==e&&(i=this.chatInput.text),this.lastMsg=i,i!=t.LanguageUtils.language_Chat_ShowInput_Tips&&(i.length>40&&t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ChatInput_OverLen),""!=i)){this.getChannelId(this.channelID)==t.ChannelID.ChannelSecret?(this.priChatMeSendMsg(i),n=this.showPlayerListBtn.text.toString().trim()):t.ChatMgr.ins().isPrivateChat=!1;var s="",a=void 0;this.isGoodsChat?(s=this.includeGoodsChatInfo,a={isGood:1,series:this.infoTemp.series}):(s=i,a={isGood:0});var r=i;Main.gameParameter.pfID==t.PlatFormID.QQGame?(this.msgInfo.type=this.getChannelId(this.channelID),this.msgInfo.msg=s,this.msgInfo.target=n,this.msgInfo.goodsObj=a,this.msgInfo.contentStr=r,t.OtherMgr.ins().qqHallTextFiltering(s,t.QQHallMsgType.msgInfo),this.sendMsg=!0):Main.gameParameter.pfID==t.PlatFormID.YY?(this.msgInfo.type=this.getChannelId(this.channelID),this.msgInfo.msg=s,this.msgInfo.target=n,this.msgInfo.goodsObj=a,this.msgInfo.contentStr=r,t.OtherMgr.ins().yyHallTextFiltering(s,t.YYHallMsgType.chatMsg),this.sendMsg=!0):t.ChatMgr.ins().s_9_1(this.getChannelId(this.channelID),s,n,a,r)}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.sendBtn:this.sendFunction(1);break;case this.nearBy:this.chanSelect.showView();break;case this.showPlayerListBtn:t.ViewManager.ins().open(t.ChatShowFriendOrNearListView,1)}},i.prototype.textChange=function(t){this.textRresolution(t.target.text)},i.prototype.textRresolution=function(t){var e=/\[.*?\]\]/g,i=t.replace(e,this._tempChatStr);this.pattern.test(this.chatInput.text)||(this._tempChatStr="",this.isGoodsChat=!1),this.pattern.lastIndex=0,this.includeGoodsChatInfo=i,this.goodsItemId=0},i.prototype.getExecStrs=function(t){var e=/\[.*?\]\]/g,i=[],n=null;do n=e.exec(t),n&&i.push(n[0]);while(n);return i},i.prototype.onShowGoods=function(e){""==this.chatInput.text&&(this.chatInput.text=" ");var i=e[0];if(null!=i){this.infoTemp=i.info;var n=10001,s=i.info;if(s.wItemId!=this.goodsItemId){var a=t.GlobalConfig.StdItems[s.wItemId];this.goodsItemId=s.wItemId;var r=5395542,o="",l="",h="";a&&(r=t.ColorUtil.GOODS_COLOR[a.showQuality],o="|E:1,"+n+","+s.series.createTime+",&C:7232324&T:["+a.name+"]",l="["+a.name+"]",h="|E:"+a.id+","+n+","+s.series.createTime+",&U:&C:"+r+"&T:"+a.name+"|");var p=[],u="";if(this.pattern.test(this.chatInput.text)){this.pattern.lastIndex=0;var c=this.chatInput.text.indexOf(l);if(-1!=c)return;var g=this.getExecStrs(this.chatInput.text),d=this.chatInput.text.replace(g[0],"|"),m=d.split("|");if(""==m[0]||""==m[1]){var f=this.chatInput.text.search(d);""==m[0]?f>0?(this._tempChatStr=h+m[1],u=o+m[1]):(this._tempChatStr=m[1]+h,u=m[1]+o):f>0?(this._tempChatStr=h+m[0],u=o+m[0]):(this._tempChatStr=m[0]+h,u=m[0]+o)}else this._tempChatStr=m[0]+h+m[1],u=m[0]+o+m[1];this.chatInput.textFlow=t.TextFlowMaker.generateTextFlow1(u)}else this.pattern.lastIndex=0,this.chatInput.text==t.LanguageUtils.language_Chat_ShowInput_Tips?this._tempChatStr=h:(p=this.chatInput.textFlow,this._tempChatStr=this.chatInput.text+h),this.chatInput.textFlow=p.concat(t.TextFlowMaker.generateTextFlow1(o));this.includeGoodsChatInfo=this._tempChatStr,this.isGoodsChat=!0}}},i.prototype.textFocusOn=function(e){e.type==egret.FocusEvent.FOCUS_IN?(this.chatInput&&t.LanguageUtils.language_Chat_ShowInput_Tips==this.chatInput.text&&(this.chatInput.text=""),this.bgInput.visible=!0):this.bgInput.visible=!1},i.prototype.qqHallSendMsg=function(e){e.type==t.QQHallMsgType.msgInfo&&this.sendMsg&&this.msgInfo&&(t.ChatMgr.ins().s_9_1(this.msgInfo.type,e.Msg,this.msgInfo.target,this.msgInfo.goodsObj,this.msgInfo.contentStr),this.sendMsg=!1)},i.prototype.yyHallSendMsg=function(e){e.msgType==t.YYHallMsgType.chatMsg&&this.sendMsg&&this.msgInfo&&(t.ChatMgr.ins().s_9_1(this.msgInfo.type,e.msg,this.msgInfo.target,this.msgInfo.goodsObj,this.msgInfo.contentStr),this.sendMsg=!1)},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.$onClose(),t.MouseScroller.unbind(this.barList),this.removeTouchEvent(this.sendBtn,this.onClick),this.removeTouchEvent(this.nearBy,this.onClick),this.removeTouchEvent(this.showPlayerListBtn,this.onClick);for(var n,s=0;43>s;s++)n=this.faceImgGrpup.getChildByName("face_"+s),n.visible=!0,n.source="chat_bqb_"+(s+1),this.removeTouchEvent(n,this.onClickFace);for(gamelib.os.KeyBoard.removeKeyDown(this.keyDown,this),gamelib.os.KeyBoard.removeKeyUp(this.keyUp,this),this.scrollBar.removeEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),t.EventManager.ins().removeEvent(t.ChatEvent.MENUITEM_SLECT,this.onShowChatMenu,this),t.EventManager.ins().removeEvent(t.ChatEvent.GOODS_SHOW,this.onShowGoods,this),t.EventManager.ins().removeEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT,this.onClearChatInput,this),t.EventManager.ins().removeEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT,this.updateChatData,this),t.EventManager.ins().removeEvent(t.ChatEvent.PLAY_NAME_SLECT,this.onShowPrivateName,this),t.EventManager.ins().removeEvent(t.ChatEvent.CHAT_SHOW_GOODS_TIPS,this.chatShowTips,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),this.chatInput.removeEventListener(egret.FocusEvent.FOCUS_IN,this.textFocusOn,this),this.chatInput.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.textFocusOn,this),this.chatInput.removeEventListener(egret.FocusEvent.CHANGE,this.textChange,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stageBegin,this),this.chatList.removeEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),this.barList.removeEventListener(eui.UIEvent.CHANGE,this.onScrollerChange,this);this.chatList.numChildren>0;){var a=this.chatList.removeChildAt(0);a=null}this.removeTouchEvent(this.chatList,this.showTips),t.ChatModel.ins().removeAllArr(),this.chatMenuView.destroy(),this.infoTemp=null,this._distance=null,this.chatMenuView=null,t.TimerManager.ins().removeAll(this)},i.isCloseNearChannel=!1,i.isCloseGuildChannel=!1,i.isClosePrivateChannel=!1,i.BIG_HEIGHT=500,i.LITTLE_HEIGHT=142,i.MIN_HEIGHT=60,i}(t.BaseEuiView);t.ChatView=e,__reflect(e.prototype,"app.ChatView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.loadData()},e.prototype.loadData=function(){this.labelDisplay.text=this.data},e}(t.BaseItemRender);t.ChatWinBtnItem=e,__reflect(e.prototype,"app.ChatWinBtnItem")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this)},e.prototype.onClick=function(){},e.prototype.dataChanged=function(){this.labelDisplay.text=this.data},e}(t.BaseItemRender);t.ChatWinMenuItem=e,__reflect(e.prototype,"app.ChatWinMenuItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.gList.itemRenderer=t.ChatWinMenuItem;var i=t.LanguageUtils.language_Chat_Menu_List;this.gList.dataProvider=new eui.ArrayCollection(i),this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i.prototype.onChange=function(){this.visible=!this.visible,t.EventManager.ins().sendEvent(t.ChatEvent.MENUITEM_SLECT,[{indexText:this.gList.selectedItem,indexItem:this.gList.selectedIndex}])},i.prototype.destroy=function(){for(this.gList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this);this.gList.numChildren>0;){var t=this.gList.getChildAt(0);t&&(t=null),this.gList.removeChildAt(0)}this.gList=null},i}(t.BaseEuiView);t.ChatWinMenuView=e,__reflect(e.prototype,"app.ChatWinMenuView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.cruIndex=0,i.channelID=1,i._tempChatStr="",i.isGoodsChat=!1,i.pattern=/\[.*?\]\]/g,i.includeGoodsChatInfo="",i._touchStatus=!1,i._distance=new egret.Point,i._isRoll=!0,i.currentExp=0,i.msgInfo={},i.lastMsg="",i.goodsItemId=0,i.skinName="ChatWinSkin",i.name="ChatWin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System75)},i.prototype.open=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.open.call(this,i),this.bindChannel(),this.barList.viewport=this.chatList,this.chatList.itemRenderer=t.chatListItem,this.clickPoint=new egret.Point,this.barList.verticalScrollBar.autoVisibility=!1,this.barList.verticalScrollBar.visible=!1,this.chatMenuView.visible=!1,this.showPlayerListBtn.visible=!1,this.chatInput.x=282,this.tabBar.selectedIndex=0,this.cruIndex=0,this.updateList(!0),this.barList.scrollPolicyH=eui.ScrollPolicy.OFF,this.initEvent(),this.observe(t.ChatMgr.ins().post_LookItem,this.lookItemFunction),this.observe(t.OtherMgr.ins().post_qqHallTextFiltering,this.qqHallSendMsg),this.observe(t.OtherMgr.ins().postYYVerification,this.yyHallSendMsg),this.scrollBar.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),t.MouseScroller.bind(this.barList),t.MouseScroller.addCallbackFunction(this.barList,this._onScrollerMouseWheelChange.bind(this)),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_TAP,this.stageBegin,this);for(var s,a=0;43>a;a++)s=this.faceImgGrpup.getChildByName("face_"+a),s.visible=!0,s.face="E:}{;chat_bqb_"+(a+1),s.source="chat_bqb_"+(a+1),this.addTouchEvent(s,this.onClickFace);gamelib.DeviceUtils.IsMobile&&i&&i[0]&&(this.showPlayerListBtn.text=i[0].indexText,this.showChatMenu()),t.EventManager.ins().sendEvent(t.ChatEvent.MENUITEM_SLECT,[{indexItem:0}])},i.prototype.initData=function(){this.showPlayerListBtn.text=t.LanguageUtils.language_Chat_Set_Text,this.chatInput.text=t.LanguageUtils.language_Chat_ShowInput_Tips,this.cbGuild.selected=!t.ChatView.isCloseGuildChannel,this.cbNear.selected=!t.ChatView.isCloseNearChannel,this.cbPrivate.selected=!t.ChatView.isClosePrivateChannel},i.prototype._onScrollerMouseWheelChange=function(t){if(!(this.barList.viewport.measuredHeight<this.barList.height||this.barList.viewport.contentHeight<=this.barList.height)){var e=0,i=0;t.data<0?(e=this.scrollBar.value-20,i=this.barList.viewport.scrollV+20):(e=this.scrollBar.value+20,i=this.barList.viewport.scrollV-20),this.scrollBar.value=Math.max(Math.min(e,this.barList.viewport.contentHeight-this.barList.height),0),this.barList.viewport.scrollV=Math.max(Math.min(i,this.barList.viewport.contentHeight-this.barList.height),0)}},i.prototype.bindChannel=function(){this.tabBar.itemRenderer=t.TradeLineTabView,this.tabBar.dataProvider=new eui.ArrayCollection(t.LanguageUtils.language_Chat_WinTabar_List)},i.prototype.updateChatData=function(){this.isGoodsChat=!1,this.updateList(!0)},i.prototype.initEvent=function(){this.addTouchEvent(this.btnSend,this.onClick),this.addTouchEvent(this.btnChannel,this.onClick),this.addTouchEvent(this.cbNear,this.onClick),this.addTouchEvent(this.cbGuild,this.onClick),this.addTouchEvent(this.cbPrivate,this.onClick),this.addTouchEvent(this.showPlayerListBtn,this.onClick),this.addTouchEvent(this.chatList,this.showTips),gamelib.os.KeyBoard.addKeyDown(this.keyDown,this),gamelib.os.KeyBoard.addKeyUp(this.keyUp,this),t.EventManager.ins().addEvent(t.ChatEvent.MENUITEM_SLECT,this.onShowChatMenu,this),t.EventManager.ins().addEvent(t.ChatEvent.GOODS_SHOW,this.onShowGoods,this),t.EventManager.ins().addEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT,this.onClearChatInput,this),t.EventManager.ins().addEvent(t.ChatEvent.PLAY_NAME_SLECT,this.onShowPrivateName,this),t.EventManager.ins().addEvent(t.ChatEvent.CHAT_SHOW_GOODS_TIPS,this.chatShowTips,this),t.EventManager.ins().addEvent(t.ChatEvent.CHAT_CHANNEL_CHANGE,this.chatChannelChange,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),this.chatInput.addEventListener(egret.FocusEvent.FOCUS_IN,this.textFocusOn,this),this.chatInput.addEventListener(egret.FocusEvent.FOCUS_OUT,this.textFocusOn,this),this.chatInput.addEventListener(egret.FocusEvent.CHANGE,this.textChange,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.selectIndexChange,this),this.chatList.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),this.barList.addEventListener(eui.UIEvent.CHANGE,this.onScrollerChange,this),this.observe(t.ChatMgr.ins().postChatInfo,this.updateChatData),this.observe(t.ChatMgr.ins().postPrivateChat,this.updateChatData),this.observe(t.ChatMgr.ins().post_9_12,this.updateChatData),this.observe(t.ChatMgr.ins().post_9_15,this.updateChatData),t.EventManager.ins().addEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT,this.updateChatData,this)},i.prototype.stageBegin=function(t){this.faceBtn.hitTestPoint(t.stageX,t.stageY)?this.faceGrpup.visible=!this.faceGrpup.visible:this.faceGrpup.visible=!1},i.prototype.onClickFace=function(t){this.faceGrpup.visible=!1;var e=t.currentTarget.face;this.sendMsg(2,e)},i.prototype.removeEvent=function(){this.scrollBar.removeEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),t.EventManager.ins().removeEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT,this.updateChatData,this),this.removeTouchEvent(this.btnSend,this.onClick),this.removeTouchEvent(this.cbNear,this.onClick),this.removeTouchEvent(this.cbGuild,this.onClick),this.removeTouchEvent(this.btnChannel,this.onClick),this.removeTouchEvent(this.cbPrivate,this.onClick),this.removeTouchEvent(this.showPlayerListBtn,this.onClick),gamelib.os.KeyBoard.removeKeyDown(this.keyDown,this),gamelib.os.KeyBoard.removeKeyUp(this.keyUp,this),t.EventManager.ins().removeEvent(t.ChatEvent.MENUITEM_SLECT,this.onShowChatMenu,this),t.EventManager.ins().removeEvent(t.ChatEvent.GOODS_SHOW,this.onShowGoods,this),t.EventManager.ins().removeEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT,this.onClearChatInput,this),t.EventManager.ins().removeEvent(t.ChatEvent.PLAY_NAME_SLECT,this.onShowPrivateName,this),t.EventManager.ins().removeEvent(t.ChatEvent.CHAT_SHOW_GOODS_TIPS,this.chatShowTips,this),t.EventManager.ins().removeEvent(t.ChatEvent.CHAT_CHANNEL_CHANGE,this.chatChannelChange,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),this.chatInput.removeEventListener(egret.FocusEvent.FOCUS_IN,this.textFocusOn,this),this.chatInput.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.textFocusOn,this),this.chatInput.removeEventListener(egret.FocusEvent.CHANGE,this.textChange,this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.selectIndexChange,this),this.chatList.removeEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),this.barList.removeEventListener(eui.UIEvent.CHANGE,this.onScrollerChange,this)},i.prototype.onCloseMenu=function(e){this.chatMenuView.visible=!1,"tipsview"!=e.target.name&&t.UserTips.ins().closeTips()},i.prototype.onShowChatMenu=function(e){var i=e[0];this.btnChannel.label=t.LanguageUtils.language_Chat_Menu_List[i.indexItem],this.channelID=i.indexItem,4==i.indexItem?(this.showPlayerListBtn.visible=!0,this.chatInput.x=this.showPlayerListBtn.x+this.showPlayerListBtn.width):(this.showPlayerListBtn.visible=!1,this.chatInput.x=282)},i.prototype.chatChannelChange=function(e){e.view||(this.cbGuild.selected=!t.ChatView.isCloseGuildChannel,this.cbNear.selected=!t.ChatView.isCloseNearChannel,this.cbPrivate.selected=!t.ChatView.isClosePrivateChannel)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnSend:this.sendMsg(1);break;case this.btnChannel:this.chatMenuView.visible=!this.chatMenuView.visible;break;case this.showPlayerListBtn:t.ViewManager.ins().open(t.ChatShowFriendOrNearListView,1);break;case this.cbGuild:this.cbGuild.selected?(t.ChatView.isCloseGuildChannel=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetOpenGuild_Tips)):(t.ChatView.isCloseGuildChannel=!0,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetCloseGuild_Tips)),t.EventManager.ins().sendEvent(t.ChatEvent.CHAT_CHANNEL_CHANGE,{type:2,view:!0});break;case this.cbPrivate:this.cbPrivate.selected?(t.ChatView.isClosePrivateChannel=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetOpenPrivate_Tips)):(t.ChatView.isClosePrivateChannel=!0,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetClosePrivate_Tips)),t.EventManager.ins().sendEvent(t.ChatEvent.CHAT_CHANNEL_CHANGE,{type:3,view:!0});break;case this.cbNear:this.cbNear.selected?(t.ChatView.isCloseNearChannel=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetOpenNear_Tips)):(t.ChatView.isCloseNearChannel=!0,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetCloseNear_Tips)),t.EventManager.ins().sendEvent(t.ChatEvent.CHAT_CHANNEL_CHANGE,{type:1,view:!0})}},i.prototype.sendMsg=function(e,i){void 0===e&&(e=1),void 0===i&&(i="");var n="";if(1==e&&(i=this.chatInput.text),i!=t.LanguageUtils.language_Chat_ShowInput_Tips&&(i.length>120&&t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ChatInput_OverLen),this.lastMsg=i,""!=i)){this.getChannelId(this.channelID)==t.ChannelID.ChannelSecret?(this.priChatMeSendMsg(i),n=this.showPlayerListBtn.text.toString().trim()):t.ChatMgr.ins().isPrivateChat=!1;var s="",a=void 0;this.isGoodsChat?(s=this.includeGoodsChatInfo,a={isGood:1,series:this.infoTemp.series}):(s=i,a={isGood:0});var r=i;Main.gameParameter.pfID==t.PlatFormID.QQGame?(this.msgInfo.type=this.getChannelId(this.channelID),this.msgInfo.msg=s,this.msgInfo.target=n,this.msgInfo.goodsObj=a,this.msgInfo.contentStr=r,t.OtherMgr.ins().qqHallTextFiltering(s,t.QQHallMsgType.msgInfo)):Main.gameParameter.pfID==t.PlatFormID.YY?(this.msgInfo.type=this.getChannelId(this.channelID),this.msgInfo.msg=s,this.msgInfo.target=n,this.msgInfo.goodsObj=a,this.msgInfo.contentStr=r,t.OtherMgr.ins().yyHallTextFiltering(s,t.YYHallMsgType.chatWinMsg)):t.ChatMgr.ins().s_9_1(this.getChannelId(this.channelID),s,n,a,r)}},i.prototype.onScrollerChange=function(){this.barList.viewport.scrollV=Math.max(Math.min(this.barList.viewport.scrollV,this.barList.viewport.contentHeight-this.barList.height),0);var t=this.barList.viewport.scrollV,e=Math.abs(t)/(this.barList.viewport.contentHeight-this.barList.height),i=e*this.scrollBar.maximum;this.scrollBar.value=this.scrollBar.maximum-i},i.prototype.changeHandler=function(t){var e=t.target.value;this.barList.viewport.scrollV=-(e-(this.barList.viewport.contentHeight-this.barList.height))},i.prototype.onTouchDouble=function(){if(this.chatList.selectedItem){var e=this.chatList.selectedItem;if(""==e.senderName||e.isMe||t.EntityMgr.ins().getPayer.recog==e.playerId)return void egret.TouchEvent.dispatchTouchEvent(t.StageUtils.ins().getStage(),egret.TouchEvent.TOUCH_BEGIN,!0,!0,this.chatInput.x,this.chatInput.y,0,!0);this.btnChannel.label=t.LanguageUtils.language_Chat_Text0,this.channelID=4,this.showPlayerListBtn.text=e.senderName,this.showPlayerListBtn.visible=!0,this.chatInput.x=this.showPlayerListBtn.x+this.showPlayerListBtn.width}},i.prototype.onShowPrivateName=function(t){var e=t[0];this.showPlayerListBtn.text=e.indexText,this.showChatMenu()},i.prototype.showChatMenu=function(){this.btnChannel.label=t.LanguageUtils.language_Chat_Text0,this.channelID=4,this.showPlayerListBtn.visible=!0,this.chatInput.x=this.showPlayerListBtn.width+this.showPlayerListBtn.x},i.prototype.keyDown=function(e){if(e==gamelib.KeyCode.KC_ENTER){if(this.chatInput&&t.LanguageUtils.language_Chat_ShowInput_Tips==this.chatInput.text)return;var i="";if(""!=this.chatInput.text){if(this.chatInput.text.length>120)return void t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ChatInput_OverLen);this.getChannelId(this.channelID)==t.ChannelID.ChannelSecret?(this.priChatMeSendMsg(this.chatInput.text),i=this.showPlayerListBtn.text.toString().trim()):t.ChatMgr.ins().isPrivateChat=!1;var n="",s=void 0;this.isGoodsChat?(n=this.includeGoodsChatInfo,s={isGood:1,series:this.infoTemp.series}):(n=this.chatInput.text,s={isGood:0});var a=this.chatInput.text;Main.gameParameter.pfID==t.PlatFormID.QQGame?(this.msgInfo.type=this.getChannelId(this.channelID),this.msgInfo.msg=n,this.msgInfo.target=i,this.msgInfo.goodsObj=s,this.msgInfo.contentStr=a,t.OtherMgr.ins().qqHallTextFiltering(n,t.QQHallMsgType.msgInfo)):Main.gameParameter.pfID==t.PlatFormID.YY?(this.msgInfo.type=this.getChannelId(this.channelID),this.msgInfo.msg=n,this.msgInfo.target=i,this.msgInfo.goodsObj=s,this.msgInfo.contentStr=a,t.OtherMgr.ins().yyHallTextFiltering(n,t.YYHallMsgType.chatWinMsg)):t.ChatMgr.ins().s_9_1(this.getChannelId(this.channelID),n,i,s,a)}}},i.prototype.qqHallSendMsg=function(e){e.type==t.QQHallMsgType.msgInfo&&this.msgInfo&&t.ChatMgr.ins().s_9_1(this.msgInfo.type,e.Msg,this.msgInfo.target,this.msgInfo.goodsObj,this.msgInfo.contentStr)},i.prototype.yyHallSendMsg=function(e){e.msgType==t.YYHallMsgType.chatWinMsg&&this.msgInfo.contentStr&&t.ChatMgr.ins().s_9_1(this.msgInfo.type,e.msg,this.msgInfo.target,this.msgInfo.goodsObj,this.msgInfo.contentStr)},i.prototype.priChatMeSendMsg=function(e){if(this.showPlayerListBtn.text.toString().trim()!=t.LanguageUtils.language_Chat_Set_Text){var i=this.showPlayerListBtn.text.toString().trim(),n=new t.ChatMessage;n.senderName="/"+i,n.message=e,n.showChannelID=t.ChannelID.ChannelSecret,n.isMe=!0,t.ChatMgr.ins().isPrivateChat=!0,t.ChatMgr.ins().priMessage=n}},i.prototype.getChannelId=function(e){var i=null;switch(e){case 0:i=t.ChannelID.ChannelWorld;break;case 1:i=t.ChannelID.ChannelNear;break;case 2:i=t.ChannelID.ChannelGuild;break;case 3:i=t.ChannelID.ChannelTeam;break;case 4:i=t.ChannelID.ChannelSecret;break;case 5:i=t.ChannelID.ChannelPersonal}return i},i.prototype.getChatMenuId=function(t){var e=-1;switch(t){case 1:e=0;break;case 2:e=2;break;case 3:e=3;break;case 4:e=4}return e},i.prototype.selectIndexChange=function(e){if(this.cruIndex!=this.tabBar.selectedIndex){this.cruIndex=this.tabBar.selectedIndex,t.UserTips.ins().showFightTips(t.LanguageUtils["language_Chat_Show_Tips"+this.cruIndex]),this.updateList(!0);var i=this.getChatMenuId(this.cruIndex);i>-1&&t.EventManager.ins().sendEvent(t.ChatEvent.MENUITEM_SLECT,[{indexItem:i}])}},i.prototype.updateList=function(e){switch(void 0===e&&(e=!1),this.cruIndex){case 0:this.currentState="all",this.removeDataProviderEvent(),this.chatList.dataProvider=null,this.updateView(t.chatListItem,t.ChatModel.ins().getAllChatData()),this.addDataProviderEvent();break;case 1:this.currentState="world",this.removeDataProviderEvent(),this.chatList.dataProvider=null,this.updateView(t.chatListItem,t.ChatModel.ins().getWorldData()),this.addDataProviderEvent();break;case 2:this.currentState="guild",this.removeDataProviderEvent(),this.chatList.dataProvider=null,this.updateView(t.chatListItem,t.ChatModel.ins().getGuildData()),this.addDataProviderEvent();break;case 3:this.currentState="team",this.removeDataProviderEvent(),this.updateView(t.chatListItem,t.ChatModel.ins().getTeamData()),this.addDataProviderEvent();break;case 4:this.currentState="private",this.removeDataProviderEvent(),this.updateView(t.chatListItem,t.ChatModel.ins().getPrivateData()),this.addDataProviderEvent();break;case 5:this.currentState="personal",this.removeDataProviderEvent(),this.updateView(t.chatListItem,t.ChatModel.ins().getPersonalData()),this.addDataProviderEvent();break;case 6:this.currentState="personal",this.removeDataProviderEvent(),this.updateView(t.chatListItem,t.ChatModel.ins().getSystemData()),this.addDataProviderEvent()}this.refushBar()},i.prototype.refushBar=function(){t.TimerManager.ins().isExists(this.refushBarList,this)||t.TimerManager.ins().doTimer(30,3,this.refushBarList,this)},i.prototype.refushBarList=function(){if(this.barList.viewport.validateNow(),this.barList.validateNow(),this.barList.viewport.contentHeight>this.barList.viewport.height){if(this._isRoll){this.barList.viewport.scrollV=this.barList.viewport.contentHeight-this.barList.viewport.height;var t=this.barList.viewport.scrollV,e=Math.abs(t)/(this.barList.viewport.contentHeight-this.barList.height),i=e*this.scrollBar.maximum;this.scrollBar.value=this.scrollBar.maximum-i}}else this._isRoll&&(this.scrollBar.value=0,this.barList.viewport.$setHeight(this.barList.viewport.contentHeight));this.scrollBar.maximum=this.barList.viewport.contentHeight-this.barList.height,this.removeEventListener(egret.Event.ENTER_FRAME,this.refushBarList,this)},i.prototype.refushBarListTop=function(){this.barList.viewport.scrollV=0},i.prototype.addDataProviderEvent=function(){this.chatList.dataProvider&&this.chatList.addEventListener(eui.ItemTapEvent.CHANGING,this.listDataChange,this)},i.prototype.listDataChange=function(){this.refushBar()},i.prototype.removeDataProviderEvent=function(){this.chatList.dataProvider&&this.chatList.removeEventListener(eui.ItemTapEvent.CHANGING,this.listDataChange,this)},i.prototype.updateView=function(t,e){this.chatList.dataProvider=e},i.prototype.keyUp=function(e){e==gamelib.KeyCode.KC_ENTER&&this.chatInput&&t.LanguageUtils.language_Chat_ShowInput_Tips==this.chatInput.text},i.prototype.getExecStrs=function(t){var e=/\[.*?\]\]/g,i=[],n=null;do n=e.exec(t),n&&i.push(n[0]);while(n);return i},i.prototype.onShowGoods=function(e){var i=e[0];if(null!=i){this.infoTemp=i.info;var n=10001,s=i.info;if(s.wItemId!=this.goodsItemId){var a=t.GlobalConfig.StdItems[s.wItemId];this.goodsItemId=s.wItemId;var r=5395542,o="",l="",h="";a&&(r=t.ColorUtil.GOODS_COLOR[a.showQuality],o="|E:1,"+n+","+s.series.createTime+",&C:7232324&T:["+a.name+"]",l="["+a.name+"]",h="|E:"+a.id+","+n+","+s.series.createTime+",&U:&C:"+r+"&T:"+a.name+"|");var p=[],u="";if(this.pattern.test(this.chatInput.text)){this.pattern.lastIndex=0;var c=this.chatInput.text.indexOf(l);if(-1!=c)return;var g=this.getExecStrs(this.chatInput.text);console.log("test");var d=this.chatInput.text.replace(g[0],"|"),m=d.split("|");if(""==m[0]||""==m[1]){var f=this.chatInput.text.search(d);""==m[0]?f>0?(this._tempChatStr=h+m[1],u=o+m[1]):(this._tempChatStr=m[1]+h,u=m[1]+o):f>0?(this._tempChatStr=h+m[0],u=o+m[0]):(this._tempChatStr=m[0]+h,u=m[0]+o)}else this._tempChatStr=m[0]+h+m[1],u=m[0]+o+m[1];this.chatInput.textFlow=t.TextFlowMaker.generateTextFlow1(u)}else this.pattern.lastIndex=0,this.chatInput.text==t.LanguageUtils.language_Chat_ShowInput_Tips?this._tempChatStr=h:(p=this.chatInput.textFlow,this._tempChatStr=this.chatInput.text+h),this.chatInput.textFlow=p.concat(t.TextFlowMaker.generateTextFlow1(o));this.includeGoodsChatInfo=this._tempChatStr,this.isGoodsChat=!0}}},i.prototype.onClearChatInput=function(){-1==this.lastMsg.indexOf("E:}{;")&&(this.chatInput.text="",this.isGoodsChat=!1,this.includeGoodsChatInfo="",this.goodsItemId=0),this.lastMsg=""},i.prototype.chatShowTips=function(e){var i=e[0],n=i.info.split(",");if(-1==n[0]){var s=t.EntityMgr.ins().getPayer;if(s){var a=s.ifFindTask(+n[3],+n[1],+n[2]);if(a&&-1==a.x&&-1==a.y)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips121);s.setTask(+n[3],+n[1],+n[2],-1,-1,0,+n[4])}}else-2==n[0]?t.ViewManager.ins().openViewId(+n[1]):this.seriesId=n[2]},i.prototype.textFocusOn=function(e){e.type==egret.FocusEvent.FOCUS_IN&&this.chatInput&&t.LanguageUtils.language_Chat_ShowInput_Tips==this.chatInput.text&&(this.chatInput.text="")},i.prototype.lookItemFunction=function(e){if(e&&2==t.ChatMgr.ins().chatViewType){t.ChatMgr.ins().chatViewType=0;var i=t.GlobalConfig.StdItems[e.wItemId];if(i){var n=t.TipsType.TIPS_EQUIP;n=i.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(this,n,e,this.clickPoint)}}},i.prototype.showTips=function(e){var i=(this.chatList.selectedItem,e.currentTarget);
i&&this.seriesId&&(this.clickPoint.x=e.stageX,this.clickPoint.y=e.stageY,t.ChatMgr.ins().chatViewType=2,t.ChatMgr.ins().lookItem(this.seriesId),this.seriesId=0)},i.prototype.textChange=function(t){this.textRresolution(t.target.text)},i.prototype.textRresolution=function(t){var e=/\[.*?\]\]/g,i=t.replace(e,this._tempChatStr);this.pattern.test(this.chatInput.text)||(this._tempChatStr="",this.isGoodsChat=!1),this.pattern.lastIndex=0,this.includeGoodsChatInfo=i,this.goodsItemId=0},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.$onClose();for(var s,a=0;43>a;a++)s=this.faceImgGrpup.getChildByName("face_"+a),s.visible=!0,s.source="chat_bqb_"+(a+1),this.removeTouchEvent(s,this.onClickFace);t.MouseScroller.unbind(this.barList),this.removeEvent(),this.removeTouchEvent(this.chatList,this.showTips),this.chatMenuView.destroy(),this.infoTemp=null,this._distance=null,this.chatMenuView=null,t.TimerManager.ins().removeAll(this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stageBegin,this)},i.isCloseNearChannel=!1,i.isCloseGuildChannel=!1,i.isClosePrivateChannel=!1,i}(t.BaseEuiView);t.ChatWinView=e,__reflect(e.prototype,"app.ChatWinView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="Btn6Skin",e}return __extends(e,t),e}(eui.Button);t.UnfoldBtnItem=e,__reflect(e.prototype,"app.UnfoldBtnItem")}(app||(app={}));var app;!function(t){var e;!function(t){t[t.ChannelSecret=0]="ChannelSecret",t[t.ChannelNear=1]="ChannelNear",t[t.ChannelGuild=2]="ChannelGuild",t[t.ChannelTeam=3]="ChannelTeam",t[t.ChannelWorld=4]="ChannelWorld",t[t.ChannelSystemTips=5]="ChannelSystemTips",t[t.ChannelSystem=6]="ChannelSystem",t[t.ChannelActivity=7]="ChannelActivity",t[t.ChannelPersonal=8]="ChannelPersonal"}(e=t.ChannelID||(t.ChannelID={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._actID=-1,i.skinName="ActivityCommonViewSkin",i.name="ActivityCommonView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System61)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e[0]&&(this._actID=e[0]),-1!=this._actID){var n=t.ActvityMgr.ins().getActivityConfigById(this._actID);n&&(this.strLab.textFlow=t.TextFlowMaker.generateTextFlow(n.description))}this.addTouchEvent(this.closeBtn,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.ActivityCommonView=e,__reflect(e.prototype,"app.ActivityCommonView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._changeFunc=null,i._container=t,t?(i.init(),i):i}return __extends(i,e),i.prototype.init=function(){this.hSlider=this._container.getChildByName("hslider"),this.hsLab=this._container.getChildByName("hsLab"),this.hSlider.addEventListener(egret.Event.CHANGE,this.onChange,this),this.hSlider.addEventListener(eui.UIEvent.CHANGE_END,this.onChangeEnd,this)},i.prototype.onChange=function(t){debug.log(t.target.value);var e=t.target.value;this.hsLab.text=e+"%"},i.prototype.onChangeEnd=function(e){debug.log(e.target.value);var i=e.target.value;this.scrollValue=i,this.HsValue=this.scrollValue,this.dispatchEvent(new t.CompEvent(t.CompEvent.SET_HSLIDER,{type:this.type,param:this.scrollValue}))},Object.defineProperty(i.prototype,"HsValue",{set:function(t){this.hsLab.text=Math.floor(t)+"%",this.hSlider.value=t},enumerable:!0,configurable:!0}),i.prototype.callFunc=function(t,e){this._changeFunc=t[0],this._targetObj=e},Object.defineProperty(i.prototype,"minimum",{set:function(t){this.hSlider.minimum=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maximum",{set:function(t){this.hSlider.maximum=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollValue",{get:function(){return this.hSlider.value},set:function(t){this.hSlider.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),i.prototype.destory=function(){this._changeFunc&&(this._changeFunc=null),this._targetObj&&(this._targetObj=null),this.hSlider.removeEventListener(egret.Event.CHANGE,this.onChange,this),this.hSlider.removeEventListener(eui.UIEvent.CHANGE_END,this.onChangeEnd,this),t.DisplayUtils.removeFromParent(this._container)},i}(egret.EventDispatcher);t.ComHSlider=e,__reflect(e.prototype,"app.ComHSlider")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.itemID=0,t.qqHallIsSend=!1,t.skinName="ChangeNameViewSkin",t.name="ChangeNameWin",t.left=t.right=t.top=t.bottom=0,t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System60)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.itemID=e[0]),this.addTouchEvent(this.sureBtn,this.onClick),this.addTouchEvent(this.closeRect,this.onClick),this.observe(t.OtherMgr.ins().post_26_79,this.closeView),this.observe(t.OtherMgr.ins().post_qqHallTextFiltering,this.qqHallSendMsg),this.observe(t.OtherMgr.ins().postYYVerification,this.yyHallSendMsg),this.textInput.maxChars=7},i.prototype.onClick=function(e){switch(e.currentTarget){case this.sureBtn:if(0!=this.itemID)if(""!=this.textInput.text){var i=t.BagMgr.ins().getItemById(this.itemID);i&&(Main.gameParameter.pfID==t.PlatFormID.QQGame?(t.OtherMgr.ins().qqHallTextFiltering(this.textInput.text,t.QQHallMsgType.nameMsg),this.qqHallIsSend=!0):Main.gameParameter.pfID==t.PlatFormID.YY?(t.OtherMgr.ins().yyHallTextFiltering(this.textInput.text,t.YYHallMsgType.changeName),this.qqHallIsSend=!0):t.OtherMgr.ins().send_26_40(i.series,this.textInput.text+""))}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips71);break;case this.closeRect:t.ViewManager.ins().close(this)}},i.prototype.qqHallSendMsg=function(e){if(e.type==t.QQHallMsgType.nameMsg&&this.qqHallIsSend){if(0==e.isLegal){var i=t.BagMgr.ins().getItemById(this.itemID);i&&t.OtherMgr.ins().send_26_40(i.series,e.Msg+"")}else t.UserTips.ins().showUITips("输入的文字不合法");this.qqHallIsSend=!1}},i.prototype.yyHallSendMsg=function(e){if(e.msgType==t.YYHallMsgType.changeName&&this.qqHallIsSend){var i=t.BagMgr.ins().getItemById(this.itemID);i&&t.OtherMgr.ins().send_26_40(i.series,e.msg+""),this.qqHallIsSend=!1}},i.prototype.closeView=function(e){if(0==e)if(ReportMgr.reporting(t.ReportDataEnum.CHANGE_NAME,{},null,!1),t.ViewManager.ins().close(this),Main.gameParameter.pfID==t.PlatFormID.F1||Main.gameParameter.pfID==t.PlatFormID.comi17){var i=Main.gameParameter.pfID==t.PlatFormID.F1?60:17026,n=t.EntityMgr.ins().getPayer,s=n.propSet.getName(),a=this.format_2(),r="?user_id="+t.LocationProperty.openID+"&game_id="+i+"&server_id="+t.LocationProperty.srvid+"&role_id="+t.LocationProperty.roleId+"&role_name="+s+"&create_date="+a+"&ts="+Date.parse((new Date).toString())/1e3,o=new XMLHttpRequest;o.open("GET",window.roleInfoUrl+r,!0),o.send(null)}else if((Main.gameParameter.pfID==t.PlatFormID.gameCat||Main.gameParameter.pfID==t.PlatFormID.gameCatEnd)&&gamelib.DeviceUtils.IsPC){var n=t.EntityMgr.ins().getPayer,s=n.propSet.getName(),l=n.propSet.getLevel(),a=n.propSet.getRoleCreateTime(),h={};h.type="changeName",h.data={level:l,roleId:t.LocationProperty.roleId,roleName:s,serverId:t.LocationProperty.srvid,serverName:t.LocationProperty.srvname,roleCreateTime:a},window.ReportingFunction(h)}},i.prototype.format_2=function(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),s=t.getHours(),a=t.getMinutes(),r=t.getSeconds();return e+"-"+this.formatTimeNum(i)+"-"+this.formatTimeNum(n)+" "+this.formatTimeNum(s)+":"+this.formatTimeNum(a)+":"+this.formatTimeNum(r)},i.prototype.formatTimeNum=function(t,e){return t>=10?t.toString():0==e?t.toString():"0"+t},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.sureBtn,this.onClick),this.removeTouchEvent(this.closeRect,this.onClick)},i}(t.BaseEuiView);t.ChangeNameWin=e,__reflect(e.prototype,"app.ChangeNameWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"title",{set:function(t){this.m_Title=t,this._UpdateTitle()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hideBtn",{set:function(t){this.m_HideBtn=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topBtn",{set:function(t){this.m_TopBtn=!0},enumerable:!0,configurable:!0}),i.prototype._UpdateTitle=function(){this.titleLabel&&this.m_Title&&this.$stage&&(this.titleLabel.text=this.m_Title)},i.prototype.SetReturnButton=function(t){return t?(this.dialogReturnBtn&&(this.cacheReturnBtn=this.dialogReturnBtn,this.dialogReturnBtn.visible=!1),void(this.dialogReturnBtn=t)):void(this.cacheReturnBtn&&(this.dialogReturnBtn=this.cacheReturnBtn,this.dialogReturnBtn.visible=!0,this.cacheReturnBtn=null))},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){var i=this;e.prototype.childrenCreated.call(this),this._UpdateTitle(),this.dialogMask.width=t.StageUtils.ins().getWidth(),this.dialogMask.height=t.StageUtils.ins().getHeight(),this.m_HideBtn&&(this.dialogCloseBtn.visible=!1),this.m_TopBtn&&this.parent&&(this.m_TempTimer=Timer.TimeOut(function(){t.DisplayUtils.SetParent(i.dialogReturnBtn,i.parent)},50))},i.prototype.OnAdded=function(t){for(var e=0,n=i.SHOW_DIALOG_LIST;e<n.length;e++){var s=n[e];s!=this&&(s.dialogMask.visible=!1)}i.SHOW_DIALOG_LIST.push(this),this.m_Target=t,this.dialogCloseBtn&&this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogReturnBtn&&this.dialogReturnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},i.prototype.OnRemoved=function(){for(var t=i.SHOW_DIALOG_LIST.length-1;t>=0;--t){var e=i.SHOW_DIALOG_LIST[t];if(null!=e&&e!=this){e.dialogMask.visible=!0;break}i.SHOW_DIALOG_LIST.splice(t,1)}this.dialogReturnBtn&&this.dialogReturnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogCloseBtn&&this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.m_TempTimer&&this.m_TempTimer.Stop()},i.prototype._Close=function(){return this.mCallback?void this.mCallback():void(this.m_Target&&t.ViewManager.ins().close(this.m_Target))},i.prototype._OnClick=function(t){if(this.dialogReturnBtn&&t.currentTarget==this.dialogReturnBtn&&this._Close(),!this.m_HideBtn)switch(t.currentTarget){case this.dialogMask:if(this.notClickMask)break;case this.dialogCloseBtn:this._Close()}},i.SHOW_DIALOG_LIST=[],i}(eui.Component);t.CommonDialog=e,__reflect(e.prototype,"app.CommonDialog",["eui.UIComponent","egret.DisplayObject"])}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.iconList=[],t.skinName="FriendFunMenuViewSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.gList.itemRenderer=t.FriendFunMenuItem,this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i.prototype.onChange=function(){var e=this,i=this.gList.selectedIndex,n=this.gList.getChildAt(i),s=n.menuBtn.name;switch(s){case"chatBtn":t.EventManager.ins().sendEvent(t.ChatEvent.PLAY_NAME_SLECT,[{indexText:this.itemData.nickName}]);break;case"showInfoBtn":if(t.ViewManager.ins().isShow(t.OtherPlayerView))return;t.EquipItemMgr.ins().sendQueryOthersEquips(this.itemData.roleId);break;case"addFriendBtn":var a=new t.CSFriend_Add_Data;a.id=this.itemData.roleId,a.nickName="",t.FriendMgr.ins().sendAddFriend(a);break;case"delFriendBtn":var r=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt21,this.itemData.nickName));t.CautionView.show(r,function(){this.sendDelInfo(t.FriendState.Friend)},this);break;case"inviteTeamBtn":if(null==this.itemData)return;var o=t.LanguageUtils.language_Team_LeaderinviteJonTeam_tips_0+this.itemData.nickName+t.LanguageUtils.language_Team_LeaderinviteJonTeam_tips_1;t.CautionView.show(o,function(){t.TeamMgr.ins().onSendInviteJoinTeam(e.itemData.roleId,"")},this);break;case"applyTeamBtn":if(null==this.itemData)return;var l=t.LanguageUtils.language_Team_ApplyAddTeam_tips_0+this.itemData.nickName+t.LanguageUtils.language_Team_ApplyAddTeam_tips_1;t.CautionView.show(l,function(){t.TeamMgr.ins().onSendApplyJoinTeam(e.itemData.roleId)},this);break;case"addConBtn":var h=new t.CSFriend_Add_Concern_Data;h.id=this.itemData.roleId,h.nickName="",t.FriendMgr.ins().sendAddConcern(h);break;case"addBlackBtn":var p=new t.CSFriend_Add_Concern_Data;p.id=this.itemData.roleId,p.nickName="",t.FriendMgr.ins().sendAddBlackList(p);break;case"privateTradeLineBtn":var u=new Object;u.sendName=this.itemData.nickName,t.ViewManager.ins().isShow(t.PrivateDealsWin)||t.ViewManager.ins().open(t.PrivateDealsWin,u)}},i.prototype.sendDelInfo=function(e){var i=new t.CSFriend_Del_Data;i.id=this.itemData.roleId,i.nickName="",i.type=e,t.FriendMgr.ins().sendDeleteFirends(i)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.x=e[0].x,this.y=e[0].y;var n=t.StageUtils.ins().getWidth();t.StageUtils.ins().getHeight();if(this.x+this.width>n&&(this.x=n-this.width),null!=e[1]){this.itemData=e[1];var s=t.FriendMgr.ins().findIsFriend(this.itemData.roleId);s?this.iconList=t.LanguageUtils.language_Friend_Menu_List:this.iconList=t.LanguageUtils.language_Friend_Menu_List1,this.height=48*this.iconList.length,this.bg.height=47*this.iconList.length+5,this.y=e[0].y-this.height-5;var a=new eui.ArrayCollection(this.iconList);this.gList.dataProvider=a}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.gList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i}(t.BaseEuiView);t.CommonFunMenuView=e,__reflect(e.prototype,"app.CommonFunMenuView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lastSelected=-1,t._itemID=0,t.curItemData=null,t.userItemInfo=null,t.skinName="CommonGiftSelectWinSKin",t.left=t.right=t.top=t.bottom=0,t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System62),this.itemList.itemRenderer=t.ItemSelectBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(t.MouseScroller.bind(this.itemScroller),this.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listClick,this),this.addTouchEvent(this.rect,this.onClick),this.addTouchEvent(this.receiveBtn,this.onClick),this.observe(t.BagMgr.ins().post_8_7,this.closeView),e[0]&&(this._itemID=e[0]),e[1]&&(this.userItemInfo=e[1]),0!=this._itemID){var n=t.GlobalConfig.StdItems[this._itemID];if(n&&n.select){var s=[];for(var a in n.select)s.push(n.select[a]);this.itemList.dataProvider=new eui.ArrayCollection(s)}}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.rect:t.ViewManager.ins().close(this);break;case this.receiveBtn:if(!this.curItemData)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips73);var i=t.GlobalConfig.BagRemainConfig[10];if(i){var n=t.BagMgr.ins().getBagCapacity(i.bagremain);n?this.userItemInfo&&this.userItemInfo.series&&t.BagMgr.ins().send_8_8(this.userItemInfo.series,!0,this.curItemData.index):t.UserTips.ins().showUITips(i.bagtips)}}},i.prototype.listClick=function(t){this.lastSelected>=0&&this.itemList.getChildAt(this.lastSelected).setSelect(this.itemList.selectedIndex),this.lastSelected=this.itemList.selectedIndex,this.curItemData=t.item,this.itemList.dataProvider&&this.lastSelected>-1&&this.lastSelected<this.itemList.dataProvider.length&&this.itemList.getChildAt(this.lastSelected).setSelect(this.itemList.selectedIndex)},i.prototype.closeView=function(e){e&&1==e.isSuccess&&(t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips40),t.ViewManager.ins().close(this))},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.itemScroller),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.rect,this.onClick),this.removeTouchEvent(this.receiveBtn,this.onClick),this.itemList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.listClick,this)},i}(t.BaseEuiView);t.CommonGiftSelectWin=e,__reflect(e.prototype,"app.CommonGiftSelectWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FuLi4366MicroWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.rewards.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.redPoint.visible=!1,this.microDownBtn.visible=this.receiveBtn.visible=!0;var n=window.loginWay,s=t.PlatformFuliManager.ins().platformFuliData;s&&(n=s.loginWay),Main.gameParameter.pfID==t.PlatFormID.SOUGOU&&(n=t.FuliSogouInfo.loginWay),1==n?(this.microDownBtn.visible=!1,1!=t.DefaultMgr.ins().microReceive&&(this.redPoint.visible=!0)):(this.receiveBtn.visible=!1,1!=t.DefaultMgr.ins().microReceive&&t.EntityMgr.ins().getPayer&&t.EntityMgr.ins().getPayer.propSet&&t.EntityMgr.ins().getPayer.propSet.getLevel()>50&&(this.redPoint.visible=!0)),this.receiveImg.visible=1==t.DefaultMgr.ins().microReceive,this.addTouchEvent(this.receiveBtn,this.onClick),this.addTouchEvent(this.microDownBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick);var a=t.GlobalConfig.NativeRewardConfig;a&&a.reward?this.rewards.dataProvider=new eui.ArrayCollection(a.reward):this.rewards.dataProvider=new eui.ArrayCollection([])},i.prototype.onClick=function(e){var i=t.GlobalConfig.NativeConfig[window.isMicro];switch(e.currentTarget){case this.receiveBtn:t.DefaultMgr.ins().s_0_29();break;case this.microDownBtn:i&&(window.open(i.clientURL),ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1)),t.FuLi4366Mgr.ins().commonIsDown=1;break;case this.closeBtn:t.ViewManager.ins().close(this);var n=window.loginWay,s=t.PlatformFuliManager.ins().platformFuliData;s&&(n=s.loginWay),Main.gameParameter.pfID==t.PlatFormID.SOUGOU&&(n=t.FuliSogouInfo.loginWay)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.receiveBtn,this.onClick),this.removeTouchEvent(this.microDownBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.CommonMicroWin=e,__reflect(e.prototype,"app.CommonMicroWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.init(),t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.init=function(){t.StageUtils.ins().getStage().addEventListener(egret.Event.RESIZE,this.onResize,this),this.group=new eui.Group,this.bgGrp=new eui.Group,this.rect=new eui.Rect,this.rect.fillColor=0,this.rect.fillAlpha=.2,this.group.addChild(this.rect),this.group.addChild(this.bgGrp),this.bgGrp.width=418,this.img=new eui.Image("bg_tipstc_png"),this.img.left=0,this.img.right=-1,this.img.top=-2,this.img.bottom=0,this.img.scale9Grid=new egret.Rectangle(74,116,269,44),this.bgGrp.addChild(this.img),this.title=new eui.Label,this.title.textAlign="center",this.title.textColor=14731679,this.title.size=20,this.title.touchEnabled=!1,this.title.text=t.LanguageUtils.language_System61,this.title.horizontalCenter=.5,this.title.top=5,this.bgGrp.addChild(this.title),this.closBtn=new eui.Image("btn_guanbi"),this.closBtn.right=3,this.closBtn.top=2,this.closBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeView,this),this.bgGrp.addChild(this.closBtn),this.strLab=new eui.Label,this.strLab.left=41,this.strLab.top=55,this.strLab.bottom=69,this.strLab.size=23,this.strLab.width=346,this.strLab.textColor=14731679,this.strLab.touchEnabled=!1,this.strLab.text="",this.bgGrp.addChild(this.strLab)},i.prototype.showTextView=function(e,i){void 0===i&&(i=t.LanguageUtils.language_System61),this.strLab.textFlow=t.TextFlowMaker.generateTextFlow(e),this.title.text=i;var n=this.strLab.height+124;this.rect.width=this.group.width=t.StageUtils.ins().getWidth(),this.rect.height=this.group.height=t.StageUtils.ins().getHeight(),this.bgGrp.x=(t.StageUtils.ins().getWidth()-this.bgGrp.width)/2,this.bgGrp.y=(t.StageUtils.ins().getHeight()-n)/2,t.StageUtils.ins().getStage().addChild(this.group)},i.prototype.closeView=function(){t.DisplayUtils.removeFromParent(this.group)},i.prototype.onResize=function(){(t.StageUtils.ins().getStage().scaleMode==egret.StageScaleMode.NO_SCALE||t.StageUtils.ins().getStage().scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this.group.width=t.StageUtils.ins().getWidth(),this.group.height=t.StageUtils.ins().getWidth(),this.bgGrp.x=(t.StageUtils.ins().getWidth()-this.bgGrp.width)/2,this.bgGrp.y=(t.StageUtils.ins().getHeight()-this.bgGrp.height)/2)},i}(t.BaseClass);t.CommonPopView=e,__reflect(e.prototype,"app.CommonPopView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.txtIcon1.source=this.data+"1",this.txtIcon2.source=this.data+"2"},e}(eui.ItemRenderer);t.CommonTabBarWin=e,__reflect(e.prototype,"app.CommonTabBarWin")}(app||(app={}));var app;!function(t){var e=function(e){function s(t,i,n){var s=e.call(this)||this;return s._currentPage=1,s._maxLength=10,s._firstBtn=t,s._prePageBtn=i,s._nextPageBtn=n,s._dataList=[],s.initUI(),s}return __extends(s,e),s.prototype.initUI=function(){this._prePageBtn&&this._prePageBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageUp,this),this._nextPageBtn&&this._nextPageBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageDown,this),this._firstBtn&&this._firstBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageFirst,this)},s.prototype.onPageUp=function(t){this.btnType=n.Up,this.toPrePage()},s.prototype.onPageDown=function(t){this.btnType=n.Down,this.toNextPage()},s.prototype.onPageFirst=function(t){this.toFirstPage()},s.prototype.toPrePage=function(){this.currentPage-=1},s.prototype.toNextPage=function(){this.currentPage+=1},s.prototype.toFirstPage=function(){this.currentPage=1},Object.defineProperty(s.prototype,"currentPage",{get:function(){return this._currentPage},set:function(t){this.toPage(t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"totalPage",{get:function(){return this._totalPage},enumerable:!0,configurable:!0}),s.prototype.getPageText=function(){return this._totalPage?this._currentPage+" / "+this._totalPage:"0 / 0"},Object.defineProperty(s.prototype,"maxLength",{get:function(){return this._maxLength},set:function(t){this._maxLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),s.prototype.toPage=function(e){1>e&&(e=1),e>=this._totalPage&&(e=this._totalPage),0==this._totalPage&&(e=0),this._currentPage=e,this._curData=[];var n,s=this._currentPage-1<0?0:this._currentPage-1;if(this.type==i.Special){n=s;for(var a=n;a<this.maxLength+n&&a<this._dataList.length;a++)this._curData.push(this._dataList[a])}else{n=s*this.maxLength;for(var a=n;a<this.maxLength+n&&a<this._dataList.length;a++)this._curData.push(this._dataList[a])}this.dispatchEvent(new t.CompEvent(t.CompEvent.PAGE_CHANGE,this._curData))},s.prototype.setData=function(t,e){void 0===e&&(e=null),this._dataList=t;var n=this._dataList.length;this.type==i.Special?this._totalPage=n:this._totalPage=Math.ceil(n/this.maxLength)},s.prototype.destory=function(){this.onRemove()},s.prototype.onRemove=function(){this._prePageBtn&&(this._prePageBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageUp,this),this._prePageBtn=null,t.DisplayUtils.removeFromParent(this._prePageBtn)),this._nextPageBtn&&(this._nextPageBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageDown,this),this._nextPageBtn=null,t.DisplayUtils.removeFromParent(this._nextPageBtn)),this._firstBtn&&(this._firstBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageFirst,this),this._firstBtn=null,t.DisplayUtils.removeFromParent(this._firstBtn)),this._dataList&&(this._dataList.length=0,this._dataList=null),this._curData&&(this._curData.length=0,this._curData=null)},s.prototype.setHide=function(t){this._prePageBtn.visible=t,this._nextPageBtn.visible=t},s}(egret.EventDispatcher);t.FlipPage=e,__reflect(e.prototype,"app.FlipPage");var i;!function(t){t[t.Normal=0]="Normal",t[t.Special=1]="Special"}(i=t.FlipPageType||(t.FlipPageType={}));var n;!function(t){t[t.Up=1]="Up",t[t.Down=2]="Down"}(n=t.BtnType||(t.BtnType={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="CommonViewSkin",i.name="GoToMapTipsView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System61)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e[0]){var n=e[0],s=t.GlobalConfig.Scenes[t.GameMap.mapID],a=s&&s.scencename,r=t.StringUtils.replace(t.LanguageUtils.language_Tips93,a,t.DateUtils.getFormatBySecond(n,t.DateUtils.TIME_FORMAT_19));this.strLab.textFlow=t.TextFlowMaker.generateTextFlow(r)}this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.btnCofim,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnClose:t.ViewManager.ins().close(this);break;case this.btnCofim:}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.btnCofim,this.onClick)},i}(t.BaseEuiView);t.GoToMapTipsView=e,__reflect(e.prototype,"app.GoToMapTipsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.buffCD=0,t}return __extends(i,e),i.prototype.dataChanged=function(){if(this.rect.visible=!1,this.cdLab.text="",this.image.filters=null,this.image.source="buff_"+this.data.icon,this.typeImg.source=2!=this.data.iconshow?"buff_zz1":"buff_zz2",this.typeImg.visible=this.data.iconshow<2,this.buffCD=t.BuffMgr.ins().buffCDInfo[this.data.id],this.buffCD){var e=this.buffCD-egret.getTimer();e>0?(this.rect.visible=!0,this.rect.height=40,this.typeImg.visible=!1,4!=this.data.iconshow&&(this.image.filters=t.FilterUtil.ARRAY_GRAY_FILTER),t.TimerManager.ins().isExists(this.updateRect,this)||(this.updateRect(),t.TimerManager.ins().doTimer(100,0,this.updateRect,this))):t.TimerManager.ins().isExists(this.updateRect,this)&&t.TimerManager.ins().remove(this.updateRect,this)}else t.TimerManager.ins().isExists(this.updateRect,this)&&t.TimerManager.ins().remove(this.updateRect,this)},i.prototype.updateRect=function(){var e=this.buffCD-egret.getTimer();if(this.cdLab.text=Math.floor(e/1e3)+"",1e4>=e){var i=40*(e/1e4);this.rect.height=i>40?40:i}0>=e&&(t.TimerManager.ins().remove(this.updateRect,this),this.rect.visible=!1,this.cdLab.text="",this.typeImg.visible=this.data.iconshow<2,this.image.filters=null)},i.prototype.inItFunction=function(){this.addMouseMoveEvent(this,this.mouseMove),this.addMouseOverEvent(this,this.mouseMove)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=this.image.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,this.data.name,{x:i.x+this.image.width/2,y:i.y+this.image.height/2}),i=null}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),t.TimerManager.ins().isExists(this.updateRect,this)&&t.TimerManager.ins().remove(this.updateRect,this)},i}(t.BaseItemRender);t.ImageBase=e,__reflect(e.prototype,"app.ImageBase")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.onEnter=function(){e.prototype.onEnter.call(this),this.addLayerAt(t.LayerManager.UI_Main,3),this.addLayerAt(t.LayerManager.UI_Tips,7),t.ViewManager.ins().open(t.CreateRoleView2)},i.prototype.onExit=function(){e.prototype.onExit.call(this)},i}(t.BaseScene);t.CreateRoleScene=e,__reflect(e.prototype,"app.CreateRoleScene")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ItemSelectBaseSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.itemData.data=this.data.item,this.isSelect.visible=!1)},e.prototype.setSelect=function(t){this.isSelect.visible=this.itemIndex==t},e}(t.BaseItemRender);t.ItemSelectBase=e,__reflect(e.prototype,"app.ItemSelectBase")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;i._selectJob=0,i._selectSex=0,i.isAutoEnter=!1,i.percentHeight=100,i.percentWidth=100,i.skinName="CreateRole2Skin",i.horizontalCenter=0,i.verticalCenter=0,i.job1.selected.source="login_zs_1",i.job2.selected.source="login_fs_1",i.job3.selected.source="login_ds_1",i.boy.selected.source="login_nan_1",i.girl.selected.source="login_nv_1";var n=t.StageUtils.ins().getHeight();return n<i.group.height?i.group.scaleX=i.group.scaleY=n/i.group.height:i.group.scaleX=i.group.scaleY=1,i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.closeButton.visible=1==e[0],t.SoundManager.ins().createplayBg("chuangjian_mp3"),this.roleMc=t.ObjectPool.pop("app.MovieClip"),this.roleMc.scaleX=this.roleMc.scaleY=1.4,this.roleMc.touchEnabled=!1,this.roleGrp.addChild(this.roleMc),this.selectMc=t.ObjectPool.pop("app.MovieClip"),this.selectMc.blendMode=egret.BlendMode.ADD,this.selectMc.scaleX=this.selectMc.scaleY=1,this.selectMc.touchEnabled=!1,this.roleGrp.addChild(this.selectMc),this.createMc=t.ObjectPool.pop("app.MovieClip"),this.createMc.scaleX=this.createMc.scaleY=1,this.createMc.touchEnabled=!1,this.createMcGrp.addChild(this.createMc),this.createMc.playFileEff(ResDirEnum.RES_DIR_EFF+"create_anniu",-1),window.isTraditional&&(this.bgImg.source="login_bg1_jpg",this.createBtn.icon="login_btn1"),this.selectJob=1,this.selectSex=0,this.job1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.job2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.job3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.boy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.girl.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.createBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.diceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);
var n=t.LocationProperty.nickName;"null"==n||""==n?t.MFRoleMgr.ins().s_255_6(this._selectSex):this.setName(n),this.observe(t.GameApp.ins().postPerLoadProgress,this.perloadProgress),this.observe(t.OtherMgr.ins().post_qqHallTextFiltering,this.qqHallSendCreate),this.observe(t.OtherMgr.ins().postYYVerification,this.yyHallSendCreate),t.TimerManager.ins().removeAll(this),this.nameInput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.nameInput.maxChars=7,gamelib.DeviceUtils.IsMobile||(this.openTime=egret.getTimer()+3e4,this.updateTiem(),t.TimerManager.ins().doTimer(1e3,0,this.updateTiem,this)),e[0]||ReportMgr.reporting(t.ReportDataEnum.CREATE_ROLE_VIEW,{},{uid:t.LocationProperty.openID,roleId:t.LocationProperty.roleId,serverName:t.LocationProperty.srvname},!1)},i.prototype.updateTiem=function(){var t=Math.ceil((this.openTime-egret.getTimer())/1e3);this.timeLab.text=Math.max(t,0)+"秒后自动创建",0>=t&&(this.isAutoEnter=!0,this.sendCreateRole())},i.prototype.createRuselt=function(e){6==Math.abs(e)&&t.MFRoleMgr.ins().s_255_6(this._selectSex)},i.prototype.perloadProgress=function(t){t[0],t[1]},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.$onClose(),this.job1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.job2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.job3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.boy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.girl.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.createBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.diceBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.nameInput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.roleMc.destroy(),this.roleMc=null,this.selectMc.destroy(),this.selectMc=null,t.TimerManager.ins().removeAll(this),t.SoundManager.ins().stopBg()},i.prototype.qqHallSendCreate=function(e){e.type==t.QQHallMsgType.nameMsg&&(0==e.isLegal?t.MFRoleMgr.ins().s_255_4(e.Msg,"",0,this.curSex(),this.curJob()):t.UserTips.ins().showUITips("输入的文字不合法"))},i.prototype.yyHallSendCreate=function(e){e.msgType==t.YYHallMsgType.createRole&&t.MFRoleMgr.ins().s_255_4(e.msg,"",0,this.curSex(),this.curJob())},i.prototype.sendCreateRole=function(){var e=this.nameInput.text.replace(/\s/g,"");if(e.length){t.TimerManager.ins().removeAll(this),this.timeLab.text="";this.nameInput.text;Main.gameParameter.pfID==t.PlatFormID.QQGame?t.OtherMgr.ins().qqHallTextFiltering(this.nameInput.text,t.QQHallMsgType.nameMsg):Main.gameParameter.pfID==t.PlatFormID.YY?t.OtherMgr.ins().yyHallTextFiltering(this.nameInput.text,t.YYHallMsgType.createRole):t.MFRoleMgr.ins().s_255_4(this.nameInput.text,"",0,this.curSex(),this.curJob())}else Main.showTipsPhone?Main.showTipsPhone(t.LanguageUtils.language_Common_191):t.UserTips.ins().showUITips(t.LanguageUtils.language_Common_191)},i.prototype.showUITips=function(e){var i=t.ObjectPool.pop("app.TipsItem");i.cereateLabel(),i.labelText=e,i.labelSize=20;var n=(t.StageUtils.ins().getHeight()-i.levelLab.height)/2-160,s=(t.StageUtils.ins().getWidth()-i.levelLab.width)/2;i.left=s,i.y=n,i.alpha=1,this.addChild(i),egret.Tween.removeTweens(i);var a=egret.Tween.get(i);a.to({y:n-30},100).wait(2500).to({alpha:0},500).call(function(){egret.Tween.removeTweens(this),this.parent.removeChild(this)})},i.prototype.onClick=function(e){switch(e.currentTarget){case this.createBtn:this.sendCreateRole(),t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL);break;case this.diceBtn:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),t.MFRoleMgr.ins().s_255_6(this._selectSex);case this.nameInput:break;case this.boy:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),this.selectSex=0;break;case this.girl:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),this.selectSex=1;break;case this.job1:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),this.selectJob=1;break;case this.job2:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),this.selectJob=2;break;case this.job3:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),this.selectJob=3;break;case this.closeButton:t.ViewManager.ins().close(i)}t.SoundManager.ins().touchBg()},Object.defineProperty(i.prototype,"selectJob",{set:function(t){this._selectJob=t,this.updateRole()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectSex",{set:function(t){this._selectSex=t,this.updateRole()},enumerable:!0,configurable:!0}),i.prototype.updateRole=function(){var e=this,i=this.curJob(),n=this.curSex();t.PlatFormID.HUYU37==Main.gameParameter.pfID&&(this.rect.visible=1==i&&1==n),this.selectMc.visible=!0,this.roleMc.playFileEff(ResDirEnum.RES_DIR_CREATE+"create_"+i+"_"+n,-1),this.selectMc.playFileEff(ResDirEnum.RES_DIR_CREATE+"xuanzhong",1,function(){e.selectMc.visible=!1},!1);for(var s=1;3>=s;s++)this["job"+s].currentState="up";this["job"+i].currentState="selected",0==n?(this.boy.currentState="selected",this.girl.currentState="up"):(this.girl.currentState="selected",this.boy.currentState="up")},i.prototype.setName=function(t){this.nameInput.text=t,this.isAutoEnter&&this.sendCreateRole()},i.prototype.curJob=function(){return this._selectJob},i.prototype.curSex=function(){return this._selectSex},i}(t.BaseEuiView);t.CreateRoleView2=e,__reflect(e.prototype,"app.CreateRoleView2"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Rocker)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ItemSlotSkin2",t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.onOver=function(t){},i.prototype.onDoubleClick=function(t){console.log("double_click")},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.redDot.visible=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchAp,this)},i.prototype.onTouchAp=function(t){this.effect.visible=!0,this.callFunc&&this.callFunc(this.id,this.level,this.state)},i.prototype.setData=function(e,i,n,s,a,r,o,l){void 0===l&&(l=2),this.txtName.visible=!0,this.sign.visible=1==r,this.id=e,this.level=i,this.icon.source=n+"",this._type=l;var h=15774976;this.txtName.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+h+"&T:"+s+"|"),this.effect.visible=1==a,this.state=r,0==i?(this.count.visible=!1,this.count.text=""):(this.count.visible=!0,this.count.text=i+t.LanguageUtils.language_Common_1),1!=l&&(this.redDot.visible=1==t.FashionMgr.ins().isSatisfyItemAct(e)?!0:!1),this.callFunc=o},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(t.ItemSlot);t.ItemSlot2=e,__reflect(e.prototype,"app.ItemSlot2")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="CommonViewSkin",i.name="JumpTipsView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System61),this.strLab.textAlign="center",this.btnClose.label=t.LanguageUtils.language_Common_216},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.strLab.textFlow=t.TextFlowMaker.generateTextFlow(e[0])),this.JumpApp=e[1],this.JumpData=e[2],this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.btnCofim,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnClose:t.ViewManager.ins().open(this.JumpApp,this.JumpData),t.ViewManager.ins().close(this);break;case this.btnCofim:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.btnCofim,this.onClick)},i}(t.BaseEuiView);t.JumpTipsView=e,__reflect(e.prototype,"app.JumpTipsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.nameLabel.text=this.data.name,this.data.zsLevel?this.levelLabel.text=t.AttributeData.job[this.data.job]+" "+this.data.zsLevel+t.LanguageUtils.language_Common_0+this.data.level+t.LanguageUtils.language_Common_1:this.levelLabel.text=t.AttributeData.job[this.data.job]+" "+this.data.level+t.LanguageUtils.language_Common_1,this.hairImage.source="name_"+this.data.job+"_"+this.data.sex,this.selectImg.visible=this.data.select,this.guildLabel.text=t.LanguageUtils.language_Player_Text3+(""==this.data.guildName?"无":this.data.guildName)},i}(eui.ItemRenderer);t.SwitchPlayerItem=e,__reflect(e.prototype,"app.SwitchPlayerItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.iconArr=["icon_jinbi","icon_bangding","icon_yinliang","icon_yuanbao"],t}return __extends(i,e),i.prototype.setCount=function(e){this.count.textFlow=t.TextFlowMaker.generateTextFlow(e)},i.prototype.setData=function(e,i){var n=t.GlobalConfig.NumericalIcon[e];n&&(e>=1&&5>e?this.icon.source=this.iconArr[n.id-1]:this.icon.source=n.icon+"",this.Introduction=n.description,i&&(this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.moneyMove,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.moneyMove,this)))},i.prototype.moneyMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=this.localToGlobal();this.Introduction&&(t.UserTips.ins().shouwTips(this,t.TipsType.TIPS_MONEY,this.Introduction,{x:i.x+this.width/2,y:i.y+this.height/2}),i=null)}},i.prototype.removeEvent=function(){this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.moneyMove,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.moneyMove,this)},i}(t.BaseView);t.moneyPanel=e,__reflect(e.prototype,"app.moneyPanel")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.bind=function(t){gamelib.DeviceUtils.IsMobile||t&&(this.unbind(t),t.addEventListener(mouse.MouseEvent.MOUSE_OUT,e.createMouseWheel,t),t.addEventListener(mouse.MouseEvent.MOUSE_OVER,e.createMouseWheel,t),e.scrolleres[t.hashCode]=e.onScrollerMouse(t))},e.unbind=function(i){gamelib.DeviceUtils.IsMobile||i&&(t.StageUtils.ins().getStage().removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,e.scrolleres[i.hashCode],null),i.removeEventListener(mouse.MouseEvent.MOUSE_OUT,e.createMouseWheel,i),i.removeEventListener(mouse.MouseEvent.MOUSE_OVER,e.createMouseWheel,i),delete e.scrolleres[i.hashCode])},e.onScrollerMouse=function(t){return gamelib.DeviceUtils.IsMobile?void 0:function(e){if(t.viewport&&!(t.viewport.contentHeight<=t.height)){var i=0;e.data>0&&(i=120),e.data<0&&(i=-120),t.viewport.scrollV=Math.max(Math.min(t.viewport.scrollV-i,t.viewport.contentHeight-t.height),0)}}},e.createMouseWheel=function(i){if(!gamelib.DeviceUtils.IsMobile){var n=i.currentTarget;e.scrolleres[n.hashCode]&&(i.type==mouse.MouseEvent.MOUSE_OUT?t.StageUtils.ins().getStage().removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,e.scrolleres[n.hashCode],null):i.type==mouse.MouseEvent.MOUSE_OVER&&t.StageUtils.ins().getStage().addEventListener(mouse.MouseEvent.MOUSE_WHEEL,e.scrolleres[n.hashCode],null))}},e.addCallbackFunction=function(t,i){gamelib.DeviceUtils.IsMobile||(e.scrolleres[t.hashCode]=i)},e.scrolleres=[],e}();t.MouseScroller=e,__reflect(e.prototype,"app.MouseScroller")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.barText.text=this.data+"",this.barText.text&&(3==this.barText.text.length?this.barText.lineSpacing=8:4==this.barText.text.length?this.barText.lineSpacing=0:this.barText.lineSpacing=13)},e}(eui.ItemRenderer);t.NewTabBarItemRenderer=e,__reflect(e.prototype,"app.NewTabBarItemRenderer")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.redadd="FashionMgr.isSatisfyClothesAct",t.redadd2="FashionMgr.isSatisfyArmsAct",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.redDot.visible=!1},i.prototype.dataChanged=function(){this.barText.source=this.data.tabImg+"",this.refresh()},i.prototype.refresh=function(){this.redDot.visible=this.data.isMy&&t.FashionMgr.ins().getFashionRedPoint(this.data.tabType)?!0:!1},i}(eui.ItemRenderer);t.NewTabBarItemRenderer2=e,__reflect(e.prototype,"app.NewTabBarItemRenderer2")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.redDot.visible=!1},e.prototype.dataChanged=function(){this.barText.source=this.data+""},e}(eui.ItemRenderer);t.NewTabBarItemRenderer3=e,__reflect(e.prototype,"app.NewTabBarItemRenderer3")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.redDot.visible=!1},i.prototype.refresh=function(){this.data==t.LanguageUtils.language_System80&&(this.redDot.param=null)},i.prototype.dataChanged=function(){if(this.barText.text=this.data+"",this.barText.text&&(3==this.barText.text.length?this.barText.lineSpacing=8:4==this.barText.text.length?this.barText.lineSpacing=0:this.barText.lineSpacing=13,this.barText.text==t.LanguageUtils.language_System80)){var e="BossMgr.isShowRed";this.redDot.updateShowFunctions=e}},i}(eui.ItemRenderer);t.NewTabBarItemRenderer4=e,__reflect(e.prototype,"app.NewTabBarItemRenderer4")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._showMessages="",t._updateShowFunctions="",t}return __extends(i,e),i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.addMsgListener()},i.prototype.addMsgListener=function(){if(this.removeObserve(),this._showMessages&&this.updateShowFunction){for(var e=this._showMessages.split(";"),i=e.length,n=null,s=null,a=0;i>a;a++)s=e[a].split("."),n=egret.getDefinitionByName("app."+s[0]),n&&n.ins&&n.ins()[s[1]]&&t.MessageCenter.addListener(n.ins()[s[1]],this.delayUpdateShow,this);this.delayUpdateShow()}},i.prototype.delayUpdateShow=function(){!t.TimerManager.ins().isExists(this.updateShow,this)&&this.updateShowFunction&&t.TimerManager.ins().doTimer(500,1,this.updateShow,this)},i.prototype.updateShow=function(){if(t.TimerManager.ins().remove(this.updateShow,this),this.img){var e=this.param?this.updateShowFunction(this.param):this.updateShowFunction();1==e?(this.img.source="common_hongdian",this.visible=!0):2==e?(this.img.source="common_chengdian",this.visible=!0):this.visible=!1}},i.prototype.setRedImg=function(t){1==t?this.img.source="common_hongdian":2==t&&(this.img.source="common_chengdian")},i.prototype.$onRemoveFromStage=function(){t.TimerManager.ins().removeAll(this),this.removeObserve(),e.prototype.$onRemoveFromStage.call(this)},Object.defineProperty(i.prototype,"showMessages",{get:function(){return this._showMessages},set:function(e){t.TimerManager.ins().removeAll(this),this._showMessages=e,this.parent&&this.addMsgListener()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"updateShowFunctions",{get:function(){return this._updateShowFunctions},set:function(e){if(t.TimerManager.ins().removeAll(this),this.updateShowFunction=null,e){var i=e.split("."),n=egret.getDefinitionByName("app."+i[0]);n&&n.ins&&n.ins()[i[1]]&&(this.updateShowFunction=n.ins()[i[1]])}this._updateShowFunctions=e,this.delayUpdateShow()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"param",{get:function(){return this._param},set:function(t){this._param=t,this.delayUpdateShow()},enumerable:!0,configurable:!0}),i}(t.BaseView);t.RedDotControl=e,__reflect(e.prototype,"app.RedDotControl")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._changeFunc=null,i._endFunc=null,i._tapFunc=null,i._container=t,t?(i._container.touchEnabled=!1,i._container.touchChildren=!0,i.init(),i):i}return __extends(i,e),i.prototype.init=function(){var e=this;this._scroller=this._container.getChildByName("scroller"),this._list=this._container.getChildByName("list"),this.vSlider=this._container.getChildByName("verticalSlider"),this.vSlider&&(this.vSlider.visible=!1,this.vSlider.addEventListener(egret.Event.CHANGE,function(t){var i=e.vSlider,n=e._scroller,s=t.target.value,a=n.viewport.contentHeight-n.height-s>=0?n.viewport.contentHeight-n.height-s:i.maximum-s;60>a&&(a-=60),n.viewport.scrollV=Math.max(a,0)},this),t.TimerManager.ins().doNext(this.doNext,this)),this._scroller.scrollPolicyH=eui.ScrollPolicy.OFF,this._scroller.scrollPolicyV=eui.ScrollPolicy.AUTO,this._scroller.verticalScrollBar.autoVisibility=!1,this._scroller.verticalScrollBar.visible=!1,this._scroller.addEventListener(egret.TouchEvent.CHANGE,this.onScrollerChange,this),this._scroller.addEventListener(eui.UIEvent.CHANGE_END,this.onScrollerEnd,this),this._list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this._scroller.viewport=this._list,t.MouseScroller.bind(this._scroller),t.MouseScroller.addCallbackFunction(this._scroller,this.onScrollerMouse.bind(this))},i.prototype.doNext=function(){if(this._scroller){var t=this._scroller;0==t.viewport.contentHeight?(this.vSlider.visible=!1,this.vSlider.value=t.height,this.vSlider.thumb.height=t.height/Math.ceil(t.viewport.measuredHeight/t.height)):(this.vSlider.visible=!1,this.vSlider.value=t.height,this.vSlider.thumb.height=t.height/Math.ceil(t.viewport.contentHeight/t.height))}},i.prototype.onScrollerMouse=function(t){var e=this._scroller,i=this._scroller.viewport.scrollV-t.data;e.viewport.scrollV=Math.max(Math.min(i,e.viewport.contentHeight-e.height),0),this.vSlider&&(this.vSlider.value=this.vSlider.value-e.viewport.scrollV*(e.height/this.vSlider.thumb.height)>=0&&this.vSlider.value-e.viewport.scrollV*(e.height/this.vSlider.thumb.height)>e.height?e.height:this.vSlider.value-i*(e.height/this.vSlider.thumb.height))},Object.defineProperty(i.prototype,"scrollPolicyV",{set:function(t){this._scroller.scrollPolicyV=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollPolicyH",{set:function(t){this._scroller.scrollPolicyH=t},enumerable:!0,configurable:!0}),i.prototype.callFunc=function(t,e){this._changeFunc=t[0],this._endFunc=t[1],this._tapFunc=t[2],this._targetObj=e},Object.defineProperty(i.prototype,"value",{set:function(t){this.vSlider&&(this.vSlider.value=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRenderer",{set:function(t){this._list.itemRenderer=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataProvider",{set:function(t){this._list.dataProvider=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scroller",{get:function(){return this._scroller},enumerable:!0,configurable:!0}),i.prototype.onScrollerChange=function(t){var e=this._scroller,i=e.viewport.scrollV;return i+e.height>=e.viewport.contentHeight?(e.viewport.scrollV=e.viewport.contentHeight-e.height,void this.stopAnimation()):(this.vSlider&&(this.vSlider.value=this.vSlider.value-i*(e.height/this.vSlider.thumb.height)>=0&&this.vSlider.value-i*(e.height/this.vSlider.thumb.height)>e.height?e.height:this.vSlider.value-i*(e.height/this.vSlider.thumb.height)),void(this._changeFunc&&this._changeFunc()))},i.prototype.onScrollerEnd=function(t){this._endFunc&&this._endFunc()},i.prototype.stopAnimation=function(){this._scroller.stopAnimation()},i.prototype.onItemTap=function(t){if(this._tapFunc){var e=t.itemIndex,i=this._list.selectedItem,n=this._list.getElementAt(e),s=new egret.Point(this._list.x+this.list.width,e*n.height+n.height/2);this._tapFunc.call(this._targetObj,i,e,s,n)}},i.prototype.destory=function(){t.TimerManager.ins().removeAll(this),t.MouseScroller.unbind(this._scroller),this._scroller.removeEventListener(eui.UIEvent.CHANGE,this.onScrollerChange,this),this._list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this._scroller.removeEventListener(eui.UIEvent.CHANGE_END,this.onScrollerEnd,this),this.vSlider&&this.vSlider.removeEventListener(egret.Event.CHANGE,function(t){},this),this._scroller.viewport=null,this._scroller=null,this._list.itemRenderer=null,this._list.dataProvider=null,this._list=null,this.vSlider=null,this._changeFunc=null,this._endFunc=null,this._tapFunc=null,this._targetObj=null,t.DisplayUtils.removeFromParent(this._container)},i}(egret.EventDispatcher);t.ScrollViewContainer=e,__reflect(e.prototype,"app.ScrollViewContainer")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.$onAddToStage=function(t,i){this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClikcItem,this),e.prototype.$onAddToStage.call(this,t,i)},i.prototype.$onRemoveFromStage=function(){t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_TAP,this.hideView,this),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClikcItem,this),e.prototype.$onRemoveFromStage.call(this)},i.prototype.onClikcItem=function(t){this._clickFunction&&this._clickFunction(t.item),this.hideView()},Object.defineProperty(i.prototype,"setClickFunction",{set:function(t){this._clickFunction=t},enumerable:!0,configurable:!0}),i.prototype.itemRenderer=function(t,e){void 0===e&&(e="MainSelectItem"),this.list.itemRenderer=t,this.list.itemRendererSkinName=e},Object.defineProperty(i.prototype,"dataProvider",{set:function(t){this.list.dataProvider=new eui.ArrayCollection(t)},enumerable:!0,configurable:!0}),i.prototype.hideView=function(e){void 0===e&&(e=null),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_TAP,this.hideView,this),this.visible=!1},i.prototype.showView=function(){t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_TAP,this.hideView,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.visible=!0},i.prototype.onEnterFrame=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideView,this)},Object.defineProperty(i.prototype,"selectList",{get:function(){return this.list},enumerable:!0,configurable:!0}),i.prototype.setBg=function(t,e){this.bg.source=t,this.bg.scale9Grid=e},i.prototype.close=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this._clickFunction=null,this.hideView(),t.DisplayUtils.removeFromParent(this.list)},Object.defineProperty(i.prototype,"direction",{set:function(t){2==t?(this.group.bottom=null,this.group.top=0):(this.group.top=null,this.group.bottom=0)},enumerable:!0,configurable:!0}),i}(t.BaseView);t.SelectInput=e,__reflect(e.prototype,"app.SelectInput")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ItemBaseSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addMouseMoveEvent(this,this.mouseMove),this.addMouseOverEvent(this,this.mouseMove)},i.prototype.dataChanged=function(){if(this.itemCount.visible=this.imgNuBg.visible=!1,this.itemBg.source="quality_0",this.data)if(0==this.data.type){var e=t.GlobalConfig.StdItems[this.data.id];e&&(this.itemBg.source="quality_"+e.showQuality,this.itemIcon.source=e.icon+"",this.itemCount.text=this.data.count>1?this.data.count:"",this.imgNuBg.source=e.iseffect?"yan_"+e.iseffect:"",this.imgNuBg.visible=e.iseffect?!0:!1)}else{var i=t.GlobalConfig.NumericalIcon[this.data.type];i&&(this.itemIcon.source=i.icon+"")}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(this.data){var n=i.localToGlobal();if(0==this.data.type){var s=t.GlobalConfig.StdItems[this.data.id];if(s){var a=t.TipsType.TIPS_EQUIP;a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2})}}else{var r=t.CurrencyUtils.getCurrencyNameIcon(this.data.type,this.data.id);r&&r[2]&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,r[2],{x:n.x+i.width/2,y:n.y+i.height/2})}n=null}i=null}},i}(t.BaseItemRender);t.SynthesisItemBase=e,__reflect(e.prototype,"app.SynthesisItemBase")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._container=t,i.tabElements=[],i.init(),i}return __extends(i,e),i.prototype.init=function(){var e;if(null!=this._container){var i,n=this._container.numChildren;for(e=0;n>e&&(i=this._container.getChildByName("tab_"+e),i);e++)i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchHandler,this),this.tabElements.push(new t.TabElement(i))}},i.prototype.onTouchHandler=function(t){t.stopImmediatePropagation()},i.prototype.onTouchTap=function(e){var i,n;if(!this._currTab||this._currTab.skin!=e.currentTarget){for(n=0;n<this.tabElements.length;n++)i=this.tabElements[n],i.skin==e.currentTarget?(i["goto"](2),this._currIndex=n,this._currTab=i):i["goto"](1);this.dispatchEvent(new t.CompEvent(t.CompEvent.TAB_CHANGE))}},i.prototype.addElement=function(e){this.tabElements.push(new t.TabElement(e))},Object.defineProperty(i.prototype,"currIndex",{get:function(){return this._currIndex},set:function(e){var i,n;if(i=this.tabElements[e],!this._currTab||this._currTab!=i){for(i["goto"](2),this._currIndex=e,this._currTab=i,n=0;n<this.tabElements.length;n++)n!=e&&this.tabElements[n]["goto"](1);this.dispatchEvent(new t.CompEvent(t.CompEvent.TAB_CHANGE))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currTab",{get:function(){return this._currTab},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){for(var t,e=0,i=this.tabElements.length;i>e;e++)t=this.tabElements[e],t.skin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},i.prototype.removeEvent=function(){for(var t,e=0,i=this.tabElements.length;i>e;e++)t=this.tabElements[e],t.skin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},i.prototype.destory=function(){for(var e,i=0,n=this.tabElements.length;n>i;i++)e=this.tabElements[i],e.skin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),e.skin.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),e.skin.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchHandler,this),e.destory(),e=null;this.tabElements.length=0,this.tabElements=null,this._container.numChildren>0&&this._container.removeChildren(),t.DisplayUtils.removeFromParent(this._container)},i}(egret.EventDispatcher);t.TabBar=e,__reflect(e.prototype,"app.TabBar")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._container=t,this.init()}return e.prototype.init=function(){this._nameTf=this._container.getChildByName("nameTf"),this._selectImg=this._container.getChildByName("select"),this._normalImg=this._container.getChildByName("normal")},Object.defineProperty(e.prototype,"skin",{get:function(){return this._container},enumerable:!0,configurable:!0}),e.prototype["goto"]=function(e){1==e?(this._normalImg.visible=!0,this._selectImg.visible=!1,this._nameTf.textColor=t.ColorUtil.ROLE_TAB_SELECTED_COLOR):(this._selectImg.visible=!0,this._normalImg.visible=!1,this._nameTf.textColor=t.ColorUtil.ROLE_TAB_COLOR)},e.prototype.destory=function(){this._container.numElements>0&&this._container.removeChildren(),t.DisplayUtils.removeFromParent(this._container)},e}();t.TabElement=e,__reflect(e.prototype,"app.TabElement")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.touchEnabled=!0,t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.btn_close&&(this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickHandler,this))},i.prototype.onClickHandler=function(e){e.type==egret.TouchEvent.TOUCH_BEGIN?e.stopPropagation():(t.SoundManager.ins().playEffect(t.SoundUtil.VIEW),this._func&&this._func(),this._parent&&(!this._parent.parent||this._parent.parent instanceof t.BaseEuiLayer?t.ViewManager.ins().close(this._parent):t.ViewManager.ins().close(this._parent.parent)))},i.prototype.setCurrentState=function(t){void 0===t&&(t="default"),this.currentState=t},i.prototype.setParent=function(t){this._parent=t},i.prototype.setFunc=function(t){this._func=t},i.prototype.setTitle=function(t){this.txt_name&&(this.txt_name.text=t)},i.prototype.destroy=function(){this.btn_close&&(this.btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),this.btn_close.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickHandler,this)),this._parent=null,t.DisplayUtils.removeFromParent(this)},i}(eui.Component);t.UIViewFrame=e,__reflect(e.prototype,"app.UIViewFrame",["eui.UIComponent","egret.DisplayObject"]);var i;!function(t){t[t.ShortcutKeyCancel=0]="ShortcutKeyCancel",t[t.ShortcutKeyNoSet=1]="ShortcutKeyNoSet",t[t.ShortcutKeyOk=2]="ShortcutKeyOk"}(i=t.UIViewFrameType||(t.UIViewFrameType={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="VersionUpdateSkin",t.touchEnabled=!1,t}return __extends(i,e),i.openView=function(){var e=new i;t.StageUtils.ins().getStage().addChildAt(e,100),e.open()},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.StageUtils.ins().getStage().addEventListener(egret.Event.RESIZE,this.onResize,this),this.addTouchEvent(this.closeBtn,this.onClick),this.strLab.text=t.LanguageUtils.language_Common_241,this.onResize()},i.prototype.onResize=function(){var e=t.StageUtils.ins().getWidth(),i=t.StageUtils.ins().getHeight();this.width=e,this.height=i},i.prototype.onClick=function(){location.reload()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.StageUtils.ins().getStage().removeEventListener(egret.Event.RESIZE,this.onResize,this),this.removeTouchEvent(this.closeBtn,this.onClick),t.DisplayUtils.removeFromParent(this)},i}(t.BaseEuiView);t.VersionUpdateView=e,__reflect(e.prototype,"app.VersionUpdateView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.iconArr=[],t.skinName="YYPlatformFuLiWinSkin",t}return __extends(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,this.iconDisplay.source=t},enumerable:!0,configurable:!0}),i.prototype.addBtnArr=function(){for(var e=0;e<this.arrGrp.numChildren;e++)this.arrGrp.getChildAt(e).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);this.iconArr=[],this.arrGrp.removeChildren();for(var i in t.GlobalConfig.YYPlayFunConfig){if(1==t.GlobalConfig.YYPlayFunConfig[i].id){var n=this.yyDaTingBtn();
if(0==n)continue}if(3==t.GlobalConfig.YYPlayFunConfig[i].id){var s=this.YYwxBtn();if(0==s)continue}var a=new t.MainButton;a.icon=t.GlobalConfig.YYPlayFunConfig[i].icon,a.view=t.GlobalConfig.YYPlayFunConfig[i].view,a.type=t.GlobalConfig.YYPlayFunConfig[i].id,this.iconArr.push(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.arrGrp.addChild(a)}},i.prototype.YYwxBtn=function(){var e=t.ActvityMgr.ins().getActivityInfo(10027);return e?1:(t.ViewManager.ins().isShow(t.YYWxGiftWin)&&t.ViewManager.ins().close(t.YYWxGiftWin),0)},i.prototype.yyDaTingBtn=function(){var e=t.ActvityMgr.ins().YYInfo;for(var i in t.GlobalConfig.YYPlayFunConfig)if(1==t.GlobalConfig.YYPlayFunConfig[i].id){if(!e)return 1;if(!e.YYNoviceGift)return 1;var n=1,s=0;for(var a in t.GlobalConfig.YYMemberConfig.loginGift)if(s=t.MathUtils.getValueAtBit(e.YYLoginGift,n),n++,!s)return 1;n=1;for(var a in t.GlobalConfig.YYMemberConfig.levelGift)if(s=t.MathUtils.getValueAtBit(e.YYLevelGift,n),n++,!s)return 1;n=1;for(var a in t.GlobalConfig.YYMemberConfig.nobleGift)if(s=t.MathUtils.getValueAtBit(e.YYNobleGift,n),n++,!s)return 1;return t.ViewManager.ins().isShow(t.YYLobbyPrivilegesWin)&&t.ViewManager.ins().close(t.YYLobbyPrivilegesWin),0}},i.prototype.updateBtnRed=function(){for(var e=0,i=0,n=0;n<this.iconArr.length;n++)if(this.iconArr[n].redImage.visible=!1,this.iconArr[n].type)if(1==this.iconArr[n].type)for(var s=1;4>=s;s++)e=t.ActvityMgr.ins().updateYYRed(this.iconArr[n].type,s),e>0&&(this.iconArr[n].redImage.visible=!0,i=e);else if(2==this.iconArr[n].type)for(var s=1;3>=s;s++)e=t.ActvityMgr.ins().updateYYRed(this.iconArr[n].type,s),e>0&&(this.iconArr[n].redImage.visible=!0,i=e);return i},i.prototype.onClick=function(e){t.ActvityMgr.ins().YYClick=!0,e.currentTarget&&e.currentTarget.view&&t.ViewManager.ins().open(e.currentTarget.view)},i}(eui.Component);t.YYPlatformFuLiWin=e,__reflect(e.prototype,"app.YYPlatformFuLiWin")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._openViewCfg=null,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.btn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},i.prototype.onTouch=function(e){if(this._openViewCfg){var i=this._openViewCfg.view.split(";"),n=0;for(i.length;n<i.length;n++){var s=i[n],a=this._openViewCfg.WindowRoute[n];"app.ShopView"==s||"app.FlyShoesView"==s?t.ViewManager.ins().isShow(s)||t.ViewManager.ins().open(s,a[0],a[1]):t.ViewManager.ins().isShow(s)||t.ViewManager.ins().open(s,a),t.ViewManager.ins().isShow(t.GaimItemWin)&&t.ViewManager.ins().close(t.GaimItemWin)}}},i.prototype.dataChanged=function(){this.data&&(this._openViewCfg=t.GlobalConfig.OpenWindowConfig[this.data],this._openViewCfg&&(this.btn.icon=this._openViewCfg.icon+""))},i}(t.BaseItemRender);t.GaimItemListItem=e,__reflect(e.prototype,"app.GaimItemListItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._itemID=0,i._shopCfg=null,i.pos=null,i.size=null,i.maxNum=999,i._hashCode=0,i.curNum=0,i.skinName="GaimItemWinSKin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.viewList.itemRenderer=t.GaimItemListItem},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e&&(e[0]&&(this._itemID=e[0],e[0].itemId&&(this._itemID=e[0].itemId),e[0].needNum&&(this.curNum=e[0].needNum>0?e[0].needNum:0)),e[1]&&(this.pos=e[1]),e[2]&&(this.size=e[2]),e[3]&&(this._hashCode=e[3])),this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.addBtn,this.onClick),this.addTouchEvent(this.jianBtn,this.onClick),this.addTouchEvent(this.buyBtn,this.onClick),this.inputNum.addEventListener(egret.FocusEvent.FOCUS_IN,this.textFocusOn,this),this.inputNum.addEventListener(egret.FocusEvent.CHANGE,this.textChange,this),this.observe(t.DefaultMgr.ins().post_gaimItemView,this.closeView),this.setData()},i.prototype.closeView=function(e){e==this._hashCode&&t.ViewManager.ins().close(this)},i.prototype.initViewPos=function(){e.prototype.initViewPos.call(this),this.pos&&this.size&&this.setPos()},i.prototype.setPos=function(){var t=this.formatView(0,.5*this.size.width);isNaN(t)||(this.x=this.pos.x+Math.round((this.size.width-this.width)/2+t));var e=this.formatView(0,.5*this.size.height);isNaN(e)||(this.y=this.pos.y+Math.round((this.size.height-this.height)/2+e))},i.prototype.formatView=function(t,e){if(!t||"number"==typeof t)return t;var i=t,n=i.indexOf("%");if(-1==n)return+i;var s=+i.substring(0,n);return.01*s*e},i.prototype.textFocusOn=function(t){this.inputNum.text=""},i.prototype.textChange=function(t){this.curNum=+t.target.text},i.prototype.setData=function(){if(0!=this._itemID){var e=t.GlobalConfig.StdItems[this._itemID];e&&(this.itemBg.source="quality_"+e.showQuality,this.itemIcon.source=e.icon+"",this.itemName.text=e.name+"",this.itemNu.source=e.iseffect?"yan_"+e.iseffect:"",this.itemNu.visible=e.iseffect?!0:!1);var i=t.GlobalConfig.GetItemRouteConfig[this._itemID];if(i){this.itemDesc.textFlow=t.TextFlowMaker.generateTextFlow(i.itemdesc);var n=[];for(var s in i.Route){var a=t.GlobalConfig.OpenWindowConfig[i.Route[s]];if(a){if(13==a.id){var r=t.ActvityMgr.ins().getActivityInfo(t.ActvityInfoEnum.firstCharge);if(!r)continue;if(r.info.sum&&r.info.state>=7)continue}a.openParam?t.ViewManager.ins().isCheckOpen(a.openParam)&&n.push(i.Route[s]):n.push(i.Route[s])}}if(this.viewList.dataProvider=new eui.ArrayCollection(n),i.shopid){if(this.inputNum.text=this.curNum+"",this.buyGrp.visible=!0,i.shopid.shoptype&&i.shopid.Tabshop&&i.shopid.shopid){var o=i.shopid.shoptype,l=i.shopid.Tabshop,h=i.shopid.shopid;if(this._shopCfg=t.GlobalConfig.ShopConfig[o][l][h],this._shopCfg){this._shopCfg.Maxbatchbuy&&(this.maxNum=this._shopCfg.Maxbatchbuy);var p=t.CurrencyUtils.getCurrencyNameIcon(this._shopCfg.price.type,this._shopCfg.price.id);p&&(this.priceLab.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Omission_txt122+":|C:0x28ee01&T:"+this._shopCfg.price.count+p[0]+"|"))}}}else this.buyGrp.visible=!1}}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnClose:t.ViewManager.ins().close(this);break;case this.addBtn:this.curNum+=1,this.curNum>this.maxNum&&(this.curNum=this.maxNum),this.inputNum.text=this.curNum+"";break;case this.jianBtn:this.curNum-=1,this.curNum<0&&(this.curNum=0),this.inputNum.text=this.curNum+"";break;case this.buyBtn:this._shopCfg?0!=this.curNum?(t.ShopMgr.ins().sendBuyShop(this._shopCfg.shoptype,this._shopCfg.Tabshop,this._shopCfg.shopid,0,this.curNum),t.ViewManager.ins().close(this)):t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt80):t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt81)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this._hashCode=-1,this.inputNum.removeEventListener(egret.FocusEvent.FOCUS_IN,this.textFocusOn,this),this.inputNum.removeEventListener(egret.FocusEvent.CHANGE,this.textChange,this),this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.addBtn,this.onClick),this.removeTouchEvent(this.jianBtn,this.onClick),this.removeTouchEvent(this.buyBtn,this.onClick)},i}(t.BaseEuiView);t.GaimItemWin=e,__reflect(e.prototype,"app.GaimItemWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="GetPropsItemSkin",t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this,this.onCheck)},i.prototype.onCheck=function(){1==this.data.check?this.backFunc&&this.backFunc.call(this.target,this.view,this.windowRoute):this.tips&&t.UserTips.ins().showUITips(this.tips)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var t=this.data;this.windowRoute=t.route,this.txtName.text=t.moudleName,this.target=t.target,this.backFunc=t.backFunc,this.view=t.view,this.tips=t.tips,this.groupCheck.visible="挂机"!=t.moudleName}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this,this.onCheck),this.backFunc=null},i}(t.BaseItemRender);t.GetPropsItemRender=e,__reflect(e.prototype,"app.GetPropsItemRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.listArr=[],i.viewFrames=["default","default1","default2","default3","default5"],i.skinName="GetPropsViewSkin",i.name="GetPropsView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.scroller.scrollPolicyV=eui.ScrollPolicy.AUTO,this.scroller.verticalScrollBar.autoVisibility=!1,this.scroller.verticalScrollBar.visible=!1,this.scrollerDesc.scrollPolicyH=eui.ScrollPolicy.OFF,this.scrollerDesc.scrollPolicyV=eui.ScrollPolicy.AUTO,this.scrollerDesc.verticalScrollBar.autoVisibility=!1,this.scrollerDesc.verticalScrollBar.visible=!1,t.MouseScroller.bind(this.scroller),t.MouseScroller.bind(this.scrollerDesc),this.itemArrayCollection=new eui.ArrayCollection},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.list.itemRenderer=t.GetPropsItemRender,this.list.dataProvider=this.itemArrayCollection,this.consume=e[0].consume,this.route=e[0].route,this.setItem(),this.setData(),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System71))},i.prototype.backFunc=function(e,i){if(e){var n=e.split(";"),s=0;for(n.length;s<n.length;s++){var a=n[s],r=i[s];"app.ShopView"==a?t.ViewManager.ins().isShow(a)||t.ViewManager.ins().open(a,r[0],r[1]):t.ViewManager.ins().isShow(a)||t.ViewManager.ins().open(a,r)}}},i.prototype.setItem=function(){var e;this.consume&&(this.consume[0]?(e=t.CurrencyUtils.getCurrencyNameIcon(this.consume[0].type,this.consume[0].id),e&&this.itemSlot.setGetProps(this.consume[0])):(e=t.CurrencyUtils.getCurrencyNameIcon(this.consume.type,this.consume.id),e&&this.itemSlot.setGetProps(this.consume))),e&&e[2]?this.txtDesc.text=e[2]:this.txtDesc.text=""},i.prototype.setData=function(){this.listArr?this.listArr.length=0:this.listArr=[];for(var e,i=0,n=this.route.length;n>i;i++){var s=this.route[i],a=t.GlobalConfig.OpenWindowConfig[s];a.openParam?(a.openParam.level||(a.openParam.level=0),a.openParam.openDay||(a.openParam.openDay=0),a.openParam.zsLevel||(a.openParam.zsLevel=0),a.openParam.needGuild||(a.openParam.needGuild=0),e=t.ViewManager.ins().isCheckAllOpen(a.openParam)?1:0):e=1,this.listArr.push({view:a.view,route:a.WindowRoute,moudleName:a.moudleName,target:this,backFunc:this.backFunc,check:e,tips:a.tips})}this.itemArrayCollection.replaceAll(this.listArr),this.dragDropUI.setCurrentState(this.viewFrames[this.listArr.length-1])},i.getPropsTxt=function(e,i){if(e){var n=t.GlobalConfig.GetItemRouteConfig[i];if(!n)return void(e.visible=!1);e.visible=!0;var s=t.GlobalData.sectionOpenDay,a=n.itemstr;e.textFlow=null,n.openParam&&s<n.openParam.openDay?e.visible=!1:n.Route&&n.itemstr?(e.textFlow=t.TextFlowMaker.generateTextFlow("<a><u>"+a+"<u></a>"),e.visible=!0):e.visible=!1}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.scroller),t.MouseScroller.unbind(this.scrollerDesc),this.dragDropUI.destroy(),this.dragDropUI=null,this.list.removeChildren(),this.listArr.length=0,this.listArr=null},i}(t.BaseEuiView);t.GetPropsView=e,__reflect(e.prototype,"app.GetPropsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.formatMiniDateTime=function(e){return t.GameConst.MiniDateTimeBase+1e3*(2147483647&e)},e}();t.GlobalFunc=e,__reflect(e.prototype,"app.GlobalFunc")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="MonsterTalkSkin",t.name="MonsterTalkView",t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.visible=!0,this.txtDesc.text=e[0],this.x=e[1],this.y=e[2],t.TimerManager.ins().isExists(this.delayIntervalShow,this)||t.TimerManager.ins().doTimer(8e3,1,this.delayIntervalShow,this)},i.prototype.delayIntervalShow=function(){this.close()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.TimerManager.ins().remove(this.delayIntervalShow,this),this.visible=!1},i}(t.BaseEuiView);t.MonsterTalkView=e,__reflect(e.prototype,"app.MonsterTalkView")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.AchieveConfig=e,__reflect(e.prototype,"app.AchieveConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.AchievePageConfig=e,__reflect(e.prototype,"app.AchievePageConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.AchieveTypeConfig=e,__reflect(e.prototype,"app.AchieveTypeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ACTcrossServerTabCfg=e,__reflect(e.prototype,"app.ACTcrossServerTabCfg")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivitiesConf=e,__reflect(e.prototype,"app.ActivitiesConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivitiesShowConf=e,__reflect(e.prototype,"app.ActivitiesShowConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10001Config=e,__reflect(e.prototype,"app.Activity10001Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10002Config=e,__reflect(e.prototype,"app.Activity10002Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10003Config=e,__reflect(e.prototype,"app.Activity10003Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10004Config=e,__reflect(e.prototype,"app.Activity10004Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10005Config=e,__reflect(e.prototype,"app.Activity10005Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10006Config=e,__reflect(e.prototype,"app.Activity10006Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10007Config=e,__reflect(e.prototype,"app.Activity10007Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10009Config=e,__reflect(e.prototype,"app.Activity10009Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10010Config=e,__reflect(e.prototype,"app.Activity10010Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10014Config=e,__reflect(e.prototype,"app.Activity10014Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10015Config=e,__reflect(e.prototype,"app.Activity10015Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10017Config=e,__reflect(e.prototype,"app.Activity10017Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10018Config=e,__reflect(e.prototype,"app.Activity10018Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10019Config=e,__reflect(e.prototype,"app.Activity10019Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10020Config=e,__reflect(e.prototype,"app.Activity10020Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10021Config=e,__reflect(e.prototype,"app.Activity10021Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity10Config=e,__reflect(e.prototype,"app.Activity10Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity11Config=e,__reflect(e.prototype,"app.Activity11Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity12Config=e,__reflect(e.prototype,"app.Activity12Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity13Config=e,__reflect(e.prototype,"app.Activity13Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity14Config=e,__reflect(e.prototype,"app.Activity14Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity14shopConfig=e,__reflect(e.prototype,"app.Activity14shopConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity14tabConfig=e,__reflect(e.prototype,"app.Activity14tabConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity15Config=e,__reflect(e.prototype,"app.Activity15Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity17Config=e,__reflect(e.prototype,"app.Activity17Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity18Config=e,__reflect(e.prototype,"app.Activity18Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity19Config=e,__reflect(e.prototype,"app.Activity19Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity1Config=e,__reflect(e.prototype,"app.Activity1Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity21Config=e,__reflect(e.prototype,"app.Activity21Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity26Config=e,__reflect(e.prototype,"app.Activity26Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity2Config=e,__reflect(e.prototype,"app.Activity2Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity3Config=e,__reflect(e.prototype,"app.Activity3Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity4Config=e,__reflect(e.prototype,"app.Activity4Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity5Config=e,__reflect(e.prototype,"app.Activity5Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity6Config=e,__reflect(e.prototype,"app.Activity6Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity7Config=e,__reflect(e.prototype,"app.Activity7Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity8Config=e,__reflect(e.prototype,"app.Activity8Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Activity9Config=e,__reflect(e.prototype,"app.Activity9Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivityAscriptionConf=e,__reflect(e.prototype,"app.ActivityAscriptionConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivityAutoConfig=e,__reflect(e.prototype,"app.ActivityAutoConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivityCompetitionConf=e,__reflect(e.prototype,"app.ActivityCompetitionConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivityDrawConf=e,__reflect(e.prototype,"app.ActivityDrawConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivityNoticeConfig=e,__reflect(e.prototype,"app.ActivityNoticeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivityOpenServiceConf=e,__reflect(e.prototype,"app.ActivityOpenServiceConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivityPayConf=e,__reflect(e.prototype,"app.ActivityPayConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivityPopupConfig=e,__reflect(e.prototype,"app.ActivityPopupConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivityPromptConfig=e,__reflect(e.prototype,"app.ActivityPromptConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivitysetConfig=e,__reflect(e.prototype,"app.ActivitysetConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ActivityWelfareConf=e,__reflect(e.prototype,"app.ActivityWelfareConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.AppraisalMainConfig=e,__reflect(e.prototype,"app.AppraisalMainConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.AttrLookupConfig=e,__reflect(e.prototype,"app.AttrLookupConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.BagRemainConfig=e,__reflect(e.prototype,"app.BagRemainConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.BasicsSettingmConfig=e,__reflect(e.prototype,"app.BasicsSettingmConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.BlessConfig=e,__reflect(e.prototype,"app.BlessConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.BlesseConstConfig=e,__reflect(e.prototype,"app.BlesseConstConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.BlessLuck=e,__reflect(e.prototype,"app.BlessLuck")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.BlueDiamondDailyConfig=e,__reflect(e.prototype,"app.BlueDiamondDailyConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.BossConfig=e,__reflect(e.prototype,"app.BossConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.type=0,this.group=0}return t}();t.BuffConf=e,__reflect(e.prototype,"app.BuffConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ChatSystemConfig=e,__reflect(e.prototype,"app.ChatSystemConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.CircleLevel=e,__reflect(e.prototype,"app.CircleLevel")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.CrossServerGroupConf=e,__reflect(e.prototype,"app.CrossServerGroupConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.CustomisedTitleConfig=e,__reflect(e.prototype,"app.CustomisedTitleConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.demonsbodyConfig=e,__reflect(e.prototype,"app.demonsbodyConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.demonsconstConfig=e,__reflect(e.prototype,"app.demonsconstConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.demonslevelConfig=e,__reflect(e.prototype,"app.demonslevelConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.DemonsReplaceConfig=e,__reflect(e.prototype,"app.DemonsReplaceConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.DummyBuildConfig=e,__reflect(e.prototype,"app.DummyBuildConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.DummyNameConfig=e,__reflect(e.prototype,"app.DummyNameConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.DummyPlayerConfig=e,__reflect(e.prototype,"app.DummyPlayerConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.Button=0}return t}();t.EditionConf=e,__reflect(e.prototype,"app.EditionConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.EffectsConf=e,__reflect(e.prototype,"app.EffectsConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.EquipStrengthenConfig=e,__reflect(e.prototype,"app.EquipStrengthenConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.EquipValuation=e,__reflect(e.prototype,"app.EquipValuation")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ExchangCircleConfig=e,__reflect(e.prototype,"app.ExchangCircleConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.FashionattributeConfig=e,__reflect(e.prototype,"app.FashionattributeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.FashionsetConfig=e,__reflect(e.prototype,"app.FashionsetConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.FashionupgradeConfig=e,__reflect(e.prototype,"app.FashionupgradeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.FlyLevel=e,__reflect(e.prototype,"app.FlyLevel")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.FlyTable=e,__reflect(e.prototype,"app.FlyTable")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ForgeBaseConfig=e,__reflect(e.prototype,"app.ForgeBaseConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ForgeConfig=e,__reflect(e.prototype,"app.ForgeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.FourStarsConfig=e,__reflect(e.prototype,"app.FourStarsConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.FubenType1Conf=e,__reflect(e.prototype,"app.FubenType1Conf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.FubenType2Conf=e,__reflect(e.prototype,"app.FubenType2Conf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.FubenType3Conf=e,__reflect(e.prototype,"app.FubenType3Conf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.FunExhibitionConfig=e,__reflect(e.prototype,"app.FunExhibitionConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GameVIPConfig=e,__reflect(e.prototype,"app.GameVIPConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GetItemRouteConfig=e,__reflect(e.prototype,"app.GetItemRouteConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GiftItemConf=e,__reflect(e.prototype,"app.GiftItemConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GlobalConf=e,__reflect(e.prototype,"app.GlobalConf")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.init=function(t){this.callbackFunction=t;var e=this;e.config||RES.getResByUrl(ResDirEnum.RES_RESOURCE+"cfg/config.xml?v="+(new Date).getTime(),this.loadConfig,this,RES.ResourceItem.TYPE_BIN)},e.readConfig=function(t){var i=this;console.log("解压成功！！");var n=i.config=JSON.parse(t);if(n){var s=function(t,e,i){if(0==i)t.__proto__=e;else for(var n in t)s(t[n],e,i-1)},a=function(t){var a=n[t],r=egret.getDefinitionByName("app."+t);if(r){var o="_obj"+t;i[o]=new r;var l="_bool"+t;i[l]=!1;var h="_"+t+"_";Object.defineProperty(i,t,{get:function(){var n=i[h];if(i[l])return n;var a=i[o];return s(n,a,e.keys[t]||0),i[l]=!0,n},set:function(t){i[h]=t}})}i[t]=a};for(var r in n)a(r);n=null,i.config=null,t=null,i.callbackFunction(),i.callbackFunction=null,this.readConfig=null}},e.loadConfig=function(i){if(e.isReadConfig){e.isReadConfig=!1,t.LocationProperty.setLoadProgress(82,"准备好随机传送卷……");var n=this;n.init=null,JSZip.loadAsync(i).then(function(t){return t.file("config.json").async("text")}).then(n.readConfig.bind(n))}},e.isReadConfig=!0,e.keys={Scenes:1,Npc:1,NpcFunctions:1,StaticFubens:1,Monster:1,SkillsLevelConf:2,EffectsConf:1,BuffConf:1,SkillConf:1,StdItems:1,PlayFunConfig:1,PlayFunConfigPos:1,LevelUpExp:1,SystemOpen:1,SystemOpenMain:1,BasicsSettingmConfig:0,SystemSettingmConfig:0,RecyclingSettingConfig:2,MedicineSettingConfig:0,RankConfig:0,ProtectSettingConfig:0,ItemSettingConfig:1,EquipValuation:2,CircleLevel:1,ExchangCircleConfig:1,RuleConf:1,ReliveConfig:1,GuildConfig:0,GuildBuildConfig:1,GuildDonateConfig:1,ForgeConfig:1,ForgeBaseConfig:0,MergeTotal:1,MergeConfig:2,ItemMergeConfig:3,NumericalIcon:1,ShopConfig:1,TradeLineConfig:1,taxconfig:0,GuildLogConfig:1,ShopnameConfig:1,ShoptagConfig:1,FunExhibitionConfig:1,NpcTransConf:1,FlyLevel:1,FlyTable:1,MeridiansConfig:1,MeridiansSetConfig:0,BlessConfig:1,BlesseConstConfig:0,ActivitiesConf:1,PActivitiesConf:1,ActivityAscriptionConf:1,Activity1Config:1,AchieveConfig:2,AchievePageConfig:1,Activity2Config:1,WorshipMainConfig:1,WorshipCommonConfig:0,FubenType1Conf:1,FubenType2Conf:1,FubenType3Conf:1,MedalConfig:1,Activity3Config:1,Activity4Config:1,AppraisalMainConfig:2,BossConfig:1,Props:1,Activity5Config:1,Activity6Config:1,Activity7Config:1,Activity8Config:1,Activity10Config:0,ShowActivityidConfig:1,TaskDisplayConfig:2,Activity11Config:1,Activity12Config:1,LevelTipsConfig:2,ServerInfoConfig:1,SuitItemCfg:1,ActivityPayConf:2,Activity10001Config:1,Activity10002Config:2,GrowTipsConfig:2,GrowTipsTagConfig:1,BagRemainConfig:1,Activity10003Config:1,Activity10004Config:2,EquipStrengthenConfig:2,AttrLookupConfig:1,FourStarsConfig:2,ProdItemMapConf:2,RechargeConf:1,GiftItemConf:1,Activity10005Config:2,ActivityWelfareConf:1,ActivityOpenServiceConf:1,Activity10006Config:2,Activity10007Config:2,Activity10009Config:2,SpecialRingConfig:2,TitleConfig:1,ActivityCompetitionConf:1,ActivityDrawConf:0,Activity10010Config:2,Activity14Config:2,ActivitiesShowConf:2,Activity13Config:1,Activity14setConfig:2,Activity14tabConfig:1,Activity15Config:3,YYMemberConfig:0,YYPlayFunConfig:1,YYVIPConfig:0,FashionupgradeConfig:2,FashionattributeConfig:2,Activity10014Config:1,GameVIPConfig:0,GetItemRouteConfig:1,OpenWindowConfig:1,RefiningmaterialsConfig:1,RefiningReplaceConfig:1,UpstarPriceConfig:1,RefiningBaseConfig:1,TimeManagerConfigConfig:0,talklevelConfig:1,monstertalk1Config:1,monstertalk2Config:1,ActivityPromptConfig:1,monstertalk3Config:1,ShenZhuangBossConfig:0,PopupConfig:1,RingBuyJobConfig:3,Activity10015Config:1,YBrecoverConfig:1,HumanAttrConfig:1,privilegeLevelConfig:1,MonthCardConfig:1,UpstarConfig:2,ItemTypeConfig:1,GrowWayConfig:1,GrowWayTabConfig:2,NoticeConfig:1,demonsbodyConfig:2,demonslevelConfig:2,demonsconstConfig:0,RageconstConfig:0,GlobalConf:0,ActivityNoticeConfig:2,ranktitleconfig:2,OfficeConfig:1,TransferConfig:0,FashionsetConfig:0,WarehouseConfig:0,RingTabConfig:1,Platform4366Config:0,Login4366Config:1,Activity10017Config:2,ChatSystemConfig:0,NativeConfig:1,NativeRewardConfig:0,PlatformQQConfig:0,LoginQQConfig:1,BlueDiamondDailyConfig:1,LevelBlueDiamondConfig:1,SkillLocationConf:2,Activity10018Config:1,UseItemConfig:1,ItemOpenUIConfig:1,Activity10019Config:2,ActivityPopupConfig:3,soulWeaponLorderConfig:2,soulWeaponLvConfig:2,soulWeaponstarConfig:2,soulWpRefiningConfig:1,soulWpReplaceConfig:3,soulWptableConfig:1,soulWpViewConfig:1,MoneytreeconstConfig:0,MoneytreeRewardConfig:1,OnlineTimeRewardConfig:2,OnlineTimeconstConfig:0,Activity17Config:1,Activity18Config:1,Activity19Config:1,Activity21Config:0,ACTcrossServerTabCfg:2,KFBanViewConfig:0,lootPetConfig:2,Activity10020Config:2,ResonanceItemCfg:1,ActivityAutoConfig:1,Activity26Config:0,ThreeClientConfig:1,DemonsReplaceConfig:1,Activity10021Config:1,editionConf:0,CrossServerGroupConf:1,Platform360Config:0,Platform7youxiConfig:0,PlatformludashiConfig:0,LudashivipConfig:1,LudashimemberConfig:1,PlatformKU25Config:0,LoginKU25Config:1,Platform37Config:0,PlatformSogouConfig:0,LevelSogouConfig:1,LoginSogouConfig:1,PlatformTanwanConfig:0,PlatformGame2Config:0,Platform2144Config:0,CustomisedTitleConfig:1,PlatformteeqeeConfig:0,WordFormulaConfig:2,PlatformxunwanConfig:0,XunwantitleConfig:1,DummyBuildConfig:1,DummyPlayerConfig:1,DummyNameConfig:1},e
}();t.GlobalConfig=e,__reflect(e.prototype,"app.GlobalConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GrowTipsConfig=e,__reflect(e.prototype,"app.GrowTipsConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GrowTipsTagConfig=e,__reflect(e.prototype,"app.GrowTipsTagConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GrowWayConfig=e,__reflect(e.prototype,"app.GrowWayConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GrowWayTabConfig=e,__reflect(e.prototype,"app.GrowWayTabConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GuildBuildConfig=e,__reflect(e.prototype,"app.GuildBuildConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GuildConfig=e,__reflect(e.prototype,"app.GuildConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GuildDonateConfig=e,__reflect(e.prototype,"app.GuildDonateConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GuildLogConfig=e,__reflect(e.prototype,"app.GuildLogConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.HumanAttrConfig=e,__reflect(e.prototype,"app.HumanAttrConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ItemMergeConfig=e,__reflect(e.prototype,"app.ItemMergeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ItemOpenUIConfig=e,__reflect(e.prototype,"app.ItemOpenUIConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ItemSettingConfig=e,__reflect(e.prototype,"app.ItemSettingConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ItemTypeConfig=e,__reflect(e.prototype,"app.ItemTypeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.viewAry=[]}return t.prototype.isDoNotOpen=function(t){return t=t.substring(4),this.viewAry.length||(this.viewAry=this.viewName.split(",")),-1!=this.viewAry.indexOf(t)},t}();t.KFBanViewConfig=e,__reflect(e.prototype,"app.KFBanViewConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.LevelBlueDiamondConfig=e,__reflect(e.prototype,"app.LevelBlueDiamondConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.LevelSogouConfig=e,__reflect(e.prototype,"app.LevelSogouConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.LevelTipsConfig=e,__reflect(e.prototype,"app.LevelTipsConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.LevelUpExp=e,__reflect(e.prototype,"app.LevelUpExp")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Login4366Config=e,__reflect(e.prototype,"app.Login4366Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.LoginKU25Config=e,__reflect(e.prototype,"app.LoginKU25Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.LoginQQConfig=e,__reflect(e.prototype,"app.LoginQQConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.LoginSogouConfig=e,__reflect(e.prototype,"app.LoginSogouConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.LootPetConfig=e,__reflect(e.prototype,"app.LootPetConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.LudashimemberConfig=e,__reflect(e.prototype,"app.LudashimemberConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.LudashivipConfig=e,__reflect(e.prototype,"app.LudashivipConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.MedalConfig=e,__reflect(e.prototype,"app.MedalConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.MedicineSettingConfig=e,__reflect(e.prototype,"app.MedicineSettingConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.MergeConfig=e,__reflect(e.prototype,"app.MergeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.MergeTotal=e,__reflect(e.prototype,"app.MergeTotal")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.MeridiansConfig=e,__reflect(e.prototype,"app.MeridiansConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.MeridiansSetConfig=e,__reflect(e.prototype,"app.MeridiansSetConfig")}(app||(app={}));var MoneytreeconstConfig=function(){function t(){}return t}();__reflect(MoneytreeconstConfig.prototype,"MoneytreeconstConfig");var MoneytreeRewardConfig=function(){function t(){}return t}();__reflect(MoneytreeRewardConfig.prototype,"MoneytreeRewardConfig");var app;!function(t){var e=function(){function t(){}return t}();t.Monster=e,__reflect(e.prototype,"app.Monster")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.monstertalk1Config=e,__reflect(e.prototype,"app.monstertalk1Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.monstertalk2Config=e,__reflect(e.prototype,"app.monstertalk2Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.monstertalk3Config=e,__reflect(e.prototype,"app.monstertalk3Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.monstertalkConfig=e,__reflect(e.prototype,"app.monstertalkConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.MonthCardConfig=e,__reflect(e.prototype,"app.MonthCardConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.NativeConfig=e,__reflect(e.prototype,"app.NativeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.NativeRewardConfig=e,__reflect(e.prototype,"app.NativeRewardConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.NoticeConfig=e,__reflect(e.prototype,"app.NoticeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Npc=e,__reflect(e.prototype,"app.Npc")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.NpcFunctions=e,__reflect(e.prototype,"app.NpcFunctions")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.NpcTransConf=e,__reflect(e.prototype,"app.NpcTransConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.NumericalIcon=e,__reflect(e.prototype,"app.NumericalIcon")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.OfficeConfig=e,__reflect(e.prototype,"app.OfficeConfig")}(app||(app={}));var OnlineTimeconstConfig=function(){function t(){}return t}();__reflect(OnlineTimeconstConfig.prototype,"OnlineTimeconstConfig");var OnlineTimeRewardConfig=function(){function t(){}return t}();__reflect(OnlineTimeRewardConfig.prototype,"OnlineTimeRewardConfig");var app;!function(t){var e=function(){function t(){}return t}();t.OpenWindowConfig=e,__reflect(e.prototype,"app.OpenWindowConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PActivitiesConf=e,__reflect(e.prototype,"app.PActivitiesConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Platform2144Config=e,__reflect(e.prototype,"app.Platform2144Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Platform360Config=e,__reflect(e.prototype,"app.Platform360Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Platform37Config=e,__reflect(e.prototype,"app.Platform37Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Platform4366Config=e,__reflect(e.prototype,"app.Platform4366Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Platform7youxiConfig=e,__reflect(e.prototype,"app.Platform7youxiConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformaiqiyiConfig=e,__reflect(e.prototype,"app.PlatformaiqiyiConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformGame2Config=e,__reflect(e.prototype,"app.PlatformGame2Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformKU25Config=e,__reflect(e.prototype,"app.PlatformKU25Config")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformludashiConfig=e,__reflect(e.prototype,"app.PlatformludashiConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformqidianConfig=e,__reflect(e.prototype,"app.PlatformqidianConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformQQConfig=e,__reflect(e.prototype,"app.PlatformQQConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformshunwangConfig=e,__reflect(e.prototype,"app.PlatformshunwangConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformSogouConfig=e,__reflect(e.prototype,"app.PlatformSogouConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformTanwanConfig=e,__reflect(e.prototype,"app.PlatformTanwanConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformteeqeeConfig=e,__reflect(e.prototype,"app.PlatformteeqeeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlatformxunwanConfig=e,__reflect(e.prototype,"app.PlatformxunwanConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlayFunConfig=e,__reflect(e.prototype,"app.PlayFunConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PlayFunConfigPos=e,__reflect(e.prototype,"app.PlayFunConfigPos")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.PopupConfig=e,__reflect(e.prototype,"app.PopupConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.privilegeLevelConfig=e,__reflect(e.prototype,"app.privilegeLevelConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ProdItemMapConf=e,__reflect(e.prototype,"app.ProdItemMapConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Props=e,__reflect(e.prototype,"app.Props")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ProtectSettingConfig=e,__reflect(e.prototype,"app.ProtectSettingConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.RageconstConfig=e,__reflect(e.prototype,"app.RageconstConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.RankConfig=e,__reflect(e.prototype,"app.RankConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ranktitleconfig=e,__reflect(e.prototype,"app.ranktitleconfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.RechargeConf=e,__reflect(e.prototype,"app.RechargeConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.RecyclingSettingConfig=e,__reflect(e.prototype,"app.RecyclingSettingConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.RefiningBaseConfig=e,__reflect(e.prototype,"app.RefiningBaseConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.RefiningmaterialsConfig=e,__reflect(e.prototype,"app.RefiningmaterialsConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.RefiningReplaceConfig=e,__reflect(e.prototype,"app.RefiningReplaceConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ReliveConfig=e,__reflect(e.prototype,"app.ReliveConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ResonanceItemCfg=e,__reflect(e.prototype,"app.ResonanceItemCfg")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.SpecialRingConfig);t.RingBuyJobConfig=e,__reflect(e.prototype,"app.RingBuyJobConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.RingTabConfig=e,__reflect(e.prototype,"app.RingTabConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.RuleConf=e,__reflect(e.prototype,"app.RuleConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.Scenes=e,__reflect(e.prototype,"app.Scenes")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ServerInfoConfig=e,__reflect(e.prototype,"app.ServerInfoConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ShopConfig=e,__reflect(e.prototype,"app.ShopConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ShopnameConfig=e,__reflect(e.prototype,"app.ShopnameConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ShoptagConfig=e,__reflect(e.prototype,"app.ShoptagConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ShowActivityidConfig=e,__reflect(e.prototype,"app.ShowActivityidConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.SignPrizeConfig=e,__reflect(e.prototype,"app.SignPrizeConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.SkillConf=e,__reflect(e.prototype,"app.SkillConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.SkillLocationConf=e,__reflect(e.prototype,"app.SkillLocationConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.cooldownTime=0}return t}();t.SkillsLevelConf=e,__reflect(e.prototype,"app.SkillsLevelConf")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.soulWeaponLorderConfig=e,__reflect(e.prototype,"app.soulWeaponLorderConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.soulWeaponLvConfig=e,__reflect(e.prototype,"app.soulWeaponLvConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.soulWeaponstarConfig=e,__reflect(e.prototype,"app.soulWeaponstarConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.soulWpRefiningConfig=e,__reflect(e.prototype,"app.soulWpRefiningConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.soulWpReplaceConfig=e,__reflect(e.prototype,"app.soulWpReplaceConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.soulWptableConfig=e,__reflect(e.prototype,"app.soulWptableConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.soulWpViewConfig=e,__reflect(e.prototype,"app.soulWpViewConfig")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.selectIdx=0,t.skinName="SwitchPlayerSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_Player_Text2),t.MouseScroller.bind(this.playerScroller),this.createBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.switchBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.list.addEventListener(egret.Event.CHANGE,this.onClick,this),this.list.itemRenderer=t.SwitchPlayerItem,this.list.itemRendererSkinName="SwitchPlayerItemSkin";for(var n=t.MFRoleMgr.ins().getMyRoleInfo(),s=t.MFRoleMgr.ins().selectRolId,a=0;a<n.length;a++)if(s==n[a].id){this.selectIdx=a;break}n[this.selectIdx].select=!0,this.arrayCollection=new eui.ArrayCollection(n),this.list.dataProvider=this.arrayCollection,this.createBtn.label=t.LanguageUtils.language_Player_Text1,this.switchBtn.label=t.LanguageUtils.language_Player_Text2,n.length>=3&&t.DisplayUtils.removeFromParent(this.createBtn),this.list.selectedIndex=this.selectIdx},i.prototype.onClick=function(e){switch(e.currentTarget){case this.createBtn:t.ViewManager.ins().open(t.CreateRoleView2,1);break;case this.switchBtn:var n=this.arrayCollection.getItemAt(this.selectIdx);t.MFRoleMgr.ins().selectRolId==n.id?t.ViewManager.ins().close(i):(t.MFRoleMgr.ins().selectRolId=n.id,t.GameApp.closesocket(!1));break;case this.list:this.arrayCollection.getItemAt(this.selectIdx).select=!1,this.selectIdx=this.list.selectedIndex,this.arrayCollection.getItemAt(this.selectIdx).select=!0,this.arrayCollection.refresh()}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.playerScroller),this.dragDropUI.destroy(),this.dragDropUI=null,this.createBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.switchBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.list.removeEventListener(egret.Event.CHANGE,this.onClick,this)},i}(t.BaseEuiView);t.SwitchPlayerView=e,__reflect(e.prototype,"app.SwitchPlayerView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.StaticFubens=e,__reflect(e.prototype,"app.StaticFubens")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.canMoveKb=0,this.recordLog=0,this.denyDeal=0,this.denySell=0,this.denyDestroy=0}return Object.defineProperty(t.prototype,"showQuality",{get:function(){return this._showQuality?this._showQuality:0},set:function(t){this._showQuality=t},enumerable:!0,configurable:!0}),t}();t.StdItems=e,__reflect(e.prototype,"app.StdItems")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.SuitItemCfg=e,__reflect(e.prototype,"app.SuitItemCfg")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.SystemOpen=e,__reflect(e.prototype,"app.SystemOpen")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.SystemOpenMain=e,__reflect(e.prototype,"app.SystemOpenMain")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.SystemSettingmConfig=e,__reflect(e.prototype,"app.SystemSettingmConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ShenZhuangBossConfig=e,__reflect(e.prototype,"app.ShenZhuangBossConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.talklevelConfig=e,__reflect(e.prototype,"app.talklevelConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.TaskDisplayConfig=e,__reflect(e.prototype,"app.TaskDisplayConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.taxconfig=e,__reflect(e.prototype,"app.taxconfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ThreeClientConfig=e,__reflect(e.prototype,"app.ThreeClientConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.TimeManagerConfigConfig=e,__reflect(e.prototype,"app.TimeManagerConfigConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.TitleConfig=e,__reflect(e.prototype,"app.TitleConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.TradeLineConfig=e,__reflect(e.prototype,"app.TradeLineConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.TransferConfig=e,__reflect(e.prototype,"app.TransferConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.UpstarConfig=e,__reflect(e.prototype,"app.UpstarConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.UpstarPriceConfig=e,__reflect(e.prototype,"app.UpstarPriceConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.UseItemConfig=e,__reflect(e.prototype,"app.UseItemConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.WarehouseConfig=e,__reflect(e.prototype,"app.WarehouseConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.WordFormulaConfig=e,__reflect(e.prototype,"app.WordFormulaConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.WorshipCommonConfig=e,__reflect(e.prototype,"app.WorshipCommonConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.WorshipMainConfig=e,__reflect(e.prototype,"app.WorshipMainConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.XunwantitleConfig=e,__reflect(e.prototype,"app.XunwantitleConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.YBrecoverConfig=e,__reflect(e.prototype,"app.YBrecoverConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.YYMemberConfig=e,__reflect(e.prototype,"app.YYMemberConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.YYPlayFunConfig=e,__reflect(e.prototype,"app.YYPlayFunConfig")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.YYVIPConfig=e,__reflect(e.prototype,"app.YYVIPConfig")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.step=0}return e.prototype.clear=function(){this.btDir=0,this.X=0,this.Y=0,this.step=0,t.ObjectPool.push(this)},e.prototype.init=function(t,e,i,n){void 0===n&&(n=0),this.btDir=i,this.X=t,this.Y=e,this.step=n},e}();t.TrajectoryNode=e,__reflect(e.prototype,"app.TrajectoryNode")}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i){var n=t.call(this)||this;return n._action=e,n._dir=i,n}return __extends(e,t),e}(t.BaseClass);t.ActionMessage=e,__reflect(e.prototype,"app.ActionMessage")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.TIME_THRESHOLD=2,e._delayOpts=[],egret.startTick(e.runCachedFun,e),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.addDelayOptFunction=function(t,e,i,n,s){this._delayOpts.push({fun:e,funPara:i,thisObj:t,callBack:n,para:s})},e.prototype.clear=function(){this._delayOpts.length=0},e.prototype.runCachedFun=function(t){if(0==this._delayOpts.length)return!1;for(var e,i=egret.getTimer();this._delayOpts.length&&(e=this._delayOpts.shift(),e.funPara?e.fun.call(e.thisObj,e.funPara):e.fun.call(e.thisObj),e.callBack&&(void 0!=e.para?e.callBack.call(e.thisObj,e.para):e.callBack()),!(egret.getTimer()-i>this.TIME_THRESHOLD)););return!1},e}(t.BaseClass);t.DelayOptManager=e,__reflect(e.prototype,"app.DelayOptManager")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.list=[]}return e.prototype.tick=function(e){this.list[e]=t.TimerManager.ins().getFrameId()},e.prototype.isTick=function(e){return this.list[e]==t.TimerManager.ins().getFrameId()},e.prototype.checkAndTick=function(t){return this.isTick(t)?!0:(this.tick(t),!1)},e}();t.FrameTick=e,__reflect(e.prototype,"app.FrameTick")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.prototype.setInfo=function(t,e,i,n,s){void 0===s&&(s=null),this.ident=t,this.x=e,this.y=i,this.dir=n,this.data=s,this.time=egret.getTimer()},t.prototype.clear=function(){this.ident=0,this.x=0,this.y=0,this.dir=0,this.data=null,this.time=0},t}();t.ActorMessage=e,__reflect(e.prototype,"app.ActorMessage")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.ins=function(){return e.ins.call(this)},Object.defineProperty(i.prototype,"rankModel",{get:function(){return this._rankModel||(this._rankModel=new t.RankData),this._rankModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"roleModel",{get:function(){return this._roleModel||(this._roleModel=new t.RoleData),this._roleModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bossModel",{get:function(){return this._bossModel||(this._bossModel=new t.BossData),this._bossModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mailModel",{get:function(){return this._mailModel||(this._mailModel=new t.MailData),this._mailModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flyShoesModel",{get:function(){return this._flyShoesModel||(this._flyShoesModel=new t.FlyShoesData),this._flyShoesModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"setUpModel",{get:function(){return this._setUpModel||(this._setUpModel=new t.SetUpData),this._setUpModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){},i}(t.BaseClass);t.ModelManager=e,__reflect(e.prototype,"app.ModelManager")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._pool=[],e._useNum=0,e.isLowerQQBrowser()?e._maxNum=18:e._maxNum=-1,e}return __extends(e,t),e.prototype.isLowerQQBrowser=function(){if(gamelib.DeviceUtils.IsQQBrowser){for(var t=["2013022","Lenovo A630t","SM-G3818","vivo X3t","GT-I9100"],e=!1,i=0,n=t.length;n>i;i++)if(-1!=navigator.userAgent.indexOf(t[i])){e=!0;break}return e}return!1},e.prototype.pop=function(){var t=this._pool.pop();return t||(-1==this._maxNum||this._useNum<this._maxNum)&&(t=new egret.RenderTexture,this._useNum++),t},e.prototype.push=function(t){for(var e=!1,i=0,n=this._pool.length;n>i;i++)if(this._pool[i]==t){e=!0;break}e||this._pool.push(t)},e}(t.BaseClass);t.RenderTextureManager=e,__reflect(e.prototype,"app.RenderTextureManager")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.create=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];e?e:t.GameMap.fbType},i}(t.BaseClass);t.ResultManager=e,__reflect(e.prototype,"app.ResultManager")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._appVersion="",t.resVersionData=window.verData,t}return __extends(i,e),Object.defineProperty(i.prototype,"appVersion",{get:function(){return this._appVersion},set:function(t){this._appVersion=t},enumerable:!0,configurable:!0}),i.ins=function(){return e.ins.call(this)},i.prototype.has=function(t){return this.resVersionData.hasOwnProperty(t)},i.prototype.getDir=function(t){return this.resVersionData[t]},i.prototype.hasVer=function(){return!isNaN(t.LocationProperty.v)},i.prototype.loadConfig=function(e,i){if(this.complateFunc=e,this.complateFuncTarget=i,this.resVersionData)return void this.complateFunc.call(this.complateFuncTarget);if(this.hasVer()){var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.ARRAY_BUFFER;var s=function(t){switch(t.type){case egret.Event.COMPLETE:break;case egret.IOErrorEvent.IO_ERROR:debug.log("respHandler io error")}};return n.once(egret.Event.COMPLETE,s,this),n.once(egret.IOErrorEvent.IO_ERROR,s,this),n.open(""+t.LocationProperty.resAdd+t.LocationProperty.v+"/"+t.LocationProperty.v+".ver",egret.HttpMethod.GET),void n.send()}this.complateFunc.call(this.complateFuncTarget)},i}(t.BaseClass);t.ResVersionManager=e,__reflect(e.prototype,"app.ResVersionManager")}(app||(app={}));var Timer=function(){function t(){this.m_Timer=-1}return t.TimeOut=function(e,i){var n=new t,s=function(){-1!=n.m_Timer&&(e(),n.m_Timer=-1)};return n.m_Timer=egret.setTimeout(s,this,i),n},t.prototype.Stop=function(){-1!=this.m_Timer&&egret.clearTimeout(this.m_Timer),this.m_Timer=-1},t}();__reflect(Timer.prototype,"Timer");var app;!function(t){var e=function(){function e(){this.stackObj={stack:""}}return e.ins=function(){return this._ins=this._ins||new e,this._ins},e.prototype.show=function(e){var i=function(){t.DisplayUtils.removeFromParent(this),this.removeTouchEvent(this.notBtn,i)},n=new t.BaseView;n.skinName="ErrorSkin",n.notBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i,n),n.lab.text=e,t.StageUtils.ins().getUIStage().addChild(n)},e.Assert=function(i,n){return i?!1:(n+=e.ins().getErrorStackInfo(),t.LocationProperty.isLocation&&t.CommonPopView.ins().showTextView(n),!0)},e.prototype.getErrorStackInfo=function(){var t="";try{Error.captureStackTrace(this.stackObj,e.Assert),t="----"+this.stackObj.stack,this.stackObj.stack=""}catch(i){t=""}return t},e.httpLog=!0,e}();t.ErrorLog=e,__reflect(e.prototype,"app.ErrorLog")}(app||(app={}));var Assert=app.ErrorLog.Assert;window.onerror=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i="",n="";if(t[4]&&t[4].stack){var s=t[4].stack.split("at ");i=s[1].split(" ")[0];for(var a=2;a<s.length;a++){var r=s[a].split("/");n+=r[r.length-1]}}var o="兼容问题无法获取值",l="Unexpected token t in JSON at",h="错误信息："+t[0]+"\n"+("出错位置："+t[2]+"行"+(t[3]?t[3]+"列":o)+"\n")+("出错函数："+i+"\n")+("函数调用："+n);h.indexOf(o)>=0||h.indexOf(l)>=0||(window.isHideAlert?console.log(h):(h="时间:"+(new Date).getTime()+"\n"+h,window.onerrorFunction&&window.onerrorFunction(h,app.LocationProperty.openID),app.CommonPopView.ins().showTextView(h)))};var app;!function(t){var e=function(){function t(){}return t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.KC_1=49,t.KC_2=50,t.KC_3=51,t.KC_4=52,t.KC_5=53,t.KC_6=54,t.KC_7=55,t.KC_8=56,t.KC_9=57,t.KC_0=48,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.SPACE=32,t.BRACE_L=219,t.BACKSLASH=220,t.BRACE_R=221,t.BACK_QUOTE=192,t.ENTER=13,t.KC_BACKSPACE=8,t.KC_TAB=9,t.KC_ENTER=13,t.KC_SHIFT=16,t.KC_CONTROL=17,t.KC_ESCAPE=27,t.KC_SPACE=32,t.KC_WINDOWS=91,t.KC_MENU=93,t}();t.Keyboard=e,__reflect(e.prototype,"app.Keyboard")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.removeTime=0,t._newFrameRate=0,t._m_gather=!1,t.tempName="",t.pixelHitTest=!1,t._mcFactory=new egret.MovieClipDataFactory,t}return __extends(i,e),Object.defineProperty(i.prototype,"newFrameRate",{get:function(){return this._newFrameRate},set:function(t){this._newFrameRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"m_gather",{get:function(){return this._m_gather},set:function(t){this._m_gather=t},enumerable:!0,configurable:!0}),i.prototype.playFile=function(e,n,s,a){void 0===n&&(n=1),void 0===s&&(s=null),void 0===a&&(a=!0),this.time=egret.getTimer(),this._compFun=s,this.playCount=n,this.remove=a,t.TimerManager.ins().remove(this.playComp,this);var r=e.split("/");if(this.tempName=r.pop(),this.texture&&null==this.texture.bitmapData);else if(this.name==e)return void this.createBody();this.name=e,this.texture&&i.removeDisplayObject(this,this.texture.bitmapData),this.jsonData=null,this.texture=null,RES.getResByUrl(this.name+".json?v=7",this.compFuncJson,this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(this.name+".png?v=7",this.compFuncPng,this,RES.ResourceItem.TYPE_IMAGE)},i.prototype.compFuncJson=function(t,e){this.name+".json?v=7"==e&&t&&(this.jsonData=t,this.createBody())},i.prototype.compFuncPng=function(t,e){this.name+".png?v=7"==e&&t&&t.bitmapData&&(this.texture=t,this.stage&&i.addDisplayObject(this,this.texture.bitmapData),this.createBody())},i.prototype.playFileChar=function(e,n,s,a){void 0===n&&(n=1),void 0===s&&(s=null),void 0===a&&(a=!0),this.time=egret.getTimer(),this._compFun=s,this.playCount=n,this.remove=a,t.TimerManager.ins().remove(this.playComp,this);
var r=e.split("/");if(this.tempName=r.pop(),this._m_gather&&(e=e.indexOf("s1")>=0?e.substr(0,e.length-4):e.substr(0,e.length-3)),this.texture&&null==this.texture.bitmapData);else if(this.name==e)return void this.createBody();this.name=e,this.texture&&i.removeDisplayObject(this,this.texture.bitmapData),this.jsonData=null,this.texture=null,RES.getResByUrl(this.name+".json?v=7",this.compFuncJson,this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(this.name+".png?v=7",this.compFuncPng,this,RES.ResourceItem.TYPE_IMAGE)},i.prototype.playFileChar8=function(e,n,s,a){void 0===n&&(n=1),void 0===s&&(s=null),void 0===a&&(a=!0),this.time=egret.getTimer(),this._compFun=s,this.playCount=n,this.remove=a,t.TimerManager.ins().remove(this.playComp,this);var r=e.split("/");if(this.tempName=r.pop(),this.texture&&null==this.texture.bitmapData);else if(this.name==e)return void this.createBody();this.name=e,this.texture&&i.removeDisplayObject(this,this.texture.bitmapData),this.jsonData=null,this.texture=null,RES.getResByUrl(this.name+".json?v=7",this.compFuncJson,this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(this.name+".png?v=7",this.compFuncPng,this,RES.ResourceItem.TYPE_IMAGE)},i.prototype.playFileEff8=function(e,n,s,a){void 0===n&&(n=1),void 0===s&&(s=null),void 0===a&&(a=!0),this.time=egret.getTimer(),this._compFun=s,this.playCount=n,this.remove=a,t.TimerManager.ins().remove(this.playComp,this);var r=e.split("/");if(this.tempName=r.pop(),e=e.substr(0,e.length-3),this.texture&&null==this.texture.bitmapData);else if(this.name==e)return void this.createBody();this.name=e,this.texture&&i.removeDisplayObject(this,this.texture.bitmapData),this.jsonData=null,this.texture=null,RES.getResByUrl(this.name+".json?v=7",this.compFuncJson,this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(this.name+".png?v=7",this.compFuncPng,this,RES.ResourceItem.TYPE_IMAGE)},i.prototype.playFileEff=function(e,n,s,a){void 0===n&&(n=1),void 0===s&&(s=null),void 0===a&&(a=!0),this.time=egret.getTimer(),this._compFun=s,this.playCount=n,this.remove=a,t.TimerManager.ins().remove(this.playComp,this);var r=e.split("/");if(this.tempName=r.pop(),this.texture&&null==this.texture.bitmapData);else if(this.name==e)return void this.createBody();this.name=e,this.texture&&i.removeDisplayObject(this,this.texture.bitmapData),this.jsonData=null,this.texture=null,RES.getResByUrl(this.name+".json?v=7",this.compFuncJson,this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(this.name+".png?v=7",this.compFuncPng,this,RES.ResourceItem.TYPE_IMAGE)},i.prototype.$onAddToStage=function(t,n){e.prototype.$onAddToStage.call(this,t,n),this.texture&&this.texture.bitmapData&&i.addDisplayObject(this,this.texture.bitmapData)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.texture&&i.removeDisplayObject(this,this.texture.bitmapData)},i.prototype.createBody=function(){if(this.jsonData&&this.texture){if(this._mcFactory.clearCache(),this._mcFactory.mcDataSet=this.jsonData,this._mcFactory.texture=this.texture,this.movieClipData=this._mcFactory.generateMovieClipData(this.tempName),!this.movieClipData.textureData||!this.movieClipData.spriteSheet)return void this.playComp();if(this.newFrameRate?this.frameRate=this.newFrameRate:this.frameRate=this.movieClipData.frameRate,this.gotoAndPlay(1,this.playCount),this.visible=!0,this.playCount>0){var e=egret.getTimer()-this.time;e=this.playTime*this.playCount-e,e>0?t.TimerManager.ins().doTimer(e,1,this.playComp,this):this.playComp()}this.dispatchEventWith(egret.Event.CHANGE)}},i.prototype.playComp=function(){this.stage&&this._compFun&&this._compFun(),this.remove&&t.DisplayUtils.removeFromParent(this)},Object.defineProperty(i.prototype,"playTime",{get:function(){return this.movieClipData?1/this.frameRate*this.totalFrames*1e3:0},enumerable:!0,configurable:!0}),i.prototype.clearComFun=function(){this._compFun=null},i.prototype.dispose=function(){this.stop(),this.resetMovieClip(),this.clearComFun(),t.TimerManager.ins().removeAll(this)},i.prototype.destroy=function(){this.dispose(),t.DisplayUtils.removeFromParent(this),t.ObjectPool.push(this)},i.prototype.resetMovieClip=function(){var t=this;t.rotation=0,t.scaleX=1,t.scaleY=1,t.alpha=1,t.anchorOffsetX=0,t.anchorOffsetY=0,t.x=0,t.y=0,t.newFrameRate=0,t._m_gather=!1,t.$renderNode&&t.$renderNode.cleanBeforeRender();var e=t.texture;e&&i.removeDisplayObject(t,e.bitmapData),t._mcFactory.clearCache(),t._mcFactory.mcDataSet=null,t._mcFactory.texture=null,t.$texture=null,t.name=null,t.jsonData=null,t.filters=null,t.removeTime=0,t.texture=null,t.remove=!1,t.blendMode=egret.BlendMode.NORMAL,t.playCount=null,t.tempName=null,egret.Tween.removeTweens(t)},i.addDisplayObject=function(t,e){if(e){var i=e.hashCode;if(!gamelib.os.RM.getDisplay(i))return void gamelib.os.RM.addDisplay(i,[t]);var n=gamelib.os.RM.getDisplay(i);n.indexOf(t)<0&&(n.push(t),gamelib.os.RM.addDisplay(i,n))}},i.removeDisplayObject=function(t,e){if(e){var i=e.hashCode;if(gamelib.os.RM.getDisplay(i)){var n=gamelib.os.RM.getDisplay(i),s=n.indexOf(t);s>=0&&n.splice(s,1),0==n.length?(gamelib.os.RM.deleteDisplay(i),gamelib.os.RM.disposeResTime(i)):gamelib.os.RM.addDisplay(i,n)}}},i.originalRate={},i.displayList=egret.createMap(),i}(egret.MovieClip);t.MovieClip=e,__reflect(e.prototype,"app.MovieClip")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._pickUp=[],i.sysId=t.PackageID.Drop,i.regNetMsg(10,i.g_15_10),i.regNetMsg(11,i.g_15_11),i.regNetMsg(12,i.post_g_15_12),i.regNetMsg(13,i.post_g_15_13),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.s_15_9=function(t){if(t.length){var e=this.getBytes(9),i=t.length;e.writeByte(i);for(var n=0;i>n;n++)e.writeUnsignedInt(t[n]);this.sendToServer(e)}},i.prototype.s_15_10=function(t){if(t.length){var e=this.getBytes(10),i=t.length;e.writeByte(i);for(var n=0;i>n;n++)e.writeUnsignedInt(t[n]);this.sendToServer(e)}},i.prototype.g_15_10=function(e){t.EntityMgr.ins().addDropItem(e)},i.prototype.g_15_11=function(e){var i=e.readUnsignedInt();t.EntityMgr.ins().delDropItem(i)},i.prototype.post_g_15_12=function(t){for(var e,i=t.readByte(),n=0;i>n;n++)e=t.readUnsignedInt(),this._pickUp.push(e)},i.prototype.post_g_15_13=function(e){var i=t.EntityMgr.ins().getPayer;i&&(i.payPickUpMc(),i=null);for(var n,s=e.readByte(),a=0;s>a;a++)n=e.readUnsignedInt(),this._pickUp.push(n)},i.prototype.getPickUpById=function(t){var e=this._pickUp.indexOf(t);return e>-1?(this._pickUp.splice(e,1),!0):!1},i.prototype.post_pushImage=function(t){return t},i.prototype.post_skillPushImage=function(t){return t},i}(t.BaseSystem);t.DropMgr=e,__reflect(e.prototype,"app.DropMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.init(),t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.init=function(){t.StageUtils.ins().getStage().addEventListener(egret.Event.RESIZE,this.onResize,this),this.group=new eui.Group,this.rect=new eui.Rect,this.rect.fillColor=0,this.rect.fillAlpha=.2,this.group.addChild(this.rect),this.img=new eui.Image,this.img.anchorOffsetX=56,this.img.anchorOffsetY=59,this.group.addChild(this.img)},i.prototype.showLoading=function(){if(t.GameSocket.ins().isDoTimer){this.rect.width=this.group.width=t.StageUtils.ins().getWidth(),this.rect.height=this.group.height=t.StageUtils.ins().getHeight();var e=this;RES.getResAsync("load_Reel_png",function(t,i){e.img.texture=t},this),this.img.x=this.group.width/2,this.img.y=this.group.height/2,egret.Tween.removeTweens(this.img),t.StageUtils.ins().getStage().addChild(this.group);var i=egret.Tween.get(this.img,{loop:!0});i.to({rotation:360},500).to({rotation:1},1)}},i.prototype.hideLoading=function(){egret.Tween.removeTweens(this.img),t.DisplayUtils.removeFromParent(this.group)},i.prototype.onResize=function(){(t.StageUtils.ins().getStage().scaleMode==egret.StageScaleMode.NO_SCALE||t.StageUtils.ins().getStage().scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this.group.width=t.StageUtils.ins().getWidth(),this.group.height=t.StageUtils.ins().getWidth())},i}(t.BaseClass);t.LoadingView=e,__reflect(e.prototype,"app.LoadingView")}(app||(app={}));var app;!function(t){var e;!function(t){t[t.Default=0]="Default",t[t.Move=1]="Move",t[t.Buff=4]="Buff",t[t.Skill=5]="Skill",t[t.Task=6]="Task",t[t.Equip=7]="Equip",t[t.Bag=8]="Bag",t[t.Chat=9]="Chat",t[t.Guild=10]="Guild",t[t.Circle=11]="Circle",t[t.Shop=12]="Shop",t[t.PrivateDeals=13]="PrivateDeals",t[t.Drop=15]="Drop",t[t.Team=16]="Team",t[t.Setting=17]="Setting",t[t.Bless=18]="Bless",t[t.Forge=19]="Forge",t[t.FUBEN=20]="FUBEN",t[t.Warehouse=23]="Warehouse",t[t.PK=24]="PK",t[t.Actvity=25]="Actvity",t[t.Global=26]="Global",t[t.TradeLine=27]="TradeLine",t[t.Achievement=28]="Achievement",t[t.strengthen=29]="strengthen",t[t.ghost=31]="ghost",t[t.platform4366=32]="platform4366",t[t.kuafu=33]="kuafu",t[t.petSetting=34]="petSetting",t[t.petSetting2=35]="petSetting2",t[t.Friends=41]="Friends",t[t.Boss=49]="Boss",t[t.Mail=50]="Mail",t[t.Fashion=51]="Fashion",t[t.Title=54]="Title",t[t.SoldierSoul=58]="SoldierSoul",t[t.Login=255]="Login"}(e=t.PackageID||(t.PackageID={}))}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.SVER_URL="http://pay.lcbyh5.com/",t.GET_LAST_SERVER=t.SVER_URL+"api/getlastserver?",t.GET_SEVER_LIST=t.SVER_URL+"api/getserverlist?",t.WAN_BA=t.SVER_URL+"login/wanba?",t.USER_INFO=t.SVER_URL+"payment/userInfo?",t.BUY=t.SVER_URL+"payment/buy?",t}();t.PHPAPI=e,__reflect(e.prototype,"app.PHPAPI")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.update=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s=0,a=0;0==n&&(n=e.length),e.position=i;for(var r=i;n>r;++r)a=255&t.CRCBitReflect(e.readByte(),8)^s>>8&16777215,a&=255,s=t.CRCTable[a]^s<<8&4294967040;return 65535&(0^t.CRCBitReflect(s,16))},t.makeCRCTable=function(){for(var e=0,i=new Array(256),n=0;256>n;++n){e=n<<8&4294967040;for(var s=0;8>s;++s)e=32768&e?e<<1&4294967294^t.POLYNOMIAL:e<<1&4294967294;i[n]=e}return i},t.CRCBitReflect=function(e,i){var n=0,s=0;i--;for(var a=0;i>=a;++a)s=i-a,1&e&&(n|=1<<s&t.DropBits[s]),e=e>>1&2147483647;return n},t.POLYNOMIAL=4129,t.CRCTable=t.makeCRCTable(),t.DropBits=[4294967295,4294967294,4294967292,4294967288,4294967280,4294967264,4294967232,4294967168,4294967040,4294966784,4294966272,4294965248,4294963200,4294959104,4294950912,4294934528],t}();t.CRC16=e,__reflect(e.prototype,"app.CRC16")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.encode=function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),i>=t.length)return 0;var s=n?i+n:t.length;s>t.length&&(s=t.length),t.position=i;for(var a=i;s>a;++a){var r=t.readByte();r^=e.sKeyBuff[a%4],t.position--,t.writeByte(r)}return s-i},e.decode=function(t,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),e.encode(t,i,n)},e.getCRC16=function(e,i){return void 0===i&&(i=0),t.CRC16.update(e,0,i)},e.getCRC16ByPos=function(e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),t.CRC16.update(e,i,n)},e.getCheckKey=function(){var i=new egret.ByteArray;i.endian=egret.Endian.LITTLE_ENDIAN,i.writeUnsignedInt(e.sKey);var n=t.CRC16.update(i);return n},e.getSelfSalt=function(){return e.sSelfSalt},e.getTargetSalt=function(){return e.sTargetSalt},e.setTargetSalt=function(t){e.sTargetSalt=t,e.makeKey()},e.makeSalt=function(){var t=new Date;return Math.random()*t.getTime()},e.makeKey=function(){e.sKey=(e.sSelfSalt^e.sTargetSalt)+8254;for(var t=0;4>t;++t)e.sKeyBuff[t]=(e.sKey&255<<(t<<3))>>(t<<3)},e.sSelfSalt=e.makeSalt(),e.sKeyBuff=new Array(4),e}();t.Encrypt=e,__reflect(e.prototype,"app.Encrypt")}(app||(app={}));var app;!function(t){var e=function(){function e(){this._dataCache=[],this._pUpdate=new t.ProxyUpdate(this._dataCache)}return Object.defineProperty(e.prototype,"pUpdate",{get:function(){return this._pUpdate},enumerable:!0,configurable:!0}),e.prototype.getCacheData=function(t){return this._dataCache[t]?this._dataCache[t]:null},e.prototype.clearCache=function(){for(var t=Object.keys(this._dataCache),e=0,i=t.length;i>e;e++){var n=t[e];this._dataCache[n]=null,delete this._dataCache[n]}},e.prototype.getCacheKeyInfos=function(){for(var t=[],e=Object.keys(this._dataCache),i=0,n=e.length;n>i;i++){var s=e[i],a=this._dataCache[s];t.push(a)}return t},e.prototype.isCache=function(t){return this._dataCache[t]},e}();t.DynamicChange=e,__reflect(e.prototype,"app.DynamicChange")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._cache=t}return e.prototype.isArray=function(t){return t instanceof Array},e.prototype.isObject=function(t){return t.indexOf("object")>-1},e.prototype.isNormal=function(t){var e=t.indexOf("@")>-1,i=t.indexOf(".")>-1,n=t.indexOf("_")>-1;return!e&&!i&&!n},e.prototype.isAddToArray=function(t){return"@a"==t},e.prototype.isRemoveToArray=function(t){var e=t.split("_");return e.length<=3&&"@d"==e[0]},e.prototype.isFilter=function(t){var e=t.split("_");return"@f"==e[0]},e.prototype.isNumeric=function(t){return parseFloat(t).toString()==t.toString()},e.prototype._updateObject=function(t,e,i){var n=t.split(".");"@a"==n[0]||"@s"==n[0]?i[n[1]]=e:"@d"==n[0]&&delete i[n[1]]},e.prototype._getFilterObject=function(t,e){if(e){var i=t.split("_");if(3==i.length&&"@f"==i[0]&&this.isArray(e))for(var n=i[1],s=i[2],a=0;a<e.length;a++){var r=e[a];if(3==i.length&&this.isObject(r.toString())){var o=r[n];if(o&&("@"==s[0]&&(s=s.replace("@","")),s==o))return r}}}return null},e.prototype._addObjectToArray=function(t,e){if(this.isArray(e))for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e)},e.prototype._removeObjectFromArray=function(t,e,i){var n=e.split("_");if(n.length<=3&&"@d"==n[0]&&this.isArray(t))for(var s=t.length,a=s-1;a>=0;a--){var r=t[a];if(3==n.length){if(r.hasOwnProperty(n[1])){var o=n[2];"@"==o[0]&&(o=o.replace("@","")),o==r[n[1]]&&t.splice(a,1)}}else 2==n.length&&r.hasOwnProperty(n[1])?i==r[n[1]]&&t.splice(a,1):1==n.length&&i==r&&t.splice(a,1)}},e.prototype.update=function(e,i){if(this._cache[e]=i,i.hasOwnProperty("c"))for(var n=i.c,s=Object.keys(n),a=0,r=s.length;r>a;a++){var o=s[a];this._cache[o]&&(this._update(this._cache[o],n[o]),t.MessageCenter.ins().dispatch(o+"_HttpUpdate"))}},e.prototype._update=function(t,e){if(t&&e&&this.isObject(e.toString()))for(var i=Object.keys(e),n=0,s=i.length;s>n;n++){var a=i[n],r=e[a];if(this.isNormal(a)&&this.isObject(r.toString()))t.hasOwnProperty(a)&&this._update(t[a],r);else if(this.isNormal(a)&&this.isNumeric(r)){var o=t[a];t[a]=o+r}else if(this.isNormal(a))t[a]=r;else if(this.isAddToArray(a))this._addObjectToArray(t,r);else if(this.isRemoveToArray(a))this._removeObjectFromArray(t,a,r);else if(this.isFilter(a)){var l=this._getFilterObject(a,t);l&&this._update(l,r)}else this._updateObject(a,r,t)}},e}();t.ProxyUpdate=e,__reflect(e.prototype,"app.ProxyUpdate")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.send=function(t,e,i,n,s,a){var r=new egret.HttpRequest;r.responseType=e?egret.HttpResponseType.TEXT:egret.HttpResponseType.ARRAY_BUFFER,r.open(t,i?egret.HttpMethod.GET:egret.HttpMethod.POST),r.once(egret.Event.COMPLETE,n,this),r.once(egret.IOErrorEvent.IO_ERROR,s?s:function(){},this),r.once(egret.ProgressEvent.PROGRESS,a?a:function(){},this),r.send()},e}(t.BaseClass);t.Http=e,__reflect(e.prototype,"app.Http")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;i.packageMgr=[t.FuBenMgr,t.ActvityMgr,t.ShopMgr,t.ChatMgr,t.DefaultMgr,t.SettingMgr,t.MFRoleMgr,t.MoveMgr,t.BuffMgr,t.SkillMgr,t.FriendMgr,t.DropMgr,t.MailMgr,t.AchievementMgr,t.OtherMgr,t.BossMgr],i.preload_load_count=0,i.stepNum=0,egret.TextField.default_fontFamily="微软雅黑";var n=egret.getDefinitionByName("app.ReportDataMgr");return ReportMgr=n.ins(),gamelib.DeviceUtils.IsMobile||(ResDirEnum.RES_RESOURCE=ResDirEnum.RES_RESPUBLISH),Main.gameParameter.userInfo.hasOwnProperty("client")&&2==parseInt(Main.gameParameter.userInfo.client+"")&&(egret.TextField.default_fontFamily="SimHei"),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.startUp=function(e){ReportMgr.reporting(t.ReportDataEnum.LOAD_GAMEAPP,{},null,!1),t.MFRoleMgr.ins().initInfo(),Main.phoneLoadingView.showLoadProgress(50,"正在打磨武器……"),t.StageUtils.ins().setUIStage(e),t.LocationProperty.init(),this.onConfigComplete()},i.prototype.loadResVersionComplete=function(){gamelib.DeviceUtils.IsMobile?t.ResourceUtils.ins().addConfig(ResDirEnum.RES_RESOURCE+"phonedefault.res.json?v="+(new Date).getTime(),""+ResDirEnum.RES_RESOURCE):(ResDirEnum.RES_RESOURCE=ResDirEnum.RES_RESPUBLISH,t.ResourceUtils.ins().addConfig(ResDirEnum.RES_RESOURCE+"default.res.json?v="+(new Date).getTime(),""+ResDirEnum.RES_RESOURCE)),t.ResourceUtils.ins().loadConfig(this.onConfigComplete,this)},i.prototype.onConfigComplete=function(){t.LocationProperty.setLoadProgress(20,"正在打磨武器……"),i.LoadingSteps>=i.STEPS_1?this.onThemeLoadComplete():this.loadTheme()},i.prototype.loadTheme=function(){var e=this;return i.LoadingSteps=i.STEPS_1,new Promise(function(i,n){var s=new eui.Theme("resource/default.thm.json",t.StageUtils.ins().getUIStage().stage);s.addEventListener(eui.UIEvent.COMPLETE,function(){t.LocationProperty.setLoadProgress(30,"正在打磨武器……"),e.onThemeLoadComplete()},e)})},i.prototype.onThemeLoadComplete=function(){i.LoadingSteps>=i.STEPS_2?this.complete():(i.LoadingSteps=i.STEPS_2,this.load(),mouse.enable(t.StageUtils.ins().getStage()))},i.closesocket=function(e){t.MFRoleMgr.ins().switchPlayer=e,t.GameSocket.ins().onClose()},i.prototype.load=function(){t.ResourceUtils.ins().loadGroup("preload",this.complete,this.progress,this)},i.prototype.complete=function(){if(i.LoadingSteps>=i.STEPS_4)t.GameSocket.ins().logon();else{i.LoadingSteps=i.STEPS_3;this.stepNum=1,t.LocationProperty.setLoadProgress(35,"准备好随机传送卷……"),gamelib.DeviceUtils.IsMobile,RES.getResByUrl(ResDirEnum.MAP_DIR+"maps.xml?v=202111121700",this.createMap,this,RES.ResourceItem.TYPE_BIN),console.log("资源加载成功！！")}},i.prototype.createMap=function(e){Assert(e,"maps 地图数据加载失败!!加载次数：")?t.CommonPopView.ins().showTextView("地图加载失败，请检查网络重新登录"):1==this.stepNum&&(this.stepNum=2,t.LocationProperty.setLoadProgress(80,"准备好随机传送卷……"),JSZip.loadAsync(e).then(function(t){return t.file("maps.json").async("text")}).then(this.loadConfig.bind(this)),i.LoadingSteps=i.STEPS_4)},i.prototype.loadConfig=function(e){if(2==this.stepNum){t.LocationProperty.setLoadProgress(85,"准备好随机传送卷……");var i=this;t.GlobalConfig.init(function(){t.LocationProperty.setLoadProgress(90,"准备好随机传送卷……");for(var n in i.packageMgr)i.packageMgr[n].ins();t.GameMap.init(JSON.parse(e)),t.LocationProperty.setLoadProgress(95,"欢迎来到玛法大陆……"),t.GameSocket.ins().logon(),t.LocationProperty.isFirstLoad&&t.ResourceUtils.ins().loadGroup("preload",this.doPerLoadComplete,this.postPerLoadProgress,i),this.loadConfig=null})}},i.prototype.callbackFunction=function(){},i.prototype.progress=function(e,i){t.LocationProperty.setLoadProgress(40+e/i*30,"1.75版江山无限")},i.prototype.postPerLoadProgress=function(t,e){return[t,e]},i.prototype.doPerLoadComplete=function(){t.GlobalConfig.init(this.postPerLoadComplete.bind(this))},i.prototype.postPerLoadComplete=function(){},i.prototype.postLoginInit=function(){},i.prototype.postZeroInit=function(){},i.prototype.loadPreload=function(){t.ResourceUtils.ins().loadGroup("preload",this.onResourceLoadComplete,function(){},this)},i.prototype.onResourceLoadComplete=function(){var e=ResDirEnum.RES_DIR_BODY+"body001_"+t.MFRoleMgr.ins().createSex,i=ResDirEnum.RES_DIR_HAIR+"hair001_"+t.MFRoleMgr.ins().createSex,n=ResDirEnum.RES_DIR_WEAPON+"weapon046_"+t.MFRoleMgr.ins().createSex;RES.getResByUrl(e+".json?v=6",this.compFunc,this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(e+".png?v=6",this.compFunc,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(i+".json?v=6",this.compFunc,this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(i+".png?v=6",this.compFunc,this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(n+".json?v=6",this.compFunc,this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(n+".png?v=6",this.compFunc,this,RES.ResourceItem.TYPE_IMAGE)},i.prototype.compFunc=function(){},i.LoadingSteps=0,i.STEPS_1=1,i.STEPS_2=2,i.STEPS_3=3,i.STEPS_4=4,i}(t.BaseClass);t.GameApp=e,__reflect(e.prototype,"app.GameApp"),t.MessageCenter.compile(e)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.achievementList=[],i.pageReds=[],i.achievesState=[],i.sysId=t.PackageID.Achievement,i.regNetMsg(t.AchievementProtocol.SC_AchievementList,i.post_AchievemnetInfo),i.regNetMsg(t.AchievementProtocol.SC_AchievementGetGift,i.post_AchievemnetResult),i.regNetMsg(t.AchievementProtocol.SC_AchievementRedPot,i.post_AchievemnetRedPot),i.regNetMsg(t.AchievementProtocol.SC_AchieveGetMedalData,i.post_AchieveGetMedalData),i.regNetMsg(t.AchievementProtocol.SC_AchieveUpMedalLevel,i.post_AchieveMedalUpLevel),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.post_AchieveGetMedalData=function(e){this.curMedalLevel=e.readInt();var i=e.readByte();this.achievesState=[];for(var n,s=0;i>s;s++){n=new t.MedalUpData,n.id=e.readInt(),n.state=e.readInt();var a=this.getAchieveConf(n.id);n.content=a&&t.LanguageUtils.language_Achieve_Medal_CostFinishAch_text+a.name,n.type=3,this.achievesState.push(n)}},i.prototype.post_AchieveMedalUpLevel=function(t){this.curMedalLevel=t.readInt(),this.medalUpResult=t.readByte()},i.prototype.post_AchievemnetRedPot=function(t){var e=t.readByte();this.pageReds=[];for(var i=0;e>i;i++){var n=t.readByte();this.pageReds.push(n)}},i.prototype.findPageIndex=function(t){for(var e=i.ins().pageReds,n=0;n<e.length;n++)if(e[n]==t)return 1;return 0},i.prototype.post_AchievemnetInfo=function(e){this.pageIndex=e.readByte();var i,n=e.readInt();this.achievementList=[];for(var s=0;n>s;s++)i=new t.AchievementData,i.id=e.readInt(),i.condition1=e.readInt(),i.complete1=e.readInt(),i.condition2=e.readInt(),i.complete2=e.readInt(),i.nSate=e.readByte(),this.achievementList.push(i)},i.prototype.findAchievementListIsGet=function(){for(var t=0;t<this.achievementList.length;t++){var e=this.achievementList[t];if(1==e.nSate)return!0}return!1},i.prototype.getAchievementList=function(){return this.achievementList=this.achievementList.sort(this.sort),this.achievementList},i.prototype.sort=function(t,e){return 1==t.nSate&&1!=e.nSate?-1:1!=t.nSate&&1==e.nSate?1:0==t.nSate&&0!=e.nSate?-1:0!=t.nSate&&0==e.nSate?1:t.id<e.id?-1:t.id>e.id?1:void 0},i.prototype.getAchievementGiftData=function(){return this.achievementGiftData},i.prototype.post_AchievemnetResult=function(e){this.achievementGiftData=new t.AchievementGiftData,this.achievementGiftData.id=e.readInt(),this.achievementGiftData.errorCode=e.readByte(),0==this.achievementGiftData.errorCode&&this.sendRedDot()},i.prototype.sendAchievementList=function(e){var i=this.getBytes(t.AchievementProtocol.CS_AchievementList);i.writeByte(e),this.sendToServer(i)},i.prototype.sendAchievementGetGift=function(e){var i=this.getBytes(t.AchievementProtocol.CS_AchievementGetGift);i.writeInt(e),this.sendToServer(i)},i.prototype.sendRedDot=function(){var e=this.getBytes(t.AchievementProtocol.CS_AchievementRedPot);this.sendToServer(e)},i.prototype.sendMedalGetData=function(){var e=this.getBytes(t.AchievementProtocol.CS_AchieveGetMedalData);this.sendToServer(e)},i.prototype.sendMedalUpLevel=function(){var e=this.getBytes(t.AchievementProtocol.CS_AchieveUpMedalLevel);this.sendToServer(e)},i.prototype.findItemIcon=function(e){if(0==e.type){var i=t.GlobalConfig.StdItems[e.id];return i}var n=t.GlobalConfig.NumericalIcon[e.type];return n},i.prototype.getMedalAttrib=function(e,i,n){for(var s=[],a=t.GlobalConfig.StdItems[e]&&t.GlobalConfig.StdItems[e].staitcAttrs,r=0;r<(a&&a.length);r++){var o=t.AttributeData.getItemAttStrByType(a[r],a,1,i,n);""!=o&&s.push(o)}return s},i.prototype.getAchieveConf=function(e){var i,n=t.GlobalConfig.AchieveConfig;for(var s in n)if(n[s]&&n[s][e]){i=n[s][e];break}return i},i}(t.BaseSystem);t.AchievementMgr=e,__reflect(e.prototype,"app.AchievementMgr")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e}return __extends(e,t),e}(egret.DisplayObjectContainer);t.BaseSpriteLayer=e,__reflect(e.prototype,"app.BaseSpriteLayer")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.AchievementData=e,__reflect(e.prototype,"app.AchievementData");var i;!function(t){t[t.CS_AchievementList=1]="CS_AchievementList",t[t.CS_AchievementGetGift=2]="CS_AchievementGetGift",t[t.CS_AchievementRedPot=3]="CS_AchievementRedPot",t[t.CS_AchieveGetMedalData=11]="CS_AchieveGetMedalData",t[t.CS_AchieveUpMedalLevel=12]="CS_AchieveUpMedalLevel",t[t.SC_AchievementList=1]="SC_AchievementList",t[t.SC_AchievementGetGift=2]="SC_AchievementGetGift",t[t.SC_AchievementRedPot=3]="SC_AchievementRedPot",t[t.SC_AchieveGetMedalData=11]="SC_AchieveGetMedalData",t[t.SC_AchieveUpMedalLevel=12]="SC_AchieveUpMedalLevel"}(i=t.AchievementProtocol||(t.AchievementProtocol={}));var n=function(){function t(){}return t}();t.AchievementGiftData=n,__reflect(n.prototype,"app.AchievementGiftData");var s=function(){function t(){}return t}();t.MedalUpData=s,__reflect(s.prototype,"app.MedalUpData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.clear=function(){var t=this._currScene;t&&(t.onExit(),this._currScene=void 0)},i.prototype.runScene=function(e){if(null==e)return void t.Log.trace("runScene:scene is null");var i=this._currScene;i&&(i.onExit(),i=void 0);var n=new e;n.onEnter(),this._currScene=n},i.prototype.getCurrScene=function(){return this._currScene},i.prototype.getSceneName=function(){return this._currScene?egret.getQualifiedClassName(this._currScene):""},i.CREATE_ROLE="CreateRoleScene",i.MAIN="MainScene",i}(t.BaseClass);t.SceneManager=e,__reflect(e.prototype,"app.SceneManager")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.className="@策划@使用此组件必须填写逻辑类名",e}return __extends(e,t),e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged&&this.dataChanged()},enumerable:!0,configurable:!0}),e.filterKeys=["data"],e.copyKeys=["open","close"],e}(t.BaseView);t.BaseComponent=e,__reflect(e.prototype,"app.BaseComponent")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){var e=t.AchievementMgr.ins().findItemIcon(this.data);this.lbGift.text=e&&e.name+"*"+this.data.count},i}(t.BaseItemRender);t.AchieveDetailItemView=e,__reflect(e.prototype,"app.AchieveDetailItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="AchievementDetailedViewSkin",i.name="AchievementDetailedView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.txtGift.text=t.LanguageUtils.language_Achievement_TxtGift,this.dragDropUI.setTitle(t.LanguageUtils.language_Achievement_Title),this.addTouchEvent(this.btnConfim,this.onClick)},i.prototype.onClick=function(){t.ViewManager.ins().close(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e[0],s=t.GlobalConfig.AchieveConfig[t.AchievementMgr.ins().pageIndex][n];this.lbDetail.text=s.achievement;var a=new eui.ArrayCollection;a.source=s.award,this.listGift.itemRenderer=t.AchieveDetailItemView,this.listGift.dataProvider=a},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.btnConfim,this.onClick)},i}(t.BaseEuiView);t.AchievementDetailedView=e,__reflect(e.prototype,"app.AchievementDetailedView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;return n._resources=null,n._myParent=i,n._isInit=!1,t.StageUtils.ins().getStage().addEventListener(egret.Event.RESIZE,n.onResize,n),n}return __extends(i,e),i.prototype.setResources=function(t){this._resources=t},Object.defineProperty(i.prototype,"myParent",{get:function(){return this._myParent},enumerable:!0,configurable:!0}),i.prototype.isInit=function(){return this._isInit},i.prototype.isShow=function(){return null!=this.stage&&this.visible},i.prototype.addToParent=function(){this._myParent.addChild(this)},i.prototype.removeFromParent=function(){t.DisplayUtils.removeFromParent(this)},i.prototype.initUI=function(){this._isInit=!0},i.prototype.initData=function(){},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},i.prototype.destroy=function(){this._myParent=null,this._resources=null},i.prototype.onResize=function(){},i.prototype.loadResource=function(e,i){this._resources&&this._resources.length>0?t.ResourceUtils.ins().loadResource(this._resources,[],function(){e(),i()},null,this):(e(),i())},i.prototype.setVisible=function(t){this.visible=t},i.openCheck=function(){return!0},i}(egret.DisplayObjectContainer);t.BaseSpriteView=e,__reflect(e.prototype,"app.BaseSpriteView",["app.IBaseView"])}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.btnGet,this.onClick),this.addTouchEvent(this.btnShow,this.onClick)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.updateAchieveState=function(){this.btnGet.visible=!1,this.achievementData.nSate=2,this.reachedIcon.visible=!0},i.prototype.dataChanged=function(){if(null!=this.data){this.protxt.text=t.LanguageUtils.language_Achievement_Txtpro,this.achievementData=this.data;var e=t.GlobalConfig.AchieveConfig[t.AchievementMgr.ins().pageIndex],i=e&&e[this.achievementData.id];this.lbTitle.text=i&&i.name,this.lbTarget.text=i&&i.achievement,this.achievementData.condition1&&this.achievementData.condition2?this.achievementData.condition1<=this.achievementData.complete1||this.achievementData.condition2<=this.achievementData.complete2?(this.lbProgress.textColor=2682369,this.lbProgress.text="1/1"):(this.lbProgress.textColor=13348219,this.lbProgress.text="0/1"):this.achievementData.condition1?(this.achievementData.condition1<=this.achievementData.complete1?(this.lbProgress.textColor=2682369,this.achievementData.complete1=this.achievementData.condition1):this.lbProgress.textColor=13348219,this.lbProgress.text=this.achievementData.complete1+"/"+this.achievementData.condition1):(this.achievementData.condition2<=this.achievementData.complete2?(this.lbProgress.textColor=2682369,this.achievementData.complete2=this.achievementData.condition2):this.lbProgress.textColor=13348219,this.lbProgress.text=this.achievementData.complete2+"/"+this.achievementData.condition2),0==this.achievementData.nSate?(this.btnGet.visible=!1,this.reachedIcon.visible=!1):1==this.achievementData.nSate?(this.btnGet.label=t.LanguageUtils.language_Achievement_GetText,this.btnGet.enabled=!0,this.btnGet.visible=!0,this.reachedIcon.visible=!1):(this.btnGet.visible=!1,this.reachedIcon.visible=!0),this.itemIndex%2==1?(this.state_0.visible=!0,this.state_1.visible=!1):(this.state_0.visible=!1,this.state_1.visible=!0)
}},i.prototype.onClick=function(e){e.currentTarget==this.btnShow?t.ViewManager.ins().isShow(t.AchievementDetailedView)?(t.ViewManager.ins().close(t.AchievementDetailedView),t.ViewManager.ins().open(t.AchievementDetailedView,this.achievementData.id)):t.ViewManager.ins().open(t.AchievementDetailedView,this.achievementData.id):1==this.achievementData.nSate&&(t.AchievementMgr.ins().sendAchievementGetGift(this.achievementData.id),this.btnGet.enabled=!1)},i.prototype.destroy=function(){for(this.achievementData=null,this.data=null,this.state_0.source="",this.state_1.source="",this.lbTitle.text="",this.lbTarget.text="",this.lbProgress.text="",this.reachedIcon.source="",this.btnGet.icon="",this.protxt.text="";this.gp.numChildren>0;){var t=this.gp.getChildAt(0);t&&(t=null),this.gp.removeChildAt(0)}this.gp=null},i}(t.BaseItemRender);t.AchievementItemView=e,__reflect(e.prototype,"app.AchievementItemView")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.getViewPos=function(e){var i=t.GlobalConfig.PlayFunConfigPos;for(var n in i)if(i[n]&&i[n].view&&e==i[n].view)return i[n].pos;return null},e.OPENVIEW_DEFAULT={},e.OPENVIEW_CENTER={verticalCenter:0,horizontalCenter:0},e.OPENVIEW_CENTER2={verticalCenter:-80,horizontalCenter:-20},e}();t.UIOpenViewMode=e,__reflect(e.prototype,"app.UIOpenViewMode")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.getCrossServerActTab=function(e){var i=[],n=t.GlobalConfig.ACTcrossServerTabCfg[e];for(var s in n)i.push(n[s]);return i},i.prototype.getCrossServerActRed=function(){var e=0,i=t.GameSocket.IsCrossService?2:1,n=t.GlobalConfig.ACTcrossServerTabCfg[i];for(var s in n){var a=t.ActvityMgr.ins().getActivityConfigById(n[s].activityid);if(a&&a.buttoncolor){var r=t.ActvityMgr.ins().getActivityInfo(n[s].activityid);if(r&&r.redDot){e=a.buttoncolor;break}}}return e},i}(t.BaseSystem);t.CrossServerMgr=e,__reflect(e.prototype,"app.CrossServerMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.tabArr=[],t._curIndex=-1,t.openActID=0,t._actID=0,t.skinName="CrossServerActViewSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(;e[0]instanceof Array;)e=e[0];e[0]&&(t.GameSocket.IsCrossService?this.openActID=e[1]:this.openActID=e[0]),this.itemArrayCollection=new eui.ArrayCollection,this.tabScroller.verticalScrollBar.autoVisibility=!1,this.tabScroller.verticalScrollBar.visible=!1,this.rewardsList.itemRenderer=t.ItemBase,this.tabList.itemRenderer=t.ActivityTabView,this.tabList.dataProvider=this.itemArrayCollection,this.ruleLab.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+this.ruleLab.text+"<u>"),this.ruleLab2.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+this.ruleLab2.text+"<u>"),this._curIndex=0,t.MouseScroller.bind(this.tabScroller),this.tabList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.setOpenIndex,this),this.addTouchEvent(this.enterBtn,this.onClick),this.addTouchEvent(this.ruleLab,this.onClick),this.addTouchEvent(this.ruleLab2,this.onClick),this.actPath.addEventListener(egret.TextEvent.LINK,this.Npctransfer,this),this.observe(t.ActvityMgr.ins().post_25_3,this.updateCurInfo),this.observe(t.ActvityMgr.ins().post_25_4,this.updateCurInfo),this.observe(t.ActvityMgr.ins().post_25_5,this.updateCurInfo);var n=t.GameSocket.IsCrossService?2:1;if(this.tabArr=t.CrossServerMgr.ins().getCrossServerActTab(n),this.setTabArr(),0!=this.openActID){for(var s=0;s<this.tabList.dataProvider.length;s++){var a=this.tabList.dataProvider.getItemAt(s);if(a.activityid==this.openActID){this._curIndex=s;break}}this._curIndex>6&&(this.tabScroller.validateNow(),this.tabScroller.viewport.scrollV=this.tabScroller.viewport.contentHeight-this.tabScroller.viewport.height)}this.tabList.selectedIndex=this._curIndex,this.setOpenIndex()},i.prototype.setTabArr=function(){if(this.tabArr){var t=[];for(var e in this.tabArr)t.push(this.tabArr[e]);t.sort(this.tabSort),this.itemArrayCollection.replaceAll(t)}},i.prototype.tabSort=function(e,i){var n=t.ActvityMgr.ins().getActivityInfo(e.activityid),s=t.ActvityMgr.ins().getActivityInfo(i.activityid);if(n&&s){if(e.sortact>i.sortact)return-1;if(e.sortact<i.sortact)return 1}else{if(n||s)return n&&!s?-1:1;var a=t.ActvityMgr.ins().getActivityConfigById(e.activityid),r=t.ActvityMgr.ins().getActivityConfigById(i.activityid),o=t.ViewManager.ins().isCheckOpen(a.openParam),l=t.ViewManager.ins().isCheckOpen(r.openParam);if(o&&!l)return-1;if(!o&&l)return 1;if(e.sortact<i.sortact)return-1;if(e.sortact>i.sortact)return 1}},i.prototype.updateCurInfo=function(){this.setTabArr(),this.setOpenIndex()},i.prototype.setOpenIndex=function(){this._curIndex=this.tabList.selectedIndex;var e=this.tabList.dataProvider.getItemAt(this.tabList.selectedIndex);if(e){var i=t.ActvityMgr.ins().getActivityConfigById(e.activityid);i&&(this._actID=e.activityid,this.rewardsList.dataProvider=new eui.ArrayCollection(i.rewards),this.enterBtn.visible=i.rewardBtn?!0:!1,this.enterBtn.label=i.rewardBtn?i.rewardBtn:"",i.ruleID?(this.ruleTips.visible=!0,this.ruleTips.ruleId=i.ruleID):this.ruleTips.visible=!1,this.actTitle.textFlow=t.TextFlowMaker.generateTextFlow(i.Ntipstext_1),this.actTime.textFlow=t.TextFlowMaker.generateTextFlow(i.Ntipstext_2),this.actDesc.textFlow=t.TextFlowMaker.generateTextFlow(i.Ntipstext_3),i.Ntipstext_4?this.actPath.textFlow=t.TextFlowMaker.generateTextFlow1(i.Ntipstext_4):this.actPath.text="")}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.enterBtn:if(t.GameSocket.IsCrossService||36==this._actID)t.ActvityMgr.ins().enterActivity(this._actID),t.ViewManager.ins().close(t.CrossServerWin);else{var i=t.ActvityMgr.ins().getActivityConfigById(this._actID);i&&(t.ViewManager.ins().isCheckOpen(i.openParam)?t.ActvityMgr.ins().send_25_1(this._actID,t.Operate.cKuaFu):t.UserTips.ins().showUITips("|C:0xff7700&T:参与该活动需要开服"+i.openParam.openDay+"天及转生达到"+i.openParam.zsLevel+"转|"))}t.ViewManager.ins().close(this);break;case this.ruleLab:t.ViewManager.ins().isShow(t.RuleView)||t.ViewManager.ins().open(t.RuleView,{id:this.ruleTips1.ruleId});break;case this.ruleLab2:t.ViewManager.ins().close(t.RuleView);for(var n in t.GlobalConfig.CrossServerGroupConf){var s=t.GlobalConfig.CrossServerGroupConf[n];if(t.GlobalData.sectionOpenDay<=s.id){t.ViewManager.ins().open(t.RuleView,{id:s.ruleid});break}}}},i.prototype.Npctransfer=function(e){var i=e.text,n=i.split(","),s=t.EntityMgr.ins().getPayer;if(s){var a=s.ifFindTask(+n[2],+n[0],+n[1]);if(a&&-1==a.x&&-1==a.y)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips121);s.setTask(+n[2],+n[0],+n[1],-1,-1,0,+n[3])}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.tabScroller),this.removeTouchEvent(this.ruleLab,this.onClick),this.removeTouchEvent(this.ruleLab2,this.onClick),this.removeTouchEvent(this.enterBtn,this.onClick),this.tabList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.setOpenIndex,this),this.tabArr=null},i}(t.BaseEuiView);t.CrossServerActView=e,__reflect(e.prototype,"app.CrossServerActView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){this.data&&(1==this.data.type?this.label.text="系统":2==this.data.type&&(this.label.text="战斗"),this.chatLab.textFlow=t.TextFlowMaker.generateTextFlow1(this.data.msg))},i}(t.BaseItemRender);t.CrossServerDetailsItemView=e,__reflect(e.prototype,"app.CrossServerDetailsItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="CrossServerDetailsSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.MouseScroller.bind(this.msgScroller),this.msgList.itemRenderer=t.CrossServerDetailsItemView,this.msgArray=new eui.ArrayCollection,this.msgList.dataProvider=this.msgArray,this.msgScroller.verticalScrollBar.autoVisibility=!1,this.msgScroller.verticalScrollBar.visible=!1,this.observe(t.ChatMgr.ins().post_9_11,this.refushBarList),t.TimerManager.ins().doTimer(5e3,0,this.sentMsg,this);var n=t.ChatMgr.ins().kfNoticeAry;this.refushBarList(n),this.sentMsg()},i.prototype.sentMsg=function(){t.ChatMgr.ins().requestKFNotice()},i.prototype.refushBarList=function(t){this.msgArray.replaceAll(t),this.msgScroller.validateNow(),this.msgScroller.viewport.contentHeight>this.msgScroller.viewport.height&&(this.msgScroller.viewport.scrollV=this.msgScroller.viewport.contentHeight-this.msgScroller.viewport.height)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.TimerManager.ins().removeAll(this),t.MouseScroller.unbind(this.msgScroller),this.msgArray=null},i}(t.BaseEuiView);t.CrossServerDetailsView=e,__reflect(e.prototype,"app.CrossServerDetailsView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lastIndex=0,t.idx=0,t.skinName="CrossServerWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.SoldierSoulTabBarWin;var i=t.GameSocket.IsCrossService?[{icon:"kf_fanye_hd",view:"app.CrossServerActView",title:"kf_kfzc"}]:[{icon:"kf_fanye_hd",view:"app.CrossServerActView",title:"kf_kfzc"},{icon:"kf_fanye_xq",view:"app.CrossServerDetailsView",title:"kf_kfxq"}];this.tabBar.dataProvider=new eui.ArrayCollection(i)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e&&e[0]&&(this.idx=e[0]),this.observe(t.ActvityMgr.ins().post_25_1,this.refreshRed),this.observe(t.ActvityMgr.ins().post_25_2,this.refreshRed),this.observe(t.ActvityMgr.ins().post_25_3,this.refreshRed),this.observe(t.ActvityMgr.ins().post_25_4,this.refreshRed),this.observe(t.ActvityMgr.ins().post_25_5,this.refreshRed),this.lastIndex=0,this.tabBar.selectedIndex=0,this.addTouchEvent(this.closeBtn,this.onClick),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.updateView(this.lastIndex),this.refreshRed()},i.prototype.updateView=function(e){void 0===e&&(e=0),this.curPanel&&(this.curPanel.close(),t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel=null);var i=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(i){this.titleImg.source=i.title+"";var n=egret.getDefinitionByName(i.view);n&&(this.curPanel=new n,this.curPanel&&(this.curPanel.left=0,this.curPanel.right=0,this.curPanel.top=0,this.curPanel.bottom=0,this.infoGrp.addChild(this.curPanel),this.curPanel.open(this.idx)))}},i.prototype.onBarItemTap=function(t){this.lastIndex!=t.itemIndex&&(this.lastIndex=t.itemIndex,this.updateView(this.lastIndex))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.refreshRed=function(){var e=t.CrossServerMgr.ins().getCrossServerActRed();e>0?(this.redPoint.visible=!0,this.redPoint.setRedImg(e)):this.redPoint.visible=!1},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this)},i}(t.BaseEuiView);t.CrossServerWin=e,__reflect(e.prototype,"app.CrossServerWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.state_1="rank_bg2",t.state_2="rank_bg3",t.colorRank=[16718530,16742144,1769471],t.skinName="CrossServerRankListItemSkin",t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onMouseDouble,this)},i.prototype.onMouseDouble=function(t){console.log("鼠标双击"),this.callFunc&&this.callFunc()},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var t=this.data,e=t.index%2==0?this.state_1:this.state_2;this.bg.$setTexture(RES.getRes(e)),this.select.visible=1==t.isSelected?!0:!1,t.rank<4?(this.txt_name.textColor=this.colorRank[t.rank-1],this.rankImg.visible=!0,this.txt_rank.visible=!1,this.rankImg.source="rank_pm"+t.rank):(this.txt_name.textColor=15064527,this.rankImg.visible=!1,this.txt_rank.visible=!0,this.txt_rank.text=t.rank+""),this.playerId=t.playerId,this.txt_guild.text=t.guildName,this.txt_name.text=t.name,this.txt_level.text=t.levelDes;t.superPL;this.callFunc=t.callFunc}},i.prototype.destroy=function(){this.removeEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onMouseDouble,this),this.callFunc&&(this.callFunc=null),this.data=null,this.bg.source="",t.DisplayUtils.removeFromParent(this)},i}(t.BaseItemRender);t.CrossServerRankListItemView=e,__reflect(e.prototype,"app.CrossServerRankListItemView")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._itemArrayCollection=null,this.curIdx=-1,this._container=t,t&&(this._itemArrayCollection=new eui.ArrayCollection,this.init())}return e.prototype.init=function(){this._scrollViewContainer=new t.ScrollViewContainer(this._container),this._scrollViewContainer.callFunc([null,null,this.onItemTap],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.scrollPolicyH=eui.ScrollPolicy.OFF,this._scrollViewContainer.scrollPolicyV=eui.ScrollPolicy.OFF,this._scrollViewContainer.itemRenderer=t.CrossServerRankListItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.dataAry=[]},e.prototype.setRankByType=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),this.callFunc1=i,this.callFunc2=n,this.curIdx=0;var s,a=[],r=t.ModelManager.ins().rankModel.dicRank[e],o="";if(r&&r.list.length>0){for(var l=r.list,h=0;h<l.length;h++){s=l[h],o=s.circle>0?s.circle+t.LanguageUtils.language_Common_0+s.level:s.level+"";var p=0;0==h&&(p=1,i&&i({close:1,playerID:s.playerId})),a.push({index:h,isSelected:p,playerId:s.playerId,rank:s.rank,name:s.name,levelDes:o,superPL:s.superPL,guildName:s.guildName,callFunc:this.callFunc.bind(this)})}this.setData(a)}else this.setData([]);n&&n({data:a})},e.prototype.onClickSelectHandler=function(e){void 0===e&&(e=null),t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_INSIDE)},e.prototype.onItemTap=function(t,e,i,n){this.curIdx>=0&&this.dataAry[this.curIdx]&&(this.dataAry[this.curIdx].isSelected=0,this._itemArrayCollection.replaceItemAt(this.dataAry[this.curIdx],this.curIdx)),this.dataAry[e].isSelected=1,this._itemArrayCollection.replaceItemAt(this.dataAry[e],e),this._itemArrayCollection.refresh(),this.curIdx=e,this._rankListItemView=n,this.callFunc1&&this.callFunc1({playerID:t.playerId,close:1}),console.log("onItemTap:",t.playerId)},e.prototype.onMouseDouble=function(){this.callFunc&&this.callFunc(),console.log("mouseDouble")},e.prototype.setData=function(t){this.creatItem(t)},e.prototype.creatItem=function(e){t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0,this.curIdx=0;for(var i=0;i<e.length;++i)this.dataAry.push(e[i]);this._itemArrayCollection.replaceAll(this.dataAry),this._itemArrayCollection.refresh()},e.prototype.callFunc=function(){this._rankListItemView&&this.callFunc1&&this.callFunc1({view:this._rankListItemView,pos:{x:750,y:20}})},e.prototype.destroy=function(){for(;this._list.numChildren>0;){var e=this._list.getChildAt(0);e.destroy(),e=null}this._scrollViewContainer.destory(),this._scrollViewContainer=null,this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0,this.dataAry=null,this.callFunc1&&(this.callFunc1=null),this.callFunc2&&(this.callFunc2=null),this._rankListItemView&&(this._rankListItemView=null)},e}();t.CrossServerRankListView=e,__reflect(e.prototype,"app.CrossServerRankListView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.tabArr=[],t.selectedItem=0,t.skinName="CrossServerRankViewSkin",t.touchEnabled=!1,t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.ModelManager.ins().rankModel.init(),this.rankType=t.RankDetailType.CrossServerAllLevel,this.roleInnerModel=new t.RoleInnerModel(this.modelGroup),this.flipPage=new t.FlipPage(this.btn_home,this.btn_pre,this.btn_next),this.flipPage.maxLength=10,this.flipPage.addEventListener(t.CompEvent.PAGE_CHANGE,this.onPageChange,this),this.rankListView=new t.CrossServerRankListView(this.rank_list),this.rank_no.visible=t.GlobalData.sectionOpenDay<2,this.menu_group.visible=!1,this.itemArrayCollection=new eui.ArrayCollection,this.rankRightMenuView=new t.RankRightMenuView,this.menu_group.addChild(this.rankRightMenuView),this.rank_guild.text=t.LanguageUtils.language_Friend_Txt3+"："+t.LanguageUtils.language_Omission_txt89,this.addTouchEvent(this.btn_operation,this.onOperation),this.tabArr=t.ModelManager.ins().rankModel.getRankTab(),this.tabArr&&this.onChangeTab(0),t.EventManager.ins().addEvent(t.CompEvent.RANK_SHOW_LIST,this.onShowList,this),t.DefaultMgr.ins().send_0_23(this.rankType),this.observe(t.DefaultMgr.ins().post_s_0_71,this.setRankListData),this.observe(t.EquipMgr.ins().post_7_8,this.setModel)},i.prototype.onShowList=function(t){t==this.rankType&&this.setRankListData([this.rankType])},i.prototype.onTabTouch=function(t){this.onChangeTab(t.currentTarget.selectedIndex)},i.prototype.setRankListData=function(e){var i=e[0];i==this.rankType&&(this.rankListView.setRankByType(i,this.onMenu.bind(this),this.onPageData.bind(this)),this.rank_no.visible=null==t.ModelManager.ins().rankModel.dicRank[i]||void 0==t.ModelManager.ins().rankModel.dicRank[i]||0==t.ModelManager.ins().rankModel.dicRank[i].list.length,this.playerRankInfo(i))},i.prototype.playerRankInfo=function(e){void 0===e&&(e=0);var i=t.EntityMgr.ins().getPayer,n=i.propSet.getLevel(),s=i.propSet.getGuildName();""==s?this.rank_guild.text=t.LanguageUtils.language_Friend_Txt3+"："+t.LanguageUtils.language_Omission_txt89:this.rank_guild.text=t.LanguageUtils.language_Friend_Txt3+"："+s;var a=t.GlobalConfig.RankConfig.openlv,r=t.GlobalConfig.RankConfig.loadlv;a>n?this.rank_desc.text=t.LanguageUtils.language_Omission_txt22:n>=a&&r>n?this.rank_desc.text=t.LanguageUtils.language_Omission_txt23:t.ModelManager.ins().rankModel.dicRank[e]&&t.ModelManager.ins().rankModel.dicRank[e].myData.rank>0?this.rank_desc.text=t.LanguageUtils.language_FuBen_Text7+t.ModelManager.ins().rankModel.dicRank[e].myData.rank:this.rank_desc.text=t.LanguageUtils.language_Omission_txt23},i.prototype.onChangeTab=function(e){t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_LEVEL)},i.prototype.onMenu=function(e){e.playerID&&(this.selectedItem=e.playerID,t.GameMap.isForbiddenArea?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips118):t.EquipMgr.ins().send_7_8(this.selectedItem,t.GameSocket.IsCrossService?1:2))},i.prototype.showMenu=function(){t.EquipItemMgr.ins().sendQueryOthersEquips(this.selectedItem,t.GameSocket.IsCrossService?1:2)},i.prototype.onPageData=function(t){var e=t.data;e&&this.flipPage.setData(e),this.flipPage.currentPage=1},i.prototype.onPageChange=function(t){var e=t.data;e&&0==e.length?this.rank_no.visible=!0:this.rank_no.visible=!1;for(var i=0;i<e.length;i++)0==i?(e[i].isSelected=1,this.onMenu({playerID:e[i].playerId})):e[i].isSelected=0;this.rankListView.setData(e),this.pageLab.text=this.flipPage.getPageText()},i.prototype.callfunc=function(e){var i=this;e>=4&&(e+=1),t.DefaultMgr.ins().send_0_23(e,100,function(){i.setRankListData([e])})},i.prototype.setModel=function(t){var e=t.equips;this.roleInnerModel.setOtherData(e,t)},i.prototype.closeView=function(){t.ViewManager.ins().close(this)},i.prototype.onOperation=function(){0!=this.selectedItem&&this.showMenu()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.rankListView&&this.rankListView.destroy(),this.rankRightMenuView&&this.rankRightMenuView.destroy(),this.dragDropUI=null,this.rankListView=null,this.rankRightMenuView=null,this.flipPage&&(this.flipPage.removeEventListener(t.CompEvent.PAGE_CHANGE,this.onPageChange,this),this.flipPage.destory(),this.flipPage=null),this.itemArrayCollection.removeAll(),this.itemArrayCollection=null,this.menu_group.numElements>0&&this.menu_group.removeChildren(),t.DisplayUtils.removeFromParent(this.menu_group),this.rank_list.numElements>0&&this.rank_list.removeChildren(),t.DisplayUtils.removeFromParent(this.rank_list),this.roleInnerModel&&this.roleInnerModel.destory(),this.roleInnerModel=null,this.btn_home=this.btn_pre=this.btn_next=null,this.btn_operation=null,t.EventManager.ins().removeEvent(t.CompEvent.RANK_SHOW_LIST,this.onShowList,this),this.removeTouchEvent(this.btn_operation,this.onOperation),this.removeFromParent()},i}(t.BaseEuiView);t.CrossServerRankView=e,__reflect(e.prototype,"app.CrossServerRankView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="CrossServerWorshipItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.check,this.onClick),this.addTouchEvent(this.worship,this.onClick),this.roleInnerModel=new t.RoleInnerModel(this.modelGroup)},i.prototype.initData=function(e,i,n,s){this.sexjob=e,this.configData=n,this.imgTitle.source=i,this.playName.text=this.configData.name,this.callFun=s,this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.playFileEff(ResDirEnum.RES_DIR_WORSHIP+this.configData.background,-1),this.playEff.addChild(this.mc))},i.prototype.dataChanged=function(){if(this.data){var t=this.data;this.playName.text=t.name,t.otherInfo&&(this.roleInnerModel.setOtherData(t.otherInfo.equips,t.otherInfo),this.playEff.removeChildren())}},i.prototype.updateTimes=function(e){this.count.text=t.LanguageUtils.language_Common_61+e},i.prototype.onClick=function(t){switch(t.currentTarget){case this.check:this.callFun("check",this.sexjob);break;case this.worship:this.callFun("worship",[this.configData.id])}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.check,this.onClick),this.removeTouchEvent(this.worship,this.onClick),this.mc&&(this.mc.destroy(),this.mc=null)},i}(t.BaseItemRender);t.CrossServerWorshipItem=e,__reflect(e.prototype,"app.CrossServerWorshipItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._actID=36,i.lastIdx=0,i.sexjobArr=["1","2","3","1001","1002","1003"],i.itemTitleArr=["kf_mb_dynz","kf_mb_dynf","kf_mb_dynd","kf_mb_dyvz","kf_mb_dyvf","kf_mb_dyvd"],i.skinName="CrossServerWorshipWinSkin",i.name="CrossServerWorshipWin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this._actID=e[0]);for(var n=t.GlobalConfig.WorshipMainConfig,s=0;6>s;s++)this["item"+s].initData(this.sexjobArr[s],this.itemTitleArr[s],n[s+1],this.onClickItem.bind(this));this.observe(t.OtherMgr.ins().post_26_65,this.setPlayTitle),this.observe(t.ActvityMgr.ins().postWroshipResult,this.worShipResult),this.observe(t.ActvityMgr.ins().post_25_3,this.setRankListData),this.observe(t.ActvityMgr.ins().post_25_4,this.setRankListData),this.observe(t.OtherMgr.ins().post_26_46,this.otherPlayerView),this.addTouchEvent(this.closeBtn,this.onClick),t.OtherMgr.ins().send_26_73(t.RankDetailType.CrossServerMoBaiRankList,100),t.ActvityMgr.ins().send_25_2(this._actID),this.setRankListData()},i.prototype.setPlayTitle=function(e){if(e&&e.type==t.RankDetailType.CrossServerMoBaiRankList){var i=e.list;if(i)for(var n in i){var s=i[n],a=0;+s.sexjob>1e3?a=3+(+s.sexjob%1e3-1):a+=+s.sexjob-1,this["item"+a].data=s}}},i.prototype.setRankListData=function(){var e=t.ActvityMgr.ins().getActivityInfo(this._actID);if(e&&e.info&&e.info.times>=0)for(var i=0;6>i;i++)this["item"+i].updateTimes(e.info.times)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.onClickItem=function(e,i){if("check"==e)t.OtherMgr.ins().send_26_46(t.RankDetailType.rtMoBaiRankList,i);else if("worship"==e){var n=this["item"+this.lastIdx];n&&(n.worship.touchEnabled=!0),t.ActvityMgr.ins().send_25_1(this._actID,t.Operate.cWorship,i)}},i.prototype.worShipResult=function(e){var i=this;if(e&&0==e.issure){this.lastIdx=e.idx-1;var n=this["item"+this.lastIdx];n.worship.touchEnabled=!1,t.ActvityMgr.ins().send_25_2(this._actID),this.selectMC||(this.selectMC=new t.MovieClip),this.selectMC.stop(),this.selectMC.visible=!0,n.playEff.addChild(this.selectMC),this.selectMC.playFileEff(ResDirEnum.RES_DIR_WORSHIP+"Worship_select",1,function(){i.selectMC.visible=!1,n.worship.touchEnabled=!0},!1),t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2,this.height/2))}},i.prototype.otherPlayerView=function(e){if(0!=e){if(t.ViewManager.ins().isShow(t.OtherPlayerView))return;t.EquipItemMgr.ins().sendQueryOthersEquips(e,t.GameSocket.IsCrossService?1:2)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips57)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.selectMC&&this.selectMC.destroy(),this.selectMC=null},i}(t.BaseEuiView);t.CrossServerWorshipWin=e,__reflect(e.prototype,"app.CrossServerWorshipWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.itemId=302,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.suitBtn,this.onClick)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.suitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.dataChanged=function(){if(this.data){this.allGrp.visible=!0,this.consumeGrp.visible=!1;var e=t.GlobalConfig.AppraisalMainConfig[this.data.type];if(e){var i=e[this.data.id];if(i){this.titleName.text=i.title,this.itemCount.text=i.number[0].count;var n=t.GlobalConfig.StdItems[i.number[0].id];n&&(this.itemIcon.source=n.icon+"");var s=t.ActvityMgr.ins().getActivityInfo(this.data.type);if(s&&s.info&&s.info.item){var a=s.info.item[this.data.id-1];if(this.surplusNum.text=t.LanguageUtils.language_Common_62+a.allNum,4==this.data.id&&(this.surplusNum.text=t.LanguageUtils.language_Common_63),this.expLabel.text=this.data.tips,i.gold){var r=t.ActvityMgr.ins().getActivityConfigById(this.data.type),o=t.BagMgr.ins().getItemCountById(i.number[0].id),l=t.CurrencyUtils.getCurrency(i.gold[0].type);r&&r.buttoncolor&&(this.redPoint.visible=o>=i.number[0].count&&a.allNum>0&&l>=i.gold[0].count&&4!=this.data.id&&3!=this.data.id&&2!=this.data.id,this.redPoint.setRedImg(r.buttoncolor)),this.consumeGrp.visible=i.gold[0].count>0;var h=t.CurrencyUtils.getCurrencyNameIcon(i.gold[0].type);this.moneyImg.source=h[1]+"",this.moneyNum.text=i.gold[0].count+"";var p=t.CurrencyUtils.getCurrency(i.gold[0].type);this.moneyNum.textColor=p>=i.gold[0].count?16777215:15007744}}}}0==this.data.idx&&(this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.txt_get.visible=!1,t.GetPropsView.getPropsTxt(this.txt_get,this.itemId))}else this.allGrp.visible=!1},i.prototype.onGetProps=function(){var e=t.GlobalConfig.GetItemRouteConfig[this.itemId],i=t.ViewManager.ins().getView(t.CrystalIdentifyWin);i&&(t.ViewManager.ins().isShow(t.GaimItemWin)||t.ViewManager.ins().open(t.GaimItemWin,e.itemid,{x:i.x,y:i.y},{height:i.height,width:i.width},1e4))},i.prototype.onClick=function(e){var i=t.GlobalConfig.AppraisalMainConfig[this.data.type],n=t.EntityMgr.ins().getPayer,s=t.ActvityMgr.ins().getActivityInfo(this.data.type);switch(e.currentTarget){case this.suitBtn:if(n&&n.propSet&&i){var a=i[this.data.id],r=n.propSet.getmultipleExp();if(4!=this.data.id&&s&&s.info&&s.info.item){var o=s.info.item[this.data.id-1];if(0==o.allNum)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips53)}if(a)if(r<a.mexp){var l=t.GlobalConfig.CircleLevel[+n.propSet.getZSLevel()];if(l&&+n.propSet.getLevel()<l.levelblock){var h=t.BagMgr.ins().getItemCountById(a.number[0].id);if(1!=this.data.id)h>=a.number[0].count?t.ActvityMgr.ins().send_25_1(this.data.type,t.Operate.cAppraisal,[this.data.id]):(this.onGetProps(),t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips54));else if(s&&s.info&&s.info.item){var o=s.info.item[this.data.id-1];if(o.useNum>=5){if(a.gold&&a.gold[0]){var p=t.CurrencyUtils.getCurrency(a.gold[0].type);if(h>=a.number[0].count&&p>=a.gold[0].count)t.ActvityMgr.ins().send_25_1(this.data.type,t.Operate.cAppraisal,[this.data.id]);else if(h<a.number[0].count)this.onGetProps(),t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips54);else if(p<a.gold[0].count){var u=t.CurrencyUtils.getCurrencyNameIcon(a.gold[0].type);u&&(this.onGetProps(),t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips58,u[0])))}}}else h>=a.number[0].count?t.ActvityMgr.ins().send_25_1(this.data.type,t.Operate.cAppraisal,[this.data.id]):(this.onGetProps(),t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips54))}}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips55)}else{var c=t.CommonUtils.overLength(a.mexp);t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips56,c))}}}},i}(t.BaseItemRender);t.CrystalIdentifyItemView=e,__reflect(e.prototype,"app.CrystalIdentifyItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.actID=-1,i.skinName="CrystalIdentifyWinSkin",i.name="CrystalIdentifyWin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.playList.itemRenderer=t.CrystalIdentifyItemView,this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System54)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.observe(t.ActvityMgr.ins().postCrytaldentifyResult,this.appResult),this.observe(t.ActvityMgr.ins().post_25_3,this.updateList),this.observe(t.ActvityMgr.ins().post_25_4,this.updateList),this.observe(t.BagMgr.ins().post_8_1,this.updateList),this.observe(t.BagMgr.ins().post_8_3,this.updateList),this.observe(t.BagMgr.ins().post_8_4,this.updateList),e[0]&&(this.actID=e[0]),this.updateList()},i.prototype.updateList=function(){if(-1!=this.actID){var e=t.ActvityMgr.ins().getActivitConf(this.actID);if(e){var i=t.GlobalConfig["Activity"+e.ActivityType+"Config"];if(i){var n=i[this.actID];if(n){var s=[],a=t.GlobalConfig.AppraisalMainConfig[n.type],r=0;for(var o in a){var l=a[o];t.ViewManager.ins().isCheckOpen(l.serveropenday)?s.push({type:n.type,id:l.id,idx:r,tips:l.tips}):s.push(null),r++}this.playList.dataProvider=new eui.ArrayCollection(s)}}}}},i.prototype.appResult=function(e){e&&0==e.issure?(t.ActvityMgr.ins().send_25_2(this.actID),t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2,this.height/2))):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips52)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(1e4),this.dragDropUI.destroy(),this.dragDropUI=null,this.playList=null},i}(t.BaseEuiView);t.CrystalIdentifyWin=e,__reflect(e.prototype,"app.CrystalIdentifyWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this
}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onClick)},i.prototype.dataChanged=function(){var e=this.data,i=t.OtherMgr.ins().cumulativeOnlineData;this.ItemData.data=e.reward[0],this.txtDesc.text=e.LimitTxt,this.txtDesc.textColor=15655172,this.getBtn.filters=null,this.descGrp.filters=null,this.getBtn.touchEnabled=!1,this.getBtn.visible=!0,this.txtTimer.visible=!0,this.receiveImg.visible=!1,this.redPoint.visible=!1,this.imgBar.visible=!0,1==t.MathUtils.getValueAtBit(i.received,e.id)?(this.descGrp.filters=t.FilterUtil.ARRAY_GRAY_FILTER,this.getBtn.visible=!1,this.txtTimer.visible=!1,this.receiveImg.visible=!0,this.imgBar.visible=!1,this.effMc&&(this.effMc.destroy(),this.effMc=null)):t.OtherMgr.ins().getRedCumulativeOnlineById(e.id)>0?(this.getBtn.label=t.LanguageUtils.language_Wlelfare_Text2,this.getBtn.touchEnabled=!0,this.txtDesc.textColor=2682369,this.imgBar.source="lj_jdt3",this.redPoint.visible=!0,this.effMc||(this.effMc=t.ObjectPool.pop("app.MovieClip"),this.effMc.touchEnabled=!1,this.effGrp.addChild(this.effMc)),this.effMc.isPlaying||this.effMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_ljjl",-1,null,!1)):(this.getBtn.label=t.LanguageUtils.language_Common_226,this.getBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER,this.imgBar.source="lj_jdt4",this.effMc&&(this.effMc.destroy(),this.effMc=null));var n=i.time+Math.floor((egret.getTimer()-i.time2)/1e3);this.countdownTime=e.onlineTimes-n,this.countdownTime>0?(this.updateCountdownTime(),t.TimerManager.ins().remove(this.updateCountdownTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCountdownTime,this)):this.txtTimer.text=t.LanguageUtils.language_Common_227},i.prototype.updateCountdownTime=function(){this.txtTimer.text=t.LanguageUtils.language_Common_104+t.DateUtils.getFormatBySecond(this.countdownTime,t.DateUtils.TIME_FORMAT_12),this.countdownTime<=0&&(t.TimerManager.ins().remove(this.updateCountdownTime,this),this.txtTimer.text=t.LanguageUtils.language_Common_227),this.countdownTime--},i.prototype.onClick=function(e){t.OtherMgr.ins().send_26_71(this.data.type,this.data.id)},i.prototype.getCurrTimeId=function(){var e=0,i=t.OtherMgr.ins().cumulativeOnlineData,n=i.time+Math.floor((egret.getTimer()-i.time2)/1e3),s=t.GlobalConfig.OnlineTimeRewardConfig[1];for(var a in s){if(n<s[a].onlineTimes&&n>=e)return a;e=s[a].onlineTimes}return 0},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onClick),t.TimerManager.ins().remove(this.updateCountdownTime,this),this.effMc&&(this.effMc.destroy(),this.effMc=null)},i}(t.BaseItemRender);t.CumulativeOnlineItem=e,__reflect(e.prototype,"app.CumulativeOnlineItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.getBtn,this.onClick)},i.prototype.dataChanged=function(){var e=this.data,i=t.OtherMgr.ins().cumulativeOnlineData;this.ItemData.data=e.reward[0],this.receiveImg.visible=t.MathUtils.getValueAtBit(i.received,e.id)>0,this.redPoint.visible=t.OtherMgr.ins().getRedCumulativeOnlineById(e.id)>0,this.getBtn.filters=null,this.getBtn.touchEnabled=!1,1==t.MathUtils.getValueAtBit(i.received,e.id)?(this.getBtn.label=t.LanguageUtils.language_Wlelfare_Text7,this.getBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER,this.effMc&&(this.effMc.destroy(),this.effMc=null)):t.OtherMgr.ins().getRedCumulativeOnlineById(e.id)>0?(this.getBtn.label=t.LanguageUtils.language_Wlelfare_Text2,this.getBtn.touchEnabled=!0,this.effMc||(this.effMc=t.ObjectPool.pop("app.MovieClip"),this.effMc.touchEnabled=!1,this.effGrp.addChild(this.effMc)),this.effMc.isPlaying||this.effMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_ljjl",-1,null,!1)):(this.getBtn.label=e.LimitTxt,this.getBtn.filters=t.FilterUtil.ARRAY_GRAY_FILTER,this.effMc&&(this.effMc.destroy(),this.effMc=null))},i.prototype.onClick=function(e){t.OtherMgr.ins().send_26_71(this.data.type,this.data.id)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.getBtn,this.onClick),this.effMc&&(this.effMc.destroy(),this.effMc=null)},i}(t.BaseItemRender);t.CumulativeOnlineItem2=e,__reflect(e.prototype,"app.CumulativeOnlineItem2")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.itemWidth=140,i.currBarStart=0,i.currBarWidth=0,i.currTimerStart=0,i.currTimerEnd=0,i.cumulTime=0,i.skinName="CumulativeOnlineViewSkin",i.name="CumulativeOnlineView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.bar.mask=this.barMask;var n=t.GlobalConfig.OnlineTimeRewardConfig,s=n[1];this.award1=[];for(var a in s)this.award1.push(s[a]);this.listArr1=new eui.ArrayCollection,this.list.dataProvider=this.listArr1;var r=n[2];this.award2=[];for(var a in r)this.award2.push(r[a]);this.listArr2=new eui.ArrayCollection,this.list2.dataProvider=this.listArr2,this.list.itemRenderer=t.CumulativeOnlineItem,this.list2.itemRenderer=t.CumulativeOnlineItem2,this.observe(t.OtherMgr.ins().post_26_85,this.updateInfo),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.leftBtn,this.onClick),this.addTouchEvent(this.rightBtn,this.onClick),t.OtherMgr.ins().send_26_70(),this.updateInfo()},i.prototype.updateInfo=function(){var e=t.OtherMgr.ins().cumulativeOnlineData,i=t.GlobalConfig.OnlineTimeRewardConfig;for(var n in i[1]){var s=i[1][n].id;if(0==t.MathUtils.getValueAtBit(e.received,s)){this.updateListPos((parseInt(s)-1)*this.itemWidth);break}}this.listArr1.replaceAll(this.award1),this.listArr2.replaceAll(this.award2),this.barBg.width=this.list.width,this.bar.width=this.barBg.width-4,this.cumulTime=e.time+Math.floor((egret.getTimer()-e.time2)/1e3),this.updateCurrIndex(),this.updateCumulTime(),t.TimerManager.ins().remove(this.updateCumulTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCumulTime,this)},i.prototype.updateCumulTime=function(){var e=t.DateUtils.getFormatBySecond(this.cumulTime,t.DateUtils.TIME_FORMAT_9);this.timeLab.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_222,e)),this.updateBar(),this.cumulTime++},i.prototype.updateListPos=function(t){t=Math.max(Math.min(t,this.list.width-this.itemScroller.width),0),egret.Tween.removeTweens(this.itemScroller.viewport),egret.Tween.get(this.itemScroller.viewport).to({scrollH:t},200)},i.prototype.updateBar=function(){var t=0;this.cumulTime<this.currTimerEnd?t=this.currBarStart+(this.cumulTime-this.currTimerStart)/(this.currTimerEnd-this.currTimerStart)*this.currBarWidth:(t=this.currBarStart+this.currBarWidth,this.updateCurrIndex()),this.barMask.width=t},i.prototype.updateCurrIndex=function(){var t=this.getCurrTimeData();this.currTimerStart=t.startTime,this.currTimerEnd=t.endTime,this.cumulTime>this.currTimerEnd?(this.currBarStart=this.barBg.width,this.currBarWidth=0):1==t.id?(this.currBarStart=0,this.currBarWidth=this.itemWidth/2):(this.currBarStart=(t.id-2)*this.itemWidth+this.itemWidth/2,this.currBarWidth=this.itemWidth),this.imgArrow.x=(t.id-1)*this.itemWidth,this.listArr1.replaceAll(this.award1)},i.prototype.onClick=function(e){var i;switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.leftBtn:i=this.itemScroller.viewport.scrollH,i=Math.round(i/this.itemWidth-1)*this.itemWidth,this.updateListPos(i);break;case this.rightBtn:i=this.itemScroller.viewport.scrollH,i=Math.round(i/this.itemWidth+1)*this.itemWidth,this.updateListPos(i)}},i.prototype.getCurrTimeData=function(){var e,i=0,n=t.GlobalConfig.OnlineTimeRewardConfig[1];for(e in n){if(this.cumulTime<n[e].onlineTimes&&this.cumulTime>=i)return{id:parseInt(e),startTime:i,endTime:n[e].onlineTimes};i=n[e].onlineTimes}return{id:parseInt(e),startTime:i,endTime:i}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),t.TimerManager.ins().remove(this.updateCumulTime,this)},i}(t.BaseEuiView);t.CumulativeOnlineView=e,__reflect(e.prototype,"app.CumulativeOnlineView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.oldExpLowValue=-1,i.oldExpHighValue=-1,i.newExpLowValue=-1,i.newExpHighValue=-1,i._recordObj={},i._phoneSkillTipsIsShow=!1,i.isOpenIDCard=!1,i.callObject={},i._microReceive=-1,i.sysId=t.PackageID.Default,i.regNetMsg(3,i.post_g_0_3),i.regNetMsg(4,i.post_g_0_4),i.regNetMsg(5,i.post_g_0_5),i.regNetMsg(6,i.post_g_0_6),i.regNetMsg(7,i.g_0_7),i.regNetMsg(8,i.g_0_8),i.regNetMsg(9,i.g_0_9),i.regNetMsg(10,i.post_g_0_10),i.regNetMsg(13,i.post_g_0_13),i.regNetMsg(14,i.g_0_14),i.regNetMsg(15,i.g_0_15),i.regNetMsg(18,i.g_0_18),i.regNetMsg(19,i.g_0_19),i.regNetMsg(20,i.g_0_20),i.regNetMsg(24,i.g_0_24),i.regNetMsg(25,i.g_0_25),i.regNetMsg(26,i.g_0_26),i.regNetMsg(27,i.g_0_27),i.regNetMsg(28,i.g_0_28),i.regNetMsg(30,i.g_0_30),i.regNetMsg(32,i.g_0_32),i.regNetMsg(35,i.post_g_0_35),i.regNetMsg(40,i.g_0_40),i.regNetMsg(41,i.post_g_0_41),i.regNetMsg(53,i.g_0_53),i.regNetMsg(54,i.g_0_54),i.regNetMsg(55,i.g_0_55),i.regNetMsg(66,i.g_0_66),i.regNetMsg(67,i.g_0_67),i.regNetMsg(68,i.g_0_68),i.regNetMsg(69,i.g_0_69),i.regNetMsg(70,i.post_0_70),i.regNetMsg(71,i.post_s_0_71),i.regNetMsg(72,i.post_0_72),i.regNetMsg(73,i.post_0_73),i.regNetMsg(74,i.post_0_74),i.regNetMsg(75,i.post_0_75),i.regNetMsg(251,i.g_0_251),i.regNetMsg(252,i.g_0_252),i.regNetMsg(253,i.post_g_0_253),i.regNetMsg(254,i.g_0_254),i}return __extends(i,e),i.prototype.clearRecordObj=function(){t.ObjectPool.wipe(this._recordObj)},i.ins=function(){return e.ins.call(this)},Object.defineProperty(i.prototype,"phoneSkillTipsIsShow",{get:function(){return this._phoneSkillTipsIsShow},set:function(t){this._phoneSkillTipsIsShow=t},enumerable:!0,configurable:!0}),i.prototype.post_phoneSkillTips=function(){},i.prototype.postMoneyChange=function(){},i.prototype.postPlayerCreate=function(){},i.prototype.postPlayerChange=function(){},i.prototype.postUpdateTarget=function(t){return t},i.prototype.postUpdateState=function(t,e){return[t,e]},i.prototype.s_0_1=function(e,i,n){void 0===n&&(n=0);var s=this.getBytes(1);s.writeUnsignedInt(e),s.writeUnsignedInt(i),t.LocationProperty.roleId=i,t.BuffMgr.ins().isAddSavior=!0,s.writeInt(n),this.sendToServer(s),s=null,this.callObject={}},i.prototype.s_0_2=function(){var t=this.getBytes(2);t.writeUnsignedInt(Math.floor(egret.getTimer()/1e3)),this.sendToServer(t),t=null},i.prototype.s_0_24=function(t){var e=this.getBytes(24);e.writeByte(t),this.sendToServer(e),e=null},i.prototype.s_0_25_YY=function(t){var e=this.getBytes(25);e.writeByte(t),this.sendToServer(e),e=null},Object.defineProperty(i.prototype,"gamescene",{get:function(){return t.ViewManager.ins().getView(t.GameSceneView)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"zhuanZhiCD",{get:function(){return this._zhuanZhiCD},set:function(t){this._zhuanZhiCD=t},enumerable:!0,configurable:!0}),i.prototype.post_g_0_3=function(e){this.clearRecordObj(),RES.setMaxLoadingThread(8),Main.remLogin(),t.SceneManager.ins().runScene(t.MainScene);var n=e.readNumber();e.readShort();for(var s=t.ObjectPool.pop("app.PropertySet"),a=0;a<t.ActorPropertyModel.numProperties;a++)s.readProperty(a,e);var r=e.readString(),o=r.split("\\"),l=o[0];s.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,""),o.length>1&&""!=o[1]&&(o[2]&&""!=o[2]?s.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,"<"+o[1]+">("+o[2]+")"):s.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,"<"+o[1]+">")),s.setProperty(t.ActorPropertyModel.ACTOR_NAME,l),s.setProperty(t.ActorPropertyModel.ACTOR_RACE,t.ActorRace.Human);var h=e.readUnsignedInt();if(h?this.zhuanZhiCD=Math.floor(t.GlobalFunc.formatMiniDateTime(h)/1e3):this.zhuanZhiCD=0,t.EntityMgr.ins().createPlayer(n,l,s),ReportMgr.reporting(t.ReportDataEnum.LOGIN_SUCCESS,{},null,!1),10007==Main.gameParameter.pfID&&Main.gameParameter.loginType&&gamelib.DeviceUtils.IsNative&&Main.Native_adJustData({type:1}),Main.remLogin(),s.getLevel()<2){var p=t.GlobalConfig.editionConf.StartView;p&&p.view?""!=p.view&&t.ViewManager.ins().open(p.view,p.param):t.ViewManager.ins().open(t.WelcomeView)}if(Main.gameParameter.userInfo){if(!this.isOpenIDCard&&Main.gameParameter.userInfo.hasOwnProperty("fm")){var u=parseInt(Main.gameParameter.userInfo.fm+"");!u&&s.getLevel()>=7&&(this.isOpenIDCard=!0,t.ViewManager.ins().open(t.MainIDCard)),this.s_0_24(u)}if(10001==Main.gameParameter.pfID&&Main.gameParameter.userInfo.hasOwnProperty("client")&&this.s_0_25_YY(parseInt(Main.gameParameter.userInfo.client+"")),(Main.gameParameter.pfID==t.PlatFormID.PF4399||Main.gameParameter.pfID==t.PlatFormID.SOUGOU)&&Main.gameParameter.userInfo.hasOwnProperty("cm")){var c=parseInt(Main.gameParameter.userInfo.cm+"");0==c&&t.ViewManager.ins().open(t.MainAntiAddictionView)}}n=null,o=null,l=null,r=null,s=null,i.ins().postPlayerCreate(),i.ins().postPlayerChange()},i.prototype.showCrossServerView=function(e){var i=t.GlobalConfig.ActivityAutoConfig[e];if(i&&(i.openview&&0==t.GameMap.fubenID&&("app.CrossServerWin"==i.openview?t.ViewManager.ins().open(i.openview,i.actId):t.ViewManager.ins().open(i.openview)),i.actId)){var n=t.ActvityMgr.ins().getActivityInfo(i.actId);n&&0==t.GameMap.fubenID&&t.ActvityMgr.ins().enterActivity(i.actId)}},i.prototype.g_0_67=function(e){var i=e.readUnsignedByte(),n=e.readNumber(),s=t.EntityMgr.ins().getCharRole(n);s&&t.EntityMgr.ins().removeCharRole(s);var a=e.readString().split("\\"),r=a[0],o=t.ObjectPool.pop("app.PropertySet");o.setProperty(t.ActorPropertyModel.ACTOR_NAME,r),o.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,""),o.setProperty(t.ActorPropertyModel.AP_X,e.readShort()),o.setProperty(t.ActorPropertyModel.AP_Y,e.readShort()),o.setProperty(t.ActorPropertyModel.ACTOR_RACE,i),o.setProperty(t.ActorPropertyModel.AP_BODY_ID,e.readUnsignedInt()),o.setProperty(t.ActorPropertyModel.AP_DIR,e.readByte()),o.setProperty(t.ActorPropertyModel.AP_LEVEL,e.readUnsignedShort()),o.setProperty(t.ActorPropertyModel.AP_HP,e.readUnsignedInt()),o.setProperty(t.ActorPropertyModel.AP_MP,e.readUnsignedInt()),o.setProperty(t.ActorPropertyModel.AP_MAX_HP,e.readUnsignedInt()),o.setProperty(t.ActorPropertyModel.AP_MAX_MP,e.readUnsignedInt()),e.readShort(),e.readUnsignedShort(),o.setProperty(t.ActorPropertyModel.AP_STATE,e.readUnsignedInt()),e.readUnsignedInt(),o.setProperty(t.ActorPropertyModel.AP_ACTOR_ID,e.readUnsignedShort()),o.setProperty(t.ActorPropertyModel.MONSTER_LIVETIMEOUT,e.readUnsignedInt());for(var l,h=t.EntityMgr.ins().addCharMonster(n,r,o),p=e.readUnsignedByte(),u=0;p>u;u++)l=t.ObjectPool.pop("app.CharStatus"),l.read(e),h.initBuff(l);e.readByte();o.setProperty(t.ActorPropertyModel.PROP_MONSTER_ASCRIPTIONID,e.readUnsignedInt()),this.post_g_0_67(n),h=null,p=null,l=null},i.prototype.post_g_0_67=function(t){return t},i.prototype.g_0_68=function(e){var i=e.readUnsignedByte(),n=e.readNumber(),s=t.EntityMgr.ins().getCharRole(n);s&&t.EntityMgr.ins().removeCharRole(s);var a=e.readString().split("\\"),r=a[0],o=t.ObjectPool.pop("app.PropertySet");o.setProperty(t.ActorPropertyModel.ACTOR_NAME,r),a.length>1&&o.setProperty(t.ActorPropertyModel.ACTOR_HANDLER_NAME,a[1]),o.setProperty(t.ActorPropertyModel.AP_X,e.readShort()),o.setProperty(t.ActorPropertyModel.AP_Y,e.readShort()),o.setProperty(t.ActorPropertyModel.ACTOR_RACE,i),o.setProperty(t.ActorPropertyModel.AP_BODY_ID,e.readUnsignedInt()),o.setProperty(t.ActorPropertyModel.AP_DIR,e.readByte()),o.setProperty(t.ActorPropertyModel.AP_LEVEL,e.readUnsignedByte()),o.setProperty(t.ActorPropertyModel.AP_HP,e.readUnsignedInt()),o.setProperty(t.ActorPropertyModel.AP_MP,e.readUnsignedInt()),o.setProperty(t.ActorPropertyModel.AP_MAX_HP,e.readUnsignedInt()),o.setProperty(t.ActorPropertyModel.AP_MAX_MP,e.readUnsignedInt()),e.readShort(),e.readUnsignedShort(),o.setProperty(t.ActorPropertyModel.AP_STATE,e.readUnsignedInt()),e.readUnsignedInt(),o.setProperty(t.ActorPropertyModel.ACTOR_HANDLER,e.readNumber()),o.setProperty(t.ActorPropertyModel.AP_ACTOR_ID,e.readUnsignedShort());for(var l,h=t.EntityMgr.ins().addCharMonster(n,r,o),p=e.readUnsignedByte(),u=0;p>u;u++)l=t.ObjectPool.pop("app.CharStatus"),l.read(e),h.initBuff(l);i=null,n=null,s=null,a=null,r=null,o=null,h=null,p=null},i.prototype.g_0_69=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharNpc(i);n&&(n.destroy(),t.EntityMgr.ins().delCharNpc(i));var s=e.readString().split("\\"),a=s[0],r=t.ObjectPool.pop("app.PropertySet");r.setProperty(t.ActorPropertyModel.ACTOR_NAME,a),r.setProperty(t.ActorPropertyModel.AP_ACTOR_ID,e.readUnsignedShort()),r.setProperty(t.ActorPropertyModel.AP_X,e.readShort()),r.setProperty(t.ActorPropertyModel.AP_Y,e.readShort()),r.setProperty(t.ActorPropertyModel.ACTOR_RACE,2),r.setProperty(t.ActorPropertyModel.AP_BODY_ID,e.readUnsignedInt()),r.setProperty(t.ActorPropertyModel.AP_DIR,e.readByte()),t.EntityMgr.ins().addCharNpc(i,a,r),i=null,n=null,s=null,a=null,r=null},i.prototype.post_0_70=function(e){var i,n=e.readByte(),s=e.readInt(),a=t.LanguageUtils.language_System25[n-1],r="";if(a)if(1==n||2==n){if(s>0)r="|C:0xe5ddcf&T:获得：||C:0x28ee01&T:"+a+"*"+s+"|";else{var o=Math.abs(s);r="|C:0xe50000&T:消耗：||C:0x28ee01&T:"+a+"*"+o+"|"}s>0&&(i=a+"+"+s,t.ChatModel.ins().setPersonalData(i)),t.UserTips.ins().showJingYanTips(r)}else r=s>0?"|C:0xFAD264&T:"+a+" +"+s+"|":"|C:0xCF15E1&T:"+a+" "+s+"|",s>0&&(i=a+"+"+s,t.ChatModel.ins().setPersonalData(i)),t.UserTips.ins().showMoneyTips(r);n=null,s=null,a=null,r=null},i.prototype.post_g_0_4=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);n&&t.EntityMgr.ins().removeCharRole(n);var s=t.EntityMgr.ins().getCharRole(i),a=e.readString(),r=a.split("\\"),o=r[0],l=t.ObjectPool.pop("app.PropertySet");l.setProperty(t.ActorPropertyModel.ACTOR_RACE,t.ActorRace.Human),l.setProperty(t.ActorPropertyModel.ACTOR_NAME,o),l.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,""),r.length>1&&""!=r[1]&&(r[2]&&""!=r[2]?l.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,"<"+r[1]+">("+r[2]+")"):l.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,"<"+r[1]+">")),l.setProperty(t.ActorPropertyModel.AP_X,e.readShort()),l.setProperty(t.ActorPropertyModel.AP_Y,e.readShort()),l.setProperty(t.ActorPropertyModel.AP_BODY_ID,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_HP,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_MP,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_MAX_HP,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_MAX_MP,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_MOVE_SPEED,e.readUnsignedShort()),l.setProperty(t.ActorPropertyModel.AP_SEX,e.readByte()),l.setProperty(t.ActorPropertyModel.AP_JOB,e.readByte()),l.setProperty(t.ActorPropertyModel.AP_LEVEL,e.readUnsignedShort()),l.setProperty(t.ActorPropertyModel.AP_ACTOR_CIRCLE,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_WEAPON,e.readUnsignedShort()),l.setProperty(t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY,e.readUnsignedShort()),l.setProperty(t.ActorPropertyModel.BODY_SUIT,e.readInt()),l.setProperty(t.ActorPropertyModel.AP_SOCIAL_MASK,e.readInt()),l.setProperty(t.ActorPropertyModel.AP_FACE_ID,e.readShort()),l.setProperty(t.ActorPropertyModel.AP_ATTACK_SPEED,e.readUnsignedShort()),l.setProperty(t.ActorPropertyModel.AP_DIR,e.readByte()),l.setProperty(t.ActorPropertyModel.AP_STATE,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_VIP_TYPE,e.readInt()),l.setProperty(t.ActorPropertyModel.AP_TEAM_ID,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_ZY_ID,e.readByte()),l.setProperty(t.ActorPropertyModel.AP_ACTOR_HEAD_TITLE,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.ACTOR_NAME_COLOR,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_ACTOR_VIP_GRADE,e.readInt()),l.setProperty(t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE,e.readUnsignedShort()),l.setProperty(t.ActorPropertyModel.ACTOR_FASHION_DISPLAY,e.readUnsignedShort()),l.setProperty(t.ActorPropertyModel.PROP_ACTOR_WEAPON_ID,e.readShort()),l.setProperty(t.ActorPropertyModel.AP_GUILD_ID,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.PROP_ACTOR_MONSTER_BODY,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_EXPLOIT_VALUE,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.ACK_SKILLID,e.readUnsignedShort()),l.setProperty(t.ActorPropertyModel.ACK_SKILLLEVEL,e.readUnsignedShort()),l.setProperty(t.ActorPropertyModel.AP_MALICE_STATE,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_PK_VALUE,e.readUnsignedInt());for(var h,p=e.readUnsignedByte(),u=[],c=0;p>c;c++)h=t.ObjectPool.pop("app.CharStatus"),h.read(e),u.push(h);l.setProperty(t.ActorPropertyModel.AP_ACTOR_ID,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.PROP_AREASTATE1,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.PROP_AREASTATE2,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.ACK_RATE,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_ACTOR_VIP_POINT,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.OFFICIAL_POSITION,e.readUnsignedInt()),l.setProperty(t.ActorPropertyModel.AP_PICKUPPET,e.readInt()),l.setProperty(t.ActorPropertyModel.PROP_ACTOR_CURCUSTOMTITLE,e.readUnsignedInt()),t.GameSocket.IsCrossService||t.ChatMgr.ins().setChatPrivatePlayerListData(o);for(var g=t.EntityMgr.ins().addCharRole(i,o,l),c=0;c<u.length;c++)g.initBuff(u[c]);u=null,i=null,n=null,s=null,r=null,o=null,l=null,g=null,p=null,h=null},i.prototype.post_g_0_5=function(e){var n=e.readNumber(),s=t.EntityMgr.ins().getPayer;n==t.PlayerRoleAI.ins().ackRecog&&t.PlayerRoleAI.ins().addBlackRecog(n),s.lockTarget==n&&(i.ins().postUpdateTarget(0),t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122))),this.post_remDot(n),t.EntityMgr.ins().delGridChar(n),s.remPet(n),s=null,t.MapView.ClearChar(n);var a=t.EntityMgr.ins().getCharRole(n);if(a)return t.EntityMgr.ins().removeCharRole(a),a=null,n;var r=t.EntityMgr.ins().getCharNpc(n);if(r)return r.destroy(),t.EntityMgr.ins().delCharNpc(n),r=null,n;var o=t.EntityMgr.ins().getEntitySp(n);return o?(o.destroy(),t.EntityMgr.ins().delEntitySp(n),o=null,n):void 0},i.prototype.post_g_0_6=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=t.ObjectPool.pop("app.PropertySet");s.readMultiProperty(e.readUnsignedByte(),e);s.getPropValueObj();n.changePropertys(s),t.ObjectPool.push(s),s=null}return i},i.prototype.g_0_7=function(e){var i=t.ObjectPool.pop("app.PropertySet");i.readMultiProperty(e.readUnsignedByte(),e);var n=t.EntityMgr.ins().getPayer;if(n&&n.propSet){var s=i.getPropValueObj();for(var a in s){this.showPlayerAttr(+a,s[a]);var r=+a;r==t.ActorPropertyModel.AP_PK_MODE?t.EventManager.ins().sendEvent(t.CommonEvent.PLAYER_PK_MODE,[s[r]]):r==t.ActorPropertyModel.AP_LEVEL?t.MFRoleMgr.ins().setMyRoleInfoLevel(s[r]):r==t.ActorPropertyModel.AP_ACTOR_CIRCLE&&t.MFRoleMgr.ins().setMyRoleInfoZsLevel(s[r])}var o=n.propSet.getLevel();t.EntityMgr.ins().getPayer.changeRoleProperty(i),s[t.ActorPropertyModel.AP_LEVEL]&&(this.post_updateLevel(),ReportMgr.reporting(t.ReportDataEnum.UPDATE_LEVEL,{prelevel:o},null)),s[t.ActorPropertyModel.AP_ACTOR_CIRCLE]&&this.post_updateZsLevel(),s[t.ActorPropertyModel.AP_ACTOR_HEAD_TITLE]&&this.post_updateTitle(),s[t.ActorPropertyModel.PROP_ACTOR_CURCUSTOMTITLE]&&this.post_updateTitle2(),t.ObjectPool.push(i),2==Object.keys(s).length&&s[t.ActorPropertyModel.ACK_SKILLID]||t.TimerManager.ins().isExists(this.post_g_0_7,this)||t.TimerManager.ins().doTimer(500,1,this.post_g_0_7,this),i=null,s=null}},i.prototype.post_g_0_7=function(){t.TimerManager.ins().remove(this.post_g_0_7,this)},i.prototype.post_updateTitle=function(){},i.prototype.post_updateTitle2=function(){},i.prototype.post_updateLevel=function(){},i.prototype.post_updateZsLevel=function(){},i.prototype.g_0_9=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=e.readShort(),a=e.readShort(),r=e.readUnsignedByte();n.postActionMessage(t.StandardActions.SAM_WALK,s,a,r)}i=null,n=null},i.prototype.post_g_0_10=function(t){this.s_0_2()},i.prototype.g_0_14=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=e.readShort(),a=e.readShort();e.readUnsignedByte();n.postCharMessage(t.StandardActions.SAM_REUSE,s,a,0);var r=e.readUnsignedInt(),o=e.readUnsignedInt();r==t.TranslateDefine.TRANSLATE_MOVIE&&o&&t.SkillEffPlayer.PlayHitEff(o,{x:s,y:a},0)}i=null,n=null,t.TimerManager.ins().doTimer(100,10,this.stopAI,this)},i.prototype.g_0_15=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=e.readShort(),a=e.readShort();n.postActionMessage(t.StandardActions.SAM_RUN,s,a,e.readUnsignedByte())}i=null,n=null},i.prototype.g_0_18=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=e.readShort();if(54==s)return;var a=e.readUnsignedByte(),r=e.readUnsignedByte(),o=e.readNumber(),l=e.readShort(),h=e.readShort();if(n.isMy)n.hitRecog=o;else{var p=t.GlobalConfig.SkillsLevelConf[s];if(p&&(p=t.GlobalConfig.SkillsLevelConf[s][a]),p){var u={skill:p,skillId:s,actorRecog:i,hitRecog:o,targetX:l,targetY:h,dir:r};n.postActionMessage(t.StandardActions.SAM_SPELL,0,0,r,u)}}a=null,r=null,o=null,l=null,h=null}i=null,n=null},i.prototype.g_0_32=function(e){var i=e.readNumber(),n=e.readUnsignedShort(),s=e.readUnsignedShort(),a=e.readUnsignedShort(),r=t.SettingMgr.CloseEff(),o=t.EntityMgr.ins().getPayer;r&&i!=o.recog||t.SkillEffPlayer.PlayHitEff(n,{x:s,y:a},0),i=null,n=null,s=null,a=null},i.prototype.g_0_19=function(e){var i=e.readNumber(),n=e.readNumber(),s=e.readUnsignedShort(),a=e.readUnsignedInt(),r=t.EntityMgr.ins().getCharRole(n),o=t.SettingMgr.CloseEff(),l=t.EntityMgr.ins().getPayer;r&&(o&&i!=l.recog||(a>0&&(113==s?this.postEntityCriticalHit(9,r.x,r.y,"-"+a):121==s?this.postEntityCriticalHit(12,r.x,r.y,"-"+a+"z"):125==s&&this.postEntityCriticalHit(11,r.x,r.y,"-"+a+"z")),t.SkillEffPlayer.PlayHitEff(s,{x:r.currentX,y:r.currentY},0))),i=null,n=null,s=null,r=null},i.prototype.g_0_8=function(e){var i=t.EntityMgr.ins().getPayer,n=e.readUnsignedShort(),s=e.readUnsignedShort();t.EntityMgr.ins().getPayer.refuseNextAction(),i.syncSetCurrentXY(n,s),i.correctAI(),i=null,n=null,s=null},i.prototype.clearMap=function(){t.TimerManager.ins().removeAll(t.GameMap),t.EntityMgr.ins().clearEntity(),this.gamescene&&this.gamescene.map&&(this.gamescene.map.clearAllLayer(),this.gamescene.map.changeMap())},i.prototype.post_g_0_13=function(e){i.ins().postUpdateTarget(0),t.GameMap.parser(e),t.TimerManager.ins().removeAll(t.GameMap),t.EntityMgr.ins().clearEntity(),this.gamescene.map.clearAllLayer(),this.gamescene.map.changeMap();var n=e.readInt(),s=e.readInt(),a=e.readInt();n==t.TranslateDefine.TRANSLATE_MOVIE&&s&&t.EntityMgr.ins().addAppearEff(t.EntityMgr.ins().getPayer.recog,s),t.EntityMgr.ins().addPlayer(t.GameMap.mapX,t.GameMap.mapY);var r=t.GlobalConfig.StaticFubens[t.GameMap.fubenID];if(r&&(r.onHook&&(t.PlayerRoleAI.ins().startAI(),console.log("DefaultMgr：跳转地图开启挂机")),t.GameMap.delayOnHook=r.delayOnHook),this.previous!=t.GameMap.mapID&&(t.EventManager.ins().sendEvent(t.CompEvent.Clear_Timer_Event),t.MoveMgr.ins().post_clearNpcTime()),164!=t.GameMap.mapID&&108!=t.GameMap.mapID&&t.MoveMgr.ins().post_clearDuoBaoTime(),!t.GameSocket.IsCrossService||3!=t.GameMap.mapID&&47!=t.GameMap.mapID&&98!=t.GameMap.mapID)t.GameSocket.IsCrossService&&t.GameMap.fubenID<=0&&(t.ViewManager.ins().isShow(t.FuBenView)&&t.ViewManager.ins().close(t.FuBenView),t.ViewManager.ins().isShow(t.MainTaskWin)||gamelib.DeviceUtils.IsMobile||t.ViewManager.ins().open(t.MainTaskWin));else{var o=t.ActvityMgr.ins().getActivityInfo(26);o&&o.redDot&&(t.ViewManager.ins().isShow(t.FuBenView)||t.ViewManager.ins().open(t.FuBenView),t.ViewManager.ins().isShow(t.MainTaskWin)&&t.ViewManager.ins().close(t.MainTaskWin))}317==t.GameMap.mapID?t.ViewManager.ins().isShow(t.DimensionBossRoleInfo)||t.ViewManager.ins().open(t.DimensionBossRoleInfo):t.ViewManager.ins().isShow(t.DimensionBossRoleInfo)&&t.ViewManager.ins().close(t.DimensionBossRoleInfo),t.GameSocket.IsCrossService&&346==t.GameMap.mapID?t.ViewManager.ins().isShow(t.SecretLandTreasureView)||t.ViewManager.ins().open(t.SecretLandTreasureView):t.ViewManager.ins().isShow(t.SecretLandTreasureView)&&t.ViewManager.ins().close(t.SecretLandTreasureView),t.ViewManager.ins().isShow(t.MagicBossInfoShowView2)||t.ViewManager.ins().open(t.MagicBossInfoShowView2),this.previous=t.GameMap.mapID,n=null,s=null,a=null,r=null,this.stopAI(),this.post_ClearAllAckList(),t.TimerManager.ins().doTimerDelay(2e3,0,1,this.post_ClearAllAckList,this),t.EntityMgr.ins().clearDummy(),t.EntityMgr.ins().resetMakeDummy(!0)},i.prototype.post_ClearAllAckList=function(){t.TimerManager.ins().remove(this.post_ClearAllAckList,this);var e=t.EntityMgr.ins().getPayer;if(e){var i=e.recog;return i}return 0},i.prototype.stopAI=function(){var e=t.EntityMgr.ins().getPayer;t.GameMap.getIsSafe&&(t.TimerManager.ins().removeAll(this),t.PlayerRoleAI.ins().stopAI(),e.stopTask()),e.stopFinding(),e=null},i.prototype.g_0_24=function(e){var i=e.readBoolean(),n=e.readUnsignedByte(),s=0==e.readByte(),a=e.readBoolean(),r=0;a&&(r=e.readUnsignedInt());var o=t.EntityMgr.ins().getPayer;return s?void o.actionAccepted():(i?o.actionAccepted():(o.isLockTurn=!0,o.correctAI(),o.refuseNextAction()),i=null,n=null,s=null,a=null,void(r=null))},i.prototype.g_0_20=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);n&&!n.isMy&&n.postActionMessage(t.StandardActions.SAM_UNDER_ATTACK,0,0,n.dir),i=null,n=null},i.prototype.g_0_25=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);n&&n.postActionMessage(t.StandardActions.SAM_IDLE,0,0,e.readUnsignedByte()),i=null,n=null},i.prototype.g_0_26=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n&&!n.isMy){var s=e.readUnsignedByte(),a=e.readUnsignedByte();e.readUnsignedShort(),n.postActionMessage(t.StandardActions.SAM_NORMHIT,0,0,a,{act:s,skillId:n.propSet.getNextAckSkillId(),level:n.propSet.getNextAckSkillLevel()}),e.readInt()}i=null,n=null},i.prototype.g_0_27=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){n.isMy&&(n.stopTask(),n.stopFinding());var s=e.readUnsignedShort(),a=e.readUnsignedShort(),r=e.readUnsignedByte();n.postActionMessage(t.StandardActions.SAM_TELEPORTING,s,a,r);var o=e.readUnsignedInt(),l=e.readUnsignedInt();o==t.TranslateDefine.TRANSLATE_MOVIE&&l&&t.SkillEffPlayer.PlayHitEff(l,{x:s,y:a},0)}i=null,n=null},i.prototype.g_0_28=function(e){var i=e.readByte();i||t.GameSocket.ins().onClose()},i.prototype.send_0_28=function(t,e){var i=this.getBytes(28);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},i.prototype.g_0_30=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=e.readUnsignedShort(),a=e.readUnsignedShort(),r=e.readUnsignedShort(),o=e.readUnsignedShort();n.postActionMessage(t.StandardActions.SAM_TELEPORTING,r,o,n.dir),n.postActionMessage(t.StandardActions.SAM_UNDER_ATTACK,r,o,n.dir),s=null,a=null,r=null,o=null}i=null,n=null},i.prototype.post_g_0_35=function(e){var n=e.readNumber(),s=e.readNumber(),a=e.readByte(),r=t.EntityMgr.ins().getCharRole(n),o=t.EntityMgr.ins().getPayer;return o.lockTarget==n&&(i.ins().postUpdateTarget(0),t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122)),o.lockTarget=0),s==o.recog&&a>0&&(t.PlayerRoleAI.ins().cdTime=egret.getTimer()+700),r&&(r.isMy&&(t.MapView.m_ack_Char&&t.MapView.ClearChar(t.MapView.m_ack_Char.recog),t.PlayerRoleAI.ins().stopAI(),t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122))),r.deadChar=!0,r.postActionMessage(t.StandardActions.SAM_NOWDEATH,0,0,r.dir),t.EntityMgr.ins().getPayer.remPet(n)),t.MapView.ClearChar(n),s=null,r=null,n
},i.prototype.post_g_0_41=function(e){for(var i=e.readString(),n=e.readUnsignedByte(),s=[0,0,0,0],a=0;n>a;a++)s[a]=e.readInt();t.GameMap.setAreaState(i,s),i=null,n=null,s=null},i.prototype.g_0_40=function(e){var i=t.EntityMgr.ins().getCharRole(e.readNumber());if(i){var n=t.ObjectPool.pop("app.PropertySet");n.setProperty(t.ActorPropertyModel.ACTOR_NAME,e.readString()),i.changePropertys(n),t.ObjectPool.push(n),n=null}i=null},i.prototype.g_0_53=function(e){var i=e.readNumber(),n=e.readUnsignedShort();t.EntityMgr.ins().addEntitySp(i,e.readUnsignedShort(),e.readUnsignedShort(),e.readString()),i=null,n=null},i.prototype.g_0_54=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=e.readShort(),a=e.readShort(),r=e.readUnsignedShort(),o=e.readByte(),l=0==e.readByte()?!0:!1;n.postActionMessage(t.StandardActions.SAM_SPECIAL_MOVE,s,a,o),s=null,a=null,r=null,o=null,l=null}i=null,n=null},i.prototype.g_0_55=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=e.readShort(),a=e.readShort(),r=e.readUnsignedShort(),o=e.readByte(),l=0==e.readByte()?!0:!1;n.postActionMessage(t.StandardActions.SAM_TELEPORTING,s,a,o),n.postActionMessage(t.StandardActions.SAM_UNDER_ATTACK,s,a,o),s=null,a=null,r=null,o=null,l=null}i=null,n=null},i.prototype.g_0_66=function(e){t.EntityMgr.ins().addAppearEff(e.readNumber(),e.readShort())},i.prototype.postEntityHpChange=function(t,e,i,n){return void 0===n&&(n=""),[t,e,i,n]},i.prototype.postEntityCriticalHit=function(t,e,i,n){return void 0===n&&(n=""),[t,e,i,n]},i.prototype.g_0_251=function(e){t.GameSocket.ins().isDoTimer=!1,t.GameSocket.ins().close(),t.ViewManager.ins().open(t.MainBanView,t.LanguageUtils.language_Error_113)},i.prototype.g_0_252=function(e){t.GameSocket.ins().isDoTimer=!1,t.GameSocket.ins().close(),t.ViewManager.ins().open(t.MainBanView,t.LanguageUtils.language_Error_104)},i.prototype.g_0_254=function(t){t.readString()},i.prototype.s_0_21=function(){var t=this.getBytes(21);this.sendToServer(t),t=null},i.prototype.post_g_0_253=function(t){},i.prototype.post_pk=function(){},i.prototype.s_0_5=function(t,e){var i=this.getBytes(5);i.writeNumber(t),i.writeShort(e),this.sendToServer(i),i=null},i.prototype.s_0_5_1=function(t,e,i){var n=this.getBytes(5);n.writeNumber(t),n.writeShort(e),n.writeByte(i),this.sendToServer(n),n=null},i.prototype.send_0_22=function(t,e){var i=this.getBytes(22);i.writeByte(t),i.writeByte(e),this.sendToServer(i),i=null},i.prototype.showPlayerAttr=function(e,i){var n=t.EntityMgr.ins().getPlayerPropertySet(),s=null;if(n&&n.propSet){s=t.PropertySet.getPlayerTips(e,n.propSet.getAP_JOB());var a=0,r=0,o="0xFFFFFF",l="",h=0;if(n.propSet.getAP_JOB()==JobConst.ZhanShi&&e==t.ActorPropertyModel.AP_PHYSICAL_ATTACK_MAX?h=1:n.propSet.getAP_JOB()==JobConst.FaShi&&e==t.ActorPropertyModel.AP_MAGIC_ATTACK_MAX?h=2:n.propSet.getAP_JOB()==JobConst.DaoShi&&e==t.ActorPropertyModel.AP_WIZARD_ATTACK_MAX&&(h=3),0!=h&&(a=n.propSet.getValue(e),r=i-a,r>0&&t.UserTips.ins().showJobAttrTips({curVal:a,tarVal:i,type:h})),a=0,r=0,null!=s&&n&&n.propSet)if(a=n.propSet.getValue(e),r=i-a,e==t.ActorPropertyModel.AP_POPULARITY||e==t.ActorPropertyModel.AP_VALUE);else if(0!=r){var p=1;e==t.ActorPropertyModel.PROP_ACTOR_SPEED_MEDICINE?r>0&&(p=1,o="0xf1ed02",l="|C:"+o+"&T:"+s+" +"+t.MathUtils.GetPercent(r,1e4)+"|"):r>0&&(p=1,o="0xf1ed02",l="|C:"+o+"&T:"+s+" +"+r+"|"),""!=l&&t.UserTips.ins().showAttrTips({str:s,attrNum:r,attrType:p})}n=null,s=null,a=null,o=null,l=null}},i.prototype.send_0_23=function(e,i,n,s){if(void 0===i&&(i=100),void 0===n&&(n=null),void 0===s&&(s=6e5),this._recordObj[e]){if(!(egret.getTimer()-this._recordObj[e]>s))return void t.EventManager.ins().sendEvent(t.CompEvent.RANK_SHOW_LIST,e);this._recordObj[e]=egret.getTimer()}else this._recordObj[e]=egret.getTimer(),n&&n();var a=this.getBytes(23);a.writeShort(e),a.writeByte(i),this.sendToServer(a),a=null},i.prototype.post_s_0_71=function(e){for(var i,n=e.readShort(),s=e.readByte(),a=[],r=0;s>r;r++)i=new t.RankListData,i.isSelected=0,i.rank=r+1,i.playerId=e.readUnsignedInt(),i.level=e.readUnsignedInt(),i.name=e.readString(),i.circle=e.readUnsignedInt(),i.superPL=e.readUnsignedInt(),Main.gameParameter.pfID!=t.PlatFormID.QQGame&&Main.gameParameter.pfID!=t.PlatFormID.YY&&(i.superPL=0),i.sexjob=e.readString(),i.guildName=e.readString(),i.vipLv=e.readString(),a.push(i);var o=e.readUnsignedInt(),l=e.readShort(),h={list:a,myData:{rank:l,value:o}};return t.ModelManager.ins().rankModel.dicRank[n]=h,t.ModelManager.ins().rankModel.type=n,[n,h]},i.prototype.post_0_72=function(e){var i=new Object;i.id=e.readByte(),i.fubenReviveCount=e.readByte();for(var n=e.readByte(),s=[],a=0;n>a;a++)s.push(e.readByte());i.reviveArr=s,i.name=e.readString(),t.ViewManager.ins().open(t.AutoReviveWin,i),s=null,i=null,n=null},i.prototype.post_0_73=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);n&&(n.reset(),n.propSet.setProperty(t.ActorPropertyModel.AP_STATE,0),n.resurgenceChar())},i.prototype.post_0_74=function(t){var e=t.readByte(),i=t.readUnsignedInt(),n=t.readUnsignedInt(),s=t.readUnsignedInt(),a=t.readString();this.callObject[e]={type:e,scenesId:i,x:n,y:s,name:a,time:egret.getTimer()+3e6}},i.prototype.getCallIShow=function(t){var e=this.callObject[t];return e},i.prototype.post_deleteType=function(t){delete this.callObject[t]},i.prototype.post_setTarget=function(t){return t},i.prototype.post_Sent=function(t,e){return[t,e]},i.prototype.post_Get=function(t,e){return[t,e]},i.prototype.sentMsg=function(e,i,n){var s=this.getBytesTwo(e,i);if(""!=n)for(var a=n.split(";"),r=void 0,o=0;o<a.length;o++){if(r=a[o].split("="),r.length<2)return void t.UserTips.ins().showUITips("第"+o+"个参数错误！");if(!s[r[0]])return void t.UserTips.ins().showUITips("无"+r[0]+"类型！");s[r[0]](r[1])}this.sendToServer(s),s=null},i.prototype.post_updatePlayerXY=function(t,e){return[t,e]},i.prototype.post_remDot=function(t){return t},i.prototype.post_updateCharRectColor=function(t,e){return[t,e]},i.prototype.post_updateCharRect=function(t){return void 0===t&&(t=null),t},i.prototype.post_updateMiniBg=function(t,e,i){return[t,e,i]},i.prototype.post_updateOnHook=function(){},i.prototype.post_AttackState=function(){},i.prototype.post_petChange=function(){},i.prototype.post_playerExpChange=function(){},i.prototype.post_playerVIPChange=function(){},i.prototype.post_playerViolentChange=function(){},i.prototype.post_playerGuildConChange=function(){},i.prototype.post_warehouseChange=function(){},i.prototype.post_playerBlessChange=function(){},i.prototype.post_taskMouse=function(){},i.prototype.post_dimensionalKey=function(){},i.prototype.post_playerRectVisChange=function(){},i.prototype.post_gaimItemView=function(t){return t},i.prototype.post_autoReceiveTask=function(){},i.prototype.getRoleRed=function(){var e=t.StrengthenMgr.ins().isSatisStrengthened(),i=t.StrengthenMgr.ins().isEnoughStrengthened(),n=t.FashionMgr.ins().isSatisFashionActOrUpdate(),s=t.OtherMgr.ins().getZSRed(),a=t.SoldierSoulMgr.ins().getWeaponTabRed();return e||i||n||s||a},i.prototype.s_0_26=function(t){var e=this.getBytes(26);e.writeByte(t),this.sendToServer(e),e=null},i.prototype.s_0_27=function(t){var e=this.getBytes(27);e.writeByte(t),this.sendToServer(e),e=null},i.prototype.s_0_29=function(){var t=this.getBytes(29);this.sendToServer(t)},Object.defineProperty(i.prototype,"microReceive",{get:function(){return this._microReceive},set:function(t){this._microReceive=t},enumerable:!0,configurable:!0}),i.prototype.post_0_75=function(t){var e=t.readByte();i.ins().microReceive=e},i.prototype.payResultMC=function(e,i){if(1==e){this.successMC?(this.successMC.stop(),t.DisplayUtils.removeFromParent(this.successMC)):(this.successMC=t.ObjectPool.pop("app.MovieClip"),this.successMC.touchEnabled=!1);var n=this;n.successMC.x=i.x,n.successMC.y=i.y,t.LayerManager.UI_Drag.addChild(n.successMC),this.successMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_lcg",1,function(){n.successMC.stop(),t.DisplayUtils.removeFromParent(n.successMC)})}else if(2==e){this.activationMc?(this.activationMc.stop(),t.DisplayUtils.removeFromParent(this.activationMc)):(this.activationMc=t.ObjectPool.pop("app.MovieClip"),this.activationMc.touchEnabled=!1);var s=this;s.activationMc.x=i.x,s.activationMc.y=i.y,t.LayerManager.UI_Drag.addChild(s.activationMc),this.activationMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jhmsycg",1,function(){s.activationMc.stop(),t.DisplayUtils.removeFromParent(s.activationMc)})}else{this.failMC?(this.failMC.stop(),t.DisplayUtils.removeFromParent(this.failMC)):(this.failMC=t.ObjectPool.pop("app.MovieClip"),this.failMC.touchEnabled=!1);var a=this;a.failMC.x=i.x,a.failMC.y=i.y,t.LayerManager.UI_Drag.addChild(a.failMC),this.failMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_lsb",1,function(){a.failMC.stop(),t.DisplayUtils.removeFromParent(a.failMC)})}},i.prototype.stopSuccessMC=function(){this.successMC.stop(),t.DisplayUtils.removeFromParent(this.successMC)},i.prototype.postUpdateMapStarPatch=function(){},i.prototype.s_0_30_360=function(){var t=this.getBytes(30);this.sendToServer(t),t=null},i.prototype.s_0_31_7game=function(){var t=this.getBytes(31);this.sendToServer(t),t=null},i}(t.BaseSystem);t.DefaultMgr=e,__reflect(e.prototype,"app.DefaultMgr")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.imgNuBg.source="yan_121",this.imgNuBg.visible=!0},e}(t.ItemBase);t.DimensionBossItem=e,__reflect(e.prototype,"app.DimensionBossItem")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.imgNuBg.source="yan_122",this.imgNuBg.visible=!0},e}(t.ItemBase);t.DimensionBossItem2=e,__reflect(e.prototype,"app.DimensionBossItem2")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="DimensionBossListItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.listDataArr1=new eui.ArrayCollection,this.listDataArr2=new eui.ArrayCollection,this.list1.itemRenderer=t.DimensionBossItem,this.list2.itemRenderer=t.DimensionBossItem2,this.list1.dataProvider=this.listDataArr1,this.list2.dataProvider=this.listDataArr2},i.prototype.dataChanged=function(){this.data&&(this.imgTitle.source=this.data.title,this.listDataArr1.replaceAll(this.data.list1),this.listDataArr2.replaceAll(this.data.list2))},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.listDataArr1.removeAll(),this.listDataArr2.removeAll()},i}(t.BaseItemRender);t.DimensionBossListItem=e,__reflect(e.prototype,"app.DimensionBossListItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="DimensionBossRoleInfoSkin",t.name="DimensionBossRoleInfo",t.touchEnabled=!1,gamelib.DeviceUtils.IsMobile?(t.left=0,t.top=60):(t.right=0,t.verticalCenter=-100),t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.ModelManager.ins().bossModel.getDimensionBossCfgList()[0];this.list1.itemRenderer=t.ItemBase,this.list2.itemRenderer=t.ItemBase,this.list3.itemRenderer=t.ItemBase,this.list1.dataProvider=new eui.ArrayCollection(n.ascription),this.list2.dataProvider=new eui.ArrayCollection(n.brave),this.list3.dataProvider=new eui.ArrayCollection(n.partake),this.observe(t.DefaultMgr.ins().post_g_0_3,this.updateView),this.observe(t.DefaultMgr.ins().post_g_0_4,this.updateView),this.observe(t.DefaultMgr.ins().post_g_0_5,this.updateView),this.updateView()},i.prototype.updateView=function(){var e=0,i=t.EntityMgr.ins().getAllEntity();for(var n in i)i[n].isCharRole&&e++;this.labRoleNum.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_237,e))},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeFromParent()},i}(t.BaseEuiView);t.DimensionBossRoleInfo=e,__reflect(e.prototype,"app.DimensionBossRoleInfo"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="DimensionBossSkin",i.name="DimensionBossView",i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.ModelManager.ins().bossModel.getDimensionBossCfgList();if(e[0])for(var s=0;s<n.length;s++)n[s].Serial==e[0]&&(this.bossConfig=n[s]);this.bossConfig||(this.bossConfig=n[0]),this.btn_go.label=t.LanguageUtils.language_Common_234;var a=new Date(t.GlobalData.serverTime),r=a.getHours()*t.DateUtils.SECOND_PER_HOUR+a.getMinutes()*t.DateUtils.SECOND_PER_MUNITE+a.getSeconds(),o="",l=t.LanguageUtils.language_Common_203+"\n";for(var s in this.bossConfig.timeslot){var h=this.bossConfig.timeslot[s];r>=h.StartTime&&r<=h.EndTime&&(o=t.LanguageUtils.language_Common_236+" "+t.DateUtils.getFormatBySecond(h.StartTime,t.DateUtils.TIME_FORMAT_1)+"-"+t.DateUtils.getFormatBySecond(h.EndTime,t.DateUtils.TIME_FORMAT_1)+"   "),l+="\n"+t.DateUtils.getFormatBySecond(h.StartTime,t.DateUtils.TIME_FORMAT_22)+"-"+t.DateUtils.getFormatBySecond(h.EndTime,t.DateUtils.TIME_FORMAT_22)}this.actTime.textFlow=t.TextFlowMaker.generateTextFlow(o),this.actTime2.textFlow=t.TextFlowMaker.generateTextFlow(l),this.labTips.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Tips141),this.rewardItem1.data={title:"kf_cy_gsj",list1:this.bossConfig.defineshowascription,list2:this.bossConfig.chanceshowascription},this.rewardItem2.data={title:"kf_cy_ydj",list1:this.bossConfig.defineshowbrave,list2:this.bossConfig.chanceshowbrave},this.rewardItem3.data={title:"kf_cy_cyj",list1:this.bossConfig.defineshowpartake,list2:this.bossConfig.chanceshowpartake},this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.btn_go,this.onClick),this.observe(t.BossMgr.ins().post_49_1,this.onRefreshData),this.observe(t.BossMgr.ins().post_49_2,this.onEnterMap),t.BossMgr.ins().send_49_1(),this.onRefreshData()},i.prototype.onRefreshData=function(){this.redPoint.visible=!1,this.bg_boss.source="kf_cy_bg1_png",this.imgDead.source="kf_cy_bg6",this.txt_refresh.visible=!1;var e=t.ModelManager.ins().bossModel.getDimensionBossInfo();if(e){var i=e.bossVo;if(i.hpMaxCount>0)this.hpBar.maximum=i.hpMaxCount;else{var n=t.GlobalConfig.Monster[this.bossConfig.entityid],s=t.GlobalConfig.Props[n.propid];this.hpBar.maximum=s.nMaxHpAdd}this.hpBar.value=i.hpCurrent,this.hpBar.labelDisplay.visible=!0,this.redPoint.visible=t.BossMgr.ins().getRedDimensionBoss()>0,i.hpCurrent<=0&&(this.countdownTime=Math.floor((i.refreshTime-t.GlobalData.serverTime)/1e3),this.timeStr="|C:0xff0000&T:"+t.LanguageUtils.language_Omission_txt52+"%s|",this.bg_boss.source="kf_cy_bg5_png",this.imgDead.source="kf_cy_bg4",this.txt_refresh.visible=!0,this.updateCountdownTime(),this.countdownTime>0&&(t.TimerManager.ins().remove(this.updateCountdownTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCountdownTime,this)))}},i.prototype.onEnterMap=function(e){var n=t.GlobalConfig.BossConfig[t.ModelManager.ins().bossModel.bossId];7==n.mold&&n&&0==t.ModelManager.ins().bossModel.isSuccess&&t.ViewManager.ins().close(i,t.LayerManager.UI_Main)},i.prototype.updateCountdownTime=function(){var e;e=this.countdownTime>=t.DateUtils.SECOND_PER_HOUR?t.DateUtils.getFormatBySecond(this.countdownTime,t.DateUtils.TIME_FORMAT_1):t.DateUtils.getFormatBySecond(this.countdownTime,t.DateUtils.TIME_FORMAT_3),this.txt_refresh.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(this.timeStr,e)),this.countdownTime<=0&&(t.TimerManager.ins().remove(this.updateCountdownTime,this),t.BossMgr.ins().send_49_1()),this.countdownTime--},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.btn_go:t.BossMgr.ins().send_49_2(this.bossConfig.Serial,this.bossConfig.entityid)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.btn_go,this.onClick),this.removeFromParent()},i}(t.BaseEuiView);t.DimensionBossView=e,__reflect(e.prototype,"app.DimensionBossView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.data&&(this.data.actorid?(this.moneyLab.visible=!0,this.nameLab.textFlow=t.TextFlowMaker.generateTextFlow("|C:0xeee104&T:"+this.data.name+"|"),this.moneyLab.text=t.LanguageUtils.language_Omission_txt94+":"+this.data.value,this.rankImg.source="jxpm_"+this.data.idx):this.data.content&&(this.moneyLab.visible=!1,this.rankImg.source="jxpm_"+this.data.reward,this.nameLab.textFlow=t.TextFlowMaker.generateTextFlow(this.data.content)))},i}(t.BaseItemRender);t.DonationRankItemRender=e,__reflect(e.prototype,"app.DonationRankItemRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._actID=20,i._curIndex=0,i.descInfo=[],i.rankInfo=[],i.minNum=10,i.curInputNum=0,i.skinName="DonationRankWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_Omission_txt86),this.tabList.itemRenderer=t.TradeLineTabView,this.itemList.itemRenderer=t.DonationRankItemRender},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.donaTionGrp.visible=!1,this.titleLab.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Omission_txt92),this.addTouchEvent(this.donationBtn,this.onClick),this.addTouchEvent(this.sureBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.lessBtn,this.onClick),this.addTouchEvent(this.addBtn,this.onClick),this.addTouchEvent(this.btn_close,this.onClick),this.addTouchEvent(this.jianYiBai,this.onClick),this.addTouchEvent(this.addYiBai,this.onClick),this.observe(t.ActvityMgr.ins().post_25_3,this.getActInfo),this.observe(t.ActvityMgr.ins().post_25_4,this.getActInfo),this.observe(t.ActvityMgr.ins().post_25_5,this.getActInfo),this.tabList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.setOpenIndex,this),t.ActvityMgr.ins().send_25_2(this._actID),this.tabList.dataProvider=new eui.ArrayCollection([{name:t.LanguageUtils.language_Omission_txt87},{name:t.LanguageUtils.language_Omission_txt88}]),this.tabList.selectedIndex=this._curIndex},i.prototype.getActInfo=function(){this.descInfo=[],this.rankInfo=[];var e=t.ActvityMgr.ins().getActivityInfo(this._actID),i=t.ActvityMgr.ins().getActivityConfigById(this._actID);if(i&&(this.minNum=i.minValue,i.rewards))for(var n in i.rewards)this.descInfo.push(i.rewards[n]);if(this.doanaTionDescLab.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt91,this.minNum)),e&&e.info){this.myDonation.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Omission_txt93+":|C:0x28ee01&T:"+e.info.myDonaTion+"|");var s=e.info.myRanking>0?e.info.myRanking+"":"|C:0xe50000&T:"+t.LanguageUtils.language_Omission_txt90+"|";this.myRank.textFlow=t.TextFlowMaker.generateTextFlow(""+t.LanguageUtils.language_FuBen_Text7+s);for(var a in e.info.item)this.rankInfo.push(e.info.item[a])}if(0==this.rankInfo.length)for(var n=0;6>n;n++){var r=new Object;r.actorid=123,r.value=0,r.name=t.LanguageUtils.language_Omission_txt89,r.idx=n+1,this.rankInfo.push(r)}this.updateList(this._curIndex)},i.prototype.setOpenIndex=function(){this._curIndex=this.tabList.selectedIndex,this.updateList(this._curIndex)},i.prototype.updateList=function(t){0==t?this.itemList.dataProvider=new eui.ArrayCollection(this.descInfo):1==t&&(this.itemList.dataProvider=new eui.ArrayCollection(this.rankInfo))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btn_close:case this.closeBtn:this.donaTionGrp.visible=!1;break;case this.lessBtn:this.curInputNum-=this.minNum,this.curInputNum<0&&(this.curInputNum=0),this.inputNum.text=this.curInputNum+"";break;case this.addBtn:this.curInputNum+=this.minNum,this.inputNum.text=this.curInputNum+"";break;case this.sureBtn:0!=this.curInputNum&&this.curInputNum>=this.minNum&&t.ActvityMgr.ins().send_25_1(this._actID,t.Operate.cDonateRank,[this.curInputNum]);break;case this.donationBtn:this.curInputNum=0,this.inputNum.text=this.curInputNum+"",this.donaTionGrp.visible=!0;break;case this.jianYiBai:this.curInputNum-=100,this.curInputNum<0&&(this.curInputNum=0),this.inputNum.text=this.curInputNum+"";break;case this.addYiBai:this.curInputNum+=100,this.inputNum.text=this.curInputNum+""}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.donationBtn,this.onClick),this.removeTouchEvent(this.sureBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.lessBtn,this.onClick),this.removeTouchEvent(this.addBtn,this.onClick),this.removeTouchEvent(this.btn_close,this.onClick),this.removeTouchEvent(this.jianYiBai,this.onClick),this.removeTouchEvent(this.addYiBai,this.onClick),this.tabList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.setOpenIndex,this)},i}(t.BaseEuiView);t.DonationRankWin=e,__reflect(e.prototype,"app.DonationRankWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===s&&(s=!1);var a=t.call(this,e,n,s)||this;return a.data=i,a}return __extends(e,t),e.MENUITEM_SLECT="on_menuitem_slect",e.GOODS_SHOW="on_goods_show",e.PLAY_NAME_SLECT="on_play_name_slect",e.CLEAR_CHAT_INPUT_TEXT="on_clear_chat_input",e.CHAT_PRIVATE_LIST_UPDATE="chat_private_list_update",e.PLAYER_NEAR_SHOW_CHAT="player_near_show_chat",e.CHAT_SHOW_GOODS_TIPS="CHAT_SHOW_GOODS_TIPS",e.CHAT_CHANNEL_CHANGE="CHAT_CHANNEL_CHANGE",e}(egret.Event);t.ChatEvent=e,__reflect(e.prototype,"app.ChatEvent")}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===s&&(s=!1);var a=t.call(this,e,n,s)||this;return a.data=i,a}return __extends(e,t),e.PLAYER_PK_MODE="player_pk_mode",e.SHOW_MSG_ICON="SHOW_MSG_ICON",e.SELECT_REFINING_RESPLACE="SELECT_REFINING_RESPLACE",e.SELECT_SOLDIERSOUL_UPSTAR="SELECT_SOLDIERSOUL_UPSTAR",e.SELECT_SOLDIERSOUL_REFINE="SELECT_SOLDIERSOUL_REFINE",e}(egret.Event);t.CommonEvent=e,__reflect(e.prototype,"app.CommonEvent")}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===s&&(s=!1);var a=t.call(this,e,n,s)||this;return a.data=i,a}return __extends(e,t),e.OPEN_VIEW="comp_open_view",e.CLOSE_VIEW="comp_close_view",e.SHORTCUTKEY_SET="on_shortcutkey_set",e.DRAG_START="on_drag_start",e.DRAG_END="on_drag_end",e.TAB_CHANGE="on_tab_change",e.SHORTCUTKEY="on_shortcutKey",e.MOUSE_OVER="on_mouse_over",e.MOUSE_OUT="on_mouse_out",e.MOUSE_CLICK="on_mouse_click",e.PAGE_DATA="on_page_data",e.PAGE_CHANGE="on_page_change",e.RANK_DATA="on_rank_data",e.RANK_MENU="on_rank_menu",e.SET_HSLIDER="on_set_hslider",e.ROLE_LEVEL_CIRCLE="on_role_level_circle",e.MAIL_SELECTED_INDEX="on_mail_selected_index",e.MAIL_DELETE="on_mail_delete",e.SETUP_ITEM_DATA="on_setup_item",e.HIDE_ICON="on_hide_icon",e.TimerEvent="on_timer",e.Clear_Timer_Event="on_clear_timer",e.SKILL_GP_Y_EVENT="SKILL_GP_Y_EVENT",e.RANK_SHOW_LIST="rank_show_list",e.STRENGTHEN_RED="strengthen_red",e.MAIL_RED="mail_red",e.FASHION_ACT="fashion_act",e.FASHION_UPGRADE="fashion_upgrade",e.FASHION_WEAR="fashion_wear",e.FASHION_DISPLAY="fashion_display",e.FASHION_RED="fashion_red",e.GET_PROPS_STRENGTHEN_EQUIP="get_props_strengthen_equip",e.GET_PROPS_STRENGTHEN_SPECIAL="get_props_strengthen_special",e.GET_PROPS_STRENGTHEN_FOUR_IMAGE="get_props_strengthen_four_image",e.GET_PROPS_STRENGTHEN_WORD_FORMULA="get_props_strengthen_word_formula",e.ITEM_NUM_UPDATE="item_num_update",e.CLOSE_TREASURE="close_treasure",e.ROLE_ATTR_OPEN="role_attr_open",e.ROLE_ATTR_CLOSE="role_attr_close",e.ROLE_UPDATE_RULE="role_update_rule",e.ROLE_SKILL_DESC="role_skill_desc",e.ROLE_CLOSE_SKILL_DESC="role_close_skill_desc",e.ROLE_RED="role_red",e.ROLE_TITLE_SHORTEN="role_title_shorten",e.ROLE_TITLE_REVEAL="role_title_reveal",e.ROLE_TITLE2_OPEN="role_title2_open",e.ROLE_TITLE2_CLOSE="role_title2_close",e.ROLE_TITLE2_SHORTEN="role_title2_shorten",e.ROLE_TITLE2_REVEAL="role_title2_reveal",e.OTHER_PLAYER_ATTR_OPEN="other_player_attr_open",e.OTHER_PLAYER_ATTR_CLOSE="other_player_attr_close",e.OTHER_ROLE_UPDATE_RULE="other_player_update_rule",e.OTHER_PLAYER_SKILL_DESC="other_player_skill_desc",e.OTHER_PLAYER_CLOSE_SKILL_DESC="other_player_close_skill_desc",e.OTHER_PLAYER_RIGHT_MENU_OPEN="other_player_right_menu_open",e.OTHER_PLAYER_RIGHT_MENU_CLOSE="other_player_right_menu_close",e.OTHER_PLAYER_TITLE2_OPEN="other_player_title2_open",e.OTHER_PLAYER_TITLE2_CLOSE="other_player_title2_close",e}(egret.Event);t.CompEvent=e,__reflect(e.prototype,"app.CompEvent")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventList={},e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.sendEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.eventList[t];if(null!=n)for(var s=n.length,a=void 0,r=void 0,o=0;s>o;o++){var l=n[o];a=l[0],r=l[1],a.apply(r,e)}},e.prototype.addEvent=function(t,e,i){var n=this.eventList[t];if(null==n)n=[],this.eventList[t]=n;else for(var s=n.length,a=0;s>a;a++)if(n[a][0]==e&&n[a][1]==i)return;n.push([e,i])},e.prototype.removeEvent=function(t,e,i){var n=this.eventList[t];if(null!=n)for(var s=n.length,a=s-1;a>=0;a--)n[a][0]==e&&n[a][1]==i&&n.splice(a,1);n&&0==n.length&&(this.eventList[t]=null,delete this.eventList[t])},e.prototype.removeAllEvents=function(){var t;for(var e in this.eventList){if(t=this.eventList[e],null!=t)for(var i=t.length,n=i-1;n>=0;n--)t.splice(n,1);t&&0==t.length&&(this.eventList[e]=null,delete this.eventList[e])}},e}(t.BaseClass);t.EventManager=e,__reflect(e.prototype,"app.EventManager")}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===s&&(s=!1);var a=t.call(this,e,n,s)||this;return a.data=i,a}return __extends(e,t),e.ITEM_SELECTED="item_selected",e.MENU_ONCLICK="menu_click",e.BAG_MENU_ONCLICK="bag_menu_click",e.FORGE_MENU_ONCLICK="forge_menu_click",e.ITEM_ONCHANGE="item_onchange",e.COLOR_SET="COLOR_SET",e}(egret.Event);t.FriendEvent=e,__reflect(e.prototype,"app.FriendEvent")}(app||(app={}));var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var app;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.EQUIP_WEAR_EQUIP="wearEquip",e.EQUIP_DROP_EQUIP="dropEquip",e}(egret.Event);t.ItemEvent=e,__reflect(e.prototype,"app.ItemEvent")}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===s&&(s=!1);var a=t.call(this,e,n,s)||this;return a.data=i,a}return __extends(e,t),e.UPDATE_DISPOSABLE_RED="main_update_disposable_red",e.PLAY_EFF_JIJN="main_play_eff_jijn",e.PLAY_EFF_JIJN_END="main_play_eff_jijn_end",e.HIDE_SKILL_TIPS="main_hide_skill_tips",e.ADD_TASK_EFF="main_add_task_eff",e.CLOSE_FIRST_CHARGE_TIPS="main_close_first_charge_tips",e.CLOSE_SECOND_CHARGE_TIPS="main_close_second_charge_tips",e.CLOSE_VIP_GUIDE_TIPS="main_close_vip_guide_tips",e.CLOSE_VIOLENT_TIPS="main_close_violent_tips",e.CLOSE_DONATION_TIPS="main_close_donation_tips",e.CLICK_MAIN_TASK_LINK="click_main_task_link",e}(egret.Event);t.MainEvent=e,__reflect(e.prototype,"app.MainEvent")}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===s&&(s=!1);var a=t.call(this,e,n,s)||this;return a.data=i,a}return __extends(e,t),e.ITEM_SELECTED="ITEM_SELECTED",e.TEAM_ADD_MEMBER="TEAM_ADD_MEMBER",e.TEAM_DEL_MEMBER="TEAM_DEL_MEMBER",e.TEAM_MEMBER_APPLY_JOIN_TEAM="TEAM_MEMBER_APPLY_JOIN_TEAM",e.TEAM_SET_LEADER="TEAM_SET_LEADER",e.TEAM_INVITE_MEMBER_JOIN="TEAM_INVITE_MEMBER_JOIN",e}(egret.Event);t.TeamEvent=e,__reflect(e.prototype,"app.TeamEvent")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.prototype.getDataById=function(e){var i,n,s=[];for(var a in t.GlobalConfig.FlyTable)if(n=t.GlobalConfig.FlyTable[a],n.id==e){for(var r=0;r<n.map.length;r++)for(var o in t.GlobalConfig.FlyLevel)i=t.GlobalConfig.FlyLevel[o],n.map[r].id==i.id&&s.push(i);break}return s},e}();t.FlyShoesData=e,__reflect(e.prototype,"app.FlyShoesData");var i=function(){function t(){}return t}();t.ListBtnVo=i,__reflect(i.prototype,"app.ListBtnVo");var n=function(){function t(){}return t}();t.ListItemVo=n,__reflect(n.prototype,"app.ListItemVo");var s=function(){function t(){}return t}();t.TableVo=s,__reflect(s.prototype,"app.TableVo");var a=function(){function t(){}return t}();t.LevelVo=a,__reflect(a.prototype,"app.LevelVo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.begin="btn_9",t.end="btn_9",t.skinName="Btn15Skin",t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.setData=function(t){this.visible=1==t.isShow,this.lock.visible=0==t.isOpen,this.labelDisplay.textColor=0==t.isOpen?8420211:15779990,this.labelDisplay.text=t.data.name,this.select.visible=1==t.select},i.prototype.destroy=function(){this.lock.source="",this.icon.source="",this.labelDisplay.text="",t.DisplayUtils.removeFromParent(this)},i}(eui.Component);t.BtnItem=e,__reflect(e.prototype,"app.BtnItem",["eui.UIComponent","egret.DisplayObject"])}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.selectedUrl="com_yeqian_3",t.noSelectedUrl="com_yeqian_4",t.skinName="FlyShoesBtnItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){t.FlyTable,e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var t=this.data.isSelected,e=this.data.data,i=1==t?this.selectedUrl:this.noSelectedUrl;this.select.$setTexture(RES.getRes(i)),this.select.x=this.select.y=t?-1:3,this.nameTf.text=e.name}},i.prototype.destroy=function(){this.data=null,t.DisplayUtils.removeFromParent(this)},i}(eui.ItemRenderer);t.FlyShoesBtnItemView=e,__reflect(e.prototype,"app.FlyShoesBtnItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._itemArrayCollection=null,i.curIndex=0,i._container=t,t?(i._itemArrayCollection=new eui.ArrayCollection,i.init(),i):i}return __extends(i,e),i.prototype.init=function(){this._scrollViewContainer=new t.ScrollViewContainer(this._container),this._scrollViewContainer.callFunc([null,null,this.onItemTap],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._list.selectedIndex=0,this._scrollViewContainer.itemRenderer=t.TradeLineTabView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.dataAry=[]
},Object.defineProperty(i.prototype,"index",{set:function(e){this.curIndex=e-1,this._list.selectedIndex=this.curIndex,this.setData(t.GlobalConfig.FlyTable)},enumerable:!0,configurable:!0}),i.prototype.onClickSelectHandler=function(e){void 0===e&&(e=null),t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_INSIDE)},i.prototype.onItemTap=function(t,e){this.target=t.data,this.curIndex!=e&&(this.curIndex=e,this._callfunc&&this._callfunc(this.target.id))},i.prototype.setData=function(t){this.creatItem(t)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e in t){var i=t[e];i.hidden||this.dataAry.push({name:t[e].name,data:t[e]})}this._itemArrayCollection.replaceAll(this.dataAry),this._itemArrayCollection.refresh()},i.prototype.destroy=function(){this.dataAry.length=0,this.dataAry=null,this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,this._scrollViewContainer.destory(),this._scrollViewContainer=null,this._callfunc&&(this._callfunc=null),t.DisplayUtils.removeFromParent(this._container)},i}(egret.EventDispatcher);t.FlyShoesBtnListView=e,__reflect(e.prototype,"app.FlyShoesBtnListView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FlyShoesListItemSkin",t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var t=this.data;this.callFunc=t.callFunc,this.btn_go.setData(t)}},i.prototype.destroy=function(){this.callFunc&&(this.callFunc=null),this.data=null,this.btn_go.destroy(),this.btn_go=null,t.DisplayUtils.removeFromParent(this)},i}(eui.ItemRenderer);t.FlyShoesListItemView=e,__reflect(e.prototype,"app.FlyShoesListItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._itemArrayCollection=null,i.preTime=0,i.curTime=0,i._container=t,t?(i._itemArrayCollection=new eui.ArrayCollection,i.init(),i):i}return __extends(i,e),i.prototype.init=function(){this._scrollViewContainer=new t.ScrollViewContainer(this._container),this._scrollViewContainer.callFunc([null,null,this.onItemTap],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.scrollPolicyH=eui.ScrollPolicy.OFF,this._scrollViewContainer.scrollPolicyV=eui.ScrollPolicy.OFF,this._scrollViewContainer.itemRenderer=t.FlyShoesListItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.dataAry=[],t.TimerManager.ins().remove(this.onFlyCD,this),t.TimerManager.ins().doTimer(100,0,this.onFlyCD,this)},Object.defineProperty(i.prototype,"selectedId",{set:function(t){this._selectedId=t},enumerable:!0,configurable:!0}),i.prototype.onFlyCD=function(){this.curTime=egret.getTimer()},i.prototype.onClickSelectHandler=function(e){void 0===e&&(e=null),t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_INSIDE)},i.prototype.onItemTap=function(e,i,n,s){if(!(this.curTime-this.preTime<1e3)){this.preTime=this.curTime;var a=e.data,r=t.EntityMgr.ins().getPayer;if(r&&r.propSet)if(r.propSet.getState()&t.ActorState.DEATH)t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips103);else if(r.propSet.getLevel()>=a.openlevel&&r.propSet.getZSLevel()>=a.opencircle&&t.GlobalData.sectionOpenDay>=a.openday)if(r.propSet.getFlyshoes()>=a.cost)if(a.yuanbao){var o=r.propSet.getRechargeSum();o?(t.MoveMgr.ins().s_1_5(t.ModelManager.ins().flyShoesModel.selectedId,a.id),t.ViewManager.ins().close(t.FlyShoesView)):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips107)}else t.MoveMgr.ins().s_1_5(t.ModelManager.ins().flyShoesModel.selectedId,a.id),t.ViewManager.ins().close(t.FlyShoesView);else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips109);else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips108)}},i.prototype.setDataById=function(e){this.voArr=t.ModelManager.ins().flyShoesModel.getDataById(e),this.setData(this.voArr)},i.prototype.setData=function(e){if(e&&e.length>0){for(var i=[],n=void 0,s=t.EntityMgr.ins().getPayer,a=s.propSet.getLevel(),r=s.propSet.getZSLevel(),o=t.GlobalData.sectionOpenDay,l=void 0,h=void 0,p=0,u=e.length;u>p;p++)n=e[p],l=a>=n.level&&r>=n.circle&&o>=n.day?1:0,h=a>=n.openlevel&&r>=n.opencircle&&o>=n.openday?1:0,1==l&&i.push({isShow:l,isOpen:h,data:n,select:n.id==this._selectedId?1:0});this.creatItem(i)}},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this._itemArrayCollection.replaceAll(this.dataAry),this._itemArrayCollection.refresh()},i.prototype.destroy=function(){for(t.TimerManager.ins().remove(this.onFlyCD,this);this._list.numChildren>0;){var e=this._list.getChildAt(0);e.destroy(),e=null}this._scrollViewContainer.destory(),this._scrollViewContainer=null,this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,this.dataAry.length=0,this.dataAry=null,t.DisplayUtils.removeFromParent(this._container)},i}(egret.EventDispatcher);t.FlyShoesListView=e,__reflect(e.prototype,"app.FlyShoesListView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="FlyShoesSkin",i.name="FlyShoesView",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System42),this.flyShoesBtnListView=new t.FlyShoesBtnListView(this.btn_list),this.flyShoesBtnListView._callfunc=this.callfunc.bind(this),this.flyShoesListView=new t.FlyShoesListView(this.list)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.ModelManager.ins().flyShoesModel.selectedId=e[0]?e[0]:1,this.flyShoesBtnListView.index=e[0]?e[0]:1,this.flyShoesListView.selectedId=e[1],this.observe(t.DefaultMgr.ins().postPlayerChange,this.refreshData),this.refreshData()},i.prototype.refreshData=function(){this.flyShoesListView&&this.flyShoesListView.setDataById(t.ModelManager.ins().flyShoesModel.selectedId),this.setBottom()},i.prototype.callfunc=function(e){t.ModelManager.ins().flyShoesModel.selectedId=e,this.refreshData()},i.prototype.setBottom=function(){var e=t.EntityMgr.ins().getPayer,i="当前飞鞋:|C:0xF7F2EA&T:"+e.propSet.getFlyshoes(),n=t.GlobalConfig.FlyTable[t.ModelManager.ins().flyShoesModel.selectedId],s="传送一次消耗飞鞋:|C:0xF7F2EA&T:"+n.cost;this.txt_count.textFlow=t.TextFlowMaker.generateTextFlow(i),this.txt_consume.textFlow=t.TextFlowMaker.generateTextFlow(s)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.list&&(this.list.removeChildren(),this.list=null),this.btn_list&&(this.btn_list.removeChildren(),this.btn_list=null),this.dragDropUI&&this.dragDropUI.destroy(),this.dragDropUI=null,this.flyShoesBtnListView&&this.flyShoesBtnListView.destroy(),this.flyShoesBtnListView=null,this.flyShoesListView&&this.flyShoesListView.destroy(),this.flyShoesListView=null,this.txt_count.textFlow=null,this.txt_consume.textFlow=null,this.removeFromParent()},i}(t.BaseEuiView);t.FlyShoesView=e,__reflect(e.prototype,"app.FlyShoesView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.history=[],i.historyIdx=-1,i.errCode=["配置错误","等级，转生未到","开放时间未到","时间已结束","回收次数不足","特权等级不足","物品不存在","数据异常","数据异常"],i._recycleInfo={},i.sysId=t.PackageID.Forge,i.regNetMsg(1,i.post_19_1),i.regNetMsg(2,i.post_19_2),i.regNetMsg(3,i.post_19_3),i.regNetMsg(4,i.post_19_4),i.regNetMsg(5,i.post_19_5),i.regNetMsg(6,i.post_19_6),i.regNetMsg(7,i.post_19_7),i.regNetMsg(8,i.post_19_8),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_19_1=function(t,e){var i=this.getBytes(1);i.writeUnsignedShort(t),i.writeByte(e),this.sendToServer(i)},i.prototype.post_19_1=function(){},i.prototype.forgeRed=function(){t.TimerManager.ins().isExists(this.updateRed,this)||t.TimerManager.ins().doTimer(2e3,1,this.updateRed,this)},i.prototype.post_updateItem=function(){},i.prototype.updateRed=function(){this.post_updateItem()},i.prototype.send_19_2=function(t){var e=this.getBytes(2);e.writeByte(t),this.sendToServer(e)},i.prototype.post_19_2=function(e){var i,n=[],s=e.readByte();if(s>0)for(var a=0;s>a;a++){i=new t.RewardData,i.parser(e),n.push(i);var r=new Object,o=Date.now(),l=t.DateUtils.getFormatBySecond(o/1e3,t.DateUtils.TIME_FORMAT_8),h=t.GlobalConfig.StdItems[i.id];h&&(l+=" "+t.LanguageUtils.language_Common_33+" |C:0x2eb52d&T:"+h.name+"|",this.historyIdx+=1,r.desc=l,r.idx=this.historyIdx,this.history.length<200&&this.history.push(r))}return n},i.prototype.send_19_3=function(){var t=this.getBytes(3);this.sendToServer(t)},i.prototype.post_19_3=function(t){var e=t.readByte();return e>0?e:void 0},i.prototype.getMergeMenu=function(){var e=[],i=t.GlobalConfig.MergeTotal,n=t.GlobalData.sectionOpenDay,s=0,a=0,r=t.EntityMgr.ins().getPayer;r&&r.propSet&&(s=r.propSet.getLevel(),a=r.propSet.getZSLevel());for(var o in i)i[o].openLv<=s&&i[o].openZs<=a&&i[o].openserverDay<=n&&e.push(i[o]);return e.sort(this.sortMenu),e},i.prototype.getMergeSecMenu=function(e){var i=t.GlobalConfig.MergeConfig[e],n=0,s=0,a=[],r=t.GlobalData.sectionOpenDay,o=t.EntityMgr.ins().getPayer;o&&o.propSet&&(n=o.propSet.getLevel(),s=o.propSet.getZSLevel());for(var l in i)(i[l].rebornconds||0)<=s&&(i[l].levelconds||0)<=n&&i[l].dayconds<=r&&a.push(i[l]);return a},i.prototype.getItemSynthesis=function(e,i){var n=0,s=0,a=[],r=t.GlobalData.sectionOpenDay,o=t.GlobalConfig.ItemMergeConfig[e][i],l=t.EntityMgr.ins().getPayer;l&&l.propSet&&(n=l.propSet.getLevel(),s=l.propSet.getZSLevel());for(var h in o)(o[h].circle||0)<=s&&(o[h].level||0)<=n&&o[h].openserverday<=r&&a.push(o[h]);return a},i.prototype.sortMenu=function(t,e){return t.sort<e.sort?-1:t.sort>e.sort?1:0},i.prototype.isSynthesisItem=function(e,i){void 0===i&&(i=1);for(var n=(t.EntityMgr.ins().getPlayerPropertySet(),0);n<e.length;n++){var s=t.CurrencyUtils.getCurrency(e[n].type,e[n].id);if(s<e[n].count*i)return!1}return!0},i.prototype.getShowTips=function(e,i){void 0===i&&(i=1);for(var n=t.LanguageUtils.language_Common_37+"\n",s=0;s<e.length;s++)if(0==e[s].type){var a=t.GlobalConfig.StdItems[e[s].id];a&&(n+=e[s].count*i+t.LanguageUtils.language_Common_38+a.name,s!=e.length-1&&(n+="\n"))}else{var r="";r=e[s].count*i+t.LanguageUtils.language_System25[e[s].type-1],(3!=e[s].type||4!=e[s].type)&&(r=t.CommonUtils.overLength(e[s].count*i)+t.LanguageUtils.language_System25[e[s].type-1]),n+=r,s!=e.length-1&&(n+="\n")}return n},i.prototype.getForgeRed=function(e,i,n){void 0===n&&(n=1);for(var s in e){var a=t.CurrencyUtils.getCurrency(e[s].type,e[s].id);if(a<e[s].count*n)return!1}if(i){var r=t.ViewManager.ins().isCheckOpen(i);if(!r)return!1}return!0},i.prototype.getForgeRed2=function(){var e=t.GlobalConfig.MergeTotal;for(var n in e){var s=i.ins().getOneLvRed(e[n].id);if(s)return 1}return 0},i.prototype.openSystemTips=function(e){var i="",n=t.EntityMgr.ins().getPayer;if(n){if(!e)return i;if(e.level&&n.propSet.getLevel()<e.level)return i=e.level+"级开放";if(e.zsLevel&&n.propSet.getZSLevel()<e.zsLevel)return i=e.zsLevel+"转开放";if(e.openDay&&t.GlobalData.sectionOpenDay<e.openDay)return i="第"+e.openDay+"天开放";if(e.office&&n.propSet.getOfficialPositicon()<e.office)return i="官阶不足"}return i},i.prototype.getTwoLvRed=function(e,i){var n=0,s=t.GlobalConfig.ItemMergeConfig[e];if(s){var a=s[i];if(a)for(var r in a)if(a[r].redpoint){n=0,n=t.ViewManager.ins().isCheckOpen(a[r].mergelimit)?0:1;for(var o in a[r].table){var l=t.CurrencyUtils.getCurrency(a[r].table[o].type,a[r].table[o].id);if(l<a[r].table[o].count){n=1;break}}if(a[r].redpointlimit){var h=t.ViewManager.ins().isCheckOpen(a[r].redpointlimit);h||(n=1)}if(0==n)return!0}return!1}return!1},i.prototype.getOneLvRed=function(e){var i=0,n=t.GlobalConfig.ItemMergeConfig[e];if(n)for(var s in n)for(var a in n[s]){var r=n[s][a];if(r.redpoint){i=0,i=t.ViewManager.ins().isCheckOpen(r.mergelimit)?0:1;for(var o in r.table){var l=t.CurrencyUtils.getCurrency(r.table[o].type,r.table[o].id);if(l<r.table[o].count){i=1;break}}if(r.redpointlimit){var h=t.ViewManager.ins().isCheckOpen(r.redpointlimit);h||(i=1)}if(0==i)return!0}}return!1},i.prototype.send_19_4=function(t,e,i){var n=this.getBytes(4);n.writeByte(t),e.writeToBytes(n),n.writeByte(i),this.sendToServer(n)},i.prototype.send_19_5=function(t,e){var i=this.getBytes(5);i.writeByte(t),e.writeToBytes(i),this.sendToServer(i)},i.prototype.post_19_4=function(t){var e=t.readByte(),i=t.readNumber(),n=t.readByte(),s=t.readString(),a=t.readString();this.refiningRuslt={errcode:e,goodId:i,currAttr:s,newAttr:a,replace:n}},i.prototype.post_19_5=function(t){var e=t.readByte();if(!(e>0)){var i=t.readNumber(),n=t.readString(),s=t.readString();this.refiningReplaceRuslt={errcode:e,goodId:i,currAttr:n,newAttr:s}}},i.prototype.send_19_6=function(t){var e=this.getBytes(6);e.writeInt(t),this.sendToServer(e)},i.prototype.post_19_6=function(e){var i=e.readByte();if(0==i){t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt51);var n=e.readInt(),s=e.readShort();s>-1&&(this._recycleInfo[n].num=s,this.postItemUpdated(n))}else 7!=i&&t.UserTips.ins().showUITips("|C:0xff7700&T:"+this.errCode[i-1]+"|")},i.prototype.postItemUpdated=function(t){return t},i.prototype.send_19_7=function(){var t=this.getBytes(7);this.sendToServer(t)},i.prototype.send_19_8=function(t,e){var i=this.getBytes(8);t.writeToBytes(i),i.writeByte(e),this.sendToServer(i)},i.prototype.post_19_7=function(t){this._recycleInfo={};for(var e,i=t.readInt(),n=0;i>n;n++)e=new Object,e.id=t.readInt(),e.cd=t.readInt(),e.num=t.readShort(),this._recycleInfo[e.id]=e},i.prototype.post_19_8=function(e){var i=e.readByte();return 0==i||(1==i?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips97):2==i?t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt68):3==i&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt69)),i},Object.defineProperty(i.prototype,"recycleInfo",{get:function(){return this._recycleInfo},enumerable:!0,configurable:!0}),i.prototype.getRecycleArr=function(){var e=[];for(var n in t.GlobalConfig.YBrecoverConfig){var s=t.GlobalConfig.YBrecoverConfig[n];if(t.ViewManager.ins().isCheckOpen(s.displaylimit)){var a=i.ins().recycleInfo;if(a[s.id]&&0==a[s.id].cd)continue;e.push(s.id)}}return e},i}(t.BaseSystem);t.ForgeMgr=e,__reflect(e.prototype,"app.ForgeMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.sortEquip=function(e){for(var i=[],n=0;n<e.length;n++){var s=e[n];if(t.GlobalConfig.RefiningmaterialsConfig[s.wItemId]){var a=t.GlobalConfig.StdItems[s.wItemId],r=0;r=4==a.type?3:7==a.type?4:6==a.type?5:3==a.type?6:8==a.type?7:9==a.type?8:a.type;var o={items:a,item:s,sortId:r};i.push(o)}}return i.sort(function(t,e){return t.sortId<e.sortId?-1:t.sortId>e.sortId?1:t.items.itemlevel>e.items.itemlevel?-1:t.items.itemlevel<e.items.itemlevel?1:void 0}),i},i.prototype.getPosList=function(){var e=t.GlobalConfig.RefiningReplaceConfig,i=[];for(var n in e)Number(n)&&i.push(e[n]);return i},i.prototype.getStarPosList=function(){var e=t.GlobalConfig.UpstarPriceConfig,i=[];for(var n in e)Number(n)&&i.push(e[n]);return i},i}(t.BaseSystem);t.RefiningData=e,__reflect(e.prototype,"app.RefiningData")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.prototype.parser=function(t){this.type=t.readByte(),this.id=t.readInt(),this.count=t.readInt()},t}();t.RewardData=e,__reflect(e.prototype,"app.RewardData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.sortEquipXiLian=function(e,i){void 0===i&&(i=null);for(var n=[],s=0;s<e.length;s++){var a=e[s];if(t.GlobalConfig.RefiningmaterialsConfig[a.wItemId]){var r=t.GlobalConfig.StdItems[a.wItemId],o=0;o=4==r.type?3:7==r.type?4:6==r.type?5:3==r.type?6:8==r.type?7:9==r.type?8:11==r.type?10:12==r.type?11:13==r.type?12:14==r.type?13:r.type;var l={items:r,item:a,sortId:o};n.push(l)}}if(i)for(var s=0;s<i.length;s++){var a=i[s];if(t.GlobalConfig.RefiningmaterialsConfig[a.wItemId]){var r=t.GlobalConfig.StdItems[a.wItemId],o=0;o=4==r.type?3:7==r.type?4:6==r.type?5:3==r.type?6:8==r.type?7:9==r.type?8:11==r.type?10:12==r.type?11:13==r.type?12:14==r.type?13:r.type;var l={items:r,item:a,sortId:o};n.push(l)}}return n.sort(function(t,e){return t.sortId<e.sortId?-1:t.sortId>e.sortId?1:t.items.itemlevel>e.items.itemlevel?-1:t.items.itemlevel<e.items.itemlevel?1:void 0}),n},i.prototype.sortEquip=function(e,i){void 0===i&&(i=null);for(var n=[],s=0;s<e.length;s++){var a=e[s];if(t.GlobalConfig.UpstarConfig[a.wItemId]){var r=t.GlobalConfig.StdItems[a.wItemId],o=0;o=4==r.type?3:7==r.type?4:6==r.type?5:3==r.type?6:8==r.type?7:9==r.type?8:11==r.type?10:12==r.type?11:13==r.type?12:14==r.type?13:r.type;var l={items:r,item:a,sortId:o};n.push(l)}}if(i)for(var s=0;s<i.length;s++){var a=i[s];if(t.GlobalConfig.UpstarConfig[a.wItemId]){var r=t.GlobalConfig.StdItems[a.wItemId],o=0;o=4==r.type?3:7==r.type?4:6==r.type?5:3==r.type?6:8==r.type?7:9==r.type?8:11==r.type?10:12==r.type?11:13==r.type?12:14==r.type?13:r.type;var l={items:r,item:a,sortId:o};n.push(l)}}return n.sort(function(t,e){return t.sortId<e.sortId?-1:t.sortId>e.sortId?1:t.items.itemlevel>e.items.itemlevel?-1:t.items.itemlevel<e.items.itemlevel?1:void 0}),n},i}(t.BaseSystem);t.UpstarData=e,__reflect(e.prototype,"app.UpstarData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="ForgeWinSkin",i.name="ForgeWin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.forgeRefining=new t.ForgeRefiningView,this.forgeRefining.skinName="ForgeRefiningSkin",this.forgeRefining.name=t.LanguageUtils.language_System88,this.forgeRefining.left=0,this.forgeRefining.right=0,this.forgeRefining.top=0,this.forgeRefining.bottom=0,this.forgeRefining.x=0,this.forgeRefining.y=0,this.viewStack.addChild(this.forgeRefining)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.ruleTips.visible=!1,this.dragDropUI.setTitle(t.LanguageUtils.language_System88),this.forgeRefining.open()},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.forgeRefining&&this.forgeRefining.close(),this.dragDropUI.destroy(),this.dragDropUI=null,this.ruleTips=null},i}(t.BaseEuiView);t.BaptismWin=e,__reflect(e.prototype,"app.BaptismWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.iconList=[],t.skinName="FriendFunMenuViewSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.gList.itemRenderer=t.FriendFunMenuItem,this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i.prototype.onChange=function(){var e=this.gList.selectedIndex,i=this.gList.getChildAt(e),n=i.menuBtn.name;t.EventManager.ins().sendEvent(t.FriendEvent.FORGE_MENU_ONCLICK,[n])},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.iconList=e[1],this.x=e[0].x-4;var n=t.StageUtils.ins().getWidth();t.StageUtils.ins().getHeight();this.x+this.width>n&&(this.x=n-this.width),this.height=41*this.iconList.length,this.bg.height=41*this.iconList.length+5,this.y=e[0].y-this.height-5;var s=new eui.ArrayCollection(this.iconList);this.gList.dataProvider=s},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.gList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.gList=null,this.bg=null},i}(t.BaseEuiView);t.ForgeFunMenuView=e,__reflect(e.prototype,"app.ForgeFunMenuView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.data){this.desc.textFlow=t.TextFlowMaker.generateTextFlow(this.data.desc);var e=this.data.idx%2==0?"bg_quyu_1":"bg_quyu_2";this.bg.source=e}},i}(t.BaseItemRender);t.ForgeRecordItemView=e,__reflect(e.prototype,"app.ForgeRecordItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="ForgeRecordSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System34),this.msgList.itemRenderer=t.ForgeRecordItemView},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.MouseScroller.bind(this.msgScroller),this.addTouchEvent(this.sure,this.onTouch),this.observe(t.ForgeMgr.ins().post_19_2,this.updateHistory),this.msgScroller.verticalScrollBar.autoVisibility=!1,this.msgScroller.verticalScrollBar.visible=!1,this.updateHistory()},i.prototype.updateHistory=function(){t.ForgeMgr.ins().history.length>0&&(this.msgList.dataProvider=new eui.ArrayCollection(t.ForgeMgr.ins().history))},i.prototype.onTouch=function(e){switch(e.currentTarget){case this.sure:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.$onClose(),t.MouseScroller.unbind(this.msgScroller),this.removeTouchEvent(this.sure,this.onTouch),this.dragDropUI.destroy(),this.dragDropUI=null,this.sure=null,this.msgList=null,this.maxHight=null},i}(t.BaseEuiView);t.ForgeRecordView=e,__reflect(e.prototype,"app.ForgeRecordView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cdTimer=0,t.recycleInfo=null,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.recycleBtn,this.onTouch),this.addMouseMoveEvent(this.moneyImg,this.mouseMove),this.addMouseOverEvent(this.moneyImg,this.mouseMove)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.recycleBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.moneyImg.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.moneyImg.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),t.TimerManager.ins().remove(this.updateTime,this)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(this.recycleInfo){var n=i.localToGlobal();if(0==this.recycleInfo.type){var s=t.GlobalConfig.StdItems[this.recycleInfo.id];if(s){var a=t.TipsType.TIPS_EQUIP;a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2})}s=null}else{var r=t.CurrencyUtils.getCurrencyNameIcon(this.recycleInfo.type,this.recycleInfo.id);r&&r[2]&&(t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,r[2],{x:n.x+i.width/2,y:n.y+i.height/2}),r=null)}n=null}}},i.prototype.dataChanged=function(){if(""==this.moneyImg.source,this.data){var e=t.GlobalConfig.YBrecoverConfig[this.data];if(e){this.angleImg.source=0==e.privilegelimit?"":"recovery_zs_"+e.privilegelimit,this.item.data=e.item[0];var i=t.CurrencyUtils.getCurrencyNameIcon(e.item[0].type,e.item[0].id);if(i&&(this.title.text=i[0]+""),this.recycleInfo=e.displayaward,0==e.displayaward.type){var n=t.GlobalConfig.StdItems[e.displayaward.id];n&&(this.moneyImg.source=n.icon+"")}else{var s=t.CurrencyUtils.getCurrencyNameIcon(e.displayaward.type);s&&(this.moneyImg.source=s[1]+"")}this.recycleMoney.text="*"+e.displayaward.count;var a=t.ForgeMgr.ins().recycleInfo;a&&a[this.data]?(-1==a[this.data].num?(this.recycleNum.text=t.LanguageUtils.language_Omission_txt49,this.recycleNum.visible=!1):(this.recycleNum.visible=!0,this.recycleNum.text=t.LanguageUtils.language_Common_62+a[this.data].num),this.cdTime.visible=!1,a[this.data].cd>0?(this.txtGrp.addChildAt(this.cdTime,1),this.cdTime.visible=!0,this.cdTimer=1e3*a[this.data].cd+egret.getTimer(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this),this.updateTime()):t.DisplayUtils.removeFromParent(this.cdTime)):(this.recycleNum.visible=!1,this.cdTime.visible=!1,t.DisplayUtils.removeFromParent(this.cdTime)),this.rect.visible=!0;var r=t.VipData.ins().getMyVipLv(),o=t.ViewManager.ins().isCheckOpen(e.recoverlimit),l=0==e.privilegelimit||r>=e.privilegelimit;o&&l&&(this.rect.visible=!1)}}},i.prototype.updateTime=function(){var e=this.cdTimer-egret.getTimer();this.cdTime.text=t.LanguageUtils.language_Omission_txt52+t.DateUtils.getFormatBySecond(Math.floor(e/1e3),t.DateUtils.TIME_FORMAT_20),0>=e&&(t.TimerManager.ins().remove(this.updateTime,this),this.cdTime.text="",this.cdTime.visible=!1,t.DisplayUtils.removeFromParent(this.cdTime),t.ForgeMgr.ins().send_19_7())},i.prototype.onTouch=function(e){t.ForgeMgr.ins().send_19_6(this.data)},i}(t.BaseItemRender);t.ForgeRecycleItemView=e,__reflect(e.prototype,"app.ForgeRecycleItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.name=t.LanguageUtils.language_Omission_txt55,i.skinName="ForgeRecycleViewSkin",i}return __extends(i,e),i.prototype.open=function(){this.recycleList.itemRenderer=t.ForgeRecycleItemView,this._dataInfo=new eui.ArrayCollection,this.recycleList.dataProvider=this._dataInfo,t.MouseScroller.bind(this.recycleScroller),t.ForgeMgr.ins().send_19_7(),this.observe(t.ForgeMgr.ins().post_19_7,this.updateList),this.observe(t.DefaultMgr.ins().post_playerVIPChange,this.updateList),this.observe(t.ForgeMgr.ins().postItemUpdated,this.listItemUpdated)},i.prototype.listItemUpdated=function(e){var i=t.ForgeMgr.ins().recycleInfo;i[e]&&this._dataInfo.itemUpdated(e)},i.prototype.updateList=function(){var e=t.ForgeMgr.ins().getRecycleArr();this._dataInfo.replaceAll(e)},i.prototype.close=function(){t.MouseScroller.unbind(this.recycleScroller),this.$onClose()},i}(t.BaseEuiView);t.ForgeRecycleView=e,__reflect(e.prototype,"app.ForgeRecycleView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="ForgeRefiningShowAttrSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this.btn_close,this.onClick);var n=e[0],s=t.GlobalConfig.RefiningBaseConfig[n];this.lbDesc.text=s.attribute},i.prototype.onClick=function(){t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.btn_close,this.onClick)},i}(t.BaseEuiView);t.ForgeRefiningAttrShowView=e,__reflect(e.prototype,"app.ForgeRefiningAttrShowView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.id=this.data.id;var e=t.CurrencyUtils.getCurrency(this.data.type,this.data.id),i={type:this.data.type,id:this.data.id,count:0};this.itembase.data=i;var n=e>=this.data.count?15779990:15926018,s="|C:"+n+"&T:"+t.CommonUtils.overLength(this.data.count),a="|C:"+n+"&T:"+t.CommonUtils.overLength(e)+"|C:0xf0c896&T:/"+t.CommonUtils.overLength(this.data.count);this.lbGoodsNum.textFlow=t.TextFlowMaker.generateTextFlow(this.data.type>0?s:a)},i.prototype.setReplace=function(t){},i}(t.BaseItemRender);t.ForgeRefiningCostGoodsItem=e,__reflect(e.prototype,"app.ForgeRefiningCostGoodsItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.attrValue=this.data.attrValue,this.txt_next.textFlow=t.TextFlowMaker.generateTextFlow(this.data.attrStr)},i}(t.BaseItemRender);t.ForgeRefiningCurrAttrItem=e,__reflect(e.prototype,"app.ForgeRefiningCurrAttrItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){var e=this.data;this.item.data=e.item,this.lbEquip.text=t.LanguageUtils["language_Equip_Type_"+this.data.items.type],this.labelDisplay.text=this.data.items.name},i}(t.BaseItemRender);t.ForgeRefiningEquipItem=e,__reflect(e.prototype,"app.ForgeRefiningEquipItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.checkYes,this.onClick)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.checkYes,this.onClick)},i.prototype.onClick=function(){var e=this.checkYes.selected;t.EventManager.ins().sendEvent(t.CommonEvent.SELECT_REFINING_RESPLACE,[this.goodsId,e])},i.prototype.setSeleted=function(t){this.checkYes.selected=t},i.prototype.dataChanged=function(){this.goodsId=this.data.itemid;var e=this.data.price,i=2682369,n=t.GlobalConfig.StdItems[this.data.itemid],s="|C:"+i+"&T:"+e+"|C:0xdcb789&T:"+t.LanguageUtils.language_CURRENCY_NAME_2+t.LanguageUtils.language_Refining_Text2+"|C:0xe68246&T:"+n.name+"|";this.lbMoney.textFlow=t.TextFlowMaker.generateTextFlow(s)},i}(t.BaseItemRender);t.ForgeRefiningMoneyItem=e,__reflect(e.prototype,"app.ForgeRefiningMoneyItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){var e=this.data.sort;this.txt_next.textFlow=t.TextFlowMaker.generateTextFlow(this.data.attrStr),0==e?(this.iconFlat.visible=!0,this.iconUp.visible=!1,this.iconDown.visible=!1):1==e?(this.iconFlat.visible=!1,this.iconUp.visible=!0,this.iconDown.visible=!1):(this.iconFlat.visible=!1,this.iconUp.visible=!1,this.iconDown.visible=!0)},i}(t.BaseItemRender);t.ForgeRefiningNewAttrItem=e,__reflect(e.prototype,"app.ForgeRefiningNewAttrItem")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay.text=this.data},e}(t.BaseItemRender);t.ForgeRefiningTabItem=e,__reflect(e.prototype,"app.ForgeRefiningTabItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.seletePos=0,i.itemCosts=[932,951],i.attrColor={11:14838538,15:45296,19:16746752,23:16776960,27:16776960,5:14214305,33:14024885,29:14024885,35:14325396,31:14325396},i.skinName="ForgeRefiningSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.equipArr=new eui.ArrayCollection,this.costGoods=new eui.ArrayCollection,this.currAttrArr=new eui.ArrayCollection,this.moneyArr=new eui.ArrayCollection,this.newAttrArr=new eui.ArrayCollection,this.tabItem.itemRenderer=t.ForgeRefiningTabItem,this.tabItem.dataProvider=new eui.ArrayCollection(t.LanguageUtils.language_Refining_Text1),this.tabEq.itemRenderer=t.ForgeRefiningEquipItem;var i=t.UpstarData.ins().sortEquipXiLian(t.EquipItemMgr.ins().equips,t.EquipItemMgr.ins().suitEquips);this.equipArr.source=i,this.tabEq.dataProvider=this.equipArr,this.listCurAttr.itemRenderer=t.ForgeRefiningCurrAttrItem,this.listCurAttr.dataProvider=this.currAttrArr,this.listGoods.itemRenderer=t.ForgeRefiningCostGoodsItem,this.listGoods.dataProvider=this.costGoods,this.listMoney.itemRenderer=t.ForgeRefiningMoneyItem,this.listMoney.dataProvider=this.moneyArr,this.listNewAttr.itemRenderer=t.ForgeRefiningNewAttrItem,this.listNewAttr.dataProvider=this.newAttrArr,this.tabItem.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.tabEq.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.addTouchEvent(this.btnRefining,this.onClick),this.addTouchEvent(this.btnReplace,this.onClick),this.addTouchEvent(this.lbShowDesc,this.onClick),this.tabEq.selectedIndex=0,this.showCurrentEquip();
var n="|C:0xe68246&T:<u>"+t.LanguageUtils.language_Refining_Text3+"</u>|";this.lbShowDesc.textFlow=t.TextFlowMaker.generateTextFlow(n),t.EventManager.ins().addEvent(t.CommonEvent.SELECT_REFINING_RESPLACE,this.refreshReplace,this),t.MouseScroller.bind(this.scroller)},i.prototype.showGetPropsView=function(){for(var e=0;2>e;e++)t.GetPropsView.getPropsTxt(this["txt_get"+e],this.itemCosts[e]),this.addTouchEvent(this["txt_get"+e],this.onGetProps)},i.prototype.onGetProps=function(e){var i,n;if(e.currentTarget==this.txt_get0?(i=t.GlobalConfig.GetItemRouteConfig[this.itemCosts[0]],n={type:0,id:i.itemid,count:0}):(i=t.GlobalConfig.GetItemRouteConfig[this.itemCosts[1]],n={type:0,id:i.itemid,count:0}),!t.ViewManager.ins().isShow(t.GaimItemWin)){var s=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,i.itemid,{x:s.x,y:s.y},{height:this.height,width:this.width},this.hashCode)}},i.prototype.onClick=function(e){var i=this;if(e.currentTarget==this.btnRefining){var n=t.GlobalConfig.RefiningmaterialsConfig[this.seleteItem.wItemId];if(n){for(var s=[],a=0;a<this.listMoney.numElements;a++){var r=this.listMoney.getVirtualElementAt(a);r&&r.data&&r.checkYes.selected&&s.push(r.data.itemid)}var o=t.OtherMgr.ins().getItemIDByCost2(n.consume,s);if(0!=o.itemId){var l=t.GlobalConfig.GetItemRouteConfig[o.itemId];if(l){if(!t.ViewManager.ins().isShow(t.GaimItemWin)){var h=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,o,{x:h.x,y:h.y},{height:this.height,width:this.width},this.hashCode)}}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips21)}else t.ForgeMgr.ins().send_19_4(this.tabItem.selectedIndex+1,this.seleteItem.series,this.seletePos)}}else if(e.currentTarget==this.lbShowDesc){if(!this.tabEq.selectedItem)return;var n=t.GlobalConfig.RefiningmaterialsConfig[this.seleteItem.wItemId];n&&t.ViewManager.ins().open(t.ForgeRefiningAttrShowView,n.refineId)}else{var p=t.LanguageUtils.language_Refining_Text4;t.CautionView.show(p,function(){t.ForgeMgr.ins().send_19_5(i.tabItem.selectedIndex+1,i.seleteItem.series)},this)}},i.prototype.refreshReplace=function(e){for(var i=[],n=0;n<this.listMoney.numElements;n++){var s=this.listMoney.getVirtualElementAt(n);s&&s.data&&s.checkYes.selected&&i.push(s.data.itemid)}var a,r=t.RefiningData.ins().getPosList();this.seletePos=0;for(var n=0;n<r.length;n++)a=r[n],-1!=i.indexOf(a.itemid)&&(this.seletePos=this.seletePos^1<<a.id)},i.prototype.showCurrentEquip=function(e){if(void 0===e&&(e=!1),!this.tabEq.selectedItem)return this.currAttrArr.removeAll(),this.costGoods.removeAll(),this.newAttrArr.removeAll(),this.item.data=null,this.iconNo.visible=!0,this.btnRefining.visible=!1,void(this.seletePos=0);this.btnRefining.visible=!0,this.iconNo.visible=!1;var i=this.tabEq.selectedItem.item;this.seleteItem=i,this.item.data=i,i.topLine==i.refining&&(i.refining=""),this.refiningBind(i.topLine),this.refiningNewAttrBind(i.topLine,i.refining),i.refining?this.btnReplace.visible=!0:this.btnReplace.visible=!1;var n=t.GlobalConfig.RefiningmaterialsConfig[i.wItemId];if(!n)return this.currAttrArr.removeAll(),this.costGoods.removeAll(),this.moneyArr.removeAll(),this.newAttrArr.removeAll(),void(this.seletePos=0);var s=n.consume,a=this.refiningmaterialsGetData(s);e?(this.listGoods.dataProvider=null,this.listGoods.dataProvider=this.costGoods,this.costGoods.source=a):this.costGoods.replaceAll(a)},i.prototype.refiningmaterialsGetData=function(e){for(var i=[],n=t.GlobalConfig.RefiningReplaceConfig,s=0;s<e.length;s++){var a=e[s],r=a.type,o=a.id,l=a.count,h=n[o]?!0:!1;i.push({type:r,id:o,count:l,isShowMoneyTxt:h})}return i},i.prototype.updateLeftList=function(){if(0==this.tabItem.selectedIndex){var e=t.UpstarData.ins().sortEquipXiLian(t.EquipItemMgr.ins().equips,t.EquipItemMgr.ins().suitEquips);this.equipArr.replaceAll(e)}else{var e=t.RefiningData.ins().sortEquip(t.BagMgr.ins().bagItem[1]);this.equipArr.replaceAll(e)}this.lbFail.visible=!1,this.lbReplaceState.visible=!1,this.showCurrentEquip(!0)},i.prototype.updateList=function(){if(0==this.tabItem.selectedIndex){var e=t.UpstarData.ins().sortEquipXiLian(t.EquipItemMgr.ins().equips,t.EquipItemMgr.ins().suitEquips);this.equipArr.replaceAll(e)}else{var e=t.RefiningData.ins().sortEquip(t.BagMgr.ins().bagItem[1]);this.equipArr.replaceAll(e)}this.lbFail.visible=!1,this.lbReplaceState.visible=!1,this.showCurrentEquip()},i.prototype.onBarItemTap=function(e){if(e.currentTarget==this.tabItem){if(0==e.itemIndex){var i=t.UpstarData.ins().sortEquipXiLian(t.EquipItemMgr.ins().equips,t.EquipItemMgr.ins().suitEquips);this.equipArr.source=i}else{var i=t.RefiningData.ins().sortEquip(t.BagMgr.ins().bagItem[1]);this.equipArr.source=i}this.tabEq.selectedIndex=0}else this.tabEq.selectedIndex=e.itemIndex;this.lbFail.visible=!1,this.lbReplaceState.visible=!1,this.showCurrentEquip(),this.refresh()},i.prototype.refresh=function(){},i.prototype.update=function(){var e=t.ForgeMgr.ins().refiningRuslt;if(0==e.errcode){this.lbFail.visible=!1,this.refiningBind(e.currAttr);var i=this.tabEq.selectedItem.item,n=t.GlobalConfig.RefiningmaterialsConfig[i.wItemId],s=this.refiningmaterialsGetData(n.consume);this.costGoods.replaceAll(s),e.replace?(this.lbReplaceState.visible=!0,this.btnReplace.visible=!1,this.refiningNewAttrBind(e.currAttr,e.currAttr)):e.newAttr?(i.refining=e.newAttr,this.lbFail.visible=!1,this.lbReplaceState.visible=!1,this.btnReplace.visible=!0,this.refiningNewAttrBind(e.currAttr,e.newAttr),t.UserTips.ins().showUITips(t.LanguageUtils.language_Refining_Text6)):(this.lbFail.visible=!0,this.lbReplaceState.visible=!1,this.btnReplace.visible=!1,this.newAttrArr.removeAll(),t.UserTips.ins().showUITips(t.LanguageUtils.language_Refining_Text5))}},i.prototype.refiningBind=function(e){if(e){for(var i=e.split("|"),n=[],s=[],a=0;a<i.length;a++){var r=i[a].split(","),o={type:Number(r[0]),value:Number(r[1])};n.push(o)}for(var a=0;a<n.length;a++){var l=this.attrColor[n[a].type],h=t.AttributeData.getRiningItemAttStrByType(n[a],l,l);""!=h&&s.push({attrStr:h,attrValue:n[a]})}this.currAttrArr.replaceAll(s)}else this.currAttrArr.removeAll()},i.prototype.refiningNewAttrBind=function(e,i){if(i){for(var n=e.split("|"),s=i.split("|"),a=[],r=[],o=0;o<s.length;o++){var l=s[o].split(","),h={type:Number(l[0]),value:Number(l[1])};a.push(h)}for(var o=0;o<a.length;o++){for(var p=1,u=0,c=n;u<c.length;u++){var g=c[u],h=g.split(",");h[0]==a[o].type&&(p=a[o].value>h[1]?1:a[o].value<h[1]?2:0)}var d=this.attrColor[a[o].type],m=t.AttributeData.getRiningItemAttStrByType(a[o],d,d);""!=m&&r.push({attrStr:m,sort:p})}this.newAttrArr.replaceAll(r)}else this.newAttrArr.removeAll()},i.prototype.updateCost=function(){if(this.seleteItem){var e=t.GlobalConfig.RefiningmaterialsConfig[this.seleteItem.wItemId],i=this.refiningmaterialsGetData(e.consume);this.costGoods.replaceAll(i)}},i.prototype.open=function(){this.observe(t.ForgeMgr.ins().post_19_4,this.update),this.observe(t.ForgeMgr.ins().post_19_5,this.showCurrentEquip),this.observe(t.BagMgr.ins().post_8_6,this.updateList),this.observe(t.EquipMgr.ins().post_7_4,this.updateList),this.observe(t.BagMgr.ins().post_8_4,this.updateCost),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateCost),this.observe(t.BagMgr.ins().post_8_3,this.updateLeftList),this.observe(t.BagMgr.ins().post_8_1,this.updateLeftList);var e=t.GlobalConfig.RefiningReplaceConfig,i=[];this.seletePos=0;for(var n in e)t.ViewManager.ins().isCheckOpen(e[n].showlimit)&&i.push(e[n]);i.sort(function(t,e){return t.id-e.id}),this.moneyArr.replaceAll(i)},i.prototype.close=function(){this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.tabItem.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.tabEq.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.removeTouchEvent(this.btnRefining,this.onClick),this.removeTouchEvent(this.btnReplace,this.onClick),this.removeTouchEvent(this.lbShowDesc,this.onClick),t.EventManager.ins().removeEvent(t.CommonEvent.SELECT_REFINING_RESPLACE,this.refreshReplace,this),t.MouseScroller.unbind(this.scroller),this.equipArr.removeAll(),this.equipArr=null,this.seleteItem=null,this.seletePos=0,this.costGoods.removeAll(),this.costGoods=null,this.currAttrArr.removeAll(),this.currAttrArr=null,this.moneyArr.removeAll(),this.moneyArr=null,this.newAttrArr.removeAll(),this.newAttrArr=null;for(var e=0;2>e;e++)this.removeTouchEvent(this["txt_get"+e],this.onGetProps)},i}(t.BaseEuiView);t.ForgeRefiningView=e,__reflect(e.prototype,"app.ForgeRefiningView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.addMouseMoveEvent(t,t.mouseMove),t.addMouseOverEvent(t,t.mouseMove),t}return __extends(i,e),i.prototype.dataChanged=function(){if(this.data){var e=this.data,i=t.GlobalConfig.StdItems[e.id];i&&(this.itemBg.source="quality_"+i.showQuality,this.itemIcon.source=i.icon+"")}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(this.data&&this.data.id){var n=i.localToGlobal(),s=t.GlobalConfig.StdItems[this.data.id];if(s){var a=t.TipsType.TIPS_EQUIP;a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2})}n=null}i=null}},i}(t.BaseItemRender);t.ForgeRewardItem=e,__reflect(e.prototype,"app.ForgeRewardItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.txt_next.textFlow=t.TextFlowMaker.generateTextFlow(this.data.attrStr)},i}(t.BaseItemRender);t.ForgeUpStarNextAttrItem=e,__reflect(e.prototype,"app.ForgeUpStarNextAttrItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.seletePos=0,i.itemCosts=[852,932,954],i.skinName="ForgeUpStarSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.equipArr=new eui.ArrayCollection,this.costGoods=new eui.ArrayCollection,this.currAttrArr=new eui.ArrayCollection,this.nextAttrArr=new eui.ArrayCollection,this.moneyArr=new eui.ArrayCollection,this.listMoney.itemRenderer=t.ForgeRefiningMoneyItem,this.listMoney.dataProvider=this.moneyArr,this.tabEq.itemRenderer=t.ForgeRefiningEquipItem;var i=t.UpstarData.ins().sortEquip(t.EquipItemMgr.ins().equips,t.EquipItemMgr.ins().suitEquips);this.equipArr.source=i,this.tabEq.dataProvider=this.equipArr,this.listCurAttr.itemRenderer=t.ForgeRefiningCurrAttrItem,this.listCurAttr.dataProvider=this.currAttrArr,this.listGoods.itemRenderer=t.ForgeRefiningCostGoodsItem,this.listGoods.dataProvider=this.costGoods,this.listNextAttr.itemRenderer=t.ForgeUpStarNextAttrItem,this.listNextAttr.dataProvider=this.nextAttrArr,this.addTouchEvent(this.btnUpStar,this.onClick),this.tabEq.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),t.MouseScroller.bind(this.scroller),this.tabEq.selectedIndex=0,this.showCurrentEquip(),this.showGetPropsView(),t.EventManager.ins().addEvent(t.CommonEvent.SELECT_REFINING_RESPLACE,this.refreshReplace,this)},i.prototype.showGetPropsView=function(){for(var e=0;3>e;e++)t.GetPropsView.getPropsTxt(this["txt_get"+e],this.itemCosts[e]),this.addTouchEvent(this["txt_get"+e],this.onGetProps)},i.prototype.onGetProps=function(e){var i;if(i=e.currentTarget==this.txt_get0?t.GlobalConfig.GetItemRouteConfig[this.itemCosts[0]]:e.currentTarget==this.txt_get1?t.GlobalConfig.GetItemRouteConfig[this.itemCosts[1]]:t.GlobalConfig.GetItemRouteConfig[this.itemCosts[2]],!t.ViewManager.ins().isShow(t.GaimItemWin)){var n=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,i.itemid,{x:n.x,y:n.y},{height:this.height,width:this.width},this.hashCode)}},i.prototype.onClick=function(e){if(this.seleteItem){var i=t.GlobalConfig.UpstarConfig[this.seleteItem.wItemId][this.seleteItem.wStar];if(i){for(var n=[],s=0;s<this.listMoney.numElements;s++){var a=this.listMoney.getVirtualElementAt(s);a&&a.data&&a.checkYes.selected&&n.push(a.data.itemid)}var r=t.OtherMgr.ins().getItemIDByCost2(i.consume,n);if(0!=r.itemId){if(!t.ViewManager.ins().isShow(t.GaimItemWin)){var o=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,r,{x:o.x,y:o.y},{height:this.height,width:this.width},this.hashCode)}return}}t.ForgeMgr.ins().send_19_8(this.seleteItem.series,this.seletePos)}},i.prototype.onBarItemTap=function(t){this.tabEq.selectedIndex=t.itemIndex,this.showCurrentEquip()},i.prototype.refiningmaterialsGetData=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],s=n.type,a=n.id,r=n.count;e.push({type:s,id:a,count:r})}return e},i.prototype.showCurrentEquip=function(){if(this.lbMax.visible=!1,this.listMoney.visible=!0,!this.tabEq.selectedItem)return this.item.visible=!1,void(this.lbTitle.visible=!1);var e=this.tabEq.selectedItem.item;this.seleteItem=e,this.item.data=e;var i=e.wStar,n=t.GlobalConfig.StdItems[e.wItemId];this.lbTitle.text=n.name,this.item.visible=!0,this.lbTitle.visible=!0;for(var s=1;12>=s;s++)this["imgStar"+s].source="forge_xxbg",i>=s&&(this["imgStar"+s].source=7>i?"forge_xx1":"forge_xx2");var a=t.GlobalConfig.UpstarConfig[e.wItemId];if(a){var r=a[i]?a[i]:a[i+1],o=Object.keys(a),l=Number(o[o.length-1]);if(i>=l)this.rateLabel.text="",this.costGoods.removeAll(),this.nextAttrArr.removeAll(),this.listMoney.visible=!1,this.lbMax.visible=!0;else{for(var h=[],s=(t.GlobalConfig.UpstarPriceConfig,0);s<r.consume.length;s++){var p=r.consume[s],u=p.type,c=p.id,g=p.count;h.push({type:u,id:c,count:g})}this.costGoods.replaceAll(h);var d=a[i+1].attribute;this.rateLabel.text=t.LanguageUtils.language_Common_161+t.MathUtils.GetPercent(a[i+1].rate,1e4)+"\n"+t.LanguageUtils.language_Omission_txt142,this.nextAttrArr.replaceAll(this.upStarAttrBind(d,"0xE0AE75","0x28ee01"))}this.currAttrArr.replaceAll(this.upStarAttrBind(r.attribute,"0xbb8f5e","0xcbc2b2"))}else this.costGoods.removeAll(),this.nextAttrArr.removeAll(),this.currAttrArr.removeAll(),this.listMoney.visible=!1},i.prototype.upStarAttrBind=function(e,i,n){for(var s=[],a=0;a<e.length;a++){var r=t.AttributeData.getItemAttStrByType(e[a],e,0,!1,!0,i,n);""!=r&&s.push({attrStr:r,attrValue:e[a]})}return s},i.prototype.updateList=function(){var e=t.UpstarData.ins().sortEquip(t.EquipItemMgr.ins().equips,t.EquipItemMgr.ins().suitEquips);this.equipArr.replaceAll(e),this.showCurrentEquip(),this.updateCost()},i.prototype.refreshReplace=function(e){for(var i=[],n=0;n<this.listMoney.numElements;n++){var s=this.listMoney.getVirtualElementAt(n);s&&s.data&&s.checkYes.selected&&i.push(s.data.itemid)}var a,r=t.RefiningData.ins().getStarPosList();this.seletePos=0;for(var n=0;n<r.length;n++)a=r[n],-1!=i.indexOf(a.itemid)&&(this.seletePos=this.seletePos^1<<a.id)},i.prototype.open=function(){this.observe(t.EquipMgr.ins().post_7_4,this.updateList),this.observe(t.ForgeMgr.ins().post_19_8,this.post_19_8),this.observe(t.BagMgr.ins().post_8_4,this.updateCost),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateList);var e=t.GlobalConfig.UpstarPriceConfig,i=[];this.seletePos=0;for(var n in e)i.push(e[n]);i.sort(function(t,e){return t.id-e.id}),this.moneyArr.replaceAll(i)},i.prototype.post_19_8=function(e){e?4==e&&t.DefaultMgr.ins().payResultMC(0,this.localToGlobal(this.width/2+120,this.height/2)):t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2+120,this.height/2)),this.showCurrentEquip()},i.prototype.updateCost=function(){if(this.seleteItem){var e=t.GlobalConfig.UpstarConfig[this.seleteItem.wItemId];if(e){var i=this.seleteItem.wStar,n=e[i]?e[i]:e[i+1],s=Object.keys(e),a=Number(s[s.length-1]);if(i>=a)this.costGoods.removeAll();else{var r=this.refiningmaterialsGetData(n.consume);this.costGoods.replaceAll(r)}}}},i.prototype.close=function(){this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.removeTouchEvent(this.btnUpStar,this.onClick),t.EventManager.ins().removeEvent(t.CommonEvent.SELECT_REFINING_RESPLACE,this.refreshReplace,this),this.tabEq.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),t.MouseScroller.unbind(this.scroller),this.equipArr.removeAll(),this.equipArr=null,this.seleteItem=null,this.seletePos=0,this.costGoods.removeAll(),this.costGoods=null,this.currAttrArr.removeAll(),this.currAttrArr=null,this.nextAttrArr.removeAll(),this.nextAttrArr=null,this.moneyArr.removeAll(),this.nextAttrArr=null},i}(t.BaseEuiView);t.ForgeUpStarView=e,__reflect(e.prototype,"app.ForgeUpStarView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.itemCount=0,i.probabilityID=1,i.ruleArr=[24,25,26],i.name=t.LanguageUtils.language_System33,i.dSpriteSheet=new how.DSpriteSheet,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.forgeList.itemRenderer=t.ItemBase,this.rewardList.itemRenderer=t.ForgeRewardItem,this.useMaterial=how.getQuickLabel(this.dSpriteSheet),this.useMaterial.x=187,this.useMaterial.y=369,this.useMaterial.size=18,this.useMaterial.textWidth=271,this.useMaterial.textColor=16758867,this.useMaterial.textStroke=1,this.useMaterial.textStrokeColor=0,this.useMaterial.textAlign="center",this.addChild(this.useMaterial),this.curHave=how.getQuickLabel(this.dSpriteSheet),this.curHave.x=187,this.curHave.y=399,this.curHave.size=18,this.curHave.textWidth=271,this.curHave.textColor=16758867,this.curHave.textStroke=1,this.curHave.textStrokeColor=0,this.curHave.textAlign="center",this.addChild(this.curHave),this.obtain.visible=!1,this.itemQua.visible=!1,this.itemIcon.visible=!1,this.rewardList.visible=!1,this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.txt_get.visible=!1,t.GetPropsView.getPropsTxt(this.txt_get,t.GlobalConfig.ForgeBaseConfig.itemID),this.initMaterial()},i.prototype.onGetProps=function(){var e=t.GlobalConfig.GetItemRouteConfig[t.GlobalConfig.ForgeBaseConfig.itemID];t.ViewManager.ins().isShow(t.GaimItemWin)||t.ViewManager.ins().open(t.GaimItemWin,e.itemid,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode)},i.prototype.initMaterial=function(){var e=t.GlobalConfig.ForgeBaseConfig.itemID,i=t.GlobalConfig.ForgeBaseConfig.one;if(e){var n=t.GlobalConfig.StdItems[e];n&&i&&(this.useMaterial.text=t.StringUtils.replace(t.LanguageUtils.language_Common_35,i,n.name)),this.itemCount=t.BagMgr.ins().getItemCountById(e),this.curHave.text=t.StringUtils.replace(t.LanguageUtils.language_Common_36,this.itemCount)}},i.prototype.open=function(){t.ForgeMgr.ins().send_19_3(),this.addTouchEvent(this.recycle,this.onTouch),this.addTouchEvent(this.bulkRecycle,this.onTouch),this.addTouchEvent(this.historyRecord,this.onTouch),this.addTouchEvent(this.forge,this.onTouch),this.addTouchEvent(this.forgeTen,this.onTouch),this.addTouchEvent(this.rule,this.onTouch),this.addMouseMoveEvent(this.itemIcon,this.mouseMove),this.addMouseOverEvent(this.itemIcon,this.mouseMove),this.observe(t.ForgeMgr.ins().post_19_3,this.refeshReward),this.observe(t.BagMgr.ins().post_8_1,this.initMaterial),this.observe(t.BagMgr.ins().post_8_3,this.initMaterial),this.observe(t.BagMgr.ins().post_8_4,this.initMaterial),this.observe(t.BagMgr.ins().post_8_10,this.initMaterial),this.observe(t.ForgeMgr.ins().post_19_2,this.updaView),t.MouseScroller.bind(this.scroller),t.EventManager.ins().addEvent(t.FriendEvent.FORGE_MENU_ONCLICK,this.onMenuClick,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this)},i.prototype.updaView=function(e){if(e.length>0)if(1==e.length){this.rewardList.visible=!1,this.oneGrp.visible=!0,this.obtain.visible=!0,this.itemQua.visible=!0,this.itemIcon.visible=!0;var i=e[0].id;if(i){var n=t.GlobalConfig.StdItems[i];n&&(this.itemQua.source="quality_"+n.showQuality,this.itemIcon.itemID=n.id,this.itemIcon.source=n.icon+"")}}else this.oneGrp.visible=!1,this.rewardList.visible=!0,this.obtain.visible=!0,this.rewardList.dataProvider=new eui.ArrayCollection(e)},i.prototype.refeshReward=function(e){this.probabilityID=e;var i=t.GlobalConfig.ForgeConfig[e];i&&i.showRewards?this.forgeList.dataProvider=new eui.ArrayCollection(i.showRewards):this.forgeList.dataProvider=new eui.ArrayCollection([])},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(i&&i.itemID){var n=i.localToGlobal(),s=t.GlobalConfig.StdItems[i.itemID];if(s){var a=t.TipsType.TIPS_EQUIP;a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2})}}}},i.prototype.onTouch=function(e){var i=t.GlobalConfig.ForgeBaseConfig.one,n=t.GlobalConfig.ForgeBaseConfig.ten,s=t.GlobalConfig.ForgeBaseConfig.forgeonelevel,a=t.GlobalConfig.ForgeBaseConfig.forgetenlevel,r=t.EntityMgr.ins().getPlayerPropertySet();switch(e.currentTarget){case this.recycle:t.ViewManager.ins().isShow(t.BagView)||t.ViewManager.ins().open(t.BagView,{0:1}),t.ViewManager.ins().isShow(t.BagRecycleView)||t.ViewManager.ins().open(t.BagRecycleView);break;case this.bulkRecycle:t.ViewManager.ins().open(t.ForgeFunMenuView,this.bulkRecycle.localToGlobal(0,0),t.LanguageUtils.language_System30);break;case this.historyRecord:t.ViewManager.ins().isShow(t.ForgeRecordView)||t.ViewManager.ins().open(t.ForgeRecordView);break;case this.forge:var o=t.GlobalConfig.BagRemainConfig[8];if(o){var l=t.BagMgr.ins().getBagCapacity(o.bagremain);if(l){if(i&&s&&r){var h=r.propSet;+h.getLevel()>=s?this.itemCount>=i?t.ForgeMgr.ins().send_19_2(1):(t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips21),this.onGetProps()):t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips22,s))}}else t.UserTips.ins().showUITips(o.bagtips)}break;case this.forgeTen:var p=t.GlobalConfig.BagRemainConfig[9];if(p){var l=t.BagMgr.ins().getBagCapacity(p.bagremain);if(l){if(n&&a&&r){var u=r.propSet;+u.getLevel()>=a?this.itemCount>=n?t.ForgeMgr.ins().send_19_2(10):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips21):t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips22,a))}}else t.UserTips.ins().showUITips(p.bagtips)}break;case this.rule:var c=this.ruleArr[this.probabilityID-1];c&&t.ViewManager.ins().open(t.RuleView,{id:c})}},i.prototype.onMenuClick=function(e){var i=e[0],n=new t.ItemSeries;n.setData(0);var s=t.GlobalConfig.BagRemainConfig[5],a=!1;switch(s&&(a=t.BagMgr.ins().getBagCapacity(s.bagremain)),i){case"lowEquip":a?t.BagMgr.ins().send_8_10(0,n):s&&t.UserTips.ins().showUITips(s.bagtips);break;case"fertileEquip":a?t.CautionView.show(t.LanguageUtils.language_Common_31,function(){t.BagMgr.ins().send_8_10(1,n)},this):s&&t.UserTips.ins().showUITips(s.bagtips);break;case"zuMaEquip":a?t.CautionView.show(t.LanguageUtils.language_Common_32,function(){t.BagMgr.ins().send_8_10(2,n)},this):s&&t.UserTips.ins().showUITips(s.bagtips)}},i.prototype.onCloseMenu=function(){t.ViewManager.ins().close(t.ForgeFunMenuView)},i.prototype.close=function(){this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),t.MouseScroller.unbind(this.scroller),this.removeTouchEvent(this.recycle,this.onTouch),this.removeTouchEvent(this.bulkRecycle,this.onTouch),this.removeTouchEvent(this.historyRecord,this.onTouch),this.removeTouchEvent(this.forge,this.onTouch),this.removeTouchEvent(this.forgeTen,this.onTouch),this.removeTouchEvent(this.rule,this.onTouch),t.ViewManager.ins().isShow(t.ForgeFunMenuView)&&t.ViewManager.ins().close(t.ForgeFunMenuView),this.itemIcon.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.itemIcon.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),t.EventManager.ins().removeEvent(t.FriendEvent.FORGE_MENU_ONCLICK,this.onMenuClick,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),this.dSpriteSheet.dispose(),this.obtain=null,this.recycle=null,this.bulkRecycle=null,this.historyRecord=null,this.forge=null,this.forgeTen=null,this.rule=null,this.oneGrp=null,this.itemQua=null,this.itemIcon=null,this.forgeList=null,this.rewardList=null,this.dSpriteSheet=null,this.useMaterial=null,this.curHave=null,this.itemCount=null,this.probabilityID=null,this.ruleArr=null},i}(t.BaseEuiView);t.ForgeView=e,__reflect(e.prototype,"app.ForgeView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="ForgeWinSkin",i.name="ForgeWin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.forgeUpStar=new t.ForgeUpStarView,this.forgeUpStar.skinName="ForgeUpStarSkin",this.forgeUpStar.name="升星",this.forgeUpStar.left=0,this.forgeUpStar.right=0,this.forgeUpStar.top=0,this.forgeUpStar.bottom=0,this.forgeUpStar.x=0,this.forgeUpStar.y=0,this.viewStack.addChild(this.forgeUpStar)},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.ruleTips.visible=!1,this.dragDropUI.setTitle("升星"),this.forgeUpStar.open()},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.forgeUpStar&&this.forgeUpStar.close(),this.dragDropUI.destroy(),this.dragDropUI=null,this.ruleTips=null},i}(t.BaseEuiView);t.ForgeWin=e,__reflect(e.prototype,"app.ForgeWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="SynthesisItem2CostItemSkin",t.addMouseMoveEvent(t.costName,t.mouseMove),t.addMouseOverEvent(t.costName,t.mouseMove),t}return __extends(i,e),i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.costName.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.costName.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(this.data){var n=i.localToGlobal();if(0==this.data.type){var s=t.GlobalConfig.StdItems[this.data.id];if(s){var a=t.TipsType.TIPS_EQUIP;a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2})}}}}},i.prototype.dataChanged=function(){if(this.data){this.iconImg.visible=!1;var e=15064527,i=0,n=t.ColorUtil.NAME_RED;if(0==this.data.type){var s=t.GlobalConfig.StdItems[this.data.id];if(s){e=t.ColorUtil.GOODS_COLOR[s.showQuality],i=t.CurrencyUtils.getCurrency(this.data.type,this.data.id),n=i>=this.data.count?t.ColorUtil.GREEN_COLOR:t.ColorUtil.NAME_RED;var a="";a=t.CommonUtils.overLength(i),this.costName.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+e+"&T:"+s.name+"| (|C:"+n+"&T:"+a+"|/"+this.data.count+")")}}else{this.iconImg.visible=!0;var r=t.GlobalConfig.NumericalIcon[this.data.type];if(r){var o="";o=2==this.data.type?t.LanguageUtils.language_Omission_txt101:r.name+"",this.iconImg.source=r.icon+"",i=t.CurrencyUtils.getCurrency(this.data.type,this.data.id),n=i>=this.data.count?t.ColorUtil.GREEN_COLOR:t.ColorUtil.NAME_RED;var l="";l=this.data.count+"",(3!=this.data.type||4!=this.data.type)&&(l=t.CommonUtils.overLength(this.data.count)),this.costName.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+e+"&T:"+o+"| (|C:"+n+"&T:"+t.CommonUtils.overLengthChange(i)+"|/"+l+")")}}}},i}(t.BaseItemRender);t.SynthesisItem2ItemView=e,__reflect(e.prototype,"app.SynthesisItem2ItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="SynthesisItem2Skin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.costList.itemRenderer=t.SynthesisItem2ItemView,this.addTouchEvent(this.syntheticBtn,this.onTouch),this.addTouchEvent(this.syntheticBtn1,this.onTouch),this.addTouchEvent(this.syntheticBtn2,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.syntheticBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.syntheticBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.syntheticBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},i.prototype.onTouch=function(t){switch(t.currentTarget){case this.syntheticBtn:case this.syntheticBtn1:this.onSynthetic(1);break;case this.syntheticBtn2:this.onSynthetic(10)}},i.prototype.onSynthetic=function(e){var i=this,n=t.ForgeMgr.ins().isSynthesisItem(this.itemCfg.table,e),s=1==e?t.GlobalConfig.BagRemainConfig[6]:t.GlobalConfig.BagRemainConfig[19],a=!1;if(s&&(a=t.BagMgr.ins().getBagCapacity(s.bagremain)),n)if(a){var r=t.ForgeMgr.ins().getShowTips(this.itemCfg.table,e);if(0==this.itemCfg.compose.type){var o=t.GlobalConfig.StdItems[this.itemCfg.compose.id];o&&(r+="\n"+t.LanguageUtils.language_Common_34+this.itemCfg.compose.count*e+t.LanguageUtils.language_Common_38+o.name)}else{var l=t.CurrencyUtils.getCurrencyNameIcon(this.itemCfg.compose.type,this.itemCfg.compose.id);l&&(r+="\n"+t.LanguageUtils.language_Common_34+this.itemCfg.compose.count*e+t.LanguageUtils.language_Common_38+l[0])}this.itemCfg.clicklimit?t.ForgeMgr.ins().send_19_1(this.itemCfg.Eid,e):t.CautionView.show(r,function(){t.ForgeMgr.ins().send_19_1(i.itemCfg.Eid,e)},this,null,null,null,null,t.SettingMgr.COMPOSE)}else s&&t.UserTips.ins().showUITips(s.bagtips);else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips21);n=null,a=null},i.prototype.dataChanged=function(){if(this.data){this.limitLab.visible=!1;var e=15064527;if(this.itemCfg=this.data,this.itemCfg){if(this.itemCfg.compose)if(this.itemData.data=this.itemCfg.compose,0==this.itemCfg.compose.type){var i=t.GlobalConfig.StdItems[this.itemCfg.compose.id];i&&(e=t.ColorUtil.GOODS_COLOR[i.showQuality],this.itemName.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+e+"&T:"+i.name+"|"))}else{var n=t.GlobalConfig.NumericalIcon[this.itemCfg.compose.type];n&&(this.itemName.text=this.itemCfg.compose.count+n.name)}this.itemCfg.table&&(this.costList.dataProvider=new eui.ArrayCollection(this.itemCfg.table)),this.syntheticBtn.visible=!1,this.syntheticBtn1.visible=!1,this.syntheticBtn2.visible=!1,this.redPoint.visible=!1,this.redPoint1.visible=!1,this.redPoint2.visible=!1;var s=t.ViewManager.ins().isCheckOpen(this.itemCfg.mergelimit);if(s)if(this.itemCfg.mergebutton10){var a=t.CurrencyUtils.isRedDot(this.itemCfg.table);a?(this.syntheticBtn1.label=this.itemCfg.text,this.syntheticBtn1.alpha=1,this.syntheticBtn1.labelDisplay.textColor=15779990):(this.syntheticBtn1.label=t.LanguageUtils.language_Omission_txt102,this.syntheticBtn1.alpha=.7,this.syntheticBtn1.labelDisplay.textColor=8420211),this.syntheticBtn1.enabled=!0,this.syntheticBtn1.visible=!0;var r=t.CurrencyUtils.isRedDot(this.itemCfg.table,10);r?(this.syntheticBtn2.label=this.itemCfg.buttontxt10,this.syntheticBtn2.alpha=1,this.syntheticBtn2.labelDisplay.textColor=15779990):(this.syntheticBtn2.label=t.LanguageUtils.language_Omission_txt102,this.syntheticBtn2.alpha=.7,this.syntheticBtn2.labelDisplay.textColor=8420211),this.syntheticBtn2.enabled=!0,this.syntheticBtn2.visible=!0,this.itemCfg.redpoint&&(this.redPoint1.visible=t.ForgeMgr.ins().getForgeRed(this.itemCfg.table,this.itemCfg.redpointlimit)&&s,this.redPoint1.setRedImg(this.itemCfg.redpoint),this.redPoint2.visible=t.ForgeMgr.ins().getForgeRed(this.itemCfg.table,this.itemCfg.redpointlimit,10)&&s,this.redPoint2.setRedImg(this.itemCfg.redpoint))}else{var o=t.CurrencyUtils.isRedDot(this.itemCfg.table);o?(this.syntheticBtn.label=this.itemCfg.text,this.syntheticBtn.alpha=1,this.syntheticBtn.labelDisplay.textColor=15779990):(this.syntheticBtn.label=t.LanguageUtils.language_Omission_txt102,this.syntheticBtn.alpha=.7,this.syntheticBtn.labelDisplay.textColor=8420211),this.syntheticBtn.enabled=!0,this.syntheticBtn.visible=!0,this.itemCfg.redpoint&&(this.redPoint.visible=t.ForgeMgr.ins().getForgeRed(this.itemCfg.table,this.itemCfg.redpointlimit)&&s,this.redPoint.setRedImg(this.itemCfg.redpoint))
}else this.limitLab.visible=!0,this.limitLab.textFlow=t.TextFlowMaker.generateTextFlow(this.itemCfg.limitTips)}}},i}(t.BaseItemRender);t.SynthesisItem2View=e,__reflect(e.prototype,"app.SynthesisItem2View")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="SynthesisItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.sure,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.sure.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},i.prototype.onTouch=function(e){var i=this;switch(e.currentTarget){case this.sure:var n=t.ForgeMgr.ins().isSynthesisItem(this.itemCfg.table),s=t.GlobalConfig.BagRemainConfig[6],a=!1;if(s&&(a=t.BagMgr.ins().getBagCapacity(s.bagremain)),n)if(a){var r=t.ForgeMgr.ins().getShowTips(this.itemCfg.table),o=t.CurrencyUtils.getCurrencyNameIcon(this.itemCfg.compose.type,this.itemCfg.compose.id);o&&(r+="\n"+t.LanguageUtils.language_Common_34+this.itemCfg.compose.count+t.LanguageUtils.language_Common_38+o[0]),this.itemCfg.clicklimit?t.ForgeMgr.ins().send_19_1(this.itemCfg.Eid,1):t.CautionView.show(r,function(){t.ForgeMgr.ins().send_19_1(i.itemCfg.Eid,1)},this,null,null,null,null,t.SettingMgr.COMPOSE)}else s&&t.UserTips.ins().showUITips(s.bagtips);else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips21);n=null,a=null}},i.prototype.dataChanged=function(){if(this.data){this.limitLab.visible=!1;var e=15064527;if(this.itemCfg=this.data,this.itemCfg&&this.itemCfg.table){this.currentState="item"+this.itemCfg.table.length;for(var i=0;i<this.itemCfg.table.length;i++){this["item"+(i+1)].data=this.itemCfg.table[i];var n=0,s=t.ColorUtil.NAME_RED;if(0==this.itemCfg.table[i].type){var a=t.GlobalConfig.StdItems[this.itemCfg.table[i].id];a&&(e=t.ColorUtil.GOODS_COLOR[a.showQuality],n=t.CurrencyUtils.getCurrency(this.itemCfg.table[i].type,this.itemCfg.table[i].id),s=n>=this.itemCfg.table[i].count?t.ColorUtil.GREEN_COLOR:t.ColorUtil.NAME_RED,this["name"+(i+1)].textFlow=t.TextFlowMaker.generateTextFlow("|C:"+e+"&T:"+a.name+"|\n|C:"+s+"&T:"+t.CommonUtils.overLengthChange(n)+"|/"+this.itemCfg.table[i].count))}else{var r=t.GlobalConfig.NumericalIcon[this.itemCfg.table[i].type];if(r){n=t.CurrencyUtils.getCurrency(this.itemCfg.table[i].type,this.itemCfg.table[i].id),s=n>=this.itemCfg.table[i].count?t.ColorUtil.GREEN_COLOR:t.ColorUtil.NAME_RED;var o="";o=this.itemCfg.table[i].count+"",(3!=this.itemCfg.table[i].type||4!=this.itemCfg.table[i].type)&&(o=t.CommonUtils.overLength(this.itemCfg.table[i].count)),this["name"+(i+1)].textFlow=t.TextFlowMaker.generateTextFlow(r.name+"\n|C:"+s+"&T:"+t.CommonUtils.overLengthChange(n)+"/"+o)}}}if(this.itemCfg.compose)if(this.itemData.data=this.itemCfg.compose,0==this.itemCfg.compose.type){var l=t.GlobalConfig.StdItems[this.itemCfg.compose.id];l&&(e=t.ColorUtil.GOODS_COLOR[l.showQuality],this.itemCfg.compose.count>1?this.itemName.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+e+"&T:"+l.name+"|\nx"+this.itemCfg.compose.count):this.itemName.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+e+"&T:"+l.name+"|"))}else{var r=t.GlobalConfig.NumericalIcon[this.itemCfg.compose.type];r&&(this.itemName.text=r.name+"\nx"+this.itemCfg.compose.count)}this.sure.label=this.itemCfg.text,this.sure.enabled=!0,this.sure.visible=!0,this.sure.labelDisplay.textColor=15779990;var h=t.ViewManager.ins().isCheckOpen(this.itemCfg.mergelimit);if(h){var p=t.CurrencyUtils.isRedDot(this.itemCfg.table);p?this.sure.alpha=1:(this.sure.label=t.LanguageUtils.language_Omission_txt102,this.sure.alpha=.7,this.sure.labelDisplay.textColor=8420211)}else this.sure.visible=!1,this.limitLab.visible=!0,this.limitLab.textFlow=t.TextFlowMaker.generateTextFlow(this.itemCfg.limitTips);this.redPoint.visible=!1,this.itemCfg.redpoint&&(this.redPoint.visible=t.ForgeMgr.ins().getForgeRed(this.itemCfg.table,this.itemCfg.redpointlimit)&&h,this.redPoint.setRedImg(this.itemCfg.redpoint))}}},i}(t.BaseItemRender);t.SynthesisItemView=e,__reflect(e.prototype,"app.SynthesisItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="SynthesisTab2Skin",t}return __extends(i,e),i.prototype.dataChanged=function(){this.data&&(this.itemName.text=this.data.name,this.redPoint.visible=t.ForgeMgr.ins().getTwoLvRed(this.data.id,this.data.index))},i}(t.BaseItemRender);t.SynthesisTab2View=e,__reflect(e.prototype,"app.SynthesisTab2View")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="SynthesisTabSkin",t.currentState="clickUp",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.list.itemRenderer=t.SynthesisTab2View,this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickBoss,this)},i.prototype.onClickBoss=function(e){var i=this.list.selectedItem,n=t.ViewManager.ins().getView(t.RecycleWin).synthesisPanel;n.refreshScroller(),n.updateView(i),n.unSelectList(),n.setCurIndex(this.data.id,e.itemIndex+1),this.list.selectedIndex=e.itemIndex},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickBoss,this)},i.prototype.dataChanged=function(){if(this.data&&(this.redPoint.visible=t.ForgeMgr.ins().getOneLvRed(this.data.id),this.equipName.text=this.data.btn_source,this.data.id)){var e=t.ForgeMgr.ins().getMergeSecMenu(this.data.id);e&&(this.list.dataProvider=new eui.ArrayCollection(e))}},i.prototype.setCurState=function(t){this.currentState=t},i}(t.BaseItemRender);t.SynthesisTabView=e,__reflect(e.prototype,"app.SynthesisTabView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.selectedIndex=0,i.tadIdx=1,i.tabListIdx=1,i.name=t.LanguageUtils.language_Common_34,i.skinName="SynthesisViewSkin",i}return __extends(i,e),i.prototype.open=function(e,i){this.tadIdx=e,this.tabListIdx=i,this.itemList2.itemRenderer=t.SynthesisItemView,this._itemListData2=new eui.ArrayCollection,this.itemList2.dataProvider=this._itemListData2,this.itemList1.itemRenderer=t.SynthesisItem2View,this._itemListData1=new eui.ArrayCollection,this.itemList1.dataProvider=this._itemListData1,this.TabList.itemRenderer=t.SynthesisTabView,this._tabListData=new eui.ArrayCollection,this.TabList.dataProvider=this._tabListData,this.TabList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMenu,this),t.MouseScroller.bind(this.itemScroller1),t.MouseScroller.bind(this.itemScroller2),t.MouseScroller.bind(this.tabScroller),this.observe(t.DefaultMgr.ins().postMoneyChange,this.moneyChange),this.observe(t.ForgeMgr.ins().post_19_1,this.post_19_1),this.observe(t.ForgeMgr.ins().post_updateItem,this.updateRedView);var n=t.ForgeMgr.ins().getMergeMenu();this._tabListData.replaceAll(n),this.unSelectTab(),this.unSelectList(),t.TimerManager.ins().remove(this.defaultSelect,this),t.TimerManager.ins().doTimer(100,1,this.defaultSelect,this),n=null},i.prototype.defaultSelect=function(){t.TimerManager.ins().remove(this.defaultSelect,this),this.selectList(this.tadIdx,this.tabListIdx,this.tabListIdx-1)},i.prototype.post_19_1=function(){this.updateRedView(),t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2+this.itemScroller1.x-80,this.height/2))},i.prototype.moneyChange=function(){t.TimerManager.ins().isExists(this.updateRedView,this)||t.TimerManager.ins().doTimer(2e3,1,this.updateRedView,this)},i.prototype.updateRedView=function(){var e=t.ForgeMgr.ins().getMergeMenu();this._tabListData.replaceAll(e),this.selectList(this.tadIdx,this.tabListIdx,this.tabListIdx-1)},i.prototype.setCurIndex=function(t,e){this.tadIdx=t,this.tabListIdx=e},i.prototype.refreshScroller=function(){this.itemScroller2.viewport.scrollV=0,this.itemScroller2.stopAnimation()},i.prototype.updateView=function(e){this.itemScroller2.visible=this.itemScroller1.visible=!1,this.isVisible.visible=!1;var i=t.ForgeMgr.ins().getItemSynthesis(e.id,e.index);1==e.Uitype?i.length>0?(this.itemScroller1.visible=!0,this._itemListData1.replaceAll(i)):this.isVisible.visible=!0:i.length>0?(this.itemScroller2.visible=!0,this._itemListData2.replaceAll(i)):this.isVisible.visible=!0},i.prototype.unSelectTab=function(){for(var t=this.TabList.dataProvider.length,e=0;t>e;e++){var i=this.TabList.getVirtualElementAt(e);i&&(i.currentState="clickUp")}t=null},i.prototype.unSelectList=function(){for(var t=this.TabList.dataProvider.length,e=0;t>e;e++){var i=this.TabList.getVirtualElementAt(e);if(i){var n=i.list;n.selectedIndex=-1}}t=null},i.prototype.selectList=function(t,e,i){void 0===i&&(i=0);for(var n=0,s=0;s<this._tabListData.length;s++){var a=this._tabListData.getItemAt(s).id;if(t==a){n=s;break}}var r=this.TabList.getVirtualElementAt(n);if(r){r.currentState="clickDown";var o=r.list;o.selectedIndex=i;var l=o.dataProvider.getItemAt(e-1);l&&this.updateView(l),o=null,l=null}n=null,r=null},i.prototype.onClickMenu=function(t){if(t.target.parent instanceof eui.Group){this.tadIdx=this.TabList.selectedIndex;var e=this.TabList.selectedIndex;this.selData=this.TabList.getVirtualElementAt(e);var i="clickUp"==this.selData.currentState?"clickDown":"clickUp";this.selData.setCurState(i),this.TabList.validateNow(),e=null,i=null}},i.prototype.close=function(){this.$onClose(),t.MouseScroller.unbind(this.itemScroller2),t.MouseScroller.unbind(this.tabScroller),t.MouseScroller.unbind(this.itemScroller1),t.TimerManager.ins().remove(this.defaultSelect,this),t.TimerManager.ins().isExists(this.updateRedView,this)&&t.TimerManager.ins().remove(this.updateRedView,this),this.TabList.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMenu,this),this.TabList=null,this.selectedIndex=null,this.selData=null,this._tabListData=null,this.itemList2=null,this.isVisible=null},i}(t.BaseEuiView);t.SynthesisView=e,__reflect(e.prototype,"app.SynthesisView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.friendsList=[],i.blackList=[],i.concernList=[],i.applyList=[],i.reportList=[],i._NearPlayerListData=[],i.sysId=t.PackageID.Friends,i.regNetMsg(t.FriendProtocol.sc_friend_list,i.post_gFriendsList),i.regNetMsg(t.FriendProtocol.sc_friend_req_info,i.postReqList),i.regNetMsg(t.FriendProtocol.sc_friend_del_friend,i.post_gDelRqInfo),i.regNetMsg(t.FriendProtocol.sc_friend_reprot_list,i.post_Report),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.sendFriendsList=function(e){var i=this.getBytes(t.FriendProtocol.cs_friend_list);i.writeByte(e),this.sendToServer(i)},i.prototype.sendAddFriend=function(e){var i=this.getBytes(t.FriendProtocol.cs_friend_add_friend);i.writeUnsignedInt(e.id),i.writeString(e.nickName),this.sendToServer(i)},i.prototype.sendAllAddFriend=function(){var e=this.getBytes(t.FriendProtocol.cs_friend_all_add_friend);this.sendToServer(e)},i.prototype.sendResponseFriend=function(e){var i=this.getBytes(t.FriendProtocol.cs_friend_add_rutrun_friend);i.writeByte(e.isAgree),i.writeUnsignedInt(e.id),this.sendToServer(i)},i.prototype.sendAddBlackList=function(e){var i=this.getBytes(t.FriendProtocol.cs_friend_add_blacklist);i.writeUnsignedInt(e.id),i.writeString(e.nickName),this.sendToServer(i)},i.prototype.sendDeleteFirends=function(e){var i=this.getBytes(t.FriendProtocol.cs_friend_del_friend);i.writeByte(e.type),i.writeUnsignedInt(e.id),i.writeString(e.nickName),this.sendToServer(i)},i.prototype.post_gDelRqInfo=function(t){this.delId=t.readUnsignedInt()},i.prototype.sendAddConcern=function(e){var i=this.getBytes(t.FriendProtocol.cs_friend_add_concern);i.writeUnsignedInt(e.id),i.writeString(e.nickName),this.sendToServer(i)},i.prototype.sendSetConcernColor=function(e){var i=this.getBytes(t.FriendProtocol.cs_friend_set_concern_color);i.writeByte(e.color),i.writeUnsignedInt(e.id),this.sendToServer(i)},i.prototype.sendReport=function(){var e=this.getBytes(t.FriendProtocol.cs_friend_req_report_info);this.sendToServer(e)},i.prototype.post_Report=function(e){for(var i=[],n=e.readByte(),s=t.FriendState.Report,a=0;n>a;a++){var r=new t.SCFriendData;r.roleId=e.readUnsignedInt(),r.nickName=e.readString(),r.time=e.readUnsignedInt(),r.sceneID=e.readUnsignedInt(),r.killType=e.readByte(),r.type=s,i.push(r)}i.sort(function(t,e){return t.time>e.time?-1:t.time<e.time?1:void 0}),this.reportList=i},i.prototype.post_gFriendsList=function(e){for(var i,n=[],s=e.readInt(),a=e.readByte(),r=0;s>r;r++)i=new t.SCFriendData,i.roleId=e.readUnsignedInt(),i.nickName=e.readString(),i.profession=e.readByte(),i.level=e.readInt(),i.icon=e.readByte(),i.sex=e.readByte(),i.color=e.readByte(),i.turn=e.readByte(),i.online=e.readByte(),i.guild=e.readString(),i.time=e.readUnsignedInt(),i.superLv=e.readUnsignedInt(),i.type=a,n.push(i);n.sort(function(t,e){return t.online&&!e.online?-1:!t.online&&e.online?1:void 0}),a==t.FriendState.Friend?this.friendsList=n:a==t.FriendState.BlackList?this.blackList=n:a==t.FriendState.Concern&&(this.concernList=n),t.MapView.updateNaemColor()},i.prototype.findIsFriend=function(t){for(var e=0;e<this.friendsList.length;e++)if(t==this.friendsList[e].roleId)return!0;return!1},i.prototype.getListNumbyType=function(t){var e=0;return 0==t?e=this.friendsList.length:1==t?e=this._NearPlayerListData.length:2==t?e=this.concernList.length:3==t?e=this.blackList.length:4==t?e=this.applyList.length:5==t&&(e=this.reportList.length),e},i.prototype.getFriendOnLineNum=function(){for(var t=0,e=0;e<this.friendsList.length;e++)1==this.friendsList[e].online&&t++;return t},i.prototype.getAttentionOnLineNum=function(){for(var t=0,e=0;e<this.concernList.length;e++)1==this.concernList[e].online&&t++;return t},i.prototype.concernIsFriend=function(t){for(var e,i=0;i<this.concernList.length;i++)if(e=this.concernList[i],t==e.roleId)return e;return null},i.prototype.postReqList=function(e){var i=new t.SCFriendData;i.roleId=e.readUnsignedInt(),i.nickName=e.readString(),i.level=e.readInt(),i.profession=e.readByte(),i.sex=e.readByte(),i.superLv=e.readUnsignedInt(),i.type=t.FriendState.Other;for(var n=0;n<this.applyList.length;n++)if(i.roleId==this.applyList[n].roleId)return;this.applyList.push(i)},i.prototype.setNearPlayerListData=function(){this._NearPlayerListData=t.OtherMgr.ins().nearPlayerList},i.prototype.getNearPlayerListData=function(){return this._NearPlayerListData},i.prototype.delNearPlayerListData=function(e){for(var i=0;i<this._NearPlayerListData.length;i++)e==this._NearPlayerListData[i].roleId&&this._NearPlayerListData.splice(i,1);t.EventManager.ins().sendEvent(t.FriendEvent.ITEM_ONCHANGE)},i}(t.BaseSystem);t.FriendMgr=e,__reflect(e.prototype,"app.FriendMgr")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.superLv=0}return t.prototype.getColor=function(){var t;return t=1==this.color?14549407:2==this.color?4513277:3==this.color?7873229:4==this.color?14549407:15856626},t}();t.SCFriendData=e,__reflect(e.prototype,"app.SCFriendData");var i=function(){function t(){}return t}();t.CSFriend_Add_Data=i,__reflect(i.prototype,"app.CSFriend_Add_Data");var n=function(){function t(){}return t}();t.CSFriend_Del_Data=n,__reflect(n.prototype,"app.CSFriend_Del_Data");var s=function(){function t(){}return t}();t.CSFriend_Return_Data=s,__reflect(s.prototype,"app.CSFriend_Return_Data");var a=function(){function t(){}return t}();t.CSFriend_Add_Concern_Data=a,__reflect(a.prototype,"app.CSFriend_Add_Concern_Data");var r=function(){function t(){}return t}();t.CSFriend_set_Concern_Color_Data=r,__reflect(r.prototype,"app.CSFriend_set_Concern_Color_Data");var o;!function(t){t[t.Friend=1]="Friend",t[t.BlackList=2]="BlackList",t[t.Concern=3]="Concern",t[t.Near=4]="Near",t[t.Report=5]="Report",t[t.Other=6]="Other"}(o=t.FriendState||(t.FriendState={}));var l;!function(t){t[t.cs_friend_add_friend=1]="cs_friend_add_friend",t[t.cs_friend_add_rutrun_friend=2]="cs_friend_add_rutrun_friend",t[t.cs_friend_list=3]="cs_friend_list",t[t.cs_friend_add_blacklist=4]="cs_friend_add_blacklist",t[t.cs_friend_add_concern=5]="cs_friend_add_concern",t[t.cs_friend_set_concern_color=6]="cs_friend_set_concern_color",t[t.cs_friend_del_friend=7]="cs_friend_del_friend",t[t.cs_friend_req_report_info=8]="cs_friend_req_report_info",t[t.cs_friend_all_add_friend=9]="cs_friend_all_add_friend",t[t.sc_friend_add_friend=1]="sc_friend_add_friend",t[t.sc_friend_add_rutrun_friend=2]="sc_friend_add_rutrun_friend",t[t.sc_friend_list=3]="sc_friend_list",t[t.sc_friend_add_blacklist=4]="sc_friend_add_blacklist",t[t.sc_friend_add_concern=5]="sc_friend_add_concern",t[t.sc_friend_set_concern_color=6]="sc_friend_set_concern_color",t[t.sc_friend_del_friend=7]="sc_friend_del_friend",t[t.sc_friend_req_info=8]="sc_friend_req_info",t[t.sc_friend_reprot_list=9]="sc_friend_reprot_list"}(l=t.FriendProtocol||(t.FriendProtocol={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.isTopLevel=!0,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="FriendAddViewSkin",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n,s;this.ConfirmBtn.label=t.LanguageUtils.language_Common_59,this.type=e[0],e[0]==t.FriendState.Friend?(n=t.LanguageUtils.language_System12,s=t.LanguageUtils.language_Friend_Add_Friend_tips):e[0]==t.FriendState.Concern?(n=t.LanguageUtils.language_System14,s=t.LanguageUtils.language_Friend_Add_Concern_tips):e[0]==t.FriendState.BlackList&&(n=t.LanguageUtils.language_System15,s=t.LanguageUtils.language_Friend_Add_Black_tips),this.typeLb.text=s,this.dragDropUI.setParent(this),this.dragDropUI.setTitle(n),this.addTouchEvent(this.ConfirmBtn,this.onClick)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.ConfirmBtn,this.onClick)},i.prototype.onClick=function(e){if(""!=this.playerNameText.text.trim()){if(this.type==t.FriendState.Friend){var n=new t.CSFriend_Add_Data;n.id=0,n.nickName=this.playerNameText.text,t.FriendMgr.ins().sendAddFriend(n)}else if(this.type==t.FriendState.Concern){var n=new t.CSFriend_Add_Concern_Data;n.id=0,n.nickName=this.playerNameText.text,t.FriendMgr.ins().sendAddConcern(n)}else if(this.type==t.FriendState.BlackList){var n=new t.CSFriend_Add_Concern_Data;n.id=0,n.nickName=this.playerNameText.text,t.FriendMgr.ins().sendAddBlackList(n)}t.ViewManager.ins().close(i)}},i}(t.BaseEuiView);t.FriendAddGoodFriendView=e,__reflect(e.prototype,"app.FriendAddGoodFriendView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.colorBtn.source=this.data},e}(t.BaseItemRender);t.FriendColorMenuItem=e,__reflect(e.prototype,"app.FriendColorMenuItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FriendColorMenuViewSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.gList.itemRenderer=t.FriendColorMenuItem,this.gList.dataProvider=new eui.ArrayCollection(["szys_2","szys_3","szys_4"]),this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i.prototype.onChange=function(){t.EventManager.ins().sendEvent(t.FriendEvent.COLOR_SET,[this.gList.selectedIndex+2])},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.x=e[0].x+4,this.y=e[0].y;var n=t.StageUtils.ins().getWidth();t.StageUtils.ins().getHeight();this.x+this.width>n&&(this.x=n-this.width),this.height=96,this.bg.height=101,this.y=e[0].y-this.height-5},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.gList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i}(t.BaseEuiView);t.FriendColorMenuView=e,__reflect(e.prototype,"app.FriendColorMenuView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName=Main.gameParameter.pfID==t.PlatFormID.QQGame?"FriendQQItemSkin":"FriendCommonItemSkin",i}return __extends(i,e),i.prototype.setShowGp=function(t){for(var e=6==t?1:t,i=1;6>i;i++)this["gp_"+i].visible=!1,i==e&&(this["gp_"+i].visible=!0)},i.prototype.dataChanged=function(){if(this.itemData=this.data,this.setShowGp(this.itemData.type),this.itemData.type==t.FriendState.Friend?this.curState="common":this.itemData.type==t.FriendState.Near?this.curState="near":this.itemData.type==t.FriendState.Concern?this.curState="concern":this.itemData.type==t.FriendState.BlackList?this.curState="black":this.itemData.type==t.FriendState.Report?this.curState="report":this.itemData.type==t.FriendState.Other&&(this.curState="other"),this.selected=!1,Main.gameParameter.pfID==t.PlatFormID.QQGame){var e=this.itemData.superLv>>16,i=e>>8,n=255&e,s=65535&this.itemData.superLv;this.blueImg.visible=i&&s>0,this.blueImg.source=i&&s>0?1==i?"lz_pt"+(s+1):"lz_hh"+(s+1):"",this.blueYearImg.visible=1==n}if("common"==this.curState)this.id=this.itemData.roleId,this.playerName.text=this.itemData.nickName,this.playerLevel.text=this.setLevelStyle(),this.playerProfession.text=t.LanguageUtils["language_Role_Name_"+this.itemData.profession],this.playerGuild.text=this.itemData.guild,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.blueImg.x=6,this.blueYearImg.x=39),0==this.itemData.online?(this.playerName.textColor=8420211,this.playerLevel.textColor=8420211,this.playerProfession.textColor=8420211,this.playerGuild.textColor=8420211):(this.playerName.textColor=15064527,this.playerLevel.textColor=15064527,this.playerProfession.textColor=15064527,this.playerGuild.textColor=15064527),this.itemIndex%2==1?(this.state_1.visible=!0,this.state_2.visible=!1):(this.state_1.visible=!1,this.state_2.visible=!0);else if("near"==this.curState)this.id=this.itemData.roleId,this.near_playerName.text=this.itemData.nickName,this.near_playerLevel.text=this.setLevelStyle(),this.near_playerProfession.text=t.LanguageUtils["language_Role_Name_"+this.itemData.profession],this.near_playerSex.text=t.LanguageUtils["language_Role_Sex_"+this.itemData.sex],this.near_playerGuild.text=this.itemData.guild,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.blueImg.x=6,this.blueYearImg.x=39),this.itemIndex%2==1?(this.near_state_1.visible=!0,this.near_state_2.visible=!1):(this.near_state_1.visible=!1,this.near_state_2.visible=!0);else if("concern"==this.curState)this.id=this.itemData.roleId,this.concern_playerName.text=this.itemData.nickName,this.concern_playerLevel.text=this.setLevelStyle(),this.concern_playerProfession.text=t.LanguageUtils["language_Role_Name_"+this.itemData.profession],this.concern_colorBg.source=0==this.itemData.color?"":"szys_"+this.itemData.color,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.blueImg.x=6,this.blueYearImg.x=39),0==this.itemData.online?(this.concern_playerName.textColor=8420211,this.concern_playerLevel.textColor=8420211,this.concern_playerProfession.textColor=8420211):(this.concern_playerName.textColor=15064527,this.concern_playerLevel.textColor=15064527,this.concern_playerProfession.textColor=15064527),this.itemIndex%2==1?(this.concern_state_1.visible=!0,this.concern_state_2.visible=!1):(this.concern_state_1.visible=!1,this.concern_state_2.visible=!0);else if("black"==this.curState)this.id=this.itemData.roleId,this.black_playerName.text=this.itemData.nickName,this.black_playerLevel.text=this.setLevelStyle(),Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.blueImg.x=80,this.blueYearImg.x=114),0==this.itemData.online?(this.black_playerName.textColor=8420211,this.black_playerLevel.textColor=8420211):(this.black_playerName.textColor=15064527,this.black_playerLevel.textColor=15064527),this.itemIndex%2==1?(this.black_state_1.visible=!0,this.black_state_2.visible=!1):(this.black_state_1.visible=!1,this.black_state_2.visible=!0);else if("report"==this.curState){this.id=this.itemData.roleId,Main.gameParameter.pfID==t.PlatFormID.QQGame&&(this.blueImg.visible=!1,this.blueYearImg.visible=!1);var a="",r=t.GlobalConfig.Scenes[this.itemData.sceneID];if(r)if(0==this.itemData.killType){var o="";o=0==this.itemData.roleId?"【BOSS】":"【"+t.LanguageUtils.language_Omission_txt132+"】",a=t.StringUtils.replace(t.LanguageUtils.language_Omission_txt130,o,this.itemData.nickName,r.scencename)}else 1==this.itemData.killType&&(a=t.StringUtils.replace(t.LanguageUtils.language_Omission_txt131,r.scencename,this.itemData.nickName));this.report_playerName.textFlow=t.TextFlowMaker.generateTextFlow(a),this.report_timer.text=t.DateUtils.getFormatBySecond(this.itemData.time,t.DateUtils.TIME_FORMAT_2),this.itemIndex%2==1?(this.report_state_1.visible=!0,this.report_state_2.visible=!1):(this.report_state_1.visible=!1,this.report_state_2.visible=!0)}"other"==this.curState&&(this.id=this.itemData.roleId,this.playerName.text=this.itemData.nickName,this.playerLevel.text=this.setLevelStyle(),this.playerProfession.text=t.LanguageUtils["language_Role_Name_"+this.itemData.profession],this.playerGuild.text=t.LanguageUtils["language_Role_Sex_"+this.itemData.sex],this.itemIndex%2==1?(this.state_1.visible=!0,this.state_2.visible=!1):(this.state_1.visible=!1,this.state_2.visible=!0))},i.prototype.setLevelStyle=function(){var e=0==this.itemData.turn||null==this.itemData.turn?this.itemData.level.toString():this.itemData.turn+t.LanguageUtils.language_Friend_Turn_txt+this.itemData.level.toString()+t.LanguageUtils.language_Friend_Level_txt;return e},i.prototype.setColor=function(t){this.concern_colorBg.source="szys_"+t},Object.defineProperty(i.prototype,"selected",{set:function(t){"common"==this.curState?(this.selectedBg.visible=t,t?(this.playerName.textColor=15655172,this.playerLevel.textColor=15655172,this.playerProfession.textColor=15655172,this.playerGuild.textColor=15655172):0==this.itemData.online?(this.playerName.textColor=8420211,this.playerLevel.textColor=8420211,this.playerProfession.textColor=8420211,this.playerGuild.textColor=8420211):(this.playerName.textColor=15064527,this.playerLevel.textColor=15064527,this.playerProfession.textColor=15064527,this.playerGuild.textColor=15064527)):"near"==this.curState?(this.selectedBg3.visible=t,t?(this.near_playerName.textColor=15655172,this.near_playerLevel.textColor=15655172,this.near_playerProfession.textColor=15655172,this.near_playerSex.textColor=15655172,this.near_playerGuild.textColor=15655172):(this.near_playerName.textColor=15064527,this.near_playerLevel.textColor=15064527,this.near_playerProfession.textColor=15064527,this.near_playerSex.textColor=15064527,this.near_playerSex.textColor=15064527)):"concern"==this.curState?(this.selectedBg1.visible=t,t?(this.concern_playerName.textColor=15655172,this.concern_playerLevel.textColor=15655172,this.concern_playerProfession.textColor=15655172):(this.concern_playerName.textColor=15064527,this.concern_playerLevel.textColor=15064527,this.concern_playerProfession.textColor=15064527)):"black"==this.curState?(this.selectedBg2.visible=t,t?(this.black_playerName.textColor=15655172,this.black_playerLevel.textColor=15655172):(this.black_playerName.textColor=15064527,this.black_playerLevel.textColor=15064527)):"report"==this.curState?(this.selectedBg0.visible=t,t?(this.report_playerName.textColor=15655172,this.report_timer.textColor=15655172):(this.report_playerName.textColor=15064527,this.report_timer.textColor=15064527)):"other"==this.curState&&(this.selectedBg.visible=t,t?(this.playerName.textColor=15655172,this.playerLevel.textColor=15655172,this.playerProfession.textColor=15655172,this.playerGuild.textColor=15655172):(this.playerName.textColor=15064527,this.playerLevel.textColor=15064527,this.playerProfession.textColor=15064527,this.playerGuild.textColor=15064527))},enumerable:!0,configurable:!0}),i}(t.BaseItemRender);t.FriendCommonItemView=e,__reflect(e.prototype,"app.FriendCommonItemView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.menuBtn.name=this.data.name,this.menuBtn.label=this.data.txt},e}(t.BaseItemRender);t.FriendFunMenuItem=e,__reflect(e.prototype,"app.FriendFunMenuItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.iconList=[],t.skinName="FriendFunMenuViewSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.gList.itemRenderer=t.FriendFunMenuItem,this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i.prototype.onChange=function(){var e=this.gList.selectedIndex,i=this.gList.getChildAt(e),n=i.menuBtn.name;t.EventManager.ins().sendEvent(t.FriendEvent.MENU_ONCLICK,[n])},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.iconList=e[1],this.x=e[0].x,this.y=e[0].y;var n=t.StageUtils.ins().getWidth();t.StageUtils.ins().getHeight();this.x+this.width>n&&(this.x=n-this.width),this.height=41*this.iconList.length,this.y=e[0].y-this.height;var s=new eui.ArrayCollection(this.iconList);this.gList.dataProvider=s},i}(t.BaseEuiView);t.FriendFunMenuView=e,__reflect(e.prototype,"app.FriendFunMenuView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.setHeadTxt=function(){for(var e=0;5>=e;e++)this["txt"+e+"PlayerName"].text=t.LanguageUtils.language_Friend_Txt0,this["txt"+e+"Lv"]&&(this["txt"+e+"Lv"].text=t.LanguageUtils.language_Friend_Txt1),this["txt"+e+"Job"]&&(this["txt"+e+"Job"].text=t.LanguageUtils.language_Friend_Txt2),this["txt"+e+"Guild"]&&(this["txt"+e+"Guild"].text=t.LanguageUtils.language_Friend_Txt3),this["txt"+e+"Sex"]&&(this["txt"+e+"Sex"].text=t.LanguageUtils.language_Friend_Txt5),this["txt"+e+"ShowColor"]&&(this["txt"+e+"ShowColor"].text=t.LanguageUtils.language_Friend_Txt4),this["txt"+e+"Date"]&&(this["txt"+e+"Date"].text=t.LanguageUtils.language_Friend_Txt6)},i}(t.BaseEuiView);t.FriendHeaderView=e,__reflect(e.prototype,"app.FriendHeaderView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.dataChanged=function(){this.loadData()},e.prototype.loadData=function(){var t=this.data,e=t.selected;e?this.tarText.source=t.down:this.tarText.source=t.up},e}(t.BaseItemRender);t.FriendTarBtnItem=e,__reflect(e.prototype,"app.FriendTarBtnItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.lastindex=0,i.data2TabBar_arr=null,i.skinName="FriendViewSkin",i.name="FriendView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.setText(),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System13)},i.prototype.setText=function(){},i.prototype.bindTabBar=function(){this.arrayCollection=new eui.ArrayCollection(["t_gxyq_hy","t_gxyq_fj","t_gxyq_gz","t_gxyq_hmd","t_gxyq_qq","t_gxyq_zb"]),this.tabBar.itemRenderer=t.CommonTabBarWin,this.tabBar.dataProvider=this.arrayCollection},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.bindTabBar(),this.addChangeEvent(this.tabBar,this.onClick),this.addTouchEvent(this.addBtn,this.onClick),this.addTouchEvent(this.operationBtn,this.onClick),this.addTouchEvent(this.operationBtn0,this.onClick),this.addTouchEvent(this.operationBtn5,this.onClick),this.addTouchEvent(this.setColorBtn,this.onClick),this.addTouchEvent(this.acceptBtn,this.onClick),this.addTouchEvent(this.addConcernBtn,this.onClick),this.addTouchEvent(this.dragDropUI.btn_close,this.onClose),this.addTouchEvent(this.rejectBtn,this.onClick),this.addTouchEvent(this.allAcceptBtn,this.onClick),this.addTouchEvent(this.addBlackBtn,this.onClick),this.addTouchEvent(this.blackDelBtn,this.onClick),this.addTouchEvent(this.delConcernBtn,this.onClick),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onCloseMenu,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.tabBar.selectedIndex=null==e[0]?0:e[0],this.lastindex=this.tabBar.selectedIndex,this.page.updateData(this.lastindex),this.setFunBtns(this.lastindex),t.FriendMgr.ins().sendFriendsList(t.FriendState.Friend),this.observe(t.FriendMgr.ins().post_gFriendsList,this.updateData),this.observe(t.FriendMgr.ins().post_gDelRqInfo,this.updateListInfo),this.observe(t.OtherMgr.ins().post_26_44,this.updateNearList),this.observe(t.FriendMgr.ins().post_Report,this.updateReportInfo),t.EventManager.ins().addEvent(t.FriendEvent.ITEM_SELECTED,this.selectedItem,this),t.EventManager.ins().addEvent(t.FriendEvent.COLOR_SET,this.onSetColor,this)
},i.prototype.updateReportInfo=function(){this.page.updateData(this.lastindex),this.setFunBtns(this.lastindex)},i.prototype.onSetColor=function(e){if(null==this.itemData)return void t.UserTips.ins().showFightTips(t.LanguageUtils.language_Friend_Selected_tips);var i=new t.CSFriend_set_Concern_Color_Data;i.id=this.itemData.roleId,i.color=e[0],t.FriendMgr.ins().sendSetConcernColor(i),this.itemData=null},i.prototype.updateNearList=function(){t.FriendMgr.ins().setNearPlayerListData();var e=t.FriendMgr.ins().getListNumbyType(this.lastindex);e>0&&(this["firendGp_"+this.lastindex].visible=!0),this.updateData()},i.prototype.updateListInfo=function(){if(0==this.lastindex)for(var e=0;e<t.FriendMgr.ins().friendsList.length;e++){var i=t.FriendMgr.ins().friendsList[e];t.FriendMgr.ins().delId==i.roleId&&t.FriendMgr.ins().friendsList.splice(e,1)}else if(2==this.lastindex)for(var e=0;e<t.FriendMgr.ins().concernList.length;e++){var i=t.FriendMgr.ins().concernList[e];t.FriendMgr.ins().delId==i.roleId&&t.FriendMgr.ins().concernList.splice(e,1)}else if(3==this.lastindex)for(var e=0;e<t.FriendMgr.ins().blackList.length;e++){var i=t.FriendMgr.ins().blackList[e];t.FriendMgr.ins().delId==i.roleId&&t.FriendMgr.ins().blackList.splice(e,1)}this.page.updateData(this.lastindex)},i.prototype.sendDelInfo=function(e){var i=new t.CSFriend_Del_Data;i.id=this.itemData.roleId,i.nickName="",i.type=e,t.FriendMgr.ins().sendDeleteFirends(i)},i.prototype.selectedItem=function(t){var e=t[0];this.itemData=e},i.prototype.onCloseMenu=function(){t.ViewManager.ins().close(t.CommonFunMenuView),t.ViewManager.ins().close(t.FriendColorMenuView)},i.prototype.updateData=function(){this.page.updateData(this.lastindex)},i.prototype.onClose=function(){t.ViewManager.ins().close(i)},i.prototype.onBarItemTap=function(e){this.arrayCollection.getItemAt(this.lastindex);this.lastindex=e.itemIndex,this.page.setScroller(),0==e.itemIndex?(t.FriendMgr.ins().sendFriendsList(t.FriendState.Friend),this.ruleTipsButton.ruleId=10):1==e.itemIndex?(t.OtherMgr.ins().sendNearPlayerList(),this.ruleTipsButton.ruleId=11):2==e.itemIndex?(this.ruleTipsButton.ruleId=12,t.FriendMgr.ins().sendFriendsList(t.FriendState.Concern)):3==e.itemIndex?(this.ruleTipsButton.ruleId=13,t.FriendMgr.ins().sendFriendsList(t.FriendState.BlackList)):4==e.itemIndex?(this.ruleTipsButton.ruleId=14,this.page.updateData(this.lastindex)):5==e.itemIndex&&(t.FriendMgr.ins().sendReport(),this.ruleTipsButton.ruleId=15),this.setFunBtns(e.itemIndex),this.itemData=null},i.prototype.setFunBtns=function(e){for(var i=0,n=0;6>n;n++)this["firendGp_"+n].visible=!1,e==n&&(0==e?(this["firendGp_"+e].visible=!0,this.operationBtn.visible=!1,this.addBtn.visible=!0,i=t.FriendMgr.ins().getListNumbyType(n),i>0&&(this.operationBtn.visible=!0)):2==e?(this["firendGp_"+e].visible=!0,this.setColorBtn.visible=this.delConcernBtn.visible=!1,this.addConcernBtn.visible=!0,i=t.FriendMgr.ins().getListNumbyType(n),i>0&&(this.setColorBtn.visible=this.delConcernBtn.visible=!0)):2==e?(this["firendGp_"+e].visible=!0,this.blackDelBtn.visible=!1,this.addBlackBtn.visible=!0,i=t.FriendMgr.ins().getListNumbyType(n),i>0&&(this.blackDelBtn.visible=!0)):(i=t.FriendMgr.ins().getListNumbyType(n),i>0&&(this["firendGp_"+e].visible=!0)))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.addBtn:t.ViewManager.ins().open(t.FriendAddGoodFriendView,t.FriendState.Friend);break;case this.addBlackBtn:t.ViewManager.ins().open(t.FriendAddGoodFriendView,t.FriendState.BlackList);break;case this.blackDelBtn:if(null==this.itemData)return void t.UserTips.ins().showFightTips(t.LanguageUtils.language_Friend_Selected_tips);this.sendDelInfo(t.FriendState.BlackList);break;case this.delConcernBtn:if(null==this.itemData)return void t.UserTips.ins().showFightTips(t.LanguageUtils.language_Friend_Selected_tips);this.sendDelInfo(t.FriendState.Concern);break;case this.addConcernBtn:t.ViewManager.ins().open(t.FriendAddGoodFriendView,t.FriendState.Concern);break;case this.operationBtn:if(null==this.itemData)return void t.UserTips.ins().showFightTips(t.LanguageUtils.language_Friend_Selected_tips);t.ViewManager.ins().open(t.CommonFunMenuView,this.operationBtn.localToGlobal(0,0),this.itemData);break;case this.operationBtn0:if(null==this.itemData)return void t.UserTips.ins().showFightTips(t.LanguageUtils.language_Friend_Selected_tips);t.ViewManager.ins().open(t.CommonFunMenuView,this.operationBtn0.localToGlobal(0,0),this.itemData);break;case this.operationBtn5:if(null==this.itemData)return void t.UserTips.ins().showFightTips(t.LanguageUtils.language_Friend_Selected_tips);if(0==this.itemData.roleId)return void t.UserTips.ins().showFightTips(t.LanguageUtils.language_Omission_txt71);t.ViewManager.ins().open(t.CommonFunMenuView,this.operationBtn5.localToGlobal(0,0),this.itemData);break;case this.acceptBtn:if(this.itemData){var i=new t.CSFriend_Return_Data;i.id=this.itemData.roleId,i.isAgree=1,t.FriendMgr.ins().sendResponseFriend(i);for(var n=t.FriendMgr.ins().applyList.length,s=0;n>s;s++){var a=t.FriendMgr.ins().applyList[s];if(a.roleId==this.itemData.roleId)return void t.FriendMgr.ins().applyList.splice(s,1)}this.updateData()}else t.UserTips.ins().showFightTips(t.LanguageUtils.language_Friend_Selected_tips);break;case this.rejectBtn:if(this.itemData){var i=new t.CSFriend_Return_Data;i.id=this.itemData.roleId,i.isAgree=0,t.FriendMgr.ins().sendResponseFriend(i);for(var n=t.FriendMgr.ins().applyList.length,s=0;n>s;s++){var a=t.FriendMgr.ins().applyList[s];a.roleId==this.itemData.roleId&&t.FriendMgr.ins().applyList.splice(s,1)}this.updateData()}else t.UserTips.ins().showFightTips(t.LanguageUtils.language_Friend_Selected_tips);break;case this.allAcceptBtn:t.FriendMgr.ins().sendAllAddFriend(),t.FriendMgr.ins().applyList=[];break;case this.setColorBtn:t.ViewManager.ins().open(t.FriendColorMenuView,this.setColorBtn.localToGlobal(0,0))}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.removeTouchEvent(this.addBtn,this.onClick),this.removeTouchEvent(this.operationBtn,this.onClick),this.removeTouchEvent(this.operationBtn0,this.onClick),this.removeTouchEvent(this.operationBtn5,this.onClick),this.removeTouchEvent(this.setColorBtn,this.onClick),this.removeTouchEvent(this.acceptBtn,this.onClick),this.removeTouchEvent(this.addConcernBtn,this.onClick),this.removeTouchEvent(this.dragDropUI.btn_close,this.onClose),this.removeTouchEvent(this.rejectBtn,this.onClick),this.removeTouchEvent(this.allAcceptBtn,this.onClick),this.removeTouchEvent(this.addBlackBtn,this.onClick),this.removeTouchEvent(this.blackDelBtn,this.onClick),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onClick,this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onCloseMenu,this),this.itemData=null,this.page.destroy(),this.dragDropUI.destroy(),this.dragDropUI=null},i}(t.BaseEuiView);t.FriendView=e,__reflect(e.prototype,"app.FriendView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.list=new eui.ArrayCollection,t.lastIndex=-1,t.crrentType=-1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){t.MouseScroller.bind(this.scroller),this.gList.itemRenderer=t.FriendCommonItemView,this.gList.dataProvider=this.list,this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.gList.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),t.EventManager.ins().addEvent(t.FriendEvent.ITEM_ONCHANGE,this.onListChange,this),this.header.setHeadTxt()},i.prototype.setScroller=function(){this.scroller.stopAnimation(),this.scroller.viewport.validateNow(),this.scroller.viewport.scrollV=0},i.prototype.onTouchDouble=function(){var e=this.gp.localToGlobal(this.gp.width,this.gp.height-100);this.selectedItem&&(e.x+=5,e.y+=3,t.ViewManager.ins().open(t.CommonFunMenuView,e,this.selectedItem.itemData))},i.prototype.onListChange=function(t){var e=t[0],i=e;this.selected=e.itemIndex,this.selectedItem=e.itemRenderer,this.selectedItem.setColor(i.color)},i.prototype.refreshList=function(){this.selectedItem&&(this.selectedItem.selected=!1)},i.prototype.onChange=function(e){this.refreshList(),this.selected=e.itemIndex,this.selectedItem=e.itemRenderer,0==this.crrentType?this.selectedItem.currentState="common":1==this.crrentType?this.selectedItem.currentState="near":2==this.crrentType?this.selectedItem.currentState="concern":3==this.crrentType?this.selectedItem.currentState="black":4==this.crrentType?this.selectedItem.currentState="other":5==this.crrentType&&(this.selectedItem.currentState="report"),this.selectedItem.selected=!0,t.EventManager.ins().sendEvent(t.FriendEvent.ITEM_SELECTED,[this.selectedItem.itemData])},i.prototype.setHead=function(t){for(var e=0;6>e;e++)this.header["gHeader"+e].visible=!1,e==t&&(this.header["gHeader"+e].visible=!0)},i.prototype.updateData=function(e){this.friendNumGrp.visible=!1,this.lastIndex=-1,this.crrentType=e,this.gList.dataProvider=new eui.ArrayCollection,this.setHead(e),0==e&&(this.friendNumGrp.visible=!0,this.friendNumLab.text=t.LanguageUtils.language_Omission_txt84+":"+t.FriendMgr.ins().friendsList.length+"/99",this.onLineFriendLab.text=t.LanguageUtils.language_Omission_txt85+":"+t.FriendMgr.ins().getFriendOnLineNum(),this.list.source=t.FriendMgr.ins().friendsList),1==e?this.list.source=t.FriendMgr.ins().getNearPlayerListData():2==e?(this.friendNumGrp.visible=!0,this.friendNumLab.text=t.LanguageUtils.language_Omission_txt84+":"+t.FriendMgr.ins().concernList.length+"/99",this.onLineFriendLab.text=t.LanguageUtils.language_Omission_txt85+":"+t.FriendMgr.ins().getAttentionOnLineNum(),this.list.source=t.FriendMgr.ins().concernList):3==e?this.list.source=t.FriendMgr.ins().blackList:4==e?this.list.source=t.FriendMgr.ins().applyList:5==e&&(this.list.source=t.FriendMgr.ins().reportList),this.gList.dataProvider=this.list,this.gList.validateNow(),this.list.length<1?(this.noListTipsLb.visible=!0,0==e&&(this.noListTipsLb.text=t.LanguageUtils.language_Friend_NoGoodFriend_tips),1==e?this.noListTipsLb.text=t.LanguageUtils.language_Friend_NoNear_tips:2==e?this.noListTipsLb.text=t.LanguageUtils.language_Friend_NoConcern_tips:3==e?this.noListTipsLb.text=t.LanguageUtils.language_Friend_NoBlackList_tips:4==e?this.noListTipsLb.text=t.LanguageUtils.language_Friend_NoFriend_Apply_tips:5==e&&(this.noListTipsLb.text=t.LanguageUtils.language_Friend_NoReport_tips)):this.noListTipsLb.visible=!1},i.prototype.destroy=function(){t.MouseScroller.unbind(this.scroller),this.gList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.gList.removeEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),t.EventManager.ins().removeEvent(t.FriendEvent.ITEM_ONCHANGE,this.onListChange,this)},i}(t.BaseView);t.FriendViewPage=e,__reflect(e.prototype,"app.FriendViewPage")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.sysId=t.PackageID.FUBEN,i.regNetMsg(4,i.post_g20_4),i.regNetMsg(5,i.post_20_5),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_20_1=function(t){var e=this.getBytes(1);e.writeInt(t),this.sendToServer(e)},i.prototype.send_20_2=function(t){var e=this.getBytes(2);e.writeInt(t),this.sendToServer(e)},i.prototype.send_20_3=function(t){var e=this.getBytes(3);e.writeInt(t),this.sendToServer(e)},i.prototype.post_g20_4=function(t){this.timeRemaining=1e3*t.readInt()+egret.getTimer()},i.prototype.post_20_5=function(t){var e=t.readByte(),i=t.readByte(),n=t.readByte();return{curWave:e,allWave:i,surplusMonNum:n}},i}(t.BaseSystem);t.FuBenMgr=e,__reflect(e.prototype,"app.FuBenMgr")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.label.text=this.data+""},e}(eui.ItemRenderer);t.EUILabel=e,__reflect(e.prototype,"app.EUILabel")}(app||(app={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.dir=0,t.skinName="debugViewSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.y=100,this.addTouchEvent(this.btn1,this.onClick),this.addTouchEvent(this.btn2,this.onClick),this.addTouchEvent(this.btn3,this.onClick),this.addTouchEvent(this.btn4,this.onClick),this.addTouchEvent(this.btnSent,this.onClick),this.dragDropUI.setParent(this),this.getList.itemRenderer=t.EUILabel,this.sentList.itemRenderer=t.EUILabel,this.getArrayCollection=new eui.ArrayCollection,this.sentArrayCollection=new eui.ArrayCollection,this.getList.dataProvider=this.getArrayCollection,this.getList.itemRendererSkinName="LabelSkinSkin",this.sentList.dataProvider=this.sentArrayCollection,this.sentList.itemRendererSkinName="LabelSkinSkin",this.observe(t.DefaultMgr.ins().post_Sent,this.updateSent),this.observe(t.DefaultMgr.ins().post_Get,this.updateGet)},i.prototype.updateSent=function(t){var e="sysId="+t[0]+" msgId="+t[1];this.sentArrayCollection.addItem(e)},i.prototype.updateGet=function(t){var e="sysId="+t[0]+" msgId="+t[1];this.getArrayCollection.addItem(e)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btn1:t.FuBenMgr.ins().send_20_1(+this.inputTxt1.text);break;case this.btn2:t.FuBenMgr.ins().send_20_2(+this.inputTxt2.text);break;case this.btn3:RES.profile();break;case this.btn4:var i=t.EntityMgr.ins().getNpcList(),n=t.EntityMgr.ins().getAllEntity();this.charSum.text=""+(Object.keys(i).length+Object.keys(n).length);break;case this.btnSent:""==this.sysId.text&&t.UserTips.ins().showUITips("sysId 不能为空"),""==this.msgId.text&&t.UserTips.ins().showUITips("msgId 不能为空");var s=+this.sysId.text,a=+this.msgId.text;t.DefaultMgr.ins().sentMsg(s,a,this.msgInfo.text)}},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.btn1,this.onClick),this.removeTouchEvent(this.btn2,this.onClick),this.removeTouchEvent(this.btn3,this.onClick),this.removeTouchEvent(this.btn4,this.onClick),this.removeTouchEvent(this.btnSent,this.onClick),this.getArrayCollection=null,this.sentArrayCollection=null},i}(t.BaseEuiView);t.DebugView=e,__reflect(e.prototype,"app.DebugView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Tips)}(app||(app={}));var app;!function(t){var e;!function(t){t[t.DLD_ScoreRank=1]="DLD_ScoreRank",t[t.DLD_RankReward=2]="DLD_RankReward",t[t.DLD_ScorReward=3]="DLD_ScorReward"}(e=t.FubenRankEnum||(t.FubenRankEnum={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.bg.source=this.itemIndex%2==1?"bg_quyu_1":"bg_quyu_2",this.numLabel.visible=!1,this.rankImage.visible=!1,1==this.data.rank?(this.rankImage.visible=!0,this.rankImage.source="Act_pm_1",this.label1.textColor=15655172,this.label2.textColor=15655172):2==this.data.rank?(this.rankImage.visible=!0,this.rankImage.source="Act_pm_2",this.label1.textColor=16718530,this.label2.textColor=16718530):3==this.data.rank?(this.rankImage.visible=!0,this.rankImage.source="Act_pm_3",this.label1.textColor=2682369,this.label2.textColor=2682369):(this.numLabel.visible=!0,this.numLabel.text=this.data.rank+"",this.label1.textColor=15064527,this.label2.textColor=15064527),this.label1.text=this.data.name,this.label2.text=this.data.level,t.ModelManager.ins().rankModel.type==t.RankDetailType.CrossServerEscapeFromTrial){var e=t.ActvityMgr.ins().EscapeRoleInfo;e.indexOf(this.data.playerId)>-1&&(this.label2.text=t.LanguageUtils.language_Common_249)}},i}(eui.ItemRenderer);t.FubenRankItemView=e,__reflect(e.prototype,"app.FubenRankItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._actID=0,t.skinName="FubenRankPagSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e&&e[0]&&(this._actID=e[0]),this.label1.text=t.LanguageUtils.language_FuBen_Text10,this.label3.text=26==this._actID?"行会名":t.LanguageUtils.language_Friend_Txt0,this.label2.text=t.LanguageUtils.language_FuBen_Text8,this.list.itemRenderer=t.FubenRankItemView,this.list.itemRendererSkinName="FubenRankItemSkin",this.dataProvider=new eui.ArrayCollection,this.list.dataProvider=this.dataProvider,this.observe(t.DefaultMgr.ins().post_s_0_71,this.setRankListData),this.observe(t.OtherMgr.ins().post_26_86,this.updateShabakRankList),t.TimerManager.ins().isExists(this.sendRank,this)||(this.sendRank(),t.TimerManager.ins().doTimer(5e3,0,this.sendRank,this))},i.prototype.sendRank=function(){if(26==this._actID)t.OtherMgr.ins().send_26_72(t.RankDetailType.CrossServerShabak,50);else{var e=t.ActvityMgr.ins().getActivitConf(t.ActvityMgr.ins().currentActId);!e||e.ActivityType!=t.ActvityInfoEnum.Inspire&&e.ActivityType!=t.ActvityInfoEnum.WorldBoss?e&&e.ActivityType==t.ActvityInfoEnum.NightVoma?t.DefaultMgr.ins().send_0_23(t.RankDetailType.NightVoma,50,null,0):e&&e.ActivityType==t.ActvityInfoEnum.CrossServerChaos?t.DefaultMgr.ins().send_0_23(t.RankDetailType.CrossServerChaosRank,50,null,0):e&&e.ActivityType==t.ActvityInfoEnum.CrossServerBoss?t.DefaultMgr.ins().send_0_23(t.RankDetailType.CrossServerBoss,50,null,0):e&&e.ActivityType==t.ActvityInfoEnum.CrossServerNightVoma?t.DefaultMgr.ins().send_0_23(t.RankDetailType.CrossServerNightVoma,50,null,0):e&&e.ActivityType==t.ActvityInfoEnum.EscapeFromTrial?t.DefaultMgr.ins().send_0_23(t.RankDetailType.CrossServerEscapeFromTrial,50,null,0):t.DefaultMgr.ins().send_0_23(t.RankDetailType.rtScore,50,null,0):t.DefaultMgr.ins().send_0_23(t.RankDetailType.wboss,50,null,0)}},i.prototype.setRankListData=function(e){(e[0]==t.RankDetailType.rtScore||e[0]==t.RankDetailType.wboss||e[0]==t.RankDetailType.NightVoma||e[0]==t.RankDetailType.CrossServerChaosRank||e[0]==t.RankDetailType.CrossServerBoss||e[0]==t.RankDetailType.CrossServerNightVoma||e[0]==t.RankDetailType.CrossServerEscapeFromTrial)&&this.dataProvider.replaceAll(e[1].list)},i.prototype.updateShabakRankList=function(t){this.dataProvider.replaceAll(t)},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.$onClose(),t.TimerManager.ins().removeAll(this),this.dataProvider=null},i}(t.BaseEuiView);t.FubenRankPagView=e,__reflect(e.prototype,"app.FubenRankPagView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.scoreRank=null,t.rankReward=null,t.rcorReward=null,t.killReward=null,t.skinName="FubenRankSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.tabBar.itemRenderer=t.CommonTabBarWin,this.tabBar.addEventListener(egret.Event.CHANGE,this.updatePag,this)},i.prototype.updatePag=function(){for(var t=0;t<this.pagAry.length;t++)t==this.tabBar.selectedIndex?(this[this.pagAry[t]]||this.openPag(this.pagAry[t]),this[this.pagAry[t]].visible=!0,this.dragDropUI.setTitle(this[this.pagAry[t]].name),26==this.actId&&this.setLabVis(t)):this[this.pagAry[t]]&&(this[this.pagAry[t]].visible=!1)},i.prototype.setLabVis=function(t){switch(t){case 0:this.myRank.visible=this.myScore.visible=!0,this.myShaBakScore.visible=!1;break;case 1:this.myRank.visible=this.myScore.visible=!0,this.myShaBakScore.visible=!1;break;case 2:this.myRank.visible=this.myScore.visible=!1,this.myShaBakScore.visible=!0}},i.prototype.openPag=function(e){switch(e){case"scoreRank":this.scoreRank=new t.FubenRankPagView,this.scoreRank.name=t.LanguageUtils.language_FuBen_Text1,this.pagGroup.addChild(this.scoreRank),this.scoreRank.open(this.actId),26==this.actId&&this.setLabVis(0);break;case"rankReward":this.rankReward=new t.FubenScoreView,this.rankReward.name=t.LanguageUtils.language_FuBen_Text5,this.pagGroup.addChild(this.rankReward);var n=t.ActvityMgr.ins().getActivityConfigById(this.actId);if(n&&n.rankAward){var s=[];for(var a in n.rankAward)s.push(n.rankAward[a]);this.actId==i.EscapeFromTrial_ID&&s.push({rank:t.LanguageUtils.language_Common_248,awards:n.partakeAward});var r=26==this.actId?"行会排名":t.LanguageUtils.language_FuBen_Text10,o=26==this.actId?"会长、副会长奖励":t.LanguageUtils.language_FuBen_Text9;this.rankReward.open(s,r,o),s=null}26==this.actId&&this.setLabVis(1);break;case"rcorReward":this.rcorReward=new t.FubenScoreView,this.rcorReward.name=t.LanguageUtils.language_FuBen_Text6,this.pagGroup.addChild(this.rcorReward);var l=t.ActvityMgr.ins().getActivityConfigById(this.actId);if(l&&l.phaseAward){var s=[];for(var a in l.phaseAward)s.push(l.phaseAward[a]);this.rcorReward.open(s,t.LanguageUtils.language_FuBen_Text8,t.LanguageUtils.language_FuBen_Text9),s=null}26==this.actId&&this.setLabVis(2);break;case"killReward":this.killReward=new t.FubenScoreView,this.killReward.name=t.LanguageUtils.language_FuBen_Text15,this.pagGroup.addChild(this.killReward);var h=t.ActvityMgr.ins().getActivityConfigById(this.actId);if(h&&h.killaward){var s=[];for(var a in h.killaward)s.push(h.killaward[a]);this.killReward.open(s,"",t.LanguageUtils.language_FuBen_Text9),s=null}}},i.prototype.updateMyRank=function(e){this.myRank.text=26==this.actId?"我的行会排名:"+e[1]:t.LanguageUtils.language_FuBen_Text7+e[1],this.myScore.text=26==this.actId?"我的行会积分:"+e[0]:t.LanguageUtils.language_FuBen_Text3+"："+e[0]},i.prototype.updateShaBakBoxSorce=function(e){this.myShaBakScore.text=t.LanguageUtils.language_FuBen_Text3+"："+e[0]},i.prototype.open=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.myShaBakScore.text="",this.myRank.visible=this.myScore.visible=!0,this.myShaBakScore.visible=!1;var s;t.ActvityInfoEnum.PActivity3==e[2]&&(this.actId=e[3],this.actId==i.BOSS_ID||this.actId==i.KuaFu_BOSS_ID||this.actId==i.EscapeFromTrial_ID?(this.pagAry=["scoreRank","rankReward"],s=["actpm_tab_pm","actpm_tab_jf"]):(this.pagAry=["scoreRank","rankReward","rcorReward"],s=["actpm_tab_pm","actpm_tab_jf","actpm_tab_jl"]),this.tabBar.dataProvider=new eui.ArrayCollection(s),this.tabBar.selectedIndex=0,this.updatePag(),this.updateMyRank(e),this.observe(t.ActvityMgr.ins().post_MyRankData,this.updateMyRank),26==this.actId&&this.observe(t.ActvityMgr.ins().post_shaBakNextArard,this.updateShaBakBoxSorce))},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.tabBar.removeEventListener(egret.Event.CHANGE,this.updatePag,this),this.tabBar.dataProvider=null,this.dragDropUI.destroy(),this.dragDropUI=null;for(var n=0;n<this.pagAry.length;n++)this[this.pagAry[n]]&&this[this.pagAry[n]].close();this.pagAry=null},i.BOSS_ID=11,i.KuaFu_BOSS_ID=24,i.EscapeFromTrial_ID=38,i}(t.BaseEuiView);t.FuBenRankView=e,__reflect(e.prototype,"app.FuBenRankView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.bg.source=this.itemIndex%2==1?"bg_quyu_1":"bg_quyu_2",this.numLabel.visible=!0,this.data.rank?this.numLabel.text=this.data.rank+"":this.numLabel.text=this.data.value+"",this.array?this.array.replaceAll(this.data.awards):(this.array=new eui.ArrayCollection(this.data.awards),this.list.itemRenderer=t.ItemBase,this.list.dataProvider=this.array)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.array=null},i}(eui.ItemRenderer);t.FubenScoreItemView=e,__reflect(e.prototype,"app.FubenScoreItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FubenScoreSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.list.itemRenderer=t.FubenScoreItemView,this.list.itemRendererSkinName="FubenScoreItemSkin",this.list.dataProvider=new eui.ArrayCollection(e[0]),this.label1.text=e[1],this.label2.text=e[2]},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.list.dataProvider=null},i}(t.BaseEuiView);t.FubenScoreView=e,__reflect(e.prototype,"app.FubenScoreView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.myRankParam=[0,0],t.curCDTime=0,t.firstFourArr=[],t.canEscape=!1,t.canEscapeNum=0,t.skinName="FubenSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),gamelib.DeviceUtils.IsMobile?(this.left=0,this.top=40):(this.right=10,this.top=180),this.touchEnabled=!1,this.touchChildren=!0},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.rankGroup.visible=!1,this.timeGrp.visible=!1,this.crossSeverBossLab.visible=!1;for(var n=0;4>n;n++)this["rankGrp"+n].touchEnabled=!1;this.observe(t.ActvityMgr.ins().post_currentActId,this.updateActId),this.updateActId(),this.lbDcty.visible=!1,this.lbDctyImg.visible=!1},i.prototype.updateActId=function(){var e=this;if(t.ActvityMgr.ins().currentActId){var i=t.ActvityMgr.ins().getActivitConf(t.ActvityMgr.ins().currentActId);if(i.ActivityType==t.ActvityInfoEnum.PActivity3||i.ActivityType==t.ActvityInfoEnum.NightVoma||i.ActivityType==t.ActvityInfoEnum.CrossServerChaos||i.ActivityType==t.ActvityInfoEnum.CrossServerNightVoma||i.ActivityType==t.ActvityInfoEnum.CrossServerShabak)this.fbLabel1.text=t.LanguageUtils.language_FuBen_Text1,this.fbLabel2.text=t.LanguageUtils.language_FuBen_Text2,this.fbLabel3.text=t.LanguageUtils.language_FuBen_Text3,this.observe(t.ActvityMgr.ins().post_RankData,this.updateRank),this.observe(t.ActvityMgr.ins().post_MyRankData,this.updateMyRank),this.observe(t.ActvityMgr.ins().post_NextAwardIndex,this.updateBox),this.observe(t.ActvityMgr.ins().post_jingjiTime,this.updateJingJiTime),this.observe(t.ActvityMgr.ins().post_zhenyingTime,this.updateZhenYingTime),this.rankGroup.visible=!0,this.campGrp.visible=!1,this.addTouchEvent(this.fbLabel2,this.onClick),this.addTouchEvent(this.boxImage,this.onClick),this.updateRank([]),this.updateJingJiTime(),this.updateZhenYingTime();else if(i.ActivityType==t.ActvityInfoEnum.Inspire||i.ActivityType==t.ActvityInfoEnum.CrossServerBoss||i.ActivityType==t.ActvityInfoEnum.WorldBoss){if(this.fbLabel1.text=t.LanguageUtils.language_FuBen_Text1,this.fbLabel2.text=t.LanguageUtils.language_FuBen_Text2,this.fbLabel3.text=t.LanguageUtils.language_FuBen_Text3,this.observe(t.ActvityMgr.ins().post_RankData,this.updateRank),this.observe(t.ActvityMgr.ins().post_MyRankData,this.refreshMyRank),this.observe(t.ActvityMgr.ins().post_jingjiTime,this.updateJingJiTime),i.ActivityType==t.ActvityInfoEnum.CrossServerBoss)for(var n=0;4>n;n++)this["rankGrp"+n].touchEnabled=!0,this["rankGrp"+n].idx=n,this.addBeginEvent(this["rankGrp"+n],this.lockTarget),this.addDoubleDownEvent(this["rankGrp"+n],this.onClickPK),this.addMouseMoveEvent(this["rankGrp"+n],this.mouseMove),this.addMouseOverEvent(this["rankGrp"+n],this.mouseMove);this.rankGroup.visible=!0,this.campGrp.visible=!1,this.boxGroup.visible=!1,this.addTouchEvent(this.fbLabel2,this.onClick),this.addTouchEvent(this.boxImage,this.onClick),this.updateRank([]),this.updateJingJiTime(),this.updateWorldBossTime(),t.ViewManager.ins().isShow(t.InspireView)||t.ViewManager.ins().open(t.InspireView)}else if(!i||i.ActivityType!=t.ActvityInfoEnum.PActivity&&i.ActivityType!=t.ActvityInfoEnum.Material){if(i&&i.ActivityType==t.ActvityInfoEnum.Tower)this.observe(t.ActvityMgr.ins().post_TowerMonsterNum,function(){174==t.GameMap.mapID?(e.campGrp.visible=!1,e.timeGrp.visible=!1,e.actGrp.visible=!1):(e.campGrp.visible=!1,e.timeGrp.visible=!0,e.actGrp.visible=!0,e.actTime.visible=!0,e.actTime.text=""+t.LanguageUtils.language_FuBen_Text12+(t.ActvityMgr.ins().towerMonsterNum>10?10:t.ActvityMgr.ins().towerMonsterNum)+"/10",e.lbDcty.visible=!0,e.lbDctyImg.visible=!0)});else if(i.ActivityType==t.ActvityInfoEnum.EscapeFromTrial){var s=t.GlobalConfig.Activity26Config[t.ActvityMgr.ins().currentActId];this.canEscapeNum=s.Standardscore,this.enterFb.filters=t.FilterUtil.ARRAY_GRAY_FILTER,this.fbLabel1.text=t.LanguageUtils.language_FuBen_Text1,this.fbLabel2.text=t.LanguageUtils.language_FuBen_Text2,this.fbLabel3.text=t.LanguageUtils.language_FuBen_Text3,this.observe(t.ActvityMgr.ins().post_RankData,this.updateRank2),this.observe(t.ActvityMgr.ins().post_MyRankData,this.refreshMyRank2),this.observe(t.ActvityMgr.ins().post_MyRankData,this.updateEscapeState),this.observe(t.ActvityMgr.ins().post_25_12,this.updateEscape),this.observe(t.ActvityMgr.ins().post_jingjiTime,this.updateJingJiTime),this.canEscape=!1,this.rankGroup.visible=!0,this.campGrp.visible=!1,this.boxGroup.visible=!1,this.escapeGroup.visible=!0,this.addTouchEvent(this.fbLabel2,this.onClick),this.addTouchEvent(this.enterFb,this.onClick),this.updateRank2([]),this.updateEscape(),this.updateJingJiTime()}}else this.observe(t.FuBenMgr.ins().post_g20_4,this.updateFbTime),this.observe(t.FuBenMgr.ins().post_20_5,this.updatefbData),this.rankGroup.visible=!1,this.campGrp.visible=!1,this.updateFbTime()}else if(t.GameSocket.IsCrossService){var a=t.ActvityMgr.ins().getActivityInfo(26);a&&a.redDot&&(this.fbLabel1.text=t.LanguageUtils.language_FuBen_Text1,this.fbLabel2.text=t.LanguageUtils.language_FuBen_Text2,this.fbLabel3.text="我的行会积分",this.observe(t.ActvityMgr.ins().post_shaBakRank,this.updateShabakRank),this.observe(t.ActvityMgr.ins().post_shaBakMyRank,this.updateShaBakMyRank),this.observe(t.ActvityMgr.ins().post_shaBakNextArard,this.updateShaBakBoxSorce),this.addTouchEvent(this.fbLabel2,this.onClick),this.addTouchEvent(this.boxImage,this.onClick),this.updateRank([]))}},i.prototype.updateZhenYingTime=function(){var e=t.ActvityMgr.ins().zhenyingTime-egret.getTimer()>>0;t.GameMap.fubenID>0&&e>0&&(this.timeGrp.visible=!0,this.campGrp.visible=!0,this.zhenYingTime(),t.TimerManager.ins().remove(this.zhenYingTime,this),t.TimerManager.ins().doTimer(1e3,0,this.zhenYingTime,this))},i.prototype.zhenYingTime=function(){var e=t.ActvityMgr.ins().zhenyingTime-egret.getTimer();this.campTime.text=t.LanguageUtils.language_Common_83+t.DateUtils.getFormatBySecond(Math.floor(e/1e3),t.DateUtils.TIME_FORMAT_10),0>=e&&(t.TimerManager.ins().remove(this.zhenYingTime,this),this.campTime.text="",this.campGrp.visible=!1)},i.prototype.updateJingJiTime=function(){var e=t.ActvityMgr.ins().jingjiTime-egret.getTimer()>>0;t.GameMap.fubenID>0&&e>0&&(this.timeGrp.visible=!0,this.actGrp.visible=!0,this.curCDTime=t.ActvityMgr.ins().jingjiTime,this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this))},i.prototype.updateWorldBossTime=function(){var e=t.ActvityMgr.ins().worldBossTime-egret.getTimer()>>0;t.GameMap.fubenID>0&&e>0&&(this.timeGrp.visible=!0,this.actGrp.visible=!0,this.curCDTime=t.ActvityMgr.ins().worldBossTime,this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this))},i.prototype.updateFbTime=function(){var e=t.FuBenMgr.ins().timeRemaining-egret.getTimer()>>0;t.GameMap.fubenID>0&&e>0&&(this.timeGrp.visible=!0,this.actGrp.visible=!0,this.curCDTime=t.FuBenMgr.ins().timeRemaining,this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this))},i.prototype.updateTime=function(){var e=this.curCDTime-egret.getTimer();this.actTime.text=t.LanguageUtils.language_Common_65+t.DateUtils.getFormatBySecond(Math.floor(e/1e3),t.DateUtils.TIME_FORMAT_10),0>=e&&(t.TimerManager.ins().remove(this.updateTime,this),this.actTime.text="",this.timeGrp.visible=!1)},i.prototype.updatefbData=function(e){e&&(this.waveNumGrp.visible=!0,this.monsterGrp.visible=!0,this.waveNum.text=""+t.LanguageUtils.language_Common_101+e.curWave+"/"+e.allWave,this.monsterNum.text=""+t.LanguageUtils.language_Common_102+e.surplusMonNum)
},i.prototype.onClick=function(e){switch(e.currentTarget){case this.fbLabel2:if(t.ActvityMgr.ins().currentActId)t.ViewManager.ins().open(t.FuBenRankView,this.myRankParam[0],this.myRankParam[1],t.ActvityInfoEnum.PActivity3,t.ActvityMgr.ins().currentActId);else if(t.GameSocket.IsCrossService){var i=t.ActvityMgr.ins().getActivityInfo(26);i&&i.redDot&&t.ViewManager.ins().open(t.FuBenRankView,this.myRankParam[0],this.myRankParam[1],t.ActvityInfoEnum.PActivity3,26)}break;case this.boxImage:if(t.GameSocket.IsCrossService)if(t.ActvityMgr.ins().currentActId)t.ViewManager.ins().open(t.FuBenRankView,this.myRankParam[0],this.myRankParam[1],t.ActvityInfoEnum.PActivity3,t.ActvityMgr.ins().currentActId);else{var i=t.ActvityMgr.ins().getActivityInfo(26);i&&i.redDot&&t.ViewManager.ins().open(t.FuBenRankView,this.myRankParam[0],this.myRankParam[1],t.ActvityInfoEnum.PActivity3,26)}else{var n=t.GlobalConfig.BagRemainConfig[1];if(n){var s=t.BagMgr.ins().getBagCapacity(n.bagremain);s?t.ActvityMgr.ins().send_25_1(t.ActvityMgr.ins().currentActId,t.Operate.cGetPhaseAward):t.UserTips.ins().showUITips(n.bagtips)}}break;case this.enterFb:this.canEscape?t.ActvityMgr.ins().send_25_1(t.ActvityMgr.ins().currentActId,t.Operate.cGetPhaseAward):t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips142,this.canEscapeNum))}},i.prototype.updateShabakRank=function(t){t&&t.length>0&&(this.rankGroup.visible=!0,this.updateRank(t))},i.prototype.updateShaBakMyRank=function(t){t&&t[0]>0&&(this.rankGroup.visible=!0,this.refreshMyRank(t))},i.prototype.updateShaBakBoxSorce=function(e){if(t.GameSocket.IsCrossService){var i=t.ActvityMgr.ins().getActivityInfo(26);i&&i.redDot&&this.updateBoxSorce(26,e[0])}},i.prototype.updateRank=function(t){this.firstFourArr=t;for(var e,i=0;4>i;i++)e=this.rankGroup.getChildByName("group"+i),t[i]?(e.visible=!0,e.getChildByName("nameLab").text=t[i].name,e.getChildByName("score").text=t[i].score):e.visible=!1},i.prototype.updateRank2=function(e){this.firstFourArr=e;for(var i,n=t.ActvityMgr.ins().EscapeRoleInfo,s=0;4>s;s++)i=this.rankGroup.getChildByName("group"+s),e[s]?(i.visible=!0,n.indexOf(e[s].playerId)>-1?(i.getChildByName("nameLab").text=e[s].name,i.getChildByName("score").text=t.LanguageUtils.language_Common_249):(i.getChildByName("nameLab").text=e[s].name,i.getChildByName("score").text=e[s].score)):i.visible=!1},i.prototype.updateMyRank=function(t){this.myRankParam=t,this.myRank.text=t[1]+"",this.myScore.text=t[0]+"",this.updateBox()},i.prototype.refreshMyRank=function(t){this.myRankParam=t,this.myRank.text=t[1]+"",this.myScore.text=t[0]+""},i.prototype.refreshMyRank2=function(e){e[0]>=this.canEscapeNum?this.myScore.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace("|C:0x28ee01&T:%s||C:0xe5ddcf&T: / %s|",e[0],this.canEscapeNum)):this.myScore.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace("|C:0xe50000&T:%s||C:0xe5ddcf&T: / %s|",e[0],this.canEscapeNum))},i.prototype.updateBox=function(){t.ActvityMgr.ins().currentActId&&this.updateBoxSorce(t.ActvityMgr.ins().currentActId,this.myRankParam[0])},i.prototype.updateBoxSorce=function(e,i){this.redPoint.visible=!1,this.boxMyScore.text=i+"";var n=t.ActvityMgr.ins().getActivityConfigById(e);if(n&&(this.boxMyScore.textColor=15064527,this.boxScore.textColor=15064527,n&&n.phaseAward&&n.phaseAward[t.ActvityMgr.ins().nextAward])){var s=n.phaseAward[t.ActvityMgr.ins().nextAward].value;return this.boxScore.text="/"+s,i>=s&&(this.boxMyScore.textColor=2682369,this.boxScore.textColor=2682369,this.redPoint.visible=t.GameSocket.IsCrossService?!1:!0),this.boxGroup.visible=!0,void(this.boxGroup.right=gamelib.DeviceUtils.IsMobile?186:0)}this.boxGroup.visible=!1},i.prototype.updateEscape=function(){var e=t.ActvityMgr.ins().EscapeRoleNum;this.labEscapeRoleNum.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_247,e))},i.prototype.updateEscapeState=function(e){e[0]>=this.canEscapeNum&&(this.canEscape=!0,this.enterFb.filters=null,this.canEscapeMc||(this.canEscapeMc=t.ObjectPool.pop("app.MovieClip"),this.canEscapeMc.scaleX=this.canEscapeMc.scaleY=1,this.canEscapeMc.x=30,this.canEscapeMc.y=32,this.canEscapeMc.touchEnabled=!1,this.escapeGroup.addChild(this.canEscapeMc)),this.canEscapeMc.isPlaying||this.canEscapeMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_djtt",-1))},i.prototype.lockTarget=function(e){var i,n=e.currentTarget.idx;this.firstFourArr[n]&&(i=this.firstFourArr[n].playerReg);var s=t.EntityMgr.ins().getPayer;i&&s.recog!=i&&t.UserTips.ins().showUITips("双击自动智能PK")},i.prototype.onClickPK=function(e){var i,n=e.currentTarget.idx;this.firstFourArr[n]&&(i=this.firstFourArr[n].playerReg);var s=t.EntityMgr.ins().getPayer;if(i&&s.recog!=i){t.MapView.m_Move_Char=null;var a=t.EntityMgr.ins().getPayer;t.DefaultMgr.ins().postUpdateTarget(i),a.lockTarget=i,t.DefaultMgr.ins().post_pk()}},i.prototype.mouseMove=function(t){var e=t.currentTarget.getChildByName("selectImg");e&&(t.type==mouse.MouseEvent.MOUSE_OUT?e.visible=!1:e.visible=!0)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.canEscapeMc&&(this.canEscapeMc.destroy(),this.canEscapeMc=null),this.removeTouchEvent(this.fbLabel2,this.onClick),this.removeTouchEvent(this.boxImage,this.onClick),this.removeTouchEvent(this.enterFb,this.onClick),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().remove(this.zhenYingTime,this);for(var s=0;4>s;s++)this.removeBeginEvent(this["rankGrp"+s],this.lockTarget),this.removeDoubleDownEvent(this["rankGrp"+s],this.onClickPK),this.removeMouseMoveEvent(this["rankGrp"+s],this.mouseMove),this.removeMouseOverEvent(this["rankGrp"+s],this.mouseMove)},i}(t.BaseEuiView);t.FuBenView=e,__reflect(e.prototype,"app.FuBenView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._ghostInfo={},i.sysId=t.PackageID.ghost,i.regNetMsg(1,i.post_31_1),i.regNetMsg(2,i.post_31_2),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_31_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.send_31_2=function(t,e){var i=this.getBytes(2);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},Object.defineProperty(i.prototype,"ghostInfo",{get:function(){return this._ghostInfo},enumerable:!0,configurable:!0}),i.prototype.post_31_1=function(e){t.ObjectPool.wipe(this._ghostInfo);for(var i,n,s,a=e.readByte(),r=0;a>r;r++)i=e.readByte(),n=e.readInt(),s=e.readInt(),this._ghostInfo[i]={nLv:n,nBless:s}},i.prototype.post_31_2=function(e){var i=e.readByte();if(i&&4!=i)return t.UserTips.ins().showUITips(t.LanguageUtils.language_Ghost_result[i-1]),null;var n=e.readByte(),s=e.readInt(),a=e.readInt();return this._ghostInfo[n]={nLv:s,nBless:a},i},i.prototype.getRed=function(e){void 0===e&&(e=0);var n=t.EntityMgr.ins().getPayer;if(n&&n.propSet.getZSLevel()>=4){var s=t.CurrencyUtils.getCurrency(QatEnum.qatEquipment,970);if(s){var a=i.ins().ghostInfo;if(e){if(!a[e]||!a[e].nLv)return 1}else for(var r=1;5>=r;r++)if(!a[r]||!a[r].nLv)return 1}}return 0},i.prototype.getRedById=function(e){var i=t.GlobalConfig.demonsbodyConfig;for(var n in i){var s=i[n][1];if(s&&s.cost){var a=s.cost.filter(function(t){return t.id==e});if(a.length>0)return this.getRed()}}return 0},i}(t.BaseSystem);t.GhostMgr=e,__reflect(e.prototype,"app.GhostMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="GhostAutoViewSkin",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_Ghost_TITLE),this.sureBtn.label=t.LanguageUtils.language_Common_59,this.cancelBtn.label=t.LanguageUtils.language_Common_60,this.addTouchEvent(this.addBtn,this.onClick),this.addTouchEvent(this.jianBtn,this.onClick),this.addTouchEvent(this.sureBtn,this.onClick),this.addTouchEvent(this.cancelBtn,this.onClick)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n="";e&&(this.id=e[0],n=e[1],this.lvMin=e[2],this.lvMax=e[3]),this.curNum=this.lvMin,this.lbCount.text=this.curNum+"";var s="",a=t.ViewManager.ins().getView(t.GhostView);if(a)if(a.checkYes.selected)s="|C:0x28ee01&T:"+t.LanguageUtils.language_System25[3]+"|";else{var r=t.GlobalConfig.demonsbodyConfig[this.id][this.lvMin];if(r){var o=t.OtherMgr.ins().getItemIDByCost(r.cost),l=t.GlobalConfig.StdItems[o.itemId2];s="|C:0x28ee01&T:"+l.name+"|"}}this.strLab.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Ghost_DESC14,s)),this.typeLab.text=n+t.LanguageUtils.language_Common_263},i.prototype.onClick=function(e){switch(e.currentTarget){case this.addBtn:this.curNum+=1,this.curNum>this.lvMax&&(this.curNum=this.lvMax),this.lbCount.text=this.curNum+"";break;case this.jianBtn:this.curNum-=1,this.curNum<this.lvMin&&(this.curNum=this.lvMin),this.lbCount.text=this.curNum+"";break;case this.sureBtn:var i=t.ViewManager.ins().getView(t.GhostView);i&&(i.upPost2(this.id,this.curNum),i=null),t.ViewManager.ins().close(this);break;case this.cancelBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.addBtn,this.onClick),this.removeTouchEvent(this.jianBtn,this.onClick),this.removeTouchEvent(this.sureBtn,this.onClick),this.removeTouchEvent(this.cancelBtn,this.onClick)},i}(t.BaseEuiView);t.GhostAutoView=e,__reflect(e.prototype,"app.GhostAutoView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.selectIdx=0,t.isAuto=!1,t.autoLock=!1,t.itemId=0,t.cfgCur=null,t.skinName="GhostSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_Ghost_TITLE)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.selectIdx=0,t.MouseScroller.bind(this.scroller),this.checkYes.selected=!1;var n,s=t.GlobalConfig.DemonsReplaceConfig;for(var a in s)n=s[a];if(n){this.price=parseInt(n.price);var r=t.GlobalConfig.StdItems[n.itemid].name;this.lbMoney.text=t.StringUtils.replace(t.LanguageUtils.language_Ghost_DESC13,r,n.price)}this.info1_desc1.text=t.LanguageUtils.language_Ghost_DESC,this.info1_desc3.text=t.LanguageUtils.language_Ghost_DESC4,this.txt_get.text=t.LanguageUtils.language_Common_155,this.info2_desc1.text=t.LanguageUtils.language_Ghost_DESC5,this.info3_desc.text=t.LanguageUtils.language_Ghost_DESC6,this.info3_desc2.text=t.LanguageUtils.language_Ghost_DESC7,this.info3_desc4.text=t.LanguageUtils.language_Ghost_DESC8,this.info3_desc5.text=t.LanguageUtils.language_Ghost_DESC9,this.info4_desc.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Ghost_DESC10),this.info4_desc1.textFlow=t.TextFlowMaker.generateTextFlow(t.GlobalConfig.demonsconstConfig.demonspoints),this.receiveBtn.label=t.LanguageUtils.language_Ghost_Btn2,this.addTouchEvent(this.receiveBtn,this.clickFunction),this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.observe(t.GhostMgr.ins().post_31_1,this.refreshView),this.observe(t.GhostMgr.ins().post_31_2,this.post_31_2),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updatelistCost),this.observe(t.BagMgr.ins().post_8_1,this.refreshView),this.observe(t.BagMgr.ins().post_8_4,this.refreshView),this.observe(t.BagMgr.ins().post_8_3,this.refreshView),t.GhostMgr.ins().send_31_1(),this.optTab.itemRenderer=t.TradeLineTabView,this.optTab.addEventListener(eui.ItemTapEvent.CHANGING,this.onBarItemTap,this),this.optTab.dataProvider=new eui.ArrayCollection([{id:1,name:t.LanguageUtils.language_Ghost_TABl},{id:2,name:t.LanguageUtils.language_Ghost_TAB2},{id:3,name:t.LanguageUtils.language_Ghost_TAB3},{id:4,name:t.LanguageUtils.language_Ghost_TAB4}]),this.info1_ListAry=new eui.ArrayCollection,this.info1_List.itemRenderer=t.ResonateItemRender,this.info1_List.dataProvider=this.info1_ListAry,this.info2_list.itemRenderer=t.ResonateItem2Render;var o,l=[],h=t.GlobalConfig.demonslevelConfig[0],p=t.GlobalConfig.demonslevelConfig[1],u="";for(var c in h)u="",o=h[c],u=o.text+"|C:0xe5ddcf&T:，|",o=p[c],u+=o.text+"",l.push(u);this.info2_list.dataProvider=new eui.ArrayCollection(l),this.info3_list.itemRenderer=t.ResonateItem2Render,this.info3_list.dataProvider=new eui.ArrayCollection(t.GlobalConfig.demonsconstConfig.titleattr),this.listCost.itemRenderer=t.FourImagesCostItem,this.updateView()},i.prototype.updatelistCost=function(){this.cfgCur&&(this.listCost.dataProvider=new eui.ArrayCollection(this.cfgCur.cost))},i.prototype.onGetProps=function(){var e=t.OtherMgr.ins().getItemIDByCost(this.cfgCur.cost);e.itemId&&(t.ViewManager.ins().isShow(t.GaimItemWin)||t.ViewManager.ins().open(t.GaimItemWin,e,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode))},i.prototype.getCostObj=function(){var e;return e=this.checkYes.selected?t.OtherMgr.ins().getItemIDByCost2(this.cfgCur.cost,[this.itemId]):t.OtherMgr.ins().getItemIDByCost(this.cfgCur.cost)},i.prototype.clickFunction=function(){t.ViewManager.ins().open(t.VipView)},i.prototype.onBarItemTap=function(t){this.selectIdx=this.optTab.selectedIndex,this.updateView()},i.prototype.post_31_2=function(e){e?4==e&&t.DefaultMgr.ins().payResultMC(0,this.localToGlobal(this.width/2+40,this.height/2)):t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2+40,this.height/2)),this.updateView()},i.prototype.refreshView=function(){t.TimerManager.ins().isExists(this.updateView,this)||t.TimerManager.ins().doNext(this.updateView,this)},i.prototype.updateView=function(){this.autoLock=!1,this.group1.visible=0==this.selectIdx,this.group2.visible=1==this.selectIdx,this.group3.visible=2==this.selectIdx,this.group4.visible=3==this.selectIdx;var e,i,n,s,a,r=[],o=t.GhostMgr.ins().ghostInfo,l=999,h=0,p=0,u=0;this.dotImage.visible=!1;for(var c in t.GlobalConfig.demonsbodyConfig){var g={};e="",g.id=c,o[c]&&o[c].nLv?(g.nLv=o[c].nLv,g.nBless=o[c].nBless,g.isRed=!1,i=t.GlobalConfig.demonsbodyConfig[c][g.nLv],i&&(g.nLv<l&&(l=g.nLv),g.nLv>p&&(p=g.nLv),e=t.AttributeData.getItemAttStrByType(i.attr[0],i.attr),79==i.attr[0].type&&(e=e.replace(t.LanguageUtils.language_Omission_txt103,t.LanguageUtils.language_Omission_txt104))),g.attr=e,g.name=i.name):(l=0,g.isRed=t.GhostMgr.ins().getRed(+c),g.isRed&&(this.dotImage.visible=!0),g.nLv=0,o[c]?g.nBless=o[c].nBless:g.nBless=0,i=t.GlobalConfig.demonsbodyConfig[c][0],i&&(e=t.AttributeData.getItemAttStrByType(i.attr[0],i.attr),79==i.attr[0].type&&(e=e.replace(t.LanguageUtils.language_Omission_txt103,t.LanguageUtils.language_Omission_txt104))),g.attr=e,g.name=i.name),n=this.group4.getChildByName("img"+c),n.source="t_shenmo_"+c,s=this.group4.getChildByName("bar"+c),s.value=g.nBless,s.maximum=1e4,a=this.group4.getChildByName("lab"+c);var d=100;g.nBless<1e4&&(d=40+.1*Math.floor(g.nBless/100)),a.text=t.LanguageUtils.language_Ghost_DESC11+d+"%",r.push(g),this.info1_ListAry.replaceAll(r),this.isAuto&&g.id==this.autoId&&g.nLv>=this.autoLevel&&(this.isAuto=!1,t.TimerManager.ins().remove(this.autoUpPost,this),this.info1_List.getChildAt(this.autoId-1).isAuto(!1))}if(i){var m=void 0,f=0,v=void 0,_=void 0;for(var c in i.cost){if(v=this.info1_Item.getChildByName("item"+f),_=this.info1_Item.getChildByName("itemName"+f),v)if(m=i.cost[c],v.data=m,m.type){this.cfgCur=i;var y=t.CurrencyUtils.getCurrencyNameIcon(m.type);_.text=y[0],_.textColor=t.ColorUtil.GOODS_COLOR[0]}else{this.itemId=m.id;var T=t.GlobalConfig.StdItems[m.id];T&&(t.GetPropsView.getPropsTxt(this.txt_get,m.id),_.text=T.name,_.textColor=t.ColorUtil.GOODS_COLOR[T.showQuality])}f++}}if(l){var M=t.GlobalConfig.demonslevelConfig[0];M[l]&&(h=M[l].attr[0].value)}if(p){var C=t.GlobalConfig.demonslevelConfig[1];C[p]&&(u=C[p].attr[0].value)}this.info1_desc2.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Ghost_DESC2,l,p,h+u)),this.info2_desc2.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Ghost_DESC2,l,p,h+u)),this.info3_desc1.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Ghost_DESC2,l,p,h+u)),this.updatelistCost()},i.prototype.upPost=function(e){var i=this.getCostObj();return i.itemId?void(t.ViewManager.ins().isShow(t.GaimItemWin)||t.ViewManager.ins().open(t.GaimItemWin,i,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode)):void t.GhostMgr.ins().send_31_2(e,+this.checkYes.selected)},i.prototype.upPost2=function(e,i){t.TimerManager.ins().isExists(this.autoUpPost,this)&&t.TimerManager.ins().remove(this.autoUpPost,this),this.isAuto=!0,this.autoId=e,this.autoLevel=i,this.info1_List.getChildAt(this.autoId-1).isAuto(!0),this.autoUpPost(),t.TimerManager.ins().doTimer(150,0,this.autoUpPost,this)},i.prototype.stopAutoUp=function(){t.TimerManager.ins().isExists(this.autoUpPost,this)&&t.TimerManager.ins().remove(this.autoUpPost,this),this.isAuto=!1,this.info1_List.getChildAt(this.autoId-1).isAuto(!1)},i.prototype.autoUpPost=function(){var e=this.getCostObj();return e.itemId?(this.isAuto=!1,this.autoLock=!1,t.TimerManager.ins().remove(this.autoUpPost,this),this.info1_List.getChildAt(this.autoId-1).isAuto(!1),void(t.ViewManager.ins().isShow(t.GaimItemWin)||t.ViewManager.ins().open(t.GaimItemWin,e,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode))):void(this.autoLock||(this.autoLock=!0,this.checkYes.selected&&t.CurrencyUtils.getCurrency(QatEnum.qatYuanbao)<this.price&&(this.isAuto=!1,this.autoLock=!1,t.TimerManager.ins().remove(this.autoUpPost,this),this.info1_List.getChildAt(this.autoId-1).isAuto(!1)),t.GhostMgr.ins().send_31_2(this.autoId,+this.checkYes.selected)))},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),t.TimerManager.ins().removeAll(this),t.MouseScroller.unbind(this.scroller),this.removeTouchEvent(this.receiveBtn,this.clickFunction),this.optTab.removeEventListener(eui.ItemTapEvent.CHANGING,this.onBarItemTap,this)},i}(t.BaseEuiView);t.GhostView=e,__reflect(e.prototype,"app.GhostView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ResonateItem2Skin",t}return __extends(i,e),i.prototype.dataChanged=function(){this.label.textFlow=t.TextFlowMaker.generateTextFlow(this.data)},i}(t.BaseItemRender);t.ResonateItem2Render=e,__reflect(e.prototype,"app.ResonateItem2Render")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isClick=!0,t.skinName="ResonateItemSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){this.isClick&&(this.isClick=!1,this.addTouchEvent(this.button,this.clickFunction),this.addTouchEvent(this.button2,this.clickFunction2)),this.button.label=t.LanguageUtils.language_Ghost_Btn,this.button2.label=t.LanguageUtils.language_Ghost_Btn4;var e=t.ViewManager.ins().getView(t.GhostView);e&&e.isAuto&&e.autoId==this.data.id&&(this.button2.label=t.LanguageUtils.language_Ghost_Btn5),this.nameImage.source="sm_t"+this.data.id,this.totallyImage.visible=this.data.nBless>=1e4,this.lvLabel.text=t.StringUtils.replace(t.LanguageUtils.language_Ghost_DESC3,this.data.nLv),this.attrLabel.text=this.data.attr,this.dotImage.visible=this.data.isRed},i.prototype.isAuto=function(e){e?this.button2.label=t.LanguageUtils.language_Ghost_Btn5:this.button2.label=t.LanguageUtils.language_Ghost_Btn4},i.prototype.clickFunction=function(){if(this.data.nLv>=t.GlobalConfig.demonsconstConfig.maxlevel)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips85);var e=t.ViewManager.ins().getView(t.GhostView);e&&(e.upPost(+this.data.id),e=null)},i.prototype.clickFunction2=function(){var e=t.ViewManager.ins().getView(t.GhostView);if(e){if(e.isAuto)return void e.stopAutoUp();e=null}return this.data.nLv>=t.GlobalConfig.demonsconstConfig.maxlevel?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips85):void(t.ViewManager.ins().isShow(t.GhostAutoView)||t.ViewManager.ins().open(t.GhostAutoView,+this.data.id,this.data.name,this.data.nLv+1,10))},i.prototype.$onRemoveFromStage=function(){this.isClick=!1,this.removeTouchEvent(this.button,this.clickFunction),this.removeTouchEvent(this.button2,this.clickFunction2),e.prototype.$onRemoveFromStage.call(this)},i}(t.BaseItemRender);t.ResonateItemRender=e,__reflect(e.prototype,"app.ResonateItemRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.type=0,i.ruleId=83,i.titleStr=t.LanguageUtils.language_System86,i.skinName="RoleGhostSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.open=function(t){t&&(this.type=t.type)},i.prototype.showView=function(t){this.ghostInfo=t,this.updateinfo(t)},i.prototype.init=function(){this.updateinfo(this.ghostInfo),this.type?(this.button.visible=!0,this.button.label=t.LanguageUtils.language_Ghost_Btn3,this.addTouchEvent(this.button,this.clickFunction)):this.button.visible=!1},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this.button,this.clickFunction)},i.prototype.clickFunction=function(){t.ViewManager.ins().open(t.GhostView)},i.prototype.updateinfo=function(e){e=e?e:{};for(var i,n=0,s=1;5>=s;s++)i=this.infoGroup.getChildByName("lv"+s),e[s]?(i.text="Lv"+e[s].nLv,n+=e[s].nLv):i.text="Lv0";this.descLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Ghost_DESC12,n))},i}(t.BaseView);t.RoleGhostView=e,__reflect(e.prototype,"app.RoleGhostView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="GongGaoWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.addTouchEvent(this.sureBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e){this.str.textFlow=t.TextFlowMaker.generateTextFlow(e[0]);var n=this.str.height+113;this.x=(t.StageUtils.ins().getWidth()-this.width)/2,this.y=(t.StageUtils.ins().getHeight()-n)/2-30}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.sureBtn:case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose()},i}(t.BaseEuiView);t.GongGaoWin=e,__reflect(e.prototype,"app.GongGaoWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShengQuNoticeWinSkin",e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle("公告"),this.noticeLab.text=""},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.onChange=function(t){},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this,e),this.$onClose()},e}(t.BaseEuiView);t.ShengQuNoticeWin=e,__reflect(e.prototype,"app.ShengQuNoticeWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="GrowWayRendererSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){var e=this.data;t.DisplayUtils.removeFromParent(this.titleLabel),t.DisplayUtils.removeFromParent(this.list),t.DisplayUtils.removeFromParent(this.descLabel);var i=t.GlobalConfig.GrowWayConfig[e];i.title&&(this.titleLabel.textFlow=t.TextFlowMaker.generateTextFlow1(i.title),this.group.addChild(this.titleLabel)),i.items&&(this.list.itemRenderer=t.ItemBase,this.list.dataProvider=new eui.ArrayCollection(i.items),this.group.addChild(this.list)),i.desc&&(this.descLabel.textFlow=t.TextFlowMaker.generateTextFlow1(i.desc),this.group.addChild(this.descLabel))},i}(eui.ItemRenderer);t.GrowWayItemRenderer=e,__reflect(e.prototype,"app.GrowWayItemRenderer")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.pagMax=0,i.btnArr=[],i.tabIdxAry=[],i.tabIdx=0,i.btnIdx=0,i.pagIdx=0,i.skinName="GrowWaySkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tab.itemRenderer=t.CommonTabBarWin,this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_GrowWay_txt0),this.btnList.itemRenderer=t.TradeLineTabView,this.itemList.itemRenderer=t.GrowWayItemRenderer},i.prototype.clickTab=function(t){this.tabIdx=t.currentTarget.selectedIndex,this.updatePag()},i.prototype.updatePag=function(){var e=t.GlobalConfig.GrowWayTabConfig[this.tabIdxAry[this.tabIdx]];if(e){this.btnIdx=0,this.btnArr.length=0;new eui.ArrayCollection;for(var i in e){var n=e[i].tabinfo.slice();this.btnArr.push({id:e[i].index,name:e[i].itemname,tabinfo:n})}var s=this.btnArr[this.btnIdx];this.btnList.dataProvider=new eui.ArrayCollection(this.btnArr),this.btnList.selectedIndex=this.btnIdx,this.pagIdx=0,s&&s.tabinfo&&(this.pagMax=s.length),this.updateItemList()}},i.prototype.clickBtnList=function(t){this.btnIdx=this.btnList.selectedIndex,this.pagIdx=0,this.updateItemList()},i.prototype.updateItemList=function(){var e=this.btnArr[this.btnIdx],i=[];if(e&&e.tabinfo){this.pagMax=e.tabinfo.length,this.pagIdx=this.pagIdx<0?0:this.pagIdx,this.pagIdx=this.pagIdx>this.pagMax-1?this.pagMax-1:this.pagIdx,this.pageLabel.text=this.pagIdx+1+"/"+this.pagMax;var n=e.tabinfo[this.pagIdx];if(n)for(var s=void 0,a=0;a<n.length;a++)s=t.GlobalConfig.GrowWayConfig[n[a]],s&&i.push(n[a])}this.itemList.dataProvider=new eui.ArrayCollection(i)},i.prototype.clickBtn=function(t){t.currentTarget==this.leftButton?this.pagIdx--:t.currentTarget==this.rightButton&&this.pagIdx++,this.updateItemList()},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=[],s=new eui.ArrayCollection;for(var a in t.GlobalConfig.GrowWayTabConfig)if(n=t.GlobalConfig.GrowWayTabConfig[a]){var r="";for(var o in n)r=n[o].title;s.addItem(r),this.tabIdxAry.push(a)}this.tab.dataProvider=s,this.addChangingEvent(this.tab,this.clickTab),this.addChangingEvent(this.btnList,this.clickBtnList),this.addTouchEvent(this.leftButton,this.clickBtn),this.addTouchEvent(this.rightButton,this.clickBtn),this.updatePag()},i.prototype.close=function(){e.prototype.close.call(this),this.$onClose(),this.tab.itemRenderer=null,this.btnList.itemRenderer=null,this.itemList.itemRenderer=null,this.removeChangingEvent(this.tab,this.clickTab),this.removeChangingEvent(this.btnList,this.clickBtnList),this.removeTouchEvent(this.leftButton,this.clickBtn),this.removeTouchEvent(this.rightButton,this.clickBtn)},i}(t.BaseEuiView);t.GrowWayView=e,__reflect(e.prototype,"app.GrowWayView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._guildMembers=[],i.applyGuilds=[],i._applyList=[],i._guildListInfos=[],i._guildBuilds=[],i._guildLogs=[],i.devoteNums=[],i.declareWarAry=[],i.isShowView=!1,i.isSendToServer=!1,i.sysId=t.PackageID.Guild,i.regNetMsg(t.GuildProtocol.SC_GuildInfo,i.post_GuildInfo),i.regNetMsg(t.GuildProtocol.SC_GuildMember,i.post_GuildMembers),i.regNetMsg(t.GuildProtocol.SC_GuildList,i.post_GuildList),i.regNetMsg(t.GuildProtocol.SC_AddGuild,i.post_GuildCreate),i.regNetMsg(t.GuildProtocol.SC_DelGuild,i.post_GuildDel),i.regNetMsg(t.GuildProtocol.SC_JoinApplyMsgList,i.post_ApplyInfos),i.regNetMsg(t.GuildProtocol.SC_AddGuildGuildManager,i.post_Meanager),i.regNetMsg(t.GuildProtocol.SC_UpdateMemo,i.post_Notice),i.regNetMsg(t.GuildProtocol.SC_GuildDonate,i.post_GuildDonate),i.regNetMsg(t.GuildProtocol.SC_JoinApply,i.post_GuildJoinApply),i.regNetMsg(t.GuildProtocol.SC_DeleteMember,i.post_DelMember),i.regNetMsg(t.GuildProtocol.SC_ChangeGuildPos,i.post_ChangeGuildPos),i.regNetMsg(t.GuildProtocol.SC_LeaderChange,i.post_LeaderChange),i.regNetMsg(t.GuildProtocol.SC_LeftGuild,i.post_LeftGuild),i.regNetMsg(t.GuildProtocol.SC_SetAddMemberFlag,i.post_SetAddMemberFlag),i.regNetMsg(t.GuildProtocol.SC_GuildUpdateBuild,i.post_GuildUpdateBuild),i.regNetMsg(t.GuildProtocol.SC_DealGuildApply,i.post_DealGuildApply),i.regNetMsg(t.GuildProtocol.SC_ImpeachmentLeader,i.post_ImpeachmentLeader),i.regNetMsg(t.GuildProtocol.SC_DeclareWar,i.post_DeclareWar),i.regNetMsg(t.GuildProtocol.SC_ApplySuccess,i.post_ApproveSuccess),i.regNetMsg(t.GuildProtocol.SC_GuildDonateNum,i.post_ShowGuildDonateNum),i.regNetMsg(t.GuildProtocol.SC_DeclareWarList,i.post_DeclareWarList),i.regNetMsg(t.GuildProtocol.SC_guildLog,i.post_LogList),i.regNetMsg(t.GuildProtocol.SC_GuildRedPos,i.post_UpdateRedPos),i.regNetMsg(25,i.post_10_25),i.regNetMsg(26,i.post_10_26),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.post_UpdateRedPos=function(t){var e=t.readByte(),i=t.readByte(),n=t.readByte();this.redPosObj={redType:e,redIndex:i,redState:n}},i.prototype.findPageIndex=function(t){return i.ins().redPosObj&&t==i.ins().redPosObj.redIndex&&1==i.ins().redPosObj.redState?i.ins().redPosObj.redType:0},i.prototype.post_LogList=function(e){var i=e.readByte();this._guildLogs=[];for(var n,s=0;i>s;s++)n=new t.GuildLog,n.logTime=e.readUnsignedInt(),n.logType=e.readByte(),n.name1=e.readString(),n.name2=e.readString(),n.par1=e.readInt(),n.par2=e.readInt(),n.index=s,this._guildLogs.push(n);this._guildLogs=this._guildLogs.sort(function(t,e){return e.logTime-t.logTime})},i.prototype.getConverContent=function(e,i){var n={};switch(e){case t.GuildLogType.enGuildEvent_Create:case t.GuildLogType.enGuildEvent_MemberJoin:case t.GuildLogType.enGuildEvent_MemberLeft:n.name1="|C:0x0066ff&T:["+i.name1+"]|";break;case t.GuildLogType.enGuildEvent_TickMember:case t.GuildLogType.enGuildEvent_LeaderChange:n.name1="|C:0x0066ff&T:["+i.name1+"]|",n.name2="|C:0x0066ff&T:["+i.name2+"]|";break;case t.GuildLogType.enGuildEvent_AddOfficer:case t.GuildLogType.enGuildEvent_DelOfficer:n.name1="|C:0x0066ff&T:["+i.name1+"]|",n.offcial=t.LanguageUtils.language_Guild_Jobs_Log_txt[i.par1];break;case t.GuildLogType.enGuildEvent_levelUp:n.level=i.par1;break;case t.GuildLogType.enGuildEvent_Impeach:n.name1="|C:0x0066ff&T:["+i.name1+"]|",n.offical=t.LanguageUtils.language_Guild_Jobs_Log_txt[i.par1];break;case t.GuildLogType.enGuildEvent_War:case t.GuildLogType.enGuildEvent_ToWar:n.guild="|C:0x0066ff&T:["+i.name1+"]|";break;case t.GuildLogType.enGuildEvent_DonateCoin:case t.GuildLogType.enGuildEvent_DonateYB:var s="|C:0x0066ff&T:["+i.name1+"]|";n.name1=s,n.money=i.par1;break;case t.GuildLogType.enGuildEvent_joyUp:var a="|C:0x0066ff&T:["+i.name1+"]|";n.name1=a,n.offical=t.LanguageUtils.language_Guild_Jobs_Log_txt[i.par1]}return n},i.prototype.post_ApproveSuccess=function(t){this.approveGuildId=t.readUnsignedInt()},i.prototype.post_DeclareWar=function(t){this.declareWarGuildId=t.readUnsignedInt()},i.prototype.post_ShowGuildDonateNum=function(e){var i=e.readByte();this.devoteNums=[];for(var n,s=0;i>s;s++)n=new t.GuildDonateNum,n.type=e.readByte(),n.num=e.readByte(),this.devoteNums.push(n)},i.prototype.findGuildDonateNum=function(t){for(var e=this.devoteNums.length,i=0;e>i;i++){var n=this.devoteNums[i];if(n.type==t)return n.num}return 0},i.prototype.post_ImpeachmentLeader=function(t){},i.prototype.post_DealGuildApply=function(t){},i.prototype.post_GuildUpdateBuild=function(t){},i.prototype.post_SetAddMemberFlag=function(e){this.guildSetData=new t.GuildSetData,this.guildSetData.isApp=e.readByte(),this.guildSetData.setLv=e.readUnsignedShort()
},i.prototype.post_LeftGuild=function(t){this.leftGuildState=t.readByte()},i.prototype.post_LeaderChange=function(t){},i.prototype.post_ChangeGuildPos=function(t){},i.prototype.post_DelMember=function(t){},i.prototype.post_GuildJoinApply=function(t){this.applyGuildId=t.readUnsignedInt(),this.JoinApplyState=t.readByte()},i.prototype.post_GuildDonate=function(t){},i.prototype.post_Notice=function(t){},i.prototype.post_Meanager=function(e){var i,n=e.readByte();this._guildBuilds=[];for(var s=0;n>s;s++)i=new t.GuildBuilds,i.type=e.readByte(),i.level=e.readByte(),this._guildBuilds.push(i)},i.prototype.getGuildBuilds=function(){return this._guildBuilds},i.prototype.post_GuildInfo=function(e){this.isSendToServer=!1;var i=new t.GuildData,n=e.readByte();1==n?(i.guildId=e.readUnsignedInt(),i.guildName=e.readString(),i.guildLeader=e.readString(),i.guildNotice=e.readString(),i.guildLevel=e.readUnsignedShort(),i.memberNum=e.readInt(),i.mebmerMaxNum=e.readInt(),i.guildMoney=e.readInt(),i.memberDevote=e.readInt(),i.guildJob=e.readByte(),i.guildSetIsApprove=e.readByte(),i.guildSetLv=e.readUnsignedShort(),this._guildInfo=i,this.isGuild=!0):2==n?this.isShowView=!1:this.isGuild=!1},i.prototype.getMyGuildInfo=function(){return this._guildInfo},i.prototype.post_GuildMembers=function(e){var i,n=e.readInt();this._guildMembers=[];for(var s=0;n>s;s++)i=new t.GuildMemberInfo,i.roleId=e.readUnsignedInt(),i.nickName=e.readString(),i.level=e.readInt(),i.turn=e.readByte(),i.job=e.readByte(),i.sex=e.readByte(),i.post=e.readByte(),i.devote=e.readInt(),i.online=e.readByte(),i.loginTime=e.readUnsignedInt(),i.superLv=e.readUnsignedInt(),this._guildMembers.push(i)},i.prototype.getMembers=function(){return this._guildMembers.sort(this.guildMembersSort),this._guildMembers},i.prototype.guildMembersSort=function(t,e){return t.online&&!e.online?-1:!t.online&&e.online?1:t.post>e.post?-1:t.post<e.post?1:t.devote>e.devote?-1:t.devote<e.devote?1:void 0},i.prototype.post_GuildList=function(e){var i,n=e.readInt();this._guildListInfos=[];for(var s=0;n>s;s++)i=new t.GuildListInfo,i.guildName=e.readString(),i.guildId=e.readUnsignedInt(),i.guildRankId=e.readInt(),i.guildLeader=e.readString(),i.guildLevel=e.readInt(),i.guildNumber=e.readInt(),i.guildMaxNum=e.readInt(),i.guildDemand=e.readByte(),i.addGuildLevel=e.readInt(),i.xuanzhanState=e.readByte(),i.isApply=e.readBoolean(),this._guildListInfos.push(i)},i.prototype.guildSort=function(t,e){return t.guildLevel>e.guildLevel?-1:t.guildLevel<e.guildLevel?1:t.guildNumber>e.guildNumber?-1:t.guildNumber<e.guildNumber?1:void 0},i.prototype.getGuildListInfos=function(){return this._guildListInfos.sort(this.guildSort),this._guildListInfos},i.prototype.post_GuildCreate=function(e){var i=e.readByte(),n=e.readInt();this.guildCreatState=0==i,Main.gameParameter.pfID==t.PlatFormID.HUYU37&&0==i&&t.OtherMgr.ins().guildReport37("",t.YYHallMsgType.createGuild,n,1)},i.prototype.post_GuildDel=function(e){var i=e.readByte();0==i&&t.ViewManager.ins().isShow(t.GuildInfoView)&&(t.ViewManager.ins().close(t.GuildInfoView),t.ViewManager.ins().open(t.GuildNoGuildListView))},i.prototype.post_ApplyInfos=function(e){var i,n=e.readInt();this._applyList=[];for(var s=0;n>s;s++)i=new t.GuildApplyInfo,i.roleId=e.readUnsignedInt(),i.roleName=e.readString(),i.level=e.readInt(),i.turn=e.readByte(),i.job=e.readByte(),i.sex=e.readByte(),i.superLv=e.readUnsignedInt(),this._applyList.push(i)},i.prototype.getApplyList=function(){return this._applyList},i.prototype.sendGuildLog=function(){var e=this.getBytes(t.GuildProtocol.CS_GuildLog);this.sendToServer(e)},i.prototype.sendCreateGuild=function(e){var i=this.getBytes(t.GuildProtocol.CS_AddGuild);i.writeString(e),this.sendToServer(i)},i.prototype.sendGuildInfo=function(e){if(void 0===e&&(e=!1),this.isShowView=e,!this.isSendToServer){this.isSendToServer=!0;var i=this.getBytes(t.GuildProtocol.CS_GuildInfo);this.sendToServer(i)}},i.prototype.getIsShowView=function(){return this.isShowView},i.prototype.sendGuildMember=function(){var e=this.getBytes(t.GuildProtocol.CS_GuildMember);this.sendToServer(e)},i.prototype.sendGuildList=function(){var e=this.getBytes(t.GuildProtocol.CS_GuildList);this.sendToServer(e)},i.prototype.sendGuildAppList=function(){var e=this.getBytes(t.GuildProtocol.CS_JoinApplyMsgList);this.sendToServer(e)},i.prototype.sendDelGuild=function(){var e=this.getBytes(t.GuildProtocol.CS_DelGuild);this.sendToServer(e)},i.prototype.sendGuildBuilds=function(){var e=this.getBytes(t.GuildProtocol.CS_GuildBuilds);this.sendToServer(e)},i.prototype.sendUpdateGuildNotice=function(e){var i=t.GlobalData.serverTime/1e3;if(window.prohibitText&&i>1625068680&&1625155080>i){if(Main.gameParameter.pfID==t.PlatFormID.PF4366&&("t1"==t.LocationProperty.serverAlias||"t2"==t.LocationProperty.serverAlias||"t3"==t.LocationProperty.serverAlias||"t4"==t.LocationProperty.serverAlias||"t5"==t.LocationProperty.serverAlias||"h1"==t.LocationProperty.serverAlias||"t7"==t.LocationProperty.serverAlias||"t6"==t.LocationProperty.serverAlias||"t8"==t.LocationProperty.serverAlias||"t9"==t.LocationProperty.serverAlias||"t10"==t.LocationProperty.serverAlias||"t11"==t.LocationProperty.serverAlias||"t12"==t.LocationProperty.serverAlias))return void t.UserTips.ins().showUITips("|C:0xff7700&T:该功能暂不可用，7月2日重新开启|");if(Main.gameParameter.pfID==t.PlatFormID.YY)return void t.UserTips.ins().showUITips("|C:0xff7700&T:该功能暂不可用，7月2日重新开启|")}var n=this.getBytes(t.GuildProtocol.CS_UpdateMemo);n.writeString(e),this.sendToServer(n)},i.prototype.sendGuildDonate=function(e){var i=this.getBytes(t.GuildProtocol.CS_GuildDonate);i.writeByte(e),this.sendToServer(i)},i.prototype.sendJoinGuildAppy=function(e,i){void 0===i&&(i=0);var n=this.getBytes(t.GuildProtocol.CS_JoinApply);n.writeUnsignedInt(e),n.writeByte(i),this.sendToServer(n)},i.prototype.sendDelMember=function(e){var i=this.getBytes(t.GuildProtocol.CS_DeleteMember);i.writeUnsignedInt(e),this.sendToServer(i)},i.prototype.sendSetChangeGuildPos=function(e,i){var n=this.getBytes(t.GuildProtocol.SC_ChangeGuildPos);n.writeUnsignedInt(e),n.writeByte(i),this.sendToServer(n)},i.prototype.sendLeaderChange=function(e){var i=this.getBytes(t.GuildProtocol.SC_LeaderChange);i.writeUnsignedInt(e),this.sendToServer(i)},i.prototype.sendLeftChange=function(){var e=this.getBytes(t.GuildProtocol.SC_LeftGuild);this.sendToServer(e)},i.prototype.sendSetAddMemberFlag=function(e,i){var n=this.getBytes(t.GuildProtocol.CS_SetAddMemberFlag);n.writeByte(e),n.writeUnsignedShort(i),this.sendToServer(n)},i.prototype.sendGuildUpdateBuild=function(e){var i=this.getBytes(t.GuildProtocol.CS_GuildUpdateBuild);i.writeByte(e),this.sendToServer(i)},i.prototype.sendDealGuildApply=function(e,i){var n=this.getBytes(t.GuildProtocol.CS_DealGuildApply);n.writeByte(i),n.writeUnsignedInt(e),this.sendToServer(n)},i.prototype.sendImpeachmentLeader=function(e){var i=this.getBytes(t.GuildProtocol.CS_ImpeachmentLeader);i.writeUnsignedInt(e),this.sendToServer(i)},i.prototype.sendDeclareWar=function(e){var i=this.getBytes(t.GuildProtocol.CS_DeclareWar);i.writeUnsignedInt(e),this.sendToServer(i)},i.prototype.sendGuildDonateNum=function(){var e=this.getBytes(t.GuildProtocol.CS_GuildDonateNum);this.sendToServer(e)},i.prototype.getDeclareWarList=function(){this.declareWarAry=[];var e=this.getBytes(t.GuildProtocol.SC_DeclareWarList);this.sendToServer(e)},i.prototype.post_DeclareWarList=function(e){for(var i=e.readByte(),n=0;i>n;n++)this.declareWarAry.push(e.readUnsignedInt());t.MapView.updateNaemColor()},i.prototype.send_10_24=function(){var t=this.getBytes(24);this.sendToServer(t)},i.prototype.post_10_25=function(e){var i="",n=e.readByte();1==n?i=t.LanguageUtils.language_Omission_txt62:2==n?i=t.LanguageUtils.language_Omission_txt63:3==n?i=t.LanguageUtils.language_Omission_txt64:4==n?i=t.LanguageUtils.language_Omission_txt65:5==n&&(i=t.LanguageUtils.language_Omission_txt66),t.UserTips.ins().showUITips("|C:0xff7700&T:"+i+"|")},i.prototype.send_10_25=function(){var t=this.getBytes(25);this.sendToServer(t)},i.prototype.post_10_26=function(t){var e=t.readString(),i=t.readString();return[e,i]},i.prototype.getIsDeclareWar=function(t){for(var e=this.declareWarAry.length,i=0;e>i;i++)if(t==this.declareWarAry[i])return t;return 0},i.prototype.getIsOwnDeclareWar=function(){return this.declareWarAry.length>0},i.prototype.getGuildRed=function(){if(i.ins().redPosObj){var t=i.ins().redPosObj;return 2==t.redState?0:t.redType}return 0},i}(t.BaseSystem);t.GuildMgr=e,__reflect(e.prototype,"app.GuildMgr")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.GuildData=e,__reflect(e.prototype,"app.GuildData");var i;!function(t){t[t.CS_GuildInfo=1]="CS_GuildInfo",t[t.CS_GuildMember=2]="CS_GuildMember",t[t.CS_GuildList=3]="CS_GuildList",t[t.CS_AddGuild=4]="CS_AddGuild",t[t.CS_DelGuild=5]="CS_DelGuild",t[t.CS_JoinApplyMsgList=6]="CS_JoinApplyMsgList",t[t.CS_GuildBuilds=7]="CS_GuildBuilds",t[t.CS_UpdateMemo=8]="CS_UpdateMemo",t[t.CS_GuildDonate=9]="CS_GuildDonate",t[t.CS_JoinApply=10]="CS_JoinApply",t[t.CS_DeleteMember=11]="CS_DeleteMember",t[t.CS_ChangeGuildPos=12]="CS_ChangeGuildPos",t[t.CS_LeaderChange=13]="CS_LeaderChange",t[t.CS_LeftGuild=14]="CS_LeftGuild",t[t.CS_SetAddMemberFlag=15]="CS_SetAddMemberFlag",t[t.CS_GuildUpdateBuild=16]="CS_GuildUpdateBuild",t[t.CS_DealGuildApply=17]="CS_DealGuildApply",t[t.CS_ImpeachmentLeader=18]="CS_ImpeachmentLeader",t[t.CS_DeclareWar=19]="CS_DeclareWar",t[t.CS_GuildDonateNum=21]="CS_GuildDonateNum",t[t.CS_GuildLog=23]="CS_GuildLog",t[t.SC_GuildInfo=1]="SC_GuildInfo",t[t.SC_GuildMember=2]="SC_GuildMember",t[t.SC_GuildList=3]="SC_GuildList",t[t.SC_AddGuild=4]="SC_AddGuild",t[t.SC_DelGuild=5]="SC_DelGuild",t[t.SC_JoinApplyMsgList=6]="SC_JoinApplyMsgList",t[t.SC_AddGuildGuildManager=7]="SC_AddGuildGuildManager",t[t.SC_UpdateMemo=8]="SC_UpdateMemo",t[t.SC_GuildDonate=9]="SC_GuildDonate",t[t.SC_JoinApply=10]="SC_JoinApply",t[t.SC_DeleteMember=11]="SC_DeleteMember",t[t.SC_ChangeGuildPos=12]="SC_ChangeGuildPos",t[t.SC_LeaderChange=13]="SC_LeaderChange",t[t.SC_LeftGuild=14]="SC_LeftGuild",t[t.SC_SetAddMemberFlag=15]="SC_SetAddMemberFlag",t[t.SC_GuildUpdateBuild=16]="SC_GuildUpdateBuild",t[t.SC_DealGuildApply=17]="SC_DealGuildApply",t[t.SC_ImpeachmentLeader=18]="SC_ImpeachmentLeader",t[t.SC_DeclareWar=19]="SC_DeclareWar",t[t.SC_ApplySuccess=20]="SC_ApplySuccess",t[t.SC_GuildDonateNum=21]="SC_GuildDonateNum",t[t.SC_guildLog=23]="SC_guildLog",t[t.SC_DeclareWarList=22]="SC_DeclareWarList",t[t.SC_GuildRedPos=24]="SC_GuildRedPos"}(i=t.GuildProtocol||(t.GuildProtocol={}));var n;!function(t){t[t.smGuildCommon=0]="smGuildCommon",t[t.smGuildElite=1]="smGuildElite",t[t.smGuildTangzhu=2]="smGuildTangzhu",t[t.smGuildAssistLeader=3]="smGuildAssistLeader",t[t.smGuildLeader=4]="smGuildLeader"}(n=t.GuildLeaderType||(t.GuildLeaderType={}));var s=function(){function t(){}return t}();t.GuildDonateNum=s,__reflect(s.prototype,"app.GuildDonateNum");var a=function(){function t(){this.superLv=0}return t}();t.GuildMemberInfo=a,__reflect(a.prototype,"app.GuildMemberInfo");var r=function(){function t(){this.turn=0,this.superLv=0}return t}();t.GuildApplyInfo=r,__reflect(r.prototype,"app.GuildApplyInfo");var o=function(){function t(){}return t}();t.GuildListInfo=o,__reflect(o.prototype,"app.GuildListInfo");var l=function(){function t(){}return t}();t.GuildBuilds=l,__reflect(l.prototype,"app.GuildBuilds");var h=function(){function t(){}return t}();t.GuildLog=h,__reflect(h.prototype,"app.GuildLog");var p;!function(t){t[t.enGuildEvent_Create=1]="enGuildEvent_Create",t[t.enGuildEvent_MemberJoin=2]="enGuildEvent_MemberJoin",t[t.enGuildEvent_MemberLeft=3]="enGuildEvent_MemberLeft",t[t.enGuildEvent_TickMember=4]="enGuildEvent_TickMember",t[t.enGuildEvent_LeaderChange=5]="enGuildEvent_LeaderChange",t[t.enGuildEvent_AddOfficer=6]="enGuildEvent_AddOfficer",t[t.enGuildEvent_DelOfficer=7]="enGuildEvent_DelOfficer",t[t.enGuildEvent_levelUp=8]="enGuildEvent_levelUp",t[t.enGuildEvent_Impeach=9]="enGuildEvent_Impeach",t[t.enGuildEvent_War=10]="enGuildEvent_War",t[t.enGuildEvent_ToWar=11]="enGuildEvent_ToWar",t[t.enGuildEvent_DonateCoin=12]="enGuildEvent_DonateCoin",t[t.enGuildEvent_DonateYB=13]="enGuildEvent_DonateYB",t[t.enGuildEvent_joyUp=14]="enGuildEvent_joyUp"}(p=t.GuildLogType||(t.GuildLogType={}));var u=function(){function t(){}return t}();t.GuildSetData=u,__reflect(u.prototype,"app.GuildSetData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.qqHallIsSend=!1,i.skinName="CreatGuildViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.setText()},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_Guild_CreatGuild_txt),this.addTouchEvent(this.ConfirmBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.observe(t.GuildMgr.ins().post_GuildCreate,this.updateData),this.observe(t.OtherMgr.ins().post_qqHallTextFiltering,this.qqHallSendMsg),this.observe(t.OtherMgr.ins().postYYVerification,this.yyHallSendMsg),this.moneyLb.text=t.GlobalConfig.GuildConfig.createNeedYb.toString(),t.GlobalConfig.editionConf.viplevel&&t.GlobalConfig.editionConf.viplevel.CardLv?(this.conditionText.visible=!0,this.conditionText.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.Language_Guild_Vip[t.GlobalConfig.editionConf.viplevel.CardLv])):this.conditionText.visible=!1},i.prototype.setText=function(){this.typeLb.text=t.LanguageUtils.Language_Guild_Creat_Txt0,this.txt.text=t.LanguageUtils.Language_Guild_Creat_Txt1,this.ConfirmBtn.label=t.LanguageUtils.language_Common_59,this.closeBtn.label=t.LanguageUtils.language_Common_60},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.ConfirmBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeObserve()},i.prototype.updateData=function(){t.GuildMgr.ins().guildCreatState&&(t.ViewManager.ins().close(this),t.ViewManager.ins().close(t.GuildNoGuildListView),t.GuildMgr.ins().sendGuildInfo(!0))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.ConfirmBtn:var i=this.guildNameText.text.trim();if(null==i)return;if(t.GlobalConfig.editionConf.viplevel&&t.GlobalConfig.editionConf.viplevel.CardLv){var n=t.VipData.ins().getMyVipLv();if(t.GlobalConfig.editionConf.viplevel.CardLv>n)return n=null,void t.UserTips.ins().showUITips(t.LanguageUtils.Language_Guild_Vip[t.GlobalConfig.editionConf.viplevel.CardLv])}Main.gameParameter.pfID==t.PlatFormID.QQGame?(t.OtherMgr.ins().qqHallTextFiltering(i,t.QQHallMsgType.msgInfo),this.qqHallIsSend=!0):Main.gameParameter.pfID==t.PlatFormID.YY?(t.OtherMgr.ins().yyHallTextFiltering(i,t.YYHallMsgType.createGuild),this.qqHallIsSend=!0):t.GuildMgr.ins().sendCreateGuild(i);break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.qqHallSendMsg=function(e){e.type==t.QQHallMsgType.msgInfo&&this.qqHallIsSend&&(0==e.isLegal?t.GuildMgr.ins().sendCreateGuild(e.Msg):t.UserTips.ins().showUITips("输入的文字不合法"),this.qqHallIsSend=!1)},i.prototype.yyHallSendMsg=function(e){e.msgType==t.YYHallMsgType.createGuild&&this.qqHallIsSend&&(t.GuildMgr.ins().sendCreateGuild(e.msg),this.qqHallIsSend=!1)},i}(t.BaseEuiView);t.CreatGuildView=e,__reflect(e.prototype,"app.CreatGuildView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName=Main.gameParameter.pfID==t.PlatFormID.QQGame?"GuildQQApplyItemViewSkin":"GuildApplyItemViewSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.rejectBtn,this.onClick),this.addTouchEvent(this.agreeBtn,this.onClick)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.rejectBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.agreeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.setText=function(){this.rejectBtn.label=t.LanguageUtils.Language_Guild_Member_Btn_Txt0,this.agreeBtn.label=t.LanguageUtils.Language_Guild_Member_Btn_Txt1},i.prototype.dataChanged=function(){if(null!=this.data){this.setText(),this.applyInfo=this.data,this.roleNameLb.text=this.applyInfo.roleName,this.rolePrensionLb.text=t.LanguageUtils["language_Role_Sex_"+this.applyInfo.sex]+t.LanguageUtils["language_Role_Name_"+this.applyInfo.job],this.roleLevelLb.text=this.applyInfo.turn>=1?this.applyInfo.turn+t.LanguageUtils.language_Friend_Turn_txt+this.applyInfo.level+t.LanguageUtils.language_Friend_Level_txt:this.applyInfo.level+t.LanguageUtils.language_Friend_Level_txt;var e=t.GuildMgr.ins().getMyGuildInfo();if(e&&(e.guildJob<2?(this.rejectBtn.visible=!1,this.agreeBtn.visible=!1):(this.rejectBtn.visible=!0,this.agreeBtn.visible=!0)),Main.gameParameter.pfID==t.PlatFormID.QQGame){var i=this.applyInfo.superLv>>16,n=i>>8,s=255&i,a=65535&this.applyInfo.superLv;this.blueImg.visible=n&&a>0,this.blueImg.source=n&&a>0?1==n?"lz_pt"+(a+1):"lz_hh"+(a+1):"",this.blueYearImg.visible=1==s}}},i.prototype.onClick=function(e){var i=-1;i=e.target==this.rejectBtn?0:1,t.GuildMgr.ins().sendDealGuildApply(this.applyInfo.roleId,i)},i.prototype.destroy=function(){for(this.applyInfo=null;this.gp.numChildren>0;){var t=this.gp.getChildAt(0);t&&(t=null),this.gp.removeChildAt(0)}this.gp=null},i}(t.BaseItemRender);t.GuildApplyItemView=e,__reflect(e.prototype,"app.GuildApplyItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="GuildDevoteViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.setTxt()},i.prototype.setTxt=function(){for(var e=0;2>e;e++)this["txt"+e+"Get"].text=t.LanguageUtils.Language_Guild_Devote_Txt0,this["txt"+e+"Money"].text=t.LanguageUtils.Language_Guild_Devote_Txt1,this["txt"+e+"Devote"].text=t.LanguageUtils.Language_Guild_Devote_Txt2,this["goldDevoteBtn"+e].label=t.LanguageUtils.Language_Guild_Devote_Txt3},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_Guild_DevoteTitle_txt),t.GuildMgr.ins().sendGuildDonateNum(),this.observe(t.GuildMgr.ins().post_ShowGuildDonateNum,this.updateData),this.observe(t.GuildMgr.ins().post_GuildDonate,this.updateDonate),this.addTouchEvent(this.goldDevoteBtn0,this.onClick),this.addTouchEvent(this.goldDevoteBtn1,this.onClick),this.updateData()},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.goldDevoteBtn0,this.onClick),this.removeTouchEvent(this.goldDevoteBtn1,this.onClick),this.dragDropUI.destroy(),this.dragDropUI=null},i.prototype.updateDonate=function(){t.GuildMgr.ins().sendGuildDonateNum()},i.prototype.updateData=function(){var e=t.GlobalConfig.GuildDonateConfig,i=0;for(var n in e){var s=t.GlobalConfig.NumericalIcon[e[n].type];this["goldLb"+i].text=""+t.LanguageUtils.Language_Guild_Devote_Txt3+e[n].cost+(s&&s.name),this["goldAddCionLb"+i].text="+"+e[n].addcion,this["goldAddDevoteLb"+i].text="+"+e[n].adddonate,this["goldIcon"+i].source=s&&s.icon.toString(),this["goldDayNum"+i].text=t.GuildMgr.ins().findGuildDonateNum(e[n].type)+"/"+e[n].limittimes,this["goldDevoteBtn"+i].name=e[n].type,i++}},i.prototype.onClick=function(e){t.GuildMgr.ins().sendGuildDonate(e.currentTarget.name)},i}(t.BaseEuiView);t.GuildDevoteView=e,__reflect(e.prototype,"app.GuildDevoteView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.iconList=[],t.skinName="FriendFunMenuViewSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.gList.itemRenderer=t.FriendFunMenuItem,this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i.prototype.onChange=function(){var e=this.gList.selectedIndex,i=this.gList.getChildAt(e),n=i.menuBtn.name,s=this.itemData;switch(n){case"chatBtn":t.EventManager.ins().sendEvent(t.ChatEvent.PLAY_NAME_SLECT,[{indexText:this.itemData.nickName}]);break;case"showInfoBtn":if(t.ViewManager.ins().isShow(t.OtherPlayerView))return;t.EquipItemMgr.ins().sendQueryOthersEquips(this.itemData.roleId);break;case"addFriendBtn":var a=new t.CSFriend_Add_Data;a.id=this.itemData.roleId,a.nickName="",t.FriendMgr.ins().sendAddFriend(a);break;case"delFriendBtn":var r=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt21,this.itemData.nickName));t.CautionView.show(r,function(){this.sendDelInfo(t.FriendState.Friend)},this);break;case"inviteTeamBtn":if(null==this.itemData)return;var o=t.LanguageUtils.language_Team_LeaderinviteJonTeam_tips_0+this.itemData.nickName+t.LanguageUtils.language_Team_LeaderinviteJonTeam_tips_1;t.CautionView.show(o,function(){t.TeamMgr.ins().onSendInviteJoinTeam(s.roleId,"")},this);break;case"applyTeamBtn":if(null==this.itemData)return;var l=t.LanguageUtils.language_Team_ApplyAddTeam_tips_0+this.itemData.nickName+t.LanguageUtils.language_Team_ApplyAddTeam_tips_1;t.CautionView.show(l,function(){t.TeamMgr.ins().onSendApplyJoinTeam(s.roleId)},this);break;case"addConBtn":var h=new t.CSFriend_Add_Concern_Data;h.id=this.itemData.roleId,h.nickName="",t.FriendMgr.ins().sendAddConcern(h);break;case"addBlackBtn":var p=new t.CSFriend_Add_Concern_Data;p.id=this.itemData.roleId,p.nickName="",t.FriendMgr.ins().sendAddBlackList(p);break;case"kickBuildBtn":if(null==this.itemData)return;var u=t.LanguageUtils.language_Guild_kickRole_txt;t.CautionView.show(u,function(){t.GuildMgr.ins().sendDelMember(s.roleId)},this);break;case"GiveLeaderBuildBtn":if(null==this.itemData)return;var c=t.LanguageUtils.language_Guild_GiveLeaderRole_txt;t.CautionView.show(c,function(){t.GuildMgr.ins().sendLeaderChange(s.roleId)},this);break;case"setViceBtn":if(null==this.itemData)return;var g=t.LanguageUtils.language_Guild_SetViceRole_txt;t.CautionView.show(g,function(){t.GuildMgr.ins().sendSetChangeGuildPos(s.roleId,t.GuildLeaderType.smGuildAssistLeader)},this);break;case"delViceBtn":if(null==this.itemData)return;var d=t.LanguageUtils.language_Guild_DelViceRole_txt;t.CautionView.show(d,function(){t.GuildMgr.ins().sendSetChangeGuildPos(s.roleId,t.GuildLeaderType.smGuildCommon)},this);break;case"setThBtn":if(null==this.itemData)return;var m=t.StringUtils.replace(t.LanguageUtils.language_Guild_ThLeader_txt,t.GlobalConfig.GuildConfig.impeachcost,this.itemData.nickName);t.CautionView.show(m,function(){t.GuildMgr.ins().sendImpeachmentLeader(s.roleId)},this);break;case"privateTradeLineBtn":var f=new Object;f.sendName=this.itemData.nickName,t.ViewManager.ins().isShow(t.PrivateDealsWin)||t.ViewManager.ins().open(t.PrivateDealsWin,f)}},i.prototype.sendDelInfo=function(e){var i=new t.CSFriend_Del_Data;i.id=this.itemData.roleId,i.nickName="",i.type=e,t.FriendMgr.ins().sendDeleteFirends(i)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.x=e[0].x,this.y=e[0].y;var n=t.StageUtils.ins().getWidth();t.StageUtils.ins().getHeight();if(this.x+this.width>n&&(this.x=n-this.width),null!=e[1]){var s=t.GuildMgr.ins().getMyGuildInfo();this.itemData=e[1];var a=t.DateUtils.getSecondByDay(this.itemData.loginTime);s.guildJob==t.GuildLeaderType.smGuildLeader?(this.itemData.post==t.GuildLeaderType.smGuildAssistLeader?this.iconList.push(t.LanguageUtils.language_Guild_Btn_Delvice_txt):this.iconList.push(t.LanguageUtils.language_Guild_Btn_Setvice_txt),this.iconList.push(t.LanguageUtils.language_Guild_Btn_KickGuild_txt),this.iconList.push(t.LanguageUtils.language_Guild_Btn_GiveLeaderGuild_txt)):s.guildJob==t.GuildLeaderType.smGuildAssistLeader?this.itemData.post==t.GuildLeaderType.smGuildLeader?a>=t.GlobalConfig.GuildConfig.protectDay&&0==this.itemData.online&&this.iconList.push(t.LanguageUtils.language_Guild_Btn_Th_txt):this.iconList.push(t.LanguageUtils.language_Guild_Btn_KickGuild_txt):s.guildJob==t.GuildLeaderType.smGuildTangzhu&&(this.itemData.post==t.GuildLeaderType.smGuildElite||this.itemData.post==t.GuildLeaderType.smGuildCommon?this.iconList.push(t.LanguageUtils.language_Guild_Btn_KickGuild_txt):this.itemData.post==t.GuildLeaderType.smGuildLeader&&a>=t.GlobalConfig.GuildConfig.protectDay&&this.iconList.push(t.LanguageUtils.language_Guild_Btn_Th_txt));var r=t.FriendMgr.ins().findIsFriend(this.itemData.roleId);r?this.iconList=this.iconList.concat(t.LanguageUtils.language_Friend_Menu_List):this.iconList=this.iconList.concat(t.LanguageUtils.language_Friend_Menu_List1),this.height=48*this.iconList.length,this.bg.height=47*this.iconList.length+5,this.y=e[0].y-this.height-5;var o=new eui.ArrayCollection(this.iconList);this.gList.dataProvider=o}},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.gList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.iconList=[],this.itemData=null},i}(t.BaseEuiView);t.GuildFunMenuView=e,__reflect(e.prototype,"app.GuildFunMenuView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.guildMemberList=new eui.ArrayCollection,t.guildAppList=new eui.ArrayCollection,t.guildListData=new eui.ArrayCollection,t.guildLogListData=new eui.ArrayCollection,t.qqHallIsSend=!1,t.skinName="GuildInfoViewSkin",t.name="GuildInfoView",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.setBuildTxt(),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System28)},i.prototype.setBuildTxt=function(){this.lgfLvBtn.label=t.LanguageUtils.Language_Guild_Btn_Txt,this.assemblyHallLvBtn.label=t.LanguageUtils.Language_Guild_Btn_Txt,this.mgrHallLvBtn.label=t.LanguageUtils.Language_Guild_Btn_Txt,this.allRejectBtn.label=t.LanguageUtils.Language_Guild_Info_Btn_Txt2,this.setBtn.label=t.LanguageUtils.Language_Guild_Info_Btn_Txt0,this.allagreeBtn.label=t.LanguageUtils.Language_Guild_Info_Btn_Txt1,this.exitGuildBtn.label=t.LanguageUtils.language_Guild_Btn_Exit_txt,this.optGuildBtn.label=t.LanguageUtils.Language_Guild_Info_Btn_Txt3;for(var e=0;13>e;e++)this["txtBuild"+e].text=t.LanguageUtils["language_Guild_Build_Txt"+e],this["txtInfo"+e]&&(this["txtInfo"+e].text=t.LanguageUtils["Language_Guild_Info_Txt"+e])},i.prototype.bindTabBar=function(){this.tabBar.itemRenderer=t.GuildTarBtnView;var e=new eui.ArrayCollection(t.LanguageUtils.language_Guild_Tar_txt);this.tabBar.dataProvider=e},i.prototype.setCrrentGp=function(t){for(var e=0;6>e;e++)this["gp_"+e].visible=!1,t==e&&(this["gp_"+t].visible=!0)},i.prototype.bindOptTabBar=function(){this.optTab.itemRenderer=t.GuildOptTarBtnItemView;var e=new eui.ArrayCollection(t.LanguageUtils.language_Guild_Opt_tar_txt);this.optTab.dataProvider=e},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.bindTabBar(),this.bindOptTabBar(),this.bindLogList(),this.guildShopList.itemRenderer=t.GuildShopItemView,this.tabBar.selectedIndex=0,this.optTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.optTab.selectedIndex=0,this.setCrrentGp(0),t.MouseScroller.bind(this.scroller_guildList),t.MouseScroller.bind(this.scroller_log),t.MouseScroller.bind(this.scroller_member),t.MouseScroller.bind(this.scroller_app),t.GuildMgr.ins().sendGuildInfo(),this.observe(t.GuildMgr.ins().post_GuildMembers,this.showGuildMemberList),this.observe(t.GuildMgr.ins().post_LeftGuild,this.updateLeftGuild),this.observe(t.GuildMgr.ins().post_ApplyInfos,this.updateApplyList),this.observe(t.GuildMgr.ins().post_GuildList,this.updateGuildListData),this.observe(t.GuildMgr.ins().post_GuildInfo,this.updateGuildInfo),this.observe(t.DefaultMgr.ins().post_playerGuildConChange,this.updateGuildCod),this.observe(t.GuildMgr.ins().post_DeclareWar,this.updateDeclareWar),this.observe(t.GuildMgr.ins().post_Meanager,this.updateBuild),this.observe(t.GuildMgr.ins().post_LogList,this.updateLoglist),this.observe(t.ShopMgr.ins().post_onReceiveshopList,this.updateShopList),this.observe(t.OtherMgr.ins().post_qqHallTextFiltering,this.qqHallSendMsg),this.observe(t.OtherMgr.ins().postYYVerification,this.yyHallSendMsg),this.observe(t.OtherMgr.ins().post37Verification,this.yyHallSendMsg),this.addTouchEvent(this.exitGuildBtn,this.onClick),this.addTouchEvent(this.editGuildNoticeBtn,this.onClick),this.addTouchEvent(this.devoteBtn,this.onClick),this.addTouchEvent(this.mgrHallLvBtn,this.onClick),this.addTouchEvent(this.lgfLvBtn,this.onClick),this.addTouchEvent(this.assemblyHallLvBtn,this.onClick),this.addTouchEvent(this.optGuildBtn,this.onClick),this.addTouchEvent(this.setBtn,this.onClick),this.addTouchEvent(this.allagreeBtn,this.onClick),this.addTouchEvent(this.allRejectBtn,this.onClick),this.memberList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.memberList.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this);var n=t.EntityMgr.ins().getPayer;this.propSet=n.propSet,this.updateGuildCod()},i.prototype.updateGuildCod=function(){var e=t.EntityMgr.ins().getPlayerPropertySet();if(e&&e.propSet){var i=e.propSet;this.guildContributionLab.text=i.getGuildDevote(),this.guildMyDevoteLb.text=i.getGuildDevote(),this.myDevoteLb.text=i.getGuildDevote()}},i.prototype.onTouchDouble=function(){if(this.memberInfo&&this.memberInfo.roleId!=this.propSet.getACTOR_ID()){var e,i=t.GuildMgr.ins().getMyGuildInfo();e=i.guildJob==t.GuildLeaderType.smGuildLeader?this.gp_2.localToGlobal(this.gp_2.width+10,this.gp_2.height-25):this.gp_2.localToGlobal(this.gp_2.width+10,407),t.ViewManager.ins().open(t.GuildFunMenuView,e,this.memberInfo)}},i.prototype.bindLogList=function(){this.guildLogList.itemRenderer=t.GuildLogItemView,this.guildLogList.dataProvider=this.guildLogListData},i.prototype.updateLoglist=function(){this.guildLogListData.source=t.GuildMgr.ins()._guildLogs},i.prototype.updateBuild=function(){t.GuildMgr.ins().sendGuildInfo();var e=t.GuildMgr.ins().getGuildBuilds(),i=t.GlobalConfig.GuildBuildConfig,n=t.GlobalConfig.GuildConfig.buildMaxNum,s=e[0].level==n?e[0].level:e[0].level+1,a=e[1].level==n?e[1].level:e[1].level+1,r=e[2].level==n?e[2].level:e[2].level+1;this.hallNeedMoneyLb.text=i[1][s].cost+"",this.lgfNeedMoneyLb.text=i[2][a].cost+"",this.assNeedMoneyLb.text=i[3][r].cost+"",this.hallBuildLevelLb.text=e[0].level+t.LanguageUtils.language_Common_1,this.liangongBuildLevelLb.text=e[1].level+t.LanguageUtils.language_Common_1,this.assemblyHallLb.text=e[2].level+t.LanguageUtils.language_Common_1,this.hallBuildpb.maximum=i[1][s].cost,this.hallBuildpb.value=this.guildInfo.guildMoney,this.lgfBuildpb.maximum=i[2][a].cost,this.lgfBuildpb.value=this.guildInfo.guildMoney,this.assemblyHallBuildpb.maximum=i[3][r].cost,this.assemblyHallBuildpb.value=this.guildInfo.guildMoney},i.prototype.onCloseMenu=function(){t.ViewManager.ins().close(t.GuildFunMenuView)},i.prototype.onChange=function(t){this.memberItemView&&this.memberItemView.setSelected(!0);var e=t.itemRenderer;this.memberItemView=e,this.memberItemView.setSelected(!1),this.memberInfo=this.memberItemView.memberInfo},i.prototype.updateDeclareWar=function(){for(var e=0;e<this.guildList.numChildren;e++){var i=this.guildList.getChildAt(e);t.GuildMgr.ins().declareWarGuildId==i._info.guildId&&i.updateDeclareWarState()}},i.prototype.updateGuildInfo=function(){this.showGuildInfo(),this.hallBuildpb.value=this.guildInfo.guildMoney,this.lgfBuildpb.value=this.guildInfo.guildMoney,this.assemblyHallBuildpb.value=this.guildInfo.guildMoney},i.prototype.updateGuildListData=function(){this.guildListData.source=t.GuildMgr.ins().getGuildListInfos(),this.guildList.itemRenderer=t.GuildItemView,this.guildList.dataProvider=this.guildListData
},i.prototype.updateApplyList=function(){this.guildAppList.source=t.GuildMgr.ins().getApplyList(),this.memberAppList.itemRenderer=t.GuildApplyItemView,this.memberAppList.dataProvider=this.guildAppList,this.guildInfo.guildJob==t.GuildLeaderType.smGuildCommon||this.guildInfo.guildJob==t.GuildLeaderType.smGuildElite?(this.allRejectBtn.visible=!1,this.allagreeBtn.visible=!1,this.setBtn.visible=!1,this.editGuildNoticeBtn.visible=!1):(this.guildInfo.guildJob==t.GuildLeaderType.smGuildTangzhu?this.editGuildNoticeBtn.visible=!1:this.editGuildNoticeBtn.visible=!0,this.allRejectBtn.visible=!0,this.allagreeBtn.visible=!0,this.setBtn.visible=!0)},i.prototype.updateLeftGuild=function(){t.GuildMgr.ins().leftGuildState&&(t.ViewManager.ins().close(this),t.ViewManager.ins().open(t.GuildNoGuildListView))},i.prototype.updateShopList=function(){2==t.ShopMgr.ins().shopType&&(this.guildShopList.dataProvider=new eui.ArrayCollection(t.ShopMgr.ins().getShopList()))},i.prototype.qqHallSendMsg=function(e){e.type==t.QQHallMsgType.msgInfo&&this.qqHallIsSend&&(0==e.isLegal?t.GuildMgr.ins().sendUpdateGuildNotice(e.Msg):t.UserTips.ins().showUITips("输入的文字不合法"),this.qqHallIsSend=!1)},i.prototype.yyHallSendMsg=function(e){e.msgType==t.YYHallMsgType.guildGongGao&&this.qqHallIsSend&&(t.GuildMgr.ins().sendUpdateGuildNotice(e.msg),this.qqHallIsSend=!1)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.exitGuildBtn:t.CautionView.show(t.LanguageUtils.language_Guild_Exit_txt,function(){t.GuildMgr.ins().sendLeftChange()},this);break;case this.editGuildNoticeBtn:if(this.guildInfo.guildJob==t.GuildLeaderType.smGuildLeader||this.guildInfo.guildJob==t.GuildLeaderType.smGuildAssistLeader){if(this.noiceLb.touchEnabled){this.editGuildNoticeBtn.label=t.LanguageUtils.language_Guild_Edit_Noti_txt;var i=this.noiceLb.text.trim();return i.length>255?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips144):(Main.gameParameter.pfID==t.PlatFormID.QQGame?(t.OtherMgr.ins().qqHallTextFiltering(i,t.QQHallMsgType.msgInfo),this.qqHallIsSend=!0):Main.gameParameter.pfID==t.PlatFormID.YY?(t.OtherMgr.ins().yyHallTextFiltering(i,t.YYHallMsgType.guildGongGao),this.qqHallIsSend=!0):Main.gameParameter.pfID==t.PlatFormID.HUYU37?(t.OtherMgr.ins().guildReport37(i,t.YYHallMsgType.guildGongGao,this.guildInfo.guildId,2),this.qqHallIsSend=!0):t.GuildMgr.ins().sendUpdateGuildNotice(i),void(this.noiceLb.touchEnabled=!1))}this.editGuildNoticeBtn.label=t.LanguageUtils.language_Guild_Save_Noti_txt,this.noiceLb.touchEnabled=!0,this.noiceLb.setFocus()}break;case this.mgrHallLvBtn:t.GuildMgr.ins().sendGuildUpdateBuild(1);break;case this.lgfLvBtn:t.GuildMgr.ins().sendGuildUpdateBuild(2);break;case this.assemblyHallLvBtn:t.GuildMgr.ins().sendGuildUpdateBuild(3);break;case this.optGuildBtn:if(!this.memberInfo)return;if(this.memberInfo.roleId==this.propSet.getACTOR_ID())return;t.ViewManager.ins().open(t.GuildFunMenuView,this.optGuildBtn.localToGlobal(0,0),this.memberInfo);break;case this.allRejectBtn:for(var n=t.GuildMgr.ins().getApplyList(),s=0;s<n.length;s++){var a=n[s];t.GuildMgr.ins().sendDealGuildApply(a.roleId,0)}break;case this.allagreeBtn:for(var r=t.GuildMgr.ins().getApplyList(),s=0;s<r.length;s++){var a=r[s];t.GuildMgr.ins().sendDealGuildApply(a.roleId,1)}break;case this.devoteBtn:t.ViewManager.ins().open(t.GuildDevoteView);break;case this.setBtn:t.ViewManager.ins().open(t.GuildSetView)}},i.prototype.onBarItemTap=function(e){this.setCrrentGp(e.itemIndex),0==e.itemIndex?(this.ruleBtn.ruleId=21,t.GuildMgr.ins().sendGuildInfo()):1==e.itemIndex?(t.GuildMgr.ins().sendGuildBuilds(),t.GuildMgr.ins().sendGuildLog()):2==e.itemIndex?t.GuildMgr.ins().sendGuildMember():3==e.itemIndex?t.GuildMgr.ins().sendGuildAppList():4==e.itemIndex?t.GuildMgr.ins().sendGuildList():5==e.itemIndex&&t.ShopMgr.ins().sendShopList(2,1),this.editGuildNoticeBtn.label=t.LanguageUtils.language_Guild_Edit_Noti_txt,this.noiceLb.touchEnabled=!1},i.prototype.showGuildInfo=function(){this.guildInfo=t.GuildMgr.ins().getMyGuildInfo(),null!=this.guildInfo&&(this.guildNameLb.text=this.guildInfo.guildName,this.guildPresident.text=this.guildInfo.guildLeader,this.guildLevelLb.text=this.guildInfo.guildLevel+t.LanguageUtils.language_Common_1,this.guildMoneyLb.text=this.guildInfo.guildMoney.toString(),this.guildMermerNumLb.text=this.guildInfo.memberNum+"/"+this.guildInfo.mebmerMaxNum,this.memberNumLb.text=this.guildInfo.memberNum+"/"+this.guildInfo.mebmerMaxNum,this.guildMyPostLb.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Guild_Jobs_txt[this.guildInfo.guildJob]),this.noiceLb.text=this.guildInfo.guildNotice,this.myPostLB.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Guild_Jobs_txt[this.guildInfo.guildJob]),this.guildInfo.guildJob==t.GuildLeaderType.smGuildLeader?(this.mgrHallLvBtn.visible=!0,this.lgfLvBtn.visible=!0,this.assemblyHallLvBtn.visible=!0,this.editGuildNoticeBtn.visible=!0):this.guildInfo.guildJob==t.GuildLeaderType.smGuildAssistLeader?(this.editGuildNoticeBtn.visible=!0,this.mgrHallLvBtn.visible=!0,this.lgfLvBtn.visible=!0,this.assemblyHallLvBtn.visible=!0):(this.editGuildNoticeBtn.visible=!1,this.mgrHallLvBtn.visible=!1,this.lgfLvBtn.visible=!1,this.assemblyHallLvBtn.visible=!1))},i.prototype.showGuildMemberList=function(){this.guildMemberList.source=t.GuildMgr.ins().getMembers(),this.memberList.itemRenderer=t.GuildMemberItemView,this.memberList.dataProvider=this.guildMemberList},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(e.prototype.close.call(this,i),this.$onClose(),this.onCloseMenu(),t.MouseScroller.unbind(this.scroller_guildList),t.MouseScroller.unbind(this.scroller_log),t.MouseScroller.unbind(this.scroller_member),t.MouseScroller.unbind(this.scroller_app),this.removeTouchEvent(this.exitGuildBtn,this.onClick),this.removeTouchEvent(this.editGuildNoticeBtn,this.onClick),this.removeTouchEvent(this.devoteBtn,this.onClick),this.removeTouchEvent(this.mgrHallLvBtn,this.onClick),this.removeTouchEvent(this.lgfLvBtn,this.onClick),this.removeTouchEvent(this.assemblyHallLvBtn,this.onClick),this.removeTouchEvent(this.optGuildBtn,this.onClick),this.removeTouchEvent(this.setBtn,this.onClick),this.removeTouchEvent(this.allagreeBtn,this.onClick),this.removeTouchEvent(this.allRejectBtn,this.onClick),this.optTab.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.memberList.removeEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),this.guildInfo=null,this.memberInfo=null,this.propSet=null,this.memberItemView=null,this.guildMemberList.removeAll(),this.guildAppList.removeAll(),this.guildListData.removeAll(),this.guildLogListData.removeAll();this.guildList.numChildren>0;){var s=this.guildList.getChildAt(0);s.destroy(),this.guildList.removeChild(s),s=null}for(;this.memberList.numChildren>0;){var s=this.memberList.getChildAt(0);s.destroy(),this.memberList.removeChild(s),s=null}for(;this.memberAppList.numChildren>0;){var s=this.memberAppList.getChildAt(0);s.destroy(),this.memberAppList.removeChild(s),s=null}for(var a=0;5>a;a++){for(;this["gp_"+a].numChildren>0;){var s=this["gp_"+a].getChildAt(0);s&&(s=null),this["gp_"+a].removeChildAt(0)}this["gp_"+a]=null}this.dragDropUI.destroy(),this.dragDropUI=null},i}(t.BaseEuiView);t.GuildInfoView=e,__reflect(e.prototype,"app.GuildInfoView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.myGuildInfo=t.GuildMgr.ins().getMyGuildInfo(),i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.setText(),this.addTouchEvent(this.fightBtn,this.onTap)},i.prototype.setText=function(){this.txt0.text=t.LanguageUtils.Language_Guild_ListItem_Txt0,this.txt1.text=t.LanguageUtils.Language_Guild_ListItem_Txt1,this.txt2.text=t.LanguageUtils.Language_Guild_ListItem_Txt3,this.fightBtn.label=t.LanguageUtils.Language_Guild_ListItem_Txt2,this.xuanzhanLb.text=t.LanguageUtils.Language_Guild_ListItem_Txt4},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.fightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},i.prototype.onTap=function(e){t.GuildMgr.ins().sendDeclareWar(this._info.guildId)},i.prototype.updateDeclareWarState=function(){this.fightBtn.visible=!1,this._info.xuanzhanState=1,this.xuanzhanLb.visible=!0},i.prototype.dataChanged=function(){if(this._info=this.data,this._info){var e=this.itemIndex+1;this.guildNameLb.text="<"+this._info.guildName+">",4>e?(this.rankLb.visible=!1,this.levelIcon.visible=!0,this.levelIcon.source="guild_pm_"+e):(this.rankLb.visible=!0,this.levelIcon.visible=!1,this.rankLb.text=e.toString()),this.guildLevelLb.text=this._info.guildLevel+t.LanguageUtils.language_Friend_Level_txt,this.roleLevelLb.text=this._info.addGuildLevel.toString(),this.guildMemberNumLb.text=this._info.guildNumber+"/"+this._info.guildMaxNum,this.rolePrensionLevelLb.text=this._info.guildLeader,1==this._info.xuanzhanState?(this.xuanzhanLb.visible=!0,this.fightBtn.visible=!1):(this.xuanzhanLb.visible=!1,this.fightBtn.visible=!0),this.myGuildInfo&&this.myGuildInfo.guildJob==t.GuildLeaderType.smGuildCommon&&(this.xuanzhanLb.visible=!1,this.fightBtn.visible=!1),this._info.guildId==(this.myGuildInfo&&this.myGuildInfo.guildId)&&(this.xuanzhanLb.visible=!1,this.fightBtn.visible=!1)}},i.prototype.destroy=function(){for(this.htmlText=null,this._info=null,this.myGuildInfo=null;this.gp.numChildren>0;){var t=this.gp.getChildAt(0);t&&(t=null),this.gp.removeChildAt(0)}this.gp=null},i}(t.BaseItemRender);t.GuildItemView=e,__reflect(e.prototype,"app.GuildItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.guildLog=this.data;var e=t.DateUtils.getFormatBySecond(this.guildLog.logTime,t.DateUtils.TIME_FORMAT_2),i=t.GlobalConfig.GuildLogConfig[this.guildLog.logType].logContent,n=t.GuildMgr.ins().getConverContent(this.guildLog.logType,this.guildLog);this.imgBg.source=this.guildLog.index%2==0?"bg_quyu_1":"bg_quyu_2",this.logInfoLb.textFlow=t.TextFlowMaker.generateTextFlow1(e+" "+this.getReplaceStr(i,n))},i.prototype.getReplaceStr=function(t,e){for(var i in e)t=t.replace(new RegExp("\\{\\{"+i+"\\}\\}","g"),e[i]);return t},i}(t.BaseItemRender);t.GuildLogItemView=e,__reflect(e.prototype,"app.GuildLogItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName=Main.gameParameter.pfID==t.PlatFormID.QQGame?"GuildQQMemberItemViewSkin":"GuildMemberItemViewSkin",i}return __extends(i,e),i.prototype.dataChanged=function(){if(null!=this.data){this.setText(),this.setSelected(!0);var e=this.data;if(this.memberInfo=e,this.roleNameLb.text=e.nickName,this.rolePrensionLb.text=t.LanguageUtils["language_Role_Sex_"+e.sex]+t.LanguageUtils["language_Role_Name_"+e.job],this.roleLevelLb.text=e.turn>=1?e.turn+t.LanguageUtils.language_Friend_Turn_txt+e.level+t.LanguageUtils.language_Friend_Level_txt:e.level+t.LanguageUtils.language_Friend_Level_txt,this.job.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Guild_Jobs_txt[e.post]),this.devoteLb.text=e.devote.toString(),this.onlineLb.textFlow=t.TextFlowMaker.generateTextFlow(1==e.online?t.LanguageUtils.language_Common_29:t.DateUtils.getFormatBySecond(e.loginTime,t.DateUtils.TIME_FORMAT_4)),Main.gameParameter.pfID==t.PlatFormID.QQGame){var i=e.superLv>>16,n=i>>8,s=255&i,a=65535&e.superLv;this.blueImg.visible=n&&a>0,this.blueImg.source=n&&a>0?1==n?"lz_pt"+(a+1):"lz_hh"+(a+1):"",this.blueYearImg.visible=1==s}}},i.prototype.setText=function(){this.txt0.text=t.LanguageUtils.Language_Guild_Member_Txt0,this.txt1.text=t.LanguageUtils.Language_Guild_Member_Txt1,this.txt2.text=t.LanguageUtils.Language_Guild_Member_Txt2},i.prototype.setSelected=function(t){this.bg.visible=t},i.prototype.destroy=function(){for(this.htmlText=null,this.memberInfo=null;this.gp.numChildren>0;){var t=this.gp.getChildAt(0);t&&(t=null),this.gp.removeChildAt(0)}this.gp=null},i}(t.BaseItemRender);t.GuildMemberItemView=e,__reflect(e.prototype,"app.GuildMemberItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.setText(),this.addTouchEvent(this.applyBtn,this.onTap)},i.prototype.setText=function(){this.txt0.text=t.LanguageUtils.Language_Guild_ListItem_Txt0,this.txt1.text=t.LanguageUtils.Language_Guild_ListItem_Txt1,this.txt2.text=t.LanguageUtils.Language_Guild_ListItem_Txt3},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.applyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},i.prototype.onTap=function(e){t.GuildMgr.ins().sendJoinGuildAppy(this._info.guildId)},i.prototype.updateApplyState=function(){this.applyBtn.enabled=!1,this.applyBtn.label=t.LanguageUtils.language_Guild_Apply_State_txt,this._info.isApply=!0},i.prototype.dataChanged=function(){this._info=this.data;var e=this.itemIndex+1;if(this._info){this.guildNameLb.text="<"+this._info.guildName+">",4>e?(this.rankLb.visible=!1,this.levelIcon.visible=!0,this.levelIcon.source="guild_pm_"+e):(this.rankLb.visible=!0,this.levelIcon.visible=!1,this.rankLb.text=e.toString()),this.applyBtn.enabled=!this._info.isApply,this._info.isApply?this.applyBtn.label=t.LanguageUtils.language_Guild_Apply_State_txt:this.applyBtn.label=t.LanguageUtils.language_Guild_Apply_State_txt1,this.guildLevelLb.text=this._info.guildLevel+t.LanguageUtils.language_Friend_Level_txt,this.guildLeaderNameLb.text=this._info.guildLeader,this.roleLevelLb.text=this._info.addGuildLevel.toString(),this.guildMemberNumLb.text=this._info.guildNumber+"/"+this._info.guildMaxNum;var i=0==this._info.guildDemand?t.LanguageUtils.language_Guild_Approve_txt:t.LanguageUtils.language_Guild_No_Approve_txt;this.isApproveLb.textFlow=t.TextFlowMaker.generateTextFlow(i)}},i}(t.BaseItemRender);t.GuildNoGuildItemView=e,__reflect(e.prototype,"app.GuildNoGuildItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.list=new eui.ArrayCollection,i.skinName="GuildListViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System29),this.setText()},i.prototype.setText=function(){this.creatGuildBtn.label=t.LanguageUtils.language_Guild_CreatGuild_txt,this.onekeyAppBtn.label=t.LanguageUtils.Language_Guild_OneKeyApply},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.MouseScroller.bind(this.scroller),t.GuildMgr.ins().sendGuildList(),this.addTouchEvent(this.creatGuildBtn,this.onClick),this.addTouchEvent(this.onekeyAppBtn,this.onClick),this.bindData(),this.observe(t.GuildMgr.ins().post_GuildList,this.updateList),this.observe(t.GuildMgr.ins().post_GuildJoinApply,this.updateGuildAppState),this.observe(t.GuildMgr.ins().post_ApproveSuccess,this.updateAppSuccess)},i.prototype.updateAppSuccess=function(){t.ViewManager.ins().close(this),t.ViewManager.ins().open(t.GuildInfoView)},i.prototype.updateGuildAppState=function(){return 1==t.GuildMgr.ins().JoinApplyState?void(t.ViewManager.ins().isShow(t.GuildInfoView)||(t.ViewManager.ins().open(t.GuildInfoView),t.ViewManager.ins().close(this))):void(0!=t.GuildMgr.ins().JoinApplyState&&(t.ViewManager.ins().isShow(t.GuildInfoView)||t.GuildMgr.ins().sendGuildList()))},i.prototype.updateList=function(){this.list.source=t.GuildMgr.ins().getGuildListInfos(),this.list.source.length<=0?this.noListTipsLb.visible=!0:this.noListTipsLb.visible=!1},i.prototype.bindData=function(){this.gList.itemRenderer=t.GuildNoGuildItemView,this.gList.dataProvider=this.list},i.prototype.onClick=function(e){if(e.target==this.creatGuildBtn)t.ViewManager.ins().open(t.CreatGuildView);else{var i=t.EntityMgr.ins().getPayer,n=i.propSet.getLevel(),s=this.list.length;if(n<t.GlobalConfig.GuildConfig.levelLimit){var a=t.LanguageUtils.language_Guild_Apply_Level_Fail_txt+t.GlobalConfig.GuildConfig.levelLimit+t.LanguageUtils.language_Guild_Apply_Level_Fail1_txt;return void t.UserTips.ins().showFightTips(a)}t.UserTips.ins().showFightTips(t.LanguageUtils.language_Guild_Apply_Fail_txt);for(var r=0;s>r;r++){var o=this.list.source[r];!o.isApply&&n>=o.addGuildLevel&&t.GuildMgr.ins().sendJoinGuildAppy(o.guildId,1)}}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.$onClose(),t.MouseScroller.unbind(this.scroller),this.removeTouchEvent(this.creatGuildBtn,this.onClick),this.removeTouchEvent(this.onekeyAppBtn,this.onClick),this.dragDropUI.destroy(),this.dragDropUI=null},i}(t.BaseEuiView);t.GuildNoGuildListView=e,__reflect(e.prototype,"app.GuildNoGuildListView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.redDot.visible=!1,this.labelDisplay.text=this.data.name,this.setRedDot()},e.prototype.setRedDot=function(){var t="GuildMgr.post_UpdateRedPos",e="GuildMgr.findPageIndex";this.redDot.param=this.itemIndex+1,this.redDot.updateShowFunctions=e,this.redDot.showMessages=t},e}(t.BaseItemRender);t.GuildOptTarBtnItemView=e,__reflect(e.prototype,"app.GuildOptTarBtnItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="GuildSetViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.setText()},i.prototype.setText=function(){this.btnConfirm.label=t.LanguageUtils.language_Common_59,this.btnCancel.label=t.LanguageUtils.language_Common_60;for(var e=0;5>e;e++)this["txt"+e].text=t.LanguageUtils["Language_Guild_Set_Txt"+e]},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_Guild_Set_Title_txt),this.addTouchEvent(this.btnConfirm,this.onClick),this.addTouchEvent(this.btnCancel,this.onClick),this.checkYes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCheck,this),this.checkNo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCheck,this),this.observe(t.GuildMgr.ins().post_SetAddMemberFlag,this.updateData),this.guildInfo=t.GuildMgr.ins().getMyGuildInfo(),this.checkYes.selected=0==this.guildInfo.guildSetIsApprove?!0:!1,this.checkNo.selected=1==this.guildInfo.guildSetIsApprove?!0:!1,this.levelTpText.text=this.guildInfo.guildSetLv.toString()},i.prototype.updateData=function(){t.GuildMgr.ins().getMyGuildInfo().guildSetIsApprove=t.GuildMgr.ins().guildSetData.isApp,t.GuildMgr.ins().getMyGuildInfo().guildSetLv=t.GuildMgr.ins().guildSetData.setLv,this.checkYes.selected=0==this.guildInfo.guildSetIsApprove?!0:!1,this.checkNo.selected=1==this.guildInfo.guildSetIsApprove?!0:!1,this.levelTpText.text=this.guildInfo.guildSetLv.toString(),t.ViewManager.ins().close(this)},i.prototype.clickCheck=function(t){t.target==this.checkYes?(this.checkYes.selected=!0,this.checkNo.selected=!1):(this.checkYes.selected=!1,this.checkNo.selected=!0)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.btnConfirm,this.onClick),this.removeTouchEvent(this.btnCancel,this.onClick),this.dragDropUI.destroy(),this.dragDropUI=null,this.guildInfo=null},i.prototype.onClick=function(e){if(e.currentTarget==this.btnConfirm){var i=this.checkYes.selected?0:1,n=parseInt(this.levelTpText.text);if(0>n||n>999)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips143);t.GuildMgr.ins().sendSetAddMemberFlag(i,n)}else t.ViewManager.ins().close(this)},i}(t.BaseEuiView);t.GuildSetView=e,__reflect(e.prototype,"app.GuildSetView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.batchbuy=0,i.item=new Object,i.hot=new t.ShopHotView,i.buyBtn=new t.ShopBuyBtnView,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.hot.x=this.hot.y=0,this.buyBtn.x=101,this.buyBtn.y=85,this.addChild(this.hot),this.addChild(this.buyBtn),this.addTouchEvent(this.buyBtn,this.onClick),this.addMouseMoveEvent(this.goodsItem,this.mouseMove),this.addMouseOverEvent(this.goodsItem,this.mouseMove)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(i&&this.itemId){var n=i.localToGlobal(),s=t.GlobalConfig.StdItems[this.itemId];if(this.item.type>0)return;if(s){var a=t.TipsType.TIPS_EQUIP;a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2})}n=null}i=null}},i.prototype.onClick=function(){var e=this;if(this.batchbuy){var i=""==this.numLb.text?-1:Number(this.numLb.text);return 0==i?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Shop_Limit_Txt):void t.ViewManager.ins().open(t.ShopBatchBuyView,this.itemData.shopId,2,1,i)}var n="|C:0xFFFFFF&T:"+t.LanguageUtils.language_Shop_Buy_Item_txt+"|C:0xDBC789&T:"+t.CommonUtils.overLength(this.item.price)+this.item.moneyType+"|C:0xFFFFFF&T:"+t.LanguageUtils.language_System45+"|C:0xDBC789&T:"+this.item.name+"*"+t.CommonUtils.overLength(this.item.count),s=t.TextFlowMaker.generateTextFlow(n);3==this.item.id||4==this.item.id?t.CautionView.show(s,function(){t.ShopMgr.ins().sendBuyShop(2,1,e.itemData.shopId,0)},this):t.ShopMgr.ins().sendBuyShop(2,1,this.itemData.shopId,0)},i.prototype.dataChanged=function(){if(this.itemData=this.data,null!=this.itemData){0==this.itemData.buyLimitNum?(this.numTxt.visible=this.numLb.visible=!1,this.numLb.text=""):(this.numTxt.text=t.LanguageUtils.language_Common_62,this.numTxt.visible=this.numLb.visible=!0,-1==this.itemData.buyLimitNum?this.numLb.text="":this.numLb.text=""+(this.itemData.buyLimitNum-this.itemData.buyCountNum));var e=t.ShopConfData.findShopCnf(this.itemData.shopId,this.itemData.shopType,this.itemData.shopSmallType);this.buyBtn.labelDisplay.text=e&&t.CommonUtils.overLength(e.price.count);var i=e&&{type:e.price.type,id:e.price.id};this.buyBtn.iconDisplay.source=e&&t.ShopConfData.convertItemIcon(i).icon.toString(),this.countLb.text=e&&t.CommonUtils.overLength(e.shop.count);var n=t.ShopConfData.findItemIcon(this.itemData.shopId,this.itemData.shopType,this.itemData.shopSmallType);if(this.item.moneyType=e&&t.GlobalConfig.NumericalIcon[e.price.type].name,this.item.id=e&&t.GlobalConfig.NumericalIcon[e.price.type].id,this.item.price=e&&e.price.count,this.item.count=e&&e.shop.count,this.item.type=e&&e.shop.type,this.batchbuy=e.batchbuy,0==this.itemData.buySell)this.hot.visible=!1;else if(this.hot.visible=!0,this.itemData.buySell=this.itemData.buySell<10?10:this.itemData.buySell,this.itemData.buySell%10==0||this.itemData.buySell>=100)this.hot.setState(!0),this.hot.setOddNum(this.itemData.buySell);else{this.hot.setState(!1);var s=this.itemData.buySell.toString().split("");this.hot.setDualNum(s[0],s[1])}n?(this.itemId=n.id,this.goodsItem.source=n.icon.toString(),this.shopItemNameLb.text=n.name,this.item.name=n.name):this.shopItemNameLb.text=t.LanguageUtils.language_Tips83,e=null,t.ObjectPool.wipe(i),n=null}},i.prototype.destroy=function(){for(this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.goodsItem.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.goodsItem.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.hot.destroy(),this.buyBtn.destroy(),this.data=null,this.itemData=null,this.buyBtn=null,t.ObjectPool.wipe(this.item),this.item=null,this.hot=null;this.gp.numChildren>0;){var e=this.gp.getChildAt(0);e&&(e=null),this.gp.removeChildAt(0)}this.gp=null},i}(t.BaseItemRender);t.GuildShopItemView=e,__reflect(e.prototype,"app.GuildShopItemView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.barText.text=this.data},e}(t.BaseItemRender);t.GuildTarBtnView=e,__reflect(e.prototype,"app.GuildTarBtnView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.icon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.setData=function(e,i,n,s){if(this.type=e,this.icon.source=1==e?"boss_gw_jb":"boss_gw_yb",t.GameSocket.IsCrossService?this.txtAdd.text="(剩余"+n+"次)":this.txtAdd.text="伤害+"+i+"%(剩余"+n+"次)",s.length>0){var a=s[0].type,r=s[0].id,o=s[0].count;if(0==a){var l=t.GlobalConfig.StdItems[r];this.money.source=l.icon+""}else{var h=t.GlobalConfig.NumericalIcon[r];this.money.source=h.icon+""}this.txtConsume.text=t.LanguageUtils.language_Omission_txt4+"：      "+o}},i.prototype.onClick=function(e){t.ActvityMgr.ins().send_25_1(t.ActvityMgr.ins().currentActId,t.Operate.cInspire,[this.type])},i.prototype.destroy=function(){this.icon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.icon.source="",this.money.source="",this.txtAdd.text="",this.txtConsume.text="",t.DisplayUtils.removeFromParent(this)},i}(eui.Component);t.InspireItemView=e,__reflect(e.prototype,"app.InspireItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="InspireSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.bottom=323,this.horizontalCenter="25"},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.observe(t.ActvityMgr.ins().post_25_6,this.refreshInspire);var n=t.ActvityMgr.ins().getActivityInfo(t.ActvityMgr.ins().currentActId);if(n&&n.info&&n.info.item)for(var s=n.info.item,a=0;a<s.length;a++)this.refreshInspire(n.info.item[a])},i.prototype.refreshInspire=function(e){if(e){var i=e.type,n=e.value,s=e.times,a=t.ActvityMgr.ins().getActivityConfigById(t.ActvityMgr.ins().currentActId),r=[];if(a){var o=a.inspire;if(o){var l=o[i-1].costs;for(var h in l)r.push(l[h])}}1==i?(this.inspire_1.visible=!0,this.inspire_1.setData(i,n,s,r)):(this.inspire_2.visible=!0,this.inspire_2.setData(i,n,s,r))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.inspire_1&&(this.inspire_1.destroy(),this.inspire_1=null),this.inspire_2&&(this.inspire_2.destroy(),this.inspire_2=null)},i}(t.BaseEuiView);t.InspireView=e,__reflect(e.prototype,"app.InspireView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function t(t){this.type=t.readByte(),this.pos=t.readInt(),this.id=t.readInt()}return t}();t.KeyUiData=e,__reflect(e.prototype,"app.KeyUiData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.keyInfo={},i.setUpInfo={},i._cautionObj={},i.sysId=t.PackageID.Setting,i.regNetMsg(1,i.post_17_1),i.regNetMsg(2,i.post_17_2),i.regNetMsg(3,i.post_17_3),i.regNetMsg(4,i.post_17_4),i.regNetMsg(5,i.post_17_5),i.regNetMsg(7,i.post_17_7),i.regNetMsg(11,i.post_17_11),i.regNetMsg(12,i.post_17_12),i}return __extends(i,e),i.prototype.getCautionValue=function(t){return this._cautionObj[t]},i.prototype.setCautionValue=function(t,e){this._cautionObj[t]=e},i.ins=function(){return e.ins.call(this)},i.prototype.send_17_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.post_17_1=function(e){var i=e.readInt();this.keyInfo={};for(var n=0;i>n;n++){var s=new t.KeyUiData(e);this.keyInfo[s.pos]=s}},i.prototype.getSkillKey=function(t){for(var e in this.keyInfo)if(this.keyInfo[e].id==t)return+e;return-1},i.prototype.send_17_2=function(t,e,i,n){var s=this.getBytes(2);s.writeInt(t),s.writeInt(e),s.writeInt(i),s.writeInt(n),this.sendToServer(s)},i.prototype.post_17_2=function(e){if(!gamelib.DeviceUtils.IsMobile)for(var i=e.readInt(),n=0;i>n;n++){var s=new t.KeyUiData(e);if(this.keyInfo&&this.keyInfo[s.pos]&&0==this.keyInfo[s.pos].id&&0==this.keyInfo[s.pos].type&&1==s.type){var a=t.EntityMgr.ins().getPayer.getUserSkill(s.id);a||(t.EventManager.ins().sendEvent(t.MainEvent.PLAY_EFF_JIJN_END),t.DropMgr.ins().post_skillPushImage(s))}this.keyInfo[s.pos]=s}},i.prototype.post_17_3=function(t){this.setUpInfo={};this.getBasic(t),this.getSystem(t),this.getDrugs(t),this.getProtection(t),this.getAi(t),this.getRecycle(t),this.getItems(t),this.initSeting()},i.prototype.initSeting=function(){t.EntityMgr.ins().updateMonsterName(),t.SoundManager.ins().setEffectOn(i.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Sound)),t.SoundManager.ins().setBgOn(i.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_BgSound))},i.prototype.post_17_5=function(e){for(var i=e.readInt(),n=0;i>n;n++){var s=new t.KeyUiData(e);this.keyInfo[s.pos]=s}},i.prototype.send_17_4=function(t,e,i){var n=this.getBytes(4);n.writeByte(t),n.writeShort(e),n.writeByte(i),this.sendToServer(n)},i.prototype.send_17_5=function(t,e,i){var n=this.getBytes(5);n.writeByte(e),n.writeInt(i),this.sendToServer(n)},i.prototype.send_17_6=function(t){var e=this.getBytes(6);e.writeByte(t),this.sendToServer(e)},i.prototype.send_17_7=function(t,e){var i=this.getBytes(7);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},i.prototype.post_17_4=function(e){var i=e.readByte();switch(i){case t.SetUpTypeTEnum.SetUp_Basics:delete this.setUpInfo[t.SetUpTypeTEnum.SetUp_Basics],this.getBasic(e);break;case t.SetUpTypeTEnum.SetUp_System:delete this.setUpInfo[t.SetUpTypeTEnum.SetUp_System],this.getSystem(e);break;case t.SetUpTypeTEnum.SetUp_Drugs:delete this.setUpInfo[t.SetUpTypeTEnum.SetUp_Drugs],this.getDrugs(e);break;case t.SetUpTypeTEnum.SetUp_Protection:delete this.setUpInfo[t.SetUpTypeTEnum.SetUp_Protection],this.getProtection(e);break;case t.SetUpTypeTEnum.SetUp_AI:delete this.setUpInfo[t.SetUpTypeTEnum.SetUp_AI],this.getAi(e);break;case t.SetUpTypeTEnum.SetUp_Items:delete this.setUpInfo[t.SetUpTypeTEnum.SetUp_Items],this.getItems(e)}console.log("设置重置")},i.prototype.post_17_7=function(t){console.log("设置全部")},i.prototype.getBasic=function(e){var i={},n=e.readInt();i[t.SetUpEnum.SetUp_Type_ShowHuman]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_ShowHuman),i[t.SetUpEnum.SetUp_Type_ShowMonster]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_ShowMonster),i[t.SetUpEnum.SetUp_Type_Bit3]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_Bit3),i[t.SetUpEnum.SetUp_Type_Network]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_Network),i[t.SetUpEnum.SetUp_Type_Recommend]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_Recommend),i[t.SetUpEnum.SetUp_Type_Chase]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_Chase),i[t.SetUpEnum.SetUp_Type_Skill1]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_Skill1),i[t.SetUpEnum.SetUp_Type_Skill2]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_Skill2),i[t.SetUpEnum.SetUp_Type_Skill3]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_Skill3),i[t.SetUpEnum.SetUp_Type_autoRecycle]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_autoRecycle),i[t.SetUpEnum.SetUp_Type_autoTask]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_autoTask),i[t.SetUpEnum.SetUp_Type_counterAtk]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_counterAtk),i[t.SetUpEnum.SetUp_Type_shieldPet]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_shieldPet),this.setUpInfo[t.SetUpTypeTEnum.SetUp_Basics]=i,t.EntityMgr.ins().updateTitle()
},i.prototype.getSystem=function(e){var n=e.readShort(),s={};s[t.SetUpEnum.SetUp_Type_Sound]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_Sound),s[t.SetUpEnum.SetUp_Type_BgSound]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_BgSound),s[t.SetUpEnum.SetUp_Type_HighQuality]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_HighQuality),s[t.SetUpEnum.SetUp_Type_LowQuality]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_LowQuality),s[t.SetUpEnum.SetUp_Type_SwimShow]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_SwimShow),s[t.SetUpEnum.SetUp_Type_scale1]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_scale1),s[t.SetUpEnum.SetUp_Type_scale2]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_scale2),s[t.SetUpEnum.SetUp_Type_scale3]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_scale3),s[t.SetUpEnum.SetUp_Type_closeEff]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_closeEff),s[t.SetUpEnum.SetUp_Type_Rocker]=t.MathUtils.getValueAtBit(n,t.SetUpEnum.SetUp_Type_Rocker),this.setUpInfo[t.SetUpTypeTEnum.SetUp_System]=s;var a=s[t.SetUpEnum.SetUp_Type_HighQuality]?60:s[t.SetUpEnum.SetUp_Type_LowQuality]?30:s[t.SetUpEnum.SetUp_Type_SwimShow]?10:60;t.StageUtils.ins().setFrameRate(a);var r=1;i.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale1)&&(r=1),i.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale2)&&(r=1.25),i.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale3)&&(r=1.5),t.StageUtils.ins().setScale(r);var o=t.ViewManager.gamescene;o&&t.ViewManager.gamescene.updateScale(),o=null,this.updateRocker()},i.prototype.updateRocker=function(){if(gamelib.DeviceUtils.IsMobile){var e=this.getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Rocker);e?(t.ViewManager.ins().close("app.RockerView"),t.ViewManager.ins().isShow("app.Rocker2View")||t.ViewManager.ins().open("app.Rocker2View")):(t.ViewManager.ins().close("app.Rocker2View"),t.ViewManager.ins().isShow("app.RockerView")||t.ViewManager.ins().open("app.RockerView"))}},i.prototype.getDrugs=function(e){var i=e.readShort(),n={};n[t.SetUpEnum.SetUp_Drugs_Per]=t.MathUtils.getValueAtBit(i,1),n[t.SetUpEnum.SetUp_Drugs_Blood]=t.MathUtils.getValueAtBit(i,2),n[t.SetUpEnum.SetUp_Drugs_COM_Red]=t.MathUtils.getValueAtBit(i,3),n[t.SetUpEnum.SetUp_Drugs_COM_BLUE]=t.MathUtils.getValueAtBit(i,4),n[t.SetUpEnum.SetUp_Drugs_MOMENT_RED]=t.MathUtils.getValueAtBit(i,5),n[t.SetUpEnum.SetUp_Drugs_MOMENT_BLUE]=t.MathUtils.getValueAtBit(i,6),n[t.SetUpEnum.SetUp_Drugs_Select_LiaoShangYao]=t.MathUtils.getValueAtBit(i,7),0==n[t.SetUpEnum.SetUp_Drugs_Per]&&0==n[t.SetUpEnum.SetUp_Drugs_Blood]&&(n[t.SetUpEnum.SetUp_Drugs_Per]=1);var s=e.readByte();n[t.SetUpEnum.SetUp_Drugs_Red]=s;var a=e.readByte();n[t.SetUpEnum.SetUp_Drugs_Blue]=a;var r=e.readByte();n[t.SetUpEnum.SetUp_Drugs_Wink_Red]=r;var o=e.readByte();n[t.SetUpEnum.SetUp_Drugs_Wink_Blue]=o;var l=e.readByte();n[t.SetUpEnum.SetUp_Drugs_LiaoShangYao]=l;var h=e.readInt();n[t.SetUpEnum.SetUp_Drugs_HP]=h;var p=e.readInt();p=300>p?300:p,n[t.SetUpEnum.SetUp_Drugs_HP_TIME]=p;var u=e.readInt();n[t.SetUpEnum.SetUp_Drugs_MP]=u;var c=e.readInt();c=300>c?300:c,n[t.SetUpEnum.SetUp_Drugs_MP_TIME]=c;var g=e.readInt();n[t.SetUpEnum.SetUp_Drugs_MOMENT_HP]=g;var d=e.readInt();d=300>d?300:d,n[t.SetUpEnum.SetUp_Drugs_MOMENT_HP_TIME]=d;var m=e.readInt();n[t.SetUpEnum.SetUp_Drugs_MOMENT_MP]=m;var f=e.readInt();f=300>f?300:f,n[t.SetUpEnum.SetUp_Drugs_MOMENT_MP_TIME]=f;var v=e.readInt();n[t.SetUpEnum.SetUp_Drugs_LiaoShangYaoHp]=v;var _=e.readInt();_=300>_?300:_,n[t.SetUpEnum.SetUp_Drugs_LiaoShangYaoTime]=_,this.setUpInfo[t.SetUpTypeTEnum.SetUp_Drugs]=n},i.prototype.getProtection=function(e){var i={},n=e.readInt();i[t.SetUpEnum.SetUp_Hp1Val]=n;var s=e.readInt();i[t.SetUpEnum.SetUp_Hp1Item]=s;var a=e.readInt();i[t.SetUpEnum.SetUp_Hp2Val]=a;var r=e.readInt();i[t.SetUpEnum.SetUp_Hp2Item]=r;var o=e.readShort();i[t.SetUpEnum.SetUp_Hp1State]=t.MathUtils.getValueAtBit(o,1),i[t.SetUpEnum.SetUp_Hp2State]=t.MathUtils.getValueAtBit(o,2),this.setUpInfo[t.SetUpTypeTEnum.SetUp_Protection]=i},i.prototype.getAi=function(e){var i={},n=e.readShort();i[t.SetUpEnum.SetUp_AI_MaxHpMonster1]=t.MathUtils.getValueAtBit(n,1),i[t.SetUpEnum.SetUp_AI_DotPickItem1]=t.MathUtils.getValueAtBit(n,2),i[t.SetUpEnum.SetUp_AI_PickItem1]=t.MathUtils.getValueAtBit(n,3),i[t.SetUpEnum.SetUp_AI_Huofu]=t.MathUtils.getValueAtBit(n,4),i[t.SetUpEnum.SetUp_AI_ZhaoHuanShenShou]=t.MathUtils.getValueAtBit(n,5),i[t.SetUpEnum.SetUp_AI_HpMin]=t.MathUtils.getValueAtBit(n,6),i[t.SetUpEnum.SetUp_AI_Hemophagy]=t.MathUtils.getValueAtBit(n,7),i[t.SetUpEnum.SetUp_AI_Thunderbolt]=t.MathUtils.getValueAtBit(n,8),i[t.SetUpEnum.SetUp_AI_Poison]=t.MathUtils.getValueAtBit(n,9),i[t.SetUpEnum.SetUp_AI_iceBluster]=t.MathUtils.getValueAtBit(n,10),i[t.SetUpEnum.SetUp_AI_isRainFire]=t.MathUtils.getValueAtBit(n,11),i[t.SetUpEnum.SetUp_AI_ltZhanShi]=t.MathUtils.getValueAtBit(n,12),i[t.SetUpEnum.SetUp_AI_ltFashi]=t.MathUtils.getValueAtBit(n,13),i[t.SetUpEnum.SetUp_AI_ltDaoShi]=t.MathUtils.getValueAtBit(n,14);var s=e.readByte();i[t.SetUpEnum.SetUp_AI_skillID]=s;var a=e.readByte();i[t.SetUpEnum.SetUp_AI_pet]=a;var r=e.readByte();i[t.SetUpEnum.SetUp_AI_hpLess]=r;var o=e.readByte();i[t.SetUpEnum.SetUp_AI_hpLessSkill]=o,this.setUpInfo[t.SetUpTypeTEnum.SetUp_AI]=i},i.prototype.getRecycle=function(e){for(var i,n={},s=[],a=0;4>a;a++)i=e.readInt(),s.push(i);var r=t.GlobalConfig.RecyclingSettingConfig;for(var a in r){var o=r[a];for(var l in o)n[o[l].optionid-1]=t.MathUtils.getValueBitByArr(s,o[l].optionid-1)}this.setUpInfo[t.SetUpTypeTEnum.SetUp_Recycle]=n},i.prototype.getItems=function(e){for(var i,n=e.readByte(),s=[],a=0;n>a;a++)i=e.readInt(),s.push(i);var r={};r[t.SetUpEnum.SetUp_Item_All_Pick]=t.MathUtils.getValueSAtBit(s,1),r[t.SetUpEnum.SetUp_Item_All_Mark]=t.MathUtils.getValueSAtBit(s,2);var o=t.GlobalConfig.ItemSettingConfig;if(o){var l=0,h=[],p=void 0,u=void 0,c=void 0;for(var g in o)p=o[g],u=new t.SetUpListData,c=t.GlobalConfig.StdItems[p.itemid],c?u.itemName=c.name:65533==p.itemid?u.itemName=t.LanguageUtils.language_CURRENCY_NAME_18:65534==p.itemid?u.itemName=t.LanguageUtils.language_CURRENCY_NAME_1:65535==p.itemid&&(u.itemName=t.LanguageUtils.language_CURRENCY_NAME_2),u.itemId=p.itemid,u.idx=p.idx,u.openDay=p.openday,u.type=p.type,u.isSelected1=1==p.value1?1:0,u.isSelected2=1==p.value2?1:0,h.push(u),l++;for(var d=1,m=1,f=void 0,a=0;l>a;a++)f=h[a].idx,h[a].isSelected1=t.MathUtils.getValueSAtBit(s,2*(f-1)+3,function(t){0==t&&1==d&&(d=t)},function(t){0==t&&1==m&&(m=t)}),h[a].isSelected2=t.MathUtils.getValueSAtBit(s,2*(f-1)+4,function(t){0==t&&1==d&&(d=t)},function(t){0==t&&1==m&&(m=t)}),h[a].pos=[2*(f-1)+3,2*(f-1)+4],r[2*(f-1)+3]=h[a],r[2*(f-1)+4]=h[a];r[t.SetUpEnum.SetUp_Item_Pick]=d,r[t.SetUpEnum.SetUp_Item_Mark]=m,this.setUpInfo[t.SetUpTypeTEnum.SetUp_Items]=r,t.ModelManager.ins().setUpModel.setItemData=h}},i.prototype.getcheckBox=function(t,e){if(!this.setUpInfo[t])return 0;var i=this.setUpInfo[t][e];return i},i.prototype.setcheckBox=function(t,e,i){this.setUpInfo[t]&&(this.setUpInfo[t][e]=i)},i.prototype.postSetWIFI=function(){},i.prototype.getDataById=function(e){var i=this.setUpInfo[t.SetUpTypeTEnum.SetUp_Items];if(i){var n=void 0;for(var s in i)if(i[s]instanceof t.SetUpListData&&(n=i[s],e==n.itemId))return n}return null},i.prototype.send_17_3=function(t){var e=this.getBytes(3);e.writeInt(t),this.sendToServer(e)},i.prototype.getSkillPosByID=function(t){for(var e=0;12>e;e++)if(this.keyInfo[e]&&0!=this.keyInfo[e].id&&1==this.keyInfo[e].type&&this.keyInfo[e].id==t)return this.keyInfo[e].pos;return-1},i.prototype.post_counterAtk=function(){},i.prototype.send_17_11=function(){var t=this.getBytes(11);this.sendToServer(t)},i.prototype.post_17_11=function(t){this.post_17_1(t)},i.prototype.send_17_12=function(t,e,i,n){var s=this.getBytes(12);s.writeInt(t),s.writeInt(e),s.writeInt(i),s.writeInt(n),this.sendToServer(s)},i.prototype.post_17_12=function(e){if(gamelib.DeviceUtils.IsMobile)for(var i=e.readInt(),n=0;i>n;n++){var s=new t.KeyUiData(e);this.keyInfo&&this.keyInfo[s.pos]&&0==this.keyInfo[s.pos].id&&0==this.keyInfo[s.pos].type&&1==s.type,this.keyInfo[s.pos]=s}},i.prototype.send_17_13=function(t){var e=this.getBytes(13);e.writeInt(t),this.sendToServer(e)},i.CloseEff=function(){var e=i.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_closeEff);return e?!0:22==t.GameMap.fubenID&&t.SkillEffPlayer.bottomLayer.$children.length>5?!0:!1},i.COMPOSE=1,i}(t.BaseSystem);t.SettingMgr=e,__reflect(e.prototype,"app.SettingMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.sysId=t.PackageID.kuafu,i.regNetMsg(1,i.post_g_33_1),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.s_33_1=function(){t.ViewManager.ins().open(t.KFView);var e=this.getBytes(1);this.sendToServer(e)},Object.defineProperty(i.prototype,"kfRoleId",{get:function(){return this._kfRoleId},enumerable:!0,configurable:!0}),i.prototype.post_g_33_1=function(e){var i=e.readByte();if(i)t.ViewManager.ins().close(t.KFView),t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips138);else{var n=e.readString(),s=e.readUnsignedInt(),a=e.readUnsignedInt();this._kfRoleId=a;var r=e.readUnsignedInt();t.GameSocket.ins().KFLogin(a,s,n,r,s)}},i}(t.BaseSystem);t.KFManager=e,__reflect(e.prototype,"app.KFManager")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.percentHeight=100,t.percentWidth=100,t.skinName="KuanFuView",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.doubleRoleExp.labelFunction=function(e,i){return t.LanguageUtils.language_Common_231+(e/i*100|0)+"%"},this.doubleRoleExp.value=10,egret.Tween.get(this.doubleRoleExp).to({value:90},3e4).call(function(){t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips138),t.GameSocket.ins().onClose()})},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),egret.Tween.removeTweens(this.doubleRoleExp)},i}(t.BaseEuiView);t.KFView=e,__reflect(e.prototype,"app.KFView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Rocker)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.sysId=t.PackageID.Mail,i.regNetMsg(1,i.post_50_1),i.regNetMsg(2,i.post_50_2),i.regNetMsg(3,i.post_50_3),i.regNetMsg(4,i.post_50_4),i.regNetMsg(6,i.post_50_6),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_50_1=function(t,e){var i=this.getBytes(1);i.writeByte(t),i.writeDouble(e),this.sendToServer(i)},i.prototype.postMailStateChange=function(){},i.prototype.send_50_2=function(t){var e=this.getBytes(2);e.writeDouble(t),this.sendToServer(e)},i.prototype.send_50_3=function(t){var e=this.getBytes(3);e.writeDouble(t),this.sendToServer(e)},i.prototype.send_50_4=function(){var t=this.getBytes(4);this.sendToServer(t)},i.prototype.send_50_5=function(){var t=this.getBytes(5);this.sendToServer(t)},i.prototype.post_50_1=function(e){var i,n,s,a,r,o,l,h,p,u,c,g,d=e.readByte(),m=e.readByte();for(0==d&&t.ModelManager.ins().mailModel.deleteDic(),c=0;m>c;c++){g=new t.MailDataVo,i=e.readDouble(),n=e.readUnsignedInt(),s=e.readString(),a=e.readString(),r=e.readUnsignedInt(),o=e.readByte(),l=e.readByte(),g.id=i,g.resource=n,g.title=s,g.content=a,g.status=o,g.time=r,p=[];for(var f=0;l>f;f++)h=e.readByte(),u=new t.userItem(e),p.push({type:h,item:u});g.items=p,t.ModelManager.ins().mailModel.addDic(i,g)}},i.prototype.filterMail=function(e){var i=Math.floor(t.GlobalData.serverTime/1e3);return i-e.time>=604800&&0!=e.status&&0==e.items.length?0:1},i.prototype.post_50_3=function(e){for(var i,n=e.readUnsignedShort(),s=[],a=0;n>a;a++)i=e.readDouble(),s.push(i);t.ModelManager.ins().mailModel.deletedIds=s},i.prototype.post_50_2=function(e){var i,n,s=[],a=e.readDouble(),r=e.readUnsignedInt(),o=e.readString(),l=e.readString(),h=e.readUnsignedInt(),p=e.readByte(),u=e.readByte(),c=new t.MailDataVo;c.id=a,c.resource=r,c.title=o,c.content=l,c.status=p,c.time=h;for(var g=0;u>g;g++)i=e.readByte(),n=new t.userItem(e),s.push({type:i,item:n});c.items=s,t.ModelManager.ins().mailModel.addMail=c,t.ModelManager.ins().mailModel.addDic(a,c)},i.prototype.post_50_4=function(e){for(var i,n=e.readUnsignedShort(),s=[],a=0;n>a;a++)i=e.readDouble(),s.push(i);t.ModelManager.ins().mailModel.attachIds=s},i.prototype.send_50_6=function(t){var e=this.getBytes(6);e.writeByte(t.length);for(var i=0;i<t.length;i++)e.writeDouble(t[i]);this.sendToServer(e)},i.prototype.post_50_6=function(e){for(var i,n=e.readByte(),s=[],a=0;n>a;a++)i=e.readDouble(),s.push(i);t.ModelManager.ins().mailModel.deletedIds=s},i.prototype.post_Mail_Update=function(){},i.prototype.isHaveRed=function(){return t.ModelManager.ins().mailModel.isHaveRed()},i.prototype.isHaveRed2=function(e){return t.ModelManager.ins().mailModel.isHaveRed2(e)},i.prototype.getState=function(t){return t},i.prototype.getBagRed=function(){return t.ModelManager.ins().mailModel.isHaveRed()},i}(t.BaseSystem);t.MailMgr=e,__reflect(e.prototype,"app.MailMgr")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.dicMail={},e.deleteIds=[],e.getAttachIds=[],e.noRead=0,e.canGet=0,e.complete=0,e}return __extends(e,t),e.prototype.clearMailGetData=function(){var t;for(var e in this.dicMail)t=this.dicMail[e],t.items=[]},e.prototype.deleteDic=function(){for(var t in this.dicMail)delete this.dicMail[t]},e.prototype.addDic=function(t,e){this.dicMail[t]=e,0==e.status&&this.noRead++,3!=e.status&&e.items.length>0&&this.canGet++},Object.defineProperty(e.prototype,"deletedIds",{set:function(t){this.deleteIds=[],t&&t.length>0&&(this.deleteIds=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attachIds",{set:function(t){if(this.deleteIds=[],t&&t.length>0){this.getAttachIds=t;for(var e=0;e<t.length;e++)this.canGet>0&&this.canGet--}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addMail",{set:function(t){this.newMail=t},enumerable:!0,configurable:!0}),e.prototype.getDataByIdx=function(t){var e=[];for(var i in this.dicMail)e.push(this.dicMail[i]);return e.sort(this.mysort),e[t]},e.prototype.mysort=function(t,e){return t.time>e.time?-1:t.time<e.time?1:0},e.prototype.getNoReadNum=function(){var t=0;for(var e in this.dicMail)0==this.dicMail[e].status&&t++;return t},e.prototype.getCanGetNum=function(){var t=0;for(var e in this.dicMail)this.dicMail[e].items&&this.dicMail[e].items.length>0&&t++;return t},e.prototype.getComNum=function(){var t=0;for(var e in this.dicMail)this.dicMail[e].items&&0==this.dicMail[e].items.length&&t++;return t},e.prototype.isHaveRed=function(){var t;for(var e in this.dicMail)if(t=this.dicMail[e],t&&0==t.status)return 1;return 0},e.prototype.isHaveRed2=function(t){var e;for(var i in this.dicMail)if(e=this.dicMail[i],e&&t==e.id&&0==e.status)return 1;return 0},e}(egret.EventDispatcher);t.MailData=e,__reflect(e.prototype,"app.MailData");var i=function(){function t(){}return t}();t.MailDataVo=i,__reflect(i.prototype,"app.MailDataVo");var n=function(){function t(){}return t}();t.IconCount=n,__reflect(n.prototype,"app.IconCount")}(app||(app={}));var app;!function(t){var e=function(e){function i(t,i){var n=e.call(this)||this;return n._container=t,n._callFunc=i,n.init(),n}return __extends(i,e),i.prototype.init=function(){this._nameTf=this._container.getChildByName("txt_name"),this._timeTf=this._container.getChildByName("txt_time"),this._descTf=this._container.getChildByName("txt_desc"),this._sendPlayer=this._container.getChildByName("txt_sendName"),this._itemContainer=this._container.getChildByName("item_group"),this._itemArr=[];for(var t,e=0;6>e;e++)t=this._itemContainer.getChildByName("item_"+e),this._itemArr.push(t)},i.prototype.setData=function(e){void 0===e&&(e=0);var i;if(this.deleteItem(),i=e>0?t.ModelManager.ins().mailModel.dicMail[e]:t.ModelManager.ins().mailModel.getDataByIdx(0)){this._nameTf.text=t.LanguageUtils.language_Omission_txt105+"："+i.title;var n=t.LanguageUtils.language_Tips115+t.DateUtils.formatFullTime(1e3*i.time,1);this._timeTf.textFlow=t.TextFlowMaker.generateTextFlow(n),this._descTf.textFlow=t.TextFlowMaker.generateTextFlow(i.content);var s=0;i.items&&i.items.length>0&&(s=i.items.length);for(var a=void 0,r=void 0,o=0;s>o;o++)if(a=i.items[o].type,0==a)r=t.GlobalConfig.StdItems[i.items[o].item.wItemId],r&&this._itemArr[o].setItem(null,r.showQuality,r.icon,2,r,i.items[o].item.btCount);else{var l=t.GlobalConfig.NumericalIcon[i.items[o].item.wItemId];l&&this._itemArr[o].setItem(i.items[o].item,0,l.icon,3,null,i.items[o].item.btCount)}this._nameTf.visible=!0,this._timeTf.visible=!0,this._sendPlayer.visible=!0,this._descTf.visible=!0,this._itemContainer.visible=!0}else this._nameTf.visible=!1,this._timeTf.visible=!1,this._sendPlayer.visible=!1,this._descTf.visible=!1,this._itemContainer.visible=!0,this._callFunc&&this._callFunc()},i.prototype.deleteItem=function(){for(var t=0;6>t;t++)this._itemArr[t].setItem()},i.prototype.destroy=function(){for(var e=0;6>e;e++)this._itemArr[e].destroy(),this._itemArr[e]=null;this._itemArr.length=0,this._itemArr=null,this._timeTf.textFlow=null,this._descTf.textFlow=null,this._callFunc&&(this._callFunc=null),t.DisplayUtils.removeFromParent(this._container)},i}(egret.EventDispatcher);t.MailContent=e,__reflect(e.prototype,"app.MailContent")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.selectedUrl="mail_tab_2",t.noSelectedUrl="mail_tab_1",t.readIcon="icon_bangding",t.redIcon="icon_bangding",t.skinName="MailItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=this.data,i=1==e.isSelected?this.selectedUrl:this.noSelectedUrl;this.bg.source=i,this.img_icon.visible=e.items&&e.items.length>0,this.redImage.visible=0==e.status,this.mailState.text=0==e.status?t.LanguageUtils.language_Omission_txt106:t.LanguageUtils.language_Omission_txt107,this.mailState.textColor=0==e.status?14724725:15064527;var n=t.LanguageUtils.language_Omission_txt25+t.DateUtils.getFormatBySecond(e.time,t.DateUtils.TIME_FORMAT_16);this.txt_name.textFlow=t.TextFlowMaker.generateTextFlow(n),this.txt_desc.text=e.title}},i.prototype.destroy=function(){this.txt_name.textFlow=null,this.txt_desc.text="",this.bg.source="",this.img_icon.source="",this.img_com.source="",this.redImage.source="",t.DisplayUtils.removeFromParent(this)},i}(eui.ItemRenderer);t.MailItemView=e,__reflect(e.prototype,"app.MailItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._itemArrayCollection=null,i.preIndex=0,i._container=t,t?(i._itemArrayCollection=new eui.ArrayCollection,i.init(),i):i}return __extends(i,e),i.prototype.init=function(){this.dataAry=[],this._scrollViewContainer=new t.ScrollViewContainer(this._container),this._scrollViewContainer.callFunc([null,null,this.onItemTap],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.itemRenderer=t.MailItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection},i.prototype.onItemTap=function(e,i,n,s){this.preIndex!=i&&(this.id=s.data.id,this.dataAry[this.preIndex]&&this.dataAry[this.preIndex].isSelected&&(this.dataAry[this.preIndex].isSelected=0),this.id&&t.EventManager.ins().sendEvent(t.CompEvent.MAIL_SELECTED_INDEX,[{index:i,id:this.id}]))},i.prototype.setData=function(e,i){if(void 0===e&&(e=0),void 0===i&&(i=null),this.dataAry?this.dataAry.length=0:this.dataAry=[],this.dataAry=i,0!=e&&this.dataAry.length>0)for(var n=this.dataAry[0],s=0;s<this.dataAry.length;s++)n=this.dataAry[s],0==s?(n.isSelected=1,0==n.status&&(n.status=1,t.ModelManager.ins().mailModel.noRead>0&&t.ModelManager.ins().mailModel.noRead--,t.MailMgr.ins().send_50_1(1,n.id),t.MailMgr.ins().postMailStateChange(),t.MailMgr.ins().post_Mail_Update())):n.isSelected=0;this._itemArrayCollection.replaceAll(this.dataAry)},i.prototype.refreshData=function(t){var e=this.dataAry.length;if(e>0){for(var i=0;e>i;i++){var n=this.dataAry[i];n.isSelected=i==t}this._itemArrayCollection.replaceAll(this.dataAry),this.preIndex=t}},i.prototype.resetData=function(){this.dataAry.length=0;for(var e in t.ModelManager.ins().mailModel.dicMail)this.dataAry.push(t.ModelManager.ins().mailModel.dicMail[e]);this.dataAry.sort(t.ModelManager.ins().mailModel.mysort);for(var i=this.dataAry.length,n=0;i>n;n++)if(1==this.dataAry[n].isSelected){this.preIndex=n;break}for(var n=0;i>n;n++)1==this.dataAry[n].isSelected&&(this.dataAry[n].isSelected=0);this.dataAry[0]&&0==this.dataAry[0].isSelected&&(this.dataAry[0].isSelected=1),this.dataAry.length>0?this._itemArrayCollection.replaceAll(this.dataAry):this._itemArrayCollection.source=this.dataAry,this.dataAry[0]&&t.EventManager.ins().sendEvent(t.CompEvent.MAIL_SELECTED_INDEX,[{index:0,id:this.dataAry[0].id}])},i.prototype.addDataVo=function(e,i){if(this.dataAry){this.dataAry.push(e);var n=0;1==this.dataAry.length&&(e.isSelected=1,e.status=1,t.MailMgr.ins().post_Mail_Update(),t.ModelManager.ins().mailModel.noRead>0&&t.ModelManager.ins().mailModel.noRead--),this.dataAry.sort(t.ModelManager.ins().mailModel.mysort);for(var s=this.dataAry.length,a=0;s>a;a++)if(1==this.dataAry[a].isSelected){n=this.dataAry[a].id,this.preIndex=a;break}this._itemArrayCollection.replaceAll(this.dataAry),i&&i(n)}},i.prototype.removeDataVo=function(t){this.dataAry&&this.dataAry.length>0&&(this.dataAry.length>t&&this.dataAry.splice(t,1),this._itemArrayCollection.replaceAll(this.dataAry),this._itemArrayCollection.refresh())},i.prototype.destroy=function(){for(;this._list.numChildren>0;){var t=this._list.getChildAt(0);t.destroy(),t=null}this.dataAry.length=0,this.dataAry=null,this._scrollViewContainer.destory(),this._scrollViewContainer=null,this._itemArrayCollection.removeAll(),this._itemArrayCollection=null},i.prototype.removeView=function(){this._container&&this._container.removeChildren()},i}(egret.EventDispatcher);t.MailListView=e,__reflect(e.prototype,"app.MailListView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.selectedIndex=0,i.selectedId=0,i.skinName="MailSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System37),this.addTouchEvent(this.btn_delete,this.onTouchAp),this.addTouchEvent(this.btn_get_attach,this.onTouchAp),this.addTouchEvent(this.btn_onekey_get,this.onTouchAp),this.addTouchEvent(this.btn_delete_com,this.onTouchAp),this.observe(t.MailMgr.ins().post_50_2,this.onNewMail),this.observe(t.MailMgr.ins().post_50_3,this.onDeleteCom),this.observe(t.MailMgr.ins().post_50_6,this.onDeleteCom),this.observe(t.MailMgr.ins().post_50_4,this.onGetAttach),this.observe(t.MailMgr.ins().post_50_1,this.updateData),t.EventManager.ins().addEvent(t.CompEvent.MAIL_SELECTED_INDEX,this.onSelected,this),t.EventManager.ins().addEvent(t.CompEvent.MAIL_DELETE,this.onDelete,this),this.mailContent=new t.MailContent(this.container,this.callFunc.bind(this)),this.mailListView=new t.MailListView(this.list),this.onRefreshMail(1)},i.prototype.onSelected=function(e){var i=e[0],n=i.index,s=i.id;this.selectedId=s;t.ModelManager.ins().mailModel.dicMail;n>-1&&this.selectedId>0&&t.ModelManager.ins().mailModel.dicMail[s]&&(0==t.ModelManager.ins().mailModel.dicMail[s].status&&(t.MailMgr.ins().send_50_1(1,this.selectedId),t.MailMgr.ins().postMailStateChange(),t.ModelManager.ins().mailModel.noRead>0&&t.ModelManager.ins().mailModel.noRead--),this.selectedIndex=n,t.ModelManager.ins().mailModel.dicMail[s].isSelected=1,t.ModelManager.ins().mailModel.dicMail[s].status=1,this.mailContent.setData(s),this.mailListView.refreshData(n),this.setBottom()),t.MailMgr.ins().post_Mail_Update()},i.prototype.onDelete=function(e){var i=e[0],n=i.id;this.selectedId=n,t.MailMgr.ins().send_50_2(this.selectedId)},i.prototype.onTouchAp=function(e){switch(e.currentTarget){case this.btn_delete:t.MailMgr.ins().send_50_2(this.selectedId);break;case this.btn_get_attach:t.MailMgr.ins().send_50_3(this.selectedId);break;case this.btn_onekey_get:t.MailMgr.ins().send_50_5();break;case this.btn_delete_com:t.MailMgr.ins().send_50_4()}},i.prototype.onRefreshMail=function(e){var i=[];for(var n in t.ModelManager.ins().mailModel.dicMail)i.push(t.ModelManager.ins().mailModel.dicMail[n]);i.sort(t.ModelManager.ins().mailModel.mysort),this.mailListView.setData(e,i);var s=t.ModelManager.ins().mailModel.getDataByIdx(0);if(s&&(this.selectedId=s.id),i.length>120){for(var a=[],r=i.length-1;r>=0&&!(i.length-a.length<=120);r--)0!=i[r].status&&0==i[r].items.length&&a.push(i[r].id);t.MailMgr.ins().send_50_6(a)}this.mailContent.setData(this.selectedId),this.setBottom()},i.prototype.onNewMail=function(){var e=this;t.ModelManager.ins().mailModel.newMail&&(this.mailListView.addDataVo(t.ModelManager.ins().mailModel.newMail,function(t){e.mailContent.setData(t),e.selectedId=t}),this.setBottom())},i.prototype.updateData=function(){this.mailListView.resetData(),this.mailContent.setData();var e=[];for(var i in t.ModelManager.ins().mailModel.dicMail)e.push(t.ModelManager.ins().mailModel.dicMail[i]);e.sort(t.ModelManager.ins().mailModel.mysort),this.mailListView.setData(0,e),this.setBottom()},i.prototype.onGetAttach=function(){var e=t.ModelManager.ins().mailModel.getAttachIds;if(0!=e.length){for(var i=0;i<e.length;i++){var n=e[i],s=t.ModelManager.ins().mailModel.dicMail[n];s&&(t.ModelManager.ins().mailModel.noRead>0&&0==s.status&&(t.MailMgr.ins().send_50_1(1,s.id),t.MailMgr.ins().postMailStateChange(),t.ModelManager.ins().mailModel.noRead--),s.status=3,s.items=[])}this.mailListView.resetData(),this.setBottom()}},i.prototype.onDeleteCom=function(){var e=t.ModelManager.ins().mailModel.deleteIds.length;if(0!=e){for(var i,n=0;e>n;n++)if(i=t.ModelManager.ins().mailModel.deleteIds[n],i>0){if(!t.ModelManager.ins().mailModel.dicMail[i])continue;0==t.ModelManager.ins().mailModel.dicMail[i].status&&t.ModelManager.ins().mailModel.noRead>0&&t.ModelManager.ins().mailModel.noRead--,delete t.ModelManager.ins().mailModel.dicMail[i]}var s=Object.keys(t.ModelManager.ins().mailModel.dicMail);if(s&&s.length>0){this.selectedIndex=0,this.selectedId=Number(s[0]),t.ModelManager.ins().mailModel.dicMail[this.selectedId].isSelected=1,t.ModelManager.ins().mailModel.dicMail[this.selectedId].status=1,this.mailContent.setData(this.selectedId);var a=[];for(var r in t.ModelManager.ins().mailModel.dicMail)a.push(t.ModelManager.ins().mailModel.dicMail[r]);a.sort(t.ModelManager.ins().mailModel.mysort),this.mailListView.setData(0,a),this.mailListView.refreshData(this.selectedIndex)}else{this.mailContent.setData();var a=[];for(var r in t.ModelManager.ins().mailModel.dicMail)a.push(t.ModelManager.ins().mailModel.dicMail[r]);a.sort(t.ModelManager.ins().mailModel.mysort),this.mailListView.setData(0,a)}this.setBottom()}},i.prototype.callFunc=function(){this.setBottom()},i.prototype.setBottom=function(){this.txt_count.text=Object.keys(t.ModelManager.ins().mailModel.dicMail).length+"/150",this.txt_no_read.text=t.ModelManager.ins().mailModel.getNoReadNum()+"",this.txt_no_get.text=t.ModelManager.ins().mailModel.getCanGetNum()+"",this.txt_no_com.text=t.ModelManager.ins().mailModel.getComNum()+""},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.dragDropUI&&this.dragDropUI.destroy(),this.mailContent&&this.mailContent.destroy(),this.mailListView&&this.mailListView.destroy(),this.dragDropUI=null,this.mailContent=null,this.mailListView=null,t.EventManager.ins().removeEvent(t.CompEvent.MAIL_SELECTED_INDEX,this.onSelected,this),t.EventManager.ins().removeEvent(t.CompEvent.MAIL_DELETE,this.onSelected,this),this.removeTouchEvent(this.btn_onekey_get,this.onTouchAp),this.removeTouchEvent(this.btn_get_attach,this.onTouchAp),this.removeTouchEvent(this.btn_delete_com,this.onTouchAp),this.removeTouchEvent(this.btn_delete,this.onTouchAp),this.removeFromParent()},i}(t.BaseEuiView);t.MailView=e,__reflect(e.prototype,"app.MailView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isClick=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){this.isClick||(this.isClick=!0,this.addMouseOverEvent(this,this.MoveEvent),this.addMouseMoveEvent(this,this.MoveEvent)),this.lbPlayerName.text=this.data.name,this.playerLevel.text=this.data.lv+"",this.guildLevel.text=this.data.guild+"",this.lbJob.source="m_task_zy"+this.data.job,this.bg.visible=this.data.isSelect},e.prototype.MoveEvent=function(t){t.type==mouse.MouseEvent.MOUSE_OUT?this.selectImg.visible=!1:t.type==mouse.MouseEvent.MOUSE_OVER&&(this.selectImg.visible=!0)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.isClick=!1,this.selectImg.visible=!1,this.removeMouseOverEvent(this,this.MoveEvent),this.removeMouseMoveEvent(this,this.MoveEvent)},e}(t.BaseItemRender);t.AttackCharItem=e,__reflect(e.prototype,"app.AttackCharItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.data){this.ItemData.data=this.data;var e=t.CurrencyUtils.getCurrencyNameIcon(this.data.type,this.data.id);if(e){var i=t.ColorUtil.GOODS_COLOR[0|e[3]],n="|C:"+i+"&T:"+e[0]+"|";this.itemName.textFlow=t.TextFlowMaker.generateTextFlow1(n)}}},i}(t.BaseItemRender);t.BulletFrameItem=e,__reflect(e.prototype,"app.BulletFrameItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="BulletFrameSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.touchChildren=!1,this.touchEnabled=!1,this.anchorOffsetX=130},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.payTweens()},i.prototype.payTweens=function(){egret.Tween.removeTweens(this);var e=t.ChatMgr.ins().getBulletFrameStr();if(e){this.alpha=0,this.x=-130,this.verticalCenter=-250;var i=(e+"").split("\\"),n=i[0],s=i[1];this.imgType.source="icontype_"+n,this.nameLabel.text=s;var a=t.StageUtils.ins().getWidth();this.visible=!0,egret.Tween.get(this).to({alpha:1,x:a/2},a/6).wait(800).to({alpha:0,x:a+130},a/3).call(function(){egret.Tween.removeTweens(this),this.payTweens()})}else t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose()},i}(t.BaseEuiView);t.BulletFrameView=e,__reflect(e.prototype,"app.BulletFrameView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Popup)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="BulletFrameSkin2",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.touchChildren=!1,this.touchEnabled=!1,this.anchorOffsetX=130,this.awardArr=new eui.ArrayCollection,this.itemList.itemRenderer=t.BulletFrameItem,this.itemList.dataProvider=this.awardArr},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.payTweens()},i.prototype.payTweens=function(){egret.Tween.removeTweens(this);var e=t.ChatMgr.ins().getBulletFrameStr2();if(e){this.alpha=0,this.x=-130,this.verticalCenter=-250;for(var i=(e+"").split("\\"),n=i.filter(function(t){return""!=t}),s=[],a=0;a<n.length;a+=3)s.push({type:n[a],id:n[a+1],count:n[a+2]});this.awardArr.replaceAll(s);
var r=t.StageUtils.ins().getWidth();this.visible=!0,egret.Tween.get(this).to({alpha:1,x:r/2},r/6).wait(1500).to({alpha:0,x:r+130},r/3).call(function(){egret.Tween.removeTweens(this),this.payTweens()})}else t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose()},i}(t.BaseEuiView);t.BulletFrameView2=e,__reflect(e.prototype,"app.BulletFrameView2"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Popup)}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="AntiAddictionView",e.percentHeight=100,e.percentWidth=100,e}return __extends(e,t),e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.enterBtn,this.onClick)},e.prototype.onClick=function(t){window.IdCardFunction()},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this,e),this.$onClose(),this.removeTouchEvent(this.enterBtn,this.onClick)},e}(t.BaseEuiView);t.MainAntiAddictionView=e,__reflect(e.prototype,"app.MainAntiAddictionView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Popup)}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MainBanSkin",e.percentHeight=100,e.percentWidth=100,e}return __extends(e,t),e.prototype.initUI=function(){},e.prototype.open=function(t){this.desc.text=t},e}(t.BaseEuiView);t.MainBanView=e,__reflect(e.prototype,"app.MainBanView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Popup)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.noticeAry=[],t.noticeAry1=[],t.noticeAry2=[],t.isShowNotice=!1,t.skillTipsArr=[],t.isPlaySkillTween=!1,t.itemImagAry=[],t.touchEnabled=t.touchChildren=!1,t.bottom=t.top=t.right=t.left=0,t.skinName="MianBottomNotice",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.open.call(this,i),this.noticeAry.length=0,this.noticeAry1.length=0,this.noticeAry2.length=0,this.isShowNotice=this.skillTipsGrp.visible=!1,egret.Tween.removeTweens(this.noticeGroup),egret.Tween.removeTweens(this.noticeGroup1),egret.Tween.removeTweens(this.noticeGroup2),this.noticeGroup.visible=!1,this.noticeGroup1.visible=!1,this.noticeGroup2.visible=!1,gamelib.DeviceUtils.IsMobile&&(this.noticeGroup1.top=10,this.noticeGroup.top=50,this.noticeGroup2.top=180),this.observe(t.ChatMgr.ins().postAddnotice,this.Addnotice),this.observe(t.DropMgr.ins().post_skillPushImage,this.pushSkillTween),t.EventManager.ins().addEvent(t.MainEvent.ADD_TASK_EFF,this.addTaskEff,this)},i.prototype.Addnotice=function(t){var e=t[1],i=t[0];1==e?(this.noticeAry1.push(i),this.payNotice1()):2==e?(this.noticeAry2.push(i),this.payNotice2()):(this.noticeAry.push(i),this.isShowNotice||this.payNotice())},i.prototype.payNotice1=function(){var e=this;if(!this.noticeGroup1.visible&&this.noticeAry1.length){egret.Tween.removeTweens(this.noticeLabel1);var i=this.noticeAry1.shift();this.noticeLabel1.textFlow=t.TextFlowMaker.generateTextFlow(i),this.noticeLabel1.x=this.noticeGroup1.width;var n=-this.noticeLabel1.size*this.noticeLabel1.text.length*.9;this.noticeGroup1.visible=!0;var s=egret.Tween.get(this.noticeLabel1),a=7*(this.noticeLabel1.x-n),r=this;s.to({x:n},a).call(function(){r.noticeGroup1.visible=!1,egret.Tween.removeTweens(e),r.payNotice1()})}},i.prototype.payNotice2=function(){var e=this;if(!this.noticeGroup2.visible&&this.noticeAry2.length){egret.Tween.removeTweens(this.noticeLabel2);var i=this.noticeAry2.shift();this.noticeLabel2.textFlow=t.TextFlowMaker.generateTextFlow(i),this.noticeLabel2.x=this.noticeGroup2.width;var n=-this.noticeLabel2.size*this.noticeLabel2.text.length*.9;this.noticeGroup2.visible=!0;var s=egret.Tween.get(this.noticeLabel2),a=7*(this.noticeLabel2.x-n),r=this;s.to({x:n},a).call(function(){r.noticeGroup2.visible=!1,egret.Tween.removeTweens(e),r.payNotice2()})}},i.prototype.payNotice=function(){if(egret.Tween.removeTweens(this.noticeGroup),this.noticeAry.length){this.isShowNotice=!0;var e=this.noticeAry.shift();this.noticeLabel.textFlow=t.TextFlowMaker.generateTextFlow(e);var i=this;this.noticeGroup.alpha=1,this.noticeGroup.scaleX=this.noticeGroup.scaleY=2,this.noticeGroup.visible=!0;var n=egret.Tween.get(this.noticeGroup);n.to({scaleX:.85,scaleY:.85},100).to({scaleX:1,scaleY:1},100).wait(3e3).to({alpha:0},800).call(function(){this.visible=!1,i.isShowNotice=!1,i.payNotice()})}},i.prototype.addTaskEff=function(t){var e=this;this.feelingsImg||(this.feelingsImg=new eui.Image,this.feelingsImg.horizontalCenter=0),egret.Tween.removeTweens(this.feelingsImg),this.feelingsImg.source=t,this.feelingsImg.alpha=0,this.feelingsImg.y=0,this.feelingsGrp.addChild(this.feelingsImg),egret.Tween.get(this.feelingsImg).to({y:-50,alpha:1},1200).to({y:-62},1200).to({y:-70,alpha:0},700).call(function(){egret.Tween.removeTweens(e.feelingsImg),e.feelingsImg.parent&&e.feelingsImg.parent.removeChild(e.feelingsImg)})},i.prototype.pushSkillTween=function(t){this.skillTipsArr.push(t),this.addSkillItem()},i.prototype.addSkillItem=function(){var e=this;if(this.skillTipsArr.length>0&&!this.isPlaySkillTween){this.isPlaySkillTween=!0;var i=this.skillTipsArr.shift(),n=this.getImage();if(1==i.type){var s=t.EntityMgr.ins().getPayer.getUserSkill(i.id);if(s){var a=t.GlobalConfig.SkillsLevelConf[i.id][s.nLevel];a&&(this.skillTipsIcon.source=a.skillName+"",n.source=a.skillName+"");var r=t.GlobalConfig.SkillConf[i.id];r&&(this.skillTipsName.text=r.name+"")}}this.skillTipsBgGrp.scaleX=this.skillTipsBgGrp.scaleY=this.skillTipsIconGrp.scaleX=this.skillTipsIconGrp.scaleY=0,this.skillTipsBgGrp.alpha=this.skillTipsIconGrp.alpha=1,this.skillTipsGrp.visible=this.skillTipsIcon.visible=!0,egret.Tween.removeTweens(this.skillTipsBgGrp);var o=egret.Tween.get(this.skillTipsBgGrp);o.to({scaleX:1.3,scaleY:1.3},200).to({scaleX:1,scaleY:1},100).wait(850).to({alpha:0},400),egret.Tween.removeTweens(this.skillTipsIconGrp);var l=this,h=this.skillTipsIcon.localToGlobal();n.x=h.x-113,n.y=h.y-29,n.visible=!1,this.addGroup.addChild(n);var p=egret.Tween.get(this.skillTipsIconGrp);p.to({scaleX:1.3,scaleY:1.3},200).to({scaleX:1,scaleY:1},100).wait(850).call(function(){e.skillTipsIcon.visible=!1,t.EventManager.ins().sendEvent(t.MainEvent.PLAY_EFF_JIJN,i.pos,n,function(){l.skillTipsGrp.visible=!1,l.pushImage(n)},function(){l.isPlaySkillTween=!1,l.addSkillItem()})})}},i.prototype.getImage=function(){return this.itemImagAry.shift()||new eui.Image},i.prototype.pushImage=function(e){t.DisplayUtils.removeFromParent(e),egret.Tween.removeTweens(e),e.source=null,this.itemImagAry.push(e)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.EventManager.ins().removeEvent(t.MainEvent.ADD_TASK_EFF,this.addTaskEff,this),this.noticeAry.length=0,this.noticeAry1.length=0,this.noticeAry2.length=0,this.isShowNotice=!1,egret.Tween.removeTweens(this.noticeGroup),egret.Tween.removeTweens(this.noticeGroup1),egret.Tween.removeTweens(this.noticeGroup2),this.noticeGroup.visible=!1,this.noticeGroup1.visible=!1,this.noticeGroup2.visible=!1},i}(t.BaseEuiView);t.MainBottomNotice=e,__reflect(e.prototype,"app.MainBottomNotice"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Popup)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._selfMapId=0,t.functionKey=0,t.skillNum=11,t.pkArr=[{img:"m_t_ms_heping",index:1},{img:"m_t_ms_zudui",index:2},{img:"m_t_ms_hanghui",index:3},{img:"m_t_ms_didui",index:4},{img:"m_t_ms_quanti",index:5},{img:"m_t_ms_zhenying",index:6}],t.ruleList={},t.ruleKey={},t.buttonKey={},t.ruleParent={},t.ruleEff={},t.petState=0,t.followCd=0,t.actMonsterIsShow=!0,t.actCircleIsShow=!0,t.actLevelIsShow=!0,t.actEquipIsShow=!0,t.recog=0,t.lockSkillId=0,t.npcTimers=0,t.duoBaoTimers=0,t.duoBaoTxt="",t.kyes={},t.buttonAry=[],t.browserImage="",t.redArr=[],t.yellowArr=[],t.currentMultipleExp=-1,t._skillTipsRoleLevel=0,t._isShow=!1,t.itemImagAry=[],t.isTweenOver=!1,t.onHookType=0,t.sbkcdTime=0,t._actID=13,t.ackArr=[],t.payExpTime=0,t.sendTime=0,t.actTipsID=10012,t.levelEffPlayInfo={},t.circleTipsActID=10077,t.effPlayInfo={},t.actMonsterActID=10147,t.monsterEffInfo={},t.sprotesEquipActID=10020,t.equipEffInfo={},t.bottom=t.top=t.right=t.left=0,t.touchChildren=!0,t.touchEnabled=!1,t.dSpriteSheet=new how.DSpriteSheet,t.skinName="MainBottomSkin",t}return __extends(i,e),i.prototype.updateHp=function(t){this.updateState([t,this.lockSkillId])},i.prototype.updateState=function(e){var i=e[0],n=e[1],s=t.EntityMgr.ins().getPayer;if(s&&s.propSet){s.lockTarget=i,s.lockSkillId=n,this.recog=i,this.lockSkillId=n;var a=t.EntityMgr.ins().getCharRole(i);if(a||(a=t.EntityMgr.ins().getDummyChar(i)),a){if(this.topGroup.visible=!0,this.topGroup2.visible=!0,this.lockName.visible=!0,this.lockHpLabel.visible=!0,this.jobImage.visible=!0,this.jobImg.visible=!1,this.hpBar.value=a.propSet.getHp(),this.hpBar.maximum=a.propSet.getMaxHp(),this.lockHpLabel.text=a.propSet.getHp()+"/"+a.propSet.getMaxHp(),this.lockName.text=a.charName,a.isCharRole||a.isDummyCharRole){var r=a.propSet.getAP_JOB(),o=a.propSet.getZSLevel(),l=a.propSet.getLevel();this.jobImg.visible=!0,this.jobImg.source="m_job"+r,this.lockName.text=o>0?a.charName+" "+o+"转"+l:a.charName+"  Lv"+l,this.jobImage.source="name_"+r+"_"+a.propSet.getSex()}else{this.clickStage();var h=t.GlobalConfig.Monster[a.propSet.getACTOR_ID()];h&&(3==h.monsterType||4==h.monsterType||8==h.monsterType||9==h.monsterType)?this.jobImage.source="m_m_lock_2":this.jobImage.source="m_m_lock_1"}return}}this.topGroup.visible=!1,this.topGroup2.visible=!1,this.clickStage()},i.prototype.clickStage=function(){t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickStage,this),this.rightMenuView.visible=!1},i.prototype.initUI=function(){e.prototype.initUI.call(this),this.rightMenuView=new t.RankRightMenuView,this.rightMenuView.visible=!1,this.topGroup.addChild(this.rightMenuView),t.RuleIconBase.updateShow=this.updateRuleAndSort.bind(this),t.RuleIconBase.update=this.updateRule.bind(this),t.RuleIconBase.updateCount=this.updateCount.bind(this),this.rulePos={1:this.lyaer1,2:null,3:null,4:this.lyaer4,5:this.lyaer5,6:this.lyaer6,7:this.lyaer7},this.skillArr=[];for(var i=0;i<this.skillNum;i++)this["skill"+i].setSkillImg(""),this["skill"+i].keyIndex=i,this["skill"+i].setCountState(!1),this["skillMC"+i]=t.ObjectPool.pop("app.MovieClip"),this["skillMC"+i].blendMode=egret.BlendMode.ADD,this["skillMC"+i].scaleX=this["skillMC"+i].scaleY=1,this["skillMC"+i].touchEnabled=!1,this["cdGrp"+i].addChild(this["skillMC"+i]),this["skillMC"+i].visible=!1,this["skill"+i].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this["skill"+i].addEventListener(egret.TouchEvent.TOUCH_TAP,this.keyClick,this),this["skill"+i].addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseMove,this),this["skill"+i].addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseMove,this),this.skillArr.push(this["skill"+i]);if(this.blueImg.visible=this.qqGrp.visible=this.blueYearImg.visible=this.shengQuGrp.visible=!1,Main.gameParameter.pfID==t.PlatFormID.QQGame){this.qqGrp.visible=!0,this.qqOpenID.text="您的平台ID："+Main.gameParameter.userInfo.openid,this.playerName.x=132;var n=0,s=0,a=0,r=t.OtherMgr.ins().getQQBlueInfo();n=r[0],s=r[1],a=r[2],this.blueImg.visible=n&&a>0,this.blueImg.source=n&&a>0?1==n?"name_lz_pt"+(a+1):"name_lz_hh"+(a+1):"",this.blueYearImg.visible=1==s}else Main.gameParameter.pfID==t.PlatFormID.ShengQu?this.shengQuGrp.visible=!0:this.playerName.x=97;this.multipleExp=how.getQuickLabel(this.dSpriteSheet),this.multipleExp.x=25,this.multipleExp.y=157,this.multipleExp.size=18,this.multipleExp.textAlign="left",this.multipleExp.textStroke=1,this.multipleExp.textStrokeColor=0,this.multipleExp.textWidth=250,this.multipleExp.textHeight=32,this.InfoGrp.addChild(this.multipleExp),gamelib.os.KeyBoard.addKeyDown(this.keyDown,this),gamelib.os.KeyBoard.addKeyUp(this.keyUp,this),this.keyInfo(),this.pkSelect.setClickFunction=this._pkClickFunction.bind(this),this.pkSelect.itemRenderer(t.MainSelectRender,"MainSelectArrItem"),this.pkSelect.dataProvider=this.pkArr,this.bubbleLabel.text=t.LanguageUtils.language_Omission_txt46,this.bubbleLabel.visible=!1,this.newGrp=new eui.Group,this.newGrp.width=59,this.newGrp.height=59,this.newIcon=new eui.Image,this.newIcon.horizontalCenter=0,this.newIcon.verticalCenter=0,this.newGrp.addChild(this.newIcon),this.newGrp.x=691,this.newGrp.y=966,this.newGrp.visible=!1,this.timerGrp.visible=!1,t.LayerManager.UI_Drag.addChild(this.newGrp),t.EventManager.ins().addEvent(t.CompEvent.TimerEvent,this.onTimerStart,this),t.EventManager.ins().addEvent(t.CompEvent.Clear_Timer_Event,this.onClearTimer,this),this.msgdelay=[],this.msgAry=[this.msg1,this.msg2,this.msg3],this.observe(t.DefaultMgr.ins().post_g_0_253,this.updateMsg),this.observe(t.SettingMgr.ins().post_17_3,this.updateWIFI),this.observe(t.SettingMgr.ins().post_17_4,this.updateWIFI),this.observe(t.SettingMgr.ins().postSetWIFI,this.updateWIFI),this.observe(t.DefaultMgr.ins().post_pk,this.clickPK),this.observe(t.OtherMgr.ins().post_26_28,this.setActTimeCD),this.observe(t.DefaultMgr.ins().post_updateLevel,this.setActTimeCD),this.updateWIFI(),t.TimerManager.ins().remove(this.updateSkillCD,this),t.TimerManager.ins().doTimer(10,0,this.updateSkillCD,this),this.updateSkillCD(),this.buttonAry=[{btn:this.roleButton,icon:"m_icon_juese",lab:"icont_juese",updateMessage:[t.DefaultMgr.ins().post_g_0_7,t.DefaultMgr.ins().post_g_0_3,t.OtherMgr.ins().post_26_28,t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_3,t.BagMgr.ins().post_8_4],getRed:["app.DefaultMgr","getRoleRed"]},{btn:this.bagButton,icon:"m_icon_beibao",lab:"icont_beibao",updateMessage:[t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_2,t.BagMgr.ins().post_8_3,t.BagMgr.ins().post_8_4,t.BagMgr.ins().post_8_10,t.DefaultMgr.ins().post_dimensionalKey,t.BagMgr.ins().post_8_13],getRed:["app.BagMgr","getBagRed"]},{btn:this.mailButton,icon:"btn_youjian",updateMessage:[t.MailMgr.ins().post_50_1,t.MailMgr.ins().post_50_2,t.MailMgr.ins().post_50_3,t.MailMgr.ins().post_50_6,t.MailMgr.ins().post_50_4,t.MailMgr.ins().postMailStateChange],getRed:["app.MailMgr","getBagRed"]},{btn:this.setupButton,icon:"m_icon_huishou",lab:"icont_huishou"},{btn:this.skillButton,icon:"m_icon_jineng",lab:"icont_jineng",updateMessage:[t.SettingMgr.ins().post_17_2,t.DefaultMgr.ins().post_g_0_7,t.SkillMgr.ins().post_updateSkill,t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_3,t.BagMgr.ins().post_8_4,t.GhostMgr.ins().post_31_1,t.GhostMgr.ins().post_31_2],getRed:["app.SkillMgr","getSkillredDot"]},{btn:this.shopButton,icon:"m_icon_shangcheng"},{btn:this.guildButton,icon:"m_icon_caidan",lab:"icont_hanghui",updateMessage:[t.GuildMgr.ins().post_UpdateRedPos],getRed:["app.GuildMgr","getGuildRed"]},{btn:this.composeButton,icon:"icon_hecheng",lab:"icont_hecheng",updateMessage:[t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_2,t.BagMgr.ins().post_8_4,t.DefaultMgr.ins().postPlayerChange,t.ForgeMgr.ins().post_19_1],getRed:["app.ForgeMgr","getForgeRed2"]},{btn:this.friendsButton,icon:"btn_haoyou"},{btn:this.growWayBtn,icon:"icon_czzl"},{btn:this.growButton,icon:"icon_bianqiang"},{btn:this.CrossServerButton,icon:"icon_kaifuzhanchang",updateMessage:[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.DefaultMgr.ins().post_updateZsLevel],getRed:["app.CrossServerMgr","getCrossServerActRed"]},{btn:this.returnServerButton,icon:"icon_huidaoyuanfu"},{btn:this.teamButton,icon:"btn_zudui"},{btn:this.teamButton2,icon:"icon_hanghui",updateMessage:[t.GuildMgr.ins().post_UpdateRedPos],getRed:["app.GuildMgr","getGuildRed"]},{btn:this.rankBtn,icon:"btn_paihang"},{btn:this.flyButton,icon:"btn_feixiei"},{btn:this.privateDealsButton,icon:"btn_jiaoyi"},{btn:this.tradeLineWinButton,icon:"btn_jishou",updateMessage:[t.TradeLineMgr.ins().post_27_9],getRed:["app.TradeLineMgr","getReceiveRed"]},{btn:this.settingBtn,icon:"m_btn_shezhi"}]},i.prototype.getDummy=function(){t.EntityMgr.ins().getDummy()},i.prototype.onMouseMove=function(e){t.TimerManager.ins().remove(this.onShowSkillTips,this),this.curTarget=e.target.parent,e.type==mouse.MouseEvent.MOUSE_OUT?(t.UserTips.ins().closeTips(),this.curTarget=null):t.TimerManager.ins().doTimer(1500,1,this.onShowSkillTips,this)},i.prototype.onShowSkillTips=function(){var e=t.SettingMgr.ins().keyInfo,i=-1;if(this.curTarget){for(var n=0;n<this.skillNum;n++)if(this["skill"+n]==this.curTarget){i=n;break}if(-1!=i){var s=t.EntityMgr.ins().getPayer.getUserSkill(e[i].id);if(s){var a=t.GlobalConfig.SkillsLevelConf[e[i].id][s.nLevel];if(a){if(""==a.skillDesc)return;var r=this.curTarget.localToGlobal(),o=a.skillDesc;t.UserTips.ins().shouwTips(this.curTarget,t.TipsType.TIPS_SKILL_DESC,{conds:null,desc:o},{x:r.x+this.curTarget.width/2,y:r.y+this.curTarget.height/2})}}}}},i.prototype.npcTimer=function(e){this.npcTimers=e,this.npcTimerGrp.visible=!0,t.TimerManager.ins().remove(this.updateNpcTimer,this),t.TimerManager.ins().doTimer(1e3,0,this.updateNpcTimer,this),this.updateNpcTimer()},i.prototype.updateNpcTimer=function(){var e=this.npcTimers;this.npcTime.text=t.LanguageUtils.language_Common_65+(""+t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_10)),this.npcTimers-=1,0>=e&&(t.TimerManager.ins().remove(this.updateNpcTimer,this),this.npcTime.text="",this.npcTimerGrp.visible=!1)},i.prototype.clearNpcTime=function(){t.TimerManager.ins().remove(this.updateNpcTimer,this),this.npcTime.text="",this.npcTimerGrp.visible=!1},i.prototype.duoBaoTimer=function(e){this.duoBaoTimers=e.time-Math.floor(t.GlobalData.serverTime/1e3),this.duoBaoTimers&&(this.duoBaoTimers+=Math.floor(egret.getTimer()/1e3),this.duoBaoTxt="夺宝捡取倒计时：",this.duoBaoTimerGrp.visible=!0,t.TimerManager.ins().remove(this.updateDuoBaoTimer,this),t.TimerManager.ins().doTimer(1e3,0,this.updateDuoBaoTimer,this),this.updateDuoBaoTimer())},i.prototype.updateDuoBaoTimer=function(){var e=this.duoBaoTimers-Math.floor(egret.getTimer()/1e3);this.duoBaoTime.text=this.duoBaoTxt+(""+t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_10)),0>=e&&(t.TimerManager.ins().remove(this.updateNpcTimer,this),this.duoBaoTime.text="",this.duoBaoTimerGrp.visible=!1)},i.prototype.clearDuoBaoTime=function(){t.TimerManager.ins().remove(this.updateDuoBaoTimer,this),this.duoBaoTime.text="",this.duoBaoTimerGrp.visible=!1,this.duoBaoTimers=0},i.prototype.onTimerStart=function(e){this.time=e[0],t.TimerManager.ins().remove(this.updateTimer,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTimer,this),this.timerGrp.visible=!0},i.prototype.updateTimer=function(){var e=this.time-Math.floor(egret.getTimer()/1e3);if(0>=e)return this.actTime.text="",t.TimerManager.ins().remove(this.updateTimer,this),void(this.timerGrp.visible=!1);var i=""+t.LanguageUtils.language_Common_65+t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_10);this.actTime.text=i,console.log(i)},i.prototype.onClearTimer=function(){this.actTime.text="",this.timerGrp.visible=!1,t.TimerManager.ins().remove(this.updateTimer,this)},i.prototype.keyDown=function(e){var i=this;if(t.EntityMgr.ins().getPayer)if(e==gamelib.KeyCode.KC_SHIFT||e==gamelib.KeyCode.KC_Alt||e==gamelib.KeyCode.KC_CONTROL)this.functionKey=e;else{if(this.functionKey==gamelib.KeyCode.KC_Alt&&this.kyes[e])return;if(this.functionKey==gamelib.KeyCode.KC_CONTROL&&e==gamelib.KeyCode.KC_I)return this.editionLabel.visible=!this.editionLabel.visible,void(this.editionLabel.visible&&(this.editionLabel.text="客户端版本：v"+t.ResVersionManager.ins().appVersion));if(this.functionKey==gamelib.KeyCode.KC_Alt){if(this.kyes[e])return;if(e==gamelib.KeyCode.KC_H){this.kyes[e]=!0;var n=t.EntityMgr.ins().getPayer,s=0;if(n&&n.propSet)for(var a=0;a<this.pkArr.length-1;a++)if(this.pkArr[a].index==n.propSet.getPKtype()){s=a+1;break}return s=5==s?0:s,s%=this.pkArr.length,void t.PkMgr.ins().s_24_3(this.pkArr[s].index)}}if(this.ruleKey[e]||this.buttonKey[e]){if(this.kyes[e])return;this.kyes[e]=!0;var r=this.ruleList[this.ruleKey[e]];if(!r){var o=this.buttonAry[this.buttonKey[e]-1];o&&(r=o.btn)}if(r){var l=r.getConfig();r.isShow&&(l.keys.length>1?l.keys[0]==this.functionKey&&r.tapExecute(1):(debug.log("快捷键！！！！！！"),r.tapExecute(1)))}}else if(-1!=t.MapView.KEYS.indexOf(e)){var h=t.SettingMgr.ins().keyInfo[t.MapView.KEYS.indexOf(e)];if(h&&1==h.type){var p=t.EntityMgr.ins().getPayer.getUserSkill(h.id);if(p&&egret.getTimer()>p.dwResumeTick)if(p.isDisable){var u=t.GlobalConfig.SkillConf[p.nSkillId];u&&t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips110,u.name))}else{var c=this.skillArr[h.pos];c&&c.onClick(null),egret.Tween.get(this["skill"+h.pos]).call(function(){i["skill"+h.pos].currentState="down"}).wait(150).call(function(){i["skill"+h.pos].currentState="up",egret.Tween.removeTweens(i["skill"+h.pos])})}}else if(h&&0==h.type&&0==t.BagMgr.clickCd){t.BagMgr.clickCd=!0;var g=t.BagMgr.ins().getItemById(h.id);if(g){var d=t.BagManager.ins().useItem(g.series,g.wItemId);d&&egret.Tween.get(this["skill"+h.pos]).call(function(){i["skill"+h.pos].currentState="down"}).wait(150).call(function(){i["skill"+h.pos].currentState="up",egret.Tween.removeTweens(i["skill"+h.pos])})}egret.setTimeout(function(){t.BagMgr.clickCd=!1},this,150)}}else{if(this.kyes[e])return;if(e==gamelib.KeyCode.KC_SPECIALCOMMA_EARTHWORM&&t.MapView.m_Move_Char){t.DefaultMgr.ins().postUpdateTarget(t.MapView.m_Move_Char.recog);var m=t.EntityMgr.ins().getCharRole(t.MapView.m_Move_Char.recog);m&&t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_System95+"||C:0xffffff&T:"+m.propSet.getName()+"|")}else e==gamelib.KeyCode.KC_ESCAPE&&t.ViewManager.ins().escCloseView()}}},i.prototype.keyUp=function(t){(t==gamelib.KeyCode.KC_SHIFT||t==gamelib.KeyCode.KC_Alt||t==gamelib.KeyCode.KC_CONTROL)&&(this.functionKey=0),delete this.kyes[t]},i.prototype.open=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.open.call(this,i),this.attackGroup.visible=!1,this.buttonGroup.visible=!0,this.btnBg.height=352,this.teamButton2.visible=this.sbkCdGrp.visible=!1,this.stretchBtn.scaleY=1,this.bagMaxImage.visible=!1,this.skillTipsImage.visible=!1,this._actID=t.GameSocket.IsCrossService?26:t.GlobalData.sectionOpenDay<=3?41:13,this.iconToggle.visible=t.GameSocket.IsCrossService?!1:!0,this.CrossServerButton.visible=t.GameSocket.IsCrossService?!1:!0,this.returnServerButton.visible=t.GameSocket.IsCrossService?!0:!1,this.updateState([0,0]),this.chatView.open(),this.buffList1.itemRenderer=t.ImageBase,this.buffList2.itemRenderer=t.ImageBase,this.buffList3.itemRenderer=t.ImageBase,this.buffList4.itemRenderer=t.ImageBase,this.buffList.itemRenderer=t.ImageBase,this.attackList.itemRenderer=t.AttackCharItem,this.attackListData=null,this.attackListData=new eui.ArrayCollection,this.attackList.dataProvider=this.attackListData,this.hpMc=t.ObjectPool.pop("app.MovieClip"),this.hpMc.x=55,this.hpMc.y=52,this.hpGroup.addChild(this.hpMc),this.hpMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_hq",-1),this.mpMc=t.ObjectPool.pop("app.MovieClip"),this.mpMc.x=0,this.mpMc.y=52,this.mpGroup.addChild(this.mpMc),this.mpMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_lq",-1),this.hpMc.mask=new egret.Rectangle(-56,-50,53,109),this.mpMc.mask=new egret.Rectangle(1,-50,55,109),t.GameSocket.IsCrossService||(window.loginWay||(this.clientguideTips=new t.ClientguideTips,this.clientguideTips.init()),this.donationGuideTips=new t.DonationGuideTips,this.donationGuideTips.init(this.donationGuideTipsGrp),this.firstChargeTips=new t.FirstChargeTips,this.firstChargeTips.init(this.firstChargeTipsGrp),this.secondChargeTips=new t.SecondChargeTips,this.secondChargeTips.init(this.secondChargeTipsGrp),this.violentGuideTips=new t.ViolentGuideTips,this.violentGuideTips.init(this.violentGuideTipsGrp),this.vipGuideTips=new t.VipGuideTips,this.vipGuideTips.init(this.vipGuideTipsGrp)),t.StageUtils.ins().getStage().addEventListener(egret.Event.RESIZE,this.keyInfo,this),this.attackList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listClick,this),this.observe(t.SkillMgr.ins().postUpdateLock,this.updateState),this.observe(t.DefaultMgr.ins().postUpdateTarget,this.updateHp),this.observe(t.DefaultMgr.ins().post_g_0_3,this.initRuleList),this.observe(t.SettingMgr.ins().post_17_1,this.updateKeyUI),this.observe(t.SettingMgr.ins().post_17_2,this.updateKeyUI),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updatePlayerInfo),this.observe(t.SkillMgr.ins().postg_5_1,this.updateKeyUI),this.observe(t.BagMgr.ins().post_8_1,this.updateKeyUI),this.observe(t.BagMgr.ins().post_8_4,this.updateKeyUI),this.observe(t.BagMgr.ins().post_8_3,this.updateKeyUI),this.observe(t.SkillMgr.ins().post_updateSkill,this.updateSkillTips),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateSkillTips),this.observe(t.BagMgr.ins().post_8_1,this.updateSkillTips),this.observe(t.BagMgr.ins().post_8_3,this.updateSkillTips),this.observe(t.BagMgr.ins().post_8_4,this.updateSkillTips),this.observe(t.SkillMgr.ins().postg_5_5,this.skillCD),this.observe(t.GuildMgr.ins().post_GuildInfo,this.updataGuildInfo),this.observe(t.BagMgr.ins().post_8_7,this.itemCd),this.observe(t.BagMgr.ins().postKeyXY,this.keyInfo),this.observe(t.BuffMgr.ins().postUpdateBuff,this.updateBuff),this.observe(t.BuffMgr.ins().post_4_6,this.updateSavior),this.observe(t.BuffMgr.ins().post_updateSavior,this.updateSavior),this.observe(t.DefaultMgr.ins().post_g_0_13,this.updateMap),this.observe(t.DropMgr.ins().post_pushImage,this.addItem),this.observe(t.DefaultMgr.ins().post_updateOnHook,this.updateOnHook),this.observe(t.DefaultMgr.ins().post_AttackState,this.updateOnHook),this.observe(t.SkillMgr.ins().post_playSkillMc,this.playSkillKeyEff),this.observe(t.SkillMgr.ins().post_g_5_6,this.updateAckList),this.observe(t.MainTaskMgr.ins().postUpdateTask,this.updateTask),this.observe(t.MoveMgr.ins().post_1_6,this.npcTimer),this.observe(t.ActvityMgr.ins().postDuoBaoCD,this.duoBaoTimer),this.observe(t.MoveMgr.ins().post_clearNpcTime,this.clearNpcTime),this.observe(t.MoveMgr.ins().post_clearDuoBaoTime,this.clearDuoBaoTime),this.observe(t.DefaultMgr.ins().post_g_0_10,this.updateserverTime),this.observe(t.OtherMgr.ins().post_26_8,this.setActTimeCD),this.observe(t.ActvityMgr.ins().post_25_2,this.setActTimeCD),this.observe(t.ActvityMgr.ins().post_25_4,this.setActTimeCD),this.observe(t.ActvityMgr.ins().post_25_5,this.setActTimeCD),this.observe(t.ActvityMgr.ins().post_shaBakNextArard,this.setActTimeCD),this.observe(t.DefaultMgr.ins().post_petChange,this.updatePet),this.observe(t.PetSettingMgr.ins().postPetNum,this.updatePet),this.observe(t.DefaultMgr.ins().post_g_0_5,this.updateAllAckList),this.observe(t.DefaultMgr.ins().post_g_0_35,this.updateAllAckList),this.observe(t.DefaultMgr.ins().post_ClearAllAckList,this.updateAllAckList),this.observe(t.SettingMgr.ins().post_counterAtk,this.setAttackGroupVis),this.observe(t.ChatMgr.ins().postAddExp,this.addExp),t.EventManager.ins().addEvent(t.CompEvent.DRAG_END,this.onDragEnd,this),t.EventManager.ins().addEvent(t.MainEvent.UPDATE_DISPOSABLE_RED,this.updateDisposableredpoint,this),t.EventManager.ins().addEvent(t.MainEvent.PLAY_EFF_JIJN,this.playJnjhboom,this),t.EventManager.ins().addEvent(t.MainEvent.PLAY_EFF_JIJN_END,this.playJnjhboomEnd,this),t.EventManager.ins().addEvent(t.MainEvent.HIDE_SKILL_TIPS,this.hideSkillTips,this),t.EventManager.ins().addEvent(t.ChatEvent.CHAT_CHANNEL_CHANGE,this.chatChannelChange,this),this.updateBuff(),this.currentMultipleExp=-1,this.updatePlayerInfo(),this.updateTime(),this.addTouchEvent(this.actEquipGrp,this.onClick),this.addTouchEvent(this.actLevelGrp,this.onClick),this.addTouchEvent(this.actMonsterBtn,this.onClick),this.addTouchEvent(this.actCircleBtn,this.onClick),this.addTouchEvent(this.addGrpBtn,this.onClick),this.addTouchEvent(this.shengQuAddGrpBtn,this.onClick),this.addTouchEvent(this.chatBtn,this.onClick),this.addTouchEvent(this.suitBtn,this.onClick),this.addTouchEvent(this.iconToggle,this.onClick),this.addTouchEvent(this.drugBtn,this.onClick),this.addTouchEvent(this.pickupBtn,this.onClick),this.addTouchEvent(this.splitBtn,this.onClick),this.addTouchEvent(this.petFollow,this.onClick),this.addTouchEvent(this.petAck,this.onClick),this.addTouchEvent(this.patternButton,this.onClick),this.addTouchEvent(this.shieldNearButton,this.onClick),this.addTouchEvent(this.shieldGuildButton,this.onClick),this.addTouchEvent(this.shieldPrivateButton,this.onClick),this.addTouchEvent(this.ruletipsButton,this.onClick),this.addTouchEvent(this.topGroup,this.onClick),this.addTouchEvent(this.switchButton,this.onClick),this.addTouchEvent(this.rechargeButton,this.onClick),this.addTouchEvent(this.stretchBtn,this.onClick),this.addTouchEvent(this.vipImg,this.onClick),this.addTouchEvent(this.qqOpenID,this.onClick),this.addTouchEvent(this.actCircleGrp,this.onClick),this.addTouchEvent(this.actMonsterGrp,this.onClick),this.addTouchEvent(this.donationGuideTipsGrp,this.onClick),this.addTouchEvent(this.firstChargeTipsGrp,this.onClick),this.addTouchEvent(this.secondChargeTipsGrp,this.onClick),this.addTouchEvent(this.violentGuideTipsGrp,this.onClick),this.addTouchEvent(this.vipGuideTipsGrp,this.onClick);for(var s,a,r=0;r<this.buttonAry.length;r++)s=this.buttonAry[r],a=t.GlobalConfig.PlayFunConfig[s.btn.configid],a&&a.keys&&a.keys.length&&(this.buttonKey[a.keys[a.keys.length-1]]=r+1),s.btn.setButtonInfo(s.icon,s.lab,s.updateMessage,s.getRed);this.addMouseOverEvent(this.levelGroup,this.mouseMove),this.addMouseOverEvent(this.expGroup,this.mouseMove),this.addMouseOverEvent(this.hpGroup,this.mouseMove),this.addMouseOverEvent(this.mpGroup,this.mouseMove),this.addMouseMoveEvent(this.levelGroup,this.mouseMove),this.addMouseMoveEvent(this.hpGroup,this.mouseMove),this.addMouseMoveEvent(this.mpGroup,this.mouseMove),this.addMouseMoveEvent(this.expGroup,this.mouseMove),this.addMouseOverEvent(this.shieldNearButton,this.chatBtnMouseMove),this.addMouseMoveEvent(this.shieldNearButton,this.chatBtnMouseMove),this.addMouseOverEvent(this.shieldGuildButton,this.chatBtnMouseMove),this.addMouseMoveEvent(this.shieldGuildButton,this.chatBtnMouseMove),this.addMouseOverEvent(this.shieldPrivateButton,this.chatBtnMouseMove),this.addMouseMoveEvent(this.shieldPrivateButton,this.chatBtnMouseMove),this.addMouseOverEvent(this.patternButton,this.chatBtnMouseMove),this.addMouseMoveEvent(this.patternButton,this.chatBtnMouseMove),this.addMouseOverEvent(this.ruletipsButton,this.chatBtnMouseMove),this.addMouseMoveEvent(this.ruletipsButton,this.chatBtnMouseMove),this.addMouseOverEvent(this.chatBtn,this.chatBtnMouseMove),this.addMouseMoveEvent(this.chatBtn,this.chatBtnMouseMove),this.shopMc=t.ObjectPool.pop("app.MovieClip"),this.shopMc.blendMode=egret.BlendMode.ADD,this.shopGroup.addChild(this.shopMc),this.shopMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_spu",-1),this.setActTimeCD(),t.TimerManager.ins().doTimer(1e4,0,this.updateAllAckList,this),t.GameSocket.IsCrossService?(this.actTipsAllGrp.visible=!1,this.actEquipGrp.visible=!1,this.rechargeButton.visible=!1,this.switchButton.visible=!1,this.growWayBtn.visible=!1,this.growButton.visible=!1,this.observe(t.ActvityMgr.ins().post_25_1,this.updateCrossServerAct),this.observe(t.ActvityMgr.ins().post_25_2,this.updateCrossServerAct),this.observe(t.ActvityMgr.ins().post_25_3,this.updateCrossServerAct),this.observe(t.ActvityMgr.ins().post_25_4,this.updateCrossServerAct),this.observe(t.ActvityMgr.ins().post_25_5,this.updateCrossServerAct)):(this.rechargeEff||(this.rechargeEff=t.ObjectPool.pop("app.MovieClip"),this.rechargeEff.blendMode=egret.BlendMode.ADD,this.rechargeEff.scaleX=this.rechargeEff.scaleY=1,this.rechargeEff.touchEnabled=!0,this.rechargeEffGrp.addChild(this.rechargeEff)),this.rechargeEff.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_czan",-1),this.actTipsAllGrp.visible=!0,this.actEquipGrp.visible=!0,this.rechargeButton.visible=!0,this.switchButton.visible=!0,this.growWayBtn.visible=!0,this.growButton.visible=!0,this.observe(t.ActvityMgr.ins().post_25_1,this.updateSprotsActTips),this.observe(t.ActvityMgr.ins().post_25_2,this.updateSprotsActTips),this.observe(t.ActvityMgr.ins().post_25_3,this.updateSprotsActTips),this.observe(t.ActvityMgr.ins().post_25_4,this.updateSprotsActTips),this.observe(t.ActvityMgr.ins().post_25_5,this.updateSprotsActTips),this.observe(t.DefaultMgr.ins().post_updateZsLevel,this.updateSprotsActTips),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateSprotsActTips),this.updateSprotsActTips()),t.TimerManager.ins().doTimer(3e3,0,this.getDummy,this)
},i.prototype.playJnjhboom=function(t,e,i,n){var s=this;egret.Tween.removeTweens(e),e.visible=!0;var a=this["skill"+t].localToGlobal();egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5},80).to({x:a.x,y:a.y},200).to({scaleX:1,scaleY:1},20).call(function(){s.isTweenOver=!1,s.updateKeyUI(),i&&i();var e=s["skillMC"+t];e&&(e.visible=!0,e.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jnjhboom",1,function(){e.visible=!1,n&&n()},!1))})},i.prototype.playJnjhboomEnd=function(){this.isTweenOver=!0},i.prototype.updateserverTime=function(){this.labelTime.text=t.DateUtils.getFormatBySecond(t.GlobalData.serverTime/1e3,t.DateUtils.TIME_FORMAT_6)},i.prototype.updateTask=function(e){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoTask)&&!t.PlayerRoleAI.ins().isFinding&&0==t.GameMap.fubenID&&1==t.OtherMgr.ins().isLargeMapAct){var i=t.MainTaskMgr.ins().getTaskArr(),n=t.ViewManager.ins().getView(t.SetUpView);if(1==e&&(!n||5!=n.getUpViewIdx)&&i&&i[0]){var s=t.GlobalConfig.TaskDisplayConfig[i[0].taskID][i[0].taskState];if(s&&1==s.taskstate){if(!this.mouseMc){this.mouseMc=t.ObjectPool.pop("app.MovieClip"),this.mouseMc.scaleX=this.mouseMc.scaleY=1,this.mouseMc.touchEnabled=!1;var a=this.setupButton.localToGlobal();this.mouseMc.x=a.x+22,this.mouseMc.y=a.y+25,this.addChild(this.mouseMc)}return t.MainTaskWin.isTaskSetUpMC=!0,t.TimerManager.ins().doTimer(1e3*s.automatic,1,this.updateMouseEff,this),this.mouseMc.isPlaying||this.mouseMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_xsyd1",-1),void(10==s.taskname.type&&this.playOpenMc(this.mouseMc.x,this.mouseMc.y))}}}this.stopTaskMC()},i.prototype.updateMouseEff=function(){t.TimerManager.ins().remove(this.updateMouseEff,this),t.ViewManager.ins().isShow(t.SetUpView)&&t.ViewManager.ins().close(t.SetUpView),t.ViewManager.ins().open(t.SetUpView,5,1)},i.prototype.stopTaskMC=function(){t.TimerManager.ins().remove(this.updateMouseEff,this),t.MainTaskWin.isTaskSetUpMC=!1,this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc()},i.prototype.playOpenMc=function(e,i){this.openMc||(this.openMc=t.ObjectPool.pop("app.MovieClip"),this.openMc.touchEnabled=!1,this.addChild(this.openMc)),this.openMc.x=e,this.openMc.y=i,this.openMc.isPlaying||this.openMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_gjxbz",-1)},i.prototype.stopOpenMc=function(){this.openMc&&(this.openMc.destroy(),this.openMc=null)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=t.EntityMgr.ins().getPayer;if(i&&i.propSet){var n="";switch(e.currentTarget){case this.levelGroup:n=t.LanguageUtils.language_Friend_Txt1+"       ："+(i.propSet.getZSLevel()>0?i.propSet.getZSLevel()+"转"+i.propSet.getLevel()+"级":i.propSet.getLevel()+"级")+"\n",n+=t.LanguageUtils.language_Friend_Txt7+"："+i.propSet.getEXP()+"\n",n+=t.LanguageUtils.language_Friend_Txt8+"："+(t.OtherMgr.ins().getLevelUpExp()-i.propSet.getEXP())+"\n",n+=t.LanguageUtils.language_Common_56+this.currentMultipleExp;break;case this.hpGroup:var s=i.propSet.getHp()>i.propSet.getMaxHp()?i.propSet.getMaxHp():i.propSet.getHp();n="HP "+s+"/"+i.propSet.getMaxHp();break;case this.mpGroup:var a=i.propSet.getCurMp()>i.propSet.getMaxMp()?i.propSet.getMaxMp():i.propSet.getCurMp();n="MP "+a+"/"+i.propSet.getMaxMp();break;case this.expGroup:n=t.LanguageUtils.language_Common_162;break;default:return}var r=e.currentTarget.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,n,{x:r.x+e.currentTarget.width,y:r.y}),r=null}}},i.prototype.chatBtnMouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=t.GlobalConfig.ChatSystemConfig,n="";switch(e.currentTarget){case this.shieldNearButton:n=i.nearChannelChatTips;break;case this.shieldGuildButton:n=i.guideChannelChatTips;break;case this.shieldPrivateButton:n=i.secretChannelChatCD;break;case this.patternButton:n=i.AttackModeTips;break;case this.ruletipsButton:n=i.ChatRuleTips;break;case this.chatBtn:n=i.ChatExpansionTips}if(n){var s=e.currentTarget,a=s.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,n,{x:a.x+s.width/2,y:a.y+s.height/2}),a=null}}},i.prototype.chatChannelChange=function(e){1==e.type&&(t.ChatView.isCloseNearChannel?this.shieldNearButton.icon="m_chat_ltpb_fj2":this.shieldNearButton.icon="m_chat_ltpb_fj1"),2==e.type&&(t.ChatView.isCloseGuildChannel?this.shieldGuildButton.icon="m_chat_ltpb_hh2":this.shieldGuildButton.icon="m_chat_ltpb_hh1"),3==e.type&&(t.ChatView.isClosePrivateChannel?this.shieldPrivateButton.icon="m_chat_ltpb_sl2":this.shieldPrivateButton.icon="m_chat_ltpb_sl1")},i.prototype.setMainMouseGrp=function(){},i.prototype.updateToggleRed=function(t){var e=t.checkShowRedPoint();(4==t.getConfig().layer||6==t.getConfig().layer)&&(1==e&&t.checkShowIcon()?(-1!=this.yellowArr.indexOf(t.getConfig().id)&&this.yellowArr.splice(this.yellowArr.indexOf(t.getConfig().id),1),-1==this.redArr.indexOf(t.getConfig().id)&&this.redArr.push(t.getConfig().id)):2==e&&t.checkShowIcon()?(-1!=this.redArr.indexOf(t.getConfig().id)&&this.redArr.splice(this.redArr.indexOf(t.getConfig().id),1),-1==this.yellowArr.indexOf(t.getConfig().id)&&this.yellowArr.push(t.getConfig().id)):(-1!=this.redArr.indexOf(t.getConfig().id)&&this.redArr.splice(this.redArr.indexOf(t.getConfig().id),1),-1!=this.yellowArr.indexOf(t.getConfig().id)&&this.yellowArr.splice(this.yellowArr.indexOf(t.getConfig().id),1)))},i.prototype.updateDisposableredpoint=function(t){for(var e in this.ruleList){var i=this.ruleList[e];if(i.id==t){this.updateRule(i);break}}},i.prototype.updateMap=function(){this.suitBtn.visible=t.GameMap.fubenID>0,t.GameMap.fubenID>0?t.ViewManager.ins().isShow(t.MainTaskWin)&&t.ViewManager.ins().close(t.MainTaskWin):t.ViewManager.ins().isShow(t.MainTaskWin)||t.ViewManager.ins().open(t.MainTaskWin),t.GameMap.mapID!=this._selfMapId&&(this._selfMapId=t.GameMap.mapID,3!=t.GameMap.mapID&&t.EntityMgr.ins().clearDummy(),t.EntityMgr.ins().resetMakeDummy(!0))},i.prototype.updataGuildInfo=function(){if(0!=t.GuildMgr.ins().getIsShowView()){var e=t.GuildMgr.ins().isGuild;e?t.ViewManager.ins().isShow(t.GuildInfoView)?t.ViewManager.ins().close(t.GuildInfoView):t.ViewManager.ins().open(t.GuildInfoView):t.ViewManager.ins().isShow(t.GuildNoGuildListView)?t.ViewManager.ins().close(t.GuildNoGuildListView):t.ViewManager.ins().open(t.GuildNoGuildListView)}},i.prototype.updatePlayerInfo=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet){this.changeMoney(),t.GameSocket.IsCrossService||(this.CrossServerButton.visible=this.CrossServerButton.isShow());var i=e.propSet.getZSLevel()>0?e.propSet.getZSLevel()+"z"+e.propSet.getLevel()+"j":e.propSet.getLevel()+"j";this.levelLab.text=i,this.playerName.text=e.propSet.getName(),this.lvLabel.text=e.propSet.getZSLevel()>0?e.propSet.getZSLevel()+"转"+e.propSet.getLevel()+"级":e.propSet.getLevel()+"级",this.charIcon.source="name_"+e.propSet.getAP_JOB()+"_"+e.propSet.getSex();var n=t.VipData.ins().getMyVipLv();this.vipImg.source="name_hy"+n,n>1&&6>n?(this.vipbg.source="eff_"+n,this.vipbg.visible=!0):this.vipbg.visible=!1,n>5?(this.vipEffGrp.visible=!0,this.vipMc||(this.vipMc=t.ObjectPool.pop("app.MovieClip"),this.vipMc.blendMode=egret.BlendMode.ADD,this.vipEffGrp.addChild(this.vipMc)),6==n?this.vipMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_cxhy",-1,null,!1):7==n&&this.vipMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_cyhy",-1,null,!1)):this.vipEffGrp.visible=!1;var s=e.propSet.getHp()>e.propSet.getMaxHp()?e.propSet.getMaxHp():e.propSet.getHp(),a=e.propSet.getCurMp()>e.propSet.getMaxMp()?e.propSet.getMaxMp():e.propSet.getCurMp(),r=this.hpMc.mask,o=this.mpMc.mask;r.y=109*(1-s/e.propSet.getMaxHp())-50,o.y=109*(1-a/e.propSet.getMaxMp())-50;var l=+e.propSet.getmultipleExp();if(l=l?l:0,this.currentMultipleExp>-1&&this.currentMultipleExp!=l)if(l>this.currentMultipleExp){var h=t.ObjectPool.pop("app.MovieClip");h.blendMode=egret.BlendMode.ADD;var p=e.localToGlobal(),u=this.expGroup.localToGlobal();u.x+=30,h.x=p.x,h.y=p.y,h.rotation=t.MathUtils.getAngle2(p.x,p.y,u.x,u.y),this.addGroup.addChild(h),egret.Tween.removeTweens(h),h.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_dbjy",-1);var c=this,g=egret.Tween.get(h),d=1.8*t.MathUtils.getDistanceByObject(h,u);g.to({x:u.x,y:u.y},d).call(function(){egret.Tween.removeTweens(h),h.destroy(),h=null,c.doubleExpMc(1),c.doubleRoleExp.value=l,c.doubleExpLab.text=l+""})}else this.doubleExpMc(0),this.doubleRoleExp.value=l,this.doubleExpLab.text=l+"";else this.doubleRoleExp.value=l,this.doubleExpLab.text=l+"";this.currentMultipleExp=l,this.doubleRoleExp.maximum=t.GlobalConfig.GlobalConf.maxexp;var m=t.GlobalConfig.LevelUpExp[+e.propSet.getLevel()];if(m){var f=100*+e.propSet.getEXP(),v=Math.floor(f/m.value);this.expLab.text=v+"b",this.roleExp.value=v+2,this.roleExp.maximum=100}for(var _=0;_<this.pkArr.length;_++)if(this.pkArr[_].index==e.propSet.getPKtype()){this.patternButton.icon=this.pkArr[_].img;break}}else this.levelLab.text="",this.expLab.text="",this.multipleExp.text="",this.bubbleLabel.visible=!1;this.updateTime()},i.prototype.doubleExpMc=function(e){e?(this.addExpMc||(this.addExpMc=t.ObjectPool.pop("app.MovieClip"),this.addExpMc.blendMode=egret.BlendMode.ADD,this.expMcGroup.addChild(this.addExpMc)),this.addExpMc.visible=!0,this.addExpMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jszj",1,this.stopAddMc.bind(this))):(this.delExpMc||(this.delExpMc=t.ObjectPool.pop("app.MovieClip"),this.delExpMc.blendMode=egret.BlendMode.ADD,this.expMcGroup.addChild(this.delExpMc)),this.delExpMc.visible=!0,this.delExpMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jsjy",1,this.stopDelMc.bind(this)))},i.prototype.stopAddMc=function(){this.addExpMc&&(this.addExpMc.destroy(),this.addExpMc=null)},i.prototype.stopDelMc=function(){this.delExpMc&&(this.delExpMc.destroy(),this.delExpMc=null)},i.prototype.updateSkillCD=function(){for(var e=t.SettingMgr.ins().keyInfo,i=-1,n=0;n<this.skillNum;n++)if(this["skill"+n].stopTween(),e[n]&&0!=e[n].id)if(1==e[n].type){var s=t.EntityMgr.ins().getPayer.getUserSkill(e[n].id);if(s){var a=t.GlobalConfig.SkillsLevelConf[e[n].id][s.nLevel];if(a){var r=s.dwResumeTick-egret.getTimer();r>0&&(this["skill"+n].playTween3(a.cooldownTime,r,!0),i++)}}}else if(0==e[n].type){var o=t.BagMgr.ins().cdItemArr[e[n].id],l=t.GlobalConfig.StdItems[e[n].id];if(o){var r=o-egret.getTimer();l&&r>0&&(this["skill"+n].playTween3(l.cdTime/1e3,l.cdTime-r,!1),i++)}}-1==i&&t.TimerManager.ins().remove(this.updateSkillCD,this)},i.prototype.updateKeyUI=function(){for(var e=t.SettingMgr.ins().keyInfo,i=0;i<this.skillNum;i++)if(e[i]&&0!=e[i].id){if(1==e[i].type){var n=t.GlobalConfig.SkillsLevelConf[e[i].id][1];n&&(this.isTweenOver||(this["skill"+i].setSkillImg(n.skillName),this["skill"+i].ID=n.id,this["skill"+i].TYPES=e[i].type,this["skill"+i].setCountState(!1)))}else if(0==e[i].type){var s=t.GlobalConfig.StdItems[e[i].id];if(s){this["skill"+i].setSkillImg(s.icon+""),this["skill"+i].ID=s.id,this["skill"+i].TYPES=e[i].type;var a=t.BagMgr.ins().getItemCountById(s.id);this["skill"+i].setCountState(!0),this["skill"+i].setCount(a)}}}else this["skill"+i].setSkillImg(""),this["skill"+i].setCountState(!1),this["skill"+i].ID=null,this["skill"+i].TYPES=null;this.bagMaxImage.visible=t.BagMgr.ins().getBagTypeItemNum(1)<=0},i.prototype.updateSkillTips=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getLevel(),n=t.GlobalConfig.TimeManagerConfigConfig.Skillguide;if(t.ViewManager.ins().isCheckOpen(n)){var s=e.propSet.getAP_JOB(),a=t.SkillMgr.ins().getJobSkillredDot(s)>0;a||(this._isShow=!1),this._skillTipsRoleLevel==i&&this._isShow||(this.skillTipsImage.visible=a,a&&(this._skillTipsRoleLevel=i,this._isShow=!0))}},i.prototype.hideSkillTips=function(){this.skillTipsImage.visible=!1},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.$onClose(),this.ackArr.length=0,this._selfMapId=0,t.TimerManager.ins().remove(this.updateAllAckList,this),egret.Tween.removeTweens(this.addGroup),this.closeExpMc(),this.expDian.clsoeTween(),this.expDian0.clsoeTween(),this.expDian1.clsoeTween(),this.expDian2.clsoeTween(),this.expDian3.clsoeTween(),this.chatView.close(),this.stopAddMc(),this.stopDelMc(),this.stopTaskMC(),this.clickStage(),this.rechargeEff&&(this.rechargeEff.destroy(),this.rechargeEff=null),this.hpMc&&(this.hpMc.mask=null,this.hpMc.destroy(),this.hpMc=null),this.mpMc&&(this.mpMc.mask=null,this.mpMc.destroy(),this.mpMc=null),this.clientguideTips&&(this.clientguideTips.destroy(),this.clientguideTips=null),this.donationGuideTips&&(this.donationGuideTips.destroy(),this.donationGuideTips=null),this.firstChargeTips&&(this.firstChargeTips.destroy(),this.firstChargeTips=null),this.secondChargeTips&&(this.secondChargeTips.destroy(),this.secondChargeTips=null),this.violentGuideTips&&(this.violentGuideTips.destroy(),this.violentGuideTips=null),this.vipGuideTips&&(this.vipGuideTips.destroy(),this.vipGuideTips=null);for(var n=0;n<this.skillNum;n++)this["skill"+n].removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this["skill"+n].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.keyClick,this),this["skill"+n].removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMouseMove,this),this["skill"+n].removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMouseMove,this),this["skillMC"+n].destroy();for(var s in this.ruleList){var a=this.ruleList[s];a.removeAll()}for(var r,o=0;o<this.buttonAry.length;o++)r=this.buttonAry[o],r.btn.removeButton();this.ruleList={},this.ruleParent={},this.ruleKey={},this.skillArr=[],t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.newGrp.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),gamelib.os.KeyBoard.removeKeyDown(this.keyDown,this),gamelib.os.KeyBoard.removeKeyUp(this.keyUp,this),t.EventManager.ins().removeEvent(t.CompEvent.DRAG_END,this.onDragEnd,this),t.EventManager.ins().removeEvent(t.MainEvent.UPDATE_DISPOSABLE_RED,this.updateDisposableredpoint,this),t.EventManager.ins().removeEvent(t.MainEvent.PLAY_EFF_JIJN,this.playJnjhboom,this),t.EventManager.ins().removeEvent(t.MainEvent.PLAY_EFF_JIJN_END,this.playJnjhboomEnd,this),t.EventManager.ins().removeEvent(t.MainEvent.HIDE_SKILL_TIPS,this.hideSkillTips,this),t.EventManager.ins().removeEvent(t.ChatEvent.CHAT_CHANNEL_CHANGE,this.chatChannelChange,this),this.dSpriteSheet.dispose(),this.dSpriteSheet=null,this.attackList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.listClick,this),this.removeTouchEvent(this.actEquipGrp,this.onClick),this.removeTouchEvent(this.actLevelGrp,this.onClick),this.removeTouchEvent(this.actMonsterBtn,this.onClick),this.removeTouchEvent(this.actCircleBtn,this.onClick),this.removeTouchEvent(this.actMonsterGrp,this.onClick),this.removeTouchEvent(this.actCircleGrp,this.onClick),this.removeTouchEvent(this.addGrpBtn,this.onClick),this.removeTouchEvent(this.shengQuAddGrpBtn,this.onClick),this.removeTouchEvent(this.chatBtn,this.onClick),this.removeTouchEvent(this.suitBtn,this.onClick),this.removeTouchEvent(this.iconToggle,this.onClick),this.removeTouchEvent(this.drugBtn,this.onClick),this.removeTouchEvent(this.pickupBtn,this.onClick),this.removeTouchEvent(this.splitBtn,this.onClick),this.removeTouchEvent(this.qqOpenID,this.onClick),this.removeTouchEvent(this.patternButton,this.onClick),this.removeTouchEvent(this.shieldNearButton,this.onClick),this.removeTouchEvent(this.shieldGuildButton,this.onClick),this.removeTouchEvent(this.shieldPrivateButton,this.onClick),this.removeTouchEvent(this.ruletipsButton,this.onClick),this.removeTouchEvent(this.ruletipsButton,this.onClick),this.removeTouchEvent(this.topGroup,this.onClick),this.removeTouchEvent(this.switchButton,this.onClick),this.removeTouchEvent(this.rechargeButton,this.onClick),this.removeTouchEvent(this.stretchBtn,this.onClick),this.removeTouchEvent(this.vipImg,this.onClick),this.removeTouchEvent(this.donationGuideTipsGrp,this.onClick),this.removeTouchEvent(this.firstChargeTipsGrp,this.onClick),this.removeTouchEvent(this.secondChargeTipsGrp,this.onClick),this.removeTouchEvent(this.violentGuideTipsGrp,this.onClick),this.removeTouchEvent(this.vipGuideTipsGrp,this.onClick),this.removeMouseOverEvent(this.levelGroup,this.mouseMove),this.removeMouseOverEvent(this.expGroup,this.mouseMove),this.removeMouseOverEvent(this.hpGroup,this.mouseMove),this.removeMouseOverEvent(this.mpGroup,this.mouseMove),this.removeMouseMoveEvent(this.levelGroup,this.mouseMove),this.removeMouseMoveEvent(this.expGroup,this.mouseMove),this.removeMouseMoveEvent(this.hpGroup,this.mouseMove),this.removeMouseMoveEvent(this.mpGroup,this.mouseMove),this.removeMouseOverEvent(this.shieldNearButton,this.chatBtnMouseMove),this.removeMouseMoveEvent(this.shieldNearButton,this.chatBtnMouseMove),this.removeMouseOverEvent(this.shieldGuildButton,this.chatBtnMouseMove),this.removeMouseMoveEvent(this.shieldGuildButton,this.chatBtnMouseMove),this.removeMouseOverEvent(this.shieldPrivateButton,this.chatBtnMouseMove),this.removeMouseMoveEvent(this.shieldPrivateButton,this.chatBtnMouseMove),this.removeMouseOverEvent(this.patternButton,this.chatBtnMouseMove),this.removeMouseMoveEvent(this.patternButton,this.chatBtnMouseMove),this.removeMouseOverEvent(this.ruletipsButton,this.chatBtnMouseMove),this.removeMouseMoveEvent(this.ruletipsButton,this.chatBtnMouseMove),this.removeMouseOverEvent(this.chatBtn,this.chatBtnMouseMove),this.removeMouseMoveEvent(this.chatBtn,this.chatBtnMouseMove),t.StageUtils.ins().getStage().removeEventListener(egret.Event.RESIZE,this.keyInfo,this),t.EventManager.ins().removeEvent(t.CompEvent.TimerEvent,this.onTimerStart,this),t.EventManager.ins().removeEvent(t.CompEvent.Clear_Timer_Event,this.onClearTimer,this),this.removeRuleEvent(),t.DisplayUtils.removeFromParent(this.newGrp),t.TimerManager.ins().removeAll(this),this.itemImagAry.length=0;for(var n=0;n<this.addGroup.$children.length;n++)egret.Tween.removeTweens(this.addGroup.$children[n]);this.addGroup.removeChildren()},i.prototype.onTouchBegin=function(e){if(e.target.parent instanceof t.MainSkillIconItem){this.curObj=e.currentTarget,this.newIcon.source=this.curObj.getSkillImg(),this.grpOldIdx=e.currentTarget.keyIndex;var i=e.currentTarget.localToGlobal(0,0);this.newGrp.x=i.x,this.newGrp.y=i.y,this.newGrp._index=e.currentTarget.keyIndex,this.oldstoreX=i.x,this.oldstoreY=i.y,this.XTouch=e.stageX-this.newGrp.x,this.YTouch=e.stageY-this.newGrp.y,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}},i.prototype.onTouchMove=function(t){this.newGrp.visible=!0,this.newGrp.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this);var e=this.curObj.getChildAt(1);e.visible=!1,this.curObj.setSkillImg(""),this.newGrp.x=t.stageX-this.XTouch,this.newGrp.y=t.stageY-this.YTouch},i.prototype.onTouchEnd=function(e){if(1==this.newGrp.visible){for(var i=this,n=-1,s=20,a=0,r=this["skill"+this.grpOldIdx].TYPES,o=this["skill"+this.grpOldIdx].ID,l=void 0,h=0;h<this.skillNum;h++)l=this.skillArr[h].parent.localToGlobal(this.skillArr[h].x,this.skillArr[h].y),a=Math.sqrt(Math.pow(l.x-i.newGrp.x,2)+Math.pow(l.y-i.newGrp.y,2)),s>a&&(s=a,n=h);if(-1!=n&&n!=this.grpOldIdx){var p=0;0==r&&(p=t.BagMgr.ins().getItemCountById(o)),1==r||p>0?t.SettingMgr.ins().send_17_2(n,r,o,i.grpOldIdx):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips3),egret.Tween.removeTweens(i.newGrp),egret.Tween.get(i.newGrp).to({x:i.oldstoreX,y:i.oldstoreY},0,egret.Ease.cubicOut)}else n==this.grpOldIdx?(egret.Tween.removeTweens(i.newGrp),egret.Tween.get(i.newGrp).to({x:i.oldstoreX,y:i.oldstoreY},400,egret.Ease.cubicOut)):(egret.Tween.removeTweens(i.newGrp),egret.Tween.get(i.newGrp).to({x:i.oldstoreX,y:i.oldstoreY},400,egret.Ease.cubicOut),1!=r&&t.SettingMgr.ins().send_17_3(i.grpOldIdx))}t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.newGrp.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.newGrp.x=691,this.newGrp.y=966,this.newGrp.visible=!1,this.updateKeyUI()},i.prototype._clickFunction=function(e){switch(e.index){case 0:t.ViewManager.ins().open(t.SetUpView);break;case 1:t.ViewManager.ins().open(t.ChangePowerfulWin);break;case 2:t.ViewManager.ins().open(t.SwitchPlayerView);break;case 3:}},i.prototype._pkClickFunction=function(e){e.index&&t.PkMgr.ins().s_24_3(e.index)},i.prototype._tradeClickFunction=function(e){switch(e.index){case 1:t.ViewManager.ins().openViewId(12);break;case 2:t.ViewManager.ins().openViewId(11)}},i.prototype._socialClickFunction=function(e){switch(e.index){case 1:t.ViewManager.ins().openViewId(14);break;case 2:t.GuildMgr.ins().sendGuildInfo(!0);break;case 3:t.ViewManager.ins().openViewId(15);break;case 4:t.EventManager.ins().sendEvent(t.CompEvent.HIDE_ICON),t.ViewManager.ins().openViewId(9);break;case 5:var i=t.EntityMgr.ins().getPayer,n=i.propSet.getLevel(),s=t.GlobalConfig.RankConfig.openlv;if(s>n)return void t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips18,s));t.ViewManager.ins().openViewId(10)}},i.prototype.onClick=function(e){var i=!0,n=null,s=null;switch(e.currentTarget){case this.petFollow:this.followCd<=0?(this.followCd=100,this.followRect.width=93,t.PetSettingMgr.ins().send_34_2(),t.TimerManager.ins().doTimer(100,0,this.updateFollowCd,this)):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips105);break;case this.petAck:t.TimerManager.ins().isExists(this.updateActCd,this)?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips105):(t.TimerManager.ins().doTimer(1e3,1,this.updateActCd,this),t.PetSettingMgr.ins().send_34_1(1==this.petState?2:1),this.petAck.label=1==this.petState?t.LanguageUtils.language_Common_135:t.LanguageUtils.language_Common_136,this.petState=1==this.petState?2:1);break;case this.chatBtn:return void(t.ViewManager.ins().isShow(t.ChatWinView)?t.ViewManager.ins().close(t.ChatWinView):t.ViewManager.ins().open(t.ChatWinView));case this.firstChargeTipsGrp:return t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_FIRST_CHARGE_TIPS),void t.ViewManager.ins().open(t.ActvityFirstChargeView);case this.secondChargeTipsGrp:return t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_SECOND_CHARGE_TIPS),void t.ViewManager.ins().open(t.ActvitySecondChargeView);case this.vipImg:case this.vipGuideTipsGrp:return t.GameSocket.IsCrossService?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips139):(t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_VIP_GUIDE_TIPS),void t.ViewManager.ins().open(t.VipView));case this.stretchBtn:return this.buttonGroup.visible=!this.buttonGroup.visible,this.btnBg.height=this.buttonGroup.visible?352:106,this.stretchBtn.scaleY=this.buttonGroup.visible?1:-1,void(this.teamButton2.visible=this.buttonGroup.visible?!1:!0);case this.switchButton:return void t.ViewManager.ins().open(t.SwitchPlayerView);case this.rechargeButton:return void t.RechargeMgr.ins().onPay("");case this.shieldNearButton:return t.ChatView.isCloseNearChannel?(this.shieldNearButton.icon="m_chat_ltpb_fj1",t.ChatView.isCloseNearChannel=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetOpenNear_Tips)):(this.shieldNearButton.icon="m_chat_ltpb_fj2",t.ChatView.isCloseNearChannel=!0,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetCloseNear_Tips)),void t.EventManager.ins().sendEvent(t.ChatEvent.CHAT_CHANNEL_CHANGE,{type:1,view:!1});case this.shieldGuildButton:return t.ChatView.isCloseGuildChannel?(this.shieldGuildButton.icon="m_chat_ltpb_hh1",t.ChatView.isCloseGuildChannel=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetOpenGuild_Tips)):(this.shieldGuildButton.icon="m_chat_ltpb_hh2",t.ChatView.isCloseGuildChannel=!0,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetCloseGuild_Tips)),void t.EventManager.ins().sendEvent(t.ChatEvent.CHAT_CHANNEL_CHANGE,{type:2,view:!1});case this.shieldPrivateButton:return t.ChatView.isClosePrivateChannel?(this.shieldPrivateButton.icon="m_chat_ltpb_sl1",t.ChatView.isClosePrivateChannel=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetOpenPrivate_Tips)):(this.shieldPrivateButton.icon="m_chat_ltpb_sl2",t.ChatView.isClosePrivateChannel=!0,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Chat_ShowSetClosePrivate_Tips)),void t.EventManager.ins().sendEvent(t.ChatEvent.CHAT_CHANNEL_CHANGE,{type:3,view:!1});case this.ruletipsButton:return void t.ViewManager.ins().open(t.RuleView,{id:9});case this.patternButton:var a=this.pkArr.slice(0,this.pkArr.length-1);return this.pkSelect.dataProvider=a,void this.pkSelect.showView();case this.suitBtn:t.CautionView.show(t.LanguageUtils.language_Tips48,function(){t.FuBenMgr.ins().send_20_2(t.GameMap.fubenID)},this);break;case this.iconToggle:for(var r=!this.iconToggle.selected,o=0;o<this.lyaer4.numChildren;o++){var l=this.lyaer4.getChildAt(o);26!=l.ID&&37!=l.ID&&78!=l.ID&&(l.visible=r)}for(var o=0;o<this.lyaer6.numChildren;o++){var h=this.lyaer6.getChildAt(o);26!=h.ID&&37!=h.ID&&78!=h.ID&&(h.visible=r)}return this.sbkCdGrp.visible=r,1==this.sbkCdGrp.visible&&this.setSbkTimeLab(),this.toggleRed.visible=!1,1==this.iconToggle.selected&&(this.toggleRed.visible=!0,this.redArr.length>0?this.toggleRed.setRedImg(1):this.yellowArr.length>0?this.toggleRed.setRedImg(2):this.toggleRed.visible=!1),this.donationGuideTipsGrp.visible=r,this.firstChargeTipsGrp.visible=r,this.secondChargeTipsGrp.visible=r,this.violentGuideTipsGrp.visible=r,this.vipGuideTipsGrp.visible=r,void(t.MainManager.ins().isShowActivityIcon=r);case this.drugBtn:return void t.ViewManager.ins().open(t.SetUpView,2);case this.pickupBtn:return void t.ViewManager.ins().open(t.SetUpView,1);case this.splitBtn:return void t.ViewManager.ins().open(t.SetUpView,5);case this.addGrpBtn:case this.shengQuAddGrpBtn:return void window.addQQGrp();case this.qqOpenID:if(1==this.qqGrp.visible&&Main.gameParameter.userInfo.openid){var p=document.createElement("input");p.value=Main.gameParameter.userInfo.openid,document.body.appendChild(p),p.select(),p.setSelectionRange(0,p.value.length),document.execCommand("Copy"),document.body.removeChild(p),t.UserTips.ins().showUITips("已复制到粘贴板")}return;case this.topGroup:if(!this.rightMenuView.visible){var u=t.EntityMgr.ins().getCharRole(this.recog);u||(u=t.EntityMgr.ins().getDummyChar(this.recog)),u&&(u.isCharRole||u.isDummyCharRole)&&(t.GlobalData.otherPlayerId=u.propSet.getACTOR_ID(),t.GlobalData.otherPlayerName=u.propSet.getName(),t.GlobalData.otherPlayerIdDummy=u.isDummyCharRole,this.rightMenuView.setData(),t.ViewManager.ins().isShow(t.OtherPlayerView)&&t.ViewManager.ins().close(t.OtherPlayerView),this.rightMenuView.y=66,this.rightMenuView.x=-20,this.rightMenuView.visible=!0,e&&e.stopPropagation(),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickStage,this))}return;case this.violentGuideTipsGrp:return t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_VIOLENT_TIPS),void t.ViewManager.ins().open(t.ViolentStateWin);case this.donationGuideTipsGrp:return t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_DONATION_TIPS),void t.ViewManager.ins().open(t.DonationRankWin);case this.actCircleGrp:return void(t.ViewManager.ins().isShow(t.OpenServerSportsWin)||t.ViewManager.ins().open(t.OpenServerSportsWin,this.circleTipsActID));case this.actMonsterGrp:return void(t.ViewManager.ins().isShow(t.OpenServerSportsWin)||t.ViewManager.ins().open(t.OpenServerSportsWin,this.actMonsterActID));case this.actLevelGrp:return void(t.ViewManager.ins().isShow(t.OpenServerSportsWin)||t.ViewManager.ins().open(t.OpenServerSportsWin,this.actTipsID));case this.actEquipGrp:return void(t.ViewManager.ins().isShow(t.OpenServerSportsWin)||t.ViewManager.ins().open(t.OpenServerSportsWin,this.sprotesEquipActID));case this.actMonsterBtn:return this.actMonsterGrp.visible=!this.actMonsterIsShow,this.actMonsterBtn.scaleX=this.actMonsterIsShow?-1:1,void(this.actMonsterIsShow=!this.actMonsterIsShow);case this.actCircleBtn:return this.actCircleGrp.visible=!this.actCircleIsShow,this.actCircleBtn.scaleX=this.actCircleIsShow?-1:1,void(this.actCircleIsShow=!this.actCircleIsShow)}n&&(t.ViewManager.ins().isShow(n)?t.ViewManager.ins().close(n):i&&t.ViewManager.ins().open(n,s))},i.prototype.keyClick=function(e){e.target.parent instanceof t.MainSkillIconItem&&t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)},i.prototype.skillCD=function(e){t.TimerManager.ins().isExists(this.updateSkillCD,this)||t.TimerManager.ins().doTimer(10,0,this.updateSkillCD,this)},i.prototype.itemCd=function(e){t.TimerManager.ins().isExists(this.updateSkillCD,this)||t.TimerManager.ins().doTimer(10,0,this.updateSkillCD,this)},i.prototype.playSkillKeyEff=function(t){for(var e,i=function(i){if(e=n.skillArr[i],e.ID==t.id){var s=n["skillMC"+e.keyIndex];return s&&(s.visible=!0,s.playFileEff(ResDirEnum.RES_DIR_EFF+t.skillName,1,function(){s.visible=!1},!1)),{value:void 0}}},n=this,s=0;s<this.skillArr.length;s++){var a=i(s);if("object"==typeof a)return a.value}},i.prototype.keyInfo=function(){t.BagMgr.ins().keyXY.length=0;for(var e=0;e<this.skillNum;e++){var i=new Object,n=this["skill"+e].localToGlobal(0,0);i.x=n.x,i.y=n.y,t.BagMgr.ins().keyXY.push(i)}this.setSbkTimeLab()},i.prototype.updateBuff=function(){t.EntityMgr.ins().getPayer&&(this.buffList4.dataProvider=new eui.ArrayCollection(t.EntityMgr.ins().getPayer.buffType4Ary),this.buffList.dataProvider=new eui.ArrayCollection(t.EntityMgr.ins().getPayer.buffTypeAry))},i.prototype.updateSavior=function(){t.EntityMgr.ins().getPayer&&(t.EntityMgr.ins().getPayer.saviorBuff.length>0?(this.buffList.x=130,this.saviorBuff.visible=!0,this.saviorBuff.data=t.EntityMgr.ins().getPayer.saviorBuff[0]):(this.buffList.x=89,this.saviorBuff.visible=!1))},i.prototype.onDragEnd=function(e){for(var i,n=e[0],s=n.point.x,a=n.point.y,r=0,o=this.skillArr.length;o>r;r++)if(i=this.skillArr[r].parent.localToGlobal(this.skillArr[r].x,this.skillArr[r].y),i.x<s&&s<i.x+this.skillArr[r].width&&i.y<a&&a<i.y+this.skillArr[r].height){n.target.visible=!1;var l=n.from.localToGlobal(0,0);if(n.target.x=l.x,n.target.y=l.y,n.from.parent){var h=n.from.parent.data;t.SettingMgr.ins().send_17_2(r,t.ShortcutKeySetView.TYPE,h.skillId,t.ShortcutKeySetView.OLD_POS),t.EventManager.ins().sendEvent(t.CompEvent.SHORTCUTKEY,[{dragName:n.from.name,state:r}])}return}var p=n.from.localToGlobal(0,0);egret.Tween.get(n.target).to({x:p.x,y:p.y},100,egret.Ease.sineInOut).call(function(){n.target.visible=!1})},i.prototype.initRuleList=function(){for(var e in this.ruleList){var i=this.ruleList[e];i.removeAll()}this.ruleList={},this.ruleParent={},this.ruleKey={};var n=t.GlobalConfig.PlayFunConfig;for(var s in n){var a=n[s];if((!a.pfIDArray||-1!=a.pfIDArray.indexOf(Main.gameParameter.pfID))&&a.layer){var r=a.cls?egret.getDefinitionByName(a.cls):t.RuleIconBase;r?t.GameSocket.IsCrossService?a.displayType&&(1==a.displayType||2==a.displayType)&&this.addRuleList(new r(a.id)):a.displayType&&2!=a.displayType||this.addRuleList(new r(a.id)):t.CommonPopView.ins().showTextView("功能入口配置错误，id:"+s+" cls:"+a.cls)}}this.addRuleEvent(),this.updateButton()},i.prototype.addRuleList=function(e){var i=t.GlobalConfig.PlayFunConfig[e.id];i.layer&&this.rulePos[i.layer]&&(this.ruleList[e.hashCode]=e,e.tar&&e.tar.parent?(this.ruleParent[e.hashCode]=e.tar.parent,e.tar.parent.removeChild(e.tar)):this.ruleParent[e.hashCode]=this.rulePos[i.layer],this.updateRule(e))},i.prototype.getRuleBtId=function(t){for(var e in this.ruleList)if(this.ruleList[e].id==t)return this.ruleList[e];return null},i.prototype.updateButton=function(){var t=!1;for(var e in this.ruleList){var i=this.ruleList[e];this.updateShow(i)&&(t=!0)}t&&(this.sortBtnList(),this.setSbkTimeLab())},i.prototype.sortRule=function(e,i){var n=t.GlobalConfig.PlayFunConfig[e.id],s=t.GlobalConfig.PlayFunConfig[i.id];return n.sort>s.sort?1:-1},i.prototype.updateShow=function(e){var i,n=e.checkShowIcon();if(e.isShow==n)return!1;if(e.isShow=n,n){i=e.getTar(),e.addEventListeners();var s=this.ruleParent[e.hashCode];s&&s.addChild(i),i.visible=!0,26!=i.ID&&37!=i.ID&&78!=i.ID&&(t.MainManager.ins().isShowActivityIcon||(i.visible=!1))
}else i=e.tar,i&&(e.removeEventListeners(),t.DisplayUtils.removeFromParent(i),t.DisplayUtils.removeFromParent(this.ruleEff[i.hashCode]));return!0},i.prototype.sortBtnList=function(){this.ruleKey={};var t,e,i={1:[],2:[],3:[],4:[],5:[],6:[],7:[]};for(var n in this.ruleList)t=this.ruleList[n],e=t.getConfig(),e.layer&&t.isShow&&(i[e.layer].push(t),e.keys&&e.keys.length&&(this.ruleKey[e.keys[e.keys.length-1]]=t.hashCode));var s=i[1];s=s.sort(this.sortRule);for(var n=0;n<s.length;n++){if(t=s[n],e=t.getConfig(),e.layer&&(t.tar.right=80*n,e.position))for(var a in e.position)t.tar[a]=e.position[a];e.layer}s=i[4],s=s.sort(this.sortRule);for(var n=0;n<s.length;n++){if(t=s[n],e=t.getConfig(),t.tar.right=80*n,e.position)for(var a in e.position)t.tar[a]=e.position[a];51==e.id?this.donationGuideTipsGrp.right=this.lyaer4.right+t.tar.right+80:50==e.id?this.violentGuideTipsGrp.right=this.lyaer4.right+t.tar.right+80:37==e.id&&(this.vipGuideTipsGrp.right=this.lyaer4.right+t.tar.right+80)}s=i[5],s=s.sort(this.sortRule);for(var n=0;n<s.length;n++)if(t=s[n],e=t.getConfig(),t.tar.x=52*n,e.position)for(var a in e.position)t.tar[a]=e.position[a];s=i[6],s=s.sort(this.sortRule);for(var n=0;n<s.length;n++)if(t=s[n],e=t.getConfig(),t.tar.right=80*n,e.position)for(var a in e.position)t.tar[a]=e.position[a];s=i[7],s=s.sort(this.sortRule);for(var n=0;n<s.length;n++)if(t=s[n],e=t.getConfig(),t.tar.x=80*n,e.position)for(var a in e.position)t.tar[a]=e.position[a]},i.prototype.updateRuleAndSort=function(e){t.TimerManager.ins().doTimer(1e3,1,function(){this.updateShow(e)&&(this.sortBtnList(),this.setSbkTimeLab())},this)},i.prototype.setSbkTimeLab=function(){if(!this.iconToggle.selected){var e=t.GlobalConfig.ActivityNoticeConfig[1][this._actID];e&&0!=t.GlobalData.sectionOpenDay&&t.ViewManager.ins().isCheckOpen(e.isOpenNeed)&&t.TimerManager.ins().doTimer(100,1,function(){for(var e=t.GameSocket.IsCrossService?4:6,i=0;i<this["lyaer"+e].numChildren;i++){var n=this["lyaer"+e].getChildAt(i),s=t.GameSocket.IsCrossService?68:49;if(n.ID==s){var a=n.localToGlobal();this.sbkCdGrp.x=a.x-15,this.sbkCdGrp.y=a.y+73}}},this)}},i.prototype.updateRule=function(e){var i=e.getTar();if(i.redImage){var n=e.checkShowRedPoint();i.redImage.visible=n>0,i.redImage.source=1==n?"common_hongdian":"common_chengdian"}var s=e.getEffName(e.checkShowRedPoint());if(s)if(this.ruleEff[i.hashCode]&&this.ruleEff[i.hashCode].parent)this.ruleEff[i.hashCode].play(-1);else{var a=this.getEff(i.hashCode,s);"eff_tygq_1"!=s&&(a.blendMode=egret.BlendMode.ADD),a.x=e.effX,a.y=e.effY,i.addChildAt(a,100)}else t.DisplayUtils.removeFromParent(this.ruleEff[i.hashCode]);this.updateToggleRed(e)},i.prototype.getEff=function(e,i){return this.ruleEff[e]=this.ruleEff[e]||new t.MovieClip,i&&this.ruleEff[e].playFile(ResDirEnum.RES_DIR_EFF+i,-1),this.ruleEff[e]},i.prototype.updateCount=function(e){var i=e.getTar();if(i.txtCount)if(e instanceof t.FlyShoesRuleIcon){var n=t.EntityMgr.ins().getPayer.propSet.getFlyshoes();i.txtCount.text=n}else i.txtCount.text=""},i.prototype.addRuleEvent=function(){for(var t in this.ruleList){var e=this.ruleList[t];e.addShowEvents(),e.addCountEvents(),e.addRedEvents()}},i.prototype.removeRuleEvent=function(){for(var t in this.ruleList){var e=this.ruleList[t];e.removeEvents()}},i.prototype.getImage=function(){return this.itemImagAry.shift()||new eui.Image},i.prototype.pushImage=function(e){t.DisplayUtils.removeFromParent(e),egret.Tween.removeTweens(e),e.source=null,this.itemImagAry.push(e)},i.prototype.addItem=function(t){if(this.bagButton&&t){var e=this.getImage();e.source=t.source,e.x=t.point.x,e.y=t.point.y,this.addGroup.addChild(e),this.addTweens(e)}},i.prototype.addTweens=function(e){var i=this.bagButton.localToGlobal(),n=this,s=egret.Tween.get(e),a=.8*t.MathUtils.getDistanceByObject(e,i);s.to({x:i.x,y:i.y},a).call(function(){n.pushImage(this)})},i.prototype.addSkillTween=function(t,e){},i.prototype.updateOnHook=function(){t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(500,1,this.updateTime,this)},i.prototype.updateTime=function(){if(t.PlayerRoleAI.ins().isOpen){if(this.effMC)return;this.effMC=t.ObjectPool.pop("app.MovieClip"),this.effMC.x=this.effMC.y=0,this.effGroup.addChild(this.effMC),this.paoDianMC&&(this.paoDianMC.destroy(),this.paoDianMC=null),this.xunLuMC&&(this.xunLuMC.destroy(),this.xunLuMC=null),this.autoPkMc&&(this.autoPkMc.destroy(),this.autoPkMc=null),this.effMC.x=0,this.effMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zdzd1",-1),this.onHookGroup.visible=!0,this.effMC.visible=!0}else if(t.PlayerRoleAI.ins().isFinding){if(this.xunLuMC)return;this.xunLuMC=t.ObjectPool.pop("app.MovieClip"),this.xunLuMC.x=this.xunLuMC.y=0,this.effGroup.addChild(this.xunLuMC),this.paoDianMC&&(this.paoDianMC.destroy(),this.paoDianMC=null),this.effMC&&(this.effMC.destroy(),this.effMC=null),this.autoPkMc&&(this.autoPkMc.destroy(),this.autoPkMc=null),this.xunLuMC.x=50,this.xunLuMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zdxl1",-1),this.onHookGroup.visible=!1,this.xunLuMC.visible=!0}else if(t.PlayerRoleAI.ins().attackState){if(this.autoPkMc)return;this.autoPkMc=t.ObjectPool.pop("app.MovieClip"),this.autoPkMc.x=this.autoPkMc.y=0,this.effGroup.addChild(this.autoPkMc),this.paoDianMC&&(this.paoDianMC.destroy(),this.paoDianMC=null),this.effMC&&(this.effMC.destroy(),this.effMC=null),this.xunLuMC&&(this.xunLuMC.destroy(),this.xunLuMC=null),this.autoPkMc.x=50,this.autoPkMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_znpk1",-1),this.onHookGroup.visible=!1,this.autoPkMc.visible=!0}else if(t.GameMap.isBubble&&t.GameMapInfo.ins().getIsSafe){if(this.paoDianMC)return;this.paoDianMC=t.ObjectPool.pop("app.MovieClip"),this.paoDianMC.x=this.paoDianMC.y=0,this.effGroup.addChild(this.paoDianMC),this.xunLuMC&&(this.xunLuMC.destroy(),this.xunLuMC=null),this.effMC&&(this.effMC.destroy(),this.effMC=null),this.autoPkMc&&(this.autoPkMc.destroy(),this.autoPkMc=null),this.paoDianMC.x=50,this.paoDianMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zdpd1",-1),this.onHookGroup.visible=!1,this.paoDianMC.visible=!0}else this.onHookGroup.visible=!1,this.paoDianMC&&(this.paoDianMC.destroy(),this.paoDianMC=null),this.effMC&&(this.effMC.destroy(),this.effMC=null),this.xunLuMC&&(this.xunLuMC.destroy(),this.xunLuMC=null),this.autoPkMc&&(this.autoPkMc.destroy(),this.autoPkMc=null)},i.prototype.changeMoney=function(){var e=t.EntityMgr.ins().getPlayerPropertySet();if(e&&e.propSet){var i=e.propSet;this.bindGoldNum.text=t.CommonUtils.zhuanhuan(i.getBindCoin()),this.yuanbaoNum.text=t.CommonUtils.zhuanhuan(i.getNotBindYuanBao())}else this.yuanbaoNum.text="0",this.bindGoldNum.text="0"},i.prototype.setActTimeCD=function(){t.TimerManager.ins().remove(this.updateSBKCDTime,this),this.sbkCdGrp.visible=!1,this._actID=t.GameSocket.IsCrossService?26:t.GlobalData.sectionOpenDay<=3?41:13,this.setSbkTimeLab();var e=t.GlobalConfig.ActivityNoticeConfig[1][this._actID];if(e&&0!=t.GlobalData.sectionOpenDay&&t.ViewManager.ins().isCheckOpen(e.isOpenNeed)){var i=t.ActvityMgr.ins().getActivityInfo(this._actID);t.ActvityMgr.ins().getActivityConfigById(this._actID);if(i&&i.redDot)t.TimerManager.ins().remove(this.updateSBKCDTime,this),this.sbkTimeLab.textFlow=t.TextFlowMaker.generateTextFlow("|C:0x28ee01&T:进行中|"),!t.GameSocket.IsCrossService||3!=t.GameMap.mapID&&47!=t.GameMap.mapID&&98!=t.GameMap.mapID?t.GameSocket.IsCrossService&&t.GameMap.fubenID<=0&&(t.ViewManager.ins().isShow(t.FuBenView)&&t.ViewManager.ins().close(t.FuBenView),t.ViewManager.ins().isShow(t.MainTaskWin)||t.ViewManager.ins().open(t.MainTaskWin)):(t.ViewManager.ins().isShow(t.FuBenView)||t.ViewManager.ins().open(t.FuBenView),t.ViewManager.ins().isShow(t.MainTaskWin)&&t.ViewManager.ins().close(t.MainTaskWin));else{t.GameSocket.IsCrossService&&t.GameMap.fubenID<=0&&(t.ViewManager.ins().isShow(t.FuBenView)&&t.ViewManager.ins().close(t.FuBenView),t.ViewManager.ins().isShow(t.MainTaskWin)||t.ViewManager.ins().open(t.MainTaskWin));if(e&&e.TimeDetail)for(var n in e.TimeDetail){var s=e.TimeDetail[n],a=s.StartTime,r=new Date(t.GlobalData.serverTime),o=r.getHours(),l=r.getMinutes(),h=r.getSeconds(),p=r.getDay(),u=0,c=0;if(s.type){if(3==t.GlobalData.sectionOpenDay){var g=a.split(":");if(+g[0]>o||+g[0]==o&&+g[1]>l){if(u=o*t.DateUtils.MS_PER_HOUR+l*t.DateUtils.MS_PER_MINUTE+1e3*h,c=+g[0]*t.DateUtils.MS_PER_HOUR+ +g[1]*t.DateUtils.MS_PER_MINUTE,c>u?this.sbkcdTime=c-u:u>c&&(this.sbkcdTime=t.DateUtils.MS_PER_DAY-(u-c)),this.sbkcdTime>0){this.sbkCdGrp.visible=!0,this.sbkcdTime+=egret.getTimer(),this.updateSBKCDTime(),t.TimerManager.ins().doTimer(1e3,0,this.updateSBKCDTime,this);break}}else t.TimerManager.ins().remove(this.updateSBKCDTime,this),this.sbkCdGrp.visible=!1}}else{var d=a.split("-"),m=d[1].split(":");if(0==p&&7!=+d[0]){this.sbkTimeLab.textFlow=t.TextFlowMaker.generateTextFlow("3天后");break}if(+d[0]==p&&(+m[0]>o||+m[0]==o&&+m[1]>l)||0==p&&7==+d[0]&&(+m[0]>o||+m[0]==o&&+m[1]>l)){if(u=o*t.DateUtils.MS_PER_HOUR+l*t.DateUtils.MS_PER_MINUTE+1e3*h,c=+m[0]*t.DateUtils.MS_PER_HOUR+ +m[1]*t.DateUtils.MS_PER_MINUTE,c>u?this.sbkcdTime=c-u:u>c&&(this.sbkcdTime=t.DateUtils.MS_PER_DAY-(u-c)),this.sbkcdTime>0){this.sbkcdTime+=egret.getTimer(),this.updateSBKCDTime(),t.TimerManager.ins().doTimer(1e3,0,this.updateSBKCDTime,this);break}}else{if(+d[0]==p&&(m[0]<o||m[0]==o&&+m[1]<l)){var f=3==p?"3":6==p?"4":0==p?"7":"";this.sbkTimeLab.textFlow=t.TextFlowMaker.generateTextFlow(f+"天后");break}if(+d[0]>p){this.sbkTimeLab.textFlow=t.TextFlowMaker.generateTextFlow(+d[0]-p+"天后");break}}}}}}},i.prototype.updateSBKCDTime=function(){var e=this.sbkcdTime-egret.getTimer(),i=t.DateUtils.getMainShaBaKeCD(e);this.sbkTimeLab.textFlow=t.TextFlowMaker.generateTextFlow(i),0>=e&&(t.TimerManager.ins().remove(this.updateSBKCDTime,this),this.sbkTimeLab.text="")},i.prototype.listClick=function(e){var i=t.EntityMgr.ins().getPayer;i.lockTarget=e.item.recog;for(var n in this.ruleList)if(39==this.ruleList[n].id){this.ruleList[n].tapExecute(1);break}for(var s=0;s<this.ackArr.length;s++)this.ackArr[s].isSelect=!1,this.ackArr[s].recog==e.item.recog&&(this.ackArr[s].isSelect=!0);this.attackListData.replaceAll(this.ackArr),this.attackListData.refresh()},i.prototype.clickPK=function(){for(var t in this.ruleList)if(39==this.ruleList[t].id){this.ruleList[t].tapExecute(1);break}},i.prototype.updateAckList=function(e){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_counterAtk)){if(e){var i=t.EntityMgr.ins().getCharRole(e);if(i&&i.propSet&&!i.isMy){for(var n=0;n<this.ackArr.length;n++)if(this.ackArr[n].recog==e)return void(this.ackArr[n].time=egret.getTimer());var s=i.propSet.getZSLevel()?i.propSet.getZSLevel()+"转"+i.propSet.getLevel():"Lv"+i.propSet.getLevel();this.ackArr.push({recog:e,time:egret.getTimer(),name:i.charName,lv:s,guild:i.propSet.getGuildName(),job:i.propSet.getAP_JOB(),isSelect:!1}),this.attackGroup.visible=this.ackArr.length>0,this.attackListData.replaceAll(this.ackArr),this.attackListData.refresh()}}}else this.ackArr&&this.ackArr.length>0&&(this.ackArr.length=0,this.attackGroup.visible=this.ackArr.length>0,this.attackListData.replaceAll(this.ackArr),this.attackListData.refresh())},i.prototype.updateAllAckList=function(e){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_counterAtk)){var i=t.EntityMgr.ins().getPayer;if(i.recog==e)this.ackArr.length=0;else{var n=this.ackArr.length;if(e)for(;n--;)this.ackArr[n].recog==e&&this.ackArr.splice(n,1);else for(var s=egret.getTimer();n--;)s-this.ackArr[n].time>2e4&&this.ackArr.splice(n,1)}this.attackGroup.visible=this.ackArr.length>0,this.attackListData.replaceAll(this.ackArr),this.attackListData.refresh()}else this.ackArr&&this.ackArr.length>0&&(this.ackArr.length=0,this.attackGroup.visible=this.ackArr.length>0,this.attackListData.replaceAll(this.ackArr),this.attackListData.refresh())},i.prototype.setAttackGroupVis=function(){t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_counterAtk)||(this.ackArr.length=0,this.attackGroup.visible=this.ackArr.length>0,this.attackListData.replaceAll(this.ackArr),this.attackListData.refresh())},i.prototype.updatePet=function(){this.petGrp.visible=!1;var e=t.EntityMgr.ins().getPayer;e&&e.propSet&&t.PetSettingMgr.ins().petNum>0&&(e.propSet.getPetState()>0&&(this.petState=e.propSet.getPetState(),1==this.petState?this.petAck.label=t.LanguageUtils.language_Common_136:2==this.petState&&(this.petAck.label=t.LanguageUtils.language_Common_135)),this.petState<=0&&(t.PetSettingMgr.ins().send_34_1(2),this.petAck.label=t.LanguageUtils.language_Common_135),this.petGrp.visible=!0)},i.prototype.updateFollowCd=function(){var e=this;this.followCd-=1,this.followRect.visible=!0,this.followRect.width=this.followRect.width-+.93.toFixed(1),0==this.followCd&&(this.followRect.visible=!1,this.petKuang.visible=!0,egret.setTimeout(function(){e.petKuang.visible=!1},this,100),t.TimerManager.ins().remove(this.updateFollowCd,this))},i.prototype.updateActCd=function(){t.TimerManager.ins().remove(this.updateActCd,this)},i.prototype.closeExpMc=function(){this.addDoubleExpMC&&(this.addDoubleExpMC.destroy(),this.addDoubleExpMC=null)},i.prototype.addExp=function(){var e=t.EntityMgr.ins().getPayer;if(e){var i=egret.getTimer();if(i-this.payExpTime>4e3){this.payExpTime=i;var n=e.localToGlobal();this.addDoubleExpMC||(this.addDoubleExpMC=t.ObjectPool.pop("app.MovieClip"),this.addGroup.addChild(this.addDoubleExpMC),this.addDoubleExpMC.blendMode=egret.BlendMode.ADD),this.addDoubleExpMC.x=n.x,this.addDoubleExpMC.y=n.y,this.addDoubleExpMC.visible=!0;var s=this;this.addDoubleExpMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_badypaodian",1,function(){s.closeExpMc()},!1);var a=this.expLab.parent.localToGlobal(-10,-10);this.expDian.scaleX=this.expDian.scaleY=t.MathUtils.limit(5,10)/10,this.expDian0.scaleX=this.expDian0.scaleY=t.MathUtils.limit(5,10)/10,this.expDian1.scaleX=this.expDian1.scaleY=t.MathUtils.limit(5,10)/10,this.expDian2.scaleX=this.expDian2.scaleY=t.MathUtils.limit(5,10)/10,this.expDian3.scaleX=this.expDian3.scaleY=t.MathUtils.limit(5,10)/10,this.expDian.visible=!1,this.expDian0.visible=!1,this.expDian1.visible=!1,this.expDian2.visible=!1,this.expDian3.visible=!1;var r=2*t.MathUtils.getDistance(n.x,n.y,a.x,a.y);egret.Tween.removeTweens(this.addGroup),egret.Tween.get(this.addGroup).wait(500).call(function(){s.expDian.payTween({x:n.x,y:n.y-150},{x:n.x+100,y:n.y-250},{x:a.x,y:a.y},r),s.expDian0.payTween({x:n.x-100,y:n.y-150},{x:n.x,y:n.y-300},{x:a.x,y:a.y},r),s.expDian1.payTween({x:n.x,y:n.y-200},{x:n.x+100,y:n.y-300},{x:a.x,y:a.y},r),s.expDian2.payTween({x:n.x-150,y:n.y-150},{x:n.x+100,y:n.y-250},{x:a.x,y:a.y},r),s.expDian3.payTween({x:n.x-50,y:n.y-220},{x:n.x+80,y:n.y-150},{x:a.x,y:a.y},r)}).wait(r+100).call(function(){s.expDian.clsoeTween(),s.expDian0.clsoeTween(),s.expDian1.clsoeTween(),s.expDian2.clsoeTween(),s.expDian3.clsoeTween()})}}},i.prototype.updateWIFI=function(){t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Network)?(t.TimerManager.ins().isExists(this.heartbeat,this)||t.TimerManager.ins().doTimer(3e3,0,this.heartbeat,this),this.msgGroup.visible=!0):(this.msgGroup.visible=!1,t.TimerManager.ins().remove(this.heartbeat,this))},i.prototype.heartbeat=function(){this.sendTime&&(this.msgdelay.push(3e3),this.msgdelay.length>3&&this.msgdelay.shift()),this.sendTime=egret.getTimer(),t.DefaultMgr.ins().s_0_21()},i.prototype.updateMsg=function(){this.msgdelay.push(egret.getTimer()-this.sendTime),this.sendTime=0,this.msgdelay.length>3&&this.msgdelay.shift();for(var e=0,i=0;i<this.msgdelay.length;i++)e=this.msgdelay[i],this.msgAry[i].visible=!0,this.msgAry[i].text=t.LanguageUtils.language_Delay+this.getDelay(e),100>e?this.msgAry[i].textColor=2682369:300>e?this.msgAry[i].textColor=t.ColorUtil.NAME_YELLOW:this.msgAry[i].textColor=t.ColorUtil.NAME_RED},i.prototype.getDelay=function(t){return t>1e3?(t/1e3).toFixed(2)+"m":t+"ms"},i.prototype.updateCrossServerAct=function(){t.GameSocket.IsCrossService&&0!=t.ActvityMgr.ins().crossServerActID&&t.DefaultMgr.ins().showCrossServerView(t.ActvityMgr.ins().crossServerActID)},i.prototype.updateSprotsActTips=function(){this.updateActLevel(),this.updateActCircle(),this.updateActMonsterTips(),this.updateBestEquipTips(),this.changeCrossServerBtnIcon()},i.prototype.updateActLevel=function(){var e=this;this.actLevelIcon.source="",this.actLevelQuality.source="",this.actLevelStr.text="";var i=t.ActvityMgr.ins().getActivityInfo(this.actTipsID);if(i){if(this.actLevelGrp.visible=!0,this.actLevelStr.visible=!0,this.actLevelReceive.visible=!1,0!=i.redDot){this.actLevelStr.visible=!1,this.actLevelReceive.visible=!0,this.actLevelReceive.textFlow=t.TextFlowMaker.generateTextFlow("< u > "+this.actLevelReceive.text+" </u>"),this.receiveMc||(this.receiveMc=t.ObjectPool.pop("app.MovieClip"),this.receiveMc.scaleX=this.receiveMc.scaleY=1,this.receiveMc.touchEnabled=!1,this.receiveMc.blendMode=egret.BlendMode.ADD,this.receiveEffGrp.addChild(this.receiveMc)),this.receiveMc.isPlaying||this.receiveMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_xdcts",-1);var n=0;for(var s in i.info)if(1==i.info[s].state){n=i.info[s].index;break}this.levelEffPlayInfo[n]||(this.levelEffMc||(this.levelEffMc=t.ObjectPool.pop("app.MovieClip"),this.levelEffMc.scaleX=this.levelEffMc.scaleY=1,this.levelEffMc.touchEnabled=!1,this.levelEffGrp.addChild(this.levelEffMc)),this.levelEffMc.visible=!0,this.levelEffMc.isPlaying||this.levelEffMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_gjxbz",1,function(){e.levelEffMc&&(e.levelEffMc.destroy(),e.levelEffMc=null),e.levelEffPlayInfo[n]=!0}))}else this.receiveMc&&(this.receiveMc.destroy(),this.receiveMc=null),this.levelEffMc&&(this.levelEffMc.destroy(),this.levelEffMc=null);this.actLevelMc||(this.actLevelMc=t.ObjectPool.pop("app.MovieClip"),this.actLevelMc.scaleX=this.actLevelMc.scaleY=1,this.actLevelMc.touchEnabled=!1,this.actLevelMc.blendMode=egret.BlendMode.ADD,this.actLevelEff.addChild(this.actLevelMc)),this.actLevelMc.isPlaying||this.actLevelMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_xlz",-1);var a=t.EntityMgr.ins().getPayer,r=0,o=!1;if(a&&a.propSet){var l=-1,h=a.propSet.getLevel();if(0!=i.redDot)for(var p in i.info)1==i.info[p].state&&i.info[p].index>l&&(l=i.info[p].index,o=!0);else{for(var s in i.info)if(0==i.info[s].state||1==i.info[s].state){o=!0;break}var u=t.ActvityMgr.ins().getActivityConfigById(this.actTipsID);if(u)for(var c in u)if(h<u[c].value){l=u[c].level,r=u[c].value;break}}var g=a.propSet.getAP_JOB(),d=t.GlobalConfig.ActivityPopupConfig[this.actTipsID][g][l];o&&d?(d.leftpicture1&&(this.actLevelIcon.source=d.leftpicture1+"",this.actLevelTween||(this.actLevelTween=egret.Tween.get(this.actLevelIcon,{loop:!0}),this.actLevelTween.to({y:-16},1e3).to({y:-6},1e3))),d.leftpicture2&&(this.actLevelQuality.source=d.leftpicture2+""),d.text&&0==i.redDot&&(this.actLevelStr.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(d.text,r-h)))):(this.actLevelGrp.visible=!1,this.actLevelTween&&(this.actLevelIcon.y=-6,egret.Tween.removeTweens(this.actLevelTween),this.actLevelTween=null),this.actLevelMc&&(this.actLevelMc.destroy(),this.actLevelMc=null),this.levelEffMc&&(this.levelEffMc.destroy(),this.levelEffMc=null),this.receiveMc&&(this.receiveMc.destroy(),this.receiveMc=null))}}else this.actLevelGrp.visible=!1,this.actLevelTween&&(this.actLevelIcon.y=-6,egret.Tween.removeTweens(this.actLevelTween),this.actLevelTween=null),this.actLevelMc&&(this.actLevelMc.destroy(),this.actLevelMc=null),this.levelEffMc&&(this.levelEffMc.destroy(),this.levelEffMc=null),this.receiveMc&&(this.receiveMc.destroy(),this.receiveMc=null);this.actLevelIcon.source&&""!=this.actLevelIcon.source?this.actLevelIcon.filters=t.FilterUtil.SHINE():this.actLevelIcon.filters=null},i.prototype.updateActCircle=function(){var e=this;this.actCircleIcon.source="",this.actCircleQuality.source="",this.actTipsTopImg1.source="",this.actTipsTopImg2.source="",this.actCircleStr.text="";var i=t.ActvityMgr.ins().getActivityInfo(this.circleTipsActID);if(i){if(this.actTipsGrp1.parent||this.actTipsAllGrp.addChildAt(this.actTipsGrp1,0),this.actCircleBtn.visible=!0,this.actCircleGrp.visible=!0,this.actCircleStrGrp.visible=!0,this.clickReceive.visible=!1,0!=i.redDot){this.actCircleStrGrp.visible=!1,this.clickReceive.visible=!0,this.clickReceive.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+this.clickReceive.text+"</u>");var n=0;for(var s in i.info)if(1==i.info[s].state){n=i.info[s].index;break}this.effPlayInfo[n]||(this.circleReceiveMc||(this.circleReceiveMc=t.ObjectPool.pop("app.MovieClip"),this.circleReceiveMc.scaleX=this.circleReceiveMc.scaleY=1,this.circleReceiveMc.touchEnabled=!1,this.cieclereceiveEffGrp.addChild(this.circleReceiveMc)),this.circleReceiveMc.visible=!0,this.circleReceiveMc.isPlaying||this.circleReceiveMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_gjxbz",1,function(){e.circleReceiveMc&&(e.circleReceiveMc.destroy(),e.circleReceiveMc=null),e.effPlayInfo[n]=!0})),this.actCircleMc0||(this.actCircleMc0=t.ObjectPool.pop("app.MovieClip"),this.actCircleMc0.scaleX=this.actCircleMc0.scaleY=1,this.actCircleMc0.touchEnabled=!1,this.actCircleMc0.blendMode=egret.BlendMode.ADD,this.actCircleEffGrp0.addChild(this.actCircleMc0)),this.actCircleMc0.isPlaying||this.actCircleMc0.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_dclg3",-1)}else this.actCircleMc0&&(this.actCircleMc0.destroy(),this.actCircleMc0=null),this.circleReceiveMc&&(this.circleReceiveMc.destroy(),this.circleReceiveMc=null);var a=t.EntityMgr.ins().getPayer;if(a&&a.propSet){var r=-1,o=a.propSet.getZSLevel();if(0!=i.redDot)for(var l in i.info)1==i.info[l].state&&i.info[l].index>r&&(r=i.info[l].index);else r=o+1;var h=a.propSet.getAP_JOB(),p=t.GlobalConfig.ActivityPopupConfig[this.circleTipsActID][h][r];p?(this.actCircleMc||(this.actCircleMc=t.ObjectPool.pop("app.MovieClip"),this.actCircleMc.scaleX=this.actCircleMc.scaleY=1,this.actCircleMc.touchEnabled=!1,this.actCircleMc.blendMode=egret.BlendMode.ADD,this.actCircleEffGrp.addChild(this.actCircleMc)),this.actCircleMc.isPlaying||this.actCircleMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_dczq2",-1),p.leftpicture1&&(this.actCircleIcon.source=p.leftpicture1+""),p.leftpicture2&&(this.actCircleQuality.source=p.leftpicture2+""),p.rightpicture1&&(this.actTipsTopImg1.source=p.rightpicture1+""),p.rightpicture2&&(this.actTipsTopImg2.source=p.rightpicture2+""),p.text&&(this.actCircleStr.textFlow=t.TextFlowMaker.generateTextFlow(p.text))):(this.actCircleGrp.visible=this.actCircleBtn.visible=!1,this.actCircleMc&&(this.actCircleMc.destroy(),this.actCircleMc=null),this.actCircleMc0&&(this.actCircleMc0.destroy(),this.actCircleMc0=null),this.circleReceiveMc&&(this.circleReceiveMc.destroy(),this.circleReceiveMc=null),t.DisplayUtils.removeFromParent(this.actTipsGrp1))}}else this.actCircleGrp.visible=this.actCircleBtn.visible=!1,this.actCircleMc&&(this.actCircleMc.destroy(),this.actCircleMc=null),this.actCircleMc0&&(this.actCircleMc0.destroy(),this.actCircleMc0=null),this.circleReceiveMc&&(this.circleReceiveMc.destroy(),this.circleReceiveMc=null),t.DisplayUtils.removeFromParent(this.actTipsGrp1)},i.prototype.updateActMonsterTips=function(){var e=this;this.actMOnsterStr.text="",this.actMonsterImg1.source="",this.actMonsterImg2.source="";var i=!1,n=-1,s=-1,a=t.ActvityMgr.ins().getActivityInfo(this.actMonsterActID);if(a){if(this.actTipsGrp2.parent||this.actTipsAllGrp.addChildAt(this.actTipsGrp2,1),a.info){for(var r in a.info){var o=a.info[r];(0==o.state||1==o.state)&&(i=!0),-1==n&&(n=o.value),-1==s&&1==o.state&&(s=o.index)}if(i){if(this.actMonsterMc||(this.actMonsterMc=t.ObjectPool.pop("app.MovieClip"),this.actMonsterMc.scaleX=this.actMonsterMc.scaleY=1,this.actMonsterMc.touchEnabled=!1,this.actMonsterEff.addChild(this.actMonsterMc)),this.actMonsterMc.isPlaying||this.actMonsterMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_dcjs2",-1),this.actMonsterBtn.visible=!0,this.actMonsterGrp.visible=!0,this.actMOnsterStr.visible=!0,this.monsterClickReceive.visible=!1,0!=a.redDot){this.actMOnsterStr.visible=!1,this.monsterClickReceive.visible=!0,this.monsterClickReceive.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+this.monsterClickReceive.text+"</u>");var l=0;for(var h in a.info)if(1==a.info[h].state){l=a.info[h].index;break}this.monsterEffInfo[l]||(this.monsterMc||(this.monsterMc=t.ObjectPool.pop("app.MovieClip"),this.monsterMc.scaleX=this.monsterMc.scaleY=1,this.monsterMc.touchEnabled=!1,this.monsterEffGrp.addChild(this.monsterMc)),this.monsterMc.visible=!0,this.monsterMc.isPlaying||this.monsterMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_gjxbz",1,function(){e.monsterMc&&(e.monsterMc.destroy(),e.monsterMc=null),e.monsterEffInfo[l]=!0})),this.actMonsterMc0||(this.actMonsterMc0=t.ObjectPool.pop("app.MovieClip"),this.actMonsterMc0.scaleX=this.actMonsterMc0.scaleY=1,this.actMonsterMc0.touchEnabled=!1,this.actMonsterMc0.blendMode=egret.BlendMode.ADD,this.actMonsterEff0.addChild(this.actMonsterMc0)),this.actMonsterMc0.isPlaying||this.actMonsterMc0.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_dclg2",-1)}else this.actMonsterMc0&&(this.actMonsterMc0.destroy(),this.actMonsterMc0=null),this.monsterMc&&(this.monsterMc.destroy(),this.monsterMc=null);var p=t.ActvityMgr.ins().getActivityConfigById(this.actMonsterActID),u=1,c=0;if(p){if(-1!=s)u=s;else for(var g in p)if(n<p[g].value){u=p[g].level;break}p[u]&&(c=p[u].value)}var d=t.EntityMgr.ins().getPayer;if(d&&d.propSet){var m=d.propSet.getAP_JOB(),f=t.GlobalConfig.ActivityPopupConfig[this.actMonsterActID][m][u];f&&(f.rightpicture1&&(this.actMonsterImg1.source=f.rightpicture1+""),f.rightpicture2&&(this.actMonsterImg2.source=f.rightpicture2+""),f.text&&(this.actMOnsterStr.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(f.text,c-n))))}}else this.actMonsterGrp.visible=this.actMonsterBtn.visible=!1,this.actMonsterMc&&(this.actMonsterMc.destroy(),this.actMonsterMc=null),this.actMonsterMc0&&(this.actMonsterMc0.destroy(),this.actMonsterMc0=null),this.monsterMc&&(this.monsterMc.destroy(),this.monsterMc=null),t.DisplayUtils.removeFromParent(this.actTipsGrp2)}}else this.actMonsterGrp.visible=this.actMonsterBtn.visible=!1,this.actMonsterMc&&(this.actMonsterMc.destroy(),this.actMonsterMc=null),this.actMonsterMc0&&(this.actMonsterMc0.destroy(),this.actMonsterMc0=null),this.monsterMc&&(this.monsterMc.destroy(),this.monsterMc=null),t.DisplayUtils.removeFromParent(this.actTipsGrp2)},i.prototype.updateBestEquipTips=function(){var e=this;this.actEquipIcon.source="",this.actEquipProgress.text="",this.actEquipImg1.source="",this.actEquipImg2.source="",this.actEquipNum.source="";var i=!1,n=-1,s=-1,a=0,r=-1,o=0,l=t.ActvityMgr.ins().getActivityInfo(this.sprotesEquipActID);if(l){if(l.info){for(var h in l.info){var p=l.info[h];(0==p.state||1==p.state)&&(i=!0),1==p.state&&p.index>s&&(s=p.index,a=p.value),0==p.state&&(-1==r||p.index<r)&&(r=p.index,o=p.value)}if(i){if(this.actEquipGrp.visible=!0,this.actEquipImgGrp.visible=!0,this.actEquipProgress.visible=!0,this.actEquipReceive.visible=!1,0!=l.redDot){this.actEquipImgGrp.visible=!1,this.actEquipReceive.visible=!0,this.actEquipReceive.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+this.actEquipReceive.text+"</u>");var u=0;for(var c in l.info)if(1==l.info[c].state){u=l.info[c].index;break}this.equipEffInfo[u]||(this.equipEffMc||(this.equipEffMc=t.ObjectPool.pop("app.MovieClip"),this.equipEffMc.scaleX=this.equipEffMc.scaleY=1,this.equipEffMc.touchEnabled=!1,this.equipEffGrp.addChild(this.equipEffMc)),this.equipEffMc.visible=!0,this.equipEffMc.isPlaying||this.equipEffMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_gjxbz",1,function(){e.equipEffMc&&(e.equipEffMc.destroy(),e.equipEffMc=null),e.equipEffInfo[u]=!0})),this.actEquipMc||(this.actEquipMc=t.ObjectPool.pop("app.MovieClip"),this.actEquipMc.scaleX=this.actEquipMc.scaleY=1,this.actEquipMc.touchEnabled=!1,this.actEquipMc.blendMode=egret.BlendMode.ADD,this.actEquipEffGrp.addChild(this.actEquipMc)),this.actEquipMc.isPlaying||this.actEquipMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_dclg3",-1)}else this.actEquipMc&&(this.actEquipMc.destroy(),this.actEquipMc=null),this.equipEffMc&&(this.equipEffMc.destroy(),this.equipEffMc=null);var g=t.ActvityMgr.ins().getActivityConfigById(this.sprotesEquipActID),d=1,m=0;g&&(-1!=s?(d=s,n=a):(d=r,n=o),g[d]&&(m=g[d].value));var f=t.EntityMgr.ins().getPayer;if(f&&f.propSet){var v=f.propSet.getAP_JOB(),_=t.GlobalConfig.ActivityPopupConfig[this.sprotesEquipActID][v][d];_&&(_.leftpicture1&&(this.actEquipIcon.source=_.leftpicture1+""),_.leftpicture2&&(this.actEquipNum.source=_.leftpicture2+""),_.rightpicture1&&(this.actEquipImg1.source=_.rightpicture1+""),_.rightpicture2&&(this.actEquipImg2.source=_.rightpicture2+""),this.actEquipProgress.text="("+n+"/"+m+")")}}else this.actEquipGrp.visible=!1,this.actEquipMc&&(this.actEquipMc.destroy(),this.actEquipMc=null),this.equipEffMc&&(this.equipEffMc.destroy(),this.equipEffMc=null)}}else this.actEquipGrp.visible=!1,this.actEquipMc&&(this.actEquipMc.destroy(),this.actEquipMc=null),this.equipEffMc&&(this.equipEffMc.destroy(),this.equipEffMc=null)},i.prototype.changeCrossServerBtnIcon=function(){if(!t.GameSocket.IsCrossService&&this.CrossServerButton.isShow()){var e=t.GameSocket.IsCrossService?2:1,i=t.CrossServerMgr.ins().getCrossServerActTab(e),n=[];for(var s in i)n.push(i[s]);n.sort(this.tabSort),this.CrossServerButton.icon="icon_kaifuzhanchang",this.CrossServerButton.ingGrp.visible=!1;var a=t.EntityMgr.ins().getPlayerPropertySet();if(a&&a.propSet){var r=a.propSet;r.getZSLevel()<3&&(this.CrossServerButton.timeLab.text=t.StringUtils.replace(t.LanguageUtils.language_Common_259,3),this.CrossServerButton.ingGrp.visible=!0)}if(n.length>0)if(36==n[0].activityid)this.crossServerMc&&(this.crossServerMc.destroy(),this.crossServerMc=null);else{var o=t.ActvityMgr.ins().getActivityInfo(n[0].activityid);o&&o.redDot?(n[0].mainIcon?this.CrossServerButton.icon=n[0].mainIcon+"":"icon_kaifuzhanchang",this.CrossServerButton.timeLab.text=t.LanguageUtils.language_Common_260,this.CrossServerButton.ingGrp.visible=!0,this.crossServerMc||(this.crossServerMc=t.ObjectPool.pop("app.MovieClip"),this.crossServerMc.scaleX=this.crossServerMc.scaleY=1,this.crossServerMc.touchEnabled=!1,this.crossServerMc.blendMode=egret.BlendMode.ADD,this.crossServerEffGrp.addChild(this.crossServerMc)),this.crossServerMc.isPlaying||this.crossServerMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_tygq_1",-1)):this.crossServerMc&&(this.crossServerMc.destroy(),this.crossServerMc=null)}}else this.crossServerMc&&(this.crossServerMc.destroy(),this.crossServerMc=null)},i.prototype.tabSort=function(e,i){var n=t.ActvityMgr.ins().getActivityInfo(e.activityid),s=t.ActvityMgr.ins().getActivityInfo(i.activityid);if(n&&s){if(e.sortact>i.sortact)return-1;if(e.sortact<i.sortact)return 1}else{if(n||s)return n&&!s?-1:1;if(e.sortact<i.sortact)return-1;if(e.sortact>i.sortact)return 1}},i}(t.BaseEuiView);t.MainBottomView=e,__reflect(e.prototype,"app.MainBottomView"),t.ViewManager.ins().reg(e,t.LayerManager.Game_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MainBtnSkin",e}return __extends(e,t),e.prototype.updateShow=function(){console.log("show")},e}(eui.Button);t.MainButton=e,__reflect(e.prototype,"app.MainButton")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._configid=0,t}return __extends(i,e),Object.defineProperty(i.prototype,"configid",{get:function(){return this._configid},set:function(t){this._configid=t},enumerable:!0,configurable:!0}),i.prototype.setButtonInfo=function(e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=null),this.iconDisplay.source=e,this.imageLabel&&(i?(this.imageLabel.source=i,this.imageLabel.visible=!0):this.imageLabel.visible=!1);var a=t.GlobalConfig.PlayFunConfig[this._configid];if(a&&(this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tapExecute,this),a.str&&(this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this))),n&&n.length&&s&&(this.updateClase=egret.getDefinitionByName(s[0]),this.updateFun=s[1],this.updateClase&&this.updateFun)){for(var r=0;r<n.length;r++)t.MessageCenter.addListener(n[r],this.delayUpdate,this);
this.getRed=s,this.delayUpdate()}},i.prototype.delayUpdate=function(){t.TimerManager.ins().doTimer(1e3,1,this.updateRed,this)},i.prototype.updateRed=function(){var t=0;this.isCheckOpen()&&(t=this.updateClase.ins()[this.updateFun]()),1==t?(this.redImage.source="common_hongdian",this.redImage.visible=!0):2==t?(this.redImage.source="common_chengdian",this.redImage.visible=!0):this.redImage.visible=!1},i.prototype.removeButton=function(){this.updateClase=null,this.updateFun=null,t.MessageCenter.ins().removeAll(this),t.TimerManager.ins().removeAll(this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.tapExecute,this)},i.prototype.tapExecute=function(t){egret.Tween.removeTweens(this),1==t&&this.currentState?egret.Tween.get(this).call(function(){this.currentState="down"}).wait(200).call(function(){this.currentState="up",egret.Tween.removeTweens(this),this.onClick()}):this.onClick()},i.prototype.getConfig=function(){return t.GlobalConfig.PlayFunConfig[this._configid]},i.prototype.isShow=function(){var e=this.getConfig();return t.ViewManager.ins().isCheckOpen(e.isShowNeed)},i.prototype.onClick=function(){var e=t.GlobalConfig.PlayFunConfig[this._configid];return t.GameSocket.IsCrossService&&!e.displayType?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips139):(3==this._configid&&t.EventManager.ins().sendEvent(t.MainEvent.HIDE_SKILL_TIPS),8==this._configid?void t.GuildMgr.ins().sendGuildInfo(!0):(40==this._configid&&t.EventManager.ins().sendEvent(t.CompEvent.HIDE_ICON),44==this._configid&&t.GameMap.isForbiddenArea?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips120):(66==this._configid&&t.CautionView.show(t.LanguageUtils.language_Common_235,function(){t.GameSocket.ins().reLogin()},this),void(e.view&&t.ViewManager.ins().openSystemTips(e.isOpenNeed)&&(t.SoundManager.ins().playEffect(t.SoundUtil.VIEW),t.ViewManager.ins().isShow(e.view)?t.ViewManager.ins().close(e.view):t.ViewManager.ins().open(e.view,e.param))))))},i.prototype.isCheckOpen=function(){var e=t.GlobalConfig.PlayFunConfig[this._configid];return t.ViewManager.ins().isCheckOpen(e.isOpenNeed)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=t.GlobalConfig.PlayFunConfig[this._configid];if(i.str){var n=this.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,i.str,{x:n.x+this.width/2,y:n.y+this.height/2}),n=null}}},i}(eui.Button);t.MainButton3=e,__reflect(e.prototype,"app.MainButton3")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.gongGaoData=[],t.skinName="GongGaoView",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.gongGaoData=[],this.tab.itemRenderer=t.MainGongGaoItemView,this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.tab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this);var n=this,s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status)try{n.gongGaoData=JSON.parse(s.responseText),n.updateTabInfo()}catch(t){console.log("游戏内公告返回失败")}},s.open("GET",Main.gameParameter.gongGaoUrl+"?platform="+Main.gameParameter.game+"&v="+(new Date).getTime(),!0),s.send(null),this.gongGaoScroller.viewport.scrollV=0,this.gongGaoScroller&&this.gongGaoScroller.verticalScrollBar&&(this.gongGaoScroller.verticalScrollBar.autoVisibility=!1,this.gongGaoScroller.verticalScrollBar.visible=!1)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.sureBtn:case this.btn_close:t.ViewManager.ins().close(this)}},i.prototype.updateTabInfo=function(){this.gongGaoData.length>0&&(this.tab.dataProvider=new eui.ArrayCollection(this.gongGaoData),this.tab.selectedIndex=0,this.updateGongGaoText())},i.prototype.onChange=function(t){this.gongGaoScroller.viewport.scrollV=0,this.updateGongGaoText()},i.prototype.updateGongGaoText=function(){if(this.gongGaoData.length>0){var t=this.tab.dataProvider.getItemAt(this.tab.selectedIndex);t&&t.text&&(this.textLab.textFlow=(new egret.HtmlTextParser).parser(t.text))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.gongGaoData=[],this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.tab.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i}(t.BaseEuiView);t.MainGongGao=e,__reflect(e.prototype,"app.MainGongGao"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="IDCard",t.percentHeight=100,t.percentWidth=100,t}return __extends(i,e),i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.verificationImg,this.onClick),this.addTouchEvent(this.closeImg,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.verificationImg:window.IdCardFunction(),t.ViewManager.ins().close(this);break;case this.closeImg:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.verificationImg,this.onClick),this.removeTouchEvent(this.closeImg,this.onClick)},i}(t.BaseEuiView);t.MainIDCard=e,__reflect(e.prototype,"app.MainIDCard"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Popup)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.recog=0,t.lockSkillId=0,t.imgAry=[],t.verticalCenter=160,t.left=0,t.touchEnabled=!1,t.skinName="MainLockSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.observe(t.SkillMgr.ins().postUpdateLock,this.updateState),this.observe(t.DefaultMgr.ins().postUpdateTarget,this.updateHp),this.addTouchEvent(this.iconImage,this.clickFunction),this.addTouchEvent(this.hpBar,this.clickFunction)},i.prototype.clickFunction=function(e){if(e.currentTarget==this.iconImage)this.updateState([this.recog,0]),t.DefaultMgr.ins().postUpdateTarget(0);else{if(t.ViewManager.ins().isShow(t.OtherPlayerView))return;var i=t.EntityMgr.ins().getCharRole(this.recog);i&&t.EquipItemMgr.ins().sendQueryOthersEquips(i.propSet.getACTOR_ID())}},i.prototype.updateHp=function(t){this.updateState([t,this.lockSkillId])},i.prototype.updateState=function(e){var i=e[0],n=e[1];t.EntityMgr.ins().getPayer.lockTarget=i,t.EntityMgr.ins().getPayer.lockSkillId=n,this.recog=i,this.lockSkillId=n;var s=t.EntityMgr.ins().getCharRole(i);if(s||n){if(this.currentState="nOpen",this.charName.visible=!0,n)if(1000000001==n)this.iconImage.source="skillicon_ty7";else{var a=t.GlobalConfig.SkillsLevelConf[n][1];this.iconImage.source=a?a.skillName:"m_suoding"}else this.iconImage.source="m_suoding";s?(t.ViewManager.gamescene.map.selectImg.visible=!0,s.propSet.getRace()==t.ActorRace.Human?this.hpBar.labelFunction=function(e,i){return t.LanguageUtils.language_Lock_Text0}:this.hpBar.labelFunction=function(t,e){return t+"/"+e},this.hpBar.maximum=s.propSet.getMaxHp(),this.hpBar.value=Math.min(s.propSet.getHp(),s.propSet.getMaxHp()),s.isCharRole&&t.GameMap.aaCannotSeeName?this.charName.text=t.LanguageUtils.language_Lock_Text2:this.charName.text=s.charName,this.hpBar.visible=!0):(this.charName.text=t.LanguageUtils.language_Lock_Text1,this.hpBar.visible=!1,t.ViewManager.gamescene.map.selectImg.visible=!1)}else t.ViewManager.gamescene.map.selectImg.visible=!1,this.iconImage.source="m_lock",this.currentState="nWalk",this.hpBar.visible=!1,this.charName.visible=!1},i.prototype.getImage=function(){return this.imgAry.pop()||new eui.Image},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this),this.$onClose(),this.removeTouchEvent(this.iconImage,this.clickFunction),this.removeTouchEvent(this.hpBar,this.clickFunction)},i}(t.BaseEuiView);t.MainLockView=e,__reflect(e.prototype,"app.MainLockView"),t.ViewManager.ins().reg(e,t.LayerManager.Game_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isShowActivityIcon=!0,e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e}(t.BaseClass);t.MainManager=e,__reflect(e.prototype,"app.MainManager")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.onEnter=function(){e.prototype.onEnter.call(this),ReportMgr.reporting(t.ReportDataEnum.ENTERMAIN,{},null,!1),this.addLayerAt(t.LayerManager.Game_Bg,1),this.addLayerAt(t.LayerManager.Game_Main,3),this.addLayerAt(t.LayerManager.UI_Main,4),this.addLayerAt(t.LayerManager.UI_Tips,6),this.addLayerAt(t.LayerManager.UI_Drag,7),this.addLayerAt(t.LayerManager.UI_Popup,8),this.addLayerAt(t.LayerManager.UI_Rocker,9),t.GameSocket.ins().isNewRole&&(t.GameSocket.ins().isNewRole=!1,t.ViewManager.ins().open(t.WelcomeView2)),t.ViewManager.ins().open(t.GameSceneView),t.ViewManager.ins().open(t.MapMiniView),gamelib.DeviceUtils.IsMobile?t.ViewManager.ins().open(t.PhoneMainView):t.ViewManager.ins().open(t.MainBottomView),gamelib.DeviceUtils.IsMobile?t.GameSocket.IsCrossService||t.ViewManager.ins().open(t.MainTaskWin):t.ViewManager.ins().open(t.MainTaskWin),t.ViewManager.ins().open(t.MainBottomNotice),t.SoundManager.ins().stopBg(),t.GameApp.ins().postLoginInit(),gamelib.DeviceUtils.IsMobile&&egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchPlaySound,this)},i.prototype.onTouchPlaySound=function(){egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchPlaySound,this),t.SoundUtil.ins().playEffect(t.SoundUtil.WINDOW)},i.prototype.onExit=function(){e.prototype.onExit.call(this)},i}(t.BaseScene);t.MainScene=e,__reflect(e.prototype,"app.MainScene")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){this.img.source=this.data.img,this.red&&this.data.redadd&&(this.red.updateShowFunctions=this.data.redadd),this.red&&this.data.redShow&&(this.red.showMessages=this.data.redShow)},e.prototype.$onAddToStage=function(e,i){this.addMouseMoveEvent(this,this.mouseMove),this.addMouseOverEvent(this,this.mouseMove),t.prototype.$onAddToStage.call(this,e,i)},e.prototype.$onRemoveFromStage=function(){this.removeMouseMoveEvent(this,this.mouseMove),this.removeMouseOverEvent(this,this.mouseMove),t.prototype.$onRemoveFromStage.call(this)},e.prototype.mouseMove=function(t){t.type==mouse.MouseEvent.MOUSE_OUT?this.selectImg.visible=!1:t.type==mouse.MouseEvent.MOUSE_OVER&&(this.selectImg.visible=!0)},e}(t.BaseItemRender);t.MainSelectRender=e,__reflect(e.prototype,"app.MainSelectRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._index=-1,t.skinName="skillItemSkin",t.init(),t}return __extends(i,e),i.prototype.init=function(){this.addTouchEvent(this,this.onClick)},i.prototype.playSkillKeyEff=function(e){var i=this;this.skillMC||(this.skillMC=new t.MovieClip,this.skillMC.touchEnabled=!1,this.skillMC.x=27,this.skillMC.y=27,this.skillMC.visible=!0,this.addChild(this.skillMC)),this.skillMC.playFile(ResDirEnum.RES_DIR_EFF+e,1,function(){t.DisplayUtils.removeFromParent(i.skillMC),i.skillMC=null})},i.prototype.play3=function(t,e,i){if(20>=e)return this.stopTween(),void this.playSkillKeyEff("jnjh1");if(i){this.rect.visible=!0;var n=55*(e/t);this.rect.height=n>55?55:n}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this,this.onClick)},i.prototype.onClick=function(e){var i=this.TYPES,n=this.ID;if(i&&1==i){var s=t.EntityMgr.ins().getPayer.getUserSkill(n);if(s&&egret.getTimer()>s.dwResumeTick)if(s.isDisable){var a=t.GlobalConfig.SkillConf[s.nSkillId];a&&t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips110,a.name))}else-1!=t.PlayerRoleAI.ins().stopBreakSkillAry.indexOf(n)&&t.PlayerRoleAI.ins().stopAI(),t.MapView.m_clickSkillId=n,t.SkillMgr.ins().post_playSkillMc("skillcd",n);else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips1)}else if(0==i){var r=t.BagMgr.ins().getItemById(n);r&&(console.log("ID："+r.wItemId),t.BagManager.ins().useItem(r.series,r.wItemId))}},i.prototype.playTween3=function(t,e,i){void 0===i&&(i=!0),this.play3(t,e,i)},i.prototype.stopTween=function(){this.rect.visible=!1},i.prototype.setSkillImg=function(t){this.skillIcon.source=t},i.prototype.getSkillImg=function(){return this.skillIcon.source},Object.defineProperty(i.prototype,"keyIndex",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!0,configurable:!0}),i.prototype.setCount=function(t){this.itemCount.text=t},i.prototype.setCountState=function(t){this.itemCount.visible=t},i}(t.BaseItemRender);t.MainSkillIconItem=e,__reflect(e.prototype,"app.MainSkillIconItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.petState=0,t.followCd=0,t.left=4,t.top=0,t.skinName="MainTopLeftSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.observe(t.DefaultMgr.ins().postUpdateState,this.updateState),this.observe(t.DefaultMgr.ins().post_petChange,this.updatePet),this.observe(t.PetSettingMgr.ins().postPetNum,this.updatePet),this.observe(t.DefaultMgr.ins().post_g_0_10,this.updateTime),this.observe(t.OtherMgr.ins().post_26_28,this.updatePop),this.observe(t.DefaultMgr.ins().post_updateZsLevel,this.updatePop),this.observe(t.DefaultMgr.ins().post_updateZsLevel,this.updatePopView),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updatePopView),this.addTouchEvent(this.petFollow,this.onClick),this.addTouchEvent(this.petAck,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.petFollow:this.followCd<=0?(this.followCd=100,this.followRect.width=93,t.PetSettingMgr.ins().send_34_2(),t.TimerManager.ins().doTimer(100,0,this.updateFollowCd,this)):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips105);break;case this.petAck:t.TimerManager.ins().isExists(this.updateActCd,this)?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips105):(t.TimerManager.ins().doTimer(1e3,1,this.updateActCd,this),t.PetSettingMgr.ins().send_34_1(1==this.petState?2:1),this.petAck.label=1==this.petState?t.LanguageUtils.language_Common_135:t.LanguageUtils.language_Common_136,this.petState=1==this.petState?2:1)}},i.prototype.updateFollowCd=function(){var e=this;this.followCd-=1,this.followRect.visible=!0,this.followRect.width=this.followRect.width-+.93.toFixed(1),0==this.followCd&&(this.followRect.visible=!1,this.petKuang.visible=!0,egret.setTimeout(function(){e.petKuang.visible=!1},this,100),t.TimerManager.ins().remove(this.updateFollowCd,this))},i.prototype.updateActCd=function(){t.TimerManager.ins().remove(this.updateActCd,this)},i.prototype.updatePop=function(){t.OtherMgr.ins().getPopViewData()},i.prototype.updatePopView=function(){var e=t.EntityMgr.ins().getPayer;if(e)for(var i in t.OtherMgr.ins().levelData){var n=t.OtherMgr.ins().levelData[i];e.propSet.getLevel()==n.lvLim&&0==n.isPop&&(n.isPop=1,t.ViewManager.ins().open(n.view,n.id))}},i.prototype.updateTime=function(){if(this.labelTime.text=t.DateUtils.getFormatBySecond(t.GlobalData.serverTime/1e3,t.DateUtils.TIME_FORMAT_15),t.OtherMgr.ins().timeData){var e=new Date(t.GlobalData.serverTime);for(var i in t.OtherMgr.ins().timeData){var n=t.OtherMgr.ins().timeData[i],s=n.timeLim[0],a=n.timeLim[1];s==e.getHours()&&a==e.getMinutes()&&0==n.isPop&&(n.isPop=1,t.ViewManager.ins().open(n.view,n.id))}}},i.prototype.updatePet=function(){this.petGrp.visible=!1;var e=t.EntityMgr.ins().getPayer;e&&e.propSet&&t.PetSettingMgr.ins().petNum>0&&(e.propSet.getPetState()>0&&(this.petState=e.propSet.getPetState(),1==this.petState?this.petAck.label=t.LanguageUtils.language_Common_136:2==this.petState&&(this.petAck.label=t.LanguageUtils.language_Common_135)),this.petState<=0&&(t.PetSettingMgr.ins().send_34_1(2),this.petAck.label=t.LanguageUtils.language_Common_135),this.petGrp.visible=!0)},i.prototype.updateState=function(e){var i=e[0],n=e[1];i==t.EntityAction.WALK?this.currentState="nWalk":i==t.EntityAction.RUN?this.currentState="nRun":this.currentState="nStand",this.stateArrow.rotation=45*n},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.petFollow,this.onClick),this.removeTouchEvent(this.petAck,this.onClick)},i}(t.BaseEuiView);t.MainTopLeftView=e,__reflect(e.prototype,"app.MainTopLeftView"),t.ViewManager.ins().reg(e,t.LayerManager.Game_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.petNum=0,i.sysId=t.PackageID.petSetting,i.regNetMsg(1,i.postPetNum),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_34_1=function(t){var e=this.getBytes(1);e.writeByte(t),this.sendToServer(e)},i.prototype.postPetNum=function(t){this.petNum=t.readByte()},i.prototype.send_34_2=function(){var t=this.getBytes(2);this.sendToServer(t)},i.prototype.send_34_3=function(){var t=this.getBytes(3);this.sendToServer(t)},i}(t.BaseSystem);t.PetSettingMgr=e,__reflect(e.prototype,"app.PetSettingMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.petNum=0,i.peiTypeList={},i.sysId=t.PackageID.petSetting2,i.regNetMsg(1,i.post_35_1),i.regNetMsg(2,i.post_35_2),i.regNetMsg(3,i.post_35_3),i.regNetMsg(4,i.post_35_4),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_35_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.post_35_1=function(e){t.ObjectPool.wipe(this.peiTypeList);for(var i,n,s,a=e.readInt(),r=0;a>r;r++)i=e.readUnsignedShort(),n=e.readUnsignedShort(),s=t.DateUtils.formatMiniDateTime(e.readInt()),this.peiTypeList[n]={id:i,type:n,time:s}},i.prototype.send_35_2=function(t){var e=this.getBytes(2);e.writeUnsignedInt(t),this.sendToServer(e)},i.prototype.post_35_2=function(e){var n=e.readUnsignedShort(),s=e.readUnsignedShort(),a=t.DateUtils.formatMiniDateTime(e.readInt());i.ins().peiTypeList[s]={id:n,type:s,time:a}},i.prototype.post_35_3=function(t){var e=(t.readUnsignedShort(),t.readUnsignedShort());delete i.ins().peiTypeList[e]},i.prototype.post_35_4=function(e){var n=e.readUnsignedShort(),s=e.readUnsignedShort(),a=t.DateUtils.formatMiniDateTime(e.readInt());i.ins().peiTypeList[s]={id:n,type:s,time:a}},i}(t.BaseSystem);t.PetSettingTwoMgr=e,__reflect(e.prototype,"app.PetSettingTwoMgr")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.payTween=function(t,e,i,n){egret.Tween.removeTweens(this),this.point=t,this.point1=e,this.point2=i,t&&e&&i&&n&&(this.visible=!0,egret.Tween.get(this).to({factor:1},n).call(this.moveOver,this))},e.prototype.clsoeTween=function(){this.moveOver()},Object.defineProperty(e.prototype,"factor",{get:function(){return 0},set:function(t){this.x=(1-t)*(1-t)*this.point.x+2*t*(1-t)*this.point1.x+t*t*this.point2.x,this.y=(1-t)*(1-t)*this.point.y+2*t*(1-t)*this.point1.y+t*t*this.point2.y},enumerable:!0,configurable:!0}),e.prototype.moveOver=function(){egret.Tween.removeTweens(this),this.visible=!1},e}(eui.Image);t.TweenImage=e,__reflect(e.prototype,"app.TweenImage")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.percentHeight=100,t.percentWidth=100,t.skinName="WelcomeSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this,this.onClick),t.TimerManager.ins().doTimer(5e3,1,this.onClick,this),this.effMC=t.ObjectPool.pop("app.MovieClip"),this.effMC.x=this.startBtn.x-158,this.effMC.y=this.startBtn.y-81,this.effMC.blendMode=egret.BlendMode.ADD,this.startBtn.parent.addChild(this.effMC),this.effMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_kslc",-1)},i.prototype.onClick=function(){t.TimerManager.ins().removeAll(this),ReportMgr.reporting(t.ReportDataEnum.ONCLICK_WELCOME,{},null,!1),this.removeTouchEvent(this,this.onClick),t.ViewManager.ins().close(this)},i}(t.BaseEuiView);t.WelcomeView=e,__reflect(e.prototype,"app.WelcomeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Popup)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.time=4,t.horizontalCenter=0,t.verticalCenter=0,t.skinName="Welcome2Skin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.percentHeight=100,this.percentWidth=100,t.GameApp.ins().loadPreload(),this.addTouchEvent(this,this.onClick)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.udpateTime(),t.TimerManager.ins().doTimer(1e3,0,this.udpateTime,this)},i.prototype.udpateTime=function(){this.time--,this.timeLabel.text=t.StringUtils.replace(t.LanguageUtils.language_Common_170,this.time),0==this.time&&this.onClick(null)},i.prototype.onClick=function(e){t.TimerManager.ins().removeAll(this),ReportMgr.reporting(t.ReportDataEnum.ONCLICK_WELCOME2,{},null,!1),this.removeTouchEvent(this,this.onClick),t.ViewManager.ins().close(this),t.MFRoleMgr.ins().s_255_3()},i}(t.BaseEuiView);t.WelcomeView2=e,__reflect(e.prototype,"app.WelcomeView2"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Rocker)}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s.updateMessage=[t.AchievementMgr.ins().post_AchievemnetRedPot],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){return t.AchievementMgr.ins().pageReds.length>0?1:0},i}(t.RuleIconBase);t.AchievementRuleIcon=e,__reflect(e.prototype,"app.AchievementRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_3],s}return __extends(i,e),i.prototype.checkShowIcon=function(){var e=t.ActvityMgr.ins().getActivityInfo(t.ActvityInfoEnum.firstCharge);return e&&e.info.sum?e.info.state<7?!1:!0:!1},i.prototype.onClick=function(){t.RechargeMgr.ins().onPay("")},i}(t.RuleIconBase);t.ActivityChargeRuleIcon=e,__reflect(e.prototype,"app.ActivityChargeRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_3,t.BagMgr.ins().post_8_4],s}return __extends(i,e),i.prototype.checkShowIcon=function(){var i=t.ActivityCopiesMgr.ins().getFbTab(),n=[];for(var s in i)n.push(i[s]);if(n.sort(this.tabSort),n.length>0)if(3==n[0].activityid||5==n[0].activityid)this.tar.ingGrp&&(this.tar.ingGrp.visible=!1),this.tar.icon="icon_activity";else{this.tar.icon=n[0].mainIcon+"";var a=t.ActvityMgr.ins().getActivityInfo(n[0].activityid);this.tar.ingGrp&&(a&&a.redDot?(this.tar.ingGrp.visible=!0,this.tar.timeLab&&(this.tar.timeLab.text="进行中")):this.tar.ingGrp.visible=!1)}return e.prototype.checkShowIcon.call(this)},i.prototype.tabSort=function(e,i){var n=t.ActvityMgr.ins().getActivityInfo(e.activityid),s=t.ActvityMgr.ins().getActivityInfo(i.activityid);if(n&&s){if(e.sortact>i.sortact)return-1;if(e.sortact<i.sortact)return 1}else{if(n||s)return n&&!s?-1:1;if(e.sortact<i.sortact)return-1;if(e.sortact>i.sortact)return 1}},i.prototype.checkShowRedPoint=function(){var e=0,i=t.ActvityMgr.ins().getActivityConfigById(3),n=t.ActvityMgr.ins().getAppraisalRed(3);if(n&&i&&i.buttoncolor){if(1==i.buttoncolor)return 1;e=i.buttoncolor}var s=t.ActvityMgr.ins().pActRed,a=t.ActvityMgr.ins().actRed;for(var r in s){if(1==s[r])return 1;2==s[r]&&(e=2)}for(var o in a){if(1==a[o])return 1;2==a[o]&&(e=2)}return e},i}(t.RuleIconBase);t.ActivityCopiesRuleIcon=e,__reflect(e.prototype,"app.ActivityCopiesRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_3],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){var e=t.ActvityMgr.ins().getActivityInfo(t.ActvityInfoEnum.firstCharge);return e&&e.redDot?1:0},i.prototype.onClick=function(){e.prototype.onClick.call(this),t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_FIRST_CHARGE_TIPS)},i.prototype.getEffName=function(t){return this.effX=35,this.effY=35,"eff_tygq"},i.prototype.checkShowIcon=function(){var e=t.ActvityMgr.ins().getActivityInfo(t.ActvityInfoEnum.firstCharge);if(e){if(!e.info.sum)return!0;if(e.info.sum&&e.info.state<7)return!0}return!1},i}(t.RuleIconBase);t.ActivityFirstChargeRuleIcon=e,__reflect(e.prototype,"app.ActivityFirstChargeRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s.updateMessage=[t.OtherMgr.ins().post_26_8,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=this.getNextActivityInfo();return i?(this.tar.icon=i.iconName,this.tar.ingGrp&&(this.tar.ingGrp.visible=!0),this.countdownTime=i.time+egret.getTimer(),this.updateCountdownTime(),this.countdownTime>0&&(t.TimerManager.ins().remove(this.updateCountdownTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCountdownTime,this)),!0):!1},i.prototype.onClick=function(){var e=this.getConfig();e.view&&this.isCheckOpen()&&(t.SoundManager.ins().playEffect(t.SoundUtil.VIEW),t.ViewManager.ins().isShow(e.view)?t.ViewManager.ins().close(e.view):t.ViewManager.ins().open(e.view,this.param))},i.prototype.updateCountdownTime=function(){var e=Math.floor((this.countdownTime-egret.getTimer())/1e3),i="";i=e>=t.DateUtils.SECOND_PER_HOUR?Math.ceil(e/t.DateUtils.SECOND_PER_HOUR)+t.LanguageUtils.language_Time_Hours2:Math.ceil(e/t.DateUtils.SECOND_PER_MUNITE)+t.LanguageUtils.language_Time_Min,this.tar.timeLab.text=t.StringUtils.replace(t.LanguageUtils.language_Common_251,i),this.countdownTime<=0&&t.TimerManager.ins().remove(this.updateCountdownTime,this)},i.prototype.getNextActivityInfo=function(){var e,i=new Date(t.GlobalData.serverTime),n=i.getHours(),s=i.getMinutes(),a=i.getSeconds(),r=i.getDay()||7,o=n*t.DateUtils.MS_PER_HOUR+s*t.DateUtils.MS_PER_MINUTE+a*t.DateUtils.MS_PER_SECOND,l=t.GlobalConfig.ActivityAscriptionConf;for(var h in l){var p=l[h];if(1==p.herald&&!t.ViewManager.ins().isCheckClose(p.closelimit)){var u=t.ActvityMgr.ins().getActivitConf(p.activityid);if(u){if(u instanceof t.ActivitiesConf);else if(u instanceof t.PActivitiesConf&&!t.ViewManager.ins().isCheckOpen({openDay:u.OpenSrvDate,level:u.Level,zsLevel:u.ZSLevel}))continue;if(u.TimeDetail&&3==u.TimeType)for(var c in u.TimeDetail){var g=u.TimeDetail[c].StartTime,d=g.split("-"),m=d[1].split(":"),f=parseInt(m[0])*t.DateUtils.MS_PER_HOUR+parseInt(m[1])*t.DateUtils.MS_PER_MINUTE,v=0;0==+d[0]?(v=f-o,0>=v&&(v+=t.DateUtils.MS_PER_DAY)):(v=parseInt(d[0])*t.DateUtils.MS_PER_DAY+f-(r*t.DateUtils.MS_PER_DAY+o),0>=v&&(v+=7*t.DateUtils.MS_PER_DAY)),(!e||v<e.time)&&(this.param=p.activityid,e={time:v,activitId:p.activityid,iconName:p.mainIcon})}}}}return e},i}(t.RuleIconBase);t.ActivityNoticeRuleIcon=e,__reflect(e.prototype,"app.ActivityNoticeRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.OtherMgr.ins().post_26_28,t.OtherMgr.ins().post_26_45],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){this.updateDisposableredpoint();var e=this.getConfig();if(e&&e.param){var n=e.param[0],s=t.GlobalConfig.ActivityPayConf[n];for(var a in s){var r=s[a],o=t.ActvityMgr.ins().getActivityInfo(r.actId);if(o&&o.info){if(!t.ViewManager.ins().isCheckOpen(r.openlimit))continue;if(o&&0!=o.redDot)return 1;if(1==i.disposableredpointObj[r.actId])return 1;if(r.redpoint)return r.redpoint}}}return 0},i.prototype.checkShowIcon=function(){var e=[],i=(t.GlobalData.sectionOpenDay,this.getConfig());if(i&&i.param){var n=i.param[0],s=t.GlobalConfig.ActivityPayConf[n];for(var a in s){var r=t.ActvityMgr.ins().getActivityInfo(s[a].actId);r&&t.ViewManager.ins().isCheckOpen(s[a].openlimit)&&e.push(s[a])}}return 0==e.length&&t.ViewManager.ins().isShow(i.view)&&t.ViewManager.ins().close(i.view),e.length>0},i.prototype.updateDisposableredpoint=function(){var e=this.getConfig();if(e&&e.param){var n=e.param[0],s=t.GlobalConfig.ActivityPayConf[n];for(var a in s){var r=s[a];t.ViewManager.ins().isCheckOpen(r.openlimit)&&(r.disposableredpoint1&&t.ViewManager.ins().isCheckOpen(r.disposableredpoint1)&&!t.ViewManager.ins().isCheckOpen(r.disposableredpoint2)?2!=i.disposableredpointObj[r.actId]&&(i.disposableredpointObj[r.actId]=1):i.disposableredpointObj[r.actId]=0)}}},i.prototype.getEffName=function(t){return this.effX=35,this.effY=35,"eff_tygq_1"},i.disposableredpointObj={},i}(t.RuleIconBase);t.ActivityPayRuleIcon=e,__reflect(e.prototype,"app.ActivityPayRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.secondChargeId=10274,s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_3],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){var e=t.ActvityMgr.ins().getActivityInfo(this.secondChargeId);return e&&e.redDot?1:0},i.prototype.onClick=function(){e.prototype.onClick.call(this),t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_SECOND_CHARGE_TIPS)},i.prototype.getEffName=function(t){return this.effX=35,this.effY=35,"eff_tygq"},i.prototype.checkShowIcon=function(){var e=t.ActvityMgr.ins().getActivityInfo(this.secondChargeId);return e&&e.info&&e.info.sum>0&&e.info.state<1?!0:!1},i}(t.RuleIconBase);t.ActivitySecondChargeRuleIcon=e,__reflect(e.prototype,"app.ActivitySecondChargeRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.DefaultMgr.ins().postPlayerChange,t.DefaultMgr.ins().post_g_0_3],s
}return __extends(i,e),i.prototype.checkShowIcon=function(){var e=t.ActvityMgr.ins().warActId;if(0!=e){var i=t.ActvityMgr.ins().getActivityInfo(e);if(i)return!0;t.ViewManager.ins().isShow(t.ActivityWarView)&&t.ViewManager.ins().close(t.ActivityWarView)}return!1},i.prototype.checkShowRedPoint=function(){var e=t.ActvityMgr.ins().warActId,i=t.ActvityMgr.ins().getActivityInfo(e);if(i&&i.redDot>0)return 1;for(var n in t.GlobalConfig.Activity15Config){var s=t.ActvityMgr.ins().getActivityInfo(Number(n));if(s&&s.redDot>0)return 1}return 0},i}(t.RuleIconBase);t.ActivityWarRuleIcon=e,__reflect(e.prototype,"app.ActivityWarRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_3],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.DefaultMgr.ins().postPlayerChange,t.DefaultMgr.ins().post_g_0_3,t.OtherMgr.ins().post_26_83,t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_3,t.BagMgr.ins().post_8_4],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){return t.ActivityWlelfareData.ins().getAllRedDotState()},i.prototype.checkShowIcon=function(){return!0},i}(t.RuleIconBase);t.ActivityWlelfareRuleIcon=e,__reflect(e.prototype,"app.ActivityWlelfareRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s.updateMessage=[t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_2,t.BagMgr.ins().post_8_3,t.BagMgr.ins().post_8_4,t.BagMgr.ins().post_8_10,t.DefaultMgr.ins().post_dimensionalKey],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){return t.BagMgr.redPointArr.length>0?1:t.BagMgr.yellowPointArr.length>0?2:0},i}(t.RuleIconBase);t.BagRuleIcon=e,__reflect(e.prototype,"app.BagRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s.updateMessage=[t.BossMgr.ins().post_49_1,t.DefaultMgr.ins().postPlayerChange],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){var e=t.BossMgr.ins().isShowRed();return e},i}(t.RuleIconBase);t.BossRuleIcon=e,__reflect(e.prototype,"app.BossRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel,t.DefaultMgr.ins().post_0_75],s.updateMessage=[t.DefaultMgr.ins().post_0_75,t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return window.isMicro&&0==t.DefaultMgr.ins().microReceive?e.prototype.checkShowIcon.call(this):(t.ViewManager.ins().close(t.CommonMicroWin),!1)},i.prototype.checkShowRedPoint=function(){return window.isMicro&&0==t.DefaultMgr.ins().microReceive&&(1==window.loginWay||0==window.loginWay&&t.EntityMgr.ins().getPayer&&t.EntityMgr.ins().getPayer.propSet&&t.EntityMgr.ins().getPayer.propSet.getLevel()>50)?1:0},i}(t.RuleIconBase);t.CommonMicroRuleIcon=e,__reflect(e.prototype,"app.CommonMicroRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.DefaultMgr.ins().post_updateZsLevel],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_3,t.BagMgr.ins().post_8_4],s}return __extends(i,e),i.prototype.checkShowIcon=function(){var i=t.GameSocket.IsCrossService?2:1,n=t.CrossServerMgr.ins().getCrossServerActTab(i),s=[];for(var a in n)s.push(n[a]);s.sort(this.tabSort),this.tar.icon="icon_kaifuzhanchang",this.tar.ingGrp&&(this.tar.ingGrp.visible=!1);var r=t.EntityMgr.ins().getPlayerPropertySet();if(r&&r.propSet){var o=r.propSet;o.getZSLevel()<3&&this.tar.ingGrp&&(this.tar.timeLab.text=t.StringUtils.replace(t.LanguageUtils.language_Common_259,3),this.tar.ingGrp.visible=!0)}if(s.length>0)if(36==s[0].activityid)this.tar.icon="icon_kaifuzhanchang";else{var l=t.ActvityMgr.ins().getActivityInfo(s[0].activityid);l&&l.redDot&&(s[0].mainIcon?this.tar.icon=s[0].mainIcon+"":"icon_kaifuzhanchang",this.tar.ingGrp&&(this.tar.timeLab.text=t.LanguageUtils.language_Common_260,this.tar.ingGrp.visible=!0))}return e.prototype.checkShowIcon.call(this)},i.prototype.tabSort=function(e,i){var n=t.ActvityMgr.ins().getActivityInfo(e.activityid),s=t.ActvityMgr.ins().getActivityInfo(i.activityid);if(n&&s){if(e.sortact>i.sortact)return-1;if(e.sortact<i.sortact)return 1}else{if(n||s)return n&&!s?-1:1;if(e.sortact<i.sortact)return-1;if(e.sortact>i.sortact)return 1}},i.prototype.checkShowRedPoint=function(){var e=0;return e=t.CrossServerMgr.ins().getCrossServerActRed()},i}(t.RuleIconBase);t.CrossServerActRuleIcon=e,__reflect(e.prototype,"app.CrossServerActRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.OtherMgr.ins().post_26_85],s.updateMessage=[t.BossMgr.ins().post_49_1,t.DefaultMgr.ins().postPlayerChange,t.OtherMgr.ins().post_26_85],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(t.TimerManager.ins().remove(this.updateCumulOnlineTime,this),!e.prototype.checkShowIcon.call(this))return!1;var i=t.OtherMgr.ins().cumulativeOnlineData;if(!i)return t.OtherMgr.ins().send_26_70(),!1;var n=t.GlobalConfig.OnlineTimeRewardConfig,s=n[1],a=n[2],r=!0;for(var o in s)if(0==t.MathUtils.getValueAtBit(i.received,s[o].id)){r=!1;break}for(var o in a)if(0==t.MathUtils.getValueAtBit(i.received,a[o].id)){r=!1;break}if(r)return!1;if(this.tar.ingGrp&&(this.tar.ingGrp.visible=!0),t.OtherMgr.ins().getRedCumulativeOnline()>0)this.tar.timeLab.text=t.LanguageUtils.language_Common_223;else{this.tar.timeLab.text=t.LanguageUtils.language_Common_228;for(var o in s)if(0==t.MathUtils.getValueAtBit(i.received,s[o].id)){var l=i.time+Math.floor((egret.getTimer()-i.time2)/1e3);this.cumulOnlineTime=s[o].onlineTimes-l,this.updateCumulOnlineTime(),this.cumulOnlineTime>0&&t.TimerManager.ins().doTimer(1e3,0,this.updateCumulOnlineTime,this);break}}return!0},i.prototype.checkShowRedPoint=function(){var e=t.OtherMgr.ins().getRedCumulativeOnline();return e},i.prototype.getEffName=function(t){return this.effX=35,this.effY=35,"eff_tygq"},i.prototype.updateCumulOnlineTime=function(){var e=t.DateUtils.getFormatBySecond(this.cumulOnlineTime,t.DateUtils.TIME_FORMAT_12);this.tar.timeLab.text=t.StringUtils.replace(t.LanguageUtils.language_Common_224,e),this.cumulOnlineTime<=0&&(t.TimerManager.ins().remove(this.updateCumulOnlineTime,this),t.OtherMgr.ins().send_26_70()),this.cumulOnlineTime--},i}(t.RuleIconBase);t.CumulativeOnlineRuleIcon=e,__reflect(e.prototype,"app.CumulativeOnlineRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return e.prototype.checkShowIcon.call(this)?(t.TimerManager.ins().remove(this.updateShowRedPoint,this),t.TimerManager.ins().doTimer(1e3,0,this.updateShowRedPoint,this),this.updateShowRedPoint(),!0):!1},i.prototype.checkShowRedPoint=function(){return t.BossMgr.ins().getRedDimensionBoss()},i.prototype.updateShowRedPoint=function(){this.delayUpdate()},i}(t.RuleIconBase);t.DimensionBossRuleIcon=e,__reflect(e.prototype,"app.DimensionBossRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s.updateMessage=[],s}return __extends(i,e),i.prototype.onClick=function(){e.prototype.onClick.call(this),t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_DONATION_TIPS)},i}(t.RuleIconBase);t.DonationRankRuleIcon=e,__reflect(e.prototype,"app.DonationRankRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(t.TimerManager.ins().remove(this.updateCountDown,this),!e.prototype.checkShowIcon.call(this))return!1;var i=new Date(t.GlobalData.serverTime),n=i.getMonth()+1,s=i.getDate();return 11!=n||8>s||s>14?!1:(t.TimerManager.ins().doTimer(1e3,0,this.updateCountDown,this),this.updateCountDown(),!0)},i.prototype.onClick=function(){window.open("https://yxj2021.game.360.cn/")},i.prototype.updateCountDown=function(){var e=new Date(t.GlobalData.serverTime),i=e.getMonth()+1,n=e.getDate();(11!=i||8>n||n>14)&&this.updateShow()},i}(t.RuleIconBase);t.DoubleElevenRuleIcon=e,__reflect(e.prototype,"app.DoubleElevenRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onClick=function(){var e=t.EntityMgr.ins().getPayer;e&&window.feedbackFunction({uid:t.LocationProperty.openID,rolename:e.propSet.getName()})},i.prototype.checkShowIcon=function(){return 10001==Main.gameParameter.pfID},i}(t.RuleIconBase);t.FeedbackRuleIcon=e,__reflect(e.prototype,"app.FeedbackRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.countMessage=[t.DefaultMgr.ins().postPlayerChange],s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s}return __extends(i,e),i}(t.RuleIconBase);t.FlyShoesRuleIcon=e,__reflect(e.prototype,"app.FlyShoesRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s.updateMessage=[t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_2,t.BagMgr.ins().post_8_4,t.DefaultMgr.ins().postPlayerChange,t.ForgeMgr.ins().post_19_1],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){var e=t.GlobalConfig.MergeTotal;for(var i in e){var n=t.ForgeMgr.ins().getOneLvRed(e[i].id);if(n)return 1}return 0},i}(t.RuleIconBase);t.ForgeRuleIcon=e,__reflect(e.prototype,"app.ForgeRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.FriendMgr.ins().postReqList],s}return __extends(i,e),i.prototype.delayUpdateShow=function(){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getACTOR_ID();t.GlobalData.dicIcon[this.id]={id:n,isShow:!0},e.prototype.delayUpdateShow.call(this)},i.prototype.checkShowIcon=function(){t.EventManager.ins().addEvent(t.CompEvent.HIDE_ICON,this.onHide,this);var e=t.EntityMgr.ins().getPayer,i=e.propSet.getACTOR_ID(),n=t.GlobalData.dicIcon;for(var s in n)if(n[s].id==i&&s==this.id+"")return n[s].isShow;return!1},i.prototype.updateMC=function(t){var e=this.getTar();if(e)if(e.y=0,t){var i=egret.Tween.get(e,{loop:!0});i.to({y:-15},150).to({y:0},100).to({y:-5},100).to({y:0},100).wait(1500)}else egret.Tween.removeTweens(e)},i.prototype.onClick=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getACTOR_ID();t.GlobalData.dicIcon[this.id]={id:i,isShow:!1},this.updateShow(),t.EventManager.ins().removeEvent(t.CompEvent.HIDE_ICON,this.onHide,this),t.ViewManager.ins().isShow(t.FriendView)||t.ViewManager.ins().open(t.FriendView,4)},i.prototype.onHide=function(e){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getACTOR_ID();t.GlobalData.dicIcon[this.id]={id:n,isShow:!1},this.updateShow()},i}(t.RuleIconBase);t.FriendFlyIcon=e,__reflect(e.prototype,"app.FriendFlyIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.updateMessage=[t.DefaultMgr.ins().post_AttackState],s}return __extends(i,e),i.prototype.update=function(){this.isDelayUpdate=!1,t.PlayerRoleAI.ins().attackState?this.play(-1):this.stopMc()},i.prototype.stopMc=function(){this.mc&&(this.mc.destroy(),this.mc=null)},i.prototype.play=function(e){this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.x=36,this.mc.y=36,this.mc.blendMode=egret.BlendMode.ADD,this.getTar().addChild(this.mc)),e?this.mc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_tykx1",e,this.stopMc.bind(this)):this.mc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_tykx1",e)},i.prototype.onClick=function(){if(!t.RockerView.INOPERATION){var e="",i=t.EntityMgr.ins().getPayer;if(i){if(t.PlayerRoleAI.ins().stopAI(),t.MapView.m_Move_Char)return t.MapView.m_ack_Char=t.EntityMgr.ins().getCharRole(t.MapView.m_Move_Char.recog),t.MapView.m_ack_Char&&t.MapView.m_ack_Char.propSet&&(e=t.MapView.m_ack_Char.propSet.getName(),t.UserTips.ins().showFightTips('开始自动PK"'+e+'"')),t.DefaultMgr.ins().postUpdateTarget(t.MapView.m_Move_Char.recog),t.PlayerRoleAI.ins().attackState=!0,void this.play(1);if(i.lockTarget){var n=t.EntityMgr.ins().getCharRole(i.lockTarget);if(n)return n.propSet.getRace()==t.ActorRace.Human&&1==i.propSet.getPKtype()?void t.UserTips.ins().showUITips("|C:0xff7700&T:当前为和平攻击模式|"):(t.MapView.m_ack_Char=n,t.MapView.m_ack_Char&&t.MapView.m_ack_Char.propSet&&(e=t.MapView.m_ack_Char.propSet.getName(),t.UserTips.ins().showFightTips('开始自动PK"'+e+'"')),t.PlayerRoleAI.ins().attackState=!0,void this.play(1))}t.UserTips.ins().showUITips(t.LanguageUtils.language_System55)}}},i.prototype.checkShowIcon=function(){return!0},i.prototype.isRange=function(t,e,i,n){return Math.abs(t-i)>10||Math.abs(e-n)>5?!1:!0},i}(t.RuleIconBase);t.GeneralAckRuleIcon=e,__reflect(e.prototype,"app.GeneralAckRuleIcon")}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e.prototype.checkShowIcon=function(){return t.prototype.checkShowIcon.call(this)},e.prototype.checkShowRedPoint=function(){return e.isRed},e.prototype.onClick=function(){e.isRed=0,this.tar.redImage&&(this.tar.redImage.visible=!1),this.tar.redDot&&(this.tar.redDot.visible=!1),t.prototype.onClick.call(this)},e.isRed=1,e}(t.RuleIconBase);t.GongGaoRuleIcon=e,__reflect(e.prototype,"app.GongGaoRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s.updateMessage=[t.GuildMgr.ins().post_UpdateRedPos],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){if(t.GuildMgr.ins().redPosObj){var e=t.GuildMgr.ins().redPosObj;return 2==e.redState?0:e.redType}return 0},i.prototype.onClick=function(){t.GuildMgr.ins().sendGuildInfo(!0)},i}(t.RuleIconBase);t.GuildRuleIcon=e,__reflect(e.prototype,"app.GuildRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s._isOpen=!1,s.updateMessage=[t.DefaultMgr.ins().post_updateOnHook],s}return __extends(i,e),i.prototype.update=function(){this.isDelayUpdate=!1,t.PlayerRoleAI.ins().isOpen?(this._isOpen!=t.PlayerRoleAI.ins().isOpen&&this.playOpenMc(),this.play(-1)):this.stopMc(),this._isOpen=t.PlayerRoleAI.ins().isOpen},i.prototype.playOpenMc=function(){this.openMc||(this.openMc=t.ObjectPool.pop("app.MovieClip"),this.openMc.touchEnabled=!1,this.openMc.x=gamelib.DeviceUtils.IsMobile?37:39,this.openMc.y=gamelib.DeviceUtils.IsMobile?36:38,this.getTar().addChildAt(this.openMc,11)),this.openMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_gjxbz",1,this.stopOpenMc.bind(this))},i.prototype.stopOpenMc=function(){this.openMc&&(this.openMc.destroy(),this.openMc=null)},i.prototype.play=function(e){this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.x=gamelib.DeviceUtils.IsMobile?37:39,this.mc.y=gamelib.DeviceUtils.IsMobile?36:38,this.mc.blendMode=egret.BlendMode.ADD,this.getTar().addChildAt(this.mc,10)),e?this.mc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_tykx1",e,this.stopMc.bind(this)):this.mc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_tykx1",e)},i.prototype.stopMc=function(){this.mc&&(this.mc.destroy(),this.mc=null)},i.prototype.onClick=function(){t.RockerView.INOPERATION||(t.EntityMgr.ins().getPayer&&(t.PlayerRoleAI.ins().isOpen?t.PlayerRoleAI.ins().stopAI():(t.PlayerRoleAI.ins().startAI(),this._isOpen!=t.PlayerRoleAI.ins().isOpen&&this.playOpenMc())),this._isOpen=t.PlayerRoleAI.ins().isOpen,this.play(1))},i.prototype.checkShowIcon=function(){return!0},i}(t.RuleIconBase);t.HangUpRuleIcon=e,__reflect(e.prototype,"app.HangUpRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onClick=function(){t.CautionView.show(t.LanguageUtils.language_Common_235,function(){t.GameSocket.ins().reLogin()},this)},i}(t.RuleIconBase);t.KuaFuQuitRuleIcon=e,__reflect(e.prototype,"app.KuaFuQuitRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.MailMgr.ins().post_50_2],s.updateMessage=[t.MailMgr.ins().post_50_1,t.MailMgr.ins().post_50_2,t.MailMgr.ins().post_50_3,t.MailMgr.ins().post_50_6,t.MailMgr.ins().post_50_4],s}return __extends(i,e),i.prototype.delayUpdateShow=function(){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getACTOR_ID();t.GlobalData.dicIcon[this.id]={id:n,isShow:!0},e.prototype.delayUpdateShow.call(this)},i.prototype.checkShowIcon=function(){t.EventManager.ins().addEvent(t.CompEvent.HIDE_ICON,this.onHide,this);var e=t.EntityMgr.ins().getPayer,i=e.propSet.getACTOR_ID(),n=t.GlobalData.dicIcon,s=!1;for(var a in n)if(n[a].id==i&&a==this.id+""){s=n[a].isShow;break}return s},i.prototype.updateMC=function(t){var e=this.getTar();if(e)if(e.y=0,t){var i=egret.Tween.get(e,{loop:!0});i.to({y:-15},150).to({y:0},100).to({y:-5},100).to({y:0},100).wait(1500)}else egret.Tween.removeTweens(e)},i.prototype.onClick=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getACTOR_ID();t.GlobalData.dicIcon[this.id]={id:i,isShow:!1},this.updateShow(),t.EventManager.ins().removeEvent(t.CompEvent.HIDE_ICON,this.onHide,this),t.ViewManager.ins().isShow(t.MailView)||t.ViewManager.ins().open(t.MailView)},i.prototype.onHide=function(e){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getACTOR_ID();t.GlobalData.dicIcon[this.id]={id:n,isShow:!1},this.updateShow()},i}(t.RuleIconBase);t.MailFlyIcon=e,__reflect(e.prototype,"app.MailFlyIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s.updateMessage=[t.MailMgr.ins().post_50_1,t.MailMgr.ins().post_50_2,t.MailMgr.ins().post_50_3,t.MailMgr.ins().post_50_6,t.MailMgr.ins().post_50_4,t.MailMgr.ins().postMailStateChange,t.MailMgr.ins().post_Mail_Update],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){return t.MailMgr.ins().getBagRed()},i.prototype.onClick=function(){e.prototype.onClick.call(this),t.EventManager.ins().sendEvent(t.CompEvent.HIDE_ICON),this.updateShow()},i}(t.RuleIconBase);t.MailRuleIcon=e,__reflect(e.prototype,"app.MailRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s}return __extends(i,e),i}(t.RuleIconBase);t.MainServerInfoRuleIcon=e,__reflect(e.prototype,"app.MainServerInfoRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s}return __extends(i,e),i.prototype.checkShowIcon=function(){var e=this.getConfig(),i=t.EntityMgr.ins().getPayer;if(e&&e.isShowNeed){if(e.isShowNeed.level&&i.propSet.getLevel()<e.isShowNeed.level)return!1;if(e.isShowNeed.openDay){if(0==t.GlobalData.sectionOpenDay)return!1;if(t.GlobalData.sectionOpenDay>=e.isShowNeed.openDay)return!1}return!0}},i}(t.RuleIconBase);t.MainTomorrowRuleIcon=e,__reflect(e.prototype,"app.MainTomorrowRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.checkShowIcon=function(){var i=t.GlobalConfig.ThreeClientConfig,n=[];for(var s in i)0!=i[s].IsShow&&n.push(i[s]);return 0==n.length?!1:e.prototype.checkShowIcon.call(this)},i}(t.RuleIconBase);t.MultiVersionRuleIcon=e,__reflect(e.prototype,"app.MultiVersionRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_0_74,t.DefaultMgr.ins().post_deleteType],s}return __extends(i,e),i.prototype.checkShowIcon=function(){var e=t.DefaultMgr.ins().getCallIShow(2);if(t.TimerManager.ins().removeAll(this),e){var i=e.time-egret.getTimer();return i&&t.TimerManager.ins().doTimer(i,1,this.stopTime,this),!0}return!1},i.prototype.updateMC=function(t){var e=this.getTar();if(e)if(e.y=0,t){var i=egret.Tween.get(e,{loop:!0});i.to({y:-15},150).to({y:0},100).to({y:-5},100).to({y:0},100).wait(1500)}else egret.Tween.removeTweens(e)},i.prototype.stopTime=function(){t.TimerManager.ins().removeAll(this),t.DefaultMgr.ins().post_deleteType(2)},i.prototype.onClick=function(){var e=t.DefaultMgr.ins().getCallIShow(2);e&&(t.DefaultMgr.ins().post_deleteType(2),this.updateShow(),t.ViewManager.ins().open(t.CallView,e))},i}(t.RuleIconBase);t.NewGuildRuleIcon=e,__reflect(e.prototype,"app.NewGuildRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_0_74,t.DefaultMgr.ins().post_deleteType],s}return __extends(i,e),i.prototype.checkShowIcon=function(){var e=t.DefaultMgr.ins().getCallIShow(1);if(t.TimerManager.ins().removeAll(this),e){var i=e.time-egret.getTimer();return i&&t.TimerManager.ins().doTimer(i,1,this.stopTime,this),!0}return!1},i.prototype.stopTime=function(){t.TimerManager.ins().removeAll(this),t.DefaultMgr.ins().post_deleteType(1)},i.prototype.updateMC=function(t){var e=this.getTar();if(e)if(e.y=0,t){var i=egret.Tween.get(e,{loop:!0});i.to({y:-15},150).to({y:0},100).to({y:-5},100).to({y:0},100).wait(1500)}else egret.Tween.removeTweens(e)},i.prototype.onClick=function(){var e=t.DefaultMgr.ins().getCallIShow(1);e&&(t.DefaultMgr.ins().post_deleteType(1),this.updateShow(),t.ViewManager.ins().open(t.CallView,e))},i}(t.RuleIconBase);t.NewRanksRuleIcon=e,__reflect(e.prototype,"app.NewRanksRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.OtherMgr.ins().post_26_28],s}return __extends(i,e),i.prototype.checkShowIcon=function(){var e=[],i=t.GlobalConfig.ActivityOpenServiceConf;for(var n in i){var s=t.ActvityMgr.ins().getActivityInfo(i[n].actId);s&&t.ViewManager.ins().isCheckOpen(i[n].openlimit)&&e.push(i[n])}return 0==e.length&&t.ViewManager.ins().isShow(t.OpenServerGiftWin)&&t.ViewManager.ins().close(t.OpenServerGiftWin),e.length>0},i.prototype.checkShowRedPoint=function(){t.GlobalData.sectionOpenDay;for(var e in t.GlobalConfig.ActivityOpenServiceConf){var i=t.GlobalConfig.ActivityOpenServiceConf[e],n=t.ActvityMgr.ins().getActivityInfo(i.actId);if(n&&t.ViewManager.ins().isCheckOpen(i.openlimit)&&0!=n.redDot)return 1}return 0},i}(t.RuleIconBase);t.OpenServerRuleIcon=e,__reflect(e.prototype,"app.OpenServerRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.OtherMgr.ins().post_26_28,t.OtherMgr.ins().post_26_45],s}return __extends(i,e),i.prototype.checkShowIcon=function(){var e=[],i=t.GlobalConfig.ActivityCompetitionConf;for(var n in i){var s=t.ActvityMgr.ins().getActivityInfo(i[n].actId);s&&t.ViewManager.ins().isCheckOpen(i[n].openlimit)&&e.push(i[n])}return 0==e.length&&t.ViewManager.ins().isShow(t.OpenServerSportsWin)&&t.ViewManager.ins().close(t.OpenServerSportsWin),e.length>0},i.prototype.checkShowRedPoint=function(){this.updateDisposableredpoint();for(var e in t.GlobalConfig.ActivityCompetitionConf){var n=t.GlobalConfig.ActivityCompetitionConf[e],s=t.ActvityMgr.ins().getActivityInfo(n.actId);if(s&&s.info){if(!t.ViewManager.ins().isCheckOpen(n.openlimit))continue;if(s&&0!=s.redDot)return 1;if(1==i.disposableredpointObj[n.actId])return 1}}return 0},i.prototype.updateDisposableredpoint=function(){for(var e in t.GlobalConfig.ActivityCompetitionConf){var n=t.GlobalConfig.ActivityCompetitionConf[e];t.ActvityMgr.ins().getActivityInfo(n.actId);t.ViewManager.ins().isCheckOpen(n.openlimit)&&(n.disposableredpoint1&&t.ViewManager.ins().isCheckOpen(n.disposableredpoint1)&&!t.ViewManager.ins().isCheckOpen(n.disposableredpoint2)?2!=i.disposableredpointObj[n.actId]&&(i.disposableredpointObj[n.actId]=1):i.disposableredpointObj[n.actId]=0)}},i.disposableredpointObj={},i}(t.RuleIconBase);t.OpenServerSportsRuleIcon=e,__reflect(e.prototype,"app.OpenServerSportsRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.actId=0,s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4],s}return __extends(i,e),i.prototype.checkShowIcon=function(){t.TimerManager.ins().remove(this.updateCountdownTime,this);var e=t.GlobalConfig.ActivityDrawConf.ActivityId;for(var i in e){var n=t.ActvityMgr.ins().getActivityInfo(e[i]);if(n&&n.info){if(this.actId=e[i],this.delayUpdate(),this.countdownTime=n.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.tar.ingGrp&&(this.tar.ingGrp.visible=!0),this.tar.timeLab&&(this.updateCountdownTime(),this.countdownTime))return t.TimerManager.ins().doTimer(1e3,0,this.updateCountdownTime,this),!0}else t.EventManager.ins().sendEvent(t.CompEvent.CLOSE_TREASURE)}return!1},i.prototype.checkShowRedPoint=function(){if(0!=this.actId){var e=t.ActvityMgr.ins().getActivityInfo(this.actId);if(e&&e.info){var i=t.GlobalData.sectionOpenDay,n=t.ActvityMgr.ins().getActivityConfigById(this.actId);if(n&&n[i]){var s=n[i];if(e.info.extractCount<s.Maxcount)return 1}}else this.actId=0}return 0},i.prototype.updateCountdownTime=function(){this.tar.timeLab&&(this.tar.timeLab.text=t.DateUtils.getFormatBySecond(this.countdownTime,t.DateUtils.TIME_FORMAT_12)),this.countdownTime<=0&&(t.TimerManager.ins().remove(this.updateCountdownTime,this),this.tar.ingGrp&&(this.tar.ingGrp.visible=!1),this.delayUpdateShow()),this.countdownTime--},i}(t.RuleIconBase);t.OpenServerTreasureRuleIcon=e,__reflect(e.prototype,"app.OpenServerTreasureRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.actId=0,s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4],s}return __extends(i,e),i.prototype.checkShowIcon=function(){t.TimerManager.ins().remove(this.updateCountdownTime,this);var e=t.GlobalConfig.ActivityDrawConf.GlobalId2;for(var i in e){var n=t.ActvityMgr.ins().getActivityInfo(e[i]);if(n&&n.info){if(this.actId=e[i],this.delayUpdate(),this.countdownTime=n.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.tar.ingGrp&&(this.tar.ingGrp.visible=!0),this.tar.timeLab&&(this.updateCountdownTime(),this.countdownTime))return t.TimerManager.ins().doTimer(1e3,0,this.updateCountdownTime,this),!0}else t.EventManager.ins().sendEvent(t.CompEvent.CLOSE_TREASURE)}return!1},i.prototype.checkShowRedPoint=function(){if(0!=this.actId){var e=t.ActvityMgr.ins().getActivityInfo(this.actId);if(e&&e.info){var i=new Date(1e3*e.openTime),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()).getTime(),s=Math.floor((t.GlobalData.serverTime-n)/t.DateUtils.MS_PER_DAY)+1,a=t.ActvityMgr.ins().getActivityConfigById(this.actId);if(a&&a[s]){var r=a[s];if(e.info.extractCount<r.Maxcount)return 1}}}return 0},i.prototype.updateCountdownTime=function(){this.tar.timeLab&&(this.tar.timeLab.text=t.DateUtils.getFormatBySecond(this.countdownTime,t.DateUtils.TIME_FORMAT_12)),this.countdownTime<=0&&(t.TimerManager.ins().remove(this.updateCountdownTime,this),this.tar.ingGrp&&(this.tar.ingGrp.visible=!1),this.delayUpdateShow()),this.countdownTime--},i}(t.RuleIconBase);t.OpenServerTreasureThreeRuleIcon=e,__reflect(e.prototype,"app.OpenServerTreasureThreeRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.actId=0,s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4],s}return __extends(i,e),i.prototype.checkShowIcon=function(){t.TimerManager.ins().remove(this.updateCountdownTime,this);var e=t.GlobalConfig.ActivityDrawConf.GlobalId;for(var i in e){var n=t.ActvityMgr.ins().getActivityInfo(e[i]);if(n&&n.info){if(this.actId=e[i],this.delayUpdate(),this.countdownTime=n.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.tar.ingGrp&&(this.tar.ingGrp.visible=!0),this.tar.timeLab&&(this.updateCountdownTime(),this.countdownTime))return t.TimerManager.ins().doTimer(1e3,0,this.updateCountdownTime,this),!0}else t.EventManager.ins().sendEvent(t.CompEvent.CLOSE_TREASURE)}return!1},i.prototype.checkShowRedPoint=function(){if(0!=this.actId){var e=t.ActvityMgr.ins().getActivityInfo(this.actId);if(e&&e.info){var i=new Date(1e3*e.openTime),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()).getTime(),s=Math.floor((t.GlobalData.serverTime-n)/t.DateUtils.MS_PER_DAY)+1,a=t.ActvityMgr.ins().getActivityConfigById(this.actId);if(a&&a[s]){var r=a[s];if(e.info.extractCount<r.Maxcount)return 1}}}return 0},i.prototype.updateCountdownTime=function(){this.tar.timeLab&&(this.tar.timeLab.text=t.DateUtils.getFormatBySecond(this.countdownTime,t.DateUtils.TIME_FORMAT_12)),this.countdownTime<=0&&(t.TimerManager.ins().remove(this.updateCountdownTime,this),this.tar.ingGrp&&(this.tar.ingGrp.visible=!1),this.delayUpdateShow()),this.countdownTime--},i}(t.RuleIconBase);t.OpenServerTreasureTwoRuleIcon=e,__reflect(e.prototype,"app.OpenServerTreasureTwoRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.updateMessage=[t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_2,t.BagMgr.ins().post_8_4,t.DefaultMgr.ins().postPlayerChange,t.ForgeMgr.ins().post_19_1],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){return t.ForgeMgr.ins().getForgeRed2()},i}(t.RuleIconBase);
t.PhoneComposeRuleIcon=e,__reflect(e.prototype,"app.PhoneComposeRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_updateLevel,t.DefaultMgr.ins().post_updateZsLevel,t.OtherMgr.ins().post_26_28],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return e.prototype.checkShowIcon.call(this)},i}(t.RuleIconBase);t.PhoneForgeUpStarRuleIcon=e,__reflect(e.prototype,"app.PhoneForgeUpStarRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.PrivateDealsMgr.ins().post_13_1,t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.PrivateDealsMgr.ins().post_13_3,t.PrivateDealsMgr.ins().post_deleteInfo],s}return __extends(i,e),i.prototype.updateMC=function(t){var e=this.getTar();if(e)if(e.y=0,t){var i=egret.Tween.get(e,{loop:!0});i.to({y:-15},150).to({y:0},100).to({y:-5},100).to({y:0},100).wait(1500)}else egret.Tween.removeTweens(e)},i.prototype.checkShowIcon=function(){for(var e in t.PrivateDealsMgr.ins().playerTradeList)if(t.PrivateDealsMgr.ins().playerTradeList[e])return!0;return!1},i}(t.RuleIconBase);t.PrivateDealsRuleIcon=e,__reflect(e.prototype,"app.PrivateDealsRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.updateMessage=[],n}return __extends(i,e),i.prototype.onClick=function(){var e=this.getConfig();if(e){var i=t.ViewManager.ins().isCheckOpen(e.isOpenNeed);if(!i)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips119);if(t.GameMap.isForbiddenArea)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips120);t.ViewManager.ins().isShow(t.RankView)?t.ViewManager.ins().close(t.RankView):t.ViewManager.ins().open(t.RankView)}},i.prototype.checkShowIcon=function(){return!0},i}(t.RuleIconBase);t.RankRuleIcon=e,__reflect(e.prototype,"app.RankRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s._skillTipsRoleLevel=0,s.skillTipsShowLimit=!1,s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.DefaultMgr.ins().post_g_0_3,t.OtherMgr.ins().post_26_28],s.updateMessage=[t.DefaultMgr.ins().post_g_0_7,t.DefaultMgr.ins().post_g_0_3,t.OtherMgr.ins().post_26_28,t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_3,t.BagMgr.ins().post_8_4,t.SettingMgr.ins().post_17_2,t.SkillMgr.ins().post_updateSkill,t.GhostMgr.ins().post_31_1,t.GhostMgr.ins().post_31_2],s}return __extends(i,e),i.prototype.onClick=function(){var i=this.updateSkillTips();i?t.ViewManager.ins().isShow(t.RoleView)?t.ViewManager.ins().close(t.RoleView):(t.ViewManager.ins().open(t.RoleView,[1,0]),t.DefaultMgr.ins().phoneSkillTipsIsShow=!0,t.DefaultMgr.ins().post_phoneSkillTips()):e.prototype.onClick.call(this)},i.prototype.updateSkillTips=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getLevel(),n=t.GlobalConfig.TimeManagerConfigConfig.Skillguide;if(!t.ViewManager.ins().isCheckOpen(n))return!1;if(t.DefaultMgr.ins().phoneSkillTipsIsShow)return!1;var s=e.propSet.getAP_JOB(),a=t.SkillMgr.ins().getJobSkillredDot(s)>0;return a?this._skillTipsRoleLevel==i&&this._isShow||!a?!1:(this._skillTipsRoleLevel=i,!0):!1},i.prototype.checkShowRedPoint=function(){var e=t.StrengthenMgr.ins().isSatisStrengthened(),i=t.StrengthenMgr.ins().isEnoughStrengthened(),n=t.FashionMgr.ins().isSatisFashionActOrUpdate(),s=t.OtherMgr.ins().getZSRed(),a=t.SkillMgr.ins().getSkillredDot();return e||i||n||s||a},i}(t.RuleIconBase);t.RoleRuleIcon=e,__reflect(e.prototype,"app.RoleRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.actId=43,s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s.updateMessage=[t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.DefaultMgr.ins().postPlayerChange,t.DefaultMgr.ins().post_g_0_3],s}return __extends(i,e),i.prototype.checkShowIcon=function(){var e=t.ActvityMgr.ins().getActivityInfo(this.actId);return e?!0:(t.ViewManager.ins().isShow(t.SecretLandTreasureView)&&t.ViewManager.ins().close(t.SecretLandTreasureView),!1)},i.prototype.checkShowRedPoint=function(){var e=t.ActvityMgr.ins().getActivityInfo(this.actId);return e&&e.redDot>0?1:0},i}(t.RuleIconBase);t.SecretLandTreasureRuleIcon=e,__reflect(e.prototype,"app.SecretLandTreasureRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s._actID=13,s.sbkcdTime=0,s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s.updateMessage=[t.OtherMgr.ins().post_26_8,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.ActvityMgr.ins().post_shaBakNextArard],gamelib.DeviceUtils.IsMobile&&(s.countMessage=[t.OtherMgr.ins().post_26_8,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5,t.ActvityMgr.ins().post_shaBakNextArard]),s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){if(this._actID=t.GlobalData.sectionOpenDay<=3?41:t.GameSocket.IsCrossService?26:13,gamelib.DeviceUtils.IsMobile){var e=t.ActvityMgr.ins().getActivityInfo(this._actID);if(e&&e.redDot)return 1}return 0},i.prototype.checkShowCountDown=function(){t.TimerManager.ins().remove(this.updateSBKCDTime,this),this._actID=t.GlobalData.sectionOpenDay<=3?41:t.GameSocket.IsCrossService?26:13;var e=t.GlobalConfig.ActivityNoticeConfig[1][this._actID];if(e&&!t.ViewManager.ins().isCheckOpen(e.isOpenNeed))return 0;var i=t.ActvityMgr.ins().getActivityInfo(this._actID);t.ActvityMgr.ins().getActivityConfigById(this._actID);if(i&&i.redDot)t.TimerManager.ins().remove(this.updateSBKCDTime,this),this.tar.timeLab&&(this.tar.timeLab.textFlow=t.TextFlowMaker.generateTextFlow("|C:0x28ee01&T:进行中|")),!t.GameSocket.IsCrossService||3!=t.GameMap.mapID&&47!=t.GameMap.mapID&&98!=t.GameMap.mapID?t.GameSocket.IsCrossService&&t.GameMap.fubenID<=0&&t.ViewManager.ins().isShow(t.FuBenView)&&t.ViewManager.ins().close(t.FuBenView):(t.ViewManager.ins().isShow(t.FuBenView)||t.ViewManager.ins().open(t.FuBenView),t.ViewManager.ins().isShow(t.MainTaskWin)&&t.ViewManager.ins().close(t.MainTaskWin));else{t.GameSocket.IsCrossService&&t.GameMap.fubenID<=0&&t.ViewManager.ins().isShow(t.FuBenView)&&t.ViewManager.ins().close(t.FuBenView);if(!(e&&e.TimeDetail&&this.tar.timeLab))return 0;for(var n in e.TimeDetail){var s=e.TimeDetail[n],a=s.StartTime,r=new Date(t.GlobalData.serverTime),o=r.getHours(),l=r.getMinutes(),h=r.getSeconds(),p=r.getDay(),u=0,c=0;if(s.type){var g=a.split(":");if(!(+g[0]>o||+g[0]==o&&+g[1]>l))return t.TimerManager.ins().remove(this.updateSBKCDTime,this),0;if(u=o*t.DateUtils.MS_PER_HOUR+l*t.DateUtils.MS_PER_MINUTE+1e3*h,c=+g[0]*t.DateUtils.MS_PER_HOUR+ +g[1]*t.DateUtils.MS_PER_MINUTE,c>u?this.sbkcdTime=c-u:u>c&&(this.sbkcdTime=t.DateUtils.MS_PER_DAY-(u-c)),this.sbkcdTime>0){this.sbkcdTime+=egret.getTimer(),this.updateSBKCDTime(),t.TimerManager.ins().doTimer(1e3,0,this.updateSBKCDTime,this);break}}else{var d=a.split("-"),m=d[1].split(":");if(0==p&&7!=+d[0]){this.tar.timeLab.textFlow=t.TextFlowMaker.generateTextFlow("3天后");break}if(+d[0]==p&&(+m[0]>o||+m[0]==o&&+m[1]>l)||0==p&&7==+d[0]&&(+m[0]>o||+m[0]==o&&+m[1]>l)){var f=0,c=0;if(f=o*t.DateUtils.MS_PER_HOUR+l*t.DateUtils.MS_PER_MINUTE+1e3*h,c=+m[0]*t.DateUtils.MS_PER_HOUR+ +m[1]*t.DateUtils.MS_PER_MINUTE,c>f?this.sbkcdTime=c-f:f>c&&(this.sbkcdTime=t.DateUtils.MS_PER_DAY-(f-c)),this.sbkcdTime>0){this.sbkcdTime+=egret.getTimer(),this.updateSBKCDTime(),t.TimerManager.ins().doTimer(1e3,0,this.updateSBKCDTime,this);break}}else{if(+d[0]==p&&(m[0]<o||m[0]==o&&+m[1]<l)){var v=3==p?"3":6==p?"4":0==p?"7":"";this.tar.timeLab.textFlow=t.TextFlowMaker.generateTextFlow(v+"天后");break}if(+d[0]>p){this.tar.timeLab.textFlow=t.TextFlowMaker.generateTextFlow(+d[0]-p+"天后");break}}}}}return 1},i.prototype.updateSBKCDTime=function(){var e=this.sbkcdTime-egret.getTimer(),i=t.DateUtils.getMainShaBaKeCD(e);this.tar.timeLab&&(this.tar.timeLab.textFlow=t.TextFlowMaker.generateTextFlow(i),0>=e&&(t.TimerManager.ins().remove(this.updateSBKCDTime,this),this.tar.timeLab.text=""))},i}(t.RuleIconBase);t.ShaChengStarcraftRuleIcon=e,__reflect(e.prototype,"app.ShaChengStarcraftRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.isOpen=!1,n}return __extends(i,e),i.prototype.checkShowIcon=function(){return Main.gameParameter.pfID==t.PlatFormID.ShengQu},i.prototype.onClick=function(){this.isOpen?this.removeIfram():this.getActorInfo()},i.prototype.getActorInfo=function(){this.httpReq=new egret.HttpRequest,this.httpReq.addEventListener(egret.Event.COMPLETE,this.completeFunction,this),this.httpReq.addEventListener(egret.IOErrorEvent.IO_ERROR,this.errorFunction,this),this.httpReq.open(window.noticeUrl,egret.HttpMethod.GET),this.httpReq.send()},i.prototype.completeFunction=function(t){var e=t.target;if(null!=e.response||""!=e.response){var i=JSON.parse(e.response);this.removeIfram(),this.isOpen=!0;var n=document.createElement("div");n.id="iframDiv",n.innerHTML=i.data.notice_content,n.style.position="relative",n.style.top="5%",n.style.width="912px",n.style.height="646px",n.style.margin="0 auto",n.style.textAlign="left",n.style.backgroundImage="url(com_bg_kuang_7.png?v=1)",n.style.backgroundPosition="center center",n.style.backgroundRepeat="no-repeat",n.style.paddingTop="75px",n.style.paddingLeft="50px",document.body.appendChild(n);var s=document.createElement("div");s.id="btnDiv",s.innerHTML='<img id="closeImg" src="btn_guanbi3.png?v=1" height="60" width="60" />',s.style.position="absolute",s.style.right="-15px",s.style.top="30px",s.style.width="60px",s.style.height="60px",n.appendChild(s);var a=document.getElementById("closeImg");a.onclick=this.removeIfram}},i.prototype.errorFunction=function(t){},i.prototype.removeIfram=function(){var t=document.getElementById("iframDiv");t&&document.body.removeChild(t),t=document.getElementById("btnDiv"),t&&document.body.removeChild(t),this.isOpen=!1},i}(t.RuleIconBase);t.ShengQuNoticeRuleIcon=e,__reflect(e.prototype,"app.ShengQuNoticeRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s}return __extends(i,e),i.prototype.checkShowIcon=function(){var i=this.getConfig();if(i&&63==i.id){var n=t.GlobalConfig.ShoptagConfig[1][6];return n&&!t.ViewManager.ins().isCheckOpen(n.closelimit)&&t.ViewManager.ins().isCheckOpen(n.openlimit)?(this.countdownTime=(n.closelimit.openDay-t.GlobalData.sectionOpenDay)*t.DateUtils.SECOND_PER_DAY-t.DateUtils.getTodayPassedSecond(),this.tar.ingGrp&&(this.tar.ingGrp.visible=!0),this.updateCountdownTime(),this.countdownTime>0&&(t.TimerManager.ins().remove(this.updateCountdownTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCountdownTime,this)),!0):!1}return e.prototype.checkShowIcon.call(this)},i.prototype.getEffName=function(t){return this.effX=35,this.effY=35,"eff_tygq_1"},i.prototype.updateCountdownTime=function(){this.tar.timeLab.text=t.DateUtils.getFormatBySecond(this.countdownTime,t.DateUtils.TIME_FORMAT_12),this.countdownTime<=0&&t.TimerManager.ins().remove(this.updateCountdownTime,this),this.countdownTime--},i}(t.RuleIconBase);t.ShopRuleIcon=e,__reflect(e.prototype,"app.ShopRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28],s.updateMessage=[t.SettingMgr.ins().post_17_2,t.DefaultMgr.ins().post_g_0_7,t.SkillMgr.ins().post_updateSkill,t.BagMgr.ins().post_8_1,t.BagMgr.ins().post_8_3,t.BagMgr.ins().post_8_4,t.GhostMgr.ins().post_31_1,t.GhostMgr.ins().post_31_2],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){var e=t.SkillMgr.ins().getSkillredDot(),i=t.GhostMgr.ins().getRed();return e&&i?1:0},i}(t.RuleIconBase);t.SkillRuleIcon=e,__reflect(e.prototype,"app.SkillRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this,a=t.EntityMgr.ins().getPayer,r=a.propSet.getACTOR_ID();return t.GlobalData.dicIcon[s.id]={id:r,isShow:!0},s.showMessage=[t.TeamMgr.ins().post_onReceiveAppJoinMsg],s}return __extends(i,e),i.prototype.showMsgIcon=function(){var e=this;t.TimerManager.ins().doTimerDelay(15e3,0,1,function(){if(!(t.TeamMgr.ins().inviteList.length<=0)&&(t.TeamMgr.ins().inviteList.splice(0,1),t.TeamMgr.ins().inviteList.length<1)){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getACTOR_ID();t.GlobalData.dicIcon[e.id]={id:n,isShow:!1},e.updateShow()}},this.getTar())},i.prototype.updateMC=function(t){var e=this.getTar();if(e)if(e.y=0,t){var i=egret.Tween.get(e,{loop:!0});i.to({y:-15},150).to({y:0},100).to({y:-5},100).to({y:0},100).wait(1500)}else egret.Tween.removeTweens(e)},i.prototype.checkShowIcon=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getACTOR_ID();t.GlobalData.dicIcon[this.id]={id:i,isShow:!1};for(var n in t.TeamMgr.ins().inviteList)t.TeamMgr.ins().curRequestTeamRoleId==t.TeamMgr.ins().inviteList[n].roleId&&(t.GlobalData.dicIcon[this.id]={id:i,isShow:!0},this.showMsgIcon());for(var s in t.GlobalData.dicIcon)if(t.GlobalData.dicIcon[s].id==i&&s==this.id+"")return t.GlobalData.dicIcon[s].isShow;return!1},i.prototype.onClick=function(){var e=t.TeamMgr.ins().inviteList[0];if(null!=e){var i=e.nickName+t.LanguageUtils.language_Team_ReqAddTeam_tips;if(t.TeamMgr.ins().findInviteListDel(e.roleId),t.TeamMgr.ins().inviteList.length<=0){var n=t.EntityMgr.ins().getPayer,s=n.propSet.getACTOR_ID();t.GlobalData.dicIcon[this.id]={id:s,isShow:!1},this.updateShow()}t.CautionView.show(i,function(){t.TeamMgr.ins().onSendApplyJoinTeamReply(e.roleId,1)},this,function(){t.TeamMgr.ins().onSendApplyJoinTeamReply(e.roleId,0)})}},i}(t.RuleIconBase);t.TeamFlyIcon=e,__reflect(e.prototype,"app.TeamFlyIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s.updateMessage=[t.TradeLineMgr.ins().post_27_9],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){return t.TradeLineMgr.ins().getReceiveRed()},i}(t.RuleIconBase);t.TradeLineRuleIcon=e,__reflect(e.prototype,"app.TradeLineRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s.updateMessage=[],s}return __extends(i,e),i.prototype.onClick=function(){e.prototype.onClick.call(this),t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_VIOLENT_TIPS)},i}(t.RuleIconBase);t.ViolentStateRuleIcon=e,__reflect(e.prototype,"app.ViolentStateRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.DefaultMgr.ins().post_g_0_7,t.OtherMgr.ins().post_26_28,t.ActvityMgr.ins().post_25_3],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return!0},i.prototype.onClick=function(){e.prototype.onClick.call(this),t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_VIP_GUIDE_TIPS)},i.prototype.getEffName=function(t){return this.effX=35,this.effY=35,"eff_tygq"},i}(t.RuleIconBase);t.VipRuleIcon=e,__reflect(e.prototype,"app.VipRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_32_3],s.updateMessage=[t.FuLi4366Mgr.ins().post_32_3],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuli360Info;return i?i.isGetAllFcm()?(t.ViewManager.ins().close(t.Fuli360AttestationWin),!1):!0:!1},i.prototype.checkShowRedPoint=function(){return t.FuLi4366Mgr.ins().getRed_attestation()},i}(t.RuleIconBase);t.Fuli360AttestationRuleIcon=e,__reflect(e.prototype,"app.Fuli360AttestationRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_32_3],s.updateMessage=[t.FuLi4366Mgr.ins().post_32_3],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuli360Info;return i?!0:!1},i.prototype.checkShowRedPoint=function(){return t.FuLi4366Mgr.ins().getRed_dawanjia()},i.prototype.onClick=function(){var i=t.FuLi4366Mgr.ins().fuli360Info;return i&&i.isGetAllDawanjia()?void window.openDawanjia():void e.prototype.onClick.call(this)},i}(t.RuleIconBase);t.FuLi360RuleIcon=e,__reflect(e.prototype,"app.FuLi360RuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post37Gift],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuli37Info;return i?!0:!1},i}(t.RuleIconBase);t.Fuli37RuleIcon=e,__reflect(e.prototype,"app.Fuli37RuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel,t.FuLi4366Mgr.ins().post_32_1],s.updateMessage=[t.FuLi4366Mgr.ins().post_32_1,t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return 10004==Main.gameParameter.pfID&&t.FuLi4366Mgr.ins().giftInfo&&0==t.FuLi4366Mgr.ins().giftInfo.isMicro?e.prototype.checkShowIcon.call(this):(t.ViewManager.ins().close(t.FuLi4366MicroWin),!1)},i.prototype.checkShowRedPoint=function(){return 10004==Main.gameParameter.pfID&&t.FuLi4366Mgr.ins().giftInfo&&0==t.FuLi4366Mgr.ins().giftInfo.isMicro&&(1==window.loginWay||0==window.loginWay&&t.EntityMgr.ins().getPayer&&t.EntityMgr.ins().getPayer.propSet&&t.EntityMgr.ins().getPayer.propSet.getLevel()>50)?1:0},i}(t.RuleIconBase);t.FuLi4366MicroRuleIcon=e,__reflect(e.prototype,"app.FuLi4366MicroRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s.updateMessage=[t.FuLi4366Mgr.ins().post_32_1,t.FuLi4366Mgr.ins().postRuleIconRed],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return 10004==Main.gameParameter.pfID?e.prototype.checkShowIcon.call(this):!1},i.prototype.checkShowRedPoint=function(){for(var e=1;4>e;e++){var i=t.FuLi4366Mgr.ins().getRedPoint(e);if(i)return i}return 0},i}(t.RuleIconBase);t.FuLi4366RuleIcon=e,__reflect(e.prototype,"app.FuLi4366RuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return 10004==Main.gameParameter.pfID?e.prototype.checkShowIcon.call(this):!1},i}(t.RuleIconBase);t.FuLi4366VipRuleIcon=e,__reflect(e.prototype,"app.FuLi4366VipRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){return 1},i.prototype.onClick=function(){window.open("https://www.7youxi.com/present/")},i}(t.RuleIconBase);t.Fuli7GameCaiGiftRuleIcon=e,__reflect(e.prototype,"app.Fuli7GameCaiGiftRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28],s.updateMessage=[],s}return __extends(i,e),i.prototype.onClick=function(){window.open("https://shang.qq.com/wpa/qunwpa?idkey=bb620a0c537a785293a8ecef158726aa881b43d377e234a7b67f6fe4974c88bc")},i}(t.RuleIconBase);t.Fuli7GameFuLiQunRuleIcon=e,__reflect(e.prototype,"app.Fuli7GameFuLiQunRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28],s.updateMessage=[],s}return __extends(i,e),i}(t.RuleIconBase);t.Fuli7GameVipRuleIcon=e,__reflect(e.prototype,"app.Fuli7GameVipRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_32_4],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return e.prototype.checkShowIcon.call(this)&&t.FuLi4366Mgr.ins().fuli7gameInfo?1==t.FuLi4366Mgr.ins().fuli7gameInfo.isWxGift?(t.ViewManager.ins().close(t.Fuli7GameWXGiftWin),!1):!0:!1},i}(t.RuleIconBase);t.Fuli7GameWXGiftRuleIcon=e,__reflect(e.prototype,"app.Fuli7GameWXGiftRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.PlatformFuliManager.ins().platformFuliInfo;return i?!0:!1},i}(t.RuleIconBase);t.FuliIqiyiQQGroupRuleIcon=e,__reflect(e.prototype,"app.FuliIqiyiQQGroupRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28],s.updateMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_32_35],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){for(var e=1;6>e;e++)if(t.ActvityMgr.ins().updateYYRed(4,e)>0)return 1;return 0},i}(t.RuleIconBase);t.FuLiKu25RuleIcon=e,__reflect(e.prototype,"app.FuLiKu25RuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowRedPoint=function(){return 0},i}(t.RuleIconBase);t.FuLiKu25SuperVipRuleIcon=e,__reflect(e.prototype,"app.FuLiKu25SuperVipRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_32_5],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuliLuDaShiInfo;return i?!0:!1},i}(t.RuleIconBase);t.FuliLuDaShiGiftRuleIcon=e,__reflect(e.prototype,"app.FuliLuDaShiGiftRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_32_5],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuliLuDaShiInfo;return i?i.isGetAllMicro()?(t.ViewManager.ins().close(t.FuliLuDaShiMicroWin),!1):!0:!1},i}(t.RuleIconBase);t.FuliLuDaShiMicroRuleIcon=e,__reflect(e.prototype,"app.FuliLuDaShiMicroRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_32_5],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuliLuDaShiInfo;return i?!0:!1},i}(t.RuleIconBase);t.FuliLuDaShiPhoneGiftRuleIcon=e,__reflect(e.prototype,"app.FuliLuDaShiPhoneGiftRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_32_5],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuliLuDaShiInfo;return i?!0:!1},i}(t.RuleIconBase);t.FuliLuDaShiVipRuleIcon=e,__reflect(e.prototype,"app.FuliLuDaShiVipRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().postSogouGift],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuliSogouInfo;return i?i.isGetAllMicro()?(t.ViewManager.ins().close(t.FuliSogouMicroWin),!1):!0:!1},i}(t.RuleIconBase);t.FuliSogouMicroRuleIcon=e,__reflect(e.prototype,"app.FuliSogouMicroRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().postSogouGift],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuliSogouInfo;return i?!0:!1},i}(t.RuleIconBase);t.FuliSogouVipWinRuleIcon=e,__reflect(e.prototype,"app.FuliSogouVipWinRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().postSogouGift],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuliSogouInfo;return i?!0:!1},i}(t.RuleIconBase);t.FuliSogouWeixinWinRuleIcon=e,__reflect(e.prototype,"app.FuliSogouWeixinWinRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().postSogouGift],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.FuLi4366Mgr.ins().fuliSogouInfo;return i?!0:!1},i}(t.RuleIconBase);t.FuliSogouWinRuleIcon=e,__reflect(e.prototype,"app.FuliSogouWinRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28],s.updateMessage=[],s}return __extends(i,e),i.prototype.onClick=function(){window.open("http://newservice.tcy365.com/PC/?accessid=3201")},i}(t.RuleIconBase);t.FuliYaodouCustomerRuleIcon=e,__reflect(e.prototype,"app.FuliYaodouCustomerRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_updatePlatformFuli],s.updateMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_updatePlatformFuli],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.PlatformFuliManager.ins().platformFuliInfo;return i?i.isGetPhoneBindGift()?!1:!0:!1},i.prototype.checkShowRedPoint=function(){var e=t.PlatformFuliManager.ins().platformFuliInfo;return e&&e.getRed_phoneBindGift()?1:0},i.prototype.onClick=function(){var i=this.getConfig();if(!i.view){var n=t.PlatformFuliManager.ins().platformFuliData;return void n.onBindPhone()}e.prototype.onClick.call(this)},i}(t.RuleIconBase);t.PlatformFuliBindingRuleIcon=e,__reflect(e.prototype,"app.PlatformFuliBindingRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_updatePlatformFuli],s.updateMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_updatePlatformFuli],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.PlatformFuliManager.ins().platformFuliInfo;return i?i.isGetIndulgeGift()?!1:!0:!1},i.prototype.checkShowRedPoint=function(){var e=t.PlatformFuliManager.ins().platformFuliInfo;return e&&e.getRed_indulgeGift()?1:0},i}(t.RuleIconBase);t.PlatformFuliIndulgeRuleIcon=e,__reflect(e.prototype,"app.PlatformFuliIndulgeRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_updatePlatformFuli],s.updateMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_updatePlatformFuli,t.DefaultMgr.ins().post_updateLevel],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.PlatformFuliManager.ins().platformFuliInfo;return i?i.isGetMicroGift()?!1:!0:!1},i.prototype.checkShowRedPoint=function(){var e=t.PlatformFuliManager.ins().platformFuliInfo;return e&&e.getRed_microGift()?1:0},i}(t.RuleIconBase);t.PlatformFuliMicroRuleIcon=e,__reflect(e.prototype,"app.PlatformFuliMicroRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_updatePlatformFuli],s.updateMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_updatePlatformFuli],s}return __extends(i,e),i.prototype.createTar=function(){var i=e.prototype.createTar.call(this),n=t.PlatformFuliManager.ins().platformFuliData;return n&&n.getRuleIcon()&&(i.icon=n.getRuleIcon()),i},i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.PlatformFuliManager.ins().platformFuliInfo;return i?!0:!1},i.prototype.checkShowRedPoint=function(){var e=t.PlatformFuliManager.ins().platformFuliInfo;return e&&e.getRed_viewGift()?1:0},i}(t.RuleIconBase);t.PlatformFuliRuleIcon=e,__reflect(e.prototype,"app.PlatformFuliRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_updatePlatformFuli],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.PlatformFuliManager.ins().platformFuliInfo;return i?!0:!1},i}(t.RuleIconBase);t.PlatformFuliSuperVipRuleIcon=e,__reflect(e.prototype,"app.PlatformFuliSuperVipRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.FuLi4366Mgr.ins().post_updatePlatformFuli],s.updateMessage=[],s}return __extends(i,e),i.prototype.checkShowIcon=function(){if(!e.prototype.checkShowIcon.call(this))return!1;var i=t.PlatformFuliManager.ins().platformFuliInfo;return i?i.isGetWeChatGift()?!1:!0:!1},i}(t.RuleIconBase);t.PlatformFuliWeixinRuleIcon=e,__reflect(e.prototype,"app.PlatformFuliWeixinRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s.updateMessage=[t.OtherMgr.ins().post_26_82],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return t.isQQpf()?e.prototype.checkShowIcon.call(this):!1},i.prototype.checkShowRedPoint=function(){for(var e=1,i=1;4>=i;i++)if(t.OtherMgr.ins().updateQQRed(e,i)>0)return 1;return 0},i}(t.RuleIconBase);t.QQBlueDiamondRuleIcon=e,__reflect(e.prototype,"app.QQBlueDiamondRuleIcon")}(app||(app={}));var app;!function(t){function e(){return 10006==Main.gameParameter.pfID}t.isQQpf=e;var i=function(i){function n(e,n){var s=i.call(this,e,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s.updateMessage=[t.FuLi4366Mgr.ins().post_32_2,t.DefaultMgr.ins().post_updateLevel],s}return __extends(n,i),n.prototype.checkShowIcon=function(){return e()?i.prototype.checkShowIcon.call(this):!1
},n.prototype.checkShowRedPoint=function(){for(var e=1,i=1;3>=i;i++)if(t.FuLi4366Mgr.ins().updateQQRed(e,i)>0)return 1;return 0},n}(t.RuleIconBase);t.QQLobbyPrivilegesWinRuleIcon=i,__reflect(i.prototype,"app.QQLobbyPrivilegesWinRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return Main.gameParameter.pfID==t.PlatFormID.QQGame?e.prototype.checkShowIcon.call(this):!1},i}(t.RuleIconBase);t.QQVipFuLiRuleIcon=e,__reflect(e.prototype,"app.QQVipFuLiRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s.updateMessage=[t.ActvityMgr.ins().post_25_11],s}return __extends(i,e),i.prototype.checkShowIcon=function(){return 10001==Main.gameParameter.pfID?e.prototype.checkShowIcon.call(this):!1},i.prototype.checkShowRedPoint=function(){for(var e=3,i=1;3>i;i++)if(t.ActvityMgr.ins().updateYYRed(e,i)>0)return 1;return 0},i}(t.RuleIconBase);t.YYChaoWanRuleIcon=e,__reflect(e.prototype,"app.YYChaoWanRuleIcon")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n){var s=e.call(this,i,n)||this;return s.showMessage=[t.OtherMgr.ins().post_26_28,t.DefaultMgr.ins().post_updateLevel],s.updateMessage=[t.ActvityMgr.ins().post_25_9,t.ActvityMgr.ins().post_25_10,t.ActvityMgr.ins().post_25_1,t.ActvityMgr.ins().post_25_2,t.ActvityMgr.ins().post_25_3,t.ActvityMgr.ins().post_25_4,t.ActvityMgr.ins().post_25_5],s}return __extends(i,e),i.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return t.addBtnArr(),t},i.prototype.onClick=function(){if(egret.Tween.get(this).call(function(){this.tar.currentState="down"}).wait(100).call(function(){this.tar.currentState="up",egret.Tween.removeTweens(this)}),t.ActvityMgr.ins().YYClick)return void(t.ActvityMgr.ins().YYClick=!1);var e=this.getTar();e.iconGrp.visible=!e.iconGrp.visible},i.prototype.checkShowIcon=function(){return 10001==Main.gameParameter.pfID?e.prototype.checkShowIcon.call(this):!1},i.prototype.checkShowRedPoint=function(){var t=this.getTar();return t.addBtnArr(),t.updateBtnRed()},i}(t.RuleIconBase);t.YYPlatformFuLiRuleIcon=e,__reflect(e.prototype,"app.YYPlatformFuLiRuleIcon")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.oldLevel=0,this.newLevel=0,this.isShow=!1}return e.prototype.init=function(){t.MessageCenter.addListener(t.DefaultMgr.ins().postPlayerCreate,this.update,this),t.MessageCenter.addListener(t.DefaultMgr.ins().post_updateLevel,this.update,this)},e.prototype.update=function(){var e=t.EntityMgr.ins().getPayer;this.newLevel=e.propSet.getLevel(),!this.isShow&&this.oldLevel>0&&this.getShowTips()&&(this.isShow=!0,this.showTips()),this.oldLevel=this.newLevel},e.prototype.showTips=function(){var e;e=gamelib.DeviceUtils.IsMobile?t.ViewManager.ins().getView(t.PhoneMainView).getRuleBtId(54)||t.ViewManager.ins().getView(t.PhoneMainView).getRuleBtId(58):t.ViewManager.ins().getView(t.MainBottomView).getRuleBtId(54)||t.ViewManager.ins().getView(t.MainBottomView).getRuleBtId(58),e&&e.checkShowIcon()&&(t.ViewManager.ins().isShow(t.MicrotermsView)||t.ViewManager.ins().open(t.MicrotermsView))},e.prototype.getShowTips=function(){var e=t.GlobalConfig.TimeManagerConfigConfig.Clientguide;if(e)for(var i in e)if(this.oldLevel<e[i].lv&&this.newLevel>=e[i].lv)return!0;return!1},e.prototype.destroy=function(){t.MessageCenter.ins().removeAll(this)},e}();t.ClientguideTips=e,__reflect(e.prototype,"app.ClientguideTips")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.oldLevel=0,this.newLevel=0,this.oldZSLevel=0,this.newZSLevel=0,this.isShow=!1}return e.prototype.init=function(e){this.grp=e,t.MessageCenter.addListener(t.DefaultMgr.ins().postPlayerCreate,this.update,this),t.MessageCenter.addListener(t.DefaultMgr.ins().post_updateLevel,this.update,this),t.MessageCenter.addListener(t.DefaultMgr.ins().post_updateZsLevel,this.update,this),t.EventManager.ins().addEvent(t.MainEvent.CLOSE_DONATION_TIPS,this.onClose,this)},e.prototype.update=function(){var e=t.EntityMgr.ins().getPayer;this.newLevel=e.propSet.getLevel(),this.newZSLevel=e.propSet.getZSLevel(),!this.isShow&&this.oldLevel>0&&this.getShowTips()&&(this.isShow=!0,this.showTips()),this.oldLevel=this.newLevel,this.oldZSLevel=this.newZSLevel},e.prototype.showTips=function(){this.tipsMc||(this.tipsMc=t.ObjectPool.pop("app.MovieClip"),this.tipsMc.touchEnabled=!0,this.tipsMc.x=-110,this.tipsMc.y=165,this.tipsMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jxb",-1),this.grp.addChild(this.tipsMc))},e.prototype.getShowTips=function(){var e=t.GlobalConfig.TimeManagerConfigConfig.Donationguide;if(e)for(var i in e)if(this.newLevel>=e[i].lv&&this.newZSLevel>=e[i].zslv&&(this.oldLevel<e[i].lv||this.oldZSLevel<e[i].zslv))return!0;return!1},e.prototype.onClose=function(){this.tipsMc&&(this.tipsMc.destroy(),this.tipsMc=null)},e.prototype.destroy=function(){t.MessageCenter.ins().removeAll(this),this.grp=null},e}();t.DonationGuideTips=e,__reflect(e.prototype,"app.DonationGuideTips")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.oldLevel=0,this.newLevel=0}return e.prototype.init=function(e){this.grp=e,t.MessageCenter.addListener(t.DefaultMgr.ins().postPlayerCreate,this.update,this),t.MessageCenter.addListener(t.DefaultMgr.ins().post_updateLevel,this.update,this),t.EventManager.ins().addEvent(t.MainEvent.CLOSE_FIRST_CHARGE_TIPS,this.onClose,this)},e.prototype.update=function(){var e=t.EntityMgr.ins().getPayer;this.newLevel=e.propSet.getLevel();var i=e.propSet.getRechargeSum();if(!i&&this.oldLevel>0){if(this.getShowTips()){var n=void 0;n=gamelib.DeviceUtils.IsMobile?t.ViewManager.ins().getView(t.PhoneMainView).getRuleBtId(26):t.ViewManager.ins().getView(t.MainBottomView).getRuleBtId(26),n&&n.checkShowIcon()&&this.showTips()}this.getShowTips2()&&this.showView()}this.oldLevel=this.newLevel},e.prototype.showTips=function(){this.tipsMc||(this.tipsMc=t.ObjectPool.pop("app.MovieClip"),this.tipsMc.touchEnabled=!0,this.tipsMc.x=-110,this.tipsMc.y=165,this.tipsMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_sctips",-1),this.grp.addChild(this.tipsMc))},e.prototype.showView=function(){t.ViewManager.ins().isShow(t.ActvityFirstChargeView)||t.ViewManager.ins().open(t.ActvityFirstChargeView)},e.prototype.getShowTips=function(){var e=t.GlobalConfig.TimeManagerConfigConfig.Firstchargeguide;for(var i in e)if(this.oldLevel<e[i].lv&&this.newLevel>=e[i].lv)return!0;return!1},e.prototype.getShowTips2=function(){return this.oldLevel<45&&this.newLevel>=45?!0:!1},e.prototype.onClose=function(){this.tipsMc&&(this.tipsMc.destroy(),this.tipsMc=null)},e.prototype.destroy=function(){t.MessageCenter.ins().removeAll(this),this.grp=null},e}();t.FirstChargeTips=e,__reflect(e.prototype,"app.FirstChargeTips")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.oldLevel=0,this.newLevel=0}return e.prototype.init=function(e){this.grp=e,t.MessageCenter.addListener(t.DefaultMgr.ins().postPlayerCreate,this.update,this),t.MessageCenter.addListener(t.DefaultMgr.ins().post_updateLevel,this.update,this),t.EventManager.ins().addEvent(t.MainEvent.CLOSE_SECOND_CHARGE_TIPS,this.onClose,this)},e.prototype.update=function(){var e=t.EntityMgr.ins().getPayer;this.newLevel=e.propSet.getLevel();var i=e.propSet.getRechargeSum();if(i&&this.oldLevel>0){var n=t.ActvityMgr.ins().getActivityInfo(10274);if(n&&n.info&&n.info.sum<2&&this.getShowTips()){var s=void 0;s=gamelib.DeviceUtils.IsMobile?t.ViewManager.ins().getView(t.PhoneMainView).getRuleBtId(78):t.ViewManager.ins().getView(t.MainBottomView).getRuleBtId(78),s&&s.checkShowIcon()&&this.showTips()}}this.oldLevel=this.newLevel},e.prototype.showTips=function(){this.tipsMc||(this.tipsMc=t.ObjectPool.pop("app.MovieClip"),this.tipsMc.touchEnabled=!0,this.tipsMc.x=-110,this.tipsMc.y=165,this.tipsMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_ectips",-1),this.grp.addChild(this.tipsMc))},e.prototype.getShowTips=function(){var e=t.GlobalConfig.TimeManagerConfigConfig.Firstchargeguide;for(var i in e)if(this.oldLevel<e[i].lv&&this.newLevel>=e[i].lv)return!0;return!1},e.prototype.onClose=function(){this.tipsMc&&(this.tipsMc.destroy(),this.tipsMc=null)},e.prototype.destroy=function(){t.MessageCenter.ins().removeAll(this),this.grp=null},e}();t.SecondChargeTips=e,__reflect(e.prototype,"app.SecondChargeTips")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.oldLevel=0,this.newLevel=0,this.oldZSLevel=0,this.newZSLevel=0,this.isShow=!1}return e.prototype.init=function(e){this.grp=e,t.MessageCenter.addListener(t.DefaultMgr.ins().postPlayerCreate,this.update,this),t.MessageCenter.addListener(t.DefaultMgr.ins().post_updateLevel,this.update,this),t.MessageCenter.addListener(t.DefaultMgr.ins().post_updateZsLevel,this.update,this),t.EventManager.ins().addEvent(t.MainEvent.CLOSE_VIOLENT_TIPS,this.onClose,this)},e.prototype.update=function(){var e=t.EntityMgr.ins().getPayer;this.newLevel=e.propSet.getLevel(),this.newZSLevel=e.propSet.getZSLevel(),!this.isShow&&this.oldLevel>0&&this.getShowTips()&&(this.isShow=!0,this.showTips()),this.oldLevel=this.newLevel},e.prototype.showTips=function(){this.tipsMc||(this.tipsMc=t.ObjectPool.pop("app.MovieClip"),this.tipsMc.touchEnabled=!0,this.tipsMc.x=-110,this.tipsMc.y=165,this.tipsMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_kbzl",-1),this.grp.addChild(this.tipsMc))},e.prototype.getShowTips=function(){var e=t.GlobalConfig.TimeManagerConfigConfig.Violentguide;if(e)for(var i in e)if(this.newLevel>=e[i].lv&&this.newZSLevel>=e[i].zslv&&(this.oldLevel<e[i].lv||this.oldZSLevel<e[i].zslv))return!0;return!1},e.prototype.onClose=function(){this.tipsMc&&(this.tipsMc.destroy(),this.tipsMc=null)},e.prototype.destroy=function(){t.MessageCenter.ins().removeAll(this),this.grp=null},e}();t.ViolentGuideTips=e,__reflect(e.prototype,"app.ViolentGuideTips")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.oldLevel=0,this.newLevel=0}return e.prototype.init=function(e){this.grp=e,t.MessageCenter.addListener(t.DefaultMgr.ins().postPlayerCreate,this.update,this),t.MessageCenter.addListener(t.DefaultMgr.ins().post_updateLevel,this.update,this),t.EventManager.ins().addEvent(t.MainEvent.CLOSE_VIP_GUIDE_TIPS,this.onClose,this)},e.prototype.update=function(){var e=t.EntityMgr.ins().getPayer;this.newLevel=e.propSet.getLevel(),this.oldLevel>0&&this.getShowTips()&&this.showTips(),this.oldLevel=this.newLevel},e.prototype.showTips=function(){var e=t.VipData.ins().getMyVipLv();if(e<t.VipData.ins().getMaxLv()){var i=t.VipData.ins().getVipDataByLv(e+1);if(i&&t.ViewManager.ins().isCheckOpen(i.displaylimit)){var n="eff_tips"+(e+5);this.tipsMc||(this.tipsMc=t.ObjectPool.pop("app.MovieClip"),this.tipsMc.touchEnabled=!0,this.tipsMc.x=-110,this.tipsMc.y=165,this.tipsMc.playFileEff(ResDirEnum.RES_DIR_EFF+n,-1),this.grp.addChild(this.tipsMc))}}},e.prototype.getShowTips=function(){var e=t.GlobalConfig.TimeManagerConfigConfig.Previlegeguide;if(e)for(var i in e)if(this.oldLevel<e[i].lv&&this.newLevel>=e[i].lv)return!0;return!1},e.prototype.onClose=function(){this.tipsMc&&(this.tipsMc.destroy(),this.tipsMc=null)},e.prototype.destroy=function(){t.MessageCenter.ins().removeAll(this),this.grp=null},e}();t.VipGuideTips=e,__reflect(e.prototype,"app.VipGuideTips")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="MainServerInfoWinSkin",i.name="MainServerInfoWin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setCurrentState("default7"),this.dragDropUI.setParent(this),this.title.text=t.LanguageUtils.language_Common_91},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n="";t.GlobalData.serverID&&(n+=t.LanguageUtils.language_Common_94+"S"+t.GlobalData.serverID+"\n\n"),t.GlobalData.sectionOpenDay&&(n+=t.LanguageUtils.language_Common_93+"|C:0x28ee01&T:"+t.GlobalData.sectionOpenDay+"|"+t.LanguageUtils.language_Time_Days+"\n\n"),t.GlobalData.combineServerCount&&t.GlobalData.sectionOpenDay>=8&&(n+=""+t.LanguageUtils.language_Common_92+t.GlobalData.combineServerCount+"\n\n");var s="";for(var a in t.GlobalConfig.ServerInfoConfig){var r=t.GlobalConfig.ServerInfoConfig[a];t.GlobalData.sectionOpenDay>=r.openserverday&&(s=r.ServerInfo)}n+=s,this.contentLabel.textFlow=t.TextFlowMaker.generateTextFlow(n)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null},i}(t.BaseEuiView);t.MainServerInfoWin=e,__reflect(e.prototype,"app.MainServerInfoWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="CallSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(this.obj=e[0],this.addTouchEvent(this.okButton,this.onClick),this.addTouchEvent(this.cancelButton,this.onClick),this.obj){t.DefaultMgr.ins().post_deleteType(this.obj.type);var n=t.GlobalConfig.Scenes[this.obj.scenesId];1==this.obj.type?(this.dragDropUI.setTitle(t.LanguageUtils.language_Common_168),this.descLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_166,this.obj.name,n.scencename,this.obj.x,this.obj.y))):(this.dragDropUI.setTitle(t.LanguageUtils.language_Common_169),this.descLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_167,this.obj.name,n.scencename,this.obj.x,this.obj.y)))}else t.ViewManager.ins().close(this)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.okButton:return t.DefaultMgr.ins().s_0_27(this.obj.type),void t.ViewManager.ins().close(this);case this.cancelButton:return void t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.removeTouchEvent(this.okButton,this.onClick),this.removeTouchEvent(this.cancelButton,this.onClick),e.prototype.close.call(this),this.$onClose(),this.obj=null},i}(t.BaseEuiView);t.CallView=e,__reflect(e.prototype,"app.CallView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;i._maximum=100,i._value=50,i.hpStr="",i.levelStr="",i._labelFunction=function(t,e){return t+"x"+e};var n=new eui.Image("boolBg");return n.scale9Grid=new egret.Rectangle(2,1,45,2),i.addChild(n),i.width=n.width=40,i.height=n.height=5,i.thumb=new eui.Image("boolRed"),i.thumb.x=i.thumb.y=1,i.thumb.width=38,i.thumb.height=3,i.addChild(i.thumb),i.labelDisplay=t.ViewManager.gamescene.map.getCharHpLable(),i}return __extends(i,e),Object.defineProperty(i.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t=+t||0,this._maximum!=t&&(this._maximum=t,this.updateBar())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){t=+t||0,this.setValue(t)},enumerable:!0,configurable:!0}),i.prototype.setValue=function(t){t!=this.value&&(this._value=t,this.updateBar())},i.prototype.updateBar=function(){this.thumb.width=38*Math.min(this.value/this.maximum,1),this.labelFunction&&this.labelDisplay&&(this.hpStr=this.labelFunction(this.value,this.maximum),this.labelDisplay.text=this.hpStr+this.levelStr)},i.prototype.updateLevel=function(t){this.levelStr=t,this.labelDisplay.text=this.hpStr+this.levelStr},i.prototype.updateChaoWanVip=function(e){if(t.GameSocket.IsCrossService)return t.DisplayUtils.removeFromParent(this.vipImag),void t.DisplayUtils.removeFromParent(this.blueYearImg);if(Main.gameParameter.pfID==t.PlatFormID.YY)e?(this.vipImag||(this.vipImag=new eui.Image("blood_chaowan"),this.vipImag.scaleX=this.vipImag.scaleY=.8,this.vipImag.x=-40,this.vipImag.y=-16),this.addChild(this.vipImag)):t.DisplayUtils.removeFromParent(this.vipImag);else{var i=e>>16,n=i>>8,s=255&i,a=65535&e,r=Main.gameParameter.pfID==t.PlatFormID.QQGame?n>0&&a>0:e>0;if(r){var o=Main.gameParameter.pfID==t.PlatFormID.QQGame?1==n?"name_lz_pt"+(a+1):"name_lz_hh"+(a+1):"blood_chaowan";this.vipImag||(this.vipImag=new eui.Image(o),this.vipImag.x=-42,this.vipImag.y=-2),s&&(this.blueYearImg||(this.blueYearImg=new eui.Image("name_lz_nf"),this.blueYearImg.x=-20,this.blueYearImg.y=-0),this.addChild(this.blueYearImg)),this.addChild(this.vipImag)}else t.DisplayUtils.removeFromParent(this.vipImag),t.DisplayUtils.removeFromParent(this.blueYearImg)}},Object.defineProperty(i.prototype,"labelFunction",{get:function(){return this._labelFunction},set:function(t){this._labelFunction!=t&&(this._labelFunction=t)},enumerable:!0,configurable:!0}),i.prototype.$setVisible=function(t){this.labelDisplay.visible=t,e.prototype.$setVisible.call(this,t)},i.prototype.$setX=function(t){return this.labelDisplay.x=t-55,e.prototype.$setX.call(this,t)},i.prototype.$setY=function(t){return this.labelDisplay.y=t-15,e.prototype.$setY.call(this,t)},i.prototype.$onAddToStage=function(i,n){e.prototype.$onAddToStage.call(this,i,n),this.labelDisplay&&t.ViewManager.gamescene.map.addCharHpLabel(this.labelDisplay)},i.prototype.$onRemoveFromStage=function(){this.labelDisplay&&t.DisplayUtils.removeFromParent(this.labelDisplay),e.prototype.$onRemoveFromStage.call(this)},i}(egret.DisplayObjectContainer);t.CharHpBar=e,__reflect(e.prototype,"app.CharHpBar")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._hpBar=new eui.ProgressBar,t._hpBar.skinName="bloodBarSkin",t._hpBar.labelDisplay.size=14,t._nameTxt=new eui.Label,t._nameTxt.size=14,t._nameTxt.textColor=15589033,t.addChild(t._nameTxt),t}return __extends(i,e),i.prototype.updateXY=function(t,e){this.x=t,this.y=e},i.prototype.updateMaxHp=function(t){this._hpBar.maximum=t},i.prototype.updateHp=function(t){this._hpBar.value=Math.min(t,this._hpBar.maximum),this._hpBar.visible=!0},i.prototype.setNameTxtColor=function(t){t?this._nameTxt.textColor=t:this._nameTxt.textColor=16777215},i.prototype.setCharName=function(e){this._nameTxt.textFlow=t.TextFlowMaker.generateTextFlow(e)},i}(eui.Group);t.CharNameLabel=e,__reflect(e.prototype,"app.CharNameLabel")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.offY=0,i.labelList=[],i.bjLableAry=[],i.touchEnabled=!1,i.touchChildren=!1,t.MessageCenter.addListener(t.DefaultMgr.ins().postEntityHpChange,i.showBloodHp,i),t.MessageCenter.addListener(t.DefaultMgr.ins().postEntityCriticalHit,i.criticalHit,i),i}return __extends(i,e),i.prototype.showBloodHp=function(t){var e=t[0],i=t[1],n=t[2],s=t[3],a=""+n;n>0&&(s="num_4_fnt",a="+"+n);var r=this.createLabel(a,i,s);r.x=e.x,r.y=e.y-100,this.addChild(r);var o=egret.Tween.get(r),l=r.y,h=r.x;n>0?o.to({y:l-35,x:h-15},400).to({y:l-37,x:h-25},350).to({y:l-39,x:h-30},300).to({y:l-40,x:h-35},350).call(this.removeFloatTarget,this,[r]):(r.scaleX=r.scaleY=0,o.to({scaleX:1.5,scaleY:1.5},120).to({scaleX:1,scaleY:1},70).wait(150).to({x:h-10,y:l-30,alpha:0},300).call(this.removeFloatTarget,this,[r]))},i.prototype.animation1=function(t){var e=egret.Tween.get(t),i=t.y-40;e.to({y:i},750).wait(200).call(this.removeFloatTarget,this,[t])},i.prototype.removeFloatTarget=function(e){t.DisplayUtils.removeFromParent(e),this.destroyBlood(e)},i.prototype.destroyBlood=function(t){t.x=0,t.y=0,t.alpha=1,t.scaleX=t.scaleY=1,t.touchChildren=!1,this.labelList.push(t)},i.prototype.createLabel=function(t,e,i){void 0===i&&(i="");var n=this.getLabe();return n.createLabel(t,e,i),egret.Tween.removeTweens(n),n},i.prototype.getLabe=function(){return this.labelList.pop()||new t.HpLabelView},i.prototype.removeChildren=function(){for(var t in this.$children)egret.Tween.removeTweens(this.$children[t]);e.prototype.removeChildren.call(this)},i.prototype.criticalHit=function(e){var i=e[0],n=e[1],s=e[2],a=e[3],r=this.bjLableAry.pop()||new eui.BitmapLabel,o=this;egret.Tween.removeTweens(r),i&&(r.font="hitnum"+i+"_fnt",r.anchorOffsetY=54),r.text=a,r.letterSpacing=-9;var l=n,h=s-60-t.MathUtils.limit(1,10);r.scaleX=r.scaleY=.5,r.x=l,r.y=h,r.alpha=1,this.addChild(r);var p=egret.Tween.get(r);p.to({x:l+35,scaleX:1,scaleY:1},50).wait(600).to({x:l+45,y:h-50,alpha:0,scaleX:0,scaleY:0},200).call(function(){r.text="",egret.Tween.removeTweens(r),t.DisplayUtils.removeFromParent(r),o.bjLableAry.push(r)})},i.sp1=60,i.sp2=80,i.sp3=80,i.sp4=400,i.sp5=720,i.fun1=egret.Ease.circInOut,i.fun2=egret.Ease.circInOut,i.fun3=egret.Ease.sineIn,i.fun4=null,i.fun5=egret.Ease.sineIn,i.s0=1.2,i.s1=.4,i.s2=.75,i.s3=.6,i.s4=.6,i.s5=.6,i.posX6=-18,i.posX7=-20,i.posX8=-23,i.posX9=-30,i.posY6=10,i.posY7=13,i.posY8=16,i.posY9=20,i.alpha6=.6,i.alpha7=.5,i.alpha8=.4,i.alpha9=0,i.sp6=600,i.sp7=200,i.sp8=400,i.sp9=400,i.fun6=null,i.fun7=null,i.fun8=null,i.fun9=null,i.s6=.6,i.s7=.6,i.s8=.6,i.s9=.6,i.posX1=90,i.posX2=0,i.posX3=0,i.posY1=100,i.posY2=0,i.posY3=0,i.posY4=10,i.alpha0=1,i.alpha1=1,i.alpha2=1,i.alpha3=.9,i.alpha4=.5,i.alpha5=0,i.startX=70,i.startY=75,i.changeTime1=300,i.changeTime2=1e3,i.changeY=.5,i.bigScale=3,i.endScale=.6,i.bigAlpha=1,i.endAlpha1=1,i.endAlpha2=.3,i.endTime1=600,i.endTime2=500,i.c_sp1=80,i.c_sp2=200,i.c_sp3=200,i.c_sp4=1e3,i.c_sp5=1200,i.c_fun1=egret.Ease.circInOut,i.c_fun2=egret.Ease.circInOut,i.c_fun3=egret.Ease.sineIn,i.c_fun4=null,i.c_fun5=egret.Ease.sineIn,i.c_s0=.1,i.c_s1=.8,i.c_s2=.8,i.c_s3=.8,i.c_s4=.6,i.c_s5=.1,i.c_posX1=0,i.c_posX2=100,i.c_posX3=120,i.c_posY1=120,i.c_posY2=10,i.c_posY3=10,i.c_posY4=10,i.c_alpha0=1,i.c_alpha1=1,i.c_alpha2=1,i.c_alpha3=.6,i.c_alpha4=0,i.c_alpha5=0,i.h_sp1=80,i.h_sp2=300,i.h_sp3=200,i.h_sp4=1e3,i.h_sp5=1200,i.h_fun1=egret.Ease.circInOut,i.h_fun2=egret.Ease.circInOut,i.h_fun3=egret.Ease.sineIn,i.h_fun4=null,i.h_fun5=egret.Ease.sineIn,i.h_s0=.1,i.h_s1=1.2,i.h_s2=1.2,i.h_s3=1.2,i.h_s4=1.2,i.h_s5=1.2,i.h_posX1=0,i.h_posX2=100,i.h_posX3=120,i.h_posY1=150,i.h_posY2=10,i.h_posY3=-30,i.h_posY4=-30,i.h_alpha0=1,i.h_alpha1=1,i.h_alpha2=1,i.h_alpha3=.6,i.h_alpha4=0,i.h_alpha5=0,i.NORMAL_SCALE_1=1.1,i.NORMAL_SCALE_2=.95,i.sn_sp1=600,i.sn_sp2=200,i.sn_sp3=200,i.sn_fun1=null,i.sn_fun2=null,i.sn_s0=1.3,i.sn_s1=1.3,i.sn_s2=1.3,i.sc_sp1=600,i.sc_sp2=200,i.sc_sp3=200,i.sc_fun1=null,i.sc_fun2=null,i.sc_s0=1.5,i.sc_s1=1.5,i.sc_s2=1.5,i.C_END_DES=0,i.C_YPOS1=120,i.C_YPOS2=0,i.C_YPOS3=-20,i.C_WAIT1=200,i.C_SPEED1=100,i.C_SPEED2=600,i}(egret.DisplayObjectContainer);t.FloatView=e,__reflect(e.prototype,"app.FloatView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._CELL_SIZE=64,t._STAGE_HALFWIDTH=960,t._STAGE_HALFHEIGHT=600,t._fbType=0,t.lastFbTyp=0,t.lastFbId=0,t.mapFiel="",t.areaState=[],t._areaName="",t.isOpenSceneHeJi=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"CELL_SIZE",{get:function(){return this._CELL_SIZE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"MAX_WIDTH",{get:function(){return this._MAX_WIDTH},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"MAX_HEIGHT",{get:function(){return this._MAX_HEIGHT},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"COL",{get:function(){return this._COL},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ROW",{get:function(){return this._ROW},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mapZip",{get:function(){return this._mapZip},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mapID",{get:function(){return this._mapID},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mapX",{get:function(){return this._mapX},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mapY",{get:function(){return this._mapY},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fbType",{get:function(){return this._fbType},set:function(t){this._fbType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mapName",{get:function(){return this._mapName},enumerable:!0,configurable:!0}),i.ins=function(){return e.ins.call(this)},i.prototype.init=function(t){this.aStar=this.aStar||new gamelib.AStar(this.checkCell,this),this._mapZip=t},i.prototype.checkCell=function(e){var i=t.EntityMgr.ins().getPayer;return(t.PlayerRoleAI.ins().isOpen||i.isDothetask()||i.isMiniMapPath()||t.PlayerRoleAI.ins().attackState)&&(t.EntityMgr.ins().checkWalkable(e.x,e.y)||e.x==i.lockCell.x&&e.y==i.lockCell.y)?!1:t.EntityMgr.ins().getTeleport(e.x,e.y)?!1:!0},Object.defineProperty(i.prototype,"scenes",{get:function(){return this._scenes},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"delayOnHook",{get:function(){return this._delayOnHook},set:function(t){this._delayOnHook=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isNoPickUp",{get:function(){return this._isNoPickUp},enumerable:!0,configurable:!0}),i.prototype.parser=function(e){this._delayOnHook=0,this._isNoPickUp=0,this._mapName=e.readString();var i=e.readString();this._mapID=e.readShort(),this.fubenID=e.readShort(),this._mapX=e.readShort(),this._mapY=e.readShort();var n=t.EntityMgr.ins().getPayer;if(n?(n.propSet.setProperty(t.ActorPropertyModel.PROP_AREASTATE1,e.readUnsignedInt()),n.propSet.setProperty(t.ActorPropertyModel.PROP_AREASTATE2,e.readUnsignedInt())):(e.readUnsignedInt(),e.readUnsignedInt()),t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122)),this._scenes=t.GlobalConfig.Scenes[this._mapID],this._scenes.isHook&&this._scenes.hook&&(this._scenes.hook=this._scenes.hook.sort(function(){return.5-Math.random()})),this._isNoPickUp=this._scenes.isNoPickUp,t.PlayerRoleAI.ins().isOpen&&!this._scenes.isHook&&t.PlayerRoleAI.ins().stopAI(),i!=this.mapFiel){this.mapFiel=i;var s=this.mapZip[i];this._MAX_HEIGHT=s.pixHeight,this._MAX_WIDTH=s.pixWidth,this._COL=s.maxX,this._ROW=s.maxY,this.aStar.initFromMap(s)}},i.prototype.attackAStarPatch=function(t,e,i,n){for(var s=!1,a=!1,r=0,o=0,l=0;8>l&&(r=t+gamelib.AStar.NEIGHBORPOS_X_VALUES[l],o=e+gamelib.AStar.NEIGHBORPOS_Y_VALUES[l],!(s=this.checkCell({x:r,y:o})));++l);r=0,o=0;for(var l=0;8>l&&(r=i+gamelib.AStar.NEIGHBORPOS_X_VALUES[l],o=n+gamelib.AStar.NEIGHBORPOS_Y_VALUES[l],!(a=this.checkCell({x:r,y:o})));++l);return s&&a?!0:!1},i.prototype.getAStarPatch=function(e,i,n,s){var a;if(t.PlayerRoleAI.ins().isOpen){for(var r=0,o=0,l=!1,h=0;8>h&&(r=n+gamelib.AStar.NEIGHBORPOS_X_VALUES[h],o=s+gamelib.AStar.NEIGHBORPOS_Y_VALUES[h],!(l=this.checkCell({x:r,y:o})));++h);a=l?this.aStar.getPatch(e,i,n,s):[]}else a=this.aStar.getPatch(e,i,n,s);return a},i.prototype.checkWalkable=function(t,e){var i=this.aStar.isWalkableTile(t,e);return i},i.prototype.checkAlpha=function(t,e){var i=this.aStar.ishidden(t,e);return i},Object.defineProperty(i.prototype,"areaName",{get:function(){return this._areaName},set:function(t){this._areaName=t},enumerable:!0,configurable:!0}),i.prototype.setAreaState=function(t,e){this._areaName=t},i.prototype.getValueByBit=function(e){if(t.EntityMgr.ins().getPayer){var i=e>>5,n=31&e;return Boolean(t.EntityMgr.ins().getPayer.propSet.getAreaState()[i]>>>n&1)}},Object.defineProperty(i.prototype,"getIsSafe",{get:function(){var t=this.getValueByBit(1);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"getAAZY",{get:function(){var t=this.getValueByBit(13);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"getAACamp",{get:function(){var e=t.GlobalConfig.StaticFubens[t.GameMap.fubenID];return e?1==e.warType:!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isThroughMonster",{get:function(){var t=this.getValueByBit(6);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isThroughHuman",{get:function(){var t=this.getValueByBit(5);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCall",{get:function(){var t=this.getValueByBit(8);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isForbiddenArea",{get:function(){var t=this.getValueByBit(18);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"aaCannotSeeName",{get:function(){var t=this.getValueByBit(19);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isBubble",{get:function(){var t=this.getValueByBit(45);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fubenID",{get:function(){return this._fubenID},set:function(e){this._fubenID!=e&&(t.ActvityMgr.ins().currentActId=0,t.FuBenMgr.ins().timeRemaining=0,this._fubenID=e,e>0?(t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122)),t.ViewManager.ins().close(t.ActivityCopiesWin),t.ViewManager.ins().close(t.CrossServerWin),t.ViewManager.ins().isShow(t.FuBenView)||t.ViewManager.ins().open(t.FuBenView),t.ViewManager.ins().isShow(t.ActivityMaterialView)&&t.ViewManager.ins().close(t.ActivityMaterialView),(t.GameMap.fubenID>6&&t.GameMap.fubenID<14||23==t.GameMap.fubenID)&&(t.ViewManager.ins().isShow(t.MagicBossInfoShowView)||t.ViewManager.ins().open(t.MagicBossInfoShowView))):(t.ActvityMgr.ins().EscapeRoleInfo=[],t.ViewManager.ins().close(t.FuBenView),t.ViewManager.ins().close(t.InspireView),t.ViewManager.ins().close(t.MagicBossInfoShowView)),t.PlayerRoleAI.ins().isOpen&&this._fubenID&&t.PlayerRoleAI.ins().stopAI())},enumerable:!0,configurable:!0}),i.prototype.sceneInMain=function(){return 0==this._fbType&&0==this.fubenID},i.prototype.sceneInMine=function(){return 0==this._fbType&&0!=this.fubenID},i.prototype.canStartAI=function(){return 0==this._fbType},i.prototype.getFileName=function(){return this.mapFiel},i.prototype.autoPunch=function(){return!1},i.prototype.getRectangle=function(t,e,i){var n=t.x+(e-.5)*this._CELL_SIZE,s=t.y+(i-.5)*this._CELL_SIZE;return new egret.Rectangle(n,s,this._CELL_SIZE,this._CELL_SIZE)},i.prototype.getIncludeElement=function(t,e,i){var n=[];for(var s in e){var a=this.getRectangle(t,e[s].x,e[s].y);for(var r in i){var o=i[r];o.x>=a.x&&o.y>=a.y&&o.x<a.x+a.width&&o.y<a.y+a.height&&n.push(o)}}return n},i.prototype.getPoint=function(t,e,i){var n=Math.floor(t/e)-Math.floor(i/2),s=Math.floor(t%e)-Math.floor(e/2);return new egret.Point(s,n)},i.prototype.getTargetIndex=function(t,e,i,n){var s=e.x-t.x+this._CELL_SIZE*(i/2),a=e.y-t.y+this._CELL_SIZE*(n/2),r=Math.floor(s/this._CELL_SIZE),o=Math.floor(a/this._CELL_SIZE);return i*o+r},i.prototype.checkWalkableByPixel=function(t,e){var i=Math.floor(t/this._CELL_SIZE),n=Math.floor(e/this._CELL_SIZE);return this.checkWalkable(i,n)},i.prototype.getPosRange=function(e,i,n){var s=t.MathUtils.limitInteger(-n,+n),a=t.MathUtils.limitInteger(-n,+n);+s!=+n&&(a=Math.random()<.5?-n:n);for(var r=0,o=s,l=a;;){var h=this.checkWalkable(e+o,i+l);if(h)return[e+o,i+l];if(o==n&&n>l?l+=1:l==n&&o>-n?o-=1:o==-n&&l>-n?l-=1:l==-n&&n>o&&(o+=1),o==s&&l==a&&(s==n&&(o=s=n+1),s==-n&&(o=s=-n-1),a==n&&(l=a=n+1),a==-n&&(l=a=-n-1),n+=1),r+=1,r>100)break}return[e,i]},i.prototype.getPosRangeByDir=function(t,e,i,n){var s=t,a=e;return(i>=0&&1>=i||7==i)&&(a-=n),i>=3&&5>=i&&(a+=n),i>=1&&3>=i&&(s+=n),i>=5&&7>=i&&(s-=n),[s,a,this.checkWalkable(s,a)]},i.prototype.getPosRangeRandom=function(t,e,i,n){void 0===n&&(n=1);var s=this.point2Grip(t),a=this.point2Grip(e),r=[i],o=Math.random();o>.66?(i=0>i-1?7:i-1,r.unshift(i),o>.8?r.push((i+2)%8):r.splice(1,0,(i+2)%8)):o>.33&&(i=i+1>7?0:i+1,r.unshift(i),o>.5?r.push((i-2+8)%8):r.splice(1,0,(i-2+8)%8));for(var l,h=!1,p=0;p<r.length;p++)if(l=this.getPosRangeByDir(s,a,r[p],n),l[2]){h=!0;break}return h||(l=this.getPosRange(s,a,n)),l
},i.prototype.getAround8=function(t,e){if(t.X==e.X&&t.Y==e.Y)return!0;for(var i=0,n=0,s=0;8>s;++s)if(i=e.X+gamelib.AStar.NEIGHBORPOS_X_VALUES[s],n=e.Y+gamelib.AStar.NEIGHBORPOS_Y_VALUES[s],i==t.X&&n==t.Y)return!0;return!1},i.prototype.point2Grip=function(t){return Math.floor(t/this._CELL_SIZE)},i.prototype.grip2Point=function(t){return t*this._CELL_SIZE+(this._CELL_SIZE>>1)},i.prototype.point2Dir=function(t,e){return 0>t+e?8+e:(t+e)%8},i.prototype.checkRange=function(e,i,n,s){var a=t.StageUtils.ins().getWidth(),r=t.StageUtils.ins().getHeight();return e+n+this._CELL_SIZE>=0&&i+s+this._CELL_SIZE>0&&e+n-this._CELL_SIZE<a&&i+s-this._CELL_SIZE<r?!0:void 0},i.prototype.checkOverstepScreen=function(e,i,n){t.StageUtils.ins().getWidth(),t.StageUtils.ins().getHeight()},i}(t.BaseClass);t.GameMapInfo=e,__reflect(e.prototype,"app.GameMapInfo"),t.GameMap=new e}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.percentHeight=100,t.percentWidth=100,t.updateScale(),t.skinName="GameFightSceneSkin",t}return __extends(i,e),i.prototype.updateScale=function(){this.scaleX=this.scaleY=t.StageUtils.ins().getScale()},Object.defineProperty(i.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mapgBgImge",{get:function(){return this._mapgBgImge},enumerable:!0,configurable:!0}),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.touchEnabled=!1,this._map=new t.MapView,this.addChild(this._map),this._map.initMap()},i.prototype.destroyRes=function(){gamelib.os.RM.clearRes=1e4,gamelib.os.RM.destroyRes()},i.prototype.destroy=function(){e.prototype.destroy.call(this),t.TimerManager.ins().removeAll(this)},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t)},i.prototype.destoryView=function(){},i}(t.BaseEuiView);t.GameSceneView=e,__reflect(e.prototype,"app.GameSceneView"),t.ViewManager.ins().reg(e,t.LayerManager.Game_Bg)}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.thisVal=0,e._maximum=0,e.touchEnabled=!0,e.touchChildren=!0;var i=new eui.Image("boolBg");return i.scale9Grid=new egret.Rectangle(2,1,45,2),i.width=40,i.height=5,e.addChild(i),e.thumb=new eui.Image("boolRed"),e.thumb.x=1,e.thumb.y=1,e.thumb.width=38,e.thumb.height=3,e.addChild(e.thumb),e}return __extends(e,t),Object.defineProperty(e.prototype,"Thumb",{set:function(t){this.thumb.source=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.thisVal},set:function(t){this.thisVal=t,this.updateHp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){this._maximum=t,this.updateHp()},enumerable:!0,configurable:!0}),e.prototype.updateHp=function(){this.thumb.width=38*Math.max(Math.min(this.thisVal/this._maximum,1),0)},e}(eui.Group);t.HPGroup=e,__reflect(e.prototype,"app.HPGroup")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchChildren=!1,e.touchEnabled=!1,e.bimapLabe=new eui.BitmapLabel,e.bimapLabe.letterSpacing=-3,e.bimapLabe.width=300,e.bimapLabe.x=-150,e.bimapLabe.textAlign=egret.HorizontalAlign.CENTER,e.addChild(e.bimapLabe),e}return __extends(e,t),e.prototype.createLabel=function(t,e,i){void 0===i&&(i=""),this.bimapLabe.text="","0"==t?this.bimapLabe.visible=!1:(i&&""!=i?this.bimapLabe.font=i:this.bimapLabe.font="num_2_fnt",this.bimapLabe.text=t,this.bimapLabe.visible=!0)},e}(egret.DisplayObjectContainer);t.HpLabelView=e,__reflect(e.prototype,"app.HpLabelView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.osMove=!1,t.type=0,t.skillArr=[],t.skillKeyArr=[55,58],t.postX=0,t.postY=0,t.teleportObj={},t.arrowObj={},t.isMayrecog=null,t.charRectObj={},t.skinName="MapMaxSkin",t.touchEnabled=!0,t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tipsLabel.text=t.LanguageUtils.language_System69},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.observe(t.DefaultMgr.ins().post_g_0_41,this.updateAreaName),this.observe(t.DefaultMgr.ins().post_setTarget,this.updateTarget),this.observe(t.SkillMgr.ins().post_playSkillMc,this.playSkillKeyEff),this.observe(t.SkillMgr.ins().postg_5_5,this.skillCD),this.observe(t.DefaultMgr.ins().postUpdateMapStarPatch,this.updateMapStarPatch),t.TimerManager.ins().remove(this.updateSkillCD,this),t.TimerManager.ins().doTimer(10,0,this.updateSkillCD,this),this.updateSkillCD(),this.updateMaxMap(e[0]),this.updateAreaName(),this.updateSkill(),this.clearRoute(),this.addChar(),gamelib.DeviceUtils.IsMobile?this.addDoubleDownEvent(this.mapImage,this.onDoubleDownClick):(this.addDoubleDownEvent(this.mapImage,this.onDoubleDownClick),this.addMouseMoveEvent(this.mapImage,this.mouseMove),this.addMouseOverEvent(this.mapImage,this.mouseMove),this.addMouseMoveEvent(this.troopsImage,this.mouseMove),this.addMouseOverEvent(this.troopsImage,this.mouseMove),this.addMouseMoveEvent(this.guildImage,this.mouseMove),this.addMouseOverEvent(this.guildImage,this.mouseMove),this.addMouseMoveEvent(this.skill0,this.mouseMove),this.addMouseOverEvent(this.skill0,this.mouseMove),this.addMouseMoveEvent(this.skill1,this.mouseMove),this.addMouseOverEvent(this.skill1,this.mouseMove)),this.addTouchEvent(this.btn_close,this.onClick),this.addTouchEvent(this.btn_close2,this.onClick),this.addTouchEvent(this.troopsImage,this.onClick),this.addTouchEvent(this.guildImage,this.onClick),this.addTouchEvent(this.okButton,this.onClick),this.addTouchEvent(this.cancelButton,this.onClick),this.tipsGroup.visible=!1},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btn_close:return void t.ViewManager.ins().close(this);case this.okButton:return this.tipsGroup.visible=!1,void t.DefaultMgr.ins().s_0_26(this.type);case this.cancelButton:return void(this.tipsGroup.visible=!1);case this.btn_close2:return void(this.tipsGroup.visible=!1);case this.troopsImage:this.type=1;var i=t.EntityMgr.ins().getPayer;return this.descLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_164,t.GameMap.mapName,i.currentX,i.currentY)),void(this.tipsGroup.visible=!0);case this.guildImage:this.type=2;var n=t.EntityMgr.ins().getPayer;return this.descLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_165,t.GameMap.mapName,n.currentX,n.currentY)),void(this.tipsGroup.visible=!0)}},i.prototype.updateSkill=function(){for(var e=0;e<this.skillKeyArr.length;e++){var i=t.GlobalConfig.SkillsLevelConf[this.skillKeyArr[e]][1];i&&(this["skill"+e].setSkillImg(i.skillName+""),this["skill"+e].keyIndex=e,this["skill"+e].setCountState(!1),this["skill"+e].ID=i.id,this["skill"+e].TYPES=1,this["skillMC"+e]=t.ObjectPool.pop("app.MovieClip"),this["skillMC"+e].blendMode=egret.BlendMode.ADD,this["skillMC"+e].scaleX=this["skillMC"+e].scaleY=1,this["skillMC"+e].touchEnabled=!1,this["cdGrp"+e].addChild(this["skillMC"+e]),this["skillMC"+e].visible=!1,this.skillArr.push(this["skill"+e]))}},i.prototype.updateSkillCD=function(){for(var e=-1,i=0;i<this.skillKeyArr.length;i++){this["skill"+i].stopTween();var n=t.EntityMgr.ins().getPayer.getUserSkill(this.skillKeyArr[i]);if(n){var s=t.GlobalConfig.SkillsLevelConf[this.skillKeyArr[i]][n.nLevel];if(s){var a=n.dwResumeTick-egret.getTimer();a>0&&(this["skill"+i].playTween3(s.cooldownTime,a,!0),e++)}}}-1==e&&t.TimerManager.ins().remove(this.updateSkillCD,this)},i.prototype.skillCD=function(e){t.TimerManager.ins().isExists(this.updateSkillCD,this)||(t.TimerManager.ins().doTimer(10,0,this.updateSkillCD,this),this.updateSkillCD())},i.prototype.playSkillKeyEff=function(t){for(var e,i=function(i){if(e=n.skillArr[i],e.ID==t.id){var s=n["skillMC"+e.keyIndex];return s&&(s.visible=!0,s.playFileEff(ResDirEnum.RES_DIR_EFF+t.skillName,1,function(){s.visible=!1},!1)),{value:void 0}}},n=this,s=0;s<this.skillArr.length;s++){var a=i(s);if("object"==typeof a)return a.value}},i.prototype.updateTarget=function(e){e&&e.x&&e.y?(this.targetImage.x=t.GameMap.grip2Point(e.x)/this.nScale,this.targetImage.y=t.GameMap.grip2Point(e.y)/this.nScale,this.targetImage.visible=!0):(this.targetImage.visible=!1,this.clearRoute())},i.prototype.clearRoute=function(){this.routeGroup.removeChildren()},i.prototype.addChar=function(){var e,i=t.EntityMgr.ins().getNpcList();for(var n in i)e=i[n],this.addRead(e);var s,a=t.EntityMgr.ins().getAllEntity();for(var n in a)s=a[n],this.addRead(s)},i.prototype.updateMaxMap=function(e){e?this.mapSource=e:this.mapSource=""+ResDirEnum.MAP_DIR+t.GameMap.getFileName()+"/small.jpg?v=1",RES.getResByUrl(this.mapSource,this.onComplete,this,RES.ResourceItem.TYPE_IMAGE)},i.prototype.updateAreaName=function(){this.areaName.text=t.GameMap.areaName},i.prototype.onComplete=function(e,i){if(e&&this.mapSource==i){this.nameLabel.text=t.GameMap.mapName;var n=800,s=500;this.nScale=t.GameMap.MAX_WIDTH/n;var a=800/e.textureWidth;s=a*e.textureHeight,this.mapImage.width=n,this.mapImage.height=s,this.mapGroup.width=n,this.mapGroup.height=s,this.width=n+this.mapGroup.left+this.mapGroup.right,this.height=s+this.mapGroup.top+this.mapGroup.bottom,this.mapImage.source=e,this.teleportNameGroup.removeChildren(),this.teleportImageGroup.removeChildren(),t.ObjectPool.wipe(this.charRectObj);var r=t.EntityMgr.ins().getPayer;this.updateTarget(r.pathXY),this.charRectObj[r.recog]=this.myRect,this.rectGroup.removeChildren();for(var o=void 0,l=void 0,h=void 0,p=0;p<t.GameMap.scenes.teleport.length;p++)if(o=t.GameMap.scenes.teleport[p],o&&!o.mapHide){l=new eui.Label(o),h=new eui.Image("map_jiantou");var u=o.posx*t.GameMap.CELL_SIZE,c=o.posy*t.GameMap.CELL_SIZE-20;h.x=u/this.nScale,h.y=c/this.nScale,l.size=14,l.textAlign=egret.HorizontalAlign.CENTER,l.text=o.name,this.teleportNameGroup.addChild(l),l.x=Math.max(1,h.x+8),l.x+300>n&&(l.x=h.x-l.width-3),l.y=Math.min(Math.max(1,h.y),s-l.height-1),this.teleportImageGroup.addChild(h)}this.updateXY(r),this.addChar(),this.updateMapStarPatch()}},i.prototype.mouseMove=function(e){if(t.GameMap.scenes&&t.GameMap.scenes.ismini)if(e.type==mouse.MouseEvent.MOUSE_OUT)switch(e.currentTarget){case this.mapImage:this.osMove=!1,this.mapImage.removeEventListener(mouse.MouseEvent.ROLL_OVER,this.mouseMove,this);break;default:t.UserTips.ins().closeTips()}else if(e.type==mouse.MouseEvent.MOUSE_OVER)switch(e.currentTarget){case this.mapImage:this.osMove=!0,this.mapImage.addEventListener(mouse.MouseEvent.ROLL_OVER,this.mouseMove,this);break;default:var i=e.currentTarget.localToGlobal(),n="";e.currentTarget==this.troopsImage?n=t.LanguageUtils.language_Common_182:e.currentTarget==this.guildImage?n=t.LanguageUtils.language_Common_181:e.currentTarget==this.skill0?n=t.LanguageUtils.language_Common_180:e.currentTarget==this.skill1&&(n=t.LanguageUtils.language_Common_179),t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,n,{x:i.x+e.currentTarget.width/2,y:i.y+e.currentTarget.height/2}),i=null}else e.type==mouse.MouseEvent.ROLL_OVER&&(this.postX=Math.max(Math.floor(e.localX*this.nScale/t.GameMap.CELL_SIZE),0),this.postY=Math.max(Math.floor(e.localY*this.nScale/t.GameMap.CELL_SIZE),0),this.xyLabel.text=this.postX+":"+this.postY)},i.prototype.onDoubleDownClick=function(e){e.stopPropagation();var i=t.EntityMgr.ins().getPayer;i&&(gamelib.DeviceUtils.IsMobile?(this.postX=Math.max(Math.floor(e.localX*this.nScale/t.GameMap.CELL_SIZE),0),this.postY=Math.max(Math.floor(e.localY*this.nScale/t.GameMap.CELL_SIZE),0),i.pathFinding(this.postX,this.postY)):i.pathFinding(this.postX,this.postY))},i.prototype.updatePlayerXY=function(t,e){this.osMove||(this.xyLabel.text=t+":"+e)},i.prototype.remDot=function(e){var i=t.EntityMgr.ins().getPayer;e!=i.recog&&this.charRectObj[e]&&(t.DisplayUtils.removeFromParent(this.charRectObj[e]),delete this.charRectObj[e])},i.prototype.updateXY=function(t){if(this.charRectObj[t.recog]){var e=t.x/this.nScale,i=t.y/this.nScale;this.charRectObj[t.recog].x=e,this.charRectObj[t.recog].y=i,t.isMy&&(this.updatePlayerXY(t.currentX,t.currentY),this.updateMapStarPatch())}else this.addRead(t)},i.prototype.addRead=function(e){if(!this.charRectObj[e.recog]){if(e instanceof t.CharNpc)this.charRectObj[e.recog]=new eui.Image("map_dian_3");else{if(e.isMy)return;if(e.isCharRole){var i=this.getCharRectColor(e,e.getMapColor());this.charRectObj[e.recog]=new eui.Image(i)}else if(e.isPet)this.charRectObj[e.recog]=new eui.Image("map_dian_6");else{var n=t.GlobalConfig.Monster[e.propSet.getACTOR_ID()];3==n.monsterType||4==n.monsterType||8==n.monsterType||10==n.monsterType?this.charRectObj[e.recog]=new eui.Image("map_boss"):this.charRectObj[e.recog]=new eui.Image("map_dian_5")}}this.charRectObj[e.recog].anchorOffsetX=3,this.charRectObj[e.recog].anchorOffsetX=3,this.charRectObj[e.recog].width=6,this.charRectObj[e.recog].height=6,this.rectGroup.addChild(this.charRectObj[e.recog]),this.updateXY(e)}},i.prototype.getCharRectColor=function(e,i){return i==t.ColorUtil.NAME_BLUE?"map_dian_1":i==t.ColorUtil.NAME_ORANGE?"map_dian_2":i==t.ColorUtil.NAME_GREEN?"map_dian_3":i==t.ColorUtil.NAME_pinkGreen?"map_dian_8":14549407==i?"map_dian_9":4513277==i?"map_dian_10":7873229==i?"map_dian_11":"map_dian_4"},i.prototype.updateMapStarPatch=function(){if(this.clearRoute(),this.targetImage.visible){var e=t.EntityMgr.ins().getPayer,i=e.aStarPatch;if(i.length>2){var n=i.length,s=void 0,a=void 0,r=void 0,o=Math.floor(this.nScale/4);o=o?o:1;for(var l=0;n>l;l++)l%o==0&&(s=new eui.Image("mpa_way"),a=t.GameMap.grip2Point(i[l].X)/this.nScale,r=t.GameMap.grip2Point(i[l].Y)/this.nScale,s.x=a-4,s.y=r-4,this.routeGroup.addChild(s))}}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.$onClose(),this.clearRoute(),this.teleportObj=null,this.arrowObj=null,this.removeDoubleDownEvent(this,this.onDoubleDownClick),this.removeMouseMoveEvent(this.mapImage,this.mouseMove),this.removeMouseOverEvent(this.mapImage,this.mouseMove),this.removeMouseMoveEvent(this.troopsImage,this.mouseMove),this.removeMouseOverEvent(this.troopsImage,this.mouseMove),this.removeMouseMoveEvent(this.guildImage,this.mouseMove),this.removeMouseOverEvent(this.guildImage,this.mouseMove),this.removeMouseMoveEvent(this.skill0,this.mouseMove),this.removeMouseOverEvent(this.skill0,this.mouseMove),this.removeMouseMoveEvent(this.skill1,this.mouseMove),this.removeMouseOverEvent(this.skill1,this.mouseMove),this.removeTouchEvent(this.btn_close,this.onClick),this.removeTouchEvent(this.btn_close2,this.onClick),this.removeTouchEvent(this.troopsImage,this.onClick),this.removeTouchEvent(this.guildImage,this.onClick),this.removeTouchEvent(this.okButton,this.onClick),this.removeTouchEvent(this.cancelButton,this.onClick),this.mapImage.removeEventListener(mouse.MouseEvent.ROLL_OVER,this.mouseMove,this);for(var s=0;s<this.skillArr.length;s++)this["skillMC"+s].destroy();t.TimerManager.ins().remove(this.updateSkillCD,this)},i}(t.BaseEuiView);t.MapMaxView=e,__reflect(e.prototype,"app.MapMaxView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.nimiImageW=0,t.nimiImageH=0,t.isRightClick=!1,t.osMove=!1,t.postX=0,t.postY=0,t.nScale=0,t.teleportObj={},t.arrowObj={},t.isMayrecog=null,t.charRectObj={},t.skinName="MapMiniSkin",t.right=0,t.top=0,t.addTouchEvent(t,t.onClickBtn),t.addRightDownEvent(t,t.rightClick),t.addMouseMoveEvent(t.mapGroup,t.mouseMove),t.addMouseOverEvent(t.mapGroup,t.mouseMove),t.childrenCreated(),t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initUIView()},i.prototype.initUIView=function(){gamelib.DeviceUtils.IsMobile&&(this.scaleX=this.scaleY=.9),this.observe(t.DefaultMgr.ins().post_setTarget,this.updateTarget),this.observe(t.DefaultMgr.ins().post_updatePlayerXY,this.updatePlayerXY),this.observe(t.DefaultMgr.ins().post_remDot,this.remDot),this.observe(t.DefaultMgr.ins().post_updateCharRectColor,this.updateCharRectColor),this.observe(t.DefaultMgr.ins().post_updateCharRect,this.updateCharRect),this.observe(t.DefaultMgr.ins().post_updateMiniBg,this.updateMiniBg),this.updateEntity(),t.TimerManager.ins().isExists(this.updateEntity,this)||t.TimerManager.ins().doTimer(2e3,0,this.updateEntity,this)},i.prototype.updateEntity=function(){var e,i=t.ViewManager.ins().getView(t.MapMaxView),n=t.EntityMgr.ins().getNpcList();for(var s in n)e=n[s],this.updateCharRect(e),i&&i.addRead(e);var a=t.EntityMgr.ins().getAllEntity();for(var s in a)e=a[s],this.updateCharRect(e),i&&i.updateXY(e)},i.prototype.updateTarget=function(e){e?(this.targetImage.x=t.GameMap.grip2Point(e.x)/this.nScale,this.targetImage.y=t.GameMap.grip2Point(e.y)/this.nScale,this.routeImage.visible=!0,this.routeImage.x=this.targetImage.x,this.routeImage.y=this.targetImage.y,this.targetImage.visible=!0):(this.targetImage.visible=!1,this.routeImage.visible=!1)},i.prototype.mouseMove=function(e){if(t.GameMap.scenes&&t.GameMap.scenes.ismini)if(e.type==mouse.MouseEvent.MOUSE_OUT){this.osMove=!1,this.mapGroup.removeEventListener(mouse.MouseEvent.ROLL_OVER,this.mouseMove,this);var i=t.EntityMgr.ins().getPayer;i&&(this.xyLabel.text=i.currentX+":"+i.currentY)}else e.type==mouse.MouseEvent.MOUSE_OVER?(this.osMove=!0,this.mapGroup.addEventListener(mouse.MouseEvent.ROLL_OVER,this.mouseMove,this)):e.type==mouse.MouseEvent.ROLL_OVER&&(this.postX=Math.max(Math.floor((e.localX-this.miniGroup.x)*this.nScale/t.GameMap.CELL_SIZE),0),this.postY=Math.max(Math.floor((e.localY-this.miniGroup.y)*this.nScale/t.GameMap.CELL_SIZE),0),this.xyLabel.text=this.postX+":"+this.postY)},i.prototype.onClickBtn=function(e){e&&e.stopPropagation(),t.ViewManager.ins().isShow(t.MapMaxView)?t.ViewManager.ins().close(t.MapMaxView):t.ViewManager.ins().open(t.MapMaxView)},i.prototype.updateMapSize=function(){this.rectGroup.visible=!0,this.miniImage.width=this.nimiImageW,this.miniImage.height=this.nimiImageH;for(var e=0;e<t.GameMap.scenes.teleport.length;e++){var i=this.teleportObj[e],n=this.arrowObj[e];if(n){var s=t.GameMap.scenes.teleport[e].posx*t.GameMap.CELL_SIZE,a=t.GameMap.scenes.teleport[e].posy*t.GameMap.CELL_SIZE-20;n.x=s/this.nScale-1,n.y=a/this.nScale-3,i.x=Math.max(1,n.x+8),i.x+i.width>this.nimiImageW&&(i.x=n.x-i.width-3),i.y=Math.min(Math.max(1,n.y),this.nimiImageH-i.height-1)}}},i.prototype.onLeftDownClick=function(t){t.stopPropagation()},i.prototype.onDoubleDownClick=function(e){e.stopPropagation();var i=t.EntityMgr.ins().getPayer;i&&i.pathFinding(this.postX,this.postY)},i.prototype.rightClick=function(e){e&&e.stopPropagation(),t.GameMap.scenes&&t.GameMap.scenes.ismini&&(this.isRightClick?this.alpha=1:this.alpha=.5,this.isRightClick=!this.isRightClick)},i.prototype.updateMiniBg=function(e){var i=e[0],n=e[1],s=e[2];t.GameMap.scenes&&t.GameMap.scenes.ismini?(this.myRect.visible=!0,egret.Tween.removeTweens(this.myRect),this.mapW=i,this.mapH=n,this.img=new eui.Image,this.miniGroup.addChildAt(this.img,0),this.img.addEventListener(egret.Event.COMPLETE,this.onComplete,this),this.mapSource=s,this.img.source=""+ResDirEnum.MAP_DIR+s+"/small.jpg?v=1"):(egret.Tween.removeTweens(this.myRect),this.onComplete(null),this.img&&(this.img.visible=!1),this.myRect.visible=!1,this.height=this.width=150,this.rectGroup.visible=!0,this.miniImage.width=this.nimiImageW,this.miniImage.height=this.nimiImageH,t.ViewManager.ins().close(t.MapMaxView)),this.areaName.textColor=t.ColorUtil.GREEN_COLOR,this.nameLabel.text=t.GameMap.mapName},i.prototype.udpatePlayer=function(){var e=t.EntityMgr.ins().getPayer;e&&(this.updateCharRect(e),e=null)},i.prototype.onFinish=function(){t.TimerManager.ins().remove(this.udpatePlayer,this)},i.prototype.onComplete=function(e){if(t.TimerManager.ins().remove(this.udpatePlayer,this),this.rectGroup.removeChildren(),this.teleportGroup.removeChildren(),this.arrowGroup.removeChildren(),t.ObjectPool.wipe(this.teleportObj),t.ObjectPool.wipe(this.arrowObj),t.GameMap.scenes&&t.GameMap.scenes.ismini){var i=t.ViewManager.ins().getView(t.MapMaxView);if(i&&(i.updateMaxMap(this.img.source),i=null),t.GameMap.scenes&&t.GameMap.scenes.teleport){if(this.charRectObj={},this.isMayrecog&&(this.charRectObj[this.isMayrecog]=this.myRect),t.GameMap.MAX_WIDTH>28032)e.target.width=t.GameMap.MAX_WIDTH/40,e.target.height=t.GameMap.MAX_HEIGHT/40;else if(t.GameMap.MAX_WIDTH>3840){if(e.target.width=t.GameMap.MAX_WIDTH/36,e.target.height=t.GameMap.MAX_HEIGHT/36,e.target.height<150){e.target.height=150;var n=t.GameMap.MAX_HEIGHT/150;e.target.width=t.GameMap.MAX_WIDTH/n}}else{var s=t.GameMap.MAX_WIDTH/150;e.target.width=150,e.target.height=t.GameMap.MAX_HEIGHT/s}this.nScale=t.GameMap.MAX_WIDTH/e.target.width,e.target.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),this.nimiImageW=e.target.width+0,this.nimiImageH=e.target.height+0;for(var a=void 0,r=0;r<t.GameMap.scenes.teleport.length;r++)if(a=t.GameMap.scenes.teleport[r],a&&!a.mapHide){var o=new eui.Label(a);o.size=14,o.textAlign=egret.HorizontalAlign.CENTER,o.text=a.name,this.teleportGroup.addChild(o),this.teleportObj[r]=o;var l=new eui.Image("map_jiantou");this.arrowGroup.addChild(l),this.arrowObj[r]=l;var h=a.posx*t.GameMap.CELL_SIZE,p=a.posy*t.GameMap.CELL_SIZE-20;l.x=h/this.nScale-1,l.y=p/this.nScale-4,o.x=Math.max(1,l.x+8),o.x+o.width>this.nimiImageW&&(o.x=l.x-o.width-3),o.y=Math.min(Math.max(1,l.y),this.nimiImageH-o.height-1)}}t.DisplayUtils.removeFromParent(this.miniImage),this.miniImage=null,this.miniImage=e.target;var u=egret.Tween.get(this.myRect,{loop:!0});u.wait(500).to({visible:!1},1).wait(500).to({visible:!0},1)}t.TimerManager.ins().doTimer(500,10,this.udpatePlayer,this,this.onFinish),this.udpatePlayer()},i.prototype.updateCharRect=function(e){if(void 0===e&&(e=null),e&&e.propSet&&t.GameMap.scenes&&t.GameMap.scenes.ismini)if(this.charRectObj[e.recog])this.updateXY(e);else{if(e.isMy)this.isMayrecog=e.recog,this.charRectObj[this.isMayrecog]=this.myRect;else if(e.isCharRole)this.charRectObj[e.recog]=new eui.Image,this.rectGroup.addChild(this.charRectObj[e.recog]),this.updateCharRectColor([e.recog,e.getMapColor()]);else if(e.isPet)this.charRectObj[e.recog]=new eui.Image("map_dian_6"),this.rectGroup.addChild(this.charRectObj[e.recog]);else if(e.isNpc)this.charRectObj[e.recog]=new eui.Image("map_dian_3"),this.rectGroup.addChild(this.charRectObj[e.recog]);else{var i=t.GlobalConfig.Monster[e.propSet.getACTOR_ID()];3==i.monsterType||4==i.monsterType||8==i.monsterType||10==i.monsterType?this.charRectObj[e.recog]=new eui.Image("map_boss"):this.charRectObj[e.recog]=new eui.Image("map_dian_5"),this.rectGroup.addChild(this.charRectObj[e.recog])}this.updateXY(e)}this.areaName.text=t.GameMap.areaName},i.prototype.updateXY=function(e){var i=e.x/this.nScale,n=e.y/this.nScale;this.charRectObj[e.recog].x=i,this.charRectObj[e.recog].y=n,e.isMy&&(this.routeImage.visible&&(this.routeImage.rotation=t.MathUtils.getAngle(t.MathUtils.getRadian2(this.routeImage.x,this.routeImage.y,i,n)),this.routeImage.width=t.MathUtils.getDistanceByObject(this.routeImage,this.charRectObj[e.recog])),this.miniGroup.x=Math.max(Math.min(-i+75,0),-this.nimiImageW+150),this.miniGroup.y=Math.max(Math.min(-n+75,0),-this.nimiImageH+150));var s=t.ViewManager.ins().getView(t.MapMaxView);s&&(s.updateXY(e),s=null)},i.prototype.updateCharRectColor=function(e){if(t.GameMap.scenes&&t.GameMap.scenes.ismini){var i=this.charRectObj[e[0]];i&&(e[1]==t.ColorUtil.NAME_BLUE?i.source="map_dian_1":e[1]==t.ColorUtil.NAME_ORANGE?i.source="map_dian_2":e[1]==t.ColorUtil.NAME_GREEN?i.source="map_dian_3":e[1]==t.ColorUtil.NAME_pinkGreen?i.source="map_dian_8":14549407==e[1]?i.source="map_dian_9":4513277==e[1]?i.source="map_dian_10":7873229==e[1]?i.source="map_dian_11":i.source="map_dian_4")}},i.prototype.updatePlayerXY=function(t){this.osMove||(this.xyLabel.text=t[0]+":"+t[1])},i.prototype.remDot=function(e){if(t.GameMap.scenes&&t.GameMap.scenes.ismini&&e!=t.EntityMgr.ins().getPayer.recog){this.charRectObj[e]&&(t.DisplayUtils.removeFromParent(this.charRectObj[e]),this.charRectObj[e]=null,delete this.charRectObj[e]);var i=t.ViewManager.ins().getView(t.MapMaxView);i&&(i.remDot(e),i=null)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.$onClose(),t.TimerManager.ins().removeAll(this),egret.Tween.removeTweens(this.myRect),this.teleportObj=null,this.arrowObj=null,this.mapGroup.removeEventListener(mouse.MouseEvent.ROLL_OVER,this.mouseMove,this),this.img&&this.img.addEventListener(egret.Event.COMPLETE,this.onComplete,this),this.removeDoubleDownEvent(this,this.onDoubleDownClick),this.removeLeftDownEvent(this,this.onLeftDownClick),this.removeRightDownEvent(this,this.rightClick),this.removeMouseMoveEvent(this.mapGroup,this.mouseMove),this.removeMouseOverEvent(this.mapGroup,this.mouseMove),this.removeTouchEvent(this,this.onClickBtn)},i}(t.BaseEuiView);t.MapMiniView=e,__reflect(e.prototype,"app.MapMiniView"),t.ViewManager.ins().reg(e,t.LayerManager.Game_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.nameObj={},t.touchEnabled=!1,t.touchEnabled=!1,t}return __extends(i,e),i.prototype.addCharMonsterName=function(e){if(this.nameObj[e])this.nameObj[e].visible=!0;else{var i=t.ObjectPool.pop("app.CharNameLabel");this.addChild(i),this.nameObj[e]=i}return this.nameObj[e]},i}(eui.Group);t.MapNameView=e,__reflect(e.prototype,"app.MapNameView")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.CLICK_TYPE0=0,t.CLICK_LEFT=1,t.CLICK_RIGHT=2,t}();t.ClickClass=e,__reflect(e.prototype,"app.ClickClass");var i=function(i){function n(){var e=i.call(this)||this;if(e.selectImg=new eui.Image,e.downIdx=0,e.dropEffObj={},e.udpateAry=[],e.timeInterval=10,e.currentTime=0,e.payerXY={x:0,y:0},e.teleportObj={},e.safeMCAry=[],e.safeMCXY=[],e.shadowObj={},e.imgAry=[],e.touchEnabled=!0,e.touchChildren=!0,e.dSpriteSheet=new how.DSpriteSheet(300),e.dropSS=new how.DSpriteSheet(300),e.clickWalkMovieClip=new t.MovieClip,e.clickRunMovieClip=new t.MovieClip,e.selectImg.source="select_png",t.StageUtils.ins().getStage().addEventListener(egret.Event.RESIZE,e.onResize,e),gamelib.DeviceUtils.IsMobile)t.ViewManager.gamescene.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchBeginFunction,e),t.ViewManager.gamescene.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,e.onTouchDouble,e),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.phoneCloseTips,e);else{t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.updateMouseTime,e),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,e.moveDailyPost,e),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,e.updateMouseTime,e),window.loginWay&&t.ViewManager.gamescene.addEventListener(mouse.MouseEvent.RIGHT_DOWN,e.touchBeginFunction,e),t.ViewManager.gamescene.addEventListener(mouse.MouseEvent.LEFT_DOWN,e.touchBeginFunction,e),t.ViewManager.gamescene.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,e.onTouchDouble,e),e.addEventListener(mouse.MouseEvent.MOUSE_MOVE_MAP,e.moveOver,n),gamelib.os.KeyBoard.addKeyDown(e.keyDown,e),gamelib.os.KeyBoard.addKeyUp(e.keyUp,e);var s=e;window.onblur=function(t){s.mouseupFun(t),n.m_isClickShift=!1,n.m_keyCode=0},document.addEventListener("mouseup",function(){t.TimerManager.ins().doNext(function(){n.m_isClickShift=!1,s.mouseupFun(null)},s)},!0)}return e.currentTime=egret.getTimer(),egret.startTick(e.onEnterFrame,e),e}return __extends(n,i),n.prototype.moveOver=function(e){var i=t.EntityMgr.ins().getPayer;i&&(n.overXY=t.ViewManager.gamescene.map.globalToLocal(e.stageX,e.stageY))},Object.defineProperty(n,"m_AiSkillId",{set:function(e){t.PlayerRoleAI.ins().isOpen&&-1!=t.PlayerRoleAI.ins().stopBreakSkillAry.indexOf(e)&&t.PlayerRoleAI.ins().stopAI(),n.m_clickSkillId=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"m_clickSkillId",{get:function(){return n.clickSkillId},set:function(e){if(e==t.SkillMgr.SKILL_ZHKL||e==t.SkillMgr.SKILL_ZHSS){var i=t.EntityMgr.ins().getPayer;if(t.PetSettingMgr.ins().petNum>0)return void t.UserTips.ins().showFightTips(t.LanguageUtils.language_Common_99)}var s=t.EntityMgr.ins().getPayer.getUserSkill(e);if(s&&!s.isDisable&&egret.getTimer()>s.dwResumeTick){if(n.ackXy=null,13==s.nSkillId||55==s.nSkillId||56==s.nSkillId||57==s.nSkillId||58==s.nSkillId){var i=t.EntityMgr.ins().getPayer;if(i){var a=i.propSet.getAP_JOB();return void t.SkillMgr.ins().s_5_2(s.nSkillId,0,i.currentX,i.currentY,i.dir,a)}}e==t.SkillMgr.SKILL_CX||e==t.SkillMgr.SKILL_BY?(this.clickSkillId=0,s.isOpen?t.SkillMgr.ins().s_5_19(e):t.SkillMgr.ins().s_5_18(e)):e==t.SkillMgr.SKILL_LH||e==t.SkillMgr.SKILL_ZR?(this.clickSkillId=0,egret.getTimer()>s.dwResumeTick&&t.SkillMgr.ins().s_5_18(e)):this.clickSkillId=e}else this.clickSkillId=0;n.m_keyCode=0},enumerable:!0,configurable:!0}),n.prototype.keyDown=function(e){if(e==gamelib.KeyCode.KC_S)return void t.PlayerRoleAI.ins().onClickTab();n.autoState=!1,n.taskState=null;var i=t.GlobalConfig.TimeManagerConfigConfig,s=1;if(i&&i.Taskfingertime&&(s=i.Taskfingertime),t.MainTaskMgr.ins().clickTime=egret.getTimer()+1e3*s,t.DefaultMgr.ins().post_autoReceiveTask(),n.m_isClickCtrl&&e==gamelib.KeyCode.KC_P)return void this._mapImage.keyDown();if(-1!=n.KEYS.indexOf(e))if(n.m_keyCode=e,e==gamelib.KeyCode.KC_SHIFT)n.m_isClickShift=!0,n.m_playerActon!=t.PlayerAction.TURN&&this.checkFuncion();else if(e==gamelib.KeyCode.KC_CONTROL)n.m_isClickCtrl=!0,this.checkFuncion();else{var a=t.SettingMgr.ins().keyInfo[n.KEYS.indexOf(e)];if(a)if(a.type){if(t.PlayerRoleAI.ins().isOpen,t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122),n.m_playerActon=t.PlayerAction.IDLE,n.m_ack_Char)){var r=n.m_ack_Char.recog;n.ClearChar(n.m_ack_Char.recog),t.DefaultMgr.ins().postUpdateTarget(r),r=null}n.m_clickSkillId=a.id}else n.m_keyCode=0}},n.prototype.keyUp=function(e){t.EntityMgr.ins().getPayer;e==gamelib.KeyCode.KC_SHIFT?(n.m_isClickShift=!1,this.checkFuncion()):e==gamelib.KeyCode.KC_CONTROL&&(n.m_isClickCtrl=!1,this.checkFuncion()),n.m_keyCode==e&&(n.m_keyCode=0)},n.prototype.onClick=function(t){},n.prototype.onTouchDouble=function(e){t.PlayerRoleAI.ins().stopAI()},n.prototype.beginFunction=function(t){},n.prototype.touchBeginFunction=function(i){var s=this,a=t.EntityMgr.ins().getPayer;n.m_forceAck_Recog=0,a.stopTask(),a.stopFinding(),n.overXY=this.globalToLocal(i.stageX,i.stageY),t.ViewManager.gamescene.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveFunction,this);var r=t.EntityMgr.ins().getPayer;if(r){gamelib.DeviceUtils.IsMobile&&(n.m_ack_Char=null,t.PlayerRoleAI.ins().isOpen||(n.isClickMap=!0));var o=this.globalToLocal(i.stageX,i.stageY);n.m_downX=t.GameMap.point2Grip(o.x),n.m_downY=t.GameMap.point2Grip(o.y),n.m_moveX=n.m_downX+0,n.m_moveY=n.m_downY+0;var l=t.DirUtil.get8DirBy2Point(r,o);if(n.moveDir=l,i.type==mouse.MouseEvent.RIGHT_DOWN){if(t.PlayerRoleAI.ins().stopAI(),n.m_Click_Type=e.CLICK_RIGHT,t.GameMap.checkWalkable(n.m_downX,n.m_downY)){var h=t.EntityMgr.ins().getGridChar(n.m_downX,n.m_downY);h||n.m_downX==a.currentX&&n.m_downY==a.currentY||(this.clickRunMovieClip.x=t.GameMap.grip2Point(n.m_downX),this.clickRunMovieClip.y=t.GameMap.grip2Point(n.m_downY),this._teleporLayer.addChild(this.clickRunMovieClip),this.clickRunMovieClip.visible=!0,this.clickRunMovieClip.playFile(ResDirEnum.RES_DIR_EFF+"select_run",1,function(){s.clickRunMovieClip.visible=!1}))}}else if(t.PlayerRoleAI.ins().isOpen&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips133),n.m_Click_Type=e.CLICK_LEFT,t.GameMap.checkWalkable(n.m_downX,n.m_downY)){var h=t.EntityMgr.ins().getGridChar(n.m_downX,n.m_downY);
h||n.m_downX==a.currentX&&n.m_downY==a.currentY||(this.clickWalkMovieClip.x=t.GameMap.grip2Point(n.m_downX),this.clickWalkMovieClip.y=t.GameMap.grip2Point(n.m_downY),this._teleporLayer.addChild(this.clickWalkMovieClip),this.clickWalkMovieClip.visible=!0,this.clickWalkMovieClip.playFile(ResDirEnum.RES_DIR_EFF+"select_walk",1,function(){s.clickWalkMovieClip.visible=!1}))}t.ViewManager.gamescene.addEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),gamelib.DeviceUtils.IsMobile||t.ViewManager.gamescene.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveFunction,this)}else n.m_Click_Type=e.CLICK_TYPE0;this.checkFuncion()},n.prototype.mouseupFun=function(t){n.m_Click_Type=e.CLICK_TYPE0,n.m_downX=0,n.m_downY=0,n.m_moveX=0,n.m_moveY=0,n.m_endTask.X=0,n.m_endTask.X=0,n.m_isClickCtrl=!1,this.checkFuncion()},n.mouseUpFunction=function(){n.isClickMap=!1,n.m_Click_Type=e.CLICK_TYPE0,n.m_downX=0,n.m_downY=0,n.m_moveX=0,n.m_moveY=0,n.m_endTask.X=0,n.m_endTask.X=0,n.m_playerActon=t.PlayerAction.IDLE},n.prototype.phoneCloseTips=function(e){gamelib.DeviceUtils.IsMobile&&("tipsview"!=e.target.name&&t.UserTips.ins().closeTips(),t.EventManager.ins().sendEvent(t.CompEvent.ROLE_CLOSE_SKILL_DESC),t.MainTaskMgr.ins().post_selectIsShow(0,0),!t.ViewManager.ins().isShow(t.PhoneAtkModelView)||e.target.parent instanceof t.PhoneAtkModelView||t.ViewManager.ins().close(t.PhoneAtkModelView))},Object.defineProperty(n,"m_ack_Char",{get:function(){return n._m_ack_Char},set:function(t){n._m_ack_Char=t},enumerable:!0,configurable:!0}),n.prototype.endFunction=function(e){t.ViewManager.gamescene.removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),this.mouseupFun(e)},n.prototype.touchMoveFunction=function(e){if(!t.PlayerRoleAI.ins().isOpen){var i=t.EntityMgr.ins().getPayer;if(i){var s=this.globalToLocal(e.stageX,e.stageY),a=t.DirUtil.get8DirBy2Point(i,s);n.m_moveX=t.GameMap.point2Grip(s.x),n.m_moveY=t.GameMap.point2Grip(s.y),n.moveDir=a,(n.m_playerActon==t.PlayerAction.DIR||n.m_playerActon==t.PlayerAction.PICKUP)&&this.checkFuncion()}}},n.ClearChar=function(e){n.m_ack_Char&&n.m_ack_Char.recog==e&&(n.m_ack_Char=null),n.m_Move_Char&&n.m_Move_Char.recog==e&&(n.m_Move_Char=null),t.EntityMgr.ins().getPayer.lockTarget==e&&t.DefaultMgr.ins().postUpdateTarget(0)},n.prototype.checkFuncion=function(){n.m_playerActon=t.PlayerAction.IDLE;var i=t.EntityMgr.ins().getPayer;if(n.m_Click_Type==e.CLICK_LEFT)return n.m_ack_Char=null,gamelib.DeviceUtils.IsMobile&&t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122)),n.m_moveX==i.currentX&&n.m_moveY==i.currentY?void(n.m_playerActon=t.PlayerAction.PICKUP):window.loginWay?void(n.m_playerActon=t.PlayerAction.WALK):t.GameMap.getAround8({X:n.m_moveX,Y:n.m_moveY},{X:i.currentX,Y:i.currentY})?void(n.m_playerActon=t.PlayerAction.WALK):void(n.m_playerActon=t.PlayerAction.TURN);if(n.m_Click_Type==e.CLICK_RIGHT)if(n.m_playerActon=t.PlayerAction.TURN,t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122),n.m_ack_Char&&(n.m_playerActon=t.PlayerAction.IDLE,n.m_ack_Char=null)),n.m_moveX==i.currentX&&n.m_moveY==i.currentY)n.m_playerActon=t.PlayerAction.DIR,debug.log("周围8格子");else for(var s=0,a=0,r=0;8>r;++r)if(s=n.m_moveX+gamelib.AStar.NEIGHBORPOS_X_VALUES[r],a=n.m_moveY+gamelib.AStar.NEIGHBORPOS_Y_VALUES[r],s==i.currentX&&a==i.currentY){n.m_playerActon=t.PlayerAction.DIR,debug.log("周围8格子");break}},n.prototype.initMap=function(){mouse.MouseEvent.map=this,this._mapImage=new t.MapViewBg,this.addChild(this._mapImage),this._safeDisplay=new egret.DisplayObjectContainer,this.addChild(this._safeDisplay),this._teleporLayer=new egret.DisplayObjectContainer,this.addChild(this._teleporLayer),this._dropLayer=new egret.DisplayObjectContainer,this.addChild(this._dropLayer),this.shadowGrou=new egret.DisplayObjectContainer,this.addChild(this.shadowGrou),this._chassisLayer=new egret.DisplayObjectContainer,this.addChild(this._chassisLayer),this._pickUpPetLayer=new egret.DisplayObjectContainer,this.addChild(this._pickUpPetLayer),this._entityLayer=new egret.DisplayObjectContainer,this.addChild(this._entityLayer),this.nameGroup=new egret.DisplayObjectContainer,this.addChild(this.nameGroup),this.hpGroup=new egret.DisplayObjectContainer,this.addChild(this.hpGroup),this.hpLabelGroup=new egret.DisplayObjectContainer,this.addChild(this.hpLabelGroup),this._titleLayer=new egret.DisplayObjectContainer,this.addChild(this._titleLayer),this._titleLayer2=new egret.DisplayObjectContainer,this.addChild(this._titleLayer2),this._dropNameLayer=new egret.DisplayObjectContainer,this.addChild(this._dropNameLayer),this._effBottomLayer=new egret.DisplayObjectContainer,this.addChild(this._effBottomLayer),t.SkillEffPlayer.bottomLayer=this._effBottomLayer,this.floatView=new t.FloatView,this.addChild(this.floatView),t.EntityMgr.ins().isShowMakeDummy=!1,t.TimerManager.ins().isExists(this.updateEntity,this)||t.TimerManager.ins().doTimer(2e3,0,this.updateEntity,this),this.mpaGrey(!1)},n.prototype.updateEntity=function(){var e,i,n=t.StageUtils.ins().getWidth(),s=t.StageUtils.ins().getHeight();t.ViewManager.ins().getView(t.MapMaxView);for(var a in this.teleportObj)i=this.teleportObj[a],e=i.localToGlobal(),e.x<-64||e.x>n+64||e.y<-64||e.y>s+64?i.visible=!1:i.visible=!0;this._entityLayer.$children.sort(this.sortF),e=null},n.prototype.sortF=function(t,e){return t.weight>e.weight?1:t.weight<e.weight?-1:0},n.prototype.addEntity=function(t){this._entityLayer.addChild(t)},n.prototype.addDropEntity=function(t){this._dropLayer.addChildAt(t,300)},n.prototype.addDropEff=function(e,i,n,s){var a=t.ObjectPool.pop("app.MovieClip");a.x=n+25,a.y=s+30,a.touchEnabled=!1,a.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_guangzhu"+i,-1),this.dropEffObj[e]=a,this._dropLayer.addChildAt(a,i+1)},n.prototype.removeDropEff=function(t){var e=this.dropEffObj[t];e&&(delete this.dropEffObj[t],e.destroy(),e=null)},n.prototype.addTelepor=function(t){this._teleporLayer.addChild(t)},n.prototype.onEnterFrame=function(e){var i=egret.getTimer();i<t.MainTaskMgr.ins().clickTime&&(n.autoState=!0);var s=t.EntityMgr.ins().getPayer;if(s){var a=void 0;if(i-this.currentTime>1e4){this.udpateAry.length=0;var r=t.EntityMgr.ins().getAllEntity(),o=void 0;for(var l in r){for(a=r[l];a.m_CharMsgList.length>0;)o=a.m_CharMsgList.shift(),a.dispatchActorMsg(o),t.ObjectPool.push(o);a.speedAction()}}else{for(s.advanceTime(e);this.udpateAry.length>0&&(a=t.EntityMgr.ins().getCharRole(this.udpateAry.shift()),a&&!a.isMy&&a.advanceTime(e),!(egret.getTimer()-i>this.timeInterval)););var r=t.EntityMgr.ins().getAllEntity();for(var l in r)-1==this.udpateAry.indexOf(l)&&this.udpateAry.push(l);if(!t.GameSocket.IsCrossService&&3==t.GameMap.mapID&&t.EntityMgr.ins().isDuRange){var h=t.EntityMgr.ins().dummyCharList();for(var l in h)h[+l].advanceTime(e)}r=null,a=null,(this.payerXY.x!=s.currentX||this.payerXY.y!=s.currentY)&&(this.payerXY.x=s.currentX,this.payerXY.y=s.currentY,t.DefaultMgr.ins().post_updatePlayerXY(s.currentX,s.currentY),t.DefaultMgr.ins().post_updateCharRect(s))}}return this.currentTime=i,s=null,i=null,this.addSafeMc(),!1},n.prototype.minValue=function(t,e,i){return-Math.min(Math.max(t-(e>>1),-(e>>1)),i-(e>>1))},n.prototype.lookAt=function(e,i,n){void 0===n&&(n=!1);var s=t.StageUtils.ins().getWidth()/t.StageUtils.ins().getScale(),a=t.StageUtils.ins().getHeight()/t.StageUtils.ins().getScale(),r=this.minValue(e,s,t.GameMap.MAX_WIDTH),o=this.minValue(i,a,t.GameMap.MAX_HEIGHT);(this.x!=r||this.y!=o||n)&&(this.x=r,this.y=o,this._mapImage.updateHDMap({x:r,y:o},n))},n.prototype.changeMap=function(){if(n.m_Move_Char=null,n.m_ack_Char=null,egret.Tween.removeTweens(this),egret.Tween.removeTweens(this._mapImage),this._mapImage.initThumbnail(t.GameMap.MAX_WIDTH,t.GameMap.MAX_HEIGHT,t.GameMap.getFileName()),this.lookAt(t.GameMap.grip2Point(t.GameMap.mapX),t.GameMap.grip2Point(t.GameMap.mapY),!0),t.GameMap.scenes&&t.GameMap.scenes.teleport)for(var e=void 0,i=0,s=0,a=0;a<t.GameMap.scenes.teleport.length;a++)if(e=t.GameMap.scenes.teleport[a],e.modelid){if(i=e.posx*t.GameMap.CELL_SIZE,s=e.posy*t.GameMap.CELL_SIZE,!this.teleportObj[e.posx+"_"+e.posy]){var r=t.ObjectPool.pop("app.CharTeleport");r.setPropertySet(e.name,e,i+(t.GameMap.CELL_SIZE>>1),s+(t.GameMap.CELL_SIZE>>1)),this._teleporLayer.addChildAt(r,0),this.teleportObj[e.posx+"_"+e.posy]=r}t.EntityMgr.ins().addTeleport(e.posx,e.posy)}this.safeMCXY.length=0;for(var o;this._safeDisplay.$children.length>0;)o=this._safeDisplay.$children[this._safeDisplay.$children.length-1],t.TimerManager.ins().removeAll(o),o.stop(),t.DisplayUtils.removeFromParent(o),this.safeMCAry.push(o);if(t.GameMap.scenes.safe&&t.GameMap.scenes.safe.length){for(var a=0;a<t.GameMap.scenes.safe.length;a++)this.safeMCXY.push({x:t.GameMap.scenes.safe[a].x,y:t.GameMap.scenes.safe[a].y});this._safeDisplay.visible=!0}else this._safeDisplay.visible=!1;t.EntityMgr.ins().isShowMakeDummy=!1},n.prototype.addSafeMc=function(){if(this.safeMCXY.length){var e=this.safeMCXY.pop(),i=void 0;i=this.safeMCAry.length?this.safeMCAry.pop():new t.MovieClip,i.x=t.GameMap.grip2Point(e.x),i.y=t.GameMap.grip2Point(e.y),this._safeDisplay.addChild(i),i.playFile(ResDirEnum.RES_DIR_EFF+"aqq5_eff",-1)}},n.prototype.adjustMapPos=function(){this.x=this.x>>0,this.y=this.y>>0},n.prototype.onResize=function(){t.StageUtils.ins().getWidth(),t.StageUtils.ins().getHeight();this.lookAt(t.EntityMgr.ins().getPayer.x,t.EntityMgr.ins().getPayer.y,!0)},n.prototype.updateMouseTime=function(){var e=egret.getTimer();n.clickTime=e,n.autoState=!1,n.taskState=null;var i=t.GlobalConfig.TimeManagerConfigConfig,s=1;i&&i.Taskfingertime&&(s=i.Taskfingertime),t.MainTaskMgr.ins().clickTime=e+1e3*s,t.DefaultMgr.ins().post_autoReceiveTask()},n.prototype.moveDailyPost=function(){t.TimerManager.ins().isExists(this.refreshPost,this)||t.TimerManager.ins().doTimer(2e3,1,this.refreshPost,this)},n.prototype.refreshPost=function(){t.DefaultMgr.ins().post_autoReceiveTask(),t.TimerManager.ins().remove(this.refreshPost,this)},n.prototype.clearAllLayer=function(){for(var e in this.dropEffObj)this.dropEffObj[e].destroy();t.ObjectPool.wipe(this.dropEffObj),this._entityLayer.removeChildren(),this._dropLayer.removeChildren(),this._teleporLayer.removeChildren(),this.shadowGrou.removeChildren(),t.ObjectPool.wipe(this.teleportObj),t.ObjectPool.wipe(this.shadowObj),this.floatView.removeChildren(),this.selectImg.visible=!1,this.shadowGrou.addChild(this.selectImg),this.monsterTalkView&&this.monsterTalkView.close()},n.prototype.showTalkView=function(e,i,n){e&&(this.monsterTalkView||(this.monsterTalkView=new t.MonsterTalkView,this.addChild(this.monsterTalkView)),this.monsterTalkView.open(e,i,n))},n.prototype.getShadowImg=function(){if(this.imgAry.length>0)return this.imgAry.pop();var t=new eui.Image("yingzi_png");return t.anchorOffsetX=64,t.anchorOffsetY=64,t},n.prototype.getShadow=function(){var t=new eui.Image("yingzi_png");return t.anchorOffsetX=t.anchorOffsetY=64,this.shadowGrou.addChild(t),t},n.prototype.getTitleImage=function(){var t=new eui.Image;return t.touchEnabled=!1,t.anchorOffsetY=46,t.anchorOffsetX=68,this._titleLayer.addChildAt(t,0),t},n.prototype.getNpcTitleImage=function(){var t=new eui.Image;return t.touchEnabled=!1,t.anchorOffsetY=20,t.anchorOffsetX=68,this._titleLayer.addChildAt(t,0),t},n.prototype.getRageImage=function(){var t=new eui.Image;return t.touchEnabled=!1,t.anchorOffsetY=20,t.anchorOffsetX=77,t.source="rage_ch",this._titleLayer.addChildAt(t,2e3),t},n.prototype.getGzImage=function(){var t=new eui.Image;return t.touchEnabled=!1,t.anchorOffsetY=18,t.anchorOffsetX=91,t.scaleX=t.scaleY=.8,this._titleLayer.addChildAt(t,4e3),t},n.prototype.getBuffImage=function(){var t=new eui.Image;return t.touchEnabled=!1,t.anchorOffsetY=15,t.anchorOffsetX=42,t.scaleX=t.scaleY=.8,this._titleLayer.addChildAt(t,5e3),t},n.prototype.addTitleImage=function(t){this._titleLayer.addChildAt(t,0)},n.prototype.addTitleMC=function(t){t.touchEnabled=!1,this._titleLayer.addChildAt(t,500)},n.prototype.addTitle2MC=function(t){t.touchEnabled=!1,this._titleLayer2.addChild(t)},n.prototype.addShadow=function(t){this.shadowGrou.addChild(t)},n.prototype.setShadowXY=function(e,i,n){var s=t.EntityMgr.ins().getPayer.lockTarget;s?e==s&&(this.selectImg.x=i-64,this.selectImg.y=n-64,this.selectImg.visible=!0):this.selectImg.visible=!1},n.updateNaemColor=function(){var e,i=t.EntityMgr.ins().getAllEntity();for(var n in i)e=i[n],e.isCharRole&&(e.deleteMessage(t.StandardActions.NAME_UPDATE_COLOR),e.postCharMessage(t.StandardActions.NAME_UPDATE_COLOR,0,0,0,null))},n.prototype.getCharNameLable=function(){var e=how.getQuickLabel(this.dSpriteSheet,0);return e.textAlign="center",e.textWidth=500,e.size=40,e.textStroke=3,e.textStrokeColor=0,e.textColor=t.ColorUtil.NAME_WHITE,e.lineSpacing=3,e.touchEnabled=!1,e.scaleX=e.scaleY=.4,this.nameGroup.addChild(e),e},n.prototype.addNameLabel=function(t){this.nameGroup.addChild(t)},n.prototype.getCharHpBar=function(){var e=new t.CharHpBar;return e.visible=!1,e.touchEnabled=!1,e.touchChildren=!1,this.hpGroup.addChild(e),e},n.prototype.addCharHbBar=function(t){this.hpGroup.addChild(t)},n.prototype.getCharHpLable=function(){var t=new eui.BitmapLabel;return t.font="hp_fnt_fnt",t.width=150,t.letterSpacing=-3,t.textAlign=egret.HorizontalAlign.CENTER,this.hpLabelGroup.addChild(t),t},n.prototype.addCharHpLabel=function(t){this.hpLabelGroup.addChild(t)},n.prototype.getDropLable=function(){var t=how.getQuickLabel(this.dropSS,0);return t.textAlign="center",t.textWidth=400,t.size=40,t.textStroke=3,t.textStrokeColor=0,t.touchEnabled=!1,t.textColor=10602993,t.scaleX=t.scaleY=.4,this._dropNameLayer.addChild(t),t},n.prototype.addDropLable=function(t){this._dropNameLayer.addChild(t)},n.prototype.sortF2=function(t,e){return t.sortId>e.sortId?1:0},n.prototype.addAhassis=function(t){this._chassisLayer.addChild(t),this._chassisLayer.$children.sort(this.sortF2)},n.prototype.addPickUpPet=function(t){this._pickUpPetLayer.addChild(t)},n.prototype.close=function(){},n.prototype.mpaGrey=function(e){var i=t.EntityMgr.ins().getPayer;i&&i.mpaGrey(e)},n.autoState=!1,n.taskState=null,n.m_Click_Type=0,n.m_playerActon=t.PlayerAction.IDLE,n.m_downX=0,n.m_downY=0,n.m_moveX=0,n.m_moveY=0,n.moveDir=0,n.m_isClickShift=!1,n.m_isClickCtrl=!1,n.m_endTask={X:0,Y:0},n.m_keyCode=0,n.clickSkillId=0,n.KEYS=[gamelib.KeyCode.KC_1,gamelib.KeyCode.KC_2,gamelib.KeyCode.KC_3,gamelib.KeyCode.KC_4,gamelib.KeyCode.KC_5,gamelib.KeyCode.KC_6,gamelib.KeyCode.KC_Q,gamelib.KeyCode.KC_W,gamelib.KeyCode.KC_E,gamelib.KeyCode.KC_R,gamelib.KeyCode.KC_T,gamelib.KeyCode.KC_Y,gamelib.KeyCode.KC_SHIFT,gamelib.KeyCode.KC_CONTROL],n.isClickMap=!1,n.clickTime=0,n.overXY={x:0,y:0},n._m_ack_Char=null,n.m_forceAck_Recog=0,n.m_Move_Char=null,n}(egret.DisplayObjectContainer);t.MapView=i,__reflect(i.prototype,"app.MapView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lastUpdateX=0,t.lastUpdateY=0,t.mapImageArray=[],t.retmTime=0,t.isGridDebug=!1,t.shape=[],t.touchChildren=!1,t.touchEnabled=!1,t._imageList=[],t.showImages=[],t._poolImages=[],t._fileDic={},t.remImage={},t}return __extends(i,e),i.prototype.createDiscardMap=function(){void 0!=this.mapName&&""!=this.mapName&&gamelib.os.RM.createDiscardMap(ResDirEnum.MAP_DIR+this.mapName)},i.prototype.keyDown=function(){this.isGridDebug=!this.isGridDebug,this.isGridDebug||this.clearDrawGrid(),this.updateHDMap({x:this.lastUpdateX,y:this.lastUpdateY},!0)},i.prototype.onThumbnailComplete=function(t){this.isThumbnailComplete=!0,t.target&&t.target.name==this.mapName&&this.updateHDMap({x:this.lastUpdateX,y:this.lastUpdateY},!0)},i.prototype.initThumbnail=function(e,i,n){this.mapName!=n&&(this.isThumbnailComplete=!1),t.GameMap.scenes&&t.GameMap.scenes.music&&""!=t.GameMap.scenes.music?t.SoundManager.ins().playBg(t.GameMap.scenes.music+"_mp3"):t.SoundManager.ins().stopBg(),this.mapName!=n&&this.clearHDMap(),this.mapName!=n&&this.destroyFile(),this.mapName=n,this.maxImagX=Math.ceil(e/256),this.maxImagY=Math.ceil(i/256),this.isThumbnailComplete=!0,t.DefaultMgr.ins().post_updateMiniBg(e,i,n)},i.prototype.clearHDMap=function(){this._imageList.length=0,this.showImages.length=0,this.mapImageArray.length=0,t.ObjectPool.wipe(this.remImage),this.removeChildren(),void 0!=this.mapName&&""!=this.mapName&&gamelib.os.RM.createMap(ResDirEnum.MAP_DIR+this.mapName)},i.prototype.destroyFile=function(){},i.prototype.getImage=function(){return this.mapImageArray.pop()||new eui.Image},i.prototype.pushImage=function(t){},i.prototype.updateHDMap=function(e,i){void 0===i&&(i=!1);var n=256;if(i||Math.abs(this.lastUpdateX-e.x)>n/10||Math.abs(this.lastUpdateY-e.y)>n/10||0==this.lastUpdateX){if(this.lastUpdateX=e.x,this.lastUpdateY=e.y,!this.isThumbnailComplete)return;var s=[],a=t.StageUtils.ins().getWidth(),r=t.StageUtils.ins().getHeight();e.x>0||e.y>0||t.GameMap.MAX_WIDTH+e.x<a||t.GameMap.MAX_HEIGHT+e.y<r?t.ViewManager.gamescene.mapgBgImge.visible=!1:(t.ViewManager.gamescene.mapgBgImge.visible=!0,t.ViewManager.gamescene.mapgBgImge.x=e.x>0?e.x:0,t.ViewManager.gamescene.mapgBgImge.y=e.y>0?e.y:0);var o=Math.max(Math.floor(-e.x/n)-1,0),l=Math.max(Math.floor(-e.y/n)-1,0),h=o+Math.floor(a/n)+2,p=l+Math.floor(r/n)+2,u=egret.getTimer(),c=this.remImage;if(u-this.retmTime>3e3){for(var g in c)if(u-c[g].removeTime>3e3){var d=c[g].posJ,m=c[g].posI;this._imageList[d][m]=null,this.pushImage(c[g]),delete c[g]}this.retmTime=u}for(var m=o;h>=m&&m<this.maxImagX+1;m++)for(var d=l;p>=d&&d<this.maxImagY+1;d++)if(this._imageList[d]=this._imageList[d]||[],!(m>=this.maxImagX||d>=this.maxImagY)){if(this._imageList[d][m])this._imageList[d][m].parent||(this._imageList[d][m].removeTime=0,delete this.remImage[this._imageList[d][m].hashCode],this.addChild(this._imageList[d][m]));else{var f=""+ResDirEnum.MAP_DIR+this.mapName+"/image/"+d+"_"+m+".jpg?v=1";this._fileDic[f]=1;var v=this.getImage();v.source=f,v.name=f,v.x=m*n,v.y=d*n,v.posI=m,v.posJ=d,v.removeTime=0,this.addChild(v),this._imageList[d][m]=v}s.push(this._imageList[d][m])}for(var _=this.showImages.length,m=_-1;m>=0;m--)s.indexOf(this.showImages[m])>=0||(this.showImages[m].removeTime=u,t.DisplayUtils.removeFromParent(this.showImages[m]),this.remImage[this.showImages[m].hashCode]=this.showImages[m]);this.showImages=s}if(this.isGridDebug){var a=t.StageUtils.ins().getWidth()/1>>0,r=t.StageUtils.ins().getHeight()/1>>0,y=Math.max(Math.floor(-e.x/t.GameMap.CELL_SIZE),0),T=Math.max(Math.floor(-e.y/t.GameMap.CELL_SIZE),0),M=y+Math.ceil(a/t.GameMap.CELL_SIZE),C=T+Math.ceil(r/t.GameMap.CELL_SIZE);this.drawGrid({x:y,y:T},{x:M,y:C})}},i.prototype.drawGrid=function(e,i){this.clearDrawGrid(),this.shapeContainer=this.shapeContainer||new egret.DisplayObjectContainer,this.shapeContainer.touchEnabled=!1,this.shapeContainer.touchChildren=!1;for(var n=e.x;n<i.x;n++)for(var s=e.y;s<i.y;s++){var a=n*i.x+s,r=this.shape[a];r||(r=this.shape[a]=new egret.Shape),r.graphics.lineStyle(1,16777215),t.GameMap.checkAlpha(n,s)?r.graphics.beginFill(255,.3):t.GameMap.checkWalkable(n,s)?r.graphics.beginFill(15007744,0):r.graphics.beginFill(2682369,.3),r.graphics.drawRect(0,0,t.GameMap.CELL_SIZE,t.GameMap.CELL_SIZE),r.graphics.endFill(),r.x=n*t.GameMap.CELL_SIZE,r.y=s*t.GameMap.CELL_SIZE;var o=new eui.Label;o.size=12,o.text=n+","+s,o.x=n*t.GameMap.CELL_SIZE,o.y=s*t.GameMap.CELL_SIZE,o.name="label"+n+","+s,this.shapeContainer.addChild(r),this.shapeContainer.addChild(o)}this.addChild(this.shapeContainer)},i.prototype.clearDrawGrid=function(){if(this.shapeContainer&&this.shape){for(;this.shapeContainer.numChildren>0;)this.shapeContainer.removeChildAt(0);this.shape.length=0}},i}(egret.DisplayObjectContainer);t.MapViewBg=e,__reflect(e.prototype,"app.MapViewBg")}(app||(app={})),document.oncontextmenu=function(){return!1};var mouse;!function(t){var e,i=0/0,n=0/0,s=null,a=null;t.enable=function(o){if(e=o,!gamelib.DeviceUtils.IsMobile){var l=document.querySelectorAll(".egret-player"),h=l[0]["egret-player"].webTouchHandler,p=e.$displayList.renderBuffer.surface;egret.sys.TouchHandler.prototype;p.addEventListener("mousemove",function(e){t.MouseEvent.map&&(a=e)}),r(),p.addEventListener("dblclick",function(e){if(0==e.button){var i=h.getLocation(e),n=i.x,s=i.y,a=(e.identifier,o.$hitTest(n,s));a||(a=o),egret.TouchEvent.dispatchTouchEvent(a,t.MouseEvent.MOUSE_DOUBLECLICK,!0,!0,i.x,i.y,e.identifier,!0)}}),window.navigator.msPointerEnabled?p.addEventListener("MSPointerDown",function(e){var i=h.getLocation(e),n=i.x,s=i.y,a=(e.identifier,o.$hitTest(n,s));a||(a=o),2==e.button?egret.TouchEvent.dispatchTouchEvent(a,t.MouseEvent.RIGHT_DOWN,!0,!0,n,s,e.identifier,!0):egret.TouchEvent.dispatchTouchEvent(a,t.MouseEvent.LEFT_DOWN,!0,!0,n,s,e.identifier,!0),d(n,s)},!1):p.addEventListener("mousedown",function(e){var i=h.getLocation(e),n=i.x,s=i.y,a=(e.identifier,o.$hitTest(n,s));a||(a=o),2==e.button?egret.TouchEvent.dispatchTouchEvent(a,t.MouseEvent.RIGHT_DOWN,!0,!0,n,s,e.identifier,!0):egret.TouchEvent.dispatchTouchEvent(a,t.MouseEvent.LEFT_DOWN,!0,!0,n,s,e.identifier,!0),d(n,s)});var u=egret.sys.TouchHandler.prototype.onTouchMove;egret.sys.TouchHandler.prototype.onTouchMove=function(t,e,i){var n=t,s=e,a=u.call(this,n,s,i);return d(n,s),a};var c=egret.sys.TouchHandler.prototype.onTouchBegin;egret.sys.TouchHandler.prototype.onTouchBegin=function(t,e,i){var n=t,s=e,a=c.call(this,t,e,i);return d(n,s),a};var g=egret.sys.TouchHandler.prototype.onTouchEnd;egret.sys.TouchHandler.prototype.onTouchEnd=function(t,e,i){var n=t,s=e,a=g.call(this,t,e,i);return d(n,s),a},o.addEventListener(egret.Event.ENTER_FRAME,function(){if(a&&t.MouseEvent.map){var e=h.getLocation(a);egret.TouchEvent.dispatchTouchEvent(t.MouseEvent.map,t.MouseEvent.MOUSE_MOVE_MAP,!0,!0,e.x,e.y,a.identifier,!0)}},null);var d=function(e,a){if(i!=e||n!=a||app.MapView.m_Click_Type==app.ClickClass.CLICK_LEFT){i=e,n=a;var r=o.$hitTest(e,a);if(r){if(egret.TouchEvent.dispatchTouchEvent(r,t.MouseEvent.ROLL_OVER,!1,!1,e,a,null),s){if(r==s)return;s.hashCode!=r.hashCode&&egret.TouchEvent.dispatchTouchEvent(s,t.MouseEvent.MOUSE_OUT,!0,!1,e,a,null)}s=r,egret.TouchEvent.dispatchTouchEvent(r,t.MouseEvent.MOUSE_OVER,!0,!1,e,a,null)}else s&&egret.TouchEvent.dispatchTouchEvent(s,t.MouseEvent.MOUSE_OUT,!1,!1,e,a,null)}}}};var r=function(){var i="mousewheel",n=function(i){var n=i.type;("DOMMouseScroll"==n||"mousewheel"==n)&&(i.delta=i.wheelDelta?i.wheelDelta:-(i.detail||0),e.dispatchEventWith(t.MouseEvent.MOUSE_WHEEL,!1,i.delta))};window.addEventListener?("mousewheel"===i&&void 0!==document.mozFullScreen&&(i="DOMMouseScroll"),window.addEventListener(i,function(t){n(t)},!1)):window.attachEvent&&window.attachEvent("on"+i,function(t){t=t||window.event,n(t)})}}(mouse||(mouse={}));var mouse;!function(t){var e=function(){function t(){}return t.MOUSE_MOVE="mouseMove",t.RIGHT_DOWN="rightDown",t.LEFT_DOWN="leftDown",t.RIGHT_UP="rightUp",t.MOUSE_DOUBLECLICK="doubleClick",t.MOUSE_MOVE_MAP="mouseMoveMap",t.MOUSE_OVER="mouseOver",t.MOUSE_OUT="mouseOut",t.ROLL_OVER="rollOver",t.ROLL_OUT="rollOut",t.MOUSE_WHEEL="mouseWheel",t.map=null,t}();t.MouseEvent=e,__reflect(e.prototype,"mouse.MouseEvent")}(mouse||(mouse={}));var app;!function(t){var e=function(){function e(){}return e.playAckEff=function(e,i,n){void 0===n&&(n=1);var s=t.SettingMgr.CloseEff();if(i.isMy||!s){var a=t.GlobalConfig.EffectsConf[e];if(a){if(a.effects){var r=t.ObjectPool.pop("app.MovieClip");r.newFrameRate=8*n,r.blendMode=a.blendMode?egret.BlendMode.NORMAL:egret.BlendMode.ADD,r.m_gather=!0,r.x=i.x,r.y=i.y,r.scaleX=r.scaleY=1.25,this.bottomLayer.addChild(r),a.isDir?r.playFileEff8(ResDirEnum.RES_DIR_SKILL+a.effects+"_a"+i.dir,1,function(){r.destroy(),r=null}):r.playFileEff(ResDirEnum.RES_DIR_SKILL+a.effects,1,function(){r.destroy(),r=null})}a.sound&&t.SoundUtil.ins().playMonster(a.sound+"_mp3")}}},e.PlayBallisticEff=function(e,i,n,s,a){var r=t.SettingMgr.CloseEff();if(i.isMy||!r){var o=t.GlobalConfig.EffectsConf[e];if(o){if(o.effects){var l=t.ObjectPool.pop("app.MovieClip");l.m_gather=!0,l.x=i.x,l.y=i.y-70,l.scaleX=l.scaleY=1.25,this.bottomLayer.addChild(l);var h=1.3;if(25==e)l.rotation=45*i.dir,l.playFileEff(ResDirEnum.RES_DIR_SKILL+o.effects,1,function(){egret.Tween.removeTweens(l),l.destroy(),l=null});else{var a;s?a={x:s.x,y:s.y}:a||(a=t.DirUtil.getGridByDir(n,-18,{x:l.x,y:l.y}));var p=t.MathUtils.getDistance(i.x,i.y,a.x,a.y),u=0;p>64&&(u=p/h),u?(l.rotation=t.MathUtils.getAngle2(i.x,i.y,a.x,a.y),l.playFileEff(ResDirEnum.RES_DIR_SKILL+o.effects,-1),egret.Tween.get(l).to({x:a.x,y:a.y},u).call(function(){l.destroy(),l=null})):(l.destroy(),l=null)}}o.sound&&t.SoundUtil.ins().playMonster(o.sound+"_mp3")}}},e.remMovie=function(t){t.destroy(),t=null},e.PlayHitEff=function(e,i,n){var s=t.GlobalConfig.EffectsConf[e];if(s){if(s.effects){debug.log("播放命中！！！！");var a=t.ObjectPool.pop("app.MovieClip");a.blendMode=s.blendMode?egret.BlendMode.NORMAL:egret.BlendMode.ADD,a.m_gather=!0,a.x=t.GameMap.grip2Point(i.x),a.y=t.GameMap.grip2Point(i.y),a.scaleX=a.scaleY=1.25,this.bottomLayer.addChild(a),a.playFileEff(ResDirEnum.RES_DIR_SKILL+s.effects,1,function(){a.destroy(),a=null})}s.sound&&t.SoundUtil.ins().playMonster(s.sound+"_mp3")}},e.PlayTaskEff=function(e,i){var n=t.SettingMgr.CloseEff();if(!n){var s=t.ObjectPool.pop("app.MovieClip"),a=t.GameMap.grip2Point(i.x),r=t.GameMap.grip2Point(i.y);s.x=a,s.y=r-250,s.scaleX=s.scaleY=1,this.bottomLayer.addChild(s),s.playFileEff(ResDirEnum.RES_DIR_EFF+e,1,function(){s.destroy(),s=null})}},e}();t.SkillEffPlayer=e,__reflect(e.prototype,"app.SkillEffPlayer")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.TRANSLATE_MOVIE=0,t.TRANSLATE_QUEST=1,t.TRANSLATE_ACTIVITY=2,t.TRANSLATE_UPLEVEL=3,t}();t.TranslateDefine=e,__reflect(e.prototype,"app.TranslateDefine")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="MicrotermsViewSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.rewards.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=[];if(10004==Main.gameParameter.pfID){var s=t.GlobalConfig.Platform4366Config;s&&(n=s.rewardClient)}else{var s=t.GlobalConfig.NativeRewardConfig;s&&(n=s.reward)}this.rewards.dataProvider=new eui.ArrayCollection(n),this.addTouchEvent(this.microDownBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:if(1==t.FuLi4366Mgr.ins().commonIsDown){t.ViewManager.ins().close(this);break}case this.microDownBtn:if(10004==Main.gameParameter.pfID)window.MicroDownFunction(),ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1);else{var i=t.GlobalConfig.NativeConfig[window.isMicro];i&&(window.open(i.clientURL),ReportMgr.reporting(t.ReportDataEnum.MICROTERMS_DOWNLOAD,{},null,!1))}t.FuLi4366Mgr.ins().commonIsDown=1,t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.microDownBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.MicrotermsView=e,__reflect(e.prototype,"app.MicrotermsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.prototype.PlayerEquipInfo=function(e){if(void 0===e&&(e=null),this.equips=[],this.propertyArray=[],this.userBadges=[],e){for(var i=e.readUnsignedByte(),n=0;i>n;n++){var s=new t.userItem(e);this.equips.push(s)}this.vipType=e.readByte(),this.vipGrade=e.readByte();for(var a,r=0;22>r;r++)a=e.readUnsignedByte(),this.propertyArray.push(a);e.readUnsignedByte(),e.readUnsignedByte(),e.readUnsignedByte(),e.readUnsignedByte(),e.readUnsignedByte(),this.canUseWardrobeNum=e.readUnsignedShort(),this.initSoulEffectList(e.readUnsignedByte()),this.weaponItemId=e.readUnsignedShort();for(var o,l={},h=e.readUnsignedByte(),n=0;h>n;n++){o=[];var p=e.readUnsignedByte();e&&(o[0]=e.readUnsignedShort(),o[1]=e.readUnsignedShort(),o[2]=e.readUnsignedShort(),o[3]=e.readUnsignedShort(),o[4]=e.readUnsignedShort()),l[p]=o}}},e.prototype.initSoulEffectList=function(t){this.soulEffectList=[]},e.prototype.initData=function(e){this.id=e.readUnsignedByte(),this.job=e.readUnsignedByte(),this.circle=e.readUnsignedByte(),this.level=e.readUnsignedByte(),this.sex=e.readUnsignedByte(),this.titleID=e.readUnsignedByte(),this.battlePower=e.readUnsignedByte(),this.bodyModel=e.readUnsignedByte(),this.weaponModel=e.readUnsignedByte(),this.mountModel=e.readUnsignedByte(),this.wingModel=e.readUnsignedByte();e.readUnsignedByte();this.footprnumberModel=e.readUnsignedByte();for(var i=(e.readUnsignedByte(),e.readUnsignedByte()),n=0;i>n;n++){var s=new t.userItem(e);this.equips.push(s)}for(var a,r={},o=e.readUnsignedByte(),n=0;o>n;n++){a=new Array(5);var l=e.readUnsignedByte();e&&(a[0]=e.readUnsignedShort(),a[1]=e.readUnsignedShort(),a[2]=e.readUnsignedShort(),a[3]=e.readUnsignedShort(),a[4]=e.readUnsignedShort()),r[l]=a}},e}();t.PlayerEquipInfo=e,__reflect(e.prototype,"app.PlayerEquipInfo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.lastIndex=0,i.pageIndex=0,i.achieveArrList=new eui.ArrayCollection,i.curAttribArr=new eui.ArrayCollection,i.nextAttribArr=new eui.ArrayCollection,i.skinName="AchievementViewSkin",i.name="AchievementView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System50),this.showAchievementList(),this.txtMyCount.text=t.LanguageUtils.language_Achievement_TxtPopularity,this.txtCurAtt.text=t.LanguageUtils.language_Achievement_TxtCurAtt,this.txtNextAtt.text=t.LanguageUtils.language_Achievement_TxtNextAtt},i.prototype.bindTabBar=function(){this.tabBar.itemRenderer=t.GuildTarBtnView;var e=new eui.ArrayCollection(t.LanguageUtils.language_Achievement_TabText);this.tabBar.dataProvider=e},i.prototype.bindOptTabBar=function(){var e=t.GlobalConfig.AchievePageConfig,i=[];for(var n in e)i.push(e[n]);this.optTab.itemRenderer=t.AchieveOptTarBtnItemView;var s=new eui.ArrayCollection(i);this.optTab.dataProvider=s,e=null},i.prototype.showAchievementList=function(){this.listAchieve.useVirtualLayout=!0,this.listAchieve.dataProvider=this.achieveArrList,this.listAchieve.itemRenderer=t.AchievementItemView},i.prototype.updateAchieveItem=function(){var e=t.AchievementMgr.ins().getAchievementGiftData();if(1==e.errorCode)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Achievement_GetGiftFail);var i=this.optTab.selectedItem.id;t.AchievementMgr.ins().sendAchievementList(i)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(this.bindTabBar(),this.bindOptTabBar(),t.MouseScroller.bind(this.scroller),this.observe(t.AchievementMgr.ins().post_AchievemnetInfo,this.updateData),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateCountData),this.observe(t.AchievementMgr.ins().post_AchievemnetResult,this.updateAchieveItem),this.observe(t.AchievementMgr.ins().post_AchieveGetMedalData,this.initMadel),this.observe(t.AchievementMgr.ins().post_AchieveMedalUpLevel,this.initMadel),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.optTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onAchieveBarItemTap,this),this.addTouchEvent(this.btnUp,this.onClick),this.addTouchEvent(this.shopBtn,this.onClick),this.lastIndex=null==e[0]?0:e[0],this.pageIndex=null==e[1]?0:e[1],this.tabBar.selectedIndex=this.lastIndex,this.optTab.selectedIndex=this.pageIndex,this.setShowContent(this.lastIndex),this.lastIndex<1){var n=this.optTab.selectedItem.id;t.AchievementMgr.ins().sendAchievementList(n)}},i.prototype._DoRefresh=function(){this.achieveArrList.removeAll(),this.scroller.stopAnimation(),this.scroller.viewport.validateNow(),this.scroller.viewport.scrollV=0,this.listAchieve.validateNow(),this.listAchieve.scrollV=0
},i.prototype.updateData=function(){this.achieveArrList.source=t.AchievementMgr.ins().getAchievementList()},i.prototype.setShowContent=function(t){for(var e=0;2>e;e++)this["gp_"+e].visible=!1,e==t&&(this["gp_"+e].visible=!0)},i.prototype.onAchieveBarItemTap=function(e){var i=this.optTab.selectedItem.id;this._DoRefresh(),t.AchievementMgr.ins().sendAchievementList(i)},i.prototype.onBarItemTap=function(e){this.lastIndex=e.itemIndex,this.setShowContent(this.lastIndex),1==this.lastIndex&&t.AchievementMgr.ins().sendMedalGetData()},i.prototype.onClick=function(e){e.currentTarget==this.btnUp?t.AchievementMgr.ins().sendMedalUpLevel():t.ViewManager.ins().open(t.ShopView,8,1)},i.prototype.updateCountData=function(){var e=t.EntityMgr.ins().getPayer.propSet.getPopularity();this.lbCount.text=e+""},i.prototype.updateItem=function(t,e){var i={type:0,id:e,count:0};t.data=i},i.prototype.initMadel=function(){var e=t.EntityMgr.ins().getPayer.propSet.getPopularity();this.lbCount.text=e+"";var i=t.AchievementMgr.ins().curMedalLevel,n=t.GlobalConfig.MedalConfig[i];if(n){var s=t.GlobalConfig.StdItems[n.medal];s?(this.lbCurItem.text=s.name,this.updateItem(this.curItem,s.id)):this.curItem.data=null,s=t.GlobalConfig.StdItems[n.nextmedal],s?(this.lbNextItem.text=s.name,this.updateItem(this.nextItem,s.id)):(this.nextItem.data=null,this.lbNextItem.text="")}var a=t.EntityMgr.ins().getPayer,r=a.propSet.getZSLevel(),o=a.propSet.getLevel(),l=t.GlobalData.sectionOpenDay,h=0==n.medal?n.nextmedal:n.medal;this.curAttribArr.source=t.AchievementMgr.ins().getMedalAttrib(h,!1,n.medal>0),this.nextAttribArr.source=t.AchievementMgr.ins().getMedalAttrib(n.nextmedal,!0,!0),this.gCurList.itemRenderer=t.MedalAttrItemCurView,this.gCurList.dataProvider=this.curAttribArr,this.gNextList.itemRenderer=t.MedalAttrItemNextView,this.gNextList.dataProvider=this.nextAttribArr,this.nextAttribArr.length<=0&&(this.txt_max_lev.text=t.LanguageUtils.language_Achieve_Medal_MaxLevel_text);var p=new eui.ArrayCollection;p.source=n.needitem,this.gUpNeedList.itemRenderer=t.AchieveDetailItemView,this.gUpNeedList.dataProvider=p,this.gUpList.itemRenderer=t.MedalUpItemCurView;var u,c=new eui.ArrayCollection,g=[],d=t.StringUtils.replace(t.LanguageUtils.language_Achieve_Medal_NeedLevel_text,n.nextlevel);null!=n.nextlevel&&(u=new t.MedalUpData,u.id=n.nextlevel,u.content=d,u.type=0,u.state=o>=n.nextlevel?1:0,g.push(u));var m=t.StringUtils.replace(t.LanguageUtils.language_Achieve_Medal_OpenDay_text,n.openday);null!=n.openday&&(u=new t.MedalUpData,u.id=n.openday,u.content=m,u.type=0,u.state=l>=n.openday?1:0,g.push(u));var f=t.StringUtils.replace(t.LanguageUtils.language_Achieve_Medal_CostCircleLevel_text,n.circle);null!=n.circle&&(u=new t.MedalUpData,u.id=n.circle,u.content=f,u.type=0,u.state=r>=n.circle?1:0,g.push(u)),t.AchievementMgr.ins().achievesState.length>0&&(g=g.concat(t.AchievementMgr.ins().achievesState)),c.source=g,this.gUpList.dataProvider=c},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.scroller),this.dragDropUI.destroy(),this.dragDropUI=null,this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.optTab.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onAchieveBarItemTap,this),this.removeTouchEvent(this.btnUp,this.onClick),this.removeTouchEvent(this.shopBtn,this.onClick);this.listAchieve.numChildren>0;){var s=this.listAchieve.getChildAt(0);s.destroy(),this.listAchieve.removeChild(s),s=null}for(this.curAttribArr.removeAll(),this.nextAttribArr.removeAll(),this.achieveArrList.removeAll();this.gpAll.numChildren>0;){var s=this.gpAll.getChildAt(0);s&&(s=null),this.gpAll.removeChildAt(0)}this.gpAll=null},i}(t.BaseEuiView);t.AchievementView=e,__reflect(e.prototype,"app.AchievementView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="MultiVersionViewSkin",i.name="MultiVersionView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_Common_250)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.GlobalConfig.ThreeClientConfig,s=[];for(var a in n)0!=n[a].IsShow&&s.push(n[a]);this.optTab.dataProvider=new eui.ArrayCollection(s),this.optTab.itemRenderer=t.TradeLineTabView,this.optTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.addTouchEvent(this.btnCopy,this.onClick),this.optTab.selectedIndex=0,this.onBarItemTap(null)},i.prototype.onClick=function(){var e=this.optTab.selectedItem;if(gamelib.DeviceUtils.IsNative)return void Main.Native_onCopy(e.Address);var i=document.createElement("input");i.value=e.Address,document.body.appendChild(i),i.select(),i.setSelectionRange(0,i.value.length),document.execCommand("Copy"),document.body.removeChild(i),t.UserTips.ins().showUITips(e.ButtonTips)},i.prototype.onBarItemTap=function(t){var e=this.optTab.selectedItem;this.imgBg.source=e.BgPicture,e.ButtonName?(this.btnCopy.icon=e.ButtonName,this.btnCopy.visible=!0):this.btnCopy.visible=!1,e.ButtonPos?this.btnCopy.y=e.ButtonPos.y:this.btnCopy.y=430},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.optTab.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this)},i}(t.BaseEuiView);t.MultiVersionView=e,__reflect(e.prototype,"app.MultiVersionView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var QatEnum;!function(t){t[t.qatEquipment=0]="qatEquipment",t[t.qatMoney=1]="qatMoney",t[t.qatBindMoney=2]="qatBindMoney",t[t.qatBindYb=3]="qatBindYb",t[t.qatYuanbao=4]="qatYuanbao",t[t.qatExp=5]="qatExp",t[t.qatCircleSoul=6]="qatCircleSoul",t[t.qatFlyShoes=7]="qatFlyShoes",t[t.qatBroat=8]="qatBroat",t[t.qaIntegral=9]="qaIntegral",t[t.qaGuildDonate=10]="qaGuildDonate",t[t.qaPrestige=11]="qaPrestige",t[t.qaActivity=12]="qaActivity",t[t.qaMultipleExp=13]="qaMultipleExp",t[t.warNumber=20]="warNumber",t[t.qatDimensionalKey=21]="qatDimensionalKey"}(QatEnum||(QatEnum={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.mfLabel.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+this.data.sName+"</u>")},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null)},i}(t.BaseItemRender);t.NpcItemRender=e,__reflect(e.prototype,"app.NpcItemRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lookRwardsDesc="",t.skinName="NpcSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.list.itemRenderer=t.NpcItemRender,this.transList.itemRenderer=t.NpcItemRender,this.addTouchEvent(this.list,this.onListTouch),this.addTouchEvent(this.transList,this.onGroupTouch),this.observe(t.MainTaskMgr.ins().post_6_2,this.refreshView),this.observe(t.MainTaskMgr.ins().post_6_3,this.refreshView),this.observe(t.MainTaskMgr.ins().post_6_4,this.refreshView)},i.prototype.onGroupTouch=function(e){if(this.transList.selectedItem){var i=t.EntityMgr.ins().getPayer;if(i.propSet.getLevel()<this.transList.selectedItem.nLevel)return void t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_NPC1,[this.transList.selectedItem.nLevel]));if(i.propSet.getZSLevel()<this.transList.selectedItem.zsLevel)return void t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_NPC2,[this.transList.selectedItem.zsLevel]));if(t.GlobalData.sectionOpenDay<this.transList.selectedItem.openDay)return void t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_NPC3,[this.transList.selectedItem.openDay]));var n="",s=void 0,a=void 0;for(var r in this.transList.selectedItem.Consumelist){if(s=this.transList.selectedItem.Consumelist[r],t.CurrencyUtils.getCurrency(s.type,s.id)<s.count){var o=t.CurrencyUtils.getCurrencyNameIcon(s.type,s.id);return void t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips58,o[0]))}this.transList.selectedItem.isTips&&(a=t.CurrencyUtils.getCurrencyNameIcon(s.type,s.id),a&&(n+=a[0]+"x"+s.count+","))}if(""==n)t.MoveMgr.ins().send_1_6(this.recog,this.transList.selectedItem.id),t.ViewManager.ins().close(this);else{n=t.StringUtils.replace(t.LanguageUtils.language_TransmitConsume,[n]);var l=this;t.CautionView.show(n,function(){t.MoveMgr.ins().send_1_6(l.recog,l.transList.selectedItem.id),t.ViewManager.ins().close(this)},this)}}},i.prototype.onListTouch=function(e){if(this.list.selectedItem){var i=this.list.selectedItem.info;if(1==i.funcType)t.DefaultMgr.ins().s_0_5(this.recog,i.id),t.ViewManager.ins().close(this);else if(2==i.funcType)t.ViewManager.ins().openViewId(i.param1,this.recog,i.id),t.ViewManager.ins().close(this);else if(3==i.funcType){var n=t.EntityMgr.ins().getPayer,s=new eui.ArrayCollection,a=void 0;for(var r in i.param1)if(a=t.GlobalConfig.NpcTransConf[i.param1[r]]){if(n.propSet.getLevel()<a.displayLevel||n.propSet.getZSLevel()<a.displayZsLevel||t.GlobalData.sectionOpenDay<a.displayDay)continue;s.addItem(a)}this.transList.dataProvider=s,this.transList.visible=!0,this.list.visible=!1}else if(4==i.funcType)t.ViewManager.ins().open(t.TaskInfoWin,i.param1,i.param2),this.refreshView();else if(5==i.funcType){var o=t.GlobalConfig.ShowActivityidConfig[i.param1];if(o){for(var l in o.actIDArr){var h=o.actIDArr[l],p=t.ActvityMgr.ins().getActivityInfo(h);if(p){var u=t.GlobalConfig.BagRemainConfig[1];if(u){var c=t.BagMgr.ins().getBagCapacity(u.bagremain);return void(c?(t.ActvityMgr.ins().send_25_1(h,i.param2),t.ActvityMgr.ins().send_25_2(h),t.ViewManager.ins().close(this)):t.UserTips.ins().showUITips(u.bagtips))}}}t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips62)}}else 6==i.funcType&&(t.ViewManager.ins().isShow(i.param2)&&t.ViewManager.ins().close(i.param2),t.ViewManager.ins().open(i.param2,i.param3),t.ViewManager.ins().close(this))}},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.recog=e[0],this.propSet=e[1],this.transList.visible=!1,this.lookRewardLab.text="",this.lookRewardLab.visible=!1,this.lookRwardsDesc="",this.addTouchEvent(this.lookRewardLab,this.openRewardTips),this.observe(t.ActvityMgr.ins().post_TowerBonusNum,this.refreshTalkGiftNum),this.refreshView()},i.prototype.openRewardTips=function(e){if(""!=this.lookRwardsDesc){t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this);var i=e.currentTarget,n=i.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_NPCLOOKREWARDS,this.lookRwardsDesc,{x:n.x+i.width/2,y:n.y+i.height/2})}},i.prototype.onCloseMenu=function(){t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),t.UserTips.ins().closeTips()},i.prototype.isTaskInfo=function(){var e=t.GlobalConfig.Npc[this.propSet.getACTOR_ID()];if(e&&e.funcGroup){var i=void 0;for(var n in e.funcGroup)if(i=t.GlobalConfig.NpcFunctions[e.funcGroup[n]],i&&4==i.funcType){var s=t.MainTaskMgr.ins().taskInfo[i.param1];if(s&&s.taskState==i.param2)return!0}}return!1},i.prototype.refreshView=function(){var e=t.GlobalConfig.Npc[this.propSet.getACTOR_ID()];if(e){this.npcCfg=e,this.npcName.text=e.name,e.talk&&""!=e.talk?this.descLabel.textFlow=t.TextFlowMaker.generateTextFlow(e.talk):t.DisplayUtils.removeFromParent(this.descLabel),e.lookRewardStr&&(this.lookRewardLab.visible=!0,this.lookRewardLab.textFlow=t.TextFlowMaker.generateTextFlow(e.lookRewardStr),this.lookRwardsDesc=e.lookRewardDesc+"");var i=1,n=t.EntityMgr.ins().getPayer;if(n&&n.propSet&&(i=n.propSet.getLevel()),e.funcGroup){var s=void 0,a=[];if(25>i&&this.isTaskInfo()){for(var r in e.funcGroup)if(s=t.GlobalConfig.NpcFunctions[e.funcGroup[r]],s&&4==s.funcType){var o=t.MainTaskMgr.ins().taskInfo[s.param1];if(o&&o.taskState==s.param2){var l=t.GlobalConfig.TaskDisplayConfig[o.taskID][o.taskState];l&&a.push({sName:l.NpcName,info:s})}}}else for(var h=0;h<e.funcGroup.length;h++)if(s=t.GlobalConfig.NpcFunctions[e.funcGroup[h]])if(1==s.funcType){var p=t.GlobalConfig.ShopnameConfig[s.param1];p&&a.push({sName:p.shopname,info:s})}else if(2==s.funcType){var u=t.GlobalConfig.FunExhibitionConfig[s.param1];u&&a.push({sName:u.funName,info:s})}else if(3==s.funcType)a.push({sName:t.LanguageUtils.language_Transmit,info:s});else if(4==s.funcType){var o=t.MainTaskMgr.ins().taskInfo[s.param1];if(o&&o.taskState==s.param2){var l=t.GlobalConfig.TaskDisplayConfig[o.taskID][o.taskState];l&&a.push({sName:l.NpcName,info:s})}}else if(5==s.funcType){var c=t.GlobalConfig.ShowActivityidConfig[s.param1];c&&(a.push({sName:c.btnName,info:s}),12==c.actIDArr[0]&&t.ActvityMgr.ins().send_25_1(t.ActvityMgr.ins().currentActId,t.Operate.cGetBonusNum))}else 6==s.funcType&&a.push({sName:s.param1,info:s});this.transList&&0==this.transList.visible&&(this.list.visible=!0,this.list.dataProvider=new eui.ArrayCollection(a))}}},i.prototype.refreshTalkGiftNum=function(){if(this.npcCfg)if(this.npcCfg.talk&&""!=this.npcCfg.talk){var e=t.StringUtils.replace(this.npcCfg.talk,t.ActvityMgr.ins().towerBonusNum);this.descLabel.textFlow=t.TextFlowMaker.generateTextFlow(e)}else t.DisplayUtils.removeFromParent(this.descLabel)},i.prototype.closeView=function(){},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.onCloseMenu(),this.dragDropUI.destroy(),this.npcCfg=null,this.removeTouchEvent(this.list,this.onListTouch),this.removeTouchEvent(this.transList,this.onGroupTouch)},i}(t.BaseEuiView);t.NpcView=e,__reflect(e.prototype,"app.NpcView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ShabakRewardsWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.rewardsList.itemRenderer=t.ItemBase,this.receiveLab.textFlow=t.TextFlowMaker.generateTextFlow("<a><u>"+t.LanguageUtils.language_Wlelfare_Text2+"<u></a>")},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.observe(t.GuildMgr.ins().post_10_26,this.updateName),this.addTouchEvent(this.receiveLab,this.onClick),this.addTouchEvent(this.btn_close,this.onClick),t.GuildMgr.ins().send_10_25();var n=t.GlobalConfig.NoticeConfig[4];n&&(this.rewardsList.dataProvider=new eui.ArrayCollection(n.showreward))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.receiveLab:t.GuildMgr.ins().send_10_24();break;case this.btn_close:t.ViewManager.ins().close(this)}},i.prototype.updateName=function(e){""==e[0]?this.playerName.text=t.LanguageUtils.language_Omission_txt89:this.playerName.text=e[0]+"",""==e[1]?this.guildName.text=t.LanguageUtils.language_Omission_txt89:this.guildName.text=e[1]+""},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.receiveLab,this.onClick),this.removeTouchEvent(this.btn_close,this.onClick)},i}(t.BaseEuiView);t.ShabakRewardsWin=e,__reflect(e.prototype,"app.ShabakRewardsWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="WashRedNameViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.setText()},i.prototype.setText=function(){this.txt0.text=t.LanguageUtils.language_Wash_txt0,this.txt1.text=t.LanguageUtils.language_Wash_txt0,this.goldWashBtn0.label=t.LanguageUtils.language_System49,this.goldWashBtn1.label=t.LanguageUtils.language_System49},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setParent(this);var n=e[0];this.recog=n[0],this.npcId=n[1],this.dragDropUI.setTitle(t.LanguageUtils.language_System49),this.addTouchEvent(this.goldWashBtn0,this.onClick),this.addTouchEvent(this.goldWashBtn1,this.onClick),this.observe(t.OtherMgr.ins().post_26_78,this.updateData),this.initConfData()},i.prototype.initConfData=function(){for(var e=t.GlobalConfig.NpcFunctions[this.npcId],i=e.param3,n=0;n<i.length;n++){var s=i[n],a=t.GlobalConfig.NumericalIcon[s.consume.type];this["goldLb"+n].text=""+a.name+t.LanguageUtils.language_System49,this["goldAddCionLb"+n].text=s.consume.count,this["goldPkvalLb"+n].text=""+t.LanguageUtils.language_WashRedName_text2+s.pkval+t.LanguageUtils.language_WashRedName_text3,this["money1Icon"+n].source=a.icon.toString(),s.limitday>-1?this["goldDayNum"+n].text=t.LanguageUtils.language_Guild_DayNum_txt+(t.OtherMgr.ins().washRedNameCount+"/"+s.limitday):this["goldDayNum"+n].text=t.LanguageUtils.language_WashRedName_text4}},i.prototype.updateData=function(){this.initConfData()},i.prototype.onClick=function(e){e.currentTarget==this.goldWashBtn0?t.DefaultMgr.ins().s_0_5_1(this.recog,this.npcId,0):t.DefaultMgr.ins().s_0_5_1(this.recog,this.npcId,1)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.goldWashBtn0,this.onClick),this.removeTouchEvent(this.goldWashBtn1,this.onClick),this.dragDropUI.destroy()},i}(t.BaseEuiView);t.WashRedNameView=e,__reflect(e.prototype,"app.WashRedNameView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main);var i=function(){function t(){}return t}();t.WashRedNameCof=i,__reflect(i.prototype,"app.WashRedNameCof")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._init=!1,t.actId=10394,t._rewardIndex=0,t._rewardTime=0,t._rewardGetTime=0,t._rewardNumMax=0,t._isCanGet=!1,t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.init=function(){this._init||(this._init=!0,t.MessageCenter.addListener(t.ActvityMgr.ins().post_25_2,this.updateInfo,this),t.MessageCenter.addListener(t.ActvityMgr.ins().post_25_4,this.updateInfo,this),t.MessageCenter.addListener(t.DefaultMgr.ins().post_updateLevel,this.updateInfo,this)),this.updateInfo()},i.prototype.updateInfo=function(){t.TimerManager.ins().remove(this.updateGetTime,this);var e=t.ActvityMgr.ins().getActivityInfo(this.actId),i=t.GlobalConfig.ActivityPayConf[1][306];if(e&&i&&t.ViewManager.ins().isCheckOpen(i.openlimit)){var n=t.ActvityMgr.ins().getActivityConfigById(this.actId),s=e.info.index;if(s<=this.rewardNumMax){var a=n.reward[s];if(a){var r=e.info.time,o=r+Math.floor(egret.getTimer()/1e3)>=a.time;!this._isCanGet&&o&&t.ViewManager.ins().open(t.OnlineRewardsTipsView),this._rewardIndex=s,this._rewardTime=r,this._rewardGetTime=a.time,this._isCanGet=o,t.TimerManager.ins().doTimer(1e3,0,this.updateGetTime,this)}}}},i.prototype.updateGetTime=function(){var e=this._rewardTime+Math.floor(egret.getTimer()/1e3)>this._rewardGetTime;!this._isCanGet&&e&&(this._isCanGet=e,t.ActvityMgr.ins().send_25_2(this.actId),t.ViewManager.ins().open(t.OnlineRewardsTipsView),t.TimerManager.ins().remove(this.updateGetTime,this))},Object.defineProperty(i.prototype,"rewardNumMax",{get:function(){if(!this._rewardNumMax){var e=t.ActvityMgr.ins().getActivityConfigById(this.actId);for(var i in e.reward){var n=parseInt(i);n>this._rewardNumMax&&(this._rewardNumMax=n)}}return this._rewardNumMax},enumerable:!0,configurable:!0}),i}(t.BaseClass);t.OnlineRewardsManager=e,__reflect(e.prototype,"app.OnlineRewardsManager")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="OnlineRewardsTipsViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.descLabel.text=t.LanguageUtils.language_Common_282,this.addTouchEvent(this.btn_close,this.onClick),this.addTouchEvent(this.okButton,this.onClick),this.addTouchEvent(this.cancelButton,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btn_close:case this.cancelButton:t.ViewManager.ins().close(this);break;case this.okButton:t.ViewManager.ins().open(t.ActivityPayView,[1,"apay_biaoti_jchd",t.OnlineRewardsManager.ins().actId]),t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.btn_close,this.onClick),this.removeTouchEvent(this.okButton,this.onClick),this.removeTouchEvent(this.cancelButton,this.onClick)},i}(t.BaseEuiView);t.OnlineRewardsTipsView=e,__reflect(e.prototype,"app.OnlineRewardsTipsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.actId=0,t.cdTime=0,t.getTime=0,t.onlineTime=0,t.getTimeNum=0,t.index=0,t.skinName="OnlineRewardsViewSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e[0]&&(this.actId=e[0]),this.redPoint.visible=!1,this.receiveImg.visible=!1,0!=this.actId){var n=t.ActvityMgr.ins().getActivitConf(this.actId);n&&(this.observe(t.ActvityMgr.ins().post_25_2,this.updateView),this.observe(t.ActvityMgr.ins().post_25_4,this.updateView),this.updateView()),this.addTouchEvent(this.getBtn,this.onClick),t.ActvityMgr.ins().send_25_2(this.actId)}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.getBtn:this.getTime<=0?t.ActvityMgr.ins().send_25_1(this.actId,t.Operate.cGetPhaseAward):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips162)}},i.prototype.updateView=function(){t.TimerManager.ins().remove(this.updateGetTime,this),t.TimerManager.ins().remove(this.updateGetTime2,this);var e=t.ActvityMgr.ins().getActivityInfo(this.actId),i=t.ActvityMgr.ins().getActivityConfigById(this.actId);if(e&&e.info)if(this.cdTime=e.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.cdTime&&(this.cdTime+=Math.floor(egret.getTimer()/1e3),this.updateCDTime(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this)),this.index=e.info.index,this.index>t.OnlineRewardsManager.ins().rewardNumMax){this.actTime2.text="",this.getBtn.visible=!1,this.redPoint.visible=!1,this.receiveImg.visible=!0;var n=i.reward[t.OnlineRewardsManager.ins().rewardNumMax];n&&(this.itemData.data=n.awards[0]),this.onlineTime=t.DateUtils.getTodayPassedSecond2()-Math.floor(egret.getTimer()/1e3),this.getTimeNum=t.DateUtils.SECOND_PER_DAY,t.TimerManager.ins().doTimer(1e3,0,this.updateGetTime2,this),this.updateGetTime2()}else{this.receiveImg.visible=!1,this.getBtn.visible=!0;var n=i.reward[this.index];n&&(this.itemData.data=n.awards[0],this.getTimeNum=n.time,this.getTime=this.getTimeNum-(e.info.time+Math.floor(egret.getTimer()/1e3)),this.onlineTime=e.info.time,this.getTime&&t.TimerManager.ins().doTimer(1e3,0,this.updateGetTime,this),this.updateGetTime())}},i.prototype.updateCDTime=function(){var e=this.cdTime-Math.floor(egret.getTimer()/1e3);this.actTime.text=t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.actTime.text="")},i.prototype.updateGetTime=function(){if(this.getTime=this.getTimeNum-(this.onlineTime+Math.floor(egret.getTimer()/1e3)),this.getTime<=0)this.actTime2.text=t.LanguageUtils.language_Common_223,this.redPoint.visible=!0,t.TimerManager.ins().remove(this.updateGetTime,this);else{var e=t.DateUtils.getFormatBySecond(this.getTime,t.DateUtils.TIME_FORMAT_1);this.actTime2.text=t.StringUtils.replace(t.LanguageUtils.language_Common_224,e),this.redPoint.visible=!1}},i.prototype.updateGetTime2=function(){if(this.getTime=this.getTimeNum-(this.onlineTime+Math.floor(egret.getTimer()/1e3)),this.getTime<=0){var e=t.DateUtils.getFormatBySecond(0,t.DateUtils.TIME_FORMAT_1);this.actTime2.text=t.StringUtils.replace(t.LanguageUtils.language_Common_283,e),t.TimerManager.ins().remove(this.updateGetTime2,this)}else{var e=t.DateUtils.getFormatBySecond(this.getTime,t.DateUtils.TIME_FORMAT_1);this.actTime2.text=t.StringUtils.replace(t.LanguageUtils.language_Common_283,e)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().remove(this.updateGetTime,this),this.removeTouchEvent(this.getBtn,this.onClick)},i}(t.BaseEuiView);t.OnlineRewardsView=e,__reflect(e.prototype,"app.OnlineRewardsView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.selectIdx=0,t.skinName="OpenServerGiftWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.OpenServerTabItemView,this.addTouchEvent(this.closeBtn,this.onClick),this.tabBar.addEventListener(egret.Event.CHANGE,this.updatePag,this),this.observe(t.OtherMgr.ins().post_26_28,this.getAllTabList),this.observe(t.ActvityMgr.ins().post_25_1,this.getAllTabList),this.observe(t.ActvityMgr.ins().post_25_2,this.getAllTabList),this.observe(t.ActvityMgr.ins().post_25_3,this.getAllTabList),this.observe(t.ActvityMgr.ins().post_25_4,this.getAllTabList),this.observe(t.ActvityMgr.ins().post_25_5,this.getAllTabList)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.titleImg.source="biaoti_kaifuhaoli",t.MouseScroller.bind(this.btnScroller),this.getAllTabList(),this.updatePag()},i.prototype.getAllTabList=function(){var e=[],i=(t.GlobalData.sectionOpenDay,t.GlobalConfig.ActivityOpenServiceConf);for(var n in i){var s=t.ActvityMgr.ins().getActivityInfo(i[n].actId);s&&t.ViewManager.ins().isCheckOpen(i[n].openlimit)&&e.push(i[n])}this.tabBar.dataProvider=new eui.ArrayCollection(e),this.tabBar.selectedIndex=this.selectIdx<=this.tabBar.dataProvider.length-1?this.selectIdx:0},i.prototype.updatePag=function(){this.selectIdx=this.tabBar.selectedIndex;var e=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(e&&e.view){this.curPanel&&(t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel.close());var i=egret.getDefinitionByName(e.view);i&&(this.curPanel=new i,this.curPanel&&(this.curPanel.left=0,this.curPanel.right=0,this.curPanel.top=0,this.curPanel.bottom=0,this.infoGrp.addChild(this.curPanel),this.curPanel.open(e.actId)))}e=null},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.btnScroller),this.removeTouchEvent(this.closeBtn,this.onClick),this.tabBar.removeEventListener(egret.Event.CHANGE,this.updatePag,this),this.selectIdx=null,this.curPanel&&(t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel.close())},i}(t.BaseEuiView);t.OpenServerGiftWin=e,__reflect(e.prototype,"app.OpenServerGiftWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.redDot.visible=!1,this.labelDisplay.text=this.data.name+"";var e=t.ActvityMgr.ins().getActivityInfo(this.data.actId);if(this.data.redpoint){if(e&&e.info){if(e.id==t.ActvityInfoEnum.investment&&1==e.info.IsBuy)return void(this.redDot.visible=0!=e.redDot);this.redDot.visible=!0,this.redDot.setRedImg(this.data.redpoint)}}else e&&(this.redDot.visible=0!=e.redDot)},i}(eui.ItemRenderer);t.OpenServerTabItemView=e,__reflect(e.prototype,"app.OpenServerTabItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.data){this.isSelectImg.visible=this.data.isVis,this.openDesc.visible=!1,this.buyImg.visible=!1,this.unopenedImg.visible=!1;var e=t.ActvityMgr.ins().getActivityConfigById(this.data.actID);e&&e[this.data.giftId]&&(this.giftIcon.source=e[this.data.giftId].actlogo+"",this.giftTitle.source=e[this.data.giftId].titleImg+"",1==this.data.state?(this.unopenedImg.visible=!0,this.buyImg.visible=!0):0==this.data.state?(this.unopenedImg.visible=!0,this.openDesc.visible=!0,this.openDesc.text=t.StringUtils.replace(t.LanguageUtils.language_Common_105,e[this.data.giftId].BuyDayLmt)):2==this.data.state)}},i}(t.BaseItemRender);t.OpenServerGiftItemView=e,__reflect(e.prototype,"app.OpenServerGiftItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lastSelected=-1,t.curItemData=null,t.actId=0,t.listInfo=[],t.cdTime=0,t.skinName="OpenServerGiftViewSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.actId=e[0]),this.rewards.itemRenderer=t.ItemBase,this.giftScroller.horizontalScrollBar.autoVisibility=!1,this.giftScroller.horizontalScrollBar.visible=!1,this.giftList.itemRenderer=t.OpenServerGiftItemView,this.arrList=new eui.ArrayCollection,this.giftList.dataProvider=this.arrList,this.giftList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listClick,this),this.observe(t.ActvityMgr.ins().post_25_3,this.updateList),this.observe(t.ActvityMgr.ins().post_25_5,this.updateList),this.addTouchEvent(this.receiveBtn,this.onClick),this.updateList()},i.prototype.updateList=function(){this.listInfo=[];var e=t.GlobalData.sectionOpenDay,i=t.ActvityMgr.ins().getActivityInfo(this.actId),n=t.ActvityMgr.ins().getActivityConfigById(this.actId);if(i&&i.info&&n){this.cdTime=i.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.cdTime&&(this.cdTime+=Math.floor(egret.getTimer()/1e3),this.updateCDTime(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this));for(var s in i.info){var a=i.info[s];n[a.id]&&n[a.id].BuyDayLmt<=e?0==a.times?this.listInfo.push({giftId:a.id,state:1,actID:this.actId,isVis:!1}):this.listInfo.push({giftId:a.id,state:2,actID:this.actId,isVis:!1}):this.listInfo.push({giftId:a.id,state:0,actID:this.actId,isVis:!1})}}this.listInfo.sort(this.sortFun),this.listInfo[0].isVis=!0,this.arrList.replaceAll(this.listInfo),this.lastSelected=0,this.giftList.selectedIndex=this.lastSelected,this.updateView(this.giftList.selectedIndex)},i.prototype.updateCDTime=function(){var e=this.cdTime-Math.floor(egret.getTimer()/1e3);this.actTime.text=""+t.LanguageUtils.language_Common_65+t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.actTime.text="")},i.prototype.sortFun=function(t,e){return t.state>e.state?-1:t.state<e.state?1:t.giftId<e.giftId?-1:t.giftId>e.giftId?1:0},i.prototype.listClick=function(t){0!=t.item.state&&(this.lastSelected>=0&&(this.listInfo[this.lastSelected].isVis=!1),this.lastSelected=this.giftList.selectedIndex,this.curItemData=t.item,this.giftList.dataProvider&&this.lastSelected>-1&&this.lastSelected<this.giftList.dataProvider.length&&(this.listInfo[this.giftList.selectedIndex].isVis=!0),this.arrList.replaceAll(this.listInfo),this.updateView(this.giftList.selectedIndex))},i.prototype.updateView=function(e){this.buyImg.visible=!1,this.receiveBtn.visible=!0;var i=this.listInfo[e],n=t.ActvityMgr.ins().getActivityConfigById(this.actId);if(i&&n)for(var s in n)if(n[s].GiftBoxNum==i.giftId){this.curItemData=i,this.rewards.dataProvider=new eui.ArrayCollection(n[s].award),this.giftIcon.source=n[s].actlogo+"",this.giftDesc.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_106,n[s].price[0].count,n[s].name)),this.giftMoney.text=n[s].price[0].count,1==i.state&&(this.buyImg.visible=!0,this.receiveBtn.visible=!1);
break}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.receiveBtn:this.curItemData&&t.ActvityMgr.ins().send_25_1(this.actId,t.Operate.cBuy,[this.curItemData.giftId])}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.giftList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.listClick,this),t.TimerManager.ins().remove(this.updateCDTime,this),this.removeTouchEvent(this.receiveBtn,this.onClick)},i}(t.BaseEuiView);t.OpenServerGiftView=e,__reflect(e.prototype,"app.OpenServerGiftView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rewards.itemRenderer=t.ItemBase,this.addTouchEvent(this.buyButton,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.buyButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},i.prototype.onTouch=function(e){t.ActvityMgr.ins().send_25_1(this.data.actID,t.Operate.cReceiveInvestment,[this.data.index])},i.prototype.dataChanged=function(){if(this.data){this.buyButton.enabled=!0,this.redPoint.visible=!1,this.curDay.text=this.data.index;var e=t.ActvityMgr.ins().getActivityInfo(this.data.actID);e&&e.info&&(e.info.IsBuy?this.data.isReceive?(this.receiveImg.visible=!0,this.buyButton.visible=!1):(this.receiveImg.visible=!1,this.buyButton.visible=!0,this.data.index<=e.info.LoginDay?(this.redPoint.visible=!0,this.buyButton.label=t.LanguageUtils.language_Wlelfare_Text2,this.buyButton.labelDisplay.textColor=15779990):(this.redPoint.visible=!1,this.buyButton.enabled=!1,this.buyButton.label=t.LanguageUtils.language_Wlelfare_Text1,this.buyButton.labelDisplay.textColor=12171705)):(this.receiveImg.visible=!1,this.buyButton.visible=!1));var i=t.ActvityMgr.ins().getActivityConfigById(this.data.actID);i&&i[this.data.index]&&(this.rewards.dataProvider=new eui.ArrayCollection(i[this.data.index].GiftTable))}},i}(t.BaseItemRender);t.InvestmentItemView=e,__reflect(e.prototype,"app.InvestmentItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.actId=0,t.dayInfo=[],t.cdTime=0,t.buyCdTime=0,t.skinName="InvestmentViewSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e[0]&&(this.actId=e[0]),this.InvestmentArr=new eui.ArrayCollection,this.InvestmentList.itemRenderer=t.InvestmentItemView,this.InvestmentList.dataProvider=this.InvestmentArr,t.MouseScroller.bind(this.InvestmentScroller),this.observe(t.ActvityMgr.ins().post_25_3,this.updateInfo),this.observe(t.ActvityMgr.ins().post_25_5,this.updateInfo),0!=this.actId){var n=t.ActvityMgr.ins().getActivitConf(this.actId);n.description&&(this.actDesc.textFlow=t.TextFlowMaker.generateTextFlow(n.description));var s=t.ActvityMgr.ins().getActivityConfigById(this.actId);for(var a in s)if(s[a]&&s[a].consume){this.buyBannerNum.text=this.buyBannerNum2.text=s[a].consume[0].count;break}}this.addTouchEvent(this.receiveBtn,this.onClick),this.updateInfo()},i.prototype.updateInfo=function(){this.buyGrp.visible=!1,this.InvestmentScroller.height=372,this.dayInfo=[];var e=t.ActvityMgr.ins().getActivityInfo(this.actId);if(e&&e.info){if(this.cdTime=e.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.cdTime&&(this.cdTime+=Math.floor(egret.getTimer()/1e3),this.updateCDTime(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this)),!e.info.IsBuy){this.buyGrp.visible=!0,this.InvestmentScroller.height=245,this.buyText.visible=!0;var i=e.info.BuyTime-egret.getTimer()>>0;i>0&&(this.buyCdTime=e.info.BuyTime,this.updateBuyTime(),t.TimerManager.ins().remove(this.updateBuyTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateBuyTime,this))}var n=t.ActvityMgr.ins().getActivityConfigById(this.actId),s=7;n&&(s=Object.keys(n).length+2);for(var a=2;s>a;a++)this.dayInfo.push({isReceive:t.MathUtils.getValueAtBit(e.info.DayInfo,a),index:a-1,actID:this.actId});this.InvestmentArr.replaceAll(this.dayInfo)}},i.prototype.updateCDTime=function(){var e=this.cdTime-Math.floor(egret.getTimer()/1e3);this.actTime.text=t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.actTime.text="")},i.prototype.updateBuyTime=function(){var e=this.buyCdTime-egret.getTimer();this.buyTime.text=t.DateUtils.getFormatBySecond(Math.floor(e/1e3),t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateBuyTime,this),this.buyTime.text="")},i.prototype.onClick=function(e){switch(e.currentTarget){case this.receiveBtn:0!=this.actId&&t.ActvityMgr.ins().send_25_1(this.actId,t.Operate.cBuyInvestment)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().remove(this.updateBuyTime,this),t.MouseScroller.unbind(this.InvestmentScroller),this.removeTouchEvent(this.receiveBtn,this.onClick)},i}(t.BaseEuiView);t.InvestmentView=e,__reflect(e.prototype,"app.InvestmentView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.receive.visible=1==this.data.receiveState,this.redPoint.visible=1==this.data.redInfo},e.prototype.setSelect=function(t){this.isSelect.visible=t},e.prototype.setCurDay=function(t){this.dayImg.source="qr_t1_"+t},e}(t.BaseItemRender);t.SevenDayItemView=e,__reflect(e.prototype,"app.SevenDayItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.lastIndex=0,t.curIndex=0,t.actId=0,t.dayInfo=[],t.redPointInfo=[],t.cdTime=0,t.skinName="SevenDayLoginViewSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.actId=e[0]),this.observe(t.ActvityMgr.ins().post_25_3,this.updateInfo),this.observe(t.ActvityMgr.ins().post_25_5,this.updateInfo),t.ActvityMgr.ins().send_25_2(this.actId),this.rewardList.itemRenderer=t.ItemBase,this.addTouchEvent(this.receiveBtn,this.reveiveFun);for(var n=1;7>=n;n++)this["dayItem"+n].setCurDay(n),this["dayItem"+n].dayIndex=n,this.addTouchEvent(this["dayItem"+n],this.onClick);this.updateInfo()},i.prototype.updateInfo=function(){this.dayInfo=[],this.redPointInfo=[0,0,0,0,0,0,0];var e=t.ActvityMgr.ins().getActivityInfo(this.actId);if(e&&e.info){for(var i=2;8>=i;i++)this.dayInfo.push(t.MathUtils.getValueAtBit(e.info.dayInfo,i));this.curLogin.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_103,e.info.loginDay)),this.cdTime=e.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.cdTime&&(this.cdTime+=Math.floor(egret.getTimer()/1e3),this.updateCDTime(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this));for(var n=0;n<this.redPointInfo.length;n++){var s=t.MathUtils.getValueAtBit(e.redDot,n+2);if(1==s){this.redPointInfo[n]=s;break}}}for(var a=7,r=0;r<this.dayInfo.length;r++)if(0==this.dayInfo[r]){a=r+1;break}for(var o=0;7>o;o++)this["dayItem"+(o+1)].data={receiveState:this.dayInfo[o],redInfo:this.redPointInfo[o]};this.lastIndex=this.curIndex,this.curIndex=a,this.refeshView(this.curIndex)},i.prototype.onClick=function(t){var e=t.currentTarget.dayIndex;this.lastIndex=this.curIndex,this.curIndex=e,this.refeshView(this.curIndex)},i.prototype.refeshView=function(e){this.receiveBtn.visible=!0,this.receiveImg.visible=!1,0!=this.lastIndex&&this["dayItem"+this.lastIndex].setSelect(!1),this["dayItem"+e].setSelect(!0),this.dayImg.source="qr_t2_"+e;var i=t.ActvityMgr.ins().getActivityConfigById(this.actId);i&&i[e]&&(this.rewardList.dataProvider=new eui.ArrayCollection(i[e].GiftTable));var n=this.dayInfo[e-1];1==n&&(this.receiveBtn.visible=!1,this.receiveImg.visible=!0)},i.prototype.reveiveFun=function(){if(0!=this.curIndex){var e=t.GlobalConfig.BagRemainConfig[7];if(e){var i=t.BagMgr.ins().getBagCapacity(e.bagremain);i?t.ActvityMgr.ins().send_25_1(this.actId,t.Operate.cBuy,[this.curIndex]):t.UserTips.ins().showUITips(e.bagtips)}}},i.prototype.updateCDTime=function(){var e=this.cdTime-Math.floor(egret.getTimer()/1e3);this.actTime.text=t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.actTime.text="")},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.removeTouchEvent(this.receiveBtn,this.reveiveFun);for(var s=1;7>=s;s++)this.removeTouchEvent(this["dayItem"+s],this.onClick);t.TimerManager.ins().remove(this.updateCDTime,this),this.dayInfo=null},i}(t.BaseEuiView);t.SevenDayLoginView=e,__reflect(e.prototype,"app.SevenDayLoginView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.redDot.visible=!1,this.labelDisplay.text=this.data.name+"";var e=t.ActvityMgr.ins().getActivityInfo(this.data.actId);e&&e.info&&(e&&0!=e.redDot&&(this.redDot.visible=!0,this.redDot.setRedImg(1)),1==t.OpenServerSportsRuleIcon.disposableredpointObj[this.data.actId]&&(this.redDot.visible=!0,this.redDot.setRedImg(1)),this.data.redpoint&&(this.redDot.visible=!0,this.redDot.setRedImg(this.data.redpoint)))},i}(eui.ItemRenderer);t.OpenServerSportsTabItemView=e,__reflect(e.prototype,"app.OpenServerSportsTabItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.selectIdx=0,t.actIdIdx=0,t.firstEnter=!1,t.skinName="OpenServerSportsWinSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabBar.itemRenderer=t.OpenServerSportsTabItemView,this.addTouchEvent(this.closeBtn,this.onClick),this.tabBar.addEventListener(egret.Event.CHANGE,this.updatePag,this),this.observe(t.OtherMgr.ins().post_26_28,this.getAllTabList),this.observe(t.ActvityMgr.ins().post_25_1,this.getAllTabList),this.observe(t.ActvityMgr.ins().post_25_2,this.getAllTabList),this.observe(t.ActvityMgr.ins().post_25_3,this.getAllTabList),this.observe(t.ActvityMgr.ins().post_25_4,this.getAllTabList),this.observe(t.ActvityMgr.ins().post_25_5,this.getAllTabList)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.firstEnter=!1,e&&e[0]&&(this.actIdIdx=e[0]),t.MouseScroller.bind(this.btnScroller),this.curPanel||(this.curPanel=new t.OpenServerSportsView,this.curPanel.left=0,this.curPanel.right=0,this.curPanel.top=0,this.curPanel.bottom=0,this.infoGrp.addChild(this.curPanel),this.curPanel.open()),this.getAllTabList(),this.updateDisposableredpoint()},i.prototype.getAllTabList=function(){var e=[],i=t.GlobalConfig.ActivityCompetitionConf;for(var n in i){var s=t.ActvityMgr.ins().getActivityInfo(i[n].actId);s&&t.ViewManager.ins().isCheckOpen(i[n].openlimit)&&e.push(i[n])}if(this.tabBar.dataProvider=new eui.ArrayCollection(e),this.tabBar.validateNow(),this.firstEnter||0==this.actIdIdx)this.tabBar.selectedIndex=this.selectIdx<=this.tabBar.dataProvider.length-1?this.selectIdx:0;else{this.firstEnter=!0;for(var n=0;n<this.tabBar.dataProvider.length;n++){var a=this.tabBar.dataProvider.getItemAt(n);if(a.actId==this.actIdIdx){this.tabBar.selectedIndex=n;break}}}this.updateViewInfo()},i.prototype.updateViewInfo=function(){this.selectIdx=this.tabBar.selectedIndex;var t=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);t&&this.curPanel&&this.curPanel.updateView(t.actId)},i.prototype.updatePag=function(){this.selectIdx=this.tabBar.selectedIndex;var t=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);t&&this.curPanel&&this.curPanel.updateViewInfo(t.actId),this.updateDisposableredpoint()},i.prototype.updateDisposableredpoint=function(){var e=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(e&&1==t.OpenServerSportsRuleIcon.disposableredpointObj[e.actId]){t.OpenServerSportsRuleIcon.disposableredpointObj[e.actId]=2,t.EventManager.ins().sendEvent(t.MainEvent.UPDATE_DISPOSABLE_RED,29);var i=this.tabBar.getElementAt(this.selectIdx);i&&i.dataChanged()}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.btnScroller),this.removeTouchEvent(this.closeBtn,this.onClick),this.tabBar.removeEventListener(egret.Event.CHANGE,this.updatePag,this),this.curPanel&&(t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel.close())},i}(t.BaseEuiView);t.OpenServerSportsWin=e,__reflect(e.prototype,"app.OpenServerSportsWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.rewards.itemRenderer=t.ItemBase,this.addTouchEvent(this.buyButton,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.buyButton,this.onTouch)},i.prototype.onTouch=function(e){t.ActvityMgr.ins().send_25_1(this.data.activityID,t.Operate.cSportsReveive,[this.data.levelIndex])},i.prototype.dataChanged=function(){if(this.buyButton.y=22,this.redPoint.y=20,this.data){this.imgBg.source=this.data.bgIdx%2==0?"bg_quyu_1":"bg_quyu_2",this.receiveImg.visible=!1,this.buyButton.visible=!0,this.buyButton.enabled=!0,this.redPoint.visible=!1,this.taskValue.visible=this.curValue.visible=!1,this.taskName.textColor=14724725;var e=t.ActvityMgr.ins().getActivityConfigById(this.data.activityID);if(e&&e[this.data.levelIndex]&&(this.taskName.text=e[this.data.levelIndex].name+"",this.taskValue.visible=e[this.data.levelIndex].showType?!0:!1,this.taskValue.textFlow=e[this.data.levelIndex].showType?t.TextFlowMaker.generateTextFlow(e[this.data.levelIndex].value+""):t.TextFlowMaker.generateTextFlow(""),this.rewards.dataProvider=new eui.ArrayCollection(e[this.data.levelIndex].GiftTable),e[this.data.levelIndex].scheduletips)){this.buyButton.y=10,this.redPoint.y=8,this.curValue.visible=!0;var i=this.data.curValue>=e[this.data.levelIndex].value?2682369:15926028;this.curValue.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+i+"&T:"+this.data.curValue+"||C:0xe5ddcf&T:/"+e[this.data.levelIndex].value+"|")}0==this.data.reveiveState?(this.taskName.textColor=8420211,this.buyButton.enabled=!1,this.buyButton.label=t.LanguageUtils.language_Wlelfare_Text1):1==this.data.reveiveState?(this.buyButton.label=t.LanguageUtils.language_Wlelfare_Text2,this.redPoint.visible=!0):2==this.data.reveiveState&&(this.receiveImg.visible=!0,this.buyButton.visible=this.curValue.visible=!1)}},i}(t.BaseItemRender);t.OpenServerSportsItemView=e,__reflect(e.prototype,"app.OpenServerSportsItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.actId=0,t.cdTime=0,t.skinName="OpenServerSportsViewSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e[0]&&(this.actId=e[0]),this.curValue.text="",t.MouseScroller.bind(this.sportsScroller),this.sportsArr=new eui.ArrayCollection,this.sportsList.itemRenderer=t.OpenServerSportsItemView,this.sportsList.dataProvider=this.sportsArr,this.sportsScroller.viewport.scrollV=0,0!=this.actId){var n=t.ActvityMgr.ins().getActivitConf(this.actId);n&&(this.observe(t.ActvityMgr.ins().post_25_3,this.updateInfo),this.observe(t.ActvityMgr.ins().post_25_4,this.updateInfo),this.sportsName.text=t.LanguageUtils.language_Common_107,this.updateView(this.actId))}},i.prototype.updateInfo=function(){0!=this.actId&&this.updateView(this.actId)},i.prototype.updateViewInfo=function(t){this.sportsScroller.viewport.scrollV=0,this.updateView(t)},i.prototype.updateView=function(e){var i=t.ActvityMgr.ins().getActivitConf(e);this.actDesc.text="",this.descLab.visible=!0,i.description?this.actDesc.textFlow=t.TextFlowMaker.generateTextFlow(i.description):this.descLab.visible=!1,i.bg?this.bgImg.source=i.bg+"_png":this.bgImg.source="kf_jj_bg_png";var n=t.ActvityMgr.ins().getActivityInfo(e),s=t.ActvityMgr.ins().getActivityConfigById(e);if(n&&n.info){n.endTime-1262275200==0?(this.actTime.visible=!1,this.timeLab.visible=!1,this.descLab.y=18,this.actDesc.y=18):(this.actTime.visible=!0,this.timeLab.visible=!0,this.descLab.y=48,this.actDesc.y=48,this.cdTime=n.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.cdTime&&(this.cdTime+=Math.floor(egret.getTimer()/1e3),this.updateCDTime(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this)));var a=[],r=-1,o=0;for(var l in n.info)-1==r&&(r=n.info[l].value),s&&s[n.info[l].index]&&(s[n.info[l].index].displaylimit?n.info[l].value>=s[n.info[l].index].displaylimit&&(o+=1,a.push({activityID:e,reveiveState:n.info[l].state,levelIndex:n.info[l].index,bgIdx:o,curValue:n.info[l].value})):(o+=1,a.push({activityID:e,reveiveState:n.info[l].state,levelIndex:n.info[l].index,bgIdx:o,curValue:n.info[l].value})));for(var h=a.sort(this.sortFun),p=0;p<h.length;p++)h[p].bgIdx=p;this.sportsArr.replaceAll(h),this.curValue.text="";var u=t.ActvityMgr.ins().getActivityConfigById(e);if(-1!=r)for(var p in u)if(u[p].scheduletips){this.curValue.textFlow=t.TextFlowMaker.generateTextFlow(u[p].scheduletips+"  |C:0xE7C590&T:"+r+"|");break}}},i.prototype.sortFun=function(t,e){return 1==t.reveiveState&&2==e.reveiveState?-1:2==t.reveiveState&&1==e.reveiveState?1:0==t.reveiveState&&2==e.reveiveState?-1:2==t.reveiveState&&0==e.reveiveState?1:1==t.reveiveState&&0==e.reveiveState?-1:0==t.reveiveState&&1==e.reveiveState?1:t.levelIndex<e.levelIndex?-1:t.levelIndex>e.levelIndex?1:0},i.prototype.updateCDTime=function(){var e=this.cdTime-Math.floor(egret.getTimer()/1e3);this.actTime.text=t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.actTime.text="")},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.sportsScroller),t.TimerManager.ins().remove(this.updateCDTime,this)},i}(t.BaseEuiView);t.OpenServerSportsView=e,__reflect(e.prototype,"app.OpenServerSportsView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.redDot.visible=!1;var t=this.data;this.pageIndex=t.id,this.labelDisplay.text=t.page,this.setRedDot()},e.prototype.setRedDot=function(){var t="AchievementMgr.post_AchievemnetRedPot",e="AchievementMgr.findPageIndex";this.redDot.param=this.pageIndex,this.redDot.updateShowFunctions=e,this.redDot.showMessages=t},e}(t.BaseItemRender);t.AchieveOptTarBtnItemView=e,__reflect(e.prototype,"app.AchieveOptTarBtnItemView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.OpenServerTreasureWin);t.OpenServerTreasureWin2=e,__reflect(e.prototype,"app.OpenServerTreasureWin2"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.viewType=2,t.prototype.open.apply(this,e)},e}(t.OpenServerTreasureWin);t.OpenServerTreasureWin3=e,__reflect(e.prototype,"app.OpenServerTreasureWin3"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cdTime=0,t._type=0,t.actId=0,t.isHasTimes=!1,t.isFree=!1,t.chouNumber=0,t.skinName="OpenServerTreasureViewSkin",t}return __extends(i,e),i.prototype.open=function(e,i){this._type=e,this.actId=i,this.highScroller.verticalScrollBar.autoVisibility=!1,this.highScroller.verticalScrollBar.visible=!1,this.otherScroller.verticalScrollBar.autoVisibility=!1,this.otherScroller.verticalScrollBar.visible=!1,this.red.visible=!1,this.highList.itemRenderer=t.ItemBase,this.otherList.itemRenderer=t.ItemBase,t.MouseScroller.bind(this.highScroller),t.MouseScroller.bind(this.otherScroller),this.labConsume_2.text=t.LanguageUtils.language_Common_245,this.observe(t.ActvityMgr.ins().post_25_3,this.updateInfo),this.observe(t.ActvityMgr.ins().post_25_4,this.updateInfo),this.observe(t.ActvityMgr.ins().post_extractResult,this.playMcSound),this.observe(t.OtherMgr.ins().post_26_28,this.updateRewards),this.observe(t.DefaultMgr.ins().postMoneyChange,this.updateMoney),t.EventManager.ins().addEvent(t.CompEvent.ITEM_NUM_UPDATE,this.updateMoney2,this),this.addTouchEvent(this.receiveBtn,this.onClick),this.addTouchEvent(this.receiveBtn2,this.onClick),this.addMouseMoveEvent(this.moneyImg,this.mouseMove),this.addMouseOverEvent(this.moneyImg,this.mouseMove),this.addMouseMoveEvent(this.moneyImg2,this.mouseMove),this.addMouseOverEvent(this.moneyImg2,this.mouseMove),this.addMouseMoveEvent(this.moneyImg3,this.mouseMove),this.addMouseOverEvent(this.moneyImg3,this.mouseMove),this.addMouseMoveEvent(this.moneyImg4,this.mouseMove),this.addMouseOverEvent(this.moneyImg4,this.mouseMove),this.updateRewards(),this.updateInfo()},i.prototype.updateInfo=function(){if(0!=this.actId){this.againCount.text="",this.againImg.visible=!1;var e=t.ActvityMgr.ins().getActivityInfo(this.actId);if(e&&e.info&&(this.cdTime=e.endTime-Math.floor(t.GlobalData.serverTime/1e3),this.cdTime&&(this.cdTime+=Math.floor(egret.getTimer()/1e3),this.updateCDTime(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this)),this.curDayMoney)){this.chouNumber=e.info.extractCount,this.extractCount.text=e.info.extractCount+"/"+this.curDayMoney.Maxcount,this.extractCount.textColor=e.info.extractCount>=this.curDayMoney.Maxcount?15926028:2682369;for(var i in this.curDayMoney.SpecialCount)if(e.info.extractCount<this.curDayMoney.SpecialCount[i]){this.againCount.text=this.curDayMoney.SpecialCount[i]-e.info.extractCount+"",this.againImg.visible=!0;break}this.isHasTimes=e.info.extractCount<this.curDayMoney.Maxcount,this.red.visible=this.isHasTimes&&t.CurrencyUtils.getCurrency(this.firstCost.type,this.firstCost.id)>0,this.curDayMoney.freeNum&&(this.isFree=this.curDayMoney.freeNum.indexOf(e.info.extractCount+1)>=0),this.isFree?(this.consumeGrp1.visible=!1,this.consumeGrp2.visible=!0):(this.consumeGrp1.visible=!0,this.consumeGrp2.visible=!1)}}},i.prototype.updateRewards=function(){if(0!=this.actId){var e=0;if(1==this._type){var i=t.ActvityMgr.ins().getActivityInfo(this.actId),n=new Date(1e3*i.openTime),s=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime();e=Math.floor((t.GlobalData.serverTime-s)/t.DateUtils.MS_PER_DAY)+1}else e=t.GlobalData.sectionOpenDay;var a=t.ActvityMgr.ins().getActivityConfigById(this.actId);if(a&&a[e]){var r=a[e];this.curDayMoney=r,this.highList.dataProvider=new eui.ArrayCollection(r.SpecialRewards),this.otherList.dataProvider=new eui.ArrayCollection(r.NormalRewards),this.actDesc.textFlow=t.TextFlowMaker.generateTextFlow(r.Description);var o=r.DrawPrice[0];if(o&&(this.drawPrice=o,this.moneyImg.source=t.CurrencyUtils.getMoneyIcon(o.type),this.labConsume.text=t.LanguageUtils.language_Common_246,this.extractMoney.text=o.count,this.labSurplus.text=t.LanguageUtils.language_Common_104,this.labSurplusNum.text=t.CurrencyUtils.getCurrency(o.type)+"",this.moneyImg3.source=t.CurrencyUtils.getMoneyIcon(o.type)),this.moneyImg2.visible=!1,this.labConsume2.visible=!1,this.extractMoney2.visible=!1,this.labSurplus2.visible=!1,this.labSurplusNum2.visible=!1,this.moneyImg4.visible=!1,r.FirstCost){var l=r.FirstCost[0];if(l){this.firstCost=l,this.red.visible=this.isHasTimes&&t.CurrencyUtils.getCurrency(l.type,l.id)>0;var h=t.CurrencyUtils.getCurrencyNameIcon(l.type,l.id)[1]+"";this.labConsume2.text="("+t.LanguageUtils.language_Common_242,this.extractMoney2.text="*"+l.count+")",this.moneyImg2.source=h,this.labSurplus2.text=t.LanguageUtils.language_Common_104,this.labSurplusNum2.text=t.CurrencyUtils.getCurrency(l.type,l.id)+"",this.moneyImg4.source=h,this.moneyImg2.visible=!0,this.labConsume2.visible=!0,this.extractMoney2.visible=!0,this.labSurplus2.visible=!0,this.labSurplusNum2.visible=!0,this.moneyImg4.visible=!0}}}}},i.prototype.updateMoney=function(){this.drawPrice&&(this.labSurplusNum.text=t.CurrencyUtils.getCurrency(this.drawPrice.type)+"")},i.prototype.updateMoney2=function(e){this.firstCost&&e==this.firstCost.id&&(this.labSurplusNum2.text=t.CurrencyUtils.getCurrency(this.firstCost.type,this.firstCost.id)+"",this.red.visible=this.isHasTimes&&t.CurrencyUtils.getCurrency(this.firstCost.type,this.firstCost.id)>0)},i.prototype.onClick=function(t){switch(t.currentTarget){case this.receiveBtn:this.onLuckDraw();break;case this.receiveBtn2:this.onLuckDraws(10)}},i.prototype.onLuckDraw=function(){var e=this.canLuckDraw();1==e?t.ActvityMgr.ins().send_25_1(this.actId,t.Operate.cOpenServerTreasure):t.TimerManager.ins().remove(this.onLuckDraw,this)},i.prototype.onLuckDraws=function(e){t.TimerManager.ins().isExists(this.onLuckDraw,this)||t.TimerManager.ins().doTimer(150,e,this.onLuckDraw,this)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget.localToGlobal();switch(e.currentTarget){case this.moneyImg:case this.moneyImg3:var n=t.GlobalConfig.NumericalIcon[this.drawPrice.type];n.description&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,n.description,{x:i.x,y:i.y});break;case this.moneyImg2:case this.moneyImg4:var s=t.GlobalConfig.StdItems[this.firstCost.id];s&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,s,{x:i.x,y:i.y})}i=null}},i.prototype.mouseMove2=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget.localToGlobal();switch(e.currentTarget){case this.moneyImg:case this.moneyImg3:var n=t.GlobalConfig.NumericalIcon[this.drawPrice.type];n.description&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,n.description,{x:i.x,y:i.y});break;case this.moneyImg2:case this.moneyImg4:var s=t.GlobalConfig.StdItems[this.firstCost.id];s&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,s,{x:i.x,y:i.y})}i=null}},i.prototype.playMcSound=function(e){var i=this;e.length>0&&(this.isExtractImg.visible=!1,this.extractItem.data=e[0],this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.x=0,this.mc.y=0,this.mc.blendMode=egret.BlendMode.ADD,this.extractMc.addChild(this.mc)),this.extractMc.visible=!0,this.mc.playFile(ResDirEnum.RES_DIR_EFF+"kfcj",1,function(){i.extractMc.visible=!1},!1),t.SoundManager.ins().playEffect(t.SoundUtil.GOLD))},i.prototype.updateCDTime=function(){var e=this.cdTime-Math.floor(egret.getTimer()/1e3);this.actTime.text=t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.actTime.text="")},i.prototype.canLuckDraw=function(){if(!this.curDayMoney)return-1;if(this.chouNumber>=this.curDayMoney.Maxcount)return t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips90),-2;var e=t.GlobalConfig.BagRemainConfig[12];if(e&&!t.BagMgr.ins().getBagCapacity(e.bagremain))return t.UserTips.ins().showUITips(e.bagtips),-3;if(this.drawPrice&&!this.isFree){var i=t.CurrencyUtils.getCurrency(this.drawPrice.type);if(i<this.curDayMoney.DrawPrice[0].count&&(!this.firstCost||t.BagMgr.ins().getItemCountById(this.firstCost.id)<this.firstCost.count))return t.ViewManager.ins().open(t.TipsInsuffResourcesView,QatEnum.qatYuanbao),-4}return 1},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.highScroller),t.MouseScroller.unbind(this.otherScroller),this.mc&&(this.mc.destroy(),this.mc=null),this.drawPrice=null,this.firstCost=null,this.curDayMoney=null,this.removeTouchEvent(this.receiveBtn,this.onClick),this.removeTouchEvent(this.receiveBtn2,this.onClick),this.removeMouseMoveEvent(this.moneyImg,this.mouseMove),this.removeMouseOverEvent(this.moneyImg,this.mouseMove),this.removeMouseMoveEvent(this.moneyImg2,this.mouseMove),this.removeMouseOverEvent(this.moneyImg2,this.mouseMove),this.removeMouseMoveEvent(this.moneyImg3,this.mouseMove),this.removeMouseOverEvent(this.moneyImg3,this.mouseMove),this.removeMouseMoveEvent(this.moneyImg4,this.mouseMove),this.removeMouseOverEvent(this.moneyImg4,this.mouseMove),t.TimerManager.ins().remove(this.updateCDTime,this),t.EventManager.ins().removeEvent(t.CompEvent.ITEM_NUM_UPDATE,this.updateMoney2,this)},i}(t.BaseEuiView);t.OpenServerTreasureView=e,__reflect(e.prototype,"app.OpenServerTreasureView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.jobSkillListData={},t.currencySkillListData={},t}return __extends(i,e),i.prototype.init=function(){var e=t.GlobalConfig.CircleLevel;this.setCircleData(e);var i=t.GlobalConfig.SkillConf;this.setSkillData(i),this.blessConfig=t.GlobalConfig.BlessConfig,this.setBless(this.blessConfig)},i.prototype.setCircleData=function(e){if(!(this.circleListData&&this.circleListData.length>0)){var i,n,s,a,r,o,l=[],h="",p="";for(var u in e){if(i=new t.RoleCircleData,n=e[u],s=e[Number(u)+1],n)for(a=n.attrs,o=0;o<a.length;o++)h=t.AttributeData.getItemAttStrByType(a[o],a,1),""!=h&&i.attrsCur.push(h);if(s)for(r=s.attrs,o=0;o<r.length;o++)p=t.AttributeData.getItemAttStrByType(r[o],r,1,!0),""!=p&&i.attrsNext.push(p);i.level=n.level,i.levellimit=n.levellimit,l.push(i)}this.circleListData=l}},i.prototype.setSkillData=function(e){if(!(this.jobSkillListData&&Object.keys(this.jobSkillListData).length>0||this.currencySkillListData&&Object.keys(this.currencySkillListData).length>0)){var i,n={},s={},a=t.EquipItemMgr.ins().otherPlayerEquips.job;for(var r in e)i=e[r],a!=i.vocation&&0!=i.vocation||i.isDelete||(1==i.skillClass&&(n[r]=i),3==i.skillClass&&(s[r]=i));this.jobSkillListData=n,this.currencySkillListData=s}},i.prototype.setBless=function(e){if(!(this.blessDatas&&this.blessDatas.length>0)){var i,n,s,a,r,o,l=[],h="",p="";for(var u in e){i=new t.BlessLucklevel,n=e[u],s=e[Number(u)+1],i.level=n.level;var c=void 0,g=void 0;if(n)for(a=n.attrs,i.blessCur=n.needBlessValue,c=t.LanguageUtils.language_bless[1],i.attrsCur.push(c),o=0;o<a.length;o++)h=t.AttributeData.getItemAttStrByType(a[o],a,1),""!=h&&i.attrsCur.push(h);if(s)for(r=s.attrs,i.blessNext=s.needBlessValue,g=t.LanguageUtils.language_bless[2],i.attrsNext.push(g),o=0;o<r.length;o++)p=t.AttributeData.getItemAttStrByType(r[o],r,1),""!=p&&i.attrsNext.push(p);l.push(i)}this.blessDatas=l}},i.prototype.getStarLev=function(){for(var e,i=t.EquipItemMgr.ins().otherPlayerEquips,n=i.propSet,s=n.getBless(),a=this.blessDatas.length,r=0;a>r;r++)if(e=this.blessDatas[r],s>=e.blessCur&&s<e.blessNext)return e.level;var o=this.blessDatas[0].level;for(var r in this.blessDatas){var l=this.blessDatas[r];l.level>o&&(o=l.level)}return o},i.prototype.getMeridiansCurLevel=function(){var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.propSet;return i&&i.getMeridians()},i.prototype.getAllFashionData=function(){var e,i=t.EquipItemMgr.ins().otherPlayerEquips,n=i.fashionDic,s=[],a=t.GlobalConfig.FashionupgradeConfig;for(var r in a){var o=a[r][0];e=new t.FashionupgradeConfig,e.id=o.id,e.lv=o.lv,e.consume=o.consume,e.attribute=o.attribute,s.push([e,0])}for(var r in n)for(var l=n[r],h=0,p=s.length;p>h;h++)if(s[h][0].id==l.id){s[h][0].lv=l.lv,s[h][1]=l.state;break}return s},i}(egret.EventDispatcher);t.OtherPlayerData=e,__reflect(e.prototype,"app.OtherPlayerData"),t.otherPlayerData=new e}(app||(app={}));
var app;!function(t){var e=function(){function e(e,i){if(void 0===e&&(e=null),void 0===i&&(i=!0),this.skills={},this._strengthenDic={},this._fashionDic={},this._ghostInfo={},this._weaponSoulInfo={},this._peiInfo={},this.equips=[],this.suitEquips=[],this._titleDataArr=[],this._titleDataArr2=[],e){this.id=e.readUnsignedInt(),this.name=e.readString(),this.job=e.readByte(),this.circle=e.readByte(),this.level=e.readUnsignedInt(),this.sex=e.readByte();var n,s,a,r=e.readByte();for(n=0;r>n;n++)a=e.readByte(),s=new t.userItem(e),s.nPos=a,s.nPos>=t.StdItemType.itEquipDiamond&&s.nPos<t.StdItemType.itShield?this.suitEquips.push(s):this.equips.push(s);for(r=e.readByte(),n=0;r>n;n++){var o=new t.OtherPlayerSkill(e);this.skills[o.skillId]=o}var l=(e.readUnsignedShort(),t.ActorPropertyModel.numProperties),h=new t.OtherPlayerPropertySet;for(n=0;l>n;n++)h.readProperty(n,e);this.guildName=e.readString(),this.propSet=h;var p=e.readByte();this._strengthenDic[t.StrengthenType.Equip]=[],this._strengthenDic[t.StrengthenType.Four]=[],this._strengthenDic[t.StrengthenType.Special]=[];var u;for(n=0;p>n;n++){for(var c=e.readByte(),g=e.readByte(),d=[],m=0;g>m;m++)u=new t.StrengthenData,u.pos=e.readByte(),u.lv=e.readInt(),d.push(u);if(t.StrengthenType.Equip==c){var f=d.length;if(8>f)for(var v=void 0,_=f;8>_;_++)v=new t.StrengthenData,v.pos=_+1,v.lv=0,d.push(v)}d.sort(this.mysort),this._strengthenDic[c]=d}var y=e.readInt();for(this._titleDataArr=[],n=0;y>n;n++){var T=new t.TitleData;T.titleId=e.readUnsignedInt(),T.timer=e.readUnsignedInt();var M=t.GlobalConfig.TitleConfig[T.titleId];if(M){if(M.displayType&&t.GameSocket.IsCrossService)continue;this._titleDataArr.push(T)}}var C=e.readInt();for(this._titleDataArr2=[],n=0;C>n;n++){var T=new t.TitleData2;T.titleId=e.readUnsignedInt(),T.timer=e.readUnsignedInt();var M=t.GlobalConfig.CustomisedTitleConfig[T.titleId];if(M){if(M.displayType&&t.GameSocket.IsCrossService)continue;this._titleDataArr2.push(T)}}for(var b,I=e.readByte(),S=0;I>S;S++)b=new t.FashionData,b.id=e.readInt(),b.state=e.readByte(),b.lv=e.readInt(),this._fashionDic[b.id]=b;t.ObjectPool.wipe(this._ghostInfo),r=e.readByte();for(var E,w,A,x=0;r>x;x++)E=e.readByte(),w=e.readInt(),A=e.readInt(),this._ghostInfo[E]={nLv:w,nBless:A};t.ObjectPool.wipe(this._weaponSoulInfo),r=e.readByte();for(var L,D,P,k,U,B=0;r>B;B++)L=e.readByte(),D=e.readInt(),P=e.readInt(),k=e.readInt(),U=e.readString(),this._weaponSoulInfo[L]={soulID:L,soulOrder:D,soulStar:P,soulLv:k,soulTopLine:U};if(i){t.ObjectPool.wipe(this._peiInfo),r=e.readInt();for(var R=void 0,O=void 0,G=0;r>G;G++)E=e.readUnsignedShort(),O=e.readUnsignedShort(),R=t.DateUtils.formatMiniDateTime(e.readInt()),this._peiInfo[O]={id:E,type:O,time:R}}}}return Object.defineProperty(e.prototype,"ghostInfo",{get:function(){return this._ghostInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weaponSoulInfo",{get:function(){return this._weaponSoulInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peiInfo",{get:function(){return this._peiInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleDataArr",{get:function(){return this._titleDataArr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleDataArr2",{get:function(){return this._titleDataArr2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fashionDic",{get:function(){return this._fashionDic},enumerable:!0,configurable:!0}),e.prototype.mysort=function(t,e){return t.pos>e.pos?1:-1},Object.defineProperty(e.prototype,"strengthenDic",{get:function(){return this._strengthenDic},enumerable:!0,configurable:!0}),e.prototype.getFourImagesData=function(t){for(var e=this._strengthenDic[2],i=0;e&&i<e.length;i++){var n=e[i];if(n.pos==t)return e[i]}return null},e.prototype.getCurStrengthenData=function(t){var e=this.strengthenDic[t];if(e&&e.length>0){for(var i=e[e.length-1].lv,n=e[e.length-1].pos,s=e.length-1;s>=0;s--){var a=e[s].lv,r=e[s].pos>=8?1:e[s].pos;if(i>a||a>i)return n=r,n++,n>8?(n=1,i++):i=a,[i,n]}return n++,n>8&&(n=1,i++),[i,n]}return null},e.prototype.getAllRingData=function(){var e=this.strengthenDic[t.StrengthenType.Special],i=this.strengthenDic[t.StrengthenType.RingJob],n=[],s=t.GlobalConfig.SpecialRingConfig,a=t.GlobalConfig.RingBuyJobConfig,r=this.propSet.getAP_JOB();for(var o in s){var l=s[o][0];n.push(l)}var h=a[2][1][r],p=new t.SpecialRingConfig;if(p.attr=h.attr,p.cost=h.cost,p.lv=h.lv,p.name=h.name,p.pos=h.pos,p.job=h.job,n.push(p),i&&i.length>0){var u=a[3][1][r],p=new t.SpecialRingConfig;p.attr=u.attr,p.cost=u.cost,p.lv=u.lv,p.name=u.name,p.pos=u.pos,p.job=u.job,n.push(p)}if(e&&e.length>0)for(var o in e)for(var c=e[o],g=0,d=n.length;d>g;g++)if(n[g].pos==c.pos){n[g].lv=c.lv;break}return n},e.prototype.getSuitDataById=function(e){var i,n,s=t.GlobalConfig.SuitItemCfg[e],a=new t.SuitItemData,r="",o=s.attr,l=s.percent,h=[];for(i=0;i<o.length;i++)n={},n.type=s.attr[i].type,n.value=s.attr[i].value,h.push(n);var p,u=this.getBasicEquipAttr();for(i=0;i<h.length;i++){p=0;for(var c=s.attr[i].type,g=0;g<u.length;g++)for(var d=u[g],m=0;m<d.length;m++)if(d[m].type==c){p+=d[m].value;break}h[i].value=l>0?Math.floor(p*(l/100)):h[i].value,r=t.AttributeData.getItemAttStrByType(h[i],h,1,!1,!0,"0xE0AE75","0xcbc2b2"),""!=r&&a.attrs.push(r)}return a.attrs},e.prototype.getBasicEquipAttr=function(){for(var e=[],i=this.equips,n=0;n<i.length;n++){var s=i[n],a=t.GlobalConfig.StdItems[s.wItemId];e.push(a.staitcAttrs)}return e},e.prototype.getAllEquip=function(t){for(var e=this.suitEquips.concat(this.equips),i=0;i<e.length;i++)if(e[i].wItemId==t)return!0;return!1},e.prototype.getSuitAttrColor=function(e,i,n){for(var s=0,a=8421504,r=this.suitEquips.concat(this.equips),o=0;o<r.length;o++)if(r[o].wItemId){var l=t.GlobalConfig.StdItems[r[o].wItemId];if(l&&l.suitId>0){var h=Math.floor(l.suitId/100);if(h==e){var p=l.suitId%100;p>=i&&(s+=1)}}}return s==n&&(a=2682369),a},e}();t.OtherPlayerInfos=e,__reflect(e.prototype,"app.OtherPlayerInfos")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.dicBtn={},i.main=0,i.sub=0,i.tempBtnArr=[],i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="RoleViewSkin",i.name="OtherPlayerView",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.panelDataObj=[],this.panelDataObj[t.RoleTabEnum.EQUIP]=new t.RoleItemView({panelClass:t.OtherPlayerEquipView}),this.panelDataObj[t.RoleTabEnum.DIVINE]=new t.RoleItemView({panelClass:t.OtherPlayerGodEquipView}),this.panelDataObj[t.RoleTabEnum.FASHION]=new t.RoleItemView({panelClass:t.OtherPlayerNewFashionView}),this.panelDataObj[t.RoleTabEnum.JOB]=new t.RoleItemView({panelClass:t.OtherPlayerBasicSkillView}),this.panelDataObj[t.RoleTabEnum.CURRENCY]=new t.RoleItemView({panelClass:t.OtherPlayerBasicSkillView,openData:{type:1}}),this.panelDataObj[t.RoleTabEnum.MERIDIANS]=new t.RoleItemView({panelClass:t.OtherPlayerMeridiansView}),this.panelDataObj[t.RoleTabEnum.CIRCLE]=new t.RoleItemView({panelClass:t.OtherPlayerCircleView}),this.panelDataObj[t.RoleTabEnum.BLESS]=new t.RoleItemView({panelClass:t.OtherPlayerBlessView}),this.panelDataObj[t.RoleTabEnum.FOUR]=new t.RoleItemView({panelClass:t.OtherPlayerFourImagesView}),this.panelDataObj[t.RoleTabEnum.RING]=new t.RoleItemView({panelClass:t.OtherNewPlayerRingView}),this.panelDataObj[t.RoleTabEnum.DESIGNAT]=new t.RoleItemView({panelClass:t.OtherPlayerTitleView}),this.panelDataObj[t.RoleTabEnum.SHENMO]=new t.RoleItemView({panelClass:t.RoleGhostView,openData:{type:0}}),this.panelDataObj[t.RoleTabEnum.SOLDIERSOUL]=new t.RoleItemView({panelClass:t.OtherRoleWeaponSoulView}),this.panelDataObj[t.RoleTabEnum.PET]=new t.RoleItemView({panelClass:t.OtherRolePetView}),this.panelDataObj[t.RoleTabEnum.WORDFORMULA]=new t.RoleItemView({panelClass:t.WordFormulaView,openData:{roleType:t.RoleViewEnum.otherPlayerPanel}}),this.tabBar=new t.Tab_Bar(this.tab_group),this.tabBar.addEventListener(t.CompEvent.TAB_CHANGE,this.onChangeTab,this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(;e[0]instanceof Array;)e=e[0];e[0]&&(this.main=e[0]),e[1]&&(this.sub=e[1]);this.showSubBtnByIdx(0),this.showSubBtnByIdx(1),this.showSubBtnByIdx(5),this.dragDropUI.setCurrentState(),this.dragDropUI.setParent(this),t.EventManager.ins().addEvent(t.CompEvent.OTHER_PLAYER_ATTR_OPEN,this.onOpenAttrPanel,this),t.EventManager.ins().addEvent(t.CompEvent.OTHER_PLAYER_ATTR_CLOSE,this.onCloseAttrPanel,this),t.EventManager.ins().addEvent(t.CompEvent.OTHER_ROLE_UPDATE_RULE,this.isShowBtn,this),t.EventManager.ins().addEvent(t.CompEvent.OTHER_PLAYER_SKILL_DESC,this.onShowSkillDesc,this),t.EventManager.ins().addEvent(t.CompEvent.OTHER_PLAYER_CLOSE_SKILL_DESC,this.onCloseSkillDesc,this),t.EventManager.ins().addEvent(t.CompEvent.OTHER_PLAYER_RIGHT_MENU_OPEN,this.onOpenRightMenu,this),t.EventManager.ins().addEvent(t.CompEvent.OTHER_PLAYER_RIGHT_MENU_CLOSE,this.onCloseRightMenu,this),t.EventManager.ins().addEvent(t.CompEvent.OTHER_PLAYER_TITLE2_OPEN,this.onOpenTitle2Panel,this),t.EventManager.ins().addEvent(t.CompEvent.OTHER_PLAYER_TITLE2_CLOSE,this.onCloseTitle2Panel,this),this.tabBar.currIndex=this.main,this.dicBtn[this.main]&&this.onClickSelectHandler(this.dicBtn[this.main][this.sub]),this.refreshData()},i.prototype.onOpenAttrPanel=function(){this.attrPanel||(this.attrPanel=new t.OtherPlayerAttrView,this.attrGroup.addChild(this.attrPanel)),this.attrGroup.visible=!0},i.prototype.onCloseAttrPanel=function(){this.attrGroup.visible=!1},i.prototype.onShowSkillDesc=function(e){this.roleSkillDescView||(this.roleSkillDescView=new t.RoleSkillDescView,this.skillDescGroup.addChild(this.roleSkillDescView)),this.roleSkillDescView.setData(e),this.skillDescGroup.visible=!0},i.prototype.onCloseSkillDesc=function(){this.skillDescGroup.visible=!1},i.prototype.onOpenRightMenu=function(){this.rightMenuView||(this.rightMenuView=new t.RankRightMenuView,this.stateGroup.addChild(this.rightMenuView)),this.rightMenuView.setData(),this.stateGroup.visible=!0},i.prototype.onCloseRightMenu=function(){this.stateGroup.visible=!1},i.prototype.onOpenTitle2Panel=function(){this.titleView2||(this.titleView2=new t.OtherPlayerTitleView2,this.title2Group.addChild(this.titleView2)),this.title2Group.visible=!0},i.prototype.onCloseTitle2Panel=function(){this.title2Group.visible=!1},i.prototype.onClickSelectHandler=function(e){void 0===e&&(e=null),t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_INSIDE),e&&(this.showViewById(e.btnId),t.DefaultMgr.ins().post_gaimItemView(8888))},i.prototype.showViewById=function(e){var i=this.panelDataObj[e];if(i){this.currPanel&&this.currPanel!=i&&this.currPanel.hideView();var n=null;e==t.RoleTabEnum.SHENMO&&(n=t.EquipItemMgr.ins().otherPlayerEquips.ghostInfo),this.currPanel=i,this.currPanel.showView(n),this.type_group.addChild(this.currPanel.panel);var s=this.dicBtn[this.tabBar.currIndex];if(s&&s.length)for(var a=0;a<s.length;a++)s[a].btnId==e?s[a].setCurState("up"):s[a].setCurState("down");this.isShowBtn(e),this.dragDropUI.setTitle(this.currPanel.panel.titleStr)}},i.prototype.isShowBtn=function(e){0==this.currPanel.ruleId?this.helpBtn.visible=!1:(this.helpBtn.ruleId=this.currPanel.ruleId,this.helpBtn.visible=!0,e==t.RoleTabEnum.JOB||e==t.RoleTabEnum.CURRENCY?(this.helpBtn.x=360,this.helpBtn.y=570):(this.helpBtn.x=23,this.helpBtn.y=96))},i.prototype.onChangeTab=function(e){t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_LEVEL),this.setSubTabView(this.tabBar.currIndex),this.getSubShowByIdx(this.tabBar.currIndex),this.refreshData(this.tabBar.currIndex)},i.prototype.showSubBtnByIdx=function(e){var i,n,s,a=[],r=t.OtherMgr.ins().getSubIdsByMainId(e);for(n=0;n<r.length;n++)i=new t.ButtonStateElement,s=r[n].id,i.btnId=s,i.setImagePath(t.RoleSubBtn.ins().mainDic[i.btnId]),i.name="btn_"+n,i.isOpen=!0,a.push(i),i.setBackFunc(this.onClickSelectHandler,this);this.dicBtn[e]=a},i.prototype.getSubShowByIdx=function(e){for(;this.btnGroup.numElements>0;)this.btnGroup.removeChildAt(0);var i,n,s=t.OtherMgr.ins().getSubIdsByMainId(e);for(n=0;n<s.length;n++){var a=this.dicBtn[e];a&&(i=a[n],i&&(this.dicBtn[e].length<=n?i.visible=!1:(i.visible=!0,i.setImagePath(t.RoleSubBtn.ins().mainDic[i.btnId]),this.btnGroup.contains(i)||this.btnGroup.addChild(i))))}},i.prototype.setSubTabView=function(e){var i=t.OtherMgr.ins().getSubIdsByMainId(e);this.showViewById(i[0].id),e==t.RoleSubBtnType.ROLE_CIRCLE?(this.btnGroup.visible=!1,this.lineImg.visible=!1):(this.btnGroup.visible=!0,this.lineImg.visible=!0)},i.prototype.refreshData=function(e){void 0===e&&(e=null);var i=t.EntityMgr.ins().getPlayerPropertySet();if(i&&i.propSet){var n=i.propSet.getLevel(),s=i.propSet.getZSLevel(),a=t.GlobalData.sectionOpenDay;this.setMainBtnState(n,s,a),e?this.setSubBtnByMainId(e):this.setSubBtnByMainId(this.tabBar.currIndex)}},i.prototype.setSubBtnByMainId=function(e){var i=t.EntityMgr.ins().getPlayerPropertySet();if(i&&i.propSet){var n=i.propSet.getLevel(),s=i.propSet.getZSLevel(),a=t.GlobalData.sectionOpenDay,r=t.OtherMgr.ins().getSubIdsByMainId(e);e==t.RoleSubBtnType.ROLE_EQUIP?this.setRoleSubBtnState(r,n,s,a):e==t.RoleSubBtnType.ROLE_SKILL?this.setSkillSubBtnState(r,n,s,a):e==t.RoleSubBtnType.ROLE_SACRED&&this.setSoldierSoulSubBtnState(r,n,s,a)}},i.prototype.setRoleSubBtnState=function(e,i,n,s){var a,r,o;for(a=0;a<e.length;a++){if(o=t.OtherMgr.ins().getSysOpenCfgById(e[a].id),i<o.level||n<o.circle||s<o.day){for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP].length;r++)if(this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP][r].btnId==o.id){this.tempBtnArr.push(this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP][r]),this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP][r]&&this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP].splice(r,1),this.btnGroup.numElements>r&&this.btnGroup.removeChildAt(r);break}}else{var l=this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP].filter(function(t){return t.btnId==o.id});if(l&&l.length>0);else{var h=this.tempBtnArr.filter(function(t){return t.btnId==o.id});h&&h.length>0&&(this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP].splice(a,0,h[0]),this.btnGroup.addChildAt(h[0],a))}}if(i<o.openLevel||n<o.openCircle||s<o.openDay)for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP].length;r++)this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP][r].btnId==o.id&&(this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP][r].isOpen=!1)}},i.prototype.setSkillSubBtnState=function(e,i,n,s){var a,r,o;for(a=0;a<e.length;a++){if(o=t.OtherMgr.ins().getSysOpenCfgById(e[a].id),i<o.level||n<o.circle||s<o.day){for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_SKILL].length;r++)if(this.dicBtn[t.RoleSubBtnType.ROLE_SKILL][r].btnId==o.id){this.tempBtnArr.push(this.dicBtn[t.RoleSubBtnType.ROLE_SKILL][r]),this.dicBtn[t.RoleSubBtnType.ROLE_SKILL].splice(r,1),this.btnGroup.numElements>r&&this.btnGroup.removeChildAt(r);break}}else{var l=this.dicBtn[t.RoleSubBtnType.ROLE_SKILL].filter(function(t){return t.btnId==o.id});if(l&&l.length>0);else{var h=this.tempBtnArr.filter(function(t){return t.btnId==o.id});h&&h.length>0&&(this.dicBtn[t.RoleSubBtnType.ROLE_SKILL].splice(a,0,h[0]),this.btnGroup.addChildAt(h[0],a))}}if(i<o.openLevel||n<o.openCircle||s<o.openDay)for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_SKILL].length;r++)this.dicBtn[t.RoleSubBtnType.ROLE_SKILL][r].btnId==o.id&&(this.dicBtn[t.RoleSubBtnType.ROLE_SKILL][r].isOpen=!1)}},i.prototype.setBlessSubBtnState=function(e,i,n,s){var a,r,o;for(a=0;a<e.length;a++){if(o=t.OtherMgr.ins().getSysOpenCfgById(e[a].id),i<o.level||n<o.circle||s<o.day){for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE].length;r++)if(this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE][r].btnId==o.id){this.tempBtnArr.push(this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE][r]),this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE].splice(r,1),this.btnGroup.numElements>r&&this.btnGroup.removeChildAt(r);break}}else{var l=this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE].filter(function(t){return t.btnId==o.id});if(l&&l.length>0);else{var h=this.tempBtnArr.filter(function(t){return t.btnId==o.id});h&&h.length>0&&(this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE].splice(a,0,h[0]),this.btnGroup.addChildAt(h[0],a))}}if(i<o.openLevel||n<o.openCircle||s<o.openDay)for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE].length;r++)this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE][r].btnId==o.id&&(this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE][r].isOpen=!1)}},i.prototype.setStrengthenSubBtnState=function(e,i,n,s){var a,r,o;for(a=0;a<e.length;a++){if(o=t.OtherMgr.ins().getSysOpenCfgById(e[a].id),i<o.level||n<o.circle||s<o.day){for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN].length;r++)if(this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN][r].btnId==o.id){this.tempBtnArr.push(this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN][r]),this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN].splice(r,1),this.btnGroup.numElements>r&&this.btnGroup.removeChildAt(r);break}}else{var l=this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN].filter(function(t){return t.btnId==o.id});if(l&&l.length>0);else{var h=this.tempBtnArr.filter(function(t){return t.btnId==o.id});h&&h.length>0&&(this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN].splice(a,0,h[0]),this.btnGroup.addChildAt(h[0],a))}}if(i<o.openLevel||n<o.openCircle||s<o.openDay)for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN].length;r++)this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN][r].btnId==o.id&&(this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN][r].isOpen=!1)}},i.prototype.setSoldierSoulSubBtnState=function(e,i,n,s){var a,r,o;for(a=0;a<e.length;a++){if(o=t.OtherMgr.ins().getSysOpenCfgById(e[a].id),i<o.level||n<o.circle||s<o.day){for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_SACRED].length;r++)if(this.dicBtn[t.RoleSubBtnType.ROLE_SACRED][r].btnId==o.id){this.tempBtnArr.push(this.dicBtn[t.RoleSubBtnType.ROLE_SACRED][r]),this.dicBtn[t.RoleSubBtnType.ROLE_SACRED].splice(r,1),this.btnGroup.numElements>r&&this.btnGroup.removeChildAt(r);break}}else{var l=this.dicBtn[t.RoleSubBtnType.ROLE_SACRED].filter(function(t){return t.btnId==o.id});if(l&&l.length>0);else{var h=this.tempBtnArr.filter(function(t){return t.btnId==o.id});h&&h.length>0&&(this.dicBtn[t.RoleSubBtnType.ROLE_SACRED].splice(a,0,h[0]),this.btnGroup.addChildAt(h[0],a))}}if(i<o.openLevel||n<o.openCircle||s<o.openDay)for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_SACRED].length;r++)this.dicBtn[t.RoleSubBtnType.ROLE_SACRED][r].btnId==o.id&&(this.dicBtn[t.RoleSubBtnType.ROLE_SACRED][r].isOpen=!1)}},i.prototype.setMainBtnState=function(e,i,n){var s=t.OtherMgr.ins().dicMenu[1];this.isSHowIds=[];var a,r;for(a=0;a<s.length;a++){if(e>=s[a].level&&i>=s[a].circle&&n>=s[a].day)for(r=0;r<this.tabBar.tabElements.length;r++)if(this.tabBar.tabElements[r].id==s[a].id){this.isSHowIds.push(s[a].id);break}var o=this.tabBar.tabElements.filter(function(t){return t.id==s[a].id});o&&1==o.length&&(e>=s[a].openLevel&&i>=s[a].openCircle&&n>=s[a].openDay?o[0].isOpen=!0:o[0].isOpen=!1)}this.tabBar.setData(this.isSHowIds)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(e.prototype.close.call(this,i),this.currPanel=null;this.btnGroup.numElements>0;){var s=this.btnGroup.removeChildAt(0);s.destroy(),t.DisplayUtils.removeFromParent(s),s=null}for(var a=0;a<this.panelDataObj.length;a++)this.panelDataObj[a]&&this.panelDataObj[a].destroy(),this.panelDataObj[a]=null;this.panelDataObj.length=0,this.panelDataObj=null,t.DisplayUtils.removeFromParent(this.type_group),t.DisplayUtils.removeFromParent(this.btnGroup),t.DisplayUtils.removeFromParent(this.iconGroup),t.DisplayUtils.removeFromParent(this.attrGroup),t.DisplayUtils.removeFromParent(this.stateGroup),t.DisplayUtils.removeFromParent(this.modelGroup),t.DisplayUtils.removeFromParent(this.tab_group),this.dragDropUI&&this.dragDropUI.destroy(),this.rightMenuView&&this.rightMenuView.destroy(),this.rightMenuView=null,this.dragDropUI=null,this.attrPanel&&this.attrPanel.$onClose(),this.attrPanel=null,this.roleSkillDescView&&this.roleSkillDescView.$onClose(),this.roleSkillDescView=null,this.titleView2&&this.titleView2.$onClose(),this.titleView2=null,this.type_group&&this.type_group.removeChildren(),this.iconGroup&&this.iconGroup.removeChildren(),this.attrGroup&&this.attrGroup.removeChildren(),this.stateGroup&&this.stateGroup.removeChildren(),this.modelGroup&&this.modelGroup.removeChildren(),this.tab_group&&this.tab_group.removeChildren(),this.type_group=null,this.iconGroup=null,this.attrGroup=null,this.stateGroup=null,this.modelGroup=null,this.tab_group=null,this.skillDescGroup=null,t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_ATTR_OPEN,this.onOpenAttrPanel,this),t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_ATTR_CLOSE,this.onCloseAttrPanel,this),t.EventManager.ins().removeEvent(t.CompEvent.OTHER_ROLE_UPDATE_RULE,this.isShowBtn,this),t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_SKILL_DESC,this.onShowSkillDesc,this),t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_CLOSE_SKILL_DESC,this.onCloseSkillDesc,this),t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_RIGHT_MENU_OPEN,this.onOpenRightMenu,this),t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_RIGHT_MENU_CLOSE,this.onCloseRightMenu,this),t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_TITLE2_OPEN,this.onOpenTitle2Panel,this),t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_TITLE2_CLOSE,this.onCloseTitle2Panel,this),this.tabBar.removeEventListener(t.CompEvent.TAB_CHANGE,this.onChangeTab,this),this.tabBar.destory(),this.tabBar=null,this.btnGroup=null;var r,o;for(r=0,o=this.tempBtnArr.length;o>r;r++){var l=this.tempBtnArr[r];l.destroy(),l=null}this.tempBtnArr.length=0,this.tempBtnArr=null,t.ObjectPool.wipe(this.dicBtn),this.dicBtn=null,this.helpBtn.$onRemoveFromStage(),this.helpBtn=null,this.isSHowIds&&(this.isSHowIds.length=0,this.isSHowIds=null),this.$onClose(),this.removeFromParent()},i}(t.BaseEuiView);t.OtherPlayerView=e,__reflect(e.prototype,"app.OtherPlayerView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.dataAry=[],i.newArr=[],i._itemArrayCollection=null,i.starUrlBg="blessing_xingxing",i.starUrl="blessing_xingxing1",i.starUrlBg2="blessing_yueliang",i.starUrl2="blessing_yueliang1",i.starUrlBg3="blessing_taiyan",i.starUrl3="blessing_taiyan1",i.starUrlBgNum=0,i.starUrlNum=0,i.starUrl2Num=10,i.starUrl3Num=20,i.ruleId=30,i.titleStr=t.LanguageUtils.language_Omission_txt58,i.skinName="BlessSkin",i._itemArrayCollection=new eui.ArrayCollection,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.btn_bless0.visible=!1,this.btn_bless1.visible=!1,this.txt_consume1.visible=!1,this.icon_1.visible=!1,this._scrollViewContainer=new t.ScrollViewContainer(this.arrGroup),this._scrollViewContainer.callFunc([null,null,null],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.scrollPolicyH=eui.ScrollPolicy.OFF,this._scrollViewContainer.scrollPolicyV=eui.ScrollPolicy.AUTO,this._scrollViewContainer.itemRenderer=t.BlessAttrItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection;var e=this.group_star.numElements;this.starArr=[];for(var i,n=0;e>n;n++)i=this.group_star.getElementAt(n),this.starArr.push(i),i.source=this.starUrlBg;this.initData()},i.prototype.initData=function(){var e,i=t.otherPlayerData.blessDatas,n=0,s=t.EquipItemMgr.ins().otherPlayerEquips,a=s.propSet,r=a.getBless(),o=(t.GlobalConfig.BlesseConstConfig.blessone,t.GlobalConfig.BlesseConstConfig.blessten,t.GlobalConfig.BlesseConstConfig.blessdown,t.otherPlayerData.getStarLev()),l=t.GlobalConfig.BlessConfig[o];this.txt_star.text=t.LanguageUtils.language_Omission_txt18+o,this.txt_blessing.text=t.LanguageUtils.language_Omission_txt24+r,this.txt_desc.text=t.LanguageUtils.language_Omission_txt19+t.LanguageUtils.language_Omission_txt20+(l&&l.blessdown)+"点";var h=0,p="",u="";o>this.starUrl3Num?(h=o-this.starUrl3Num,p=this.starUrl3,u=this.starUrlBg3):o>this.starUrl2Num?(h=o-this.starUrl2Num,p=this.starUrl2,u=this.starUrlBg2):o>this.starUrlNum&&(h=o-this.starUrlNum,p=this.starUrl,u=this.starUrlBg);for(var c=0,g=this.starArr.length;g>c;c++)h>c?this.starArr[c].source=p:this.starArr[c].source=u;var d,m,f;if(this.newArr=[],i){for(n=i.length,m=0;n>m;m++)if(e=i[m],e.level==o){for(d=0;d<e.attrsCur.length;d++)f=new t.BlessAttrVo,f.desc1=e.attrsCur[d],f.desc2=e.attrsNext[d],this.newArr.push(f);break}this.setData(this.newArr)}else this.setData([])},i.prototype.setData=function(t){this.creatItem(t)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this._itemArrayCollection.replaceAll(this.dataAry)},i.prototype.$onClose=function(){for(e.prototype.$onClose.call(this);this._list.numChildren>0;){var i=this._list.getChildAt(0);this._list.removeChild(i),i.destroy(),i=null}this.dataAry.length=0,this.dataAry=null,this.newArr.length=0,this.newArr=null,t.DisplayUtils.removeFromParent(this.group_star),this.group_star&&this.group_star.removeChildren(),this.group_star=null,this.starArr.length=0,this.starArr=null,this._scrollViewContainer.destory(),this._itemArrayCollection.removeAll(),this.txt_star.text="",this.txt_blessing.text="",this.txt_desc.text="",this.txt_consume1.text="",this.btn_bless1=null,this.txt_star=null,this.txt_blessing=null,this.txt_desc=null,this.txt_consume1=null,this.starUrlBg="",this.starUrl="",this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,this.arrGroup&&this.arrGroup.removeChildren(),this.arrGroup=null,t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.OtherPlayerBlessView=e,__reflect(e.prototype,"app.OtherPlayerBlessView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="RoleCircleAttrItemSkin",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var t=this.data;t.desc1&&(this.txt_cur.text=t.desc1),t.desc2?this.txt_next.text=t.desc2:(this.txt_next.text="",this.arrow.visible=!1)}},e}(eui.ItemRenderer);t.OtherPlayerCircleAttrItemView=e,__reflect(e.prototype,"app.OtherPlayerCircleAttrItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._itemArrayCollection=null,i.ruleId=8,i.titleStr=t.LanguageUtils.language_System8,i.skinName="CircleSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.btnCircle.visible=!1,this._itemArrayCollection||(this.list.itemRenderer=t.RoleCircleAttrItemView,this._itemArrayCollection=new eui.ArrayCollection,this.list.dataProvider=this._itemArrayCollection),this.refreshData(),this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.blendMode=egret.BlendMode.ADD,this.mc.x=194,this.mc.y=160,this.reinGroup.addChildAt(this.mc,10),this.mc.playFile(ResDirEnum.RES_DIR_EFF+"eff_zsyw1",-1))},i.prototype.refreshData=function(){this.updateView()},i.prototype.updateView=function(){this.conditionGroup.visible=!1;var e=t.EquipItemMgr.ins().otherPlayerEquips.circle;this.txt_circle.text=t.LanguageUtils.language_Omission_txt13+e+t.LanguageUtils.language_Common_0;for(var i,n,s,a=t.GlobalConfig.CircleLevel[e],r=t.GlobalConfig.CircleLevel[e+1],o=null,l={},h=[],p=0;p<a.attrs.length;p++)i=a.attrs[p],l[i.type]=i.value;if(r){o={};for(var p=0;p<r.attrs.length;p++)i=r.attrs[p],o[i.type]=i.value;for(var u in o)s=t.AttributeData.getAttrValue(+u,o),s&&(n=t.AttributeData.getAttrValue(+u,l,!0),h.push({desc1:n,desc2:s}));this.txt_max_lev.visible=!1}else{for(var u in l)n=t.AttributeData.getAttrValue(+u,l,!0),n&&h.push({desc1:n,desc2:null});this.txt_max_lev.visible=!0,this.txt_max_lev.text=t.LanguageUtils.language_Omission_txt14}this._itemArrayCollection.replaceAll(h)},i.prototype.$onClose=function(){this.mc&&(this.mc.destroy(),this.mc=null),e.prototype.$onClose.call(this)},i}(t.BaseView);t.OtherPlayerCircleView=e,__reflect(e.prototype,"app.OtherPlayerCircleView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RoleAttrItemSkin",t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this)},i.prototype.onClickHandler=function(t){var e=this.data.attr_explain;this.func&&this.func(e)},i.prototype.onOver=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else if(this.data&&this.data.attrConfigVo){var i=new egret.Point(e.stageX,e.stageY),n=this.data.attrConfigVo;t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_SKILL_DESC,n.desc,{x:i.x,y:i.y})}},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var t=this.data;this.txt_name.text=t.attr_name+"：",this.txt_value.text=t.attr_value,this.func=t.func}},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this)},i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this)},i}(eui.ItemRenderer);t.OtherPlayerAttrtemView=e,__reflect(e.prototype,"app.OtherPlayerAttrtemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._itemArrayCollection=null,t.dataAry=[],t._itemArrayCollection2=null,t.dataAry2=[],t.endScrollV=0,t.selectedIndex=-1,t.skinName="AttrSkin",t._itemArrayCollection=new eui.ArrayCollection,t._itemArrayCollection2=new eui.ArrayCollection,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.attrBtn.currentState="show",this.stateBtn.currentState="hide",this.stateScroller.visible=!1,this.stateBtn.visible=!1,this.stateScroller.visible=!1,this.init()},i.prototype.init=function(){this._scrollViewContainer=new t.ScrollViewContainer(this.attrGroup),this._scrollViewContainer.callFunc([this.onScrollerChange,this.onScrollerEnd,this.onTouchTap],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.itemRenderer=t.RoleAttrItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.attrConfigArr=[],this.btn_close.visible=!0,this.addTouchEvent(this.attrBtn,this.onClose),this.addTouchEvent(this.stateBtn,this.onClose),this.addTouchEvent(this.btn_close,this.onClose);this.stateList.itemRenderer=t.RoleStateItemView,this.stateList.dataProvider=this._itemArrayCollection2,this.refreshData2(),t.MouseScroller.bind(this.stateScroller);var e,i,n=t.EquipItemMgr.ins().otherPlayerEquips,s=(n.propSet,[]);for(var a in t.GlobalConfig.HumanAttrConfig){var r=t.GlobalConfig.HumanAttrConfig[a];e=new t.RoleAttrVo,e.attr_name=r.attrName,i=t.ModelManager.ins().roleModel.getPropValueByIndex(n.propSet,r.attrID,r.lv),null!=i&&(e.attr_value=i+"",e.attr_explain="",r.tips&&(e.attrConfigVo={desc:r.tips,name:""}),s.push(e))}this.setData(s)},i.prototype.refreshData2=function(){for(var e,i=t.EquipItemMgr.ins().otherPlayerEquips,n=i.propSet,s=[],a=(n.getLevel(),t.LanguageUtils.stateName.length),r=0;a>r;++r){var o=t.ModelManager.ins().roleModel.getStateValueByIndex(n,r);if(o){e=new t.RoleAttrVo,e.attr_name=t.RoleData.GetStateName(r),e.attr_value=o,e.attr_explain="";var l=t.LanguageUtils["stateArr"+r];l&&(e.attrConfigVo={name:l[0],desc:l[1]}),s.push(e)}}this.setData2(s)},i.prototype.setData2=function(t){this.creatItem2(t)},i.prototype.creatItem2=function(t){this.dataAry2.length=0;for(var e=0;e<t.length;++e)this.dataAry2.push(t[e]);this._itemArrayCollection2.replaceAll(this.dataAry2)},i.prototype.onClose=function(e){switch(e.currentTarget){case this.attrBtn:this.attrBtn.currentState="show",this.stateBtn.currentState="hide",this.stateScroller.visible=!1,this.attrScroller.visible=!0,this.attrList.visible=!0;
break;case this.stateBtn:this.stateScroller.visible=!0,this.attrScroller.visible=!1,this.attrList.visible=!1,this.attrBtn.currentState="hide",this.stateBtn.currentState="show";break;case this.btn_close:t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_ATTR_CLOSE,!0),t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_RIGHT_MENU_CLOSE)}},i.prototype.onTouch=function(e){t.UserTips.ins().closeTips()},i.prototype.setData=function(t){this.creatItem(t)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this._itemArrayCollection.replaceAll(this.dataAry),this._scroller.validateNow()},i.prototype.onScrollerChange=function(){for(var t,e=0;e<this._list.numChildren;e++)t=this._list.getChildAt(e),t&&t.removeListener()},i.prototype.onScrollerEnd=function(){for(var t,e=0;e<this._list.numChildren;e++)t=this._list.getChildAt(e),t&&t.addListener()},i.prototype.onTouchTap=function(t,e,i){},i.prototype.callFunc=function(t){},i.prototype.destroy=function(){for(;this._list.numChildren>0;){var e=this._list.getChildAt(0);this._list.removeChild(e),e.destroy(),e=null}this.removeTouchEvent(this.attrBtn,this.onClose),this.removeTouchEvent(this.stateBtn,this.onClose),this.removeTouchEvent(this.btn_close,this.onClose),this._itemArrayCollection.removeAll(),this._scrollViewContainer.destory(),t.DisplayUtils.removeFromParent(this.attrGroup)},i}(t.BaseView);t.OtherPlayerAttrView=e,__reflect(e.prototype,"app.OtherPlayerAttrView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isShowAtrr=!0,t.ruleId=4,t.titleStr="",t.skinName="EquipSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.init()},i.prototype.init=function(){t.ModelManager.ins().roleModel.init(),this.roleInnerModel=new t.OtherRoleInnerModel(this.modelGroup);var e,i;for(this.equipArr=[],i=0;i<this.iconGroup.numElements;i++)e=this.iconGroup.getChildByName("icon_"+i),e.setEquipBg(i),this.equipArr.push(e);this.neiGongBtn.visible=!1,this.neiGongGrp.visible=!1;var n=t.GlobalConfig.MeridiansSetConfig.equipOpen,s=t.GlobalConfig.MeridiansSetConfig.equipOpenBS;if(n){var a=0,r=[];t.ViewManager.ins().isCheckOpen(n)&&(r.push({type:"equipOpen",img1:"tab_ngzbt01",img2:"tab_ngzbt02"}),this.neiGongBtn.visible=!0,a=r.length-1),t.ViewManager.ins().isCheckOpen(s)&&r.push({type:"equipOpenBS",img1:"tab_ngzbt12",img2:"tab_ngzbt11"}),this.ngEquiTabBar.itemRenderer=t.NGEquipTab,this.ngEquiTabBar.dataProvider=new eui.ArrayCollection(r),this.ngEquipView.init(1,"otherPlayerView"),this.ngGemstoneView.init(2,"otherPlayerView"),this.ngEquiTabBar.selectedIndex=a,this.onTabTouch(null)}t.EventManager.ins().addEvent(t.CompEvent.OTHER_PLAYER_ATTR_OPEN,this.showAtrr,this),t.EventManager.ins().addEvent(t.CompEvent.OTHER_PLAYER_ATTR_CLOSE,this.hideAtrr,this),this.addTouchEvent(this.gzClickGroup,this.onClick),this.addTouchEvent(this.btnAtrr,this.onClick),this.addTouchEvent(this.btnAtrr0,this.onClick),this.addTouchEvent(this.neiGongBtn,this.onClick),this.addTouchEvent(this.neiGongCloseBtn,this.onClick),this.addChangeEvent(this.ngEquiTabBar,this.onTabTouch),this.setEquipData(),this.showAtrr(),this.refreshData()},i.prototype.showView=function(){this.isShowAtrr&&(t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_ATTR_OPEN),t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_RIGHT_MENU_OPEN))},i.prototype.hideView=function(){t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_ATTR_CLOSE),t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_RIGHT_MENU_CLOSE),this.neiGongGrp.visible=!1},i.prototype.showAtrr=function(){this.btnAtrr.visible=!1,this.btnAtrr0.visible=!0},i.prototype.hideAtrr=function(t){void 0===t&&(t=!1),t&&(this.isShowAtrr=!1),this.btnAtrr.visible=!0,this.btnAtrr0.visible=!1},i.prototype.onClick=function(e){switch(e.currentTarget){case this.gzClickGroup:t.ViewManager.ins().open(t.OtherPlayerGuanZhiView);break;case this.btnAtrr:this.isShowAtrr=!0,this.showAtrr(),t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_ATTR_OPEN),t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_RIGHT_MENU_OPEN);break;case this.btnAtrr0:this.isShowAtrr=!1,this.hideAtrr(),t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_ATTR_CLOSE),t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_RIGHT_MENU_CLOSE);break;case this.neiGongBtn:var i=t.GlobalConfig.MeridiansSetConfig;i&&t.ViewManager.ins().isCheckOpen(i.openLimit)?this.neiGongGrp.visible=!this.neiGongGrp.visible:i&&i.limitStr&&t.UserTips.ins().showUITips(i.limitStr);break;case this.neiGongCloseBtn:this.neiGongGrp.visible=!1}},i.prototype.onTabTouch=function(t){this.ngEquipView.visible=!1,this.ngGemstoneView.visible=!1;var e=this.ngEquiTabBar.selectedItem;e&&("equipOpen"==e.type?this.ngEquipView.visible=!0:"equipOpenBS"==e.type&&(this.ngGemstoneView.visible=!0))},i.prototype.refreshData=function(){var e=t.EquipItemMgr.ins().otherPlayerEquips;this.titleStr=e.name,t.GlobalData.otherPlayerId=e.id,t.GlobalData.otherPlayerName=e.name;var i=e.propSet.getAP_JOB(),n=e.propSet.getLevel(),s=e.propSet.getZSLevel(),a=e.propSet.getOfficialPositicon(),r=e.guildName,o="";switch(i){case JobConst.ZhanShi:o=t.AttributeData.job[JobConst.ZhanShi];break;case JobConst.FaShi:o=t.AttributeData.job[JobConst.FaShi];break;case JobConst.DaoShi:o=t.AttributeData.job[JobConst.DaoShi]}this.job=o,this.txt_job.text=o,this.txt_guild.text=r;var l=s>0?o+"  "+s+t.LanguageUtils.language_Common_0+n+t.LanguageUtils.language_Common_1:o+"  "+n+t.LanguageUtils.language_Common_1;this.txt_job.text=l,this.gzImage.source="gz_zw_"+a},i.prototype.setEquipData=function(){var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.equips;if(i){for(var n,s=0;s<i.length;s++)n=i[s].nPos,n>=t.StdItemType.itEquipDiamond&&n<t.StdItemType.itShield||n>t.StdItemType.itMoQi||(n>=t.StdItemType.itShield&&n<=t.StdItemType.itMoQi&&(n-=4),this.equipArr[n].setItem(i[s],null,null,1));this.setModel()}},i.prototype.setModel=function(){var e=t.EquipItemMgr.ins().getOtherModeEquip();this.roleInnerModel.setData(e)},i.prototype.deatroy=function(){t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_ATTR_OPEN,this.showAtrr,this),t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_ATTR_CLOSE,this.hideAtrr,this),this.removeTouchEvent(this.gzClickGroup,this.onClick),this.removeTouchEvent(this.btnAtrr,this.onClick),this.removeTouchEvent(this.btnAtrr0,this.onClick),this.removeTouchEvent(this.neiGongBtn,this.onClick),this.removeTouchEvent(this.neiGongCloseBtn,this.onClick),t.DisplayUtils.removeFromParent(this.iconGroup),this.iconGroup&&this.iconGroup.removeChildren(),this.modelGroup&&this.modelGroup.removeChildren(),this.iconGroup=null,this.modelGroup=null;var e,i;for(e=0,i=this.equipArr.length;i>e;e++){var n=this.equipArr[e];n.destroy(),n=null}this.ngEquiTabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.ngEquiTabBar=null,this.equipArr.length=0,this.equipArr=null,this.roleInnerModel&&this.roleInnerModel.destory(),this.roleInnerModel=null,this.txt_job.text="",this.txt_job=null,this.txt_guild.text="",this.txt_guild=null,this.removeObserve(),t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.OtherPlayerEquipView=e,__reflect(e.prototype,"app.OtherPlayerEquipView")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._container=t,this.init()}return e.prototype.init=function(){this._helmet=this._container.getChildByName("helmet"),this._cloth=this._container.getChildByName("cloth"),this._arm=this._container.getChildByName("arm")},e.prototype.onTouchTap=function(t){console.log("onTouchTap")},Object.defineProperty(e.prototype,"skin",{get:function(){return this._container},enumerable:!0,configurable:!0}),e.prototype.setData=function(e){if(void 0===e&&(e=null),e){var i;this._arm.source="",this._helmet.source="",this.bg.source="",this.bg.visible=!1;var n=0,s=t.EquipItemMgr.ins().otherPlayerEquips;s&&0==s.sex?this._cloth.source="model_"+t.RoleInnerModel.INIT_MODEL[0]+"_png":this._cloth.source="model_"+t.RoleInnerModel.INIT_MODEL[1]+"_png",this._helmet.source=s.propSet.getFacteStr()+"_"+s.sex+"_png";for(var a=0;a<e.length;a++){i=e[a];var r=t.GlobalConfig.StdItems[i.wItemId];if(r){var o=Number(r.type);1==o?(this._arm.source="model_"+r.icon+"_png",n=r.imgeff):2==o?(this._cloth.source="model_"+r.icon+"_png",r.imgeff&&(this.bg.source="bodyimgeff"+r.imgeff+"_"+s.sex+"_png",this.bg.visible=!0)):3==o&&(this._helmet.source="model_"+r.icon+"_png")}}n?(this.weaponMC||(this.weaponMC=t.ObjectPool.pop("app.MovieClip"),this.weaponMC.blendMode=egret.BlendMode.ADD,this._container.addChild(this.weaponMC)),this.weaponMC.playFileEff(ResDirEnum.RES_DIR_WIMGEFF+"weaponeff"+n+"_n",-1)):this.weaponMC&&(this.weaponMC.destroy(),this.weaponMC=null)}},e.prototype.destory=function(){this.weaponMC&&(this.weaponMC.destroy(),this.weaponMC=null),t.DisplayUtils.removeFromParent(this._container)},e.INIT_MODEL=["11000","11005"],e}();t.OtherPlayerInnerModel=e,__reflect(e.prototype,"app.OtherPlayerInnerModel")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.setData=function(e){if(void 0===e&&(e=null),e){var i,n=0;this._arm.source="",this._helmet.source="",this.bg.source="",this.bg.visible=!1;var s=t.EquipItemMgr.ins().otherPlayerEquips,a=s.sex;0==a?this._cloth.source="body"+t.RoleInnerModel.INIT_MODEL[0]+"_"+a+"_png":this._cloth.source="body"+t.RoleInnerModel.INIT_MODEL[1]+"_"+a+"_png",this._helmet.source=s.propSet.getFacteStr()+"_"+a+"_png";for(var r=0;r<e.length;r++){i=e[r];var o=t.GlobalConfig.StdItems[i.wItemId];if(o){var l=Number(o.type);1==l?(this._arm.source="weapon_"+o.icon+"_png",n=o.imgeff):2==l?(this._cloth.source=s.propSet.getBodyModelStr()+"_"+a+"_png",o.imgeff&&(this.bg.source="bodyimgeff"+o.imgeff+"_"+a+"_png",this.bg.visible=!0)):3==l&&(this._helmet.source="helmet_"+o.icon+"_png")}}n?(this.weaponMC||(this.weaponMC=t.ObjectPool.pop("app.MovieClip"),this.weaponMC.blendMode=egret.BlendMode.ADD,this._container.addChild(this.weaponMC)),this.weaponMC.playFileEff(ResDirEnum.RES_DIR_WIMGEFF+"weaponeff"+n+"_n",-1)):this.weaponMC&&(this.weaponMC.destroy(),this.weaponMC=null)}},i}(t.RoleInnerModel);t.OtherRoleInnerModel=e,__reflect(e.prototype,"app.OtherRoleInnerModel")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.ruleId=61,i.titleStr=t.LanguageUtils.language_System63,i.skinName="FourImagesViewSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.goBtn.visible=!1;for(var t=1;5>t;t++){var e=this["fourImagesItemView_"+t];e.pos=t,e.updateData(),this.addMouseMoveEvent(e,this.mouseMove),this.addMouseOverEvent(e,this.mouseMove)}this.updateData()},i.prototype.updateData=function(){for(var t=1;5>t;t++){var e=this["fourImagesItemView_"+t];e&&e.setData(1)}},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=i.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_FOURIMAGE,{pos:i.pos,type:1},{x:n.x+i.width/2,y:n.y+i.height/2})}},i.prototype.destroy=function(){},i}(t.BaseView);t.OtherPlayerFourImagesView=e,__reflect(e.prototype,"app.OtherPlayerFourImagesView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.suitDic={},i.ruleId=59,i.titleStr=t.LanguageUtils.language_System3,i.skinName="GodEquipSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){var t,e,i;for(this.equipArr=[],this.imgArr=[],e=0;e<this.iconGroup.numElements;e++)t=this.iconGroup.getChildByName("item_"+e),this.equipArr.push(t),i=this.getChildByName("img_"+e),this.imgArr.push(i);this.setSuitData(),this.refreshSuitEquipAtrr()},i.prototype.refreshSuitEquipAtrr=function(){var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.suitEquips;if(4==i.length){for(var n=void 0,s=void 0,a=[],r=0,o=i.length;o>r;r++)n=i[r],s=t.GlobalConfig.StdItems[n.wItemId],a.push(s.suitId);for(var l=a[0],h=0,p=a.length;p>h;h++){var u=a[h];l>u&&(l=u)}this.setData(l)}else this.setData()},i.prototype.setData=function(e){if(void 0===e&&(e=null),!e)return this.group_yjh.visible=!1,void(this.img_wjh.visible=!0);var i=t.EquipItemMgr.ins().otherPlayerEquips,n=i.getSuitDataById(e);this.group_yjh.visible=!0,this.img_wjh.visible=!1,this.suitLv.text=t.StringUtils.replace(t.LanguageUtils.language_Omission_txt61,(e+"").substring(2)),this.attrLab.textFlow=t.TextFlowMaker.generateTextFlow(n.toString())},i.prototype.setSuitData=function(){for(var e=0;e<this.equipArr.length;e++)this.equipArr[e].visible=!1,this.imgArr[e].visible=!0;var i=t.EquipItemMgr.ins().otherPlayerEquips,n=i.suitEquips;if(n)for(var s,e=0;e<n.length;e++)s=n[e].nPos,this.equipArr[s-10].setItem(n[e],null,null,10,null,null,null,""),this.equipArr[s-10].visible=!0,this.imgArr[s-10].visible=!1},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),t.DisplayUtils.removeFromParent(this.iconGroup),this.iconGroup&&this.iconGroup.removeChildren(),this.iconGroup=null;var i,n;for(i=0,n=this.equipArr.length;n>i;i++){var s=this.equipArr[i];s.destroy(),s=null}this.equipArr.length=0,this.equipArr=null,t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.OtherPlayerGodEquipView=e,__reflect(e.prototype,"app.OtherPlayerGodEquipView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="GuanZhiSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.costArr=new eui.ArrayCollection},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setTitle(t.LanguageUtils.language_System93),this.dragDropUI.setParent(this),this.currentLabel.text=t.LanguageUtils.language_GuanZhi_Label,this.costList.itemRenderer=t.FourImagesCostItem,this.gCurList.itemRenderer=t.FourImagesAttrItemCurView,this.gNextList.itemRenderer=t.FourImagesAttrItemNextView,this.costList.dataProvider=this.costArr,this.updateView(),this.btnUp.visible=!1},i.prototype.updateView=function(){this.isMaxLab.visible=!1,this.jiantou.visible=!0;var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.propSet.getOfficialPositicon(),n=t.GlobalConfig.OfficeConfig[i];if(n){this.curGzImage.source="gz_zw_"+i,this.gzImage.source="gz_zw_"+i,this.gCurList.visible=!0;for(var s=n.attribute,a=[],r=0;r<s.length;r++)a.push(s[r]);for(var o=[],l="",r=0;r<a.length;r++)l=t.AttributeData.getItemAttStrByType(a[r],a),""!=l&&o.push(l);this.gCurList.dataProvider=new eui.ArrayCollection(o)}else this.gCurList.visible=!1,this.gzImage.source="gz_zw_0";var h=i+1,p=t.GlobalConfig.OfficeConfig[h];if(p){this.nextGzImage.visible=!0,this.nextGzImage.source="gz_zw_"+h,this.gNextList.visible=!0;for(var s=p.attribute,a=[],r=0;r<s.length;r++)a.push(s[r]);for(var o=[],l="",r=0;r<a.length;r++)l=t.AttributeData.getItemAttStrByType(a[r],a),""!=l&&o.push(l);this.gNextList.dataProvider=new eui.ArrayCollection(o)}else this.nextGzImage.visible=!1,this.gNextList.visible=!1,this.levelLabel.visible=!1,this.btnUp.visible=!1,this.txt_get.visible=!1,this.isMaxLab.visible=!0,this.jiantou.visible=!1,this.curGzImage.x=366,this.gCurList.x=392},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t)},i}(t.BaseEuiView);t.OtherPlayerGuanZhiView=e,__reflect(e.prototype,"app.OtherPlayerGuanZhiView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.titleStr=t.LanguageUtils.language_System99,i.skinName="RoleWeaponSoulViewSkin",i.touchEnabled=!1,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.goBtn.visible=this.redPoint.visible=!1;for(var t=1;5>t;t++){var e=this["weaponItem"+t];e.setData(t,2)}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this)},i}(t.BaseEuiView);t.OtherRoleWeaponSoulView=e,__reflect(e.prototype,"app.OtherRoleWeaponSoulView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MeridiansAttrItemCurSkin",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.visible=null!=this.data,this.data&&(this.txt_cur.text=this.data)},e}(eui.ItemRenderer);t.OtherPlayerMeridiansItemCurView=e,__reflect(e.prototype,"app.OtherPlayerMeridiansItemCurView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.breakthrough=!1,i.ruleId=7,i.titleStr=t.LanguageUtils.language_System7,i.skinName="MeridiansViewSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.initUI()},i.prototype.initUI=function(){this.neiGongBtn.visible=!1,this.neiGongGrp.visible=!1;var e=t.GlobalConfig.MeridiansSetConfig.equipOpen,i=t.GlobalConfig.MeridiansSetConfig.equipOpenBS;if(i){var n=0,s=[];t.ViewManager.ins().isCheckOpen(e)&&s.push({type:"equipOpen",img1:"tab_ngzbt01",img2:"tab_ngzbt02"}),t.ViewManager.ins().isCheckOpen(i)&&(s.push({type:"equipOpenBS",img1:"tab_ngzbt12",img2:"tab_ngzbt11"}),this.neiGongBtn.visible=!0,n=s.length-1),this.ngEquiTabBar.itemRenderer=t.NGEquipTab,this.ngEquiTabBar.dataProvider=new eui.ArrayCollection(s),this.ngEquipView.init(1,"otherPlayerView"),this.ngGemstoneView.init(2,"otherPlayerView"),this.ngEquiTabBar.selectedIndex=n,this.onTabTouch(null)}this.redDotMeridians.visible=!1,this.maxLevel=t.GlobalConfig.MeridiansSetConfig.limit,this.maxTipsLabel.text=t.LanguageUtils.language_Meridians_Max_Lv,this.tipsMc=t.ObjectPool.pop("app.MovieClip"),this.tipsMc.blendMode=egret.BlendMode.ADD,this.tipsMc.touchEnabled=!1,this.tipsMc.x=20,this.tipsGP.addChild(this.tipsMc),this.roleMc=t.ObjectPool.pop("app.MovieClip"),this.roleMc.blendMode=egret.BlendMode.ADD,this.roleMc.touchEnabled=!1,this.roleMc.x=20,this.roleGP.addChild(this.roleMc),this.curAttribArr=new eui.ArrayCollection,this.nextAttribArr=new eui.ArrayCollection,this.gCurList.itemRenderer=t.OtherPlayerMeridiansItemCurView,this.gCurList.dataProvider=this.curAttribArr,this.gNextList.itemRenderer=t.MeridiansAttrItemNextView,this.gNextList.dataProvider=this.nextAttribArr,this.txt_level.visible=!1,this.materImg.visible=!1,this.costLabel.visible=!1,this.costTipsLabel.visible=!1,this.btnUp.visible=!1,this.addTouchEvent(this.neiGongBtn,this.onClick),this.addTouchEvent(this.neiGongCloseBtn,this.onClick),this.addChangeEvent(this.ngEquiTabBar,this.onTabTouch),this.initData()},i.prototype.showView=function(){},i.prototype.hideView=function(){this.neiGongGrp.visible=!1},i.prototype.initData=function(){var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.propSet;this.meridiansLevel=i.getMeridians();var n=this.meridiansLevel>=this.maxLevel;n?(this.maxTipsLabel.visible=!0,this.gNextList.visible=!1,this.gCurList.x=110):(this.maxTipsLabel.visible=!1,this.gNextList.visible=!0);for(var s=this.meridiansLevel%10,a=0;9>a;a++)this["meridiansLine"+a].source="Meridians_xian_"+(s>a+1?"1":"2");for(var r,a=0;10>a;a++)r=this["meridiansitemView"+a],r.item.visible=n&&0==s||(s>=a+1?!0:!1),r.setEffPayer(r.item.visible),r.setLights(a+1==s),r.bg.visible=!r.item.visible;this.meridiansShowLevel.setLevelValue(this.meridiansLevel);var o=t.MeridiansData.getMeridiansAttrib(this.meridiansLevel,!1),l=t.MeridiansData.getMeridiansAttrib(this.meridiansLevel+1,!0);this.curAttribArr.source=o,this.nextAttribArr.source=l},i.prototype.onClick=function(e){switch(e.currentTarget){case this.neiGongBtn:var i=t.GlobalConfig.MeridiansSetConfig.equipOpenBS;i&&t.ViewManager.ins().isCheckOpen(i.openLimit)?this.neiGongGrp.visible=!this.neiGongGrp.visible:i&&i.limitStr&&t.UserTips.ins().showUITips(i.limitStr);break;case this.neiGongCloseBtn:this.neiGongGrp.visible=!1}},i.prototype.onTabTouch=function(t){this.ngEquipView.visible=!1,this.ngGemstoneView.visible=!1;var e=this.ngEquiTabBar.selectedItem;e&&("equipOpen"==e.type?this.ngEquipView.visible=!0:"equipOpenBS"==e.type&&(this.ngGemstoneView.visible=!0))},i.prototype.destroy=function(){this.roleMc&&(this.roleMc.destroy(),this.roleMc=null),this.tipsMc&&(this.tipsMc.destroy(),this.tipsMc=null)},i.prototype.removeView=function(){t.DisplayUtils.removeFromParent(this)},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.ngEquipView&&(this.ngEquipView.$onClose(),this.ngEquipView=null),this.ngGemstoneView&&(this.ngGemstoneView.$onClose(),this.ngGemstoneView=null),this.gCurList.itemRenderer=null,this.gCurList.dataProvider=null,this.gCurList.removeChildren(),this.gCurList=null,this.gNextList.itemRenderer=null,this.gNextList.dataProvider=null,this.gNextList.removeChildren(),this.gNextList=null;var i;for(i=0;9>i;i++)this["meridiansLine"+i].source="";for(var n,s=0;10>s;s++)n=this["meridiansitemView"+s],n.destroy(),n=null;egret.Tween.removeTweens(this),this.roleMc&&(this.roleMc.destroy(),this.roleMc=null),this.tipsMc&&(this.tipsMc.destroy(),this.tipsMc=null),this.removeTouchEvent(this.neiGongBtn,this.onClick),this.removeTouchEvent(this.neiGongCloseBtn,this.onClick),this.ngEquiTabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.ngEquiTabBar=null,t.DisplayUtils.removeFromParent(this),t.TimerManager.ins().removeAll(this)},i}(t.BaseEuiView);t.OtherPlayerMeridiansView=e,__reflect(e.prototype,"app.OtherPlayerMeridiansView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._curIndex=-1,i.curItemData=null,i.ruleId=74,i.titleStr=t.LanguageUtils.language_System4,i.dir=4,i.curListInfo=[],i.lastSelected=-1,i.skinName="FashionSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.itemArrayCollection=new eui.ArrayCollection,this.tabBarArrayCollection=new eui.ArrayCollection,this.initView()},i.prototype.initView=function(){this.btn_activat.visible=this.btn_wear.visible=this.lvGrp.visible=!1,this.tabBar.itemRenderer=t.NewTabBarItemRenderer2,this.tabBar.dataProvider=this.tabBarArrayCollection,this.list_cost.itemRenderer=t.FourImagesCostItem,this.list.itemRenderer=t.FashionNewItemRender,this.list.dataProvider=this.itemArrayCollection,this.scroller.horizontalScrollBar.autoVisibility=!1,this.scroller.horizontalScrollBar.visible=!1,this.addTouchEvent(this.btn_activat,this.onTouchAp),this.addTouchEvent(this.btn_wear,this.onTouchAp),this.addTouchEvent(this.btn_upgrade,this.onTouchAp),this.addTouchEvent(this.btn_inverse,this.onTouchAp),this.addTouchEvent(this.btn_along,this.onTouchAp),this.addChangeEvent(this.tabBar,this.onTabTouch),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.await.setData(t.RoleAction.Await,this.callFunc,this),this.attack.setData(t.RoleAction.Attack,this.callFunc,this),this.walk.setData(t.RoleAction.Walk,this.callFunc,this),this.run.setData(t.RoleAction.Run,this.callFunc,this),this.observe(t.FashionMgr.ins().post_51_1,this.updateCurInfo),this.observe(t.FashionMgr.ins().post_51_2,this.wearFashionData),this.observe(t.FashionMgr.ins().post_51_3,this.activationData),this.observe(t.FashionMgr.ins().post_51_4,this.fashionUpData),this.observe(t.BagMgr.ins().post_8_1,this.setCurFashionCost),this.observe(t.BagMgr.ins().post_8_4,this.setCurFashionCost),this.observe(t.BagMgr.ins().post_8_3,this.setCurFashionCost),this.setTabArray(),this.createPlayerModel(),t.FashionMgr.ins().send_51_1(),this._curIndex=0,this.tabBar.selectedIndex=this._curIndex,this.fashionAtrrView=new t.FashionAtrrView,this.fashionAtrrGroup.addChild(this.fashionAtrrView)},i.prototype.setTabArray=function(){var e=t.GlobalConfig.FashionattributeConfig,i=[];for(var n in e){var s=e[n],a="",r=0;for(var o in s)if(s[o].tabImg){a=s[o].tabImg,r=s[o].type;break}i.push({tabType:r,tabImg:a,isMy:0})}this.tabBarArrayCollection.replaceAll(i)},i.prototype.createPlayerModel=function(){this.modelCharRole=t.ObjectPool.pop("app.ModelCharRole"),this.modelCharRole.propSet=new t.PropertySet,this.modelCharRole.showBodyContainer();var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.propSet.getSex();this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.AP_SEX,i),e.propSet.getFacte()?(this.modelCharRole.initHair(ResDirEnum.RES_DIR_HAIR+e.propSet.getFacteStr()+"_"+i),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.AP_FACE_ID,e.propSet.getFacte())):this.modelCharRole.initHair(null),e.propSet.getWeapon()?(this.modelCharRole.setWeaponFileName(e.propSet.getWeaponStr()),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.AP_WEAPON,e.propSet.getWeapon())):this.modelCharRole.setWeaponFileName(null),this.modelCharRole.initBody(ResDirEnum.RES_DIR_BODY+e.propSet.getBodyStr()+"_"+i),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE,e.propSet.getFashionDisplayStr()),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.AP_BODY_ID,e.propSet.getBody()),this.modelCharRole.setBodyEff(e.propSet.getBodyEFFStr()),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.ACTOR_FASHION_DISPLAY,e.propSet.getValue(t.ActorPropertyModel.ACTOR_FASHION_DISPLAY)),this.modelCharRole.setWeaponEff(e.propSet.getWeaponEffStr()),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY,e.propSet.getValue(t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY)),this.bodyContainer.addChild(this.modelCharRole),this.modelCharRole.addSpecialMC(),this.modelCharRole.dir=4},i.prototype.setDisplay=function(){var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.propSet.getSex();if(this.curItemData&&this.curItemData.itemInfo){var n=this.curItemData.itemInfo;2==n.type?(this.modelCharRole.updateSuit(0),e.propSet.getFacte()&&this.modelCharRole.initHair(ResDirEnum.RES_DIR_HAIR+e.propSet.getFacteStr()+"_"+i),n.display?this.modelCharRole.initBody(ResDirEnum.RES_DIR_BODY+this.getBodyStr(n.display)):this.modelCharRole.initBody(ResDirEnum.RES_DIR_BODY+e.propSet.getBodyStr()+"_"+i),n.back?this.modelCharRole.setBodyEff(this.getBodyEffStr(n.back)):this.modelCharRole.setBodyEff("")):1==n.type?(this.modelCharRole.updateSuit(0),e.propSet.getFacte()&&this.modelCharRole.initHair(ResDirEnum.RES_DIR_HAIR+e.propSet.getFacteStr()+"_"+i),n.display?this.modelCharRole.setWeaponFileName(this.getWeaponStr(n.display)):e.propSet.getWeapon()?this.modelCharRole.setWeaponFileName(e.propSet.getWeaponStr()):this.modelCharRole.setWeaponFileName(null),n.back?this.modelCharRole.setWeaponEff(this.getWeaponEffStr(n.back)):this.modelCharRole.setWeaponEff("")):3==n.type&&n.display&&this.modelCharRole.updateSuit(n.display)}},i.prototype.getWeaponEffStr=function(e){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getSex();return"weaponeff"+this.PrefixInteger(e,3)+"_"+n},i.prototype.getWeaponStr=function(e){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getSex();return"weapon"+this.PrefixInteger(e,3)+"_"+n},i.prototype.getBodyEffStr=function(e){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getSex();return"bodyeff_"+e+"_"+n},i.prototype.getBodyStr=function(e){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getSex();return"body"+this.PrefixInteger(e,3)+"_"+n},i.prototype.PrefixInteger=function(t,e){return(Array(e).join("0")+t).slice(-e)},i.prototype.updateCurInfo=function(){-1!=this._curIndex&&this.setOpenIndex(this._curIndex)},i.prototype.activationData=function(e){if(0==e){for(var i=t.EquipItemMgr.ins().otherPlayerEquips.fashionDic,n=0;n<this.curListInfo.length;n++){var s=this.curListInfo[n];i&&i[s.itemInfo.id]&&1==i[s.itemInfo.id].state?(s.dressState=1,s.Lv=1):s.dressState=0}this.itemArrayCollection.replaceAll(this.curListInfo),this.setCurFashionCost()}},i.prototype.fashionUpData=function(e){if(0==e&&this.curItemData&&this.curItemData.itemInfo&&this.curListInfo){var i=t.EquipItemMgr.ins().otherPlayerEquips.fashionDic;i[this.curItemData.itemInfo.id]&&this.curListInfo[this.lastSelected]&&(this.curListInfo[this.lastSelected].Lv=i[this.curItemData.itemInfo.id].lv,this.itemArrayCollection.replaceAll(this.curListInfo),this.setCurFashionCost())}},i.prototype.wearFashionData=function(e){if(0==e)this.btn_wear.label=t.LanguageUtils.language_Omission_txt36,this.curListInfo&&this.curListInfo[this.lastSelected]&&(this.curListInfo[this.lastSelected].dressState=0,this.itemArrayCollection.replaceAll(this.curListInfo));else{this.btn_wear.label=t.LanguageUtils.language_Omission_txt37;for(var i=t.EquipItemMgr.ins().otherPlayerEquips.fashionDic,n=0;n<this.curListInfo.length;n++){var s=this.curListInfo[n];i&&i[s.itemInfo.id]&&1==i[s.itemInfo.id].state?s.dressState=1:s.dressState=0}this.itemArrayCollection.replaceAll(this.curListInfo)}},i.prototype.onTabTouch=function(t){this._curIndex=t.currentTarget.selectedIndex,this.setOpenIndex(t.currentTarget.selectedIndex)},i.prototype.setScrollerH=function(){t.TimerManager.ins().remove(this.updateScrollerH,this),t.TimerManager.ins().doTimer(50,2,this.updateScrollerH,this)},i.prototype.updateScrollerH=function(){if(this.lastSelected<=3)this.scroller.viewport.scrollH=0;else{var t=Math.floor((this.scroller.viewport.contentWidth-this.scroller.viewport.width)/(this.lastSelected+1)),e=t*(this.lastSelected+1);e>this.scroller.viewport.contentWidth-this.scroller.viewport.width&&(e=this.scroller.viewport.contentWidth-this.scroller.viewport.width),this.scroller.viewport.scrollH=e}},i.prototype.callFunc=function(e){switch(e){case t.RoleAction.Await:this.modelCharRole.playStand();break;case t.RoleAction.Attack:this.modelCharRole.playAttack();break;case t.RoleAction.Walk:this.modelCharRole.playWalk();break;case t.RoleAction.Run:this.modelCharRole.playRun()}},i.prototype.onTouchAp=function(e){var i=t.EquipItemMgr.ins().otherPlayerEquips.fashionDic;switch(e.currentTarget){case this.btn_activat:this.curItemData&&this.curItemData.itemInfo&&t.FashionMgr.ins().send_51_3(this.curItemData.itemInfo.id);break;case this.btn_wear:this.curItemData&&this.curItemData.itemInfo&&i[this.curItemData.itemInfo.id]&&t.FashionMgr.ins().send_51_2(this.curItemData.itemInfo.id,i[this.curItemData.itemInfo.id].state?0:1);break;case this.btn_upgrade:this.curItemData&&this.curItemData.itemInfo&&i[this.curItemData.itemInfo.id]&&t.FashionMgr.ins().send_51_4(this.curItemData.itemInfo.id);break;case this.btn_along:this.dir+=1,this.dir>8&&(this.dir=this.dir%8),this.modelCharRole.dir=this.dir;break;case this.btn_inverse:this.dir-=1,this.dir<0&&(this.dir=8),this.modelCharRole.dir=this.dir}},i.prototype.onItemTap=function(t){this.lastSelected>=0&&(this.curListInfo[this.lastSelected].wearState=0),this.lastSelected=this.list.selectedIndex,this.curItemData=t.item,this.list.dataProvider&&this.lastSelected>-1&&this.lastSelected<this.list.dataProvider.length&&(this.curListInfo[this.list.selectedIndex].wearState=1),this.itemArrayCollection.replaceAll(this.curListInfo),this.setDisplay(),this.setCurFashionCost()},i.prototype.setOpenIndex=function(e){var i=t.GlobalConfig.FashionattributeConfig[e+1];this.curListInfo=[];var n=t.EquipItemMgr.ins().otherPlayerEquips.fashionDic;if(i){var s=0;for(var a in i)this.curListInfo.push({itemInfo:i[a],wearState:0,dressState:0,Lv:0,isMy:0});for(var r=0;r<this.curListInfo.length;r++){var o=this.curListInfo[r];n&&n[o.itemInfo.id]&&(o.Lv=n[o.itemInfo.id].lv,1==n[o.itemInfo.id].state&&(o.wearState=1,o.dressState=1,this.lastSelected=r,s=1,this.curItemData=o))}0==s&&this.curListInfo&&this.curListInfo[0]&&(this.curListInfo[0].wearState=1,this.lastSelected=0,this.curItemData=this.curListInfo[0]),this.list.selectedIndex=this.lastSelected,this.itemArrayCollection.replaceAll(this.curListInfo),this.setDisplay(),this.setCurFashionCost(),this.setScrollerH()}},i.prototype.setCurFashionCost=function(){if(this.list_cost.visible=!1,this.curItemData&&this.curItemData.itemInfo){var e=this.curItemData.itemInfo,i=t.EquipItemMgr.ins().otherPlayerEquips.fashionDic;
i&&i[e.id]?this.fashionAtrrView.setAttr(e.id,i[e.id].lv,1,3==e.type?1:0):this.fashionAtrrView.setAttr(e.id,0,1,3==e.type?1:0)}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.removeTouchEvent(this.btn_inverse,this.onTouchAp),this.removeTouchEvent(this.btn_along,this.onTouchAp),this.removeTouchEvent(this.btn_activat,this.onTouchAp),this.removeTouchEvent(this.btn_wear,this.onTouchAp),this.removeTouchEvent(this.btn_upgrade,this.onTouchAp),this.fashionAtrrView&&this.fashionAtrrView.destroy(),this.modelCharRole&&this.modelCharRole.destruct()},i}(t.BaseEuiView);t.OtherPlayerNewFashionView=e,__reflect(e.prototype,"app.OtherPlayerNewFashionView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.redPoint.visible=!1,this.iconDark.source=this.data.tabImg+"_d",this.iconLight.source=this.data.tabImg+"_u")},e}(t.BaseItemRender);t.OtherNewPlayerRingTabView=e,__reflect(e.prototype,"app.OtherNewPlayerRingTabView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.mcName="",i.playerJob=0,i.curSelect=0,i.ruleId=0,i.titleStr=t.LanguageUtils.language_System66,i.skinName="NewRingSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.txt_max.visible=!1,this.iconList.itemRenderer=t.OtherNewPlayerRingTabView,this.listCost.itemRenderer=t.FourImagesCostItem,this.itemList.itemRenderer=t.RingAttrItemView,this.itemArr=new eui.ArrayCollection,this.itemList.dataProvider=this.itemArr,this.ringEff||(this.ringEff=t.ObjectPool.pop("app.MovieClip"),this.ringEff.touchEnabled=!1,this.mcGroup.addChild(this.ringEff));var i=t.EquipItemMgr.ins().otherPlayerEquips;this.playerJob=i.propSet.getAP_JOB(),this.addChangeEvent(this.iconList,this.onTabTouch),this.init(),this.iconList.selectedIndex=0,this.curSelect=0,this.txt_get.visible=!1,this.updateData(),this.setRuleId()},i.prototype.init=function(){var e=t.EquipItemMgr.ins().otherPlayerEquips,i=t.GlobalConfig.RingTabConfig,n=(e.strengthenDic[t.StrengthenType.Special],e.strengthenDic[t.StrengthenType.RingJob],[]);for(var s in i){var a=!0;if(t.ViewManager.ins().isCheckOpen(i[s].showLimit)){if(i[s].ringLimit)for(var r in i[s].ringLimit)if(a=this.getRingInfo(i[s].ringLimit[r]),!a)break;a&&n.push(i[s])}}this.iconList.dataProvider=new eui.ArrayCollection(n)},i.prototype.getRingInfo=function(e){var i=t.EquipItemMgr.ins().otherPlayerEquips,n=t.GlobalConfig.RingTabConfig[e];if(n){var s=i.strengthenDic[t.StrengthenType.Special],a=i.strengthenDic[t.StrengthenType.RingJob],r=1==n.type?s:a;if(r)for(var o in r)if(r[o].pos==e&&r[o].lv>=1)return!0}return!1},i.prototype.setRuleId=function(){var e=this.iconList.dataProvider.getItemAt(this.iconList.selectedIndex);e&&(e.ruleid?this.ruleId=e.ruleid:this.ruleId=0,t.EventManager.ins().sendEvent(t.CompEvent.OTHER_ROLE_UPDATE_RULE,t.RoleTabEnum.RING))},i.prototype.onTouchAp=function(e){switch(e.currentTarget){case this.btn_strengthen:var i=this.iconList.dataProvider.getItemAt(this.iconList.selectedIndex);if(i){var n=1==i.type?t.StrengthenType.Special:t.StrengthenType.RingJob;t.StrengthenMgr.ins().sendStrengthenInfo(n,i.id)}}},i.prototype.onTabTouch=function(t){this.curSelect=t.currentTarget.selectedIndex,this.updateData(),this.setRuleId()},i.prototype.updateData=function(){var e=t.EquipItemMgr.ins().otherPlayerEquips;this.txt_max.visible=this.redDot.visible=!1,this.listCost.visible=this.btn_strengthen.visible=this.txt_get.visible=!1;var i=e.strengthenDic[t.StrengthenType.Special],n=e.strengthenDic[t.StrengthenType.RingJob],s=this.iconList.dataProvider.getItemAt(this.iconList.selectedIndex);if(s){this.btn_strengthen.label=1==s.type?t.LanguageUtils.language_System84:t.LanguageUtils.language_System83;var a=1==s.type?i:n,r=t.GlobalConfig.SpecialRingConfig[s.id];for(var o in a)if(a[o].pos==s.id)return this.bt_lv.visible=1==s.type?!0:!1,this.bt_lv.text=a[o].lv+"",this.mcName=s.ringeff,this.strengthen_name.source=s.ringname,this.txt_max.visible=2==s.type&&1==a[o].lv||1==s.type&&a[o].lv==Object.keys(r).length-1?!0:!1,this.txt_max.text=1==s.type?t.LanguageUtils.language_Omission_txt115:t.LanguageUtils.language_System85,this.ringEff.playFileEff(ResDirEnum.RES_DIR_EFF+s.ringeff,-1),void this.setAttrList(a[o].lv,a[o].pos,s.type);this.txt_max.visible=2==s.type?!0:!1,this.txt_max.text=2==s.type?"未激活":"",this.bt_lv.visible=1==s.type?!0:!1,this.bt_lv.text="0",this.mcName=s.ringeff,this.strengthen_name.source=s.ringname,this.ringEff.playFileEff(ResDirEnum.RES_DIR_EFF+s.ringeff,-1);var l=1==s.type?0:1;this.setAttrList(l,s.id,s.type)}},i.prototype.setAttrList=function(e,i,n){void 0===n&&(n=1),this.curAttr.text="",this.nextAttr.text="";var s="";if(1==n){s=this.getAttrStr(i,e);var a=this.getAttrStr(i,e+1);s&&(this.curAttr.textFlow=t.TextFlowMaker.generateTextFlow(s)),a?(this.arrow.visible=!0,this.nextAttr.textFlow=t.TextFlowMaker.generateTextFlow(a)):this.arrow.visible=!1}else this.arrow.visible=!1,s=this.getAttrStr(i,e,n),s&&(this.curAttr.textFlow=t.TextFlowMaker.generateTextFlow(s))},i.prototype.getAttrStr=function(e,i,n){void 0===n&&(n=1);var s;s=1==n?t.GlobalConfig.SpecialRingConfig[e][i]:t.GlobalConfig.RingBuyJobConfig[e][i][this.playerJob];var a=null;if(s){var r=[],o="",l=1==n?"0xcbc2b2":"0x28ee01";a="";for(var h in s.attr)r.push(s.attr[h]);for(var h=0;h<r.length;h++)o=t.AttributeData.getItemAttStrByType(r[h],r,1,!1,!0,"0xE0AE75",l),""!=o&&(a+=o+"\n")}return a},i.prototype.setCostList=function(e,i,n){void 0===n&&(n=1);var s;if(1==n)s=t.GlobalConfig.SpecialRingConfig[i][e+1],s?(this.curCfg=s,this.redDot.visible=t.CurrencyUtils.isRedDot(s.cost)?!0:!1,this.listCost.dataProvider=new eui.ArrayCollection(s.cost)):(this.listCost.visible=!1,this.redDot.visible=!1);else if(s=t.GlobalConfig.RingBuyJobConfig[i][e][this.playerJob]){this.curCfg=s;var a=this.getRingInfo(i);a||(this.redDot.visible=t.CurrencyUtils.isRedDot(s.cost)?!0:!1),this.listCost.dataProvider=new eui.ArrayCollection(s.cost)}else this.listCost.visible=!1,this.redDot.visible=!1},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.iconList.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this)},i}(t.BaseEuiView);t.OtherNewPlayerRingView=e,__reflect(e.prototype,"app.OtherNewPlayerRingView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.ruleId=98,i.titleStr=t.LanguageUtils.language_System101,i.skinName="RolePetSkin",i.touchEnabled=!1,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.petMc||(this.petMc=t.ObjectPool.pop("app.MovieClip"),this.petMc.touchEnabled=!1,this.effGrp.addChild(this.petMc)),this.iconList.itemRenderer=t.RolePetItem;var e=this.getPetDataList();this.iconList.dataProvider=new eui.ArrayCollection(e),this.iconList.selectedIndex=0,this.btn_goOut.visible=!1,this.addChangeEvent(this.iconList,this.onTabTouch),t.PetSettingTwoMgr.ins().send_35_1(),this.updateData()},i.prototype.onTabTouch=function(t){this.updateData()},i.prototype.updateData=function(){var e=this.iconList.dataProvider.getItemAt(this.iconList.selectedIndex);this.imgName.source=e.nameIcon,this.petMc.playFileEff(ResDirEnum.RES_DIR_PET+e.icon,-1),this.iconState.visible=!1,this.labTips.text=e.PetStr;var i=[];for(var n in e.attr)i.push(e.attr[n]);var s,a="",r=t.EquipItemMgr.ins().otherPlayerEquips;if(r&&(s=r.peiInfo[e.id]),s&&s.time>0&&s.time>t.GlobalData.serverTime){this.iconState.source="chongwu_btn2",this.iconState.visible=!0;var o=Math.floor((s.time-t.GlobalData.serverTime)/1e3);a+="|C:0x28ee01&T:"+(t.LanguageUtils.language_Common_65+t.DateUtils.getFormatBySecond(o,t.DateUtils.TIME_FORMAT_18))+"|";for(var n=0;n<i.length;n++){var l=t.AttributeData.getItemAttStrByType(i[n],i,1,!1,!0,"0xE0AE75","0x28ee01");""!=l&&(a+="\n"+l)}this.labTips.textColor=16742144}else{this.iconState.source="chongwu_btn1",this.iconState.visible=!0,a+=t.LanguageUtils.language_System72;for(var n=0;n<i.length;n++){var l=t.AttributeData.getItemAttStrByType(i[n],i,1,!1,!0);""!=l&&(a+="\n"+l)}this.labTips.textColor=15064527}this.labAttribute.textFlow=t.TextFlowMaker.generateTextFlow(a)},i.prototype.getPetDataList=function(){var e=t.GlobalConfig.lootPetConfig,i=[];for(var n in e){var s=t.CommonUtils.objectToArray(e[n]),a=s[0];i.push({type:a.type,id:a.id,attr:a.attr,icon:a.icon,nameIcon:a.nameIcon,PetStr:a.PetStr})}return i.sort(function(t,e){return t.type-e.type}),i},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.iconList.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this)},i}(t.BaseEuiView);t.OtherRolePetView=e,__reflect(e.prototype,"app.OtherRolePetView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.redDot.visible=!1,this.labelDisplay.text="升 级"},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(eui.Button);t.OtherPlayerRingBtnItemView=e,__reflect(e.prototype,"app.OtherPlayerRingBtnItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.maxSize=5,t.isInit=!0,t.selectedIndex=0,t.skinName="RingSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.redDot.updateShowFunctions=null,this.redDot.visible=!1,this.btn_strengthen.visible=!1,this.flipPage=new t.FlipPage(null,this.btn_prev,this.btn_next),this.flipPage.maxLength=5,this.flipPage.type=t.FlipPageType.Special,this.flipPage.addEventListener(t.CompEvent.PAGE_CHANGE,this.onPageChange,this);var e=t.GlobalConfig.SpecialRingConfig,i=Object.keys(e).length,n=i>=this.maxSize;this.flipPage.setHide(n),this.dataAry=[],this.txt_max.visible=!1,this.img_money.visible=!1,this.txt_consume.visible=!1,this.listCost.visible=!1,this.iconArrayCollection=new eui.ArrayCollection,this.iconList.itemRenderer=t.RingIconItemView,this.iconList.dataProvider=this.iconArrayCollection,this.iconList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.itemArrayCollection=new eui.ArrayCollection,this.itemList.itemRenderer=t.RingAttrItemView,this.itemList.dataProvider=this.itemArrayCollection,t.StrengthenMgr.ins().sendStrengthenInit(t.StrengthenType.Special),this.initPageData()},i.prototype.initPageData=function(){var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.getAllRingData(),n=i;n&&this.flipPage.setData(n),this.flipPage.currentPage=1},i.prototype.onItemTap=function(t){this.selectedIndex=t.itemIndex,this.selectedItem=t.item,this.onRefreshTab(),this.setStrengthenData()},i.prototype.onRefreshTab=function(){this.selectedItem&&this.setTabData(this.showData)},i.prototype.setTabData=function(e){void 0===e&&(e=null),this.tabArr?this.tabArr.length=0:this.tabArr=[];for(var i,n=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Special],s=n.name,a=0;a<e.length;a++)for(var r in s)if(s[r].ringid==e[a].pos){i=0,this.selectedItem?this.selectedItem.pos==e[a].pos&&(i=1):0==a&&(i=1),this.tabArr.push({name:s[r].ringpc.ringpcid,pos:e[a].pos,lv:e[a].lv,job:e[a].job,isShow:i});break}this.iconArrayCollection.replaceAll(this.tabArr)},i.prototype.onPageChange=function(t){var e=t.data;this.showData=e,this.setTabData(e),this.setStrengthenData()},i.prototype.setStrengthenData=function(){var e;this.showData&&!this.selectedItem?(e=this.showData[this.selectedIndex],this.curCfg=e,e&&(this.bt_lv.text=e.lv+"",this.nextCfg=t.ModelManager.ins().roleModel.getRingConfig(e.pos,e.lv+1,e.job),this.setAttr(e.lv,e.pos,e.job))):this.selectedItem&&(e=t.ModelManager.ins().roleModel.getRingConfig(this.selectedItem.pos,this.selectedItem.lv,this.selectedItem.job),this.curCfg=e,e&&(this.bt_lv.text=e.lv+"",this.nextCfg=t.ModelManager.ins().roleModel.getRingConfig(e.pos,e.lv+1,e.job),this.setAttr(e.lv,e.pos,e.job))),this.showConsume(this.nextCfg)},i.prototype.setRuleId=function(){var e=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Special],i=e.name;if(this.curCfg){var n=i[this.curCfg.pos-1].ringpc.ruleid;n&&this.callFunc?this.callFunc(n):this.callFunc&&this.callFunc(0)}},Object.defineProperty(i.prototype,"curPageData",{get:function(){var e,i=t.EquipItemMgr.ins().otherPlayerEquips,n=i.getAllRingData();if(n&&n.length>0){var s=void 0;e=[];for(var a=this.flipPage.currentPage,r=(a-1)*this.maxSize,o=a*this.maxSize;o>r&&r<n.length;r++)s=t.GlobalConfig.SpecialRingConfig[n[r].pos][n[r].lv],e.push(s)}return e},enumerable:!0,configurable:!0}),i.prototype.showConsume=function(e){void 0===e&&(e=null),this.txt_max.visible=!1;var i=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Special],n=i.name;for(var s in n)if(n[s].ringid==this.curCfg.pos){this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mcGroup.addChild(this.mc)),this.mcName!=n[s].ringpc.ringpcid&&this.mc.playFileEff(ResDirEnum.RES_DIR_EFF+n[s].ringpc.ringpcid,-1),this.strengthen_name.source=n[s].ringpc.ringname;break}if(1==this.curCfg.pos)this.bt_lv.visible=!0;else{this.bt_lv.visible=!1;for(var a=t.EquipItemMgr.ins().otherPlayerEquips,r=a.strengthenDic[t.StrengthenType.RingJob],o=!1,l=0,h=r&&r.length;h>l;l++)r[l].pos==this.curCfg.pos&&(o=!0);this.txt_max.text=t.LanguageUtils.language_System85,o&&(this.txt_max.visible=!0)}},i.prototype.setAttr=function(e,i,n){var s;s=t.ModelManager.ins().roleModel.getRingAttr(e,i,n),e++,this.cfg1Dic=t.ModelManager.ins().roleModel.getRingAttr(e,i,n);var a,r,o,l,h,p=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Special],u=[],c=[],g=[],d=[],m=[];for(r=0;r<p.attr.length;r++)a={},a.type=p.attr[r],a.value=0,c.push(a);var f=0;if(s){for(var v in s)for(r=0;r<s[v].attr.length;r++){var _={};_.type=s[v].attr[r].type,f=s[v].attr[r].value,_.value=f,m.push(_)}for(o=0,l=c.length;l>o;o++)for(r=0;r<m.length;r++){var y=m[r].type;y==c[o].type&&(c[o].value+=m[r].value)}var T=[];for(r=0;r<c.length;r++){var M=m.filter(function(t){return t.type==c[r].type});M[0]&&T.push(M[0])}for(r=0;r<c.length;r++)for(var C=0;C<T.length;C++)c[r].type==T[C].type&&(h=t.AttributeData.getItemAttStrByType(c[r],c,1,!1,!0,"0xE0AE75","0xcbc2b2"),""!=h&&g.push(h))}for(r=0;r<c.length;r++)c[r].value=0;var b="|C:0xE0AE75&T:"+t.LanguageUtils.language_Friend_Txt1+"：||C:0xcbc2b2&T:"+(e-1)+"|";if(1==i&&g.unshift(b),m.length=0,this.cfg1Dic){for(var v in this.cfg1Dic)for(r=0;r<this.cfg1Dic[v].attr.length;r++){var _={};_.type=this.cfg1Dic[v].attr[r].type,f=this.cfg1Dic[v].attr[r].value,_.value=f,m.push(_)}for(o=0,l=c.length;l>o;o++)for(r=0;r<m.length;r++){var y=m[r].type;y==c[o].type&&(c[o].value+=m[r].value)}var T=[];for(r=0;r<c.length;r++){var M=m.filter(function(t){return t.type==c[r].type});M[0]&&T.push(M[0])}for(r=0;r<c.length;r++)for(var I=0;I<T.length;I++)c[r].type==T[I].type&&(h=t.AttributeData.getItemAttStrByType(c[r],c,1,!1,!0,"0xE0AE75","0x28ee01"),""!=h&&d.push(h));var S="|C:0xE0AE75&T:"+t.LanguageUtils.language_Friend_Txt1+"：||C:0x28ee01&T:"+e+"|";d.unshift(S)}for(var E=0,w=g.length;w>E;E++)d.length<E?u.push({desc1:g[E],desc2:null}):u.push({desc1:g[E],desc2:d[E]});this.setData(u)},i.prototype.setData=function(t){this.creatItem(t)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this.itemArrayCollection.replaceAll(this.dataAry)},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.flipPage&&(this.flipPage.removeEventListener(t.CompEvent.PAGE_CHANGE,this.onPageChange,this),this.flipPage.destory(),this.flipPage=null),this.mcName=null,this.mc&&(this.mc.destroy(),this.mc=null),this.dataAry.length=0,this.dataAry=null,this.itemArrayCollection.removeAll(),this.itemArrayCollection=null,this.iconArrayCollection.removeAll(),this.iconArrayCollection=null,this.tabArr.length=0,this.tabArr=null,this.nextCfg=null,t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.OtherPlayerRingView=e,__reflect(e.prototype,"app.OtherPlayerRingView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._itemArrayCollection=null,t.maxHight=415,t._type=0,t.itemId=261,t.ruleId=0,t.titleStr="",t.isMoving=!1,t.skinName="SkillSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.init()},i.prototype.open=function(e){e&&(this._type=e.type),0==this._type?(this.ruleId=5,this.titleStr=t.LanguageUtils.language_System5):1==this._type&&(this.ruleId=6,this.titleStr=t.LanguageUtils.language_System6)},i.prototype.init=function(){this._scrollViewContainer||(this._scrollViewContainer=new t.ScrollViewContainer(this.container),this._scrollViewContainer.callFunc([this.onScrollerChange,this.onScrollerEnd,null],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.itemRenderer=t.OtherPlayerSkillItemView,this._itemArrayCollection=new eui.ArrayCollection,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.txt_get.visible=!1),this.updateSkillList()},i.prototype.updateSkillList=function(){t.TimerManager.ins().remove(this.updateSkillList,this);var e,i,n,s,a=t.EquipItemMgr.ins().otherPlayerEquips.skills,r=t.EquipItemMgr.ins().otherPlayerEquips.job,o=0,l=-1,h=[];for(var p in t.GlobalConfig.SkillConf)if(e=t.GlobalConfig.SkillConf[p],o=0,t.ViewManager.ins().isCheckOpen(e.isShowNeed)&&!e.isDelete){if(e.vocation==r||0==e.vocation){i=a[e.id],i&&(o=i.skillLevel),n=t.GlobalConfig.SkillsLevelConf[e.id][o],s=t.GlobalConfig.SkillsLevelConf[e.id][o+1];var u=!0;if(e){if(1==this._type){if(3!=e.skillClass)continue}else if(1!=e.skillClass)continue;l=-1,n?h.push({skillId:e.id,level:o,name:e.name,state:l,dragName:"skillIcon_"+e.skillType+h.length,icon:n.skillName,isMax:!s,isUpgrade:u,skillType:e.skillType}):h.push({skillId:e.id,level:o,name:e.name,state:l,dragName:"skillIcon_"+e.skillType+h.length,icon:s.skillName,isMax:!s,isUpgrade:u,skillType:e.skillType})}}this._itemArrayCollection.replaceAll(h)}},i.prototype.onGetProps=function(){var e=t.GlobalConfig.GetItemRouteConfig[this.itemId];t.ViewManager.ins().isShow(t.GaimItemWin)||t.ViewManager.ins().open(t.GaimItemWin,e.itemid,{x:this.x,y:this.y},{height:this.height,width:this.width})},i.prototype.onDragStart=function(t){this.isMoving=!0,this._scroller.scrollPolicyV=eui.ScrollPolicy.OFF},i.prototype.onDragEnd=function(t){this.isMoving=!1,this._scroller.scrollPolicyV=eui.ScrollPolicy.AUTO},i.prototype.onScrollerChange=function(){for(var t,e=0;e<this._list.numChildren;e++)t=this._list.getChildAt(e),t&&t.removeListener()},i.prototype.onScrollerEnd=function(){for(var t,e=0;e<this._list.numChildren;e++)t=this._list.getChildAt(e),t&&t.addListener()},i.prototype.callFunc=function(e,i,n){this.curIdx=e,this.curSkillId=i,this.curSkillLev=n,t.SkillMgr.ins().send_5_3(i)},i.prototype.$onClose=function(){for(e.prototype.$onClose.call(this);this._list.numChildren>0;){var i=this._list.getChildAt(0);i.destroy(),i=null}this._scrollViewContainer.destory(),this._scrollViewContainer=null,this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,t.DisplayUtils.removeFromParent(this.container)},i}(t.BaseEuiView);t.OtherPlayerBasicSkillView=e,__reflect(e.prototype,"app.OtherPlayerBasicSkillView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.closeTips=function(){t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_CLOSE_SKILL_DESC)},i.prototype.showTips=function(e){t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_SKILL_DESC,e)},i}(t.RoleSkillItemView);t.OtherPlayerSkillItemView=e,__reflect(e.prototype,"app.OtherPlayerSkillItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.iconBg="qh_icon_bg",i.iconUrl=t.LanguageUtils.language_Omission_txt43,i.selectPosLv=0,i.pointAry=[],i.itemSlotAry=[],i.skinName="StrengthenSkin",i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(!this.pointAry.length){for(var n=void 0,s=0;8>s;s++)n=this.icon_group.getChildByName("icon_"+s),this.pointAry.push({x:n.x,y:n.y}),this.itemSlotAry.push(n);this.itemList.itemRenderer=t.StrengthenAttrItemView,this.itemArrayCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemArrayCollection,this.txt_consume.text=t.LanguageUtils.language_Omission_txt4,this.txt_get.textFlow=t.TextFlowMaker.generateTextFlow("<a><u>"+t.LanguageUtils.language_Common_155+"<u></a>")}this.updateData()},i.prototype.updateData=function(){var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.strengthenDic[t.StrengthenType.Equip];if(!i.length)for(var n=void 0,s=1;8>=s;s++)n=new t.StrengthenData,n.lv=0,n.pos=s,i.push(n);if(this.group2.visible=!1,i){var a=void 0,n=void 0,r=i[0].lv;this.selectPosLv=r,this.selectPos=1;for(var o=7,s=0;8>s;s++)a=this.itemSlotAry[s],n=i[s],a.setData(t.LanguageUtils.language_Omission_txt43[s][0],t.LanguageUtils.language_Omission_txt43[s][1],n.lv),n.lv<r&&(r=n.lv,this.selectPosLv=n.lv,this.selectPos=n.pos,o=s-1,this.txt_desc.text=t.LanguageUtils.language_Omission_txt43[s][1]+t.LanguageUtils.language_Common_154+":"+r+t.LanguageUtils.language_Common_1,this.txt_desc2.text=r+1+t.LanguageUtils.language_Common_1);o=0>o?7:o;for(var l=void 0,h=void 0,s=0;8>s;s++)l=this.pointAry[s],h=Math.abs((this.selectPos-1+s)%8),a=this.itemSlotAry[h],a.x=l.x,a.y=l.y;var p=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Equip];if(p){for(var u=p.name,s=0;8>s;s++)if(+u[s].equipid==this.selectPos){this.selectImg.source=u[s].equippc.equippcid,this.selectName.source=u[s].equippc.equipname;break}n=i[o];var c=t.GlobalConfig.EquipStrengthenConfig[n.pos][n.lv],g=t.GlobalConfig.EquipStrengthenConfig[this.selectPos][r+1];this.txt_max.visible=!g;var d={},m={},f=[],v=void 0,_=null,y=[];if(c)for(var s=0;s<c.attrnew.length;s++)m[c.attrnew[s].type]=c.attrnew[s].value;if(g)for(var s=0;s<g.attrnew.length;s++)d[g.attrnew[s].type]=g.attrnew[s].value;for(var s=0;s<p.attrnew.length;s++)c?(_=null,v=p.attrnew[s].des+":",y=p.attrnew[s].att,y.length>1?(v+=m[y[0]]?m[y[0]]:0,v+="-",v+=m[y[1]]?m[y[1]]:0):(v+="+",v+=m[y[0]]?m[y[0]]:0),g&&(_=p.attrnew[s].des+":",y.length>1?(_+=d[y[0]]?d[y[0]]:0,_+="-",_+=d[y[1]]?d[y[1]]:0):(_+="+",_+=d[y[0]]?d[y[0]]:0))):g&&(v=p.attrnew[s].des+":0",_=p.attrnew[s].des+":",y=p.attrnew[s].att,y.length>1?(_+=d[y[0]]?d[y[0]]:0,_+="-",_+=d[y[1]]?d[y[1]]:0):(_+="+",_+=d[y[0]]?d[y[0]]:0)),f.push({desc1:v,desc2:_});this.itemArrayCollection.replaceAll(f)}}},i.prototype.init=function(){},i.prototype.onOver=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=(i.localToGlobal(),t.GlobalConfig.StdItems[this.selectedId]),s=i.localToGlobal();if(n){var a=t.TipsType.TIPS_EQUIP;a=n.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,n,{x:s.x+i.width/2,y:s.y+i.height/2})}}},i.prototype.getItemVisible=function(){this.txt_get.visible=!1;var e;if(this.cfg1Dic){for(var i in this.cfg1Dic){e=this.cfg1Dic[i].cost[0].id;break}var n=t.GlobalConfig.GetItemRouteConfig[e],s=t.GlobalData.sectionOpenDay,a=n.itemstr;this.txt_get.textFlow=null,n.openParam&&s<n.openParam.openDay?this.txt_get.visible=!1:n.Route?(this.txt_get.textFlow=t.TextFlowMaker.generateTextFlow("<a><u>"+a+"<u></a>"),this.txt_get.visible=!0):this.txt_get.visible=!1}},i.prototype.refreshRedDot=function(){this.redDot.param=null,this.showConsume(this.curCfg)},i.prototype.onRefreshStrengthen=function(){t.SoundManager.ins().playEffect(t.SoundUtil.STRENGTHEN),this.setStrengthenData()},i.prototype.setStrengthenData=function(){this.selectedId=-1;var e=t.ModelManager.ins().roleModel.getCurStrengthenData(t.StrengthenType.Equip),i=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.Equip];if(this.temp=e,e){this.iconUrl=[["qh_icon_wuqi","武器"],["qh_icon_yifu","衣服"],["qh_icon_yaodai","腰带"],["qh_icon_xiezi","鞋子"],["qh_icon_jiezhi","戒指"],["qh_icon_huwan","护腕"],["qh_icon_xianglian","项链"],["qh_icon_toukui","头盔"]];var n=void 0,s=void 0;this.setAttr(e[0],e[1]);var a=e[1],r=[],o=[],l=void 0,h=void 0,p=void 0,u=a-1,c=a-1;for(p=0;p<i.length;p++){var g=i[p];this.strenghtenLvArr[g.pos-1]=g.lv}for(p=0;p<this.iconUrl.length;p++)1==a?(l=this.iconUrl[p],h=this.strenghtenLvArr[p]):(l=this.iconUrl[p+a-1],h=this.strenghtenLvArr[p+a-1],l||(l=this.iconUrl[a-1-u],u--),null==h&&(h=this.strenghtenLvArr[a-1-c],c--)),o.push(h),r[p]=l;var d=[],m=void 0;for(u=a-1,p=0;p<i.length;p++)1==a?m=i[p]:(m=i[p+a-1],m||(m=i[a-1-u],u--)),d[p]=m;var f=d.filter(function(t){return 125==t.lv});for(p=0;p<this.iconArr.length;p++)0==p?(n=8==f.length?0:1,s=t.GlobalConfig.EquipStrengthenConfig[e[1]][e[0]],this.showConsume(s),this.curCfg=s):n=0,this.iconArr[p].setStengthenData(this.iconBg,r[p][0],r[p][1],o[p],n)}else{for(var p=0,v=this.iconArr.length;v>p;p++)this.iconArr[p].setStengthenData(this.iconBg,this.iconUrl[p][0],this.iconUrl[p][1],this.strenghtenLvArr[p],0);var s=t.GlobalConfig.EquipStrengthenConfig[1][1];this.curCfg=s,this.setAttr(1,1,!0),this.showConsume(s)}},i.prototype.showConsume=function(e){if(void 0===e&&(e=null),this.txt_get.visible=!1,!e)return this.img_money.visible=!1,void(this.txt_consume.visible=!1);if(!this.cfg1Dic)return this.img_money.visible=!1,this.txt_consume.visible=!1,this.btn_strengthen.visible=!1,this.txt_max.visible=!0,this.strengthen_item.visible=!1,this.strengthen_icon.visible=!1,void t.EventManager.ins().sendEvent(t.CompEvent.ROLE_RED);this.getItemVisible(),this.btn_strengthen.visible=!0,this.img_money.visible=!0,this.txt_consume.visible=!0;var i=e.cost[0].type,n=e.cost[0].id,s=e.cost[0].count;this.selectedId=n;if(0==i){var a=t.GlobalConfig.StdItems[n];this.img_money.source=a.icon+""}else{var r=t.GlobalConfig.NumericalIcon[n];this.img_money.source=r.icon+""}var o,l=t.BagMgr.ins().getItemCountById(n);l?l>=s?(o=t.LanguageUtils.language_Omission_txt4+"：    |C:0x2eb52d&T:"+l+"|C:0xE0AE75&T:/"+s,this.txt_consume.textFlow=t.TextFlowMaker.generateTextFlow(o)):(o=t.LanguageUtils.language_Omission_txt4+"：    |C:0xe50000&T:"+l+"|C:0xE0AE75&T:/"+s,this.txt_consume.textFlow=t.TextFlowMaker.generateTextFlow(o)):(o=t.LanguageUtils.language_Omission_txt4+"：    |C:0xe50000&T:0|C:0xE0AE75&T:/"+s,this.txt_consume.textFlow=t.TextFlowMaker.generateTextFlow(o));var h,p=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Equip],u=p.name;for(var c in u)if(u[c].equipid==e.pos){this.strengthen_icon.setData(u[c].equippc.equippcid),this.strengthen_name.source=u[c].equippc.equipname,h=e.lv;var g=t.ModelManager.ins().roleModel.dicStrengthen[e.pos];t.GlobalConfig.EquipStrengthenConfig[e.pos][h]?this.strengthen_item.setData({desc1:g+":"+(e.lv-1)+t.LanguageUtils.language_Common_1,desc2:h+t.LanguageUtils.language_Common_1}):this.strengthen_item.setData({desc1:g+":"+(e.lv-1)+t.LanguageUtils.language_Common_1,desc2:null});break}},i.prototype.setAttr=function(e,i,n){void 0===n&&(n=!1);var s,a,r=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.Equip],o=1,l=!1;if(r.length>0){o=r[0].lv;for(var h=0;h<r.length;h++)o<r[h].lv&&(o=r[h].lv,l=!0)}n?(s=t.ModelManager.ins().roleModel.getStrengthenAttr(e,1,1),this.cfg1Dic=t.ModelManager.ins().roleModel.getStrengthenAttr(e,1,1)):(a=1!=i||l?8*o-(8-i+1):8*o,s=t.ModelManager.ins().roleModel.getStrengthenAttr(e,i-1,a),a++,this.cfg1Dic=t.ModelManager.ins().roleModel.getStrengthenAttr(e,i,a));var p,u,c,g,d,m=t.GlobalConfig.AttrLookupConfig[1],f=[],v=[],_=[],y=[],T=[];for(u=0;u<m.attr.length;u++)p={},p.type=m.attr[u],p.value=0,v.push(p);var M=0;if(s){for(var C in s)for(u=0;u<s[C].attr.length;u++){var b={};b.type=s[C].attr[u].type,M=s[C].attr[u].value,n?b.value=0:b.value=M,T.push(b)}for(c=0,g=v.length;g>c;c++){for(u=0;u<T.length;u++){var I=T[u].type;I==v[c].type&&(v[c].value+=T[u].value)}d=t.AttributeData.getItemAttStrByType(v[c],v,1,!1,!0,"0xE0AE75","0xcbc2b2"),""!=d&&_.push(d)}}var S=t.LanguageUtils.attrMinMax[5];for(u=0,g=_.length;g>u;u++)if(_[u].indexOf(S)>-1){var E=_.splice(u,1);_.unshift(E[0]);break}for(u=0;u<v.length;u++)v[u].value=0;if(T.length=0,this.cfg1Dic){for(var C in this.cfg1Dic)for(u=0;u<this.cfg1Dic[C].attr.length;u++){var b={};b.type=this.cfg1Dic[C].attr[u].type,M=this.cfg1Dic[C].attr[u].value,b.value=M,T.push(b)}for(c=0,g=v.length;g>c;c++){for(u=0;u<T.length;u++){var I=T[u].type;I==v[c].type&&(v[c].value+=T[u].value)}d=t.AttributeData.getItemAttStrByType(v[c],v,1,!1,!0,"0xE0AE75","0x28ee01"),""!=d&&y.push(d)}}for(u=0,g=y.length;g>u;u++)if(y[u].indexOf(S)>-1){var E=y.splice(u,1);y.unshift(E[0]);break}for(var w=0,A=_.length;A>w;w++)y.length<w?f.push({desc1:_[w],desc2:null}):f.push({desc1:_[w],desc2:y[w]});this.setData(f)},i.prototype.setData=function(t){this.creatItem(t)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this.itemArrayCollection.replaceAll(this.dataAry)},i.prototype.$onClose=function(){e.prototype.$onClose.call(this)},i}(t.BaseEuiView);t.OtherPlayerStrengthenView=e,__reflect(e.prototype,"app.OtherPlayerStrengthenView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.ruleId=63,i.titleStr=t.LanguageUtils.language_System67,i.currRevealItem=-1,i.skinName="TitleViewSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.showView=function(){t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_TITLE2_OPEN)},i.prototype.hideView=function(){t.EventManager.ins().sendEvent(t.CompEvent.OTHER_PLAYER_TITLE2_CLOSE)},i.prototype.init=function(){this.currRevealItem=t.EquipItemMgr.ins().otherPlayerEquips.propSet.getTITLE(),t.MouseScroller.bind(this.scroller),this.lbNoTitle.visible=!1,this.updateData()},i.prototype.updateData=function(){this.onClearItemList();for(var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.titleDataArr,n=0;n<i.length;n++){var s=new t.TitleItemView(1);s.setData(i[n]),s.onShowSelect(!1),s.setShorten(!0),s.setReveal(i[n].titleId==this.currRevealItem),this.listTitle.addChild(s)}this.lbNoTitle.visible=i.length<=0?!0:!1},i.prototype.onClearItemList=function(){for(;this.listTitle.numChildren>0;){var t=this.listTitle.getChildAt(0);this.listTitle.removeChild(t),t.destroy(),t=null}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.onClearItemList()},i}(t.BaseView);t.OtherPlayerTitleView=e,__reflect(e.prototype,"app.OtherPlayerTitleView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.currRevealItem=-1,t.skinName="TitleViewSkin2",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.currRevealItem=t.EquipItemMgr.ins().otherPlayerEquips.propSet.getCurCustomTitle(),t.MouseScroller.bind(this.scroller),this.lbNoTitle.visible=!1,this.updateData()},i.prototype.updateData=function(){this.onClearItemList();for(var e=t.EquipItemMgr.ins().otherPlayerEquips,i=e.titleDataArr2,n=0;n<i.length;n++){var s=new t.TitleItemView2(1);s.setData(i[n]),s.onShowSelect(!1),s.setShorten(!0),s.setReveal(i[n].titleId==this.currRevealItem),this.listTitle.addChild(s)}this.lbNoTitle.visible=i.length<=0?!0:!1},i.prototype.onClearItemList=function(){for(;this.listTitle.numChildren>0;){var t=this.listTitle.getChildAt(0);this.listTitle.removeChild(t),t.destroy(),t=null}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.onClearItemList()},i}(t.BaseView);t.OtherPlayerTitleView2=e,__reflect(e.prototype,"app.OtherPlayerTitleView2")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.pkArr=[{img:"m_heping",index:1},{img:"m_zudui",index:2},{img:"m_hanghui",index:3},{img:"m_didui",index:4},{img:"m_quanti",index:5},{img:"m_zhenying",index:6}],t.horizontalCenter=-350,t.bottom=37,t.skinName="PhoneAtkModelViewSkin",t
}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){this.addTouchEvent(this.pkImage1,this.onClickPk),this.addTouchEvent(this.pkImage2,this.onClickPk),this.addTouchEvent(this.pkImage3,this.onClickPk),this.addTouchEvent(this.pkImage4,this.onClickPk),this.addTouchEvent(this.pkImage5,this.onClickPk),this.updatePKState()},i.prototype.updatePKState=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet){var i=void 0;this.pkbg.visible=!1;for(var n=0;n<this.pkArr.length;n++)i=this.pkArr[n].index,6>i&&(this["pkImage"+i].source=this.pkArr[n].img),i==e.propSet.getPKtype()&&6>i&&(this["pkImage"+i].source=this.pkArr[n].img+"1",this.pkbg.y=this["pkImage"+i].y,this.pkbg.visible=!0)}},i.prototype.onClickPk=function(e){switch(e.currentTarget){case this.pkImage1:t.PkMgr.ins().s_24_3(1);break;case this.pkImage2:t.PkMgr.ins().s_24_3(2);break;case this.pkImage3:t.PkMgr.ins().s_24_3(3);break;case this.pkImage4:t.PkMgr.ins().s_24_3(4);break;case this.pkImage5:t.PkMgr.ins().s_24_3(5)}t.ViewManager.ins().close(this)},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.removeTouchEvent(this.pkImage1,this.onClickPk),this.removeTouchEvent(this.pkImage2,this.onClickPk),this.removeTouchEvent(this.pkImage3,this.onClickPk),this.removeTouchEvent(this.pkImage4,this.onClickPk),this.removeTouchEvent(this.pkImage5,this.onClickPk)},i}(t.BaseEuiView);t.PhoneAtkModelView=e,__reflect(e.prototype,"app.PhoneAtkModelView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="PhoneMainButtonSkin",t}return __extends(i,e),Object.defineProperty(i.prototype,"ruleIconBase",{get:function(){return this._ruleIconBase},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"configid",{get:function(){return this._configid},set:function(t){this._configid=t},enumerable:!0,configurable:!0}),i.prototype.init=function(){var e=t.GlobalConfig.PlayFunConfig[this._configid];if(e){var i=e.phoneCls?e.phoneCls:"app.RuleIconBase",n=egret.getDefinitionByName(i);this._ruleIconBase=new n(e.id,this),this._ruleIconBase.addEventListeners(),this._ruleIconBase.addCountEvents()}},i.prototype.closeButton=function(){this._ruleIconBase&&(this._ruleIconBase.removeAll(),this._ruleIconBase=null)},i}(eui.Button);t.PhoneMainButton=e,__reflect(e.prototype,"app.PhoneMainButton")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._selfMapId=0,t.skillType=!1,t.currentLevel=0,t.currentMultipleExp=-1,t.doubleMcIsPlay=!1,t.pkArr=[{img:"m_heping",index:1},{img:"m_zudui",index:2},{img:"m_hanghui",index:3},{img:"m_didui",index:4},{img:"m_quanti",index:5},{img:"m_zhenying",index:6}],t.touchPointID=0,t.petState=0,t.switchRedNum=0,t.switchRedArr={},t._skillTipsRoleLevel=0,t._isShow=!1,t.skillTipsShowLimit=!1,t.newMsgInfo={},t.skillNum=5,t.payExpTime=0,t.npcTimers=0,t.duoBaoTimers=0,t.duoBaoTxt="",t.sendTime=0,t.percentHeight=100,t.percentWidth=100,t.touchEnabled=!1,t.skinName="PhoneMainSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.shapeArray=[],this.buttonAry=[this.bagButton,this.roleButton,this.pkButton,this.aiButton,this.shopButton,this.firstRechargeBtn,this.vipButton],t.RuleIconBase.updateShow=this.updateRuleAndSort.bind(this),t.RuleIconBase.update=this.updateRule.bind(this),t.RuleIconBase.updateCount=this.updateCount.bind(this),this.startPoint=new egret.Point},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var n=0;n<this.buttonAry.length;n++)this.buttonAry[n].init();this.onResize(),this.switchRedArr={},this.packUpButton.iconDisplay.scaleX=-1,this.packUpGroup.visible=!0,this.skillGroup.right=0,this.skillGroup.visible=!0,this.skillShapeGroup.visible=!0,this.buttonGroup.right=-376,this.buttonGroup.visible=!0,this.switchRed.visible=!1,this.recog=0,this.currentLevel=0,this.currentMultipleExp=-1,this.skillType=!1,this.petAckButton.visible=this.petFollowButton.visible=this.bagMaxImage.visible=this.skillTipsImage.visible=this.firstRechargeBtn.visible=this.vipButton.visible=!1,this.pkGroup.visible=!1,this.pkbg.visible=!1,this.rightMenuView.visible=!1,this.timerGrp.visible=this.npcTimerGrp.visible=this.duoBaoTimerGrp.visible=!1,this.buffList1.itemRenderer=t.ImageBase,this.buffList.itemRenderer=t.ImageBase,this.hpMc=t.ObjectPool.pop("app.MovieClip"),this.mpMc=t.ObjectPool.pop("app.MovieClip"),this.hpMc.x=60,this.hpGroup.addChild(this.hpMc),this.mpMc.x=-10,this.mpGroup.addChild(this.mpMc),this.hpMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_hq",-1),this.mpMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_lq",-1),this.chatList.itemRenderer=t.chatListItem,this.chatArr=new eui.ArrayCollection,this.chatList.dataProvider=this.chatArr;for(var n=0;9>n;n++){this.addTouchEvent(this["skillButton"+n],this.onClickSkill);var s=new egret.Shape;s.visible=!1,s.x=this["skillButton"+n].x+4,s.y=this["skillButton"+n].y+4,s.dwResumeTick=0,this.shapeArray.push(s),this.skillShapeGroup.addChild(s)}for(var a=0;a<this.skillNum;a++)this["itemKey"+a].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.stageBeginFunction,this);this.msgdelay=[],this.msgAry=[this.msg1,this.msg2,this.msg3],t.GameSocket.IsCrossService||(window.loginWay||(this.clientguideTips=new t.ClientguideTips,this.clientguideTips.init()),this.donationGuideTips=new t.DonationGuideTips,this.donationGuideTips.init(this.donationGuideTipsGrp),this.firstChargeTips=new t.FirstChargeTips,this.firstChargeTips.init(this.firstChargeTipsGrp),this.secondChargeTips=new t.SecondChargeTips,this.secondChargeTips.init(this.secondChargeTipsGrp),this.violentGuideTips=new t.ViolentGuideTips,this.violentGuideTips.init(this.violentGuideTipsGrp),this.vipGuideTips=new t.VipGuideTips,this.vipGuideTips.init(this.vipGuideTipsGrp)),this.keyInfo(),this.setLockChar(!1),this.updateBuff(),this.updatePlayerInfo(),this.updateserverTime(),this.updateSkill(),this.updateChat(),this.addTouchEvent(this.pkImage1,this.onClickPk),this.addTouchEvent(this.pkImage2,this.onClickPk),this.addTouchEvent(this.pkImage3,this.onClickPk),this.addTouchEvent(this.pkImage4,this.onClickPk),this.addTouchEvent(this.pkImage5,this.onClickPk),this.addTouchEvent(this.modelButton,this.onClick),this.addTouchEvent(this.petAckButton,this.onClick),this.addTouchEvent(this.petFollowButton,this.onClick),this.addTouchEvent(this.switchGrp,this.onClick),this.addTouchEvent(this.packUpButton,this.onClick),this.addTouchEvent(this.chatGroup,this.onClick),this.addTouchEvent(this.switchRoleButton,this.onClick),this.addTouchEvent(this.stormButton,this.onClick),this.addTouchEvent(this.lockIcon,this.onClick),this.addTouchEvent(this.skillTipsImage,this.onClick),this.addTouchEvent(this.suitBtn,this.onClick),this.addTouchEvent(this.rechargeButton,this.onClick),this.addTouchEvent(this.drugBtn,this.onClick),this.addTouchEvent(this.pickupBtn,this.onClick),this.addBeginEvent(this.stormButton,this.beginFunction),this.addTouchEvent(this.donationGuideTipsGrp,this.onClick),this.addTouchEvent(this.firstChargeTipsGrp,this.onClick),this.addTouchEvent(this.secondChargeTipsGrp,this.onClick),this.addTouchEvent(this.violentGuideTipsGrp,this.onClick),this.addTouchEvent(this.vipGuideTipsGrp,this.onClick),this.addTouchEvent(this.doubleGrp,this.doubleExpTips),this.addTouchEvent(this.hpTipsGrp,this.doubleExpTips),this.addTouchEvent(this.mpTipsGrp,this.doubleExpTips),t.StageUtils.ins().getStage().addEventListener(egret.Event.RESIZE,this.onResize,this),this.observe(t.DefaultMgr.ins().post_petChange,this.updatePet),this.observe(t.PetSettingMgr.ins().postPetNum,this.updatePet),this.observe(t.DefaultMgr.ins().post_g_0_3,this.initRuleList),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updatePlayerInfo),this.observe(t.DefaultMgr.ins().post_g_0_10,this.updateserverTime),this.observe(t.DefaultMgr.ins().postUpdateTarget,this.updateState),this.observe(t.SkillMgr.ins().postg_5_1,this.updateSkill),this.observe(t.SkillMgr.ins().postg_5_2,this.updateSkill),this.observe(t.SkillMgr.ins().postg_5_5,this.updateSkillCD),this.observe(t.ChatMgr.ins().postChatInfo,this.updateChat),this.observe(t.ChatMgr.ins().postPrivateChat,this.updateChat),this.observe(t.ChatMgr.ins().post_9_12,this.updateChat),this.observe(t.ChatMgr.ins().post_9_15,this.updateChat),this.observe(t.MainTaskMgr.ins().postUpdateTask,this.updateTask),this.observe(t.DefaultMgr.ins().post_phoneSkillTips,this.updateSkillTips),this.observe(t.SkillMgr.ins().postg_5_2,this.updateSkillTips),this.observe(t.BagMgr.ins().post_8_1,this.bagAddItem),this.observe(t.BagMgr.ins().post_8_3,this.bagDelItem),this.observe(t.BagMgr.ins().post_8_4,this.bagChangeItem),this.observe(t.MailMgr.ins().post_50_2,this.newMailFun),this.observe(t.FriendMgr.ins().postReqList,this.newFriendFun),this.observe(t.PrivateDealsMgr.ins().post_13_1,this.newPrivateDealsFun),this.observe(t.PrivateDealsMgr.ins().post_deleteInfo,this.newPrivateDealsFun),this.observe(t.TeamMgr.ins().post_onReceiveAppJoinMsg,this.newTeamFun),this.observe(t.DefaultMgr.ins().post_0_74,this.newRankGuildFun),this.observe(t.DefaultMgr.ins().post_deleteType,this.newRankGuildFun),this.observe(t.SettingMgr.ins().post_17_11,this.updateKeyUI),this.observe(t.SettingMgr.ins().post_17_12,this.updateKeyUI),this.observe(t.BagMgr.ins().postKeyXY,this.keyInfo),this.observe(t.DefaultMgr.ins().post_g_0_13,this.updateMap),this.observe(t.BuffMgr.ins().post_4_6,this.updateSavior),this.observe(t.BuffMgr.ins().post_updateSavior,this.updateSavior),this.observe(t.BuffMgr.ins().postUpdateBuff,this.updateBuff),this.observe(t.DefaultMgr.ins().post_updateOnHook,this.updateOnHook),this.observe(t.DefaultMgr.ins().post_AttackState,this.updateOnHook),this.observe(t.ChatMgr.ins().postAddExp,this.addExp),this.observe(t.GuildMgr.ins().post_GuildInfo,this.updataGuildInfo),this.observe(t.MoveMgr.ins().post_1_6,this.npcTimer),this.observe(t.MoveMgr.ins().post_clearNpcTime,this.clearNpcTime),this.observe(t.ActvityMgr.ins().postDuoBaoCD,this.duoBaoTimer),this.observe(t.MoveMgr.ins().post_clearDuoBaoTime,this.clearDuoBaoTime),this.observe(t.DefaultMgr.ins().post_pk,this.autoClickPK),this.observe(t.DefaultMgr.ins().post_g_0_253,this.updateMsg),this.observe(t.SettingMgr.ins().post_17_3,this.updateWIFI),this.observe(t.SettingMgr.ins().post_17_4,this.updateWIFI),this.observe(t.SettingMgr.ins().postSetWIFI,this.updateWIFI),t.EventManager.ins().addEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT,this.updateChat,this),t.EventManager.ins().addEvent(t.MainEvent.HIDE_SKILL_TIPS,this.hideSkillTips,this),t.EventManager.ins().addEvent(t.MainEvent.UPDATE_DISPOSABLE_RED,this.updateDisposableredpoint,this),t.EventManager.ins().addEvent(t.ChatEvent.PLAY_NAME_SLECT,this.onShowPrivateName,this),t.EventManager.ins().addEvent(t.CompEvent.TimerEvent,this.onTimerStart,this),t.EventManager.ins().addEvent(t.CompEvent.Clear_Timer_Event,this.onClearTimer,this),egret.startTick(this.onEnterFrame,this),this.updatePet(),this.updatePlayerState(),this.clickStage(),this.updateWIFI(),t.GameSocket.IsCrossService?(this.rechargeButton.visible=!1,this.rechargeEff&&(this.rechargeEff.destroy(),this.rechargeEff=null),this.observe(t.ActvityMgr.ins().post_25_1,this.updateCrossServerAct),this.observe(t.ActvityMgr.ins().post_25_2,this.updateCrossServerAct),this.observe(t.ActvityMgr.ins().post_25_3,this.updateCrossServerAct),this.observe(t.ActvityMgr.ins().post_25_4,this.updateCrossServerAct),this.observe(t.ActvityMgr.ins().post_25_5,this.updateCrossServerAct)):(this.rechargeButton.visible=!0,this.rechargeEff||(this.rechargeEff=t.ObjectPool.pop("app.MovieClip"),this.rechargeEff.blendMode=egret.BlendMode.ADD,this.rechargeEff.scaleX=this.rechargeEff.scaleY=1,this.rechargeEff.x=289,this.rechargeEff.y=4,this.mcGroup.addChild(this.rechargeEff)),this.rechargeEff.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_czan",-1)),t.TimerManager.ins().doTimer(3e3,0,this.getDummy,this)},i.prototype.getDummy=function(){t.EntityMgr.ins().getDummy()},i.prototype.clickStage=function(){t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickStage,this),this.rightMenuView&&(this.rightMenuView.visible=!1)},i.prototype.stageBeginFunction=function(e){var i=e.touchPointID,n=e.stageX,s=e.stageY;this.dragImg.x=0,this.dragImg.y=0,this.dragImg.visible=!1;for(var a=0;a<this.skillNum;a++)if(this["itemKey"+a].hitTestPoint(n,s)){this._touchPointID=i,this.clickIdx=a,this.delayTime=0,this.startPoint=this["itemKey"+a].localToGlobal(0,0),this.dragImg.source=this["itemKey"+a].source,this.XTouch=n-this.startPoint.x,this.YTouch=s-this.startPoint.y,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.stageTouchMoveFunction,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.stageEndFunction,this);break}},i.prototype.stageEndFunction=function(e){if(this._touchPointID==e.touchPointID){this.dragImg.visible=!1,this.dragImg.x=0,this.dragImg.y=0;var i=t.SettingMgr.ins().keyInfo[this.clickIdx];if(this.delayTime>=5){for(var n=-1,s=0;s<this.skillNum;s++)if(this["itemKey"+s].hitTestPoint(e.stageX,e.stageY)){n=s;break}-1!=n&&i?t.SettingMgr.ins().send_17_12(n,i.type,i.id,this.clickIdx):i&&0==i.type&&t.SettingMgr.ins().send_17_13(this.clickIdx)}else if(i)if(1==i.type){var a=t.EntityMgr.ins().getPayer.getUserSkill(i.id);if(a&&egret.getTimer()>a.dwResumeTick)if(a.isDisable){var r=t.GlobalConfig.SkillConf[a.nSkillId];r&&t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips110,r.name))}else-1!=t.PlayerRoleAI.ins().stopBreakSkillAry.indexOf(i.id)&&t.PlayerRoleAI.ins().stopAI(),t.MapView.m_clickSkillId=i.id;else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips1)}else if(0==i.type){var o=t.BagMgr.ins().getItemById(i.id);o&&(console.log("ID："+o.wItemId),t.BagManager.ins().useItem(o.series,o.wItemId))}this._touchPointID=0,this.delayTime=0,t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.stageTouchMoveFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.stageEndFunction,this)}},i.prototype.stageTouchMoveFunction=function(e){if(this._touchPointID==e.touchPointID){var i=t.MathUtils.getDistance(this.startPoint.x,this.startPoint.y,e.stageX,e.stageY);i>3?(this.delayTime++,this.dragImg.visible=!0,this.delayTime>=5&&(this.dragImg.x=e.stageX-this.XTouch,this.dragImg.y=e.stageY-this.YTouch)):this.dragImg.visible=!1}},i.prototype.beginFunction=function(e){switch(e.currentTarget){case this.stormButton:this.touchPointID=e.touchPointID,t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveFunction,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveFunction,this)}},i.prototype.moveFunction=function(t){if(this.touchPointID==t.touchPointID&&!this.stormButton.hitTestPoint(t.stageX,t.stageY)){var e=t.$stageY<this.swPKGroup.y;e?(this.topImage.source="m_skillwj2",this.bottomImage.source="m_skillgw1"):(this.topImage.source="m_skillwj1",this.bottomImage.source="m_skillgw2")}},i.prototype.endFunction=function(e){if(this.touchPointID==e.touchPointID){if(!this.stormButton.hitTestPoint(e.stageX,e.stageY)){t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveFunction,this);var i=e.$stageY<this.swPKGroup.y;if(i)t.PlayerRoleAI.ins().onClickTab();else{var n=t.PlayerRoleAI.ins().getNearestMonster(),s=t.EntityMgr.ins().getCharRole(n);s?t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_System95+"|C:0xffffff&T:"+s.propSet.getName()+"||"):t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_System104+"|")}}this.topImage.source="m_skillwj1",this.bottomImage.source="m_skillgw1"}},i.prototype.updateChat=function(){t.TimerManager.ins().remove(this.updateChatList,this),t.TimerManager.ins().doTimer(100,1,this.updateChatList,this)},i.prototype.updateChatList=function(){t.TimerManager.ins().remove(this.updateChatList,this);var e=t.ChatModel.ins().getAllMsgData(),i=0;e.length>3&&(i=e.length-3);var n=[];for(i;i<e.length;i++)n.push(t.CommonUtils.copyDataHandler(e[i]));this.chatArr.replaceAll(n),t.TimerManager.ins().remove(this.updateChatV,this),t.TimerManager.ins().doTimer(1e3,1,this.updateChatV,this)},i.prototype.updateChatV=function(){t.TimerManager.ins().remove(this.updateChatV,this),this.chatList.height>=this.chatScroller.height?this.chatList.bottom=0:this.chatList.bottom=this.chatScroller.height-this.chatList.height},i.prototype.updateState=function(e){var i=t.EntityMgr.ins().getPayer;if(i&&i.propSet){i.lockTarget=e,this.recog=e;var n=t.EntityMgr.ins().getCharRole(e);if(n||(n=t.EntityMgr.ins().getDummyChar(e)),n)if(this.hpImage.scaleX=n.propSet.getHp()/n.propSet.getMaxHp(),this.lockHpLabel.text=n.propSet.getHp()+"/"+n.propSet.getMaxHp(),this.setLockChar(!0),n.isCharRole||n.isDummyCharRole){var s=n.propSet.getAP_JOB(),a=n.propSet.getZSLevel(),r=n.propSet.getLevel();this.jobImg.visible=!0,this.jobImg.source="m_job"+s,this.lockName.text=a>0?n.charName+" "+a+"转"+r:n.charName+"  Lv"+r,this.lockIcon.source="name_"+s+"_"+n.propSet.getSex()}else{this.jobImg.visible=!1,this.lockName.text=n.charName;var o=t.GlobalConfig.Monster[n.propSet.getACTOR_ID()];o&&(3==o.monsterType||4==o.monsterType||8==o.monsterType||9==o.monsterType)?this.lockIcon.source="m_m_lock_2":this.lockIcon.source="m_m_lock_1"}else this.setLockChar(!1)}},i.prototype.setLockChar=function(t){this.lockName.visible=t,this.jobImg.visible=t,this.jobImg.visible=t,this.lockHpLabel.visible=t,this.hpBg.visible=t,this.hpImage.visible=t,this.lockNameBg.visible=t,this.lockIconBg.visible=t,this.lockIcon.visible=t,this.rightMenuView.visible=!1},i.prototype.updateSkill=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet)for(var i=e.propSet.getAP_JOB(),n=t.GlobalConfig.SkillLocationConf[i],s=void 0,a=0;9>a;a++){if(s=n[a]){var r=t.EntityMgr.ins().getPayer.getUserSkill(s.id);if(r&&r.nLevel){var o=t.GlobalConfig.SkillsLevelConf[s.id][r.nLevel];this["skillButton"+a].skillId=s.id,this["skillButton"+a].shapeId=a,this["skillButton"+a].isActive=s.isActive,this["skillButton"+a].visible=!0,this["skillButton"+a].icon=s.skillName,this["skillButton"+a].visible=!0;var l=this.shapeArray[a];l.sumTime=o.cooldownTime,this.updateSkillCD(s.id);continue}}this["skillButton"+a].visible=!1;var h=this.shapeArray[a];h.visible=!1}},i.prototype.onClickSkill=function(e){var i=t.EntityMgr.ins().getPayer;if(!i.lockTarget){var n=e.currentTarget.isActive;if(n){var s=t.PlayerRoleAI.ins().getNearestMonster();if(!s)return void t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_System104+"|");i.lockTarget=s}}var a=e.currentTarget.skillId,r=t.EntityMgr.ins().getPayer.getUserSkill(a);if(r&&egret.getTimer()>r.dwResumeTick){var o=t.GlobalConfig.SkillConf[r.nSkillId];o.skillType&&(r.isDisable?o&&t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips110,o.name)):(-1!=t.PlayerRoleAI.ins().stopBreakSkillAry.indexOf(a)&&t.PlayerRoleAI.ins().stopAI(),t.MapView.m_clickSkillId=a))}},i.prototype.udpateSkillShape=function(t,e,i){var n=32;t.graphics.clear(),t.visible=!0,t.graphics.beginFill(0),t.alpha=.7,t.graphics.moveTo(n,n),t.graphics.lineTo(2*n,n),t.graphics.drawArc(n,n,n,0,e/i*360*Math.PI/180,!1),t.graphics.lineTo(n,n),t.graphics.endFill()},i.prototype.updateSkillCD=function(e){for(var i=t.EntityMgr.ins().getPayer.getUserSkill(e),n=0;9>n;n++)if(this["skillButton"+n].skillId==e){var s=egret.getTimer(),a=this.shapeArray[n];i&&i.dwResumeTick>s?(a.visible=!0,a.dwResumeTick=i.dwResumeTick):a.visible=!1;break}for(var r=t.SettingMgr.ins().keyInfo,o=0;o<this.skillNum;o++){var l=r[o];if(l&&1==l.type){var h=t.EntityMgr.ins().getPayer.getUserSkill(l.id);if(h&&h.dwResumeTick>egret.getTimer()){this["skillBarCD"+o].visible=!0,this["skillBarCD"+o].dwResumeTick=h.dwResumeTick,this["skillBarCD"+o].sumTime=1e3;var p=t.GlobalConfig.SkillsLevelConf[l.id][h.nLevel];p&&(this["skillBarCD"+o].sumTime=p.cooldownTime)}else this["skillBarCD"+o].visible=!1}else this["skillBarCD"+o].visible=!1}},i.prototype.updateSkillBarCD=function(t,e,i){var n=55*(e/t);this["skillBarCD"+i].height=n>55?55:n},i.prototype.onEnterFrame=function(t){var e,i,n=egret.getTimer();if(this.skillShapeGroup.visible)for(var s=void 0,a=0;a<this.shapeArray.length;a++)s=this.shapeArray[a],s.visible&&(e=s.sumTime,i=s.dwResumeTick-n,i>0?(s.visible=!0,this.udpateSkillShape(s,i,e)):s.visible=!1);for(var r,o=0;o<this.skillNum;o++)r=this["skillBarCD"+o],r.visible&&(e=r.sumTime,i=r.dwResumeTick-n,i>0?(r.visible=!0,this.updateSkillBarCD(e,i,o)):r.visible=!1);return!1},i.prototype.updatePet=function(){var e=t.EntityMgr.ins().getPayer;if(this.petAckButton.visible=this.petFollowButton.visible=!1,e&&e.propSet){var i=e.propSet.getAP_JOB();i==JobConst.DaoShi&&t.PetSettingMgr.ins().petNum>0&&(this.petState?this.petState=e.propSet.getPetState():(this.petState=2,t.PetSettingMgr.ins().send_34_1(2)),this.petAckButton.visible=this.petFollowButton.visible=!0)}},i.prototype.updatePlayerInfo=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet){this.bindGoldNum.text=t.CommonUtils.zhuanhuan(e.propSet.getBindCoin()),this.yuanbaoNum.text=t.CommonUtils.zhuanhuan(e.propSet.getNotBindYuanBao()),this.levelLab.text=e.propSet.getZSLevel()>0?e.propSet.getZSLevel()+"转"+e.propSet.getLevel()+"级":e.propSet.getLevel()+"级",this.currentLevel>0&&this.currentLevel<+e.propSet.getLevel()&&(t.DefaultMgr.ins().phoneSkillTipsIsShow=!1,this.updateSkillTips()),this.currentLevel=+e.propSet.getLevel();var i=t.GlobalConfig.LevelUpExp[+e.propSet.getLevel()];if(i){var n=100*+e.propSet.getEXP(),s=Math.floor(n/i.value);this.lvBar.value=s+2,this.lvBar.maximum=100}var a=+e.propSet.getmultipleExp();if(a=a?a:0,this.currentMultipleExp>-1&&this.currentMultipleExp!=a)if(a>this.currentMultipleExp&&!this.doubleMcIsPlay){var r=t.ObjectPool.pop("app.MovieClip");this.doubleMcIsPlay=!0,r.blendMode=egret.BlendMode.ADD;var o=e.localToGlobal(),l=this.expBar.localToGlobal();l.x+=30,r.x=o.x+50,r.y=o.y,r.rotation=t.MathUtils.getAngle2(o.x,o.y,l.x,l.y),this.mcGroup.addChild(r),egret.Tween.removeTweens(r),r.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_dbjy",-1);var h=this,p=egret.Tween.get(r),u=1.8*t.MathUtils.getDistanceByObject(r,l);p.to({x:l.x,y:l.y},u).call(function(){egret.Tween.removeTweens(r),r.destroy(),h.doubleMcIsPlay=!1,r=null,h.doubleExpMc(1),h.expBar.value=a})}else this.doubleExpMc(0),this.expBar.value=a;else this.expBar.value=a;this.currentMultipleExp=a,this.expBar.maximum=t.GlobalConfig.GlobalConf.maxexp;var c=e.propSet.getHp()>e.propSet.getMaxHp()?e.propSet.getMaxHp():e.propSet.getHp(),g=e.propSet.getCurMp()>e.propSet.getMaxMp()?e.propSet.getMaxMp():e.propSet.getCurMp();this.hpScroller.height=107*c/e.propSet.getMaxHp(),this.mpScroller.height=107*g/e.propSet.getMaxMp();var d=void 0;this.pkbg.visible=!1;for(var m=0;m<this.pkArr.length;m++)d=this.pkArr[m].index,6>d&&(this["pkImage"+d].source=this.pkArr[m].img),d==e.propSet.getPKtype()&&(this.modelButton.icon=this.pkArr[m].img+"2",6>d&&(this["pkImage"+d].source=this.pkArr[m].img+"1",this.pkbg.y=this["pkImage"+d].y,this.pkbg.visible=!0));this.updatePlayerState()}},i.prototype.updateserverTime=function(){this.labelTime.text=t.DateUtils.getFormatBySecond(t.GlobalData.serverTime/1e3,t.DateUtils.TIME_FORMAT_6)},i.prototype.initRuleList=function(){t.EntityMgr.ins().getPayer;if(!this.ruleList){this.ruleList={1:{},2:{},3:{},4:{},5:{},6:{},7:{}};var e=t.GlobalConfig.PlayFunConfig;for(var i in e){var n=e[i];if((!n.pfIDArray||-1!=n.pfIDArray.indexOf(Main.gameParameter.pfID))&&n.phoneLayer){var s=n.phoneCls?egret.getDefinitionByName(n.phoneCls):t.RuleIconBase;s?t.GameSocket.IsCrossService?n.displayType&&this.addRuleList(new s(n.id,new t.PhoneMainButton)):n.displayType&&2!=n.displayType||this.addRuleList(new s(n.id,new t.PhoneMainButton)):t.CommonPopView.ins().showTextView("功能入口配置错误，id:"+i+" cls:"+n.cls)}}}},i.prototype.addRuleList=function(t){var e=t.getConfig();t.tar&&(e.phoneIcon&&(t.tar.icon=e.phoneIcon),t.tar.parent&&t.tar.parent.removeChild(t.tar)),t.addShowEvents(),t.addRedEvents(),t.addCountEvents(),this.ruleList[e.phoneLayer][t.hashCode]=t,this.updateRuleAndSort(t),this.updateRule(t)},i.prototype.getRuleBtId=function(t){for(var e in this.ruleList){var i=this.ruleList[e];for(var n in i)if(i[n].id==t)return i[n]}return null},i.prototype.onClickPk=function(e){switch(e.currentTarget){case this.pkImage1:t.PkMgr.ins().s_24_3(1);break;case this.pkImage2:t.PkMgr.ins().s_24_3(2);break;case this.pkImage3:t.PkMgr.ins().s_24_3(3);break;case this.pkImage4:t.PkMgr.ins().s_24_3(4);break;case this.pkImage5:t.PkMgr.ins().s_24_3(5)}this.pkGroup.visible=!1},i.prototype.onClick=function(e){switch(e.currentTarget){case this.modelButton:t.ViewManager.ins().isShow(t.PhoneAtkModelView)?t.ViewManager.ins().close(t.PhoneAtkModelView):t.ViewManager.ins().open(t.PhoneAtkModelView);break;case this.petAckButton:t.PetSettingMgr.ins().send_34_1(1==this.petState?2:1);break;case this.petFollowButton:t.PetSettingMgr.ins().send_34_2();break;case this.switchGrp:this.updateBtnGroup();break;case this.packUpButton:this.packUpButton.iconDisplay.scaleX=this.packUpGroup.visible?1:-1,this.packUpGroup.visible=!this.packUpGroup.visible;var i=t.ActvityMgr.ins().getActivityInfo(t.ActvityInfoEnum.firstCharge),n=!1;i&&(i.info.sum||(n=!0),i.info.sum&&i.info.state<7&&(n=!0)),this.firstRechargeBtn.visible=t.GameSocket.IsCrossService||!n?!1:!this.packUpGroup.visible,this.vipButton.visible=t.GameSocket.IsCrossService?!1:!this.packUpGroup.visible,this.vipButton.right=n?256:179;break;case this.chatGroup:t.ViewManager.ins().open(t.ChatWinView);break;case this.switchRoleButton:t.ViewManager.ins().open(t.SwitchPlayerView);break;case this.skillTipsImage:t.ViewManager.ins().isShow(t.RoleView)||t.ViewManager.ins().open(t.RoleView,[1,0]),t.DefaultMgr.ins().phoneSkillTipsIsShow=!0,this.updateSkillTips();break;case this.suitBtn:t.CautionView.show(t.LanguageUtils.language_Tips48,function(){t.FuBenMgr.ins().send_20_2(t.GameMap.fubenID)},this);break;case this.lockIcon:if(!this.rightMenuView.visible){var s=t.EntityMgr.ins().getCharRole(this.recog);s||(s=t.EntityMgr.ins().getDummyChar(this.recog)),s&&(s.isCharRole||s.isDummyCharRole)&&(t.GlobalData.otherPlayerId=s.propSet.getACTOR_ID(),t.GlobalData.otherPlayerName=s.propSet.getName(),t.GlobalData.otherPlayerIdDummy=s.isDummyCharRole,this.rightMenuView.setData(),t.ViewManager.ins().isShow(t.OtherPlayerView)&&t.ViewManager.ins().close(t.OtherPlayerView),this.rightMenuView.visible=!0,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickStage,this),e&&e.stopPropagation())}break;case this.stormButton:if(this.topImage.source="m_skillwj1",this.bottomImage.source="m_skillgw1",t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.endFunction,this),t.RockerView.INOPERATION)return;if(this.stormMC||(this.stormMC=t.ObjectPool.pop("app.MovieClip"),this.stormGroup.addChild(this.stormMC),this.stormMC.blendMode=egret.BlendMode.ADD,this.stormMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_anatt",1,this.stopAnattMc.bind(this))),!t.PlayerRoleAI.ins().isOpen){var a=t.EntityMgr.ins().getPayer;if(a){var r=void 0;if(a.lockTarget&&(r=t.EntityMgr.ins().getCharRole(a.lockTarget),r&&r.propSet.getRace()==t.ActorRace.Human&&1==a.propSet.getPKtype()))return void t.UserTips.ins().showUITips("|C:0xff7700&T:当前为和平攻击模式|");if(!r){var o=t.PlayerRoleAI.ins().getNearestMonster();if(!o)return void t.UserTips.ins().showUITips("|C:0xff7700&T:附近没有可攻击的怪物|");r=t.EntityMgr.ins().getCharRole(o)}if(r){if(t.MapView.m_ack_Char=r,t.MapView.m_ack_Char&&t.MapView.m_ack_Char.propSet){var l=t.MapView.m_ack_Char.propSet.getName();t.UserTips.ins().showFightTips('开始自动PK"'+l+'"')}t.PlayerRoleAI.ins().attackState=!0}}}break;case this.rechargeButton:t.RechargeMgr.ins().onPay("");break;case this.drugBtn:t.ViewManager.ins().open(t.SetUpView,2);break;case this.pickupBtn:t.ViewManager.ins().open(t.SetUpView,1);break;case this.firstChargeTipsGrp:return t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_FIRST_CHARGE_TIPS),void t.ViewManager.ins().open(t.ActvityFirstChargeView);case this.secondChargeTipsGrp:return t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_SECOND_CHARGE_TIPS),void t.ViewManager.ins().open(t.ActvitySecondChargeView);case this.vipGuideTipsGrp:return t.GameSocket.IsCrossService?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips139):(t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_VIP_GUIDE_TIPS),void t.ViewManager.ins().open(t.VipView));case this.violentGuideTipsGrp:return t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_VIOLENT_TIPS),void t.ViewManager.ins().open(t.ViolentStateWin);case this.donationGuideTipsGrp:return t.EventManager.ins().sendEvent(t.MainEvent.CLOSE_DONATION_TIPS),void t.ViewManager.ins().open(t.DonationRankWin)}},i.prototype.stopAnattMc=function(){this.stormMC=null},i.prototype.updateBtnGroup=function(){this.skillType=!this.skillType,egret.Tween.removeTweens(this.skillGroup);var t=egret.Tween.get(this.skillGroup),e=egret.Tween.get(this.buttonGroup),i=this;this.skillType?(this.skillGroup.right=0,this.skillGroup.visible=!0,this.buttonGroup.right=-376,this.buttonGroup.visible=!0,this.skillShapeGroup.visible=!1,egret.Tween.removeTweens(this.switchImage),egret.Tween.get(this.switchImage).to({rotation:90},250),t.to({right:-376},150,egret.Ease.sineInOut).call(function(){this.visible=!1,t=null}),e.to({right:0},150,egret.Ease.sineInOut)):(this.skillGroup.right=-376,this.skillGroup.visible=!0,this.buttonGroup.right=0,this.buttonGroup.visible=!0,egret.Tween.removeTweens(this.switchImage),egret.Tween.get(this.switchImage).to({rotation:0},250),t.to({right:0},150,egret.Ease.sineInOut),e.to({right:-376},150,egret.Ease.sineInOut).call(function(){this.visible=!1,i.skillShapeGroup.visible=!0,e=null}))},i.prototype.updateRuleAndSort=function(e){t.TimerManager.ins().doTimer(1e3,1,function(){var t=e.getConfig();if(t&&t.phoneLayer){var i=this.updateShow(e);i&&(this.sortBtnList(t.phoneLayer),t=null)}},this)},i.prototype.updateShow=function(e){var i=e.checkShowIcon(),n=e.getConfig();i&&t.GameSocket.IsCrossService&&(n.displayType||(i=!1));var s;return e.isShow==i?!1:(e.isShow=i,s=e.getTar(),i?(e.addEventListeners(),this["layer"+n.phoneLayer].addChild(s),n=null):(e.removeEventListeners(),e.removeCountEvents(),t.DisplayUtils.removeFromParent(s)),!0)},i.prototype.sortBtnList=function(t){if(this.ruleList){var e=this.ruleList[t];if(e){var i=[],n=void 0;for(var s in e)n=e[s],n.isShow&&i.push(n);i.length>1&&(i=i.sort(this.sortRule));for(var a=0;a<i.length;a++){t>2?i[a].tar.y=77*a:i[a].tar.right=77*a;var r=i[a].tar.parent;51==i[a].id?(this.donationGuideTipsGrp.right=r.right+i[a].tar.right+77,this.donationGuideTipsGrp.top=r.top+i[a].tar.y):50==i[a].id?(this.violentGuideTipsGrp.right=r.right+i[a].tar.right+77,this.violentGuideTipsGrp.top=r.top+i[a].tar.y):37==i[a].id?(this.vipGuideTipsGrp.right=r.right+i[a].tar.right+77,this.vipGuideTipsGrp.top=r.top+i[a].tar.y):26==i[a].id?(this.firstChargeTipsGrp.right=r.right+i[a].tar.right+77,this.firstChargeTipsGrp.top=r.top+i[a].tar.y):78==i[a].id&&(this.secondChargeTipsGrp.right=r.right+i[a].tar.right+77,this.secondChargeTipsGrp.top=r.top+i[a].tar.y)}}}},i.prototype.sortRule=function(t,e){var i=t.getConfig(),n=e.getConfig();return i.phoneSort>n.phoneSort?1:-1},i.prototype.updateRule=function(t){var e=t.getTar();if(e.redDot){var i=t.checkShowRedPoint(),n=t.getConfig();n.phoneLayer>2&&n.phoneLayer<=7&&(i>0?this.switchRedArr[n.id]||(this.switchRedArr[n.id]=1):this.switchRedArr[n.id]&&delete this.switchRedArr[n.id]),Object.keys(this.switchRedArr).length>0?this.switchRed.visible=!0:this.switchRed.visible=!1,e.redDot.visible=i>0,e.redDot.source=1==i?"common_hongdian":"common_chengdian"
}},i.prototype.updateCount=function(t){var e=t.getTar();e.ingGrp&&(e.ingGrp.visible=t.checkShowCountDown()>0)},i.prototype.updateTask=function(e){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoTask)&&!t.PlayerRoleAI.ins().isFinding&&0==t.GameMap.fubenID&&1==t.OtherMgr.ins().isLargeMapAct){var i=t.MainTaskMgr.ins().getTaskArr(),n=t.ViewManager.ins().getView(t.BagView);if(1==e&&!n&&i&&i[0]){var s=t.GlobalConfig.TaskDisplayConfig[i[0].taskID][i[0].taskState];if(s&&1==s.taskstate){if(!this.mouseMc){this.mouseMc=t.ObjectPool.pop("app.MovieClip"),this.mouseMc.scaleX=this.mouseMc.scaleY=1,this.mouseMc.touchEnabled=!1;var a=this.bagButton.localToGlobal();this.mouseMc.x=a.x+22,this.mouseMc.y=a.y+35,this.mcGroup.addChild(this.mouseMc)}return t.MainTaskWin.isTaskSetUpMC=!0,t.TimerManager.ins().doTimer(1e3*s.automatic,1,this.updateMouseEff,this),this.mouseMc.isPlaying||this.mouseMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_xsyd1",-1),void(10==s.taskname.type)}}}this.stopTaskMC()},i.prototype.updateMouseEff=function(){t.TimerManager.ins().remove(this.updateMouseEff,this),t.ViewManager.ins().isShow(t.BagView)&&t.ViewManager.ins().close(t.BagView),t.ViewManager.ins().open(t.BagView,1)},i.prototype.stopTaskMC=function(){t.TimerManager.ins().remove(this.updateMouseEff,this),t.MainTaskWin.isTaskSetUpMC=!1,this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null)},i.prototype.bagAddItem=function(){this.bagMaxImage.visible=t.BagMgr.ins().getBagTypeItemNum(1)<=0,this.updateSkillTips(),this.updateKeyUI()},i.prototype.bagDelItem=function(){this.bagMaxImage.visible=t.BagMgr.ins().getBagTypeItemNum(1)<=0,this.updateSkillTips(),this.updateKeyUI()},i.prototype.bagChangeItem=function(){this.bagMaxImage.visible=t.BagMgr.ins().getBagTypeItemNum(1)<=0,this.updateSkillTips(),this.updateKeyUI()},i.prototype.updateSkillTips=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getLevel(),n=t.GlobalConfig.TimeManagerConfigConfig.Skillguide;if(t.ViewManager.ins().isCheckOpen(n)){if(t.DefaultMgr.ins().phoneSkillTipsIsShow)return void(this.skillTipsImage.visible=!1);var s=e.propSet.getAP_JOB(),a=t.SkillMgr.ins().getJobSkillredDot(s)>0;a||(this._isShow=!1),this._skillTipsRoleLevel==i&&this._isShow||(this.skillTipsImage.visible=a,a&&(this._skillTipsRoleLevel=i,this._isShow=!0))}},i.prototype.hideSkillTips=function(){this.skillTipsImage.visible=!1},i.prototype.newMailFun=function(){this.newMsgInfo[1]||(this.newMsgInfo[1]="mail",this.newMsgTips(1))},i.prototype.newFriendFun=function(){this.newMsgInfo[2]||(this.newMsgInfo[2]="friend",this.newMsgTips(2))},i.prototype.newPrivateDealsFun=function(){if(!this.newMsgInfo[3])for(var e in t.PrivateDealsMgr.ins().playerTradeList)if(t.PrivateDealsMgr.ins().playerTradeList[e]){this.newMsgInfo[3]="privateDeals",this.newMsgTips(3);break}},i.prototype.newTeamFun=function(){this.newMsgInfo[4]||(this.newMsgInfo[4]="team",this.newMsgTips(4))},i.prototype.newRankGuildFun=function(){var e,i;this.newMsgInfo[5]||(e=t.DefaultMgr.ins().getCallIShow(1),e&&(this.newMsgInfo[5]="teamCall",this.newMsgTips(5),i=e.time-egret.getTimer(),i&&t.TimerManager.ins().doTimer(i,1,this.removeTeamCall,this))),this.newMsgInfo[6]||(e=t.DefaultMgr.ins().getCallIShow(2),e&&(this.newMsgInfo[6]="guildCall",this.newMsgTips(6),i=e.time-egret.getTimer(),i&&t.TimerManager.ins().doTimer(i,1,this.removeGuildCall,this)))},i.prototype.removeTeamCall=function(){t.TimerManager.ins().remove(this.removeTeamCall,this),t.DefaultMgr.ins().post_deleteType(1)},i.prototype.removeGuildCall=function(){t.TimerManager.ins().remove(this.removeTeamCall,this),t.DefaultMgr.ins().post_deleteType(2)},i.prototype.newMsgTips=function(t){var e,i="",n="";if(1==t?(i="mail",n="zjm_shan_youjian"):2==t?(i="friend",n="zjm_shan_haoyou"):3==t?(i="privateDeals",n="zjm_shan_jiaoyi"):4==t?(i="team",n="zjm_shan_zudui"):5==t?(i="teamCall",n="zjm_shan_zhzd"):6==t&&(i="guildCall",n="zjm_shan_zhhh"),e=this.newMsgTipsGrp.getChildByName(i),!e){e=new eui.Button,e.skinName="PhoneMainButtonSkin",e.name=i,e.icon=n,e.width=51,e.height=51,e.x=60*this.newMsgTipsGrp.numChildren,e.y=0,this.addTouchEvent(e,this.newMsgBtnClick),this.newMsgTipsGrp.addChild(e);var s=egret.Tween.get(e,{loop:!0});s.to({y:-15},150).to({y:0},100).to({y:-5},100).to({y:0},100).wait(1500)}},i.prototype.newMsgBtnClick=function(e){switch(egret.Tween.removeTweens(e.currentTarget),this.removeTouchEvent(e.currentTarget,this.newMsgBtnClick),e.currentTarget.name){case"mail":t.ViewManager.ins().open(t.MailView),delete this.newMsgInfo[1];break;case"friend":t.ViewManager.ins().open(t.FriendView,4),delete this.newMsgInfo[2];break;case"privateDeals":t.ViewManager.ins().open(t.IsAgreeTransView),delete this.newMsgInfo[3];break;case"team":var i=t.TeamMgr.ins().inviteList[0];if(null==i)return;var n=i.nickName+t.LanguageUtils.language_Team_ReqAddTeam_tips;t.TeamMgr.ins().findInviteListDel(i.roleId),t.CautionView.show(n,function(){t.TeamMgr.ins().onSendApplyJoinTeamReply(i.roleId,1)},this,function(){t.TeamMgr.ins().onSendApplyJoinTeamReply(i.roleId,0)}),delete this.newMsgInfo[4];break;case"teamCall":var s=t.DefaultMgr.ins().getCallIShow(1);s&&(t.DefaultMgr.ins().post_deleteType(1),t.ViewManager.ins().open(t.CallView,s)),delete this.newMsgInfo[5];break;case"guildCall":var a=t.DefaultMgr.ins().getCallIShow(2);a&&(t.DefaultMgr.ins().post_deleteType(2),t.ViewManager.ins().open(t.CallView,a)),delete this.newMsgInfo[6]}t.DisplayUtils.removeFromParent(e.currentTarget)},i.prototype.updateKeyUI=function(){for(var e=0,i=t.SettingMgr.ins().keyInfo,n=0;n<this.skillNum;n++){var s=i[n];if(s&&0!=s.id){if(this["itemKey"+n].visible=!0,this["itemKeyLab"+n].visible=!1,1==s.type){var a=t.GlobalConfig.SkillsLevelConf[s.id][1];a&&(this.updateSkillCD(a.id),this["itemKey"+n].source=a.skillName+"")}else if(0==s.type){var r=t.GlobalConfig.StdItems[s.id];r&&(this["itemKey"+n].source=r.icon+"",e=t.BagMgr.ins().getItemCountById(r.id),this["itemKeyLab"+n].visible=!0,this["itemKeyLab"+n].text=e+"")}}else this["itemKeyLab"+n].visible=!1,this["itemKey"+n].visible=!1}},i.prototype.keyInfo=function(){t.BagMgr.ins().keyXY.length=0;for(var e=0;e<this.skillNum;e++){var i=new Object,n=this["itemKey"+e].localToGlobal(0,0);i.x=n.x,i.y=n.y,t.BagMgr.ins().keyXY.push(i)}},i.prototype.updateMap=function(){this.suitBtn.visible=t.GameMap.fubenID>0,t.GameMap.fubenID>0?t.ViewManager.ins().isShow(t.MainTaskWin)&&t.ViewManager.ins().close(t.MainTaskWin):t.ViewManager.ins().isShow(t.MainTaskWin)||gamelib.DeviceUtils.IsMobile&&t.GameSocket.IsCrossService||t.ViewManager.ins().open(t.MainTaskWin),t.GameMap.mapID!=this._selfMapId&&(this._selfMapId=t.GameMap.mapID,3!=t.GameMap.mapID&&t.EntityMgr.ins().clearDummy(),t.EntityMgr.ins().resetMakeDummy(!0))},i.prototype.updateBuff=function(){t.EntityMgr.ins().getPayer&&(this.buffList1.dataProvider=new eui.ArrayCollection(t.EntityMgr.ins().getPayer.buffType4Ary),this.buffList.dataProvider=new eui.ArrayCollection(t.EntityMgr.ins().getPayer.buffTypeAry))},i.prototype.updateSavior=function(){t.EntityMgr.ins().getPayer&&(t.EntityMgr.ins().getPayer.saviorBuff.length>0?(this.buffList.left=70,this.saviorBuff.visible=!0,this.saviorBuff.data=t.EntityMgr.ins().getPayer.saviorBuff[0]):(this.buffList.left=29,this.saviorBuff.visible=!1))},i.prototype.doubleExpTips=function(e){var i=t.EntityMgr.ins().getPayer;if(i&&i.propSet){var n="";switch(e.currentTarget){case this.doubleGrp:n=t.LanguageUtils.language_Friend_Txt1+"       ："+(i.propSet.getZSLevel()>0?i.propSet.getZSLevel()+"转"+i.propSet.getLevel()+"级":i.propSet.getLevel()+"级")+"\n",n+=t.LanguageUtils.language_Friend_Txt7+"："+i.propSet.getEXP()+"\n",n+=t.LanguageUtils.language_Friend_Txt8+"："+(t.OtherMgr.ins().getLevelUpExp()-i.propSet.getEXP())+"\n",n+=t.LanguageUtils.language_Common_56+i.propSet.getmultipleExp();break;case this.hpTipsGrp:var s=i.propSet.getHp()>i.propSet.getMaxHp()?i.propSet.getMaxHp():i.propSet.getHp();n="HP "+s+"/"+i.propSet.getMaxHp();break;case this.mpTipsGrp:var a=i.propSet.getCurMp()>i.propSet.getMaxMp()?i.propSet.getMaxMp():i.propSet.getCurMp();n="MP "+a+"/"+i.propSet.getMaxMp()}var r=e.currentTarget.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,n,{x:r.x+e.currentTarget.width,y:r.y}),r=null}},i.prototype.updateOnHook=function(){t.TimerManager.ins().remove(this.updatePlayerState,this),t.TimerManager.ins().doTimer(500,1,this.updatePlayerState,this)},i.prototype.updatePlayerState=function(){if(t.PlayerRoleAI.ins().isOpen){if(this.playerStateMC)return;this.playerStateMC=t.ObjectPool.pop("app.MovieClip"),this.playerStateMC.x=this.playerStateMC.y=0,this.playerStateGrp.addChild(this.playerStateMC),this.paoDianMC&&(this.paoDianMC.destroy(),this.paoDianMC=null),this.xunLuMC&&(this.xunLuMC.destroy(),this.xunLuMC=null),this.autoPkMc&&(this.autoPkMc.destroy(),this.autoPkMc=null),this.playerStateMC.x=0,this.playerStateMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zdzd1",-1),this.onHookGroup.visible=!0,this.playerStateMC.visible=!0}else if(t.PlayerRoleAI.ins().isFinding){if(this.xunLuMC)return;this.xunLuMC=t.ObjectPool.pop("app.MovieClip"),this.xunLuMC.x=this.xunLuMC.y=0,this.playerStateGrp.addChild(this.xunLuMC),this.paoDianMC&&(this.paoDianMC.destroy(),this.paoDianMC=null),this.playerStateMC&&(this.playerStateMC.destroy(),this.playerStateMC=null),this.autoPkMc&&(this.autoPkMc.destroy(),this.autoPkMc=null),this.xunLuMC.x=50,this.xunLuMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zdxl1",-1),this.onHookGroup.visible=!1,this.xunLuMC.visible=!0}else if(t.PlayerRoleAI.ins().attackState){if(this.autoPkMc)return;this.autoPkMc=t.ObjectPool.pop("app.MovieClip"),this.autoPkMc.x=this.autoPkMc.y=0,this.playerStateGrp.addChild(this.autoPkMc),this.paoDianMC&&(this.paoDianMC.destroy(),this.paoDianMC=null),this.playerStateMC&&(this.playerStateMC.destroy(),this.playerStateMC=null),this.xunLuMC&&(this.xunLuMC.destroy(),this.xunLuMC=null),this.autoPkMc.x=50,this.autoPkMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_znpk1",-1),this.onHookGroup.visible=!1,this.autoPkMc.visible=!0}else if(t.GameMap.isBubble&&t.GameMapInfo.ins().getIsSafe){if(this.paoDianMC)return;this.paoDianMC=t.ObjectPool.pop("app.MovieClip"),this.paoDianMC.x=this.paoDianMC.y=0,this.playerStateGrp.addChild(this.paoDianMC),this.xunLuMC&&(this.xunLuMC.destroy(),this.xunLuMC=null),this.playerStateMC&&(this.playerStateMC.destroy(),this.playerStateMC=null),this.autoPkMc&&(this.autoPkMc.destroy(),this.autoPkMc=null),this.paoDianMC.x=50,this.paoDianMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zdpd1",-1),this.onHookGroup.visible=!1,this.paoDianMC.visible=!0}else this.onHookGroup.visible=!1,this.paoDianMC&&(this.paoDianMC.destroy(),this.paoDianMC=null),this.playerStateMC&&(this.playerStateMC.destroy(),this.playerStateMC=null),this.xunLuMC&&(this.xunLuMC.destroy(),this.xunLuMC=null),this.autoPkMc&&(this.autoPkMc.destroy(),this.autoPkMc=null)},i.prototype.closeExpMc=function(){this.addDoubleExpMC&&(this.addDoubleExpMC.destroy(),this.addDoubleExpMC=null)},i.prototype.addExp=function(){var e=t.EntityMgr.ins().getPayer;if(e){var i=egret.getTimer();if(i-this.payExpTime>4e3){this.payExpTime=i;var n=e.localToGlobal();this.addDoubleExpMC||(this.addDoubleExpMC=t.ObjectPool.pop("app.MovieClip"),this.addExpGrp.addChild(this.addDoubleExpMC),this.addDoubleExpMC.blendMode=egret.BlendMode.ADD),this.addDoubleExpMC.x=n.x,this.addDoubleExpMC.y=n.y,this.addDoubleExpMC.visible=!0;var s=this;this.addDoubleExpMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_badypaodian",1,function(){s.closeExpMc()},!1);var a=this.lvBar.localToGlobal(-10,-10);this.expDian.scaleX=this.expDian.scaleY=t.MathUtils.limit(5,10)/10,this.expDian0.scaleX=this.expDian0.scaleY=t.MathUtils.limit(5,10)/10,this.expDian1.scaleX=this.expDian1.scaleY=t.MathUtils.limit(5,10)/10,this.expDian2.scaleX=this.expDian2.scaleY=t.MathUtils.limit(5,10)/10,this.expDian3.scaleX=this.expDian3.scaleY=t.MathUtils.limit(5,10)/10,this.expDian.visible=!1,this.expDian0.visible=!1,this.expDian1.visible=!1,this.expDian2.visible=!1,this.expDian3.visible=!1;var r=2*t.MathUtils.getDistance(n.x,n.y,a.x,a.y);egret.Tween.removeTweens(this.addExpGrp),egret.Tween.get(this.addExpGrp).wait(500).call(function(){s.expDian.payTween({x:n.x,y:n.y-150},{x:n.x+100,y:n.y-250},{x:a.x,y:a.y},r),s.expDian0.payTween({x:n.x-100,y:n.y-150},{x:n.x,y:n.y-300},{x:a.x,y:a.y},r),s.expDian1.payTween({x:n.x,y:n.y-200},{x:n.x+100,y:n.y-300},{x:a.x,y:a.y},r),s.expDian2.payTween({x:n.x-150,y:n.y-150},{x:n.x+100,y:n.y-250},{x:a.x,y:a.y},r),s.expDian3.payTween({x:n.x-50,y:n.y-220},{x:n.x+80,y:n.y-150},{x:a.x,y:a.y},r)}).wait(r+100).call(function(){s.expDian.clsoeTween(),s.expDian0.clsoeTween(),s.expDian1.clsoeTween(),s.expDian2.clsoeTween(),s.expDian3.clsoeTween()})}}},i.prototype.updataGuildInfo=function(){if(0!=t.GuildMgr.ins().getIsShowView()){var e=t.GuildMgr.ins().isGuild;e?t.ViewManager.ins().isShow(t.GuildInfoView)?t.ViewManager.ins().close(t.GuildInfoView):t.ViewManager.ins().open(t.GuildInfoView):t.ViewManager.ins().isShow(t.GuildNoGuildListView)?t.ViewManager.ins().close(t.GuildNoGuildListView):t.ViewManager.ins().open(t.GuildNoGuildListView)}},i.prototype.updateDisposableredpoint=function(t){for(var e in this.ruleList){var i=this.ruleList[e];for(var n in i)if(i[n].id==t){this.updateRule(i[n]);break}}},i.prototype.doubleExpMc=function(e){e?(this.addExpMc||(this.addExpMc=t.ObjectPool.pop("app.MovieClip"),this.addExpMc.blendMode=egret.BlendMode.ADD,this.addExpMc.scaleX=.8,this.doubleMcGrp.addChild(this.addExpMc)),this.addExpMc.visible=!0,this.addExpMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jszj",1,this.stopAddMc.bind(this))):(this.delExpMc||(this.delExpMc=t.ObjectPool.pop("app.MovieClip"),this.delExpMc.blendMode=egret.BlendMode.ADD,this.delExpMc.scaleX=.8,this.doubleMcGrp.addChild(this.delExpMc)),this.delExpMc.visible=!0,this.delExpMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jsjy",1,this.stopDelMc.bind(this)))},i.prototype.stopDelMc=function(){this.delExpMc&&(this.delExpMc.destroy(),this.delExpMc=null)},i.prototype.stopAddMc=function(){this.addExpMc&&(this.addExpMc.destroy(),this.addExpMc=null)},i.prototype.onShowPrivateName=function(e){t.ViewManager.ins().isShow(t.ChatWinView)||t.ViewManager.ins().open(t.ChatWinView,e[0])},i.prototype.onTimerStart=function(e){this.time=e[0],t.TimerManager.ins().remove(this.updateTimer,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTimer,this),this.timerGrp.visible=!0},i.prototype.updateTimer=function(){var e=this.time-Math.floor(egret.getTimer()/1e3);if(0>=e)return this.actTime.text="",t.TimerManager.ins().remove(this.updateTimer,this),void(this.timerGrp.visible=!1);var i=""+t.LanguageUtils.language_Common_65+t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_10);this.actTime.text=i,console.log(i)},i.prototype.onClearTimer=function(){this.actTime.text="",this.timerGrp.visible=!1,t.TimerManager.ins().remove(this.updateTimer,this)},i.prototype.npcTimer=function(e){this.npcTimers=e,this.npcTimerGrp.visible=!0,t.TimerManager.ins().remove(this.updateNpcTimer,this),t.TimerManager.ins().doTimer(1e3,0,this.updateNpcTimer,this),this.updateNpcTimer()},i.prototype.updateNpcTimer=function(){var e=this.npcTimers;this.npcTime.text=t.LanguageUtils.language_Common_65+(""+t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_10)),this.npcTimers-=1,0>=e&&(t.TimerManager.ins().remove(this.updateNpcTimer,this),this.npcTime.text="",this.npcTimerGrp.visible=!1)},i.prototype.clearNpcTime=function(){t.TimerManager.ins().remove(this.updateNpcTimer,this),this.npcTime.text="",this.npcTimerGrp.visible=!1},i.prototype.duoBaoTimer=function(e){this.duoBaoTimers=e.time-Math.floor(t.GlobalData.serverTime/1e3),this.duoBaoTimers&&(this.duoBaoTimers+=Math.floor(egret.getTimer()/1e3),this.duoBaoTxt="夺宝捡取倒计时：",this.duoBaoTimerGrp.visible=!0,t.TimerManager.ins().remove(this.updateDuoBaoTimer,this),t.TimerManager.ins().doTimer(1e3,0,this.updateDuoBaoTimer,this),this.updateDuoBaoTimer())},i.prototype.updateDuoBaoTimer=function(){var e=this.duoBaoTimers-Math.floor(egret.getTimer()/1e3);this.duoBaoTime.text=this.duoBaoTxt+(""+t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_10)),0>=e&&(t.TimerManager.ins().remove(this.updateNpcTimer,this),this.duoBaoTime.text="",this.duoBaoTimerGrp.visible=!1)},i.prototype.clearDuoBaoTime=function(){t.TimerManager.ins().remove(this.updateDuoBaoTimer,this),this.duoBaoTime.text="",this.duoBaoTimerGrp.visible=!1,this.duoBaoTimers=0},i.prototype.autoClickPK=function(){var t=this.pkButton.ruleIconBase;t.tapExecute(1)},i.prototype.updateCrossServerAct=function(){t.GameSocket.IsCrossService&&0!=t.ActvityMgr.ins().crossServerActID&&t.DefaultMgr.ins().showCrossServerView(t.ActvityMgr.ins().crossServerActID)},i.prototype.updateWIFI=function(){t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Network)?(t.TimerManager.ins().isExists(this.heartbeat,this)||t.TimerManager.ins().doTimer(3e3,0,this.heartbeat,this),this.msgGroup.visible=!0):(this.msgGroup.visible=!1,t.TimerManager.ins().remove(this.heartbeat,this))},i.prototype.heartbeat=function(){this.sendTime&&(this.msgdelay.push(3e3),this.msgdelay.length>3&&this.msgdelay.shift()),this.sendTime=egret.getTimer(),t.DefaultMgr.ins().s_0_21()},i.prototype.updateMsg=function(){this.msgdelay.push(egret.getTimer()-this.sendTime),this.sendTime=0,this.msgdelay.length>3&&this.msgdelay.shift();for(var e=0,i=0;i<this.msgdelay.length;i++)e=this.msgdelay[i],this.msgAry[i].visible=!0,this.msgAry[i].text=t.LanguageUtils.language_Delay+this.getDelay(e),100>e?this.msgAry[i].textColor=2682369:300>e?this.msgAry[i].textColor=t.ColorUtil.NAME_YELLOW:this.msgAry[i].textColor=t.ColorUtil.NAME_RED},i.prototype.getDelay=function(t){return t>1e3?(t/1e3).toFixed(2)+"m":t+"ms"},i.prototype.onResize=function(){var e=t.StageUtils.ins().getWidth(),i=(e-364)/2;this.bg1.width=i+3,this.bg2.width=i,this.keyInfo()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),egret.stopTick(this.onEnterFrame,this),this.shapeArray.length=0,this.skillShapeGroup.removeChildren(),egret.Tween.removeTweens(this.addExpGrp),this.closeExpMc(),this.stopAddMc(),this.stopDelMc(),this.rechargeEff&&(this.rechargeEff.destroy(),this.rechargeEff=null),this.clientguideTips&&(this.clientguideTips.destroy(),this.clientguideTips=null),this.donationGuideTips&&(this.donationGuideTips.destroy(),this.donationGuideTips=null),this.firstChargeTips&&(this.firstChargeTips.destroy(),this.firstChargeTips=null),this.secondChargeTips&&(this.secondChargeTips.destroy(),this.secondChargeTips=null),this.violentGuideTips&&(this.violentGuideTips.destroy(),this.violentGuideTips=null),this.vipGuideTips&&(this.vipGuideTips.destroy(),this.vipGuideTips=null),this.expDian.clsoeTween(),this.expDian0.clsoeTween(),this.expDian1.clsoeTween(),this.expDian2.clsoeTween(),this.expDian3.clsoeTween(),t.TimerManager.ins().remove(this.updatePlayerState,this),t.TimerManager.ins().remove(this.updateMouseEff,this),t.TimerManager.ins().remove(this.updateChatList,this),t.TimerManager.ins().remove(this.updateChatV,this),t.TimerManager.ins().removeAll(this),egret.Tween.removeTweens(this.skillGroup),egret.Tween.removeTweens(this.buttonGroup);for(var s=0;s<this.buttonAry.length;s++)this.buttonAry[s].closeButton();for(var a in this.ruleList){var r=this.ruleList[a];for(var o in r)r[o].removeAll()}this.ruleList=null,this.layer1.removeChildren(),this.layer2.removeChildren();for(var s=0;9>s;s++)this.removeTouchEvent(this["skillButton"+s],this.onClickSkill);for(var l=0;l<this.skillNum;l++)this["itemKey"+l].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.stageBeginFunction,this);t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.stageBeginFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.stageEndFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.Event.RESIZE,this.onResize,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickStage,this),this.removeTouchEvent(this.pkImage1,this.onClickPk),this.removeTouchEvent(this.pkImage2,this.onClickPk),this.removeTouchEvent(this.pkImage3,this.onClickPk),this.removeTouchEvent(this.pkImage4,this.onClickPk),this.removeTouchEvent(this.pkImage5,this.onClickPk),this.removeTouchEvent(this.petAckButton,this.onClick),this.removeTouchEvent(this.modelButton,this.onClick),this.removeTouchEvent(this.petFollowButton,this.onClick),this.removeTouchEvent(this.switchGrp,this.onClick),this.removeTouchEvent(this.packUpButton,this.onClick),this.removeTouchEvent(this.chatGroup,this.onClick),this.removeTouchEvent(this.switchRoleButton,this.onClick),this.removeTouchEvent(this.stormButton,this.onClick),this.removeTouchEvent(this.lockIcon,this.onClick),this.removeTouchEvent(this.skillTipsImage,this.onClick),this.removeTouchEvent(this.suitBtn,this.onClick),this.removeTouchEvent(this.rechargeButton,this.onClick),this.removeTouchEvent(this.donationGuideTipsGrp,this.onClick),this.removeTouchEvent(this.firstChargeTipsGrp,this.onClick),this.removeTouchEvent(this.secondChargeTipsGrp,this.onClick),this.removeTouchEvent(this.violentGuideTipsGrp,this.onClick),this.removeTouchEvent(this.vipGuideTipsGrp,this.onClick),this.removeTouchEvent(this.doubleGrp,this.doubleExpTips),this.removeTouchEvent(this.hpTipsGrp,this.doubleExpTips),this.removeTouchEvent(this.mpTipsGrp,this.doubleExpTips),this.removeTouchEvent(this.drugBtn,this.onClick),this.removeTouchEvent(this.pickupBtn,this.onClick),this.removeBeginEvent(this.stormButton,this.beginFunction),t.EventManager.ins().removeEvent(t.ChatEvent.CLEAR_CHAT_INPUT_TEXT,this.updateChat,this),t.EventManager.ins().removeEvent(t.MainEvent.HIDE_SKILL_TIPS,this.hideSkillTips,this),t.EventManager.ins().removeEvent(t.MainEvent.UPDATE_DISPOSABLE_RED,this.updateDisposableredpoint,this),t.EventManager.ins().removeEvent(t.ChatEvent.PLAY_NAME_SLECT,this.onShowPrivateName,this),t.EventManager.ins().removeEvent(t.CompEvent.TimerEvent,this.onTimerStart,this),t.EventManager.ins().removeEvent(t.CompEvent.Clear_Timer_Event,this.onClearTimer,this),this.hpMc.destroy(),this.mpMc.destroy(),this.hpMc=null,this.mpMc=null,this._selfMapId=0,this.stormMC&&(this.stormMC.destroy(),this.stormMC=null)},i}(t.BaseEuiView);t.PhoneMainView=e,__reflect(e.prototype,"app.PhoneMainView"),t.ViewManager.ins().reg(e,t.LayerManager.Game_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isMove=!1,t.isTurn=!1,t.left=t.bottom=0,t.skinName="Rocker2Skin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.touchEnabled=!1,this.startPoint=new egret.Point},i.prototype.open=function(){t.RockerView.INOPERATION=!1,this.rockerGroup.visible=!0,this.rockerGroup1.visible=!0,this.rockerBg.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginFunction,this),this.rockerBg1.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginFunction,this),this.clearFunction()},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.clearFunction(),t.TimerManager.ins().removeAll(this),this.rockerBg.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginFunction,this),this.rockerBg1.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveFunction,this)},i.prototype.beginFunction=function(e){var i=e.touchPointID,n=e.stageX,s=e.stageY;this.rockerBg.hitTestPoint(n,s)?(this.isTurn=!0,this.beginX=n,this.beginY=s,this.delayTime=0,this.startPoint=this.rockerGroup.globalToLocal(n,s),this.rockerGroup.alpha=1,this.isMove=!1,this.touchPointID=i,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveFunction,this)):this.rockerBg1.hitTestPoint(n,s)&&(this.isTurn=!1,this.beginX=n,this.beginY=s,this.delayTime=0,this.startPoint=this.rockerGroup1.globalToLocal(n,s),this.rockerGroup1.alpha=1,this.isMove=!1,this.touchPointID=i,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveFunction,this))},i.prototype.clearFunction=function(){this.touchPointID=0,this.actionGroup.visible=!1,this.actionGroup1.visible=!1,this.rockerGroup.alpha=.7,this.rockerGroup1.alpha=.7,this.angleGroup.visible=!1,this.angleGroup1.visible=!1,this.actionGroup.x=0,this.actionGroup.y=0,this.actionGroup1.x=0,this.actionGroup1.y=0,t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveFunction,this)},i.prototype.endFunction=function(e){this.touchPointID==e.touchPointID&&(this.delayTime>=10?this.endTouche():(this.delayTime=20,this.touchMoveFunction(e),t.TimerManager.ins().doTimer(60,0,this.endTouche,this)))},i.prototype.endTouche=function(){t.TimerManager.ins().removeAll(this),this.clearFunction(),this.isMove=!1,t.MapView.m_playerActon=t.PlayerAction.IDLE,t.RockerView.INOPERATION=!1},i.prototype.touchMoveFunction=function(e){if(this.touchPointID==e.touchPointID)if(this.isMove)this.udpateMove(e),t.TimerManager.ins().isExists(this.setAutoTaskTime,this)||t.TimerManager.ins().doTimer(2e3,1,this.setAutoTaskTime,this);else{var i=t.MathUtils.getDistance(e.stageX,e.stageY,this.beginX,this.beginY);if(i>10){this.isMove=!0;var n=t.EntityMgr.ins().getPayer;n.stopTask(),n.stopFinding(),t.MapView.m_ack_Char=null,t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122)),t.PlayerRoleAI.ins().stopAI(),this.setAutoTaskTime()}}},i.prototype.udpateMove=function(e){var i;i=this.isTurn?this.rockerGroup.globalToLocal(e.stageX,e.stageY):this.rockerGroup1.globalToLocal(e.stageX,e.stageY);var n=t.MathUtils.getDistance(this.startPoint.x,this.startPoint.y,2.5*i.x,2.5*i.y);if(n>1){if(this.delayTime++,this.delayTime>=3){t.RockerView.INOPERATION=!0;var s=t.DirUtil.get8DirBy2Point(this.startPoint,i);t.MapView.moveDir=s%8,i.x=2.5*i.x,i.y=2.5*i.y,this.isTurn?(this.actionGroup.visible=!0,this.rockerGroup.alpha=1,this.angleGroup.visible=!0,this.angleGroup.rotation=45*(s-2),n>98&&(i.x=98*i.x/n,i.y=98*i.y/n),this.actionGroup.x=i.x,this.actionGroup.y=i.y,t.MapView.m_playerActon=t.PlayerAction.TURN):(this.actionGroup1.visible=!0,this.rockerGroup1.alpha=1,this.angleGroup1.visible=!0,this.angleGroup1.rotation=45*(s-2),n>75&&(i.x=75*i.x/n,i.y=75*i.y/n),this.actionGroup1.x=i.x,this.actionGroup1.y=i.y,t.MapView.m_playerActon=t.PlayerAction.WALK)}}else this.isTurn?(this.actionGroup.visible=!1,this.rockerGroup.alpha=.7,this.angleGroup.visible=!1):(this.actionGroup1.visible=!1,this.rockerGroup1.alpha=.7,this.angleGroup1.visible=!1),t.MapView.m_playerActon=t.PlayerAction.IDLE},i.prototype.setAutoTaskTime=function(){t.TimerManager.ins().remove(this.setAutoTaskTime,this);var e=t.GlobalConfig.TimeManagerConfigConfig,i=1;e&&e.Taskfingertime&&(i=e.Taskfingertime),t.MainTaskMgr.ins().clickTime=egret.getTimer()+1e3*i,t.DefaultMgr.ins().post_autoReceiveTask()},i.INOPERATION=!1,i}(t.BaseEuiView);t.Rocker2View=e,__reflect(e.prototype,"app.Rocker2View"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isMove=!1,t.left=t.bottom=0,t.skinName="RockerSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.touchEnabled=!1,this.startPoint=new egret.Point},i.prototype.open=function(){i.INOPERATION=!1,this.rockerGroup.visible=!0,this.rockerBg.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginFunction,this),this.clearFunction()},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.clearFunction(),t.TimerManager.ins().removeAll(this),this.rockerBg.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveFunction,this)},i.prototype.beginFunction=function(e){var i=e.touchPointID,n=e.stageX,s=e.stageY;this.rockerBg.hitTestPoint(n,s)&&(this.beginX=n,this.beginY=s,this.delayTime=0,this.startPoint=this.rockerGroup.globalToLocal(n,s),this.alpha=1,this.isMove=!1,this.touchPointID=i,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveFunction,this))},i.prototype.clearFunction=function(){this.touchPointID=0,this.actionGroup.visible=!1,this.alpha=.5,this.angleGroup.visible=!1,this.actionGroup.x=0,this.actionGroup.y=0,t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.endFunction,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveFunction,this)},i.prototype.endFunction=function(e){this.touchPointID==e.touchPointID&&(this.delayTime>=10?this.endTouche():(this.delayTime=20,this.touchMoveFunction(e),t.TimerManager.ins().doTimer(60,0,this.endTouche,this)))},i.prototype.endTouche=function(){t.TimerManager.ins().removeAll(this),this.clearFunction(),this.isMove=!1,t.MapView.m_playerActon=t.PlayerAction.IDLE,i.INOPERATION=!1},i.prototype.touchMoveFunction=function(e){if(this.touchPointID==e.touchPointID)if(this.isMove)this.udpateMove(e),t.TimerManager.ins().isExists(this.setAutoTaskTime,this)||t.TimerManager.ins().doTimer(2e3,1,this.setAutoTaskTime,this);else{var i=t.MathUtils.getDistance(e.stageX,e.stageY,this.beginX,this.beginY);if(i>10){this.isMove=!0;var n=t.EntityMgr.ins().getPayer;n.stopTask(),n.stopFinding(),t.MapView.m_ack_Char=null,t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122)),t.PlayerRoleAI.ins().stopAI(),this.setAutoTaskTime()}}},i.prototype.udpateMove=function(e){var n=this.rockerGroup.globalToLocal(e.stageX,e.stageY),s=t.MathUtils.getDistance(this.startPoint.x,this.startPoint.y,2.5*n.x,2.5*n.y);if(s>3){if(this.delayTime++,this.delayTime>=10){i.INOPERATION=!0,this.actionGroup.visible=!0,this.alpha=1,this.angleGroup.visible=!0;var a=t.DirUtil.get8DirBy2Point(this.startPoint,n);t.MapView.moveDir=a%8,this.angleGroup.rotation=45*(a-2),n.x=2.5*n.x,n.y=2.5*n.y,s>=120?(s>210&&(n.x=210*n.x/s,n.y=210*n.y/s),this.actionGroup.x=n.x,this.actionGroup.y=n.y,t.MapView.m_playerActon=t.PlayerAction.TURN,this.actionImg.source="m_yg5"):(this.actionGroup.x=n.x,this.actionGroup.y=n.y,t.MapView.m_playerActon=t.PlayerAction.WALK,this.actionImg.source="m_yg4")}}else this.actionGroup.visible=!1,this.alpha=.5,this.angleGroup.visible=!1,t.MapView.m_playerActon=t.PlayerAction.IDLE},i.prototype.setAutoTaskTime=function(){t.TimerManager.ins().remove(this.setAutoTaskTime,this);var e=t.GlobalConfig.TimeManagerConfigConfig,i=1;e&&e.Taskfingertime&&(i=e.Taskfingertime),t.MainTaskMgr.ins().clickTime=egret.getTimer()+1e3*i,console.log("记时间了："+t.MainTaskMgr.ins().clickTime),t.DefaultMgr.ins().post_autoReceiveTask()},i.INOPERATION=!1,i}(t.BaseEuiView);t.RockerView=e,__reflect(e.prototype,"app.RockerView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.sysId=t.PackageID.PK,i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.s_24_3=function(t){var e=this.getBytes(3);e.writeByte(t),this.sendToServer(e)},i}(t.BaseSystem);t.PkMgr=e,__reflect(e.prototype,"app.PkMgr")
}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.playerTradeList={},i.itemGlobalPos=[],i.isDeals=!1,i.isLock=!1,i.isOtherLock=!1,i.sysId=t.PackageID.PrivateDeals,i.regNetMsg(1,i.post_13_1),i.regNetMsg(2,i.post_13_2),i.regNetMsg(3,i.post_13_3),i.regNetMsg(4,i.post_13_4),i.regNetMsg(5,i.post_13_5),i.regNetMsg(6,i.post_13_6),i.regNetMsg(7,i.post_13_7),i.regNetMsg(8,i.post_13_8),i.regNetMsg(9,i.post_13_9),i.regNetMsg(10,i.post_13_10),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_13_1=function(t,e){void 0===t&&(t=0),void 0===e&&(e="");var i=this.getBytes(1);i.writeUnsignedInt(t),i.writeString(e),this.sendToServer(i)},i.prototype.post_13_1=function(e){var i=e.readUnsignedInt(),n=e.readString(),s=Object.keys(this.playerTradeList);s.length>=3||(this.playerTradeList[i]={InitiateId:i,InitiateName:n,time:3e4+egret.getTimer()},i=null,n=null,this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this))},i.prototype.updateTime=function(){for(var e in i.ins().playerTradeList){var n=i.ins().playerTradeList[e];return n.time<egret.getTimer()?(delete i.ins().playerTradeList[e],void this.post_deleteInfo()):void 0}t.TimerManager.ins().remove(this.updateTime,this)},i.prototype.post_deleteInfo=function(){},i.prototype.send_13_2=function(t,e){var i=this.getBytes(2);i.writeUnsignedInt(t),i.writeByte(e),this.sendToServer(i)},i.prototype.post_13_2=function(t){t.readString()},i.prototype.send_13_3=function(t,e,i){var n=this.getBytes(3);n.writeByte(t),n.writeByte(e),i.writeToBytes(n),this.sendToServer(n)},i.prototype.post_13_3=function(e){var i=new Object;return i.playerInitiateID=e.readUnsignedInt(),i.playerName=e.readString(),i.playerLevel=e.readInt(),i.playerZsLevel=e.readByte(),t.ViewManager.ins().isShow(t.PrivateDealsWin)||t.ViewManager.ins().open(t.PrivateDealsWin,i),t.ViewManager.ins().close(t.IsAgreeTransView),t.ViewManager.ins().isShow(t.BagView)||t.ViewManager.ins().open(t.BagView),i},i.prototype.send_13_4=function(t,e){var i=this.getBytes(4);i.writeByte(t),i.writeInt(e),this.sendToServer(i)},i.prototype.post_13_4=function(e){var i,n=e.readBoolean();if(n){var s=new Object;return s.type=e.readByte(),1==s.type?(s.pos=e.readByte(),i=new t.userItem(e),s.myitem=i):2==s.type&&(s.pos=e.readByte()),s}return null},i.prototype.send_13_5=function(){var t=this.getBytes(5);this.sendToServer(t)},i.prototype.post_13_5=function(e){var i,n=new Object;return n.type=e.readByte(),1==n.type?(n.pos=e.readByte(),i=new t.userItem(e),n.otheritem=i):2==n.type&&(n.pos=e.readByte()),n},i.prototype.send_13_6=function(){var t=this.getBytes(6);this.sendToServer(t)},i.prototype.post_13_6=function(t){var e=t.readBoolean();if(e){var i=t.readByte(),n=t.readInt();return{type:i,num:n}}return null},i.prototype.send_13_7=function(){var t=this.getBytes(7);this.sendToServer(t)},i.prototype.post_13_7=function(t){var e=t.readBoolean();if(e){var i=t.readByte(),n=t.readInt();return{type:i,num:n}}return null},i.prototype.post_13_8=function(t){i.ins().isLock=t.readBoolean(),i.ins().isOtherLock=t.readBoolean()},i.prototype.post_13_9=function(t){},i.prototype.post_13_10=function(t){},i}(t.BaseSystem);t.PrivateDealsMgr=e,__reflect(e.prototype,"app.PrivateDealsMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.verticalCenter=-100,t.horizontalCenter=0,t.skinName="IsAgreeTransPanel",t.name="IsAgreeTransView",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System44),this.addTouchEvent(this.sureBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.observe(t.PrivateDealsMgr.ins().post_13_2,this.closeView);for(var n in t.PrivateDealsMgr.ins().playerTradeList)if(t.PrivateDealsMgr.ins().playerTradeList[n]){this.curInfo=t.PrivateDealsMgr.ins().playerTradeList[n],delete t.PrivateDealsMgr.ins().playerTradeList[n],t.PrivateDealsMgr.ins().post_deleteInfo();break}this.curInfo&&this.curInfo.InitiateName&&(this.tradingLab.text=this.curInfo.InitiateName+t.LanguageUtils.language_Common_46)},i.prototype.openView=function(e){t.ViewManager.ins().isShow(t.PrivateDealsWin)&&t.ViewManager.ins().close(t.PrivateDealsWin),t.ViewManager.ins().close(this),t.ViewManager.ins().isShow(t.BagView)||t.ViewManager.ins().open(t.BagView),t.ViewManager.ins().open(t.PrivateDealsWin,e)},i.prototype.closeView=function(){t.ViewManager.ins().close(this)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.sureBtn:this.curInfo&&t.PrivateDealsMgr.ins().send_13_2(this.curInfo.InitiateId,1);break;case this.closeBtn:this.curInfo&&t.PrivateDealsMgr.ins().send_13_2(this.curInfo.InitiateId,0),t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.sureBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.dragDropUI.destroy(),this.dragDropUI=null,this.tradingLab=null,this.sureBtn=null,this.closeBtn=null},i}(t.BaseEuiView);t.IsAgreeTransView=e,__reflect(e.prototype,"app.IsAgreeTransView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.sendName="",i.skinName="PrivateDealsWinSkin",i.name="privateDealsWin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.newGrp=new eui.Group,this.newGrp.width=60,this.newGrp.height=60,this.newIcon=new eui.Image,this.newIcon.horizontalCenter=0,this.newIcon.verticalCenter=0,this.newGrp.addChild(this.newIcon),this.newGrp.x=this.x,this.newGrp.y=this.y,this.newGrp.visible=!1,this.newGrp.touchThrough=!0,this.newGrp.touchChildren=!1,this.newIcon.touchEnabled=!1,t.LayerManager.UI_Drag.addChild(this.newGrp)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.trading.visible=!1,this.myLock.visible=!0,this.otherInfo=null,e[0]&&e[0].playerName&&(this.otherInfo=e[0]),e[0]&&e[0].sendName&&(this.sendName=e[0].sendName),null!=this.otherInfo?this.otherInfo&&(t.PrivateDealsMgr.ins().isDeals=!0,this.playerName.text=this.otherInfo.playerName+" "+this.otherInfo.playerZsLevel+t.LanguageUtils.language_Common_0+this.otherInfo.playerLevel+t.LanguageUtils.language_Common_1):e[0]?this.playerName.text=t.LanguageUtils.language_Common_44:this.playerName.text=t.LanguageUtils.language_Common_215;for(var n=0;5>n;n++)this["otherItem"+n].data=null,this["myItem"+n].data=null,this["myItem"+n].Pos=n,this["myItem"+n].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this);this.otherWing.setData(QatEnum.qatYuanbao,!1),this.otherGold.setData(QatEnum.qatMoney,!1),this.setOtherMoneyCount(0,0),this.myWing.setData(QatEnum.qatYuanbao,!1),this.myGold.setData(QatEnum.qatMoney,!1),this.setMyMoneyCount(0,0),this.wingInput.text="",this.goldInput.text="",this.myName.text=this.getPlayerRoleInfo(),this.otherIsLock.visible=!1,this.myIsLock.visible=!1,this.otherLockBtn.touchEnabled=!1,this.myLock.touchEnabled=!0,this.ruleTips.ruleDesc=t.GlobalConfig.taxconfig.rule2,this.wingInput.addEventListener(egret.TextEvent.FOCUS_IN,this.onFocusIn,this),this.wingInput.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.goldInput.addEventListener(egret.TextEvent.FOCUS_IN,this.onFocusIn,this),this.goldInput.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.addTouchEvent(this.search,this.onClick),this.addTouchEvent(this.myLock,this.onClick),this.addTouchEvent(this.trading,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.addEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.observe(t.PrivateDealsMgr.ins().post_13_3,this.agreeTrade),this.observe(t.PrivateDealsMgr.ins().post_13_4,this.updateMyData),this.observe(t.PrivateDealsMgr.ins().post_13_5,this.updateOtherData),this.observe(t.PrivateDealsMgr.ins().post_13_6,this.changeMoney),this.observe(t.PrivateDealsMgr.ins().post_13_7,this.changeOtherMoney),this.observe(t.PrivateDealsMgr.ins().post_13_8,this.changeLock),this.observe(t.PrivateDealsMgr.ins().post_13_9,this.closeView),this.observe(t.PrivateDealsMgr.ins().post_13_10,this.closeView),t.TimerManager.ins().doTimer(500,1,this.stopMove,this),""!=this.sendName&&t.PrivateDealsMgr.ins().send_13_1(0,this.sendName)},i.prototype.initViewPos=function(){e.prototype.initViewPos.call(this),t.PrivateDealsMgr.ins().itemGlobalPos=[];for(var i=0;5>i;i++){var n=this["myItem"+i].localToGlobal(0,0);t.PrivateDealsMgr.ins().itemGlobalPos.push(n)}},i.prototype.updateMyData=function(t){null!=t&&(1==t.type?t.myitem&&t.myitem.wItemId&&(this["myItem"+t.pos].data=t.myitem):2==t.type&&(this["myItem"+t.pos].data=null))},i.prototype.updateOtherData=function(t){1==t.type?t.otheritem&&t.otheritem.wItemId&&(this["otherItem"+t.pos].data=t.otheritem):2==t.type&&(this["otherItem"+t.pos].data=null)},i.prototype.stopMove=function(){t.PrivateDealsMgr.ins().itemGlobalPos=[];for(var e=0;5>e;e++){var i=this["myItem"+e].localToGlobal(0,0);t.PrivateDealsMgr.ins().itemGlobalPos.push(i)}},i.prototype.agreeTrade=function(e){e&&(t.PrivateDealsMgr.ins().isDeals=!0,this.playerName.text=e.playerName+" "+e.playerZsLevel+t.LanguageUtils.language_Common_0+e.playerLevel+t.LanguageUtils.language_Common_1),t.ViewManager.ins().isShow(t.BagView)||t.ViewManager.ins().open(t.BagView)},i.prototype.getPlayerRoleInfo=function(){var e="",i=t.EntityMgr.ins().getPayer;return i&&i.propSet&&(e=i.propSet.getName()+"  "+i.propSet.getZSLevel()+t.LanguageUtils.language_Common_0+i.propSet.getLevel()+t.LanguageUtils.language_Common_1),e},i.prototype.onClick=function(e){switch(e.currentTarget){case this.search:t.PrivateDealsMgr.ins().isDeals?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips45):t.ViewManager.ins().open(t.ChatShowFriendOrNearListView,2);break;case this.myLock:t.PrivateDealsMgr.ins().isDeals?(t.PrivateDealsMgr.ins().send_13_5(),this.myLock.visible=!1,this.trading.visible=!0):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips31);break;case this.trading:t.PrivateDealsMgr.ins().isDeals?t.PrivateDealsMgr.ins().isLock?t.PrivateDealsMgr.ins().send_13_7():t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips32):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips31);break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.changeLock=function(){t.PrivateDealsMgr.ins().isLock&&(this.myIsLock.visible=!0,this.myLock.touchEnabled=!1),t.PrivateDealsMgr.ins().isOtherLock&&(this.otherLockBtn.label=t.LanguageUtils.language_Common_45,this.otherIsLock.visible=!0)},i.prototype.onTouchBegin=function(e){if(null!=e.currentTarget.data){this.newIcon.source=e.target.source,this.newGrp.name=e.target.name;var i=e.currentTarget.localToGlobal(0,0);this.newGrp.x=i.x,this.newGrp.y=i.y,t.UserTips.ins().closeTips(),this.grpOldIdx=e.currentTarget.Pos,this.XTouch=e.stageX-this.newGrp.x,this.YTouch=e.stageY-this.newGrp.y,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}},i.prototype.onTouchMove=function(t){this.newGrp.visible=!0,this.newGrp.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this);var e=this["myItem"+this.grpOldIdx];e&&e.setVis(!1),this.newGrp.x=t.stageX-this.XTouch,this.newGrp.y=t.stageY-this.YTouch},i.prototype.onTouchEnd=function(e){if(1==this.newGrp.visible){for(var i=-1,n=50,s=0,a=this.newGrp.localToGlobal(0,0),r=0;5>r;r++){var o=this["myItem"+r].localToGlobal(0,0);s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),n>s&&(n=s,i=this["myItem"+r].Pos)}if(-1==i||i!=this.grpOldIdx){var l=new t.ItemSeries;l.setData(0),t.PrivateDealsMgr.ins().send_13_3(2,this.grpOldIdx,l)}var h=this["myItem"+this.grpOldIdx];h&&h.setVis(!0),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.newGrp.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.newGrp.x=this.x,this.newGrp.y=this.y,this.newGrp.visible=!1,i=null,n=null,s=null,a=null,h=null}},i.prototype.setOtherMoneyCount=function(e,i){var n="|C:0xe5ddcf&T:"+t.CommonUtils.zhuanhuan(e)+"|",s="|C:0xe5ddcf&T:"+t.CommonUtils.zhuanhuan(i)+"|";this.otherWing.setCount(n),this.otherGold.setCount(s),n=null,s=null},i.prototype.setMyMoneyCount=function(e,i){var n="|C:0xe5ddcf&T:"+t.CommonUtils.zhuanhuan(e)+"|",s="|C:0xe5ddcf&T:"+t.CommonUtils.zhuanhuan(i)+"|";this.myWing.setCount(n),this.myGold.setCount(s),n=null,s=null},i.prototype.onFocusIn=function(t){var e=t.currentTarget;switch(e){case this.wingInput:this.myWing.setCount("");break;case this.goldInput:this.myGold.setCount("")}},i.prototype.onFocusOut=function(e){var i=e.currentTarget,n=0,s=0;if(t.PrivateDealsMgr.ins().isDeals)switch(i){case this.wingInput:s=t.CurrencyUtils.getCurrency(QatEnum.qatYuanbao),n=+this.wingInput.text,n>s&&(this.wingInput.text=s+""),t.PrivateDealsMgr.ins().send_13_4(4,+this.wingInput.text),this.myWing.setCount(""),this.wingInput.text="";break;case this.goldInput:s=t.CurrencyUtils.getCurrency(QatEnum.qatMoney),n=+this.goldInput.text,n>s&&(this.goldInput.text=s+""),t.PrivateDealsMgr.ins().send_13_4(1,+this.goldInput.text),this.myGold.setCount(""),this.goldInput.text=""}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips31),this.setMyMoneyCount(0,0),this.wingInput.text="",this.goldInput.text="";i=null,n=null,s=null},i.prototype.changeMoney=function(e){if(null!=e){var i="0xFFFFFF",n="";1==e.type?(i=t.ColorUtil.getMoneyColor(e.num),n="|C:"+i+"&T:"+t.CommonUtils.zhuanhuan(e.num)+"|",this.myGold.setCount(n)):4==e.type&&(i=t.ColorUtil.getMoneyColor(e.num),n="|C:"+i+"&T:"+t.CommonUtils.zhuanhuan(e.num)+"|",this.myWing.setCount(n)),i=null,n=null}},i.prototype.changeOtherMoney=function(e){if(null!=e){var i="0xFFFFFF",n="";1==e.type?(i=t.ColorUtil.getMoneyColor(e.num),n="|C:"+i+"&T:"+t.CommonUtils.zhuanhuan(e.num)+"|",this.otherGold.setCount(n)):4==e.type&&(i=t.ColorUtil.getMoneyColor(e.num),n="|C:"+i+"&T:"+t.CommonUtils.zhuanhuan(e.num)+"|",this.otherWing.setCount(n)),i=null,n=null}},i.prototype.closeView=function(){t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.newGrp.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),t.PrivateDealsMgr.ins().send_13_6(),this.wingInput.removeEventListener(egret.TextEvent.FOCUS_IN,this.onFocusIn,this),this.wingInput.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.goldInput.removeEventListener(egret.TextEvent.FOCUS_IN,this.onFocusIn,this),this.goldInput.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.removeTouchEvent(this.search,this.onClick),this.removeTouchEvent(this.myLock,this.onClick),this.removeTouchEvent(this.trading,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),t.PrivateDealsMgr.ins().itemGlobalPos=[],t.PrivateDealsMgr.ins().isLock=!1,t.PrivateDealsMgr.ins().isDeals=!1;for(var s=0;5>s;s++)this["myItem"+s].removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this);t.DisplayUtils.removeFromParent(this.newGrp),this.dragDropUI=null,this.otherItem0=null,this.otherItem1=null,this.otherItem2=null,this.otherItem3=null,this.otherItem4=null,this.otherWing=null,this.otherGold=null,this.otherLockBtn=null,this.search=null,this.playerName=null,this.otherIsLock=null,this.myItem0=null,this.myItem1=null,this.myItem2=null,this.myItem3=null,this.myItem4=null,this.myWing=null,this.myGold=null,this.wingInput=null,this.goldInput=null,this.myLock=null,this.trading=null,this.myName=null,this.myIsLock=null,this.otherInfo=null,this.newGrp=null,this.newIcon=null,this.grpOldIdx=null,this.XTouch=null,this.YTouch=null},i}(t.BaseEuiView);t.PrivateDealsWin=e,__reflect(e.prototype,"app.PrivateDealsWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function t(){this.btnNameLev=[["1","玛法英雄榜"],["0","战神榜"],["0","法神榜"],["0","道尊榜"],["0","物攻榜"],["0","魔法榜"],["0","道术榜"]],this.dicName={},this.dicRank={},this.RANK_TYPE=5,this.recordObj={},this.tabBarTxt=["等级榜"],this.type=a.rtAllLevel}return t.prototype.init=function(){for(var t,e,i,a=0;a<this.RANK_TYPE;a++)switch(i=[],a){case s.RANK_LEVE:if(this.dicName[s.RANK_LEVE]&&0!=this.dicName[s.RANK_LEVE].length)for(e=0;e<this.btnNameLev.length;e++)this.dicName[s.RANK_LEVE][e].select=0==e?1:0;else{for(e=0;e<this.btnNameLev.length;e++)t=new n,t.id=a,t.select=Number(this.btnNameLev[e][0]),t.iconRes=this.btnNameLev[e][1],i.push(t);this.registerBtn(s.RANK_LEVE,i)}}},t.prototype.registerBtn=function(t,e){this.dicName[t]=e},t.prototype.getRankTab=function(){return this.tabBarTxt},t}();t.RankData=e,__reflect(e.prototype,"app.RankData");var i=function(){function t(){}return t}();t.RankListData=i,__reflect(i.prototype,"app.RankListData");var n=function(){function t(){}return t}();t.ListBtnInfo=n,__reflect(n.prototype,"app.ListBtnInfo");var s;!function(t){t[t.RANK_LEVE=0]="RANK_LEVE",t[t.RANK_FIGHT=1]="RANK_FIGHT",t[t.RANK_HERO=2]="RANK_HERO",t[t.RANK_MEDAL=3]="RANK_MEDAL",t[t.RANK_SOUL=4]="RANK_SOUL"}(s=t.RankType||(t.RankType={}));var a;!function(t){t[t.rtAllLevel=0]="rtAllLevel",t[t.rtWarriorLevel=1]="rtWarriorLevel",t[t.rtMagicianLevel=2]="rtMagicianLevel",t[t.rtWizardLevel=3]="rtWizardLevel",t[t.rtMoBaiRankList=4]="rtMoBaiRankList",t[t.rtPhyAtkMaxRankList=5]="rtPhyAtkMaxRankList",t[t.rtMagicAtkMAxRankList=6]="rtMagicAtkMAxRankList",t[t.rtWizardAtkMaxRankList=7]="rtWizardAtkMaxRankList",t[t.CrossServerAllLevel=8]="CrossServerAllLevel",t[t.CrossServerMoBaiRankList=9]="CrossServerMoBaiRankList",t[t.rtScore=1001]="rtScore",t[t.wboss=1002]="wboss",t[t.NightVoma=1003]="NightVoma",t[t.CrossServerChaosRank=1005]="CrossServerChaosRank",t[t.CrossServerBoss=1006]="CrossServerBoss",t[t.CrossServerNightVoma=1007]="CrossServerNightVoma",t[t.CrossServerEscapeFromTrial=1008]="CrossServerEscapeFromTrial",t[t.CrossServerShabak=10021]="CrossServerShabak"}(a=t.RankDetailType||(t.RankDetailType={}))}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="RankBtnItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var t=this.data;this.currentState=1==t.isSelected?"down":"up",this.label.text=t.iconRes}},e}(eui.ItemRenderer);t.RankBtnItemView=e,__reflect(e.prototype,"app.RankBtnItemView");var i=function(){function t(){}return t}();t.RankBtnVo=i,__reflect(i.prototype,"app.RankBtnVo")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._itemArrayCollection=null,this.dataAry=[],this.curIndex=0,this._container=t,t&&(this._itemArrayCollection=new eui.ArrayCollection,this.init())}return e.prototype.init=function(){this._scrollViewContainer=new t.ScrollViewContainer(this._container),this._scrollViewContainer.callFunc([null,null,this.onItemTap],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.itemRenderer=t.RankBtnItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.dataAry=[],this.setRankByType(t.RankType.RANK_LEVE)},e.prototype.setRankByType=function(e){this.rankType=e,this.curIndex=0;this.dataAry.length>0&&t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0;for(var i=0;i<t.ModelManager.ins().rankModel.dicName[e].length;i++)this.dataAry.push({isSelected:t.ModelManager.ins().rankModel.dicName[e][i].select,iconRes:t.ModelManager.ins().rankModel.dicName[e][i].iconRes});this.setData(this.dataAry)},e.prototype.onClickSelectHandler=function(e){void 0===e&&(e=null),t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_INSIDE)},e.prototype.onItemTap=function(e,i){this.target=e,this.curIndex!=i&&(t.ModelManager.ins().rankModel.dicName[this.rankType][this.curIndex].select=0,t.ModelManager.ins().rankModel.dicName[this.rankType][i].select=1,this.dataAry[this.curIndex].isSelected=t.ModelManager.ins().rankModel.dicName[this.rankType][this.curIndex].select,this.dataAry[this.curIndex].iconRes=t.ModelManager.ins().rankModel.dicName[this.rankType][this.curIndex].iconRes,this._itemArrayCollection.replaceItemAt(this.dataAry[this.curIndex],this.curIndex),this.dataAry[i].isSelected=t.ModelManager.ins().rankModel.dicName[this.rankType][i].select,this.dataAry[i].iconRes=t.ModelManager.ins().rankModel.dicName[this.rankType][i].iconRes,this._itemArrayCollection.replaceItemAt(this.dataAry[i],i),this.curIndex=i,this._callfunc&&this._callfunc(i))},e.prototype.setData=function(t){this.creatItem(t)},e.prototype.creatItem=function(t){this._itemArrayCollection.replaceAll(this.dataAry),this._itemArrayCollection.refresh()},e.prototype.destroy=function(){this._scrollViewContainer.destory(),this._scrollViewContainer=null,this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,this.dataAry.length>0&&t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0,this.dataAry=null,this._callfunc&&(this._callfunc=null)},e}();t.RankBtnListView=e,__reflect(e.prototype,"app.RankBtnListView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.state_1="rank_bg2",i.state_2="rank_bg3",i.colorRank=[16718530,16742144,1769471],i.vipStr=["rank_bk","rank_lk","rank_lk1","rank_zk","rank_ck","rank_cx","rank_cy"],i.skinName=Main.gameParameter.pfID==t.PlatFormID.QQGame?"RankQQListItemSkin":"RankListItemSkin",i.touchEnabled=!1,i.touchChildren=!0,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onMouseDouble,this),this.addMouseMoveEvent(this.imgTitle,this.mouseMove),this.addMouseOverEvent(this.imgTitle,this.mouseMove),this.logo.visible=!1},i.prototype.onMouseDouble=function(t){console.log("鼠标双击"),this.callFunc&&this.callFunc()},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(this.data){var n=i.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_RANKTIPS,{type:t.ModelManager.ins().rankModel.type,rank:this.data.rank},{x:n.x+i.width/2,y:n.y+i.height/2})}}},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){if(this.imgTitle.visible=0==t.ModelManager.ins().rankModel.type?!1:this.data.rank<11?!0:!1,1==t.ModelManager.ins().rankModel.type||2==t.ModelManager.ins().rankModel.type||3==t.ModelManager.ins().rankModel.type?this.imgTitle.source=1==this.data.rank?"rank_ch1":"rank_ch2":this.imgTitle.source=this.data.rank<4?"rank_ch1":this.data.rank<=10?"rank_ch2":"",this.imgVip.visible=!1,t.ModelManager.ins().rankModel.type==t.RankDetailType.rtAllLevel){var e=t.VipData.ins().getVipLv(this.data.vipLv);e>0&&(this.imgVip.source=this.vipStr[e-1],this.imgVip.visible=!0)}var i=this.data,n=i.index%2==0?this.state_1:this.state_2;this.bg.$setTexture(RES.getRes(n)),this.select.visible=1==i.isSelected?!0:!1,i.rank<4?(this.txt_name.textColor=this.colorRank[i.rank-1],this.rankImg.visible=!0,this.txt_rank.visible=!1,this.rankImg.source="rank_pm"+i.rank):(this.txt_name.textColor=15064527,this.rankImg.visible=!1,this.txt_rank.visible=!0,this.txt_rank.text=i.rank+""),this.txt_guild.text=i.guildName,this.playerId=i.playerId,this.txt_name.text=i.name,this.txt_level.text=i.levelDes;var s=i.superPL;if(this.callFunc=i.callFunc,Main.gameParameter.pfID==t.PlatFormID.QQGame){var a=s>>16,r=a>>8,o=255&a,l=65535&s;this.logo.visible=r&&l>0,this.logo.source=r&&l>0?1==r?"lz_pt"+(l+1):"lz_hh"+(l+1):"",this.isBlueYear.visible=1==o}else this.logo.visible=s>0}},i.prototype.destroy=function(){this.removeEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onMouseDouble,this),this.imgTitle.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.imgTitle.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.callFunc&&(this.callFunc=null),this.data=null,this.bg.source="",t.DisplayUtils.removeFromParent(this)},i}(t.BaseItemRender);t.RankListItemView=e,__reflect(e.prototype,"app.RankListItemView")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._itemArrayCollection=null,this.curIdx=-1,this._container=t,t&&(this._itemArrayCollection=new eui.ArrayCollection,this.init())}return e.prototype.init=function(){this._scrollViewContainer=new t.ScrollViewContainer(this._container),this._scrollViewContainer.callFunc([null,null,this.onItemTap],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.scrollPolicyH=eui.ScrollPolicy.OFF,this._scrollViewContainer.scrollPolicyV=eui.ScrollPolicy.OFF,this._scrollViewContainer.itemRenderer=t.RankListItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.dataAry=[]},e.prototype.setRankByType=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),this.callFunc1=i,this.callFunc2=n,this.curIdx=0;var s,a=[],r=t.ModelManager.ins().rankModel.dicRank[e],o="";if(r&&r.list.length>0){for(var l=r.list,h=0;h<l.length;h++){s=l[h],o=s.circle>0?s.circle+t.LanguageUtils.language_Common_0+s.level:s.level+"";var p=0;0==h&&(p=1,i&&i({close:1,playerID:s.playerId})),a.push({index:h,isSelected:p,playerId:s.playerId,rank:s.rank,name:s.name,levelDes:o,superPL:s.superPL,guildName:s.guildName,vipLv:s.vipLv,callFunc:this.callFunc.bind(this)})}this.setData(a)}else this.setData([]);n&&n({data:a})},e.prototype.onClickSelectHandler=function(e){void 0===e&&(e=null),t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_INSIDE)},e.prototype.onItemTap=function(t,e,i,n){this.curIdx>=0&&this.dataAry[this.curIdx]&&(this.dataAry[this.curIdx].isSelected=0,this._itemArrayCollection.replaceItemAt(this.dataAry[this.curIdx],this.curIdx)),this.dataAry[e].isSelected=1,this._itemArrayCollection.replaceItemAt(this.dataAry[e],e),this._itemArrayCollection.refresh(),this.curIdx=e,this._rankListItemView=n,this.callFunc1&&this.callFunc1({playerID:t.playerId,close:1}),console.log("onItemTap:",t.playerId)},e.prototype.onMouseDouble=function(){this.callFunc&&this.callFunc(),console.log("mouseDouble")},e.prototype.setData=function(t){this.creatItem(t)},e.prototype.creatItem=function(e){t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0,this.curIdx=0;for(var i=0;i<e.length;++i)this.dataAry.push(e[i]);this._itemArrayCollection.replaceAll(this.dataAry),this._itemArrayCollection.refresh()},e.prototype.callFunc=function(){this._rankListItemView&&this.callFunc1&&this.callFunc1({view:this._rankListItemView,pos:{x:750,y:20}})},e.prototype.destroy=function(){for(;this._list.numChildren>0;){var e=this._list.getChildAt(0);e.destroy(),e=null}this._scrollViewContainer.destory(),this._scrollViewContainer=null,this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0,this.dataAry=null,this.callFunc1&&(this.callFunc1=null),this.callFunc2&&(this.callFunc2=null),this._rankListItemView&&(this._rankListItemView=null)},e}();t.RankListView=e,__reflect(e.prototype,"app.RankListView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="Btn9Skin",e.touchEnabled=!1,e.touchChildren=!0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.visible=null!=this.data,this.labelDisplay&&this.data.text&&(this.labelDisplay.text=this.data.text)},e}(eui.ItemRenderer);t.RankRightMenuItem=e,__reflect(e.prototype,"app.RankRightMenuItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RankRightMenuSkin",t}return __extends(i,e),i.prototype.partAdded=function(i,n){e.prototype.partAdded.call(this,i,n),n==this.gList&&(this.gList.itemRenderer=t.RankRightMenuItem,this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this))},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.setData=function(){this.x=0,this.y=0,this.bindList()},i.prototype.onChange=function(e){var i=this.gList.selectedItem;if(t.GlobalData.otherPlayerIdDummy){if(t.GlobalData.otherPlayerId<1e3)return;if("showInfoBtn"!=i.name)return}switch(i.name){case"chatBtn":t.EventManager.ins().sendEvent(t.ChatEvent.PLAY_NAME_SLECT,[{indexText:t.GlobalData.otherPlayerName}]);break;case"showInfoBtn":if(t.ViewManager.ins().isShow(t.OtherPlayerView))return;t.EquipItemMgr.ins().sendQueryOthersEquips(t.GlobalData.otherPlayerId);break;case"addFriendBtn":var n=new t.CSFriend_Add_Data;n.id=t.GlobalData.otherPlayerId,n.nickName="",t.FriendMgr.ins().sendAddFriend(n);break;case"delFriendBtn":var s=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt21,t.GlobalData.otherPlayerName));t.CautionView.show(s,function(){this.sendDelInfo(t.FriendState.Friend)},this);break;case"inviteTeamBtn":var a=t.LanguageUtils.language_Team_LeaderinviteJonTeam_tips_0+t.GlobalData.otherPlayerName+t.LanguageUtils.language_Team_LeaderinviteJonTeam_tips_1;t.CautionView.show(a,function(){t.TeamMgr.ins().onSendInviteJoinTeam(t.GlobalData.otherPlayerId,"")},this);break;case"applyTeamBtn":var r=t.LanguageUtils.language_Team_ApplyAddTeam_tips_0+t.GlobalData.otherPlayerName+t.LanguageUtils.language_Team_ApplyAddTeam_tips_1;t.CautionView.show(r,function(){t.TeamMgr.ins().onSendApplyJoinTeam(t.GlobalData.otherPlayerId)},this);break;case"addConBtn":var o=new t.CSFriend_Add_Concern_Data;o.id=t.GlobalData.otherPlayerId,o.nickName="",t.FriendMgr.ins().sendAddConcern(o);break;case"addBlackBtn":var l=new t.CSFriend_Add_Concern_Data;l.id=t.GlobalData.otherPlayerId,l.nickName="",t.FriendMgr.ins().sendAddBlackList(l);break;case"privateTradeLineBtn":var h=new Object;h.sendName=t.GlobalData.otherPlayerName,t.ViewManager.ins().isShow(t.PrivateDealsWin)||t.ViewManager.ins().open(t.PrivateDealsWin,h)}},i.prototype.bindList=function(){var e=t.FriendMgr.ins().findIsFriend(t.GlobalData.otherPlayerId);e?this.gList.dataProvider=new eui.ArrayCollection([{state:0,text:t.LanguageUtils.language_Omission_txt111,name:"chatBtn"},{state:1,text:t.LanguageUtils.language_Omission_txt112,name:"showInfoBtn"},{state:1,text:t.LanguageUtils.language_System43,name:"privateTradeLineBtn"},{state:1,text:t.LanguageUtils.language_Omission_txt113,name:"delFriendBtn"},{state:0,text:t.LanguageUtils.language_System52,name:"inviteTeamBtn"},{state:0,text:t.LanguageUtils.Language_Team_Btn_Text4,name:"applyTeamBtn"},{state:0,text:t.LanguageUtils.language_System14,name:"addConBtn"},{state:0,text:t.LanguageUtils.language_Omission_txt114,name:"addBlackBtn"}]):this.gList.dataProvider=new eui.ArrayCollection([{state:0,text:t.LanguageUtils.language_Omission_txt111,name:"chatBtn"},{state:1,text:t.LanguageUtils.language_Omission_txt112,name:"showInfoBtn"},{state:1,text:t.LanguageUtils.language_System43,name:"privateTradeLineBtn"},{state:0,text:t.LanguageUtils.language_System12,name:"addFriendBtn"},{state:0,text:t.LanguageUtils.language_System52,name:"inviteTeamBtn"},{state:0,text:t.LanguageUtils.Language_Team_Btn_Text4,name:"applyTeamBtn"},{state:0,text:t.LanguageUtils.language_System14,name:"addConBtn"},{state:0,text:t.LanguageUtils.language_Omission_txt114,name:"addBlackBtn"}]),this.gList.height=48*this.gList.dataProvider.length,this.bg.height=47*this.gList.dataProvider.length,this.height=this.bg.height,this.gList.validateNow()},i.prototype.sendDelInfo=function(e){var i=new t.CSFriend_Del_Data;i.id=t.GlobalData.otherPlayerId,i.nickName="",i.type=e,t.FriendMgr.ins().sendDeleteFirends(i)
},i.prototype.destroy=function(){t.GlobalData.otherPlayerIdDummy=!1,this.gList&&(this.gList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.gList.removeChildren(),this.gList.itemRenderer=null,this.gList.dataProvider=null,this.gList=null),this.bg&&(this.bg.source="",this.bg=null),t.DisplayUtils.removeFromParent(this)},i}(eui.Component);t.RankRightMenuView=e,__reflect(e.prototype,"app.RankRightMenuView",["eui.UIComponent","egret.DisplayObject"])}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RankTipsSkin",t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.updateStr=function(i,n){if(i&&0!=i.type){var s=t.GlobalConfig.ranktitleconfig[i.type][i.rank];s&&(this.titleImg.source=s.pictips+"",this.descLab.textFlow=t.TextFlowMaker.generateTextFlow(s.tips))}e.prototype.onResizeUI.call(this,i,n)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.titleImg.source="",this.descLab.text=""},i}(t.TipsBase);t.RankTipsView=e,__reflect(e.prototype,"app.RankTipsView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.tabArr=[],i.selectedItem=0,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="RankViewSkin",i.name="RankView",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),t.ModelManager.ins().rankModel.init(),this.tabBar.itemRenderer=t.NewTabBarItemRenderer,this.roleInnerModel=new t.RoleInnerModel(this.modelGroup),this.flipPage=new t.FlipPage(this.btn_home,this.btn_pre,this.btn_next),this.flipPage.maxLength=10,this.flipPage.addEventListener(t.CompEvent.PAGE_CHANGE,this.onPageChange,this),this.rankBtnListView=new t.RankBtnListView(this.btn_list),this.rankBtnListView._callfunc=this.callfunc.bind(this),this.rankListView=new t.RankListView(this.rank_list),this.rank_no.visible=t.GlobalData.sectionOpenDay<2,this.menu_group.visible=!1,this.itemArrayCollection=new eui.ArrayCollection,this.rankRightMenuView=new t.RankRightMenuView,this.menu_group.addChild(this.rankRightMenuView)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.rank_guild.text=t.LanguageUtils.language_Friend_Txt3+"："+t.LanguageUtils.language_Omission_txt89,this.addTouchEvent(this.btn_operation,this.onOperation),this.addTouchEvent(this.closeBtn,this.closeView),this.addChangeEvent(this.tabBar,this.onTabTouch),this.tabArr=t.ModelManager.ins().rankModel.getRankTab(),this.tabArr&&(this.tabBar.dataProvider=new eui.ArrayCollection(this.tabArr),this.onChangeTab(0)),t.EventManager.ins().addEvent(t.CompEvent.RANK_SHOW_LIST,this.onShowList,this),t.DefaultMgr.ins().send_0_23(t.RankDetailType.rtAllLevel),this.observe(t.DefaultMgr.ins().post_s_0_71,this.setRankListData),this.observe(t.EquipMgr.ins().post_7_7,this.setModel)},i.prototype.onShowList=function(e){e>t.RankDetailType.rtWizardAtkMaxRankList||this.setRankListData([t.ModelManager.ins().rankModel.type])},i.prototype.onTabTouch=function(t){this.onChangeTab(t.currentTarget.selectedIndex)},i.prototype.setRankListData=function(e){var i=e[0];i>t.RankDetailType.rtWizardAtkMaxRankList||(this.valueStr.text=t.LanguageUtils.language_Friend_Txt1,5==i?this.valueStr.text=t.LanguageUtils.language_Omission_txt95:6==i?this.valueStr.text=t.LanguageUtils.language_Attribute_Name_3:7==i&&(this.valueStr.text=t.LanguageUtils.language_Omission_txt96),this.rankListView.setRankByType(i,this.onMenu.bind(this),this.onPageData.bind(this)),this.rank_no.visible=null==t.ModelManager.ins().rankModel.dicRank[i]||void 0==t.ModelManager.ins().rankModel.dicRank[i]||0==t.ModelManager.ins().rankModel.dicRank[i].list.length,this.playerRankInfo(i))},i.prototype.playerRankInfo=function(e){void 0===e&&(e=0);var i=t.EntityMgr.ins().getPayer,n=i.propSet.getLevel(),s=i.propSet.getGuildName();""==s?this.rank_guild.text=t.LanguageUtils.language_Friend_Txt3+"："+t.LanguageUtils.language_Omission_txt89:this.rank_guild.text=t.LanguageUtils.language_Friend_Txt3+"："+s;var a=t.GlobalConfig.RankConfig.openlv,r=t.GlobalConfig.RankConfig.loadlv;a>n?this.rank_desc.text=t.LanguageUtils.language_Omission_txt22:n>=a&&r>n?this.rank_desc.text=t.LanguageUtils.language_Omission_txt23:t.ModelManager.ins().rankModel.dicRank[e]&&t.ModelManager.ins().rankModel.dicRank[e].myData.rank>0?this.rank_desc.text=t.LanguageUtils.language_FuBen_Text7+t.ModelManager.ins().rankModel.dicRank[e].myData.rank:this.rank_desc.text=t.LanguageUtils.language_Omission_txt23},i.prototype.onChangeTab=function(e){t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_LEVEL),this.rankBtnListView&&this.rankBtnListView.setRankByType(e)},i.prototype.onMenu=function(e){e.playerID&&(this.selectedItem=e.playerID,t.GameMap.isForbiddenArea?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips118):t.EquipMgr.ins().send_7_7(this.selectedItem))},i.prototype.showMenu=function(){t.EquipItemMgr.ins().sendQueryOthersEquips(this.selectedItem)},i.prototype.onPageData=function(t){var e=t.data;e&&this.flipPage.setData(e),this.flipPage.currentPage=1},i.prototype.onPageChange=function(t){var e=t.data;e&&0==e.length?this.rank_no.visible=!0:this.rank_no.visible=!1;for(var i=0;i<e.length;i++)0==i?(e[i].isSelected=1,this.onMenu({playerID:e[i].playerId})):e[i].isSelected=0;this.rankListView.setData(e),this.pageLab.text=this.flipPage.getPageText()},i.prototype.callfunc=function(e){var i=this;e>=4&&(e+=1),t.ModelManager.ins().rankModel.type=e,t.DefaultMgr.ins().send_0_23(e,100,function(){i.setRankListData([e])})},i.prototype.setModel=function(t){var e=t.equips;this.roleInnerModel.setOtherData(e,t)},i.prototype.closeView=function(){t.ViewManager.ins().close(this)},i.prototype.onOperation=function(){0!=this.selectedItem&&this.showMenu()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.rankBtnListView&&this.rankBtnListView.destroy(),this.rankListView&&this.rankListView.destroy(),this.rankRightMenuView&&this.rankRightMenuView.destroy(),this.dragDropUI=null,this.rankBtnListView=null,this.rankListView=null,this.rankRightMenuView=null,this.flipPage&&(this.flipPage.removeEventListener(t.CompEvent.PAGE_CHANGE,this.onPageChange,this),this.flipPage.destory(),this.flipPage=null),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.tabBar=null,this.itemArrayCollection.removeAll(),this.itemArrayCollection=null,this.menu_group.numElements>0&&this.menu_group.removeChildren(),t.DisplayUtils.removeFromParent(this.menu_group),this.rank_list.numElements>0&&this.rank_list.removeChildren(),t.DisplayUtils.removeFromParent(this.rank_list),this.roleInnerModel&&this.roleInnerModel.destory(),this.roleInnerModel=null,this.btn_home=this.btn_pre=this.btn_next=null,this.btn_operation=null,t.ModelManager.ins().rankModel.type=t.RankDetailType.rtAllLevel,t.EventManager.ins().removeEvent(t.CompEvent.RANK_SHOW_LIST,this.onShowList,this),this.removeTouchEvent(this.btn_operation,this.onOperation),this.removeTouchEvent(this.closeBtn,this.closeView),this.removeFromParent()},i}(t.BaseEuiView);t.RankView=e,__reflect(e.prototype,"app.RankView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function e(){this.init()}return e.prototype.init=function(){this.srvid=t.LocationProperty.srvid,this.serverid=t.LocationProperty.originalSrvid,this.serverName=t.LocationProperty.srvname,this.serverAlias=t.LocationProperty.serverAlias,this.uid=t.LocationProperty.openID,this.roleId=t.LocationProperty.roleId,this.isMobil=gamelib.DeviceUtils.IsNative?gamelib.DeviceUtils.IsIOS?"3":"1":"2"},e.prototype.updateOrderInfo=function(t){this.prodId=t.prodId,this.itemName=t.itemName,this.description=t.description,this.price=t.price,this.money=t.price/100,this.rechargeNum=t.rechargeNum},e.prototype.getRechargeData=function(){var e=this,i=t.EntityMgr.ins().getPayer;return{uid:e.uid,srvid:e.srvid,serverid:e.serverid,serverId:e.serverid,serverName:e.serverName,serverAlias:e.serverAlias,roleId:e.roleId,roleName:i.propSet.getName()}},e.prototype.getRechargeData_web=function(){var e=this,i=t.EntityMgr.ins().getPayer;return{orderid:e.orderid,orderId:e.orderid,prodId:e.prodId,productId:e.prodId,itemName:e.itemName,productName:e.itemName,description:e.description,goodsDesc:e.description,productDec:e.description,price:e.price,money:e.money,rechargeNum:e.rechargeNum,buyNum:1,ratio:100,isMobil:e.isMobil,srvid:e.srvid,serverid:e.serverid,serverId:e.serverid,serverName:e.serverName,serverAlias:e.serverAlias,uid:e.uid,roleId:e.roleId,roleName:i.propSet.getName(),roleLevel:i.propSet.getLevel(),coinNum:i.propSet.getNotBindYuanBao(),guildName:i.propSet.getGuildName(),vip:t.VipData.ins().getMyVipLv(),payNotifyUrl:Main.gameParameter.payNotice,orderTime:Math.round((new Date).getTime()/1e3),extension:e.orderid+"|"+e.isMobil+"|"+e.serverid+"|"+e.roleId}},e.prototype.getRechargeData_Native=function(){var e=this,i=t.EntityMgr.ins().getPayer;return{orderid:e.orderid,orderID:e.orderid,prodId:e.prodId,productId:e.prodId,itemName:e.itemName,productName:e.itemName,description:e.description,productDescription:e.description,price:e.price,money:e.money,rechargeNum:e.rechargeNum,buyNum:1,ratio:100,isMobil:e.isMobil,srvid:e.srvid,serverid:e.serverid,serverId:e.serverid,serverID:e.serverid,serverName:e.serverName,serverAlias:e.serverAlias,uid:e.uid,roleId:e.roleId,roleName:i.propSet.getName(),roleLevel:i.propSet.getLevel(),coinNum:i.propSet.getNotBindYuanBao(),guildName:i.propSet.getGuildName(),vip:t.VipData.ins().getMyVipLv(),payNotifyUrl:Main.gameParameter.payNotice,orderTime:Math.round((new Date).getTime()/1e3),extension:e.orderid+"|"+e.isMobil+"|"+e.serverid+"|"+e.roleId}},e}();t.RechargeData=e,__reflect(e.prototype,"app.RechargeData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._isInit=!1,i.process1=1,i.process2=2,i.process3=3,i.requestOrderInfo=new t.RechargeData,i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.init=function(){this._isInit=!0;var e=Main.gameParameter.pfID;switch(e){case t.PlatFormID.PFQIDIAN:case t.PlatFormID.PF7game:case t.PlatFormID.PFYAODOU:case t.PlatFormID.FeiHuo:case t.PlatFormID.GeMen:case t.PlatFormID.PF355wan:case t.PlatFormID.PF360uu:case t.PlatFormID.teeqee:case t.PlatFormID.xunwan:case t.PlatFormID.chinaGame:case t.PlatFormID.bvwan:case t.PlatFormID.keleyx:case t.PlatFormID.wan2323:case t.PlatFormID.GameNo1:case t.PlatFormID.PF37tang:case t.PlatFormID.heheyx:case t.PlatFormID.PF52gg:case t.PlatFormID.PF1771wan:case t.PlatFormID.wuxiagu:case t.PlatFormID.zixia:case t.PlatFormID.MaYi:this._processType=this.process3}},i.prototype.onPay=function(e){var i=t.EntityMgr.ins().getPayer;if(Main.gameParameter.isDisablePay)t.UserTips.ins().showUITips(t.LanguageUtils.language_Error_102);else if(this._isInit||this.init(),this._processType==this.process3)this.onRecharge();else if(10001==Main.gameParameter.pfID)window.payFunction({uid:t.LocationProperty.openID,serverId:t.LocationProperty.srvid,serverAlias:t.LocationProperty.serverAlias});else if(10002==Main.gameParameter.pfID)t.CautionView.show("您将前往盛趣官网充值，充值会发到本账号当前在线角色\n充值到账前请不要切换区服和角色，防止充值异常",function(){window.payFunction({serverId:t.LocationProperty.srvid})},this);else if(10003==Main.gameParameter.pfID)gamelib.DeviceUtils.IsNative?(t.ViewManager.ins().close(t.RechargeView),t.ViewManager.ins().open(t.RechargeView)):window.payFunction({});else if(10004==Main.gameParameter.pfID)t.ViewManager.ins().close(t.Recharge4366View),window["4366Pay"]=this.pay4366View.bind(this),window.payFunction({});else if(10005==Main.gameParameter.pfID)t.ViewManager.ins().close(t.RechargeView),t.ViewManager.ins().open(t.RechargeView);else if(Main.gameParameter.pfID==t.PlatFormID.QQGame)t.ViewManager.ins().close(t.RechargeQQView),t.ViewManager.ins().open(t.RechargeQQView);else if(Main.gameParameter.pfID==t.PlatFormID.F1)t.ViewManager.ins().close(t.RechargeF1View),t.ViewManager.ins().open(t.RechargeF1View);else if(window.pfID==t.PlatFormID.comi17)t.ViewManager.ins().close(t.RechargeComiView),t.ViewManager.ins().open(t.RechargeComiView);else if(Main.gameParameter.pfID==t.PlatFormID.gameCat||Main.gameParameter.pfID==t.PlatFormID.suHai||Main.gameParameter.pfID==t.PlatFormID.gameCatEnd||Main.gameParameter.pfID==t.PlatFormID.Potato||Main.gameParameter.pfID==t.PlatFormID.PotatoBXSC||Main.gameParameter.pfID==t.PlatFormID.BaYe||Main.gameParameter.pfID==t.PlatFormID.xiuLuoBaYe||Main.gameParameter.pfID==t.PlatFormID.shengMa||Main.gameParameter.pfID==t.PlatFormID.HuoYan||Main.gameParameter.pfID==t.PlatFormID.ShuangHuo||Main.gameParameter.pfID==t.PlatFormID.gameCatGaoBao)t.ViewManager.ins().close(t.RechargeGameCatView),t.ViewManager.ins().open(t.RechargeGameCatView);else if(Main.gameParameter.pfID==t.PlatFormID.PF360)gamelib.DeviceUtils.IsNative||(t.ViewManager.ins().close(t.RechargeView),t.ViewManager.ins().open(t.RechargeView));else if(Main.gameParameter.pfID==t.PlatFormID.PF4399)i&&i.propSet&&window.payFunction({serverAlias:t.LocationProperty.serverAlias,roleId:t.LocationProperty.roleId,roleName:i.propSet.getName()});else if(Main.gameParameter.pfID==t.PlatFormID.HUYU37){var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.addEventListener(egret.Event.COMPLETE,function(e){var i=e.target;if(null!=i.response&&""!=i.response){var n=JSON.parse(i.response);(1==n.code||"1"==n.code)&&(t.ViewManager.ins().close(t.Recharge37QRCodeView),t.ViewManager.ins().open(t.Recharge37QRCodeView)),-2==n.code||"-2"==n.code||t.UserTips.ins().showUITips("未通过实名认证的用户不能进行充值！")}},this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.errHttp,this);var s="login_account="+Main.gameParameter.userInfo.user_name+"&actor_id="+t.LocationProperty.roleId+"&sid="+t.LocationProperty.originalSrvid%1e4+"&pay_referer="+Main.gameParameter.userInfo.client;n.open(window.payRealName+"?"+s,egret.HttpMethod.GET),n.send()}else Main.gameParameter.pfID==t.PlatFormID.PFAQIYI||Main.gameParameter.pfID==t.PlatFormID.PF2144Game||Main.gameParameter.pfID==t.PlatFormID.shunwang?(t.ViewManager.ins().close(t.RechargeQRCodeView),t.ViewManager.ins().open(t.RechargeQRCodeView)):(t.ViewManager.ins().close(t.RechargeView),t.ViewManager.ins().open(t.RechargeView))},i.prototype.onRecharge=function(){window.payFunction({serverId:t.LocationProperty.originalSrvid})},i.prototype.openRechargeView=function(){},i.prototype.openRechargeCodeView=function(){},i.prototype.pay4366View=function(){t.ViewManager.ins().open(t.Recharge4366View)},i.prototype.payFunction=function(e){if(this.requestOrderInfo.updateOrderInfo(e),10003==Main.gameParameter.pfID)Main.Native_onClickPay({productId:e.prodId,productName:e.itemName,productDescription:e.description,amount:e.price/100,serverId:t.LocationProperty.serverAlias,gameExtra:t.LocationProperty.roleId+""});else if(Main.gameParameter.pfID==t.PlatFormID.PF360){var i={price:e.price,roleId:t.LocationProperty.roleId,prodId:e.prodId};window.payFunction(i)}else if(Main.gameParameter.pfID==t.PlatFormID.PFLuDaShi)t.ViewManager.ins().close(t.RechargeQRCodeView),t.ViewManager.ins().open(t.RechargeQRCodeView,e);else if(Main.gameParameter.pfID==t.PlatFormID.SOUGOU)t.ViewManager.ins().close(t.RechargeQRCodeView),t.ViewManager.ins().open(t.RechargeQRCodeView,e);else{t.TimerManager.ins().removeAll(this),t.ViewManager.ins().close(t.RechargeRequestView),t.ViewManager.ins().open(t.RechargeRequestView);var n=new egret.HttpRequest;n.addEventListener(egret.Event.COMPLETE,this.completeHttp,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.errHttp,this);var s="?server_id="+t.LocationProperty.originalSrvid+"&actor_id="+t.LocationProperty.originalSrvid+"&goods_id="+e.prodId+"&time="+(new Date).getTime()+Math.random();n.open(Main.gameParameter.orderUrl+s,egret.HttpMethod.GET),n.send();var a=this;t.TimerManager.ins().doTimer(1e4,1,function(){n.removeEventListener(egret.Event.COMPLETE,a.completeHttp,a),n.removeEventListener(egret.IOErrorEvent.IO_ERROR,a.errHttp,a),a.errHttpOvertime(null),n=null},this)}},i.prototype.errHttp=function(e){t.TimerManager.ins().removeAll(this),t.ViewManager.ins().close(t.RechargeRequestView),t.UserTips.ins().showUITips(t.LanguageUtils.language_Error_103)},i.prototype.errHttpOvertime=function(e){t.TimerManager.ins().removeAll(this),t.ViewManager.ins().close(t.RechargeRequestView),t.UserTips.ins().showUITips(t.LanguageUtils.language_Error_109)},i.prototype.completeHttp=function(e){t.TimerManager.ins().removeAll(this);var i=e.target;if(t.ViewManager.ins().close(t.RechargeRequestView),null==i.response||""==i.response||-1!=i.response.indexOf("参数错误"))t.UserTips.ins().showUITips("错误码："+i.response),this.errHttp(null);else{var n=gamelib.DeviceUtils.IsIOS?"3":"1",s=t.EntityMgr.ins().getPayer,a=i.response+"";if(Main.gameParameter.pfID==t.PlatFormID.gameCat||Main.gameParameter.pfID==t.PlatFormID.gameCatEnd||Main.gameParameter.pfID==t.PlatFormID.gameCatGaoBao)if(gamelib.DeviceUtils.IsNative)Main.Native_onClickPay({productId:this.requestOrderInfo.prodId,productName:this.requestOrderInfo.itemName,productDescription:this.requestOrderInfo.description,price:this.requestOrderInfo.price/100,buyNum:1,coinNum:s.propSet.getNotBindYuanBao(),serverID:t.LocationProperty.originalSrvid,serverName:t.LocationProperty.srvname,roleId:t.LocationProperty.roleId,roleID:t.LocationProperty.roleId,roleName:s.propSet.getName(),roleLevel:s.propSet.getLevel(),vip:t.VipData.ins().getMyVipLv(),payNotifyUrl:Main.gameParameter.payNotice,extension:a+"|"+n,productType:1});else{var r={productId:this.requestOrderInfo.prodId,money:this.requestOrderInfo.price,goodsDesc:this.requestOrderInfo.description,productType:1,notifyUrl:Main.gameParameter.payNotice,roleId:t.LocationProperty.roleId,roleName:s.propSet.getName(),serverName:t.LocationProperty.srvname,serverId:t.LocationProperty.originalSrvid,extension:a+"|2",roleLevel:s.propSet.getLevel()};window.payFunction(r)}else if(10011==Main.gameParameter.pfID)if(gamelib.DeviceUtils.IsNative)Main.Native_onClickPay({coinNum:s.propSet.getNotBindYuanBao(),buyNum:1,payNotifyUrl:Main.gameParameter.payNotice,extension:a+"|1",orderID:a,guildName:s.propSet.getGuildName(),price:this.requestOrderInfo.price,productDescription:this.requestOrderInfo.description,productId:this.requestOrderInfo.prodId,productName:this.requestOrderInfo.itemName,proportion:10,roleId:t.LocationProperty.roleId,roleID:t.LocationProperty.roleId,roleLevel:s.propSet.getLevel(),roleName:s.propSet.getName(),serverID:t.LocationProperty.originalSrvid,serverName:t.LocationProperty.srvname,orderTime:Math.round((new Date).getTime()/1e3),totalPrice:this.requestOrderInfo.price,vip:t.VipData.ins().getMyVipLv()});else{var o={coinNum:s.propSet.getNotBindYuanBao(),buyNum:1,payNotifyUrl:Main.gameParameter.payNotice,extension:a+"|2",orderid:a,guildName:s.propSet.getGuildName(),price:this.requestOrderInfo.price,goodsDesc:this.requestOrderInfo.description,productId:this.requestOrderInfo.prodId,productName:this.requestOrderInfo.itemName,ratio:10,roleId:t.LocationProperty.roleId,roleLevel:s.propSet.getLevel(),roleName:s.propSet.getName(),serverId:t.LocationProperty.originalSrvid,serverName:t.LocationProperty.srvname,orderTime:Math.round((new Date).getTime()/1e3),vip:t.VipData.ins().getMyVipLv()};window.payFunction(o)}else if(10012==Main.gameParameter.pfID||10041==Main.gameParameter.pfID)gamelib.DeviceUtils.IsNative?Main.Native_onClickPay({roleCreateTime:Math.floor(s.propSet.getRoleCreateTime()/1e3),serverID:10041==Main.gameParameter.pfID?t.LocationProperty.originalSrvid%1e4:t.LocationProperty.originalSrvid,serverName:t.LocationProperty.srvname,roleName:s.propSet.getName(),roleId:t.LocationProperty.roleId,roleID:t.LocationProperty.roleId,roleLevel:s.propSet.getLevel(),vip:t.VipData.ins().getMyVipLv(),coinNum:s.propSet.getNotBindYuanBao(),guildName:s.propSet.getGuildName(),orderID:a,productName:"元宝",moneyCount:this.requestOrderInfo.rechargeNum,amount:this.requestOrderInfo.price/100,productId:this.requestOrderInfo.prodId,productDescription:this.requestOrderInfo.description,price:Math.floor(this.requestOrderInfo.price/100/this.requestOrderInfo.rechargeNum),extension:a+"|"+n+"|"+(10041==Main.gameParameter.pfID?t.LocationProperty.originalSrvid%1e4:t.LocationProperty.originalSrvid)+"|"+t.LocationProperty.roleId}):window.payFunction({roleId:t.LocationProperty.roleId,roleName:s.propSet.getName(),serverId:10041==Main.gameParameter.pfID?t.LocationProperty.originalSrvid%1e4:t.LocationProperty.originalSrvid,serverName:t.LocationProperty.srvname,rolelevel:s.propSet.getLevel(),orderid:a,price:this.requestOrderInfo.price,itemName:this.requestOrderInfo.itemName,description:this.requestOrderInfo.description,prodId:this.requestOrderInfo.prodId});else if(10013==Main.gameParameter.pfID)if(gamelib.DeviceUtils.IsNative)Main.Native_onClickPay({productId:this.requestOrderInfo.prodId,itemName:this.requestOrderInfo.itemName,description:this.requestOrderInfo.description,price:this.requestOrderInfo.price,serverName:t.LocationProperty.srvname,serverID:t.LocationProperty.originalSrvid,roleName:s.propSet.getName(),roleId:t.LocationProperty.roleId,roleID:t.LocationProperty.roleId,roleLevel:s.propSet.getLevel(),extension:a+"|"+n+"|"+t.LocationProperty.originalSrvid+"|"+t.LocationProperty.roleId});else{var l={itemName:this.requestOrderInfo.itemName,description:this.requestOrderInfo.description,price:this.requestOrderInfo.price,serverName:t.LocationProperty.srvname,serverID:t.LocationProperty.originalSrvid,roleName:s.propSet.getName(),roleId:t.LocationProperty.roleId,roleLevel:s.propSet.getLevel(),extension:a+"|2|"+t.LocationProperty.originalSrvid+"|"+t.LocationProperty.roleId};window.payFunction(l)}else if(Main.gameParameter.pfID==t.PlatFormID.Potato||Main.gameParameter.pfID==t.PlatFormID.BaYe||Main.gameParameter.pfID==t.PlatFormID.xiuLuoBaYe)gamelib.DeviceUtils.IsNative?Main.Native_onClickPay({roleId:t.LocationProperty.roleId,roleID:t.LocationProperty.roleId,roleName:s.propSet.getName(),roleLevel:s.propSet.getLevel(),coinNum:s.propSet.getNotBindYuanBao(),vip:t.VipData.ins().getMyVipLv(),guildName:s.propSet.getGuildName(),serverName:t.LocationProperty.srvname,serverID:Main.gameParameter.pfID==t.PlatFormID.xiuLuoBaYe?t.LocationProperty.originalSrvid%2e4:t.LocationProperty.originalSrvid%1e4,orderID:a,productId:this.requestOrderInfo.prodId,money:this.requestOrderInfo.price/100,productCount:1,productName:this.requestOrderInfo.itemName,productDescription:this.requestOrderInfo.description,exchangeRate:10,currencyName:"元宝",notifyUrl:Main.gameParameter.payNotice,extension:a+"|"+n+"|"+t.LocationProperty.originalSrvid+"|"+t.LocationProperty.roleId}):window.payFunction({appId:window.userInfo.appId,userId:window.userInfo.uid,money:this.requestOrderInfo.price,productId:this.requestOrderInfo.prodId,productName:this.requestOrderInfo.itemName,productDec:this.requestOrderInfo.description,serverId:Main.gameParameter.pfID==t.PlatFormID.xiuLuoBaYe?t.LocationProperty.originalSrvid%2e4:t.LocationProperty.originalSrvid%1e4,serverName:t.LocationProperty.srvname,roleId:t.LocationProperty.roleId,roleName:s.propSet.getName(),roleLevel:s.propSet.getLevel(),balance:s.propSet.getNotBindYuanBao(),roleVip:t.VipData.ins().getMyVipLv(),partyName:s.propSet.getGuildName(),time:Date.parse((new Date).toString())/1e3,orderId:a,notifyUrl:Main.gameParameter.payNotice,extInfo:a+"|2|"+t.LocationProperty.originalSrvid+"|"+t.LocationProperty.roleId});else if(Main.gameParameter.pfID==t.PlatFormID.PotatoBXSC)gamelib.DeviceUtils.IsNative?Main.Native_onClickPay({roleId:t.LocationProperty.roleId,roleID:t.LocationProperty.roleId,roleName:s.propSet.getName(),roleLevel:s.propSet.getLevel(),coinNum:s.propSet.getNotBindYuanBao(),vip:t.VipData.ins().getMyVipLv(),guildName:s.propSet.getGuildName(),serverName:t.LocationProperty.srvname,serverID:t.LocationProperty.originalSrvid%2e4,orderID:a,productId:this.requestOrderInfo.prodId,money:this.requestOrderInfo.price/100,productCount:1,productName:this.requestOrderInfo.itemName,productDescription:this.requestOrderInfo.description,exchangeRate:10,currencyName:"元宝",extension:a+"|"+n+"|"+t.LocationProperty.originalSrvid+"|"+t.LocationProperty.roleId}):window.payFunction({appId:window.userInfo.appId,userId:window.userInfo.uid,money:this.requestOrderInfo.price,productId:this.requestOrderInfo.prodId,productName:this.requestOrderInfo.itemName,productDec:this.requestOrderInfo.description,serverId:t.LocationProperty.originalSrvid%2e4,serverName:t.LocationProperty.srvname,roleId:t.LocationProperty.roleId,roleName:s.propSet.getName(),roleLevel:s.propSet.getLevel(),balance:s.propSet.getNotBindYuanBao(),roleVip:t.VipData.ins().getMyVipLv(),partyName:s.propSet.getGuildName()?s.propSet.getGuildName():"无帮派",time:Date.parse((new Date).toString())/1e3,extInfo:a+"|2|"+t.LocationProperty.originalSrvid+"|"+t.LocationProperty.roleId});else if(Main.gameParameter.pfID==t.PlatFormID.xiaoqi){if(gamelib.DeviceUtils.IsNative){var h="?game_area="+t.LocationProperty.originalSrvid+"&game_guid="+t.LocationProperty.openID+"&game_orderid="+a+"&game_price="+(+this.requestOrderInfo.price/100).toFixed(2)+"&subject="+this.requestOrderInfo.description+"&type="+n+"&time="+(new Date).getTime()+Math.random(),p=this,u=new XMLHttpRequest;u.onreadystatechange=function(){4==u.readyState&&200==u.status&&Main.Native_onClickPay({userId:t.LocationProperty.openID,roleId:t.LocationProperty.roleId,roleID:t.LocationProperty.roleId,roleName:s.propSet.getName(),roleLevel:s.propSet.getLevel(),serverId:t.LocationProperty.originalSrvid,orderID:a,money:(+p.requestOrderInfo.price/100).toFixed(2),productDec:p.requestOrderInfo.description,extension:a+"|"+n+"|"+(+p.requestOrderInfo.price/100).toFixed(2)+"|"+t.LocationProperty.openID,paySign:u.responseText})},u.open("GET",Main.gameParameter.payUrl+h,!0),u.send(null)}}else if(Main.gameParameter.pfID==t.PlatFormID.HuoYan)if(gamelib.DeviceUtils.IsNative)Main.Native_onClickPay({productName:this.requestOrderInfo.itemName,productDescription:this.requestOrderInfo.description,money:this.requestOrderInfo.price,serverName:t.LocationProperty.srvname,serverID:t.LocationProperty.originalSrvid%1e3,roleName:s.propSet.getName(),roleId:t.LocationProperty.roleId,roleID:t.LocationProperty.roleId,roleLevel:s.propSet.getLevel(),extension:a+"|"+n+"|"+t.LocationProperty.originalSrvid%1e3+"|"+t.LocationProperty.roleId+"|"+this.requestOrderInfo.price/100+"|"+t.LocationProperty.openID});else{var p=this,c=a+"|2|"+t.LocationProperty.originalSrvid%1e3+"|"+t.LocationProperty.roleId+"|"+p.requestOrderInfo.price/100+"|"+t.LocationProperty.openID,g="?amount="+this.requestOrderInfo.price+"&channelExt="+window.userInfo.channelExt+"&game_appid="+window.userInfo.game_appid+"&props_name="+this.requestOrderInfo.itemName+"&trade_no="+c+"&user_id="+window.userInfo.uid+"&timestamp="+Date.parse((new Date).toString())/1e3,u=new XMLHttpRequest;u.onreadystatechange=function(){4==u.readyState&&200==u.status&&window.payFunction({money:p.requestOrderInfo.price,productName:p.requestOrderInfo.itemName,orderID:a+"|2|"+t.LocationProperty.originalSrvid%1e3+"|"+t.LocationProperty.roleId+"|"+p.requestOrderInfo.price/100+"|"+t.LocationProperty.openID,time:Date.parse((new Date).toString())/1e3,sign:u.responseText,serverId:t.LocationProperty.originalSrvid%1e3,serverName:t.LocationProperty.srvname,roleId:t.LocationProperty.roleId,roleName:s.propSet.getName(),roleLevel:s.propSet.getLevel()})},u.open("GET",Main.gameParameter.payUrl+g,!0),u.send(null)}else Main.gameParameter.pfID==t.PlatFormID.ShuangHuo?gamelib.DeviceUtils.IsNative&&Main.Native_onClickPay({money:this.requestOrderInfo.price,extension:a+"|"+n+"|"+t.LocationProperty.originalSrvid+"|"+t.LocationProperty.roleId,orderID:a,notifyUrl:gamelib.DeviceUtils.IsIOS?"":Main.gameParameter.payNotice,productDescription:this.requestOrderInfo.description,productId:this.requestOrderInfo.prodId,productName:this.requestOrderInfo.itemName,roleID:t.LocationProperty.roleId,AppleOrderID:"com.bdhcgame.6"}):(this.requestOrderInfo.orderid=a,this.requestOrderInfo.serverId=t.LocationProperty.originalSrvid,this.requestOrderInfo.serverName=t.LocationProperty.srvname,this.requestOrderInfo.uid=t.LocationProperty.openID,this.requestOrderInfo.roleId=t.LocationProperty.roleId,this.requestOrderInfo.roleName=s.propSet.getName(),this.requestOrderInfo.rolelevel=s.propSet.getLevel(),this.requestOrderInfo.vip=t.VipData.ins().getMyVipLv(),window.payFunction(this.requestOrderInfo))}},i.prototype.qqPayFun=function(e){t.TimerManager.ins().removeAll(this),t.ViewManager.ins().close(t.RechargeRequestView),t.ViewManager.ins().open(t.RechargeRequestView);var i=new egret.HttpRequest;i.addEventListener(egret.Event.COMPLETE,this.qqHallcompleteHttp,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.errHttp,this);var n="?openid="+Main.gameParameter.userInfo.openid+"&openkey="+Main.gameParameter.userInfo.openkey+"&pf="+Main.gameParameter.userInfo.pf+"&amt="+e.price+"&appmode=1&goodsmeta="+e.ItemName+"*"+e.description+"&goodsurl="+window.payImgURL+e.icon+".png&payitem="+e.ItemId+"*"+e.price+"*1&pfkey="+Main.gameParameter.userInfo.pfkey+"&ts="+Math.round((new Date).getTime()/1e3)+"&zoneid="+Main.gameParameter.userInfo.serverid+"&roleID="+t.LocationProperty.roleId;i.open(window.payUrl+n,egret.HttpMethod.GET),i.send()},i.prototype.qqHallcompleteHttp=function(e){t.TimerManager.ins().removeAll(this);var i=e.target;if(t.ViewManager.ins().close(t.RechargeRequestView),null==i.response||""==i.response||-1!=i.response.indexOf("参数错误"))this.errHttp(null);else{var n=JSON.parse(i.response);n&&0==n.ret&&window.payFunction(n.url_params)}},i.prototype.qqHallerrHttp=function(e){t.TimerManager.ins().removeAll(this),t.ViewManager.ins().close(t.RechargeRequestView),t.UserTips.ins().showUITips(t.LanguageUtils.language_Error_103)},i}(t.BaseClass);t.RechargeMgr=e,__reflect(e.prototype,"app.RechargeMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RechargeQRCodeSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this.closeBtn,this.onClick),this.linkLabel.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Error_111+"<u>"),this.linkLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.linkClick,this),this.unusualLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.refreshCode,this),this.refreshCode()},i.prototype.refreshCode=function(){this.httpReq&&(this.httpReq.removeEventListener(egret.Event.COMPLETE,this.completeFunction,this),this.httpReq.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.errorFunction,this)),this.httpReq=new egret.HttpRequest,this.httpReq.addEventListener(egret.Event.COMPLETE,this.completeFunction,this),this.httpReq.addEventListener(egret.IOErrorEvent.IO_ERROR,this.errorFunction,this),this.unusualGroup.visible=!1,this.pf37.visible=!0,this.img.visible=!1,this.unusualLabel.visible=!0,this.linkLabel.visible=!0,this.httpReq.responseType=egret.HttpResponseType.TEXT;var e=(t.EntityMgr.ins().getPayer,"?login_account="+Main.gameParameter.userInfo.user_name+"&actor_id="+t.LocationProperty.roleId+"&sid="+t.LocationProperty.originalSrvid%1e4+"&trade_type=1&pay_referer="+Main.gameParameter.userInfo.client+"&t="+Math.random().toString());this.httpReq.open(Main.gameParameter.payUrl+e,egret.HttpMethod.GET),this.httpReq.send()},i.prototype.linkClick=function(){var e=t.LocationProperty.originalSrvid%1e4;window.open("http://pay.37.com/select.php?gamename=shuangbei&gameserver=S"+e+"&username="+Main.gameParameter.userInfo.user_name)},i.prototype.unusualFunction=function(){this.img.visible=!1,this.pf37.visible=!1,this.rect.visible=!1,this.unusualGroup.visible=!0,this.unusualLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Error_110)},i.prototype.completeFunction=function(e){var i=e.target;if(null==i.response||0==i.response||""==i.response)this.unusualFunction();
else{var n=void 0,s=JSON.parse(i.response);1==s.code||"1"==s.code?(n=s.data.img_base_64,this.createImage(n),t.TimerManager.ins().doTimer(3e5,1,this.showRefreshCode,this)):(this.unusualFunction(),t.UserTips.ins().showUITips("错误："+s.code))}},i.prototype.showRefreshCode=function(){t.TimerManager.ins().remove(this.showRefreshCode,this),this.unusualFunction(),this.unusualLabel.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Error_112)},i.prototype.createImage=function(t){if(t){var e=this,i=new Image;i.onload=function(){i.onload=null;var t=new egret.Texture,n=new egret.BitmapData(i);t.bitmapData=n,e.img.visible=!0,e.pf37.visible=!1,e.img.texture=t},i.src=t}},i.prototype.errorFunction=function(t){this.unusualFunction()},i.prototype.onClick=function(e){t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.TimerManager.ins().remove(this.showRefreshCode,this),this.httpReq.removeEventListener(egret.Event.COMPLETE,this.completeFunction,this),this.httpReq.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.errorFunction,this),this.httpReq=null,this.removeTouchEvent(this.closeBtn,this.onClick),this.linkLabel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.linkClick,this)},i}(t.BaseEuiView);t.Recharge37QRCodeView=e,__reflect(e.prototype,"app.Recharge37QRCodeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Recharge4366Skin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this.closeBtn,this.onClick),this.httpReq=new egret.HttpRequest,this.httpReq.addEventListener(egret.Event.COMPLETE,this.completeFunction,this),this.httpReq.addEventListener(egret.IOErrorEvent.IO_ERROR,this.errorFunction,this),this.linkLabel.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_192+"<u>"),this.linkLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.linkClick,this),this.img.visible=!1,this.httpReq.responseType=egret.HttpResponseType.TEXT,this.httpReq.open("https://dbgamepush.bigrnet.com/4366/qrcode.php?server="+t.LocationProperty.originalSrvid+"&uname="+t.LocationProperty.openID+"&role_id="+t.LocationProperty.roleId,egret.HttpMethod.GET),this.httpReq.send()},i.prototype.linkClick=function(){window.open("http://wvw.4366.com/pay_index.php?gid=4650&server="+t.LocationProperty.originalSrvid+"&uname="+t.LocationProperty.openID)},i.prototype.completeFunction=function(t){var e=t.target;if(null==e.response||0==e.response||""==e.response)this.img.visible=!1;else{var i=this,n=e.response,s=new Image;s.onload=function(){s.onload=null;var t=new egret.Texture,e=new egret.BitmapData(s);t.bitmapData=e,i.img.visible=!0,i.img.texture=t},s.src=n}},i.prototype.errorFunction=function(t){},i.prototype.onClick=function(e){t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.httpReq.removeEventListener(egret.Event.COMPLETE,this.completeFunction,this),this.httpReq.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.errorFunction,this),this.httpReq=null,this.removeTouchEvent(this.closeBtn,this.onClick),this.linkLabel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.linkClick,this)},i}(t.BaseEuiView);t.Recharge4366View=e,__reflect(e.prototype,"app.Recharge4366View"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RechargeF1Skin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.confgAry=[]},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.confgAry.length=0,this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.buyButton1,this.onClick),this.addTouchEvent(this.buyButton2,this.onClick),this.addTouchEvent(this.buyButton3,this.onClick),this.addTouchEvent(this.buyButton4,this.onClick),this.addTouchEvent(this.buyButton5,this.onClick),this.addTouchEvent(this.buyButton6,this.onClick),this.addTouchEvent(this.buyButton7,this.onClick),this.addTouchEvent(this.buyButton8,this.onClick);var n=t.GlobalConfig.ProdItemMapConf[Main.gameParameter.pfID+""];for(var s in n)this.confgAry.push(n[s]);this.confgAry=this.confgAry.sort(function(t,e){return t.price-e.price});for(var a=this.confgAry.length,r=0;a>r;r++)this["grp"+(r+1)].visible=!0,this["lab"+(r+1)].text=this.confgAry[r].ItemName,this["buyButton"+(r+1)].label=this.confgAry[r].price+t.LanguageUtils.language_System92},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.buyButton1:this.onPay(0);break;case this.buyButton2:this.onPay(1);break;case this.buyButton3:this.onPay(2);break;case this.buyButton4:this.onPay(3);break;case this.buyButton5:this.onPay(4);break;case this.buyButton6:this.onPay(5);break;case this.buyButton7:this.onPay(6);break;case this.buyButton8:this.onPay(7)}},i.prototype.onPay=function(e){var i=this.confgAry[e];if(i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText);e&&e.sign&&window.recharge&&window.recharge({game_id:17026,server_id:t.LocationProperty.srvid,user_id:t.LocationProperty.openID,role_id:t.LocationProperty.roleId,item_id:i.ProdId,pay_money:i.price,params:"comi|"+i.price+"|"+i.price+"|"+i.price+"|"+Main.gameParameter.pfID,sign:e.sign,ts:e.ts})}},n.open("GET",window.payUrl+"?user_id="+t.LocationProperty.openID+"&item_id="+i.ProdId+"&role_id="+t.LocationProperty.roleId,!0),n.send(null)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.confgAry.length=0,this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.buyButton1,this.onClick),this.removeTouchEvent(this.buyButton2,this.onClick),this.removeTouchEvent(this.buyButton3,this.onClick),this.removeTouchEvent(this.buyButton4,this.onClick),this.removeTouchEvent(this.buyButton5,this.onClick),this.removeTouchEvent(this.buyButton6,this.onClick),this.removeTouchEvent(this.buyButton7,this.onClick),this.removeTouchEvent(this.buyButton8,this.onClick)},i}(t.BaseEuiView);t.RechargeComiView=e,__reflect(e.prototype,"app.RechargeComiView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RechargeF1Skin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.confgAry=[]},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.confgAry.length=0,this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.buyButton1,this.onClick),this.addTouchEvent(this.buyButton2,this.onClick),this.addTouchEvent(this.buyButton3,this.onClick),this.addTouchEvent(this.buyButton4,this.onClick),this.addTouchEvent(this.buyButton5,this.onClick),this.addTouchEvent(this.buyButton6,this.onClick),this.addTouchEvent(this.buyButton7,this.onClick),this.addTouchEvent(this.buyButton8,this.onClick);var n=t.GlobalConfig.ProdItemMapConf[Main.gameParameter.pfID+""];for(var s in n)this.confgAry.push(n[s]);this.confgAry=this.confgAry.sort(function(t,e){return t.price-e.price});for(var a=this.confgAry.length,r=0;a>r;r++)this["grp"+(r+1)].visible=!0,this["lab"+(r+1)].text=this.confgAry[r].ItemName,this["buyButton"+(r+1)].label=this.confgAry[r].price+t.LanguageUtils.language_System92},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.buyButton1:this.onPay(0);break;case this.buyButton2:this.onPay(1);break;case this.buyButton3:this.onPay(2);break;case this.buyButton4:this.onPay(3);break;case this.buyButton5:this.onPay(4);break;case this.buyButton6:this.onPay(5);break;case this.buyButton7:this.onPay(6);break;case this.buyButton8:this.onPay(7)}},i.prototype.onPay=function(e){console.log("main:手机测试版本 onPay");var i=this.confgAry[e];if(i){var n={game_id:60,server_id:t.LocationProperty.srvid,user_id:t.LocationProperty.openID,role_id:t.LocationProperty.roleId,item_id:i.ProdId,pay_money:i.price,params:"F1|"+i.price+"|"+i.price+"|"+i.price+"|"+Main.gameParameter.pfID};if(console.log("main:手机测试版本 paramObj"),console.log(JSON.stringify(n)),gamelib.DeviceUtils.IsNative)Main.Native_onClickPay(n);else{var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var t=JSON.parse(s.responseText);t&&t.sign&&window.recharge&&(n.sign=t.sign,n.ts=t.ts,window.recharge(n))}},s.open("GET",Main.gameParameter.payUrl+"?user_id="+t.LocationProperty.openID,!0),s.send(null)}}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.confgAry.length=0,this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.buyButton1,this.onClick),this.removeTouchEvent(this.buyButton2,this.onClick),this.removeTouchEvent(this.buyButton3,this.onClick),this.removeTouchEvent(this.buyButton4,this.onClick),this.removeTouchEvent(this.buyButton5,this.onClick),this.removeTouchEvent(this.buyButton6,this.onClick),this.removeTouchEvent(this.buyButton7,this.onClick),this.removeTouchEvent(this.buyButton8,this.onClick)},i}(t.BaseEuiView);t.RechargeF1View=e,__reflect(e.prototype,"app.RechargeF1View"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.buyButton,this.onTouch)},i.prototype.onTouch=function(e){if(this.data){var i=this.data.cfgInfo;if(i){var n=t.GlobalConfig.RechargeConf[i.ItemId];t.RechargeMgr.ins().payFunction({prodId:i.ProdId,price:i.price,itemName:i.ItemName,description:i.description,rechargeNum:n.Num})}}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.buyButton,this.onTouch)},i.prototype.dataChanged=function(){this.data&&(this.rebateImg.visible=!0,this.lab.text=this.data.itemName,this.buyButton.label=this.data.btnLab,this.icon.source=this.data.idx>7?"cz_icon8":"cz_icon"+(this.data.idx+1),(Main.gameParameter.pfID==t.PlatFormID.Potato||Main.gameParameter.pfID==t.PlatFormID.BaYe||Main.gameParameter.pfID==t.PlatFormID.xiuLuoBaYe||Main.gameParameter.pfID==t.PlatFormID.HuoYan)&&(this.rebateImg.visible=!1))},i}(t.BaseItemRender);t.RechargeGameCatItemView=e,__reflect(e.prototype,"app.RechargeGameCatItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RechargeGameCatSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.confgAry=[]},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.rebateTxt.visible=!0,(Main.gameParameter.pfID==t.PlatFormID.Potato||Main.gameParameter.pfID==t.PlatFormID.BaYe||Main.gameParameter.pfID==t.PlatFormID.xiuLuoBaYe||Main.gameParameter.pfID==t.PlatFormID.HuoYan)&&(this.rebateTxt.visible=!1),this.confgAry.length=0,t.MouseScroller.bind(this.payScroller),this.addTouchEvent(this.closeBtn,this.onClick),this.rechargeList.itemRenderer=t.RechargeGameCatItemView;var n=t.GlobalConfig.ProdItemMapConf[Main.gameParameter.pfID+""];for(var s in n)this.confgAry.push(n[s]);this.confgAry=this.confgAry.sort(function(t,e){return t.price-e.price});for(var a=this.confgAry.length,r=[],o=0;a>o;o++)r.push({idx:o,itemName:this.confgAry[o].ItemName,btnLab:this.confgAry[o].price/100+" "+t.LanguageUtils.language_System92,cfgInfo:this.confgAry[o]});this.rechargeList.dataProvider=new eui.ArrayCollection(r)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.confgAry.length=0,t.MouseScroller.unbind(this.payScroller)},i}(t.BaseEuiView);t.RechargeGameCatView=e,__reflect(e.prototype,"app.RechargeGameCatView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RechargeQQSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),this.confgAry=[]},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.confgAry.length=0,this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.buyButton1,this.onClick),this.addTouchEvent(this.buyButton2,this.onClick),this.addTouchEvent(this.buyButton3,this.onClick),this.addTouchEvent(this.buyButton4,this.onClick),this.addTouchEvent(this.buyButton5,this.onClick),this.addTouchEvent(this.buyButton6,this.onClick),this.addTouchEvent(this.buyButton7,this.onClick),this.addTouchEvent(this.buyButton8,this.onClick),this.addTouchEvent(this.openBlue,this.onClick);var n=t.GlobalConfig.ProdItemMapConf[Main.gameParameter.pfID+""];for(var s in n)this.confgAry.push(n[s]);this.confgAry=this.confgAry.sort(function(t,e){return t.price-e.price});var a=this.confgAry.length,r=0;Main.gameParameter.userInfo.blueDiamond&&Main.gameParameter.userInfo.blueDiamond.is_blue_vip&&(r=1);for(var o=0;a>o;o++)this.buyButton1.labelDisplay,this["lab"+(o+1)].text=this.confgAry[o].ItemName,this["buyButton"+(o+1)].labelDisplay.textColor=15655172,this["buyButton"+(o+1)].label="￥"+this.confgAry[o].price/10},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.buyButton1:this.onPay(0);break;case this.buyButton2:this.onPay(1);break;case this.buyButton3:this.onPay(2);break;case this.buyButton4:this.onPay(3);break;case this.buyButton5:this.onPay(4);break;case this.buyButton6:this.onPay(5);break;case this.buyButton7:this.onPay(6);break;case this.buyButton8:this.onPay(7);break;case this.openBlue:window.openBlueFunction()}},i.prototype.onPay=function(e){var i=this.confgAry[e];i&&Main.gameParameter.pfID==t.PlatFormID.QQGame&&t.RechargeMgr.ins().qqPayFun(i)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.confgAry.length=0,this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.buyButton1,this.onClick),this.removeTouchEvent(this.buyButton2,this.onClick),this.removeTouchEvent(this.buyButton3,this.onClick),this.removeTouchEvent(this.buyButton4,this.onClick),this.removeTouchEvent(this.buyButton5,this.onClick),this.removeTouchEvent(this.buyButton6,this.onClick),this.removeTouchEvent(this.buyButton7,this.onClick),this.removeTouchEvent(this.buyButton8,this.onClick),this.removeTouchEvent(this.openBlue,this.onClick)},i}(t.BaseEuiView);t.RechargeQQView=e,__reflect(e.prototype,"app.RechargeQQView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RechargeQRCodeSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e[0];Main.gameParameter.pfID==t.PlatFormID.SOUGOU&&(this.dragDropUI.source="saomachongzhi3_png"),this.addTouchEvent(this.closeBtn,this.onClick),this.rect.visible=!0,this.httpReq=new egret.HttpRequest,this.httpReq.addEventListener(egret.Event.COMPLETE,this.completeFunction,this),this.httpReq.addEventListener(egret.IOErrorEvent.IO_ERROR,this.errorFunction,this),this.img.visible=!1,this.linkLabel.visible=!1,this.linkLabel.x=311,this.httpReq.responseType=egret.HttpResponseType.TEXT;var s,a=t.EntityMgr.ins().getPayer;if(Main.gameParameter.pfID==t.PlatFormID.PFLuDaShi){var r=+n.price/100,o=+n.prodId;s="?game_id="+Main.gameParameter.userInfo.gid+"&server_num="+t.LocationProperty.originalSrvid%1e4+"&uid="+t.LocationProperty.openID+"&daifu_user="+t.LocationProperty.openID+"&product_id="+o+"&product_name="+encodeURIComponent(n.itemName)+"&money="+r+"&role_id="+t.LocationProperty.roleId+"&role_name="+encodeURIComponent(a.propSet.getName()),this.httpReq.open(Main.gameParameter.payUrl+s,egret.HttpMethod.GET),this.httpReq.send()}else if(Main.gameParameter.pfID==t.PlatFormID.SOUGOU){this.linkLabel.visible=!0,this.linkLabel.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_192+"<u>"),this.linkLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.linkClick,this);var r=+n.price/100,o=+n.prodId;s="?gid="+Main.gameParameter.userInfo.gid+"&sid="+t.LocationProperty.originalSrvid%1e3+"&uid="+t.LocationProperty.openID+"&role="+t.LocationProperty.roleId.toString()+"&width=200&amount="+r,this.httpReq.open(Main.gameParameter.payUrl+s,egret.HttpMethod.GET),this.httpReq.send()}else if(Main.gameParameter.pfID==t.PlatFormID.PFAQIYI)this.linkLabel.visible=!0,this.linkLabel.x=192,this.linkLabel.textFlow=t.TextFlowMaker.generateTextFlow("<u>更多充值<u>"),this.linkLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.linkClick,this),window.iqiyiPay=this.createImage.bind(this),window.payFunction({serverId:t.LocationProperty.originalSrvid});else if(Main.gameParameter.pfID==t.PlatFormID.PF2144Game)this.linkLabel.visible=!0,this.linkLabel.x=192,this.linkLabel.textFlow=t.TextFlowMaker.generateTextFlow("<u>更多充值<u>"),this.linkLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.linkClick,this),s=window.payUrl2+"?gid=361&ssid="+t.LocationProperty.originalSrvid%25e3+"&token="+window.userInfo.callback_info+"&qrcode=2",this.httpReq.open(window.payQRcode+"?url="+encodeURIComponent(s),egret.HttpMethod.GET),this.httpReq.send();else if(Main.gameParameter.pfID==t.PlatFormID.shunwang){this.rect.visible=!1,this.linkLabel.visible=!0,this.linkLabel.x=192,this.linkLabel.textFlow=t.TextFlowMaker.generateTextFlow("<u>更多充值<u>"),this.linkLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.linkClick,this);var l=new egret.HttpRequest;l.addEventListener(egret.Event.COMPLETE,this.orderCompleteHttp,this),l.addEventListener(egret.IOErrorEvent.IO_ERROR,this.orderErrHttp,this);var h="?server_id="+t.LocationProperty.originalSrvid+"&actor_id="+t.LocationProperty.originalSrvid+"&time="+(new Date).getTime()+Math.random();l.open(Main.gameParameter.orderUrl+h,egret.HttpMethod.GET),l.send()}},i.prototype.linkClick=function(){Main.gameParameter.pfID==t.PlatFormID.SOUGOU?window.open("http://wan.sogou.com/pay.do?gid=1373&sid="+t.LocationProperty.originalSrvid%1e3+"&u="+t.LocationProperty.openID):Main.gameParameter.pfID==t.PlatFormID.PFAQIYI?window.open("http://pay.game.iqiyi.com/gamepay/game_pay_main/index?g_id=11171&server_type="+t.LocationProperty.originalSrvid%5e3):Main.gameParameter.pfID==t.PlatFormID.PF2144Game?window.payFunction({serverId:t.LocationProperty.originalSrvid}):Main.gameParameter.pfID==t.PlatFormID.shunwang&&window.open("http://pay.swjoy.com/front/5607")},i.prototype.completeFunction=function(e){var i=e.target;if(null==i.response||0==i.response||""==i.response)this.img.visible=!1;else try{var n=void 0;if(Main.gameParameter.pfID==t.PlatFormID.PFLuDaShi){var s=JSON.parse(i.response);n=window.getQrcode("http://wan.ludashi.com/h5pay/index?change=0&sign="+s.data.sign,174,174)}else Main.gameParameter.pfID==t.PlatFormID.SOUGOU?n=i.response:Main.gameParameter.pfID==t.PlatFormID.PF2144Game&&(n="data:png;base64,"+i.response);this.createImage(n)}catch(a){t.UserTips.ins().showUITips("|C:0xe500000&T:支付错误:"+i.response+"|")}},i.prototype.createImage=function(t){if(t){var e=this,i=new Image;i.onload=function(){i.onload=null;var t=new egret.Texture,n=new egret.BitmapData(i);t.bitmapData=n,e.img.visible=!0,e.img.texture=t},i.src=t}},i.prototype.errorFunction=function(e){t.UserTips.ins().showUITips("|C:0xe500000&T:支付接口请求错误|")},i.prototype.orderCompleteHttp=function(e){var i=e.target;if(null==i.response||""==i.response||-1!=i.response.indexOf("参数错误"))t.UserTips.ins().showUITips("顺网请求订单号错误码："+i.response);else{var n=(i.response+"","?guid="+t.LocationProperty.openID+"&idx="+t.LocationProperty.originalSrvid%2e4+"&time="+Date.parse((new Date).toString())/1e3+"&size=512&swTag=swjoy&roleId="+t.LocationProperty.roleId),s=this,a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var t=JSON.parse(a.responseText);t.response&&0==t.response.code&&s.createImage("data:png;base64,"+t.response.qrcode)}},a.open("GET",Main.gameParameter.payUrl+n,!0),a.send(null)}},i.prototype.orderErrHttp=function(){t.UserTips.ins().showUITips("|C:0xe500000&T:顺网获取订单号失败|")},i.prototype.onClick=function(e){t.ViewManager.ins().close(this)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.httpReq.removeEventListener(egret.Event.COMPLETE,this.completeFunction,this),this.httpReq.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.errorFunction,this),this.httpReq=null,this.removeTouchEvent(this.closeBtn,this.onClick),this.linkLabel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.linkClick,this)},i}(t.BaseEuiView);t.RechargeQRCodeView=e,__reflect(e.prototype,"app.RechargeQRCodeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.percentHeight=100,t.percentWidth=100,t.skinName="RechargeRequestSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tipsLabel.text=t.LanguageUtils.language_Error_101},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t)},i}(t.BaseEuiView);t.RechargeRequestView=e,__reflect(e.prototype,"app.RechargeRequestView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Tips)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RechargeSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.confgAry=[]},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.confgAry.length=0,this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.buyButton1,this.onClick),this.addTouchEvent(this.buyButton2,this.onClick),this.addTouchEvent(this.buyButton3,this.onClick),this.addTouchEvent(this.buyButton4,this.onClick),this.addTouchEvent(this.buyButton5,this.onClick),this.addTouchEvent(this.buyButton6,this.onClick),this.addTouchEvent(this.buyButton7,this.onClick),this.addTouchEvent(this.buyButton8,this.onClick);var n=t.GlobalConfig.ProdItemMapConf[Main.gameParameter.pfID+""];for(var s in n)this.confgAry.push(n[s]);this.confgAry=this.confgAry.sort(function(t,e){return t.price-e.price});for(var a=this.confgAry.length,r=0;a>r;r++)this["lab"+(r+1)].text=this.confgAry[r].ItemName,this["buyButton"+(r+1)].label=this.confgAry[r].price/100+" "+t.LanguageUtils.language_System92},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this);break;case this.buyButton1:this.onPay(0);break;case this.buyButton2:this.onPay(1);break;case this.buyButton3:this.onPay(2);break;case this.buyButton4:this.onPay(3);break;case this.buyButton5:this.onPay(4);break;case this.buyButton6:this.onPay(5);break;case this.buyButton7:this.onPay(6);break;case this.buyButton8:this.onPay(7)}},i.prototype.onPay=function(e){var i=this.confgAry[e];if(i){var n=t.GlobalConfig.RechargeConf[i.ItemId];t.RechargeMgr.ins().payFunction({prodId:i.ProdId,price:i.price,itemName:i.ItemName,description:i.description,rechargeNum:n.Num})}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.confgAry.length=0,this.removeTouchEvent(this.closeBtn,this.onClick),this.removeTouchEvent(this.buyButton1,this.onClick),this.removeTouchEvent(this.buyButton2,this.onClick),this.removeTouchEvent(this.buyButton3,this.onClick),this.removeTouchEvent(this.buyButton4,this.onClick),this.removeTouchEvent(this.buyButton5,this.onClick),this.removeTouchEvent(this.buyButton6,this.onClick),this.removeTouchEvent(this.buyButton7,this.onClick),this.removeTouchEvent(this.buyButton8,this.onClick)},i}(t.BaseEuiView);t.RechargeView=e,__reflect(e.prototype,"app.RechargeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.idx=0,i.idx2=0,i.recycleTabIdx=1,i.recycleTabIdx2=1,i.skinName="RecycleWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.dragDropUI.setParent(i),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tab.itemRenderer=t.CommonTabBarWin,this.tab.dataProvider=new eui.ArrayCollection(["hc_tab_hs","hc_tab_hc"])},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(;t[0]instanceof Array;)t=t[0];t[0]&&(this.idx=t[0]),t[1]&&(this.recycleTabIdx=t[1]),t[2]&&(this.recycleTabIdx2=t[2]),this.addChangeEvent(this.tab,this.onTabTouch),this.addChangingEvent(this.tab,this.onTabTouching),this.tab.selectedIndex=this.idx,this.setOpenIndex(this.idx)},i.prototype.onTabTouch=function(t){this.tab.selectedIndex=t.currentTarget.selectedIndex,this.setOpenIndex(t.currentTarget.selectedIndex)},i.prototype.onTabTouching=function(t){return this.checkIsOpen(t.currentTarget.selectedIndex)?void 0:void t.preventDefault()},i.prototype.setOpenIndex=function(e){switch(e){case 0:this.recycleView?this.recycleView.visible=!0:(this.recycleView=new t.ForgeRecycleView,this.pageGroup.addChild(this.recycleView),this.recycleView.open()),this.synthesisPanel&&(this.synthesisPanel.visible=!1),this.dragDropUI.setTitle(t.LanguageUtils.language_Omission_txt55);break;case 1:this.synthesisPanel?this.synthesisPanel.visible=!0:(this.synthesisPanel=new t.SynthesisView,this.pageGroup.addChild(this.synthesisPanel),this.synthesisPanel.open(this.recycleTabIdx,this.recycleTabIdx2)),this.recycleView&&(this.recycleView.visible=!1),this.dragDropUI.setTitle(t.LanguageUtils.language_System32)}},i.prototype.checkIsOpen=function(t){switch(t){case 0:return!0;case 1:return!0;case 2:return!0;case 3:return!0}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.removeEventListener(egret.TouchEvent.CHANGING,this.onTabTouching,this),this.recycleView&&this.recycleView.close(),this.synthesisPanel&&this.synthesisPanel.close()},i}(t.BaseEuiView);t.RecycleWin=e,__reflect(e.prototype,"app.RecycleWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cdTime=10,t.resultType=0,t.rewadrs=[],t.skinName="FightResultWinSkin1",t.bottom=t.top=t.right=t.left=0,t}return __extends(i,e),i.prototype.initUI=function(){if(e.prototype.initUI.call(this),null!=t.ActvityMgr.ins().resuleInfo){var i=t.ActvityMgr.ins().resuleInfo.actid,n=t.ActvityMgr.ins().getActivitConf(i);n&&(3==n.ActivityType||n.ActivityType==t.ActvityInfoEnum.NightVoma||n.ActivityType==t.ActvityInfoEnum.CrossServerNightVoma||n.ActivityType==t.ActvityInfoEnum.CrossServerChaos?this.skinName="FightResultWinSkin3":n.ActivityType==t.ActvityInfoEnum.CrossServerBoss||n.ActivityType==t.ActvityInfoEnum.WorldBoss?this.skinName="FightResultWinSkin8":this.skinName="FightResultWinSkin"+n.ActivityType)}this.itemList1&&(this.itemList1.itemRenderer=t.ItemBase),this.itemList&&(this.itemList.itemRenderer=t.ItemBase)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.resultData=e[0]),this.resultData.issuccess&&this.resultData.issuccess>=0&&(this.resultType=this.resultData.issuccess),this.updateView(),this.addTouchEvent(this.suitBtn,this.onClick),this.cdTime>0&&(this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this))},i.prototype.updateView=function(){if(1==this.resultType){this.bgIcon.source="result_win",this.titleIcon.source="result_win1",this.failGrp.visible=!1,this.listGrp.visible=!0,this.suitBtn.label=t.LanguageUtils.language_Common_66;var e;if(this.resultData.actid){var i=t.ActvityMgr.ins().getActivitConf(this.resultData.actid);if(1==i.ActivityType||12==i.ActivityType){if(e=t.ActvityMgr.ins().getActivityConfigById(this.resultData.actid),e&&e.Persongift){var n=[];for(var s in e.Persongift)n.push(e.Persongift[s]);this.itemList.dataProvider=new eui.ArrayCollection(n)}}else if(3==i.ActivityType||i.ActivityType==t.ActvityInfoEnum.NightVoma||i.ActivityType==t.ActvityInfoEnum.CrossServerNightVoma||i.ActivityType==t.ActvityInfoEnum.CrossServerChaos){if(this.resultData.source>=0&&this.resultData.rank>=0&&(this.rankLab.text=t.StringUtils.replace(t.LanguageUtils.language_Common_76,this.resultData.source,this.resultData.rank),e=t.ActvityMgr.ins().getActivityConfigById(this.resultData.actid))){var a,r=[];for(var o in e.phaseAward){var l=e.phaseAward[o];this.resultData.source>=l.value&&(a=l.awards)}this.itemList1&&(r=this.getRewards(a),this.itemList1.dataProvider=new eui.ArrayCollection(r)),a=null;var h;for(var p in e.rankAward){var u=e.rankAward[p];if(u.value>=this.resultData.rank){h=u.awards;break}}r=this.getRewards(h),this.itemList.dataProvider=new eui.ArrayCollection(r),r=null,h=null}}else if(i.ActivityType==t.ActvityInfoEnum.Inspire||i.ActivityType==t.ActvityInfoEnum.CrossServerBoss||i.ActivityType==t.ActvityInfoEnum.WorldBoss){if(this.resultData.rank>=0){var c="";if(c+=""==this.resultData.skill?"":"|C:0xeee104&T:"+this.resultData.skill+" ||C:0xe50000&T:"+t.LanguageUtils.language_Common_98+"|\n",c+=""==this.resultData.first?"":"|C:0xff1ac2&T:"+t.LanguageUtils.language_Common_95+" "+this.resultData.first+"|\n",c+=""==this.resultData.second?"":"|C:0xff7700&T:"+t.LanguageUtils.language_Common_96+" "+this.resultData.second+"|\n",c+=""==this.resultData.third?"":"|C:0x1affff&T:"+t.LanguageUtils.language_Common_97+" "+this.resultData.third+"|\n",c+=0==this.resultData.rank?"":"|C:0xe5ddcf&T:"+t.LanguageUtils.language_FuBen_Text7+" "+this.resultData.rank+"|",this.rankLab0.textFlow=t.TextFlowMaker.generateTextFlow(c),this.bossName){var g=i.ActivityType==t.ActvityInfoEnum.Inspire||i.ActivityType==t.ActvityInfoEnum.WorldBoss?171:i.ActivityType==t.ActvityInfoEnum.CrossServerBoss?385:0,d=t.GlobalConfig.Monster[g];d&&(this.bossName.text=d.name+t.LanguageUtils.language_Omission_txt124)}if(e=t.ActvityMgr.ins().getActivityConfigById(this.resultData.actid)){var m=void 0,f=[];if(1==this.resultData.islast){for(var o in e.killaward){var l=e.killaward[o];m=l.awards}f=this.getRewards(m)}m=null;var v=void 0;for(var p in e.rankAward){var u=e.rankAward[p];if(u.value>=this.resultData.rank){v=u.awards;break}}var _=f.concat(this.getRewards(v));this.itemList.dataProvider=new eui.ArrayCollection(_),f=null,v=null}}}else if(i.ActivityType==t.ActvityInfoEnum.EscapeFromTrial){var y=this.resultData.rank,c="";c=y>0?t.StringUtils.replace(t.LanguageUtils.language_Common_253,y):t.LanguageUtils.language_Common_254,this.rankLab.textFlow=t.TextFlowMaker.generateTextFlow(c),this.itemList.dataProvider=new eui.ArrayCollection(this.resultData.list)}else if(i.ActivityType==t.ActvityInfoEnum.SecretLandTreasure&&(e=t.ActvityMgr.ins().getActivityConfigById(this.resultData.actid))){var n=[];if(this.resultData.secretBoxScore&&e.AwardA){var T=e.AwardA[0];n.push({type:T.type,id:T.id,count:this.resultData.secretBoxScore})}if(this.resultData.wordsBoxScore&&e.AwardB){var T=e.AwardB[0];
n.push({type:T.type,id:T.id,count:this.resultData.wordsBoxScore})}if(this.resultData.materialsBoxScore&&e.AwardC){var T=e.AwardC[0];n.push({type:T.type,id:T.id,count:this.resultData.materialsBoxScore})}this.itemList.itemRenderer=t.FightResulItem1,this.itemList.dataProvider=new eui.ArrayCollection(n),0==n.length&&(this.failGrp.visible=!0)}}}else this.bgIcon.source="result_lost",this.titleIcon.source="result_lost1",this.failGrp.visible=!0,this.listGrp.visible=!1,this.suitBtn.label=t.LanguageUtils.language_Common_67},i.prototype.getRewards=function(t){var e=[];for(var i in t)e.push(t[i]);return e},i.prototype.updateTime=function(){var e=this.cdTime-=1;this.autoSuit.text=1==this.resultType?""+e+t.LanguageUtils.language_Common_68:""+e+t.LanguageUtils.language_Common_69,0>=e&&(t.TimerManager.ins().remove(this.updateTime,this),this.autoSuit.text="",1==this.resultType&&t.FuBenMgr.ins().send_20_3(t.GameMap.fubenID),t.FuBenMgr.ins().send_20_2(t.GameMap.fubenID),t.ViewManager.ins().close(this))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.suitBtn:1==this.resultType&&t.FuBenMgr.ins().send_20_3(t.GameMap.fubenID),t.FuBenMgr.ins().send_20_2(t.GameMap.fubenID),t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.$onClose(),t.TimerManager.ins().remove(this.updateTime,this),this.removeTouchEvent(this.suitBtn,this.onClick),this.bgIcon=null,this.titleIcon=null,this.failGrp=null,this.suitBtn=null,this.resultData=null,this.listGrp=null,this.itemList=null,this.autoSuit=null,this.cdTime=null,this.resultType=null,this.rewadrs=null},i}(t.BaseEuiView);t.FightResultWin=e,__reflect(e.prototype,"app.FightResultWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cdTime=10,t.skinName="FightResultWinSkin4",t.bottom=t.top=t.right=t.left=0,t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.itemList.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.resultData=e[0]),this.labTitle.text=t.LanguageUtils.language_Common_240,this.suitBtn.label=t.LanguageUtils.language_Common_66,this.updateView(),this.addTouchEvent(this.suitBtn,this.onClick),this.cdTime>0&&(this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this))},i.prototype.updateView=function(){this.bossName.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_238,this.resultData.name)),this.labDesc.text=t.LanguageUtils.language_Common_239,this.itemList.dataProvider=new eui.ArrayCollection(this.resultData.list)},i.prototype.updateTime=function(){var e=this.cdTime-=1;this.autoSuit.text=""+e+t.LanguageUtils.language_Common_69,0>=e&&(t.TimerManager.ins().remove(this.updateTime,this),this.autoSuit.text="",t.ViewManager.ins().close(this))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.suitBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.$onClose(),t.TimerManager.ins().remove(this.updateTime,this),this.removeTouchEvent(this.suitBtn,this.onClick),this.bgIcon=null,this.suitBtn=null,this.resultData=null,this.listGrp=null,this.itemList=null,this.autoSuit=null,this.cdTime=null},i}(t.BaseEuiView);t.FightResultWin2=e,__reflect(e.prototype,"app.FightResultWin2"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.data){this.ItemData.data=this.data;var e=t.CurrencyUtils.getCurrencyNameIcon(this.data.type,this.data.id);e&&(this.itemName.textFlow=t.TextFlowMaker.generateTextFlow(e[0]+("|C:0x28ee01&T:*"+this.data.count+"|")))}},i}(t.BaseItemRender);t.FightResulItem1=e,__reflect(e.prototype,"app.FightResulItem1")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.applyFunc=null,t.skinName="CommonBtnSkin",t}return __extends(i,e),i.prototype.setBackFunc=function(t,e,i){this.applyFunc=t,this.targetObj=e},i.prototype.childrenCreated=function(){if(e.prototype.childrenCreated.call(this),this.redDot.visible=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFunc,this),4==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="FashionMgr.isSatisFashionAct";this.redDot.updateShowFunctions=i}}else if(6==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="SkillMgr.getJobSkillredDot",n=t.EntityMgr.ins().getPayer;this.redDot.param=n.propSet.getAP_JOB(),this.redDot.updateShowFunctions=i}}else if(7==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="SkillMgr.getJobSkillredDot";this.redDot.param=null,this.redDot.updateShowFunctions=i}}else if(16==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="StrengthenMgr.isSatisStrengthened";this.redDot.updateShowFunctions=i}}else if(14==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="StrengthenMgr.isEnoughStrengthened";this.redDot.updateShowFunctions=i}}else if(12==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="BlessMgr.isCanBless";this.redDot.updateShowFunctions=i}}else if(13==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="StrengthenMgr.fourImageRed";this.redDot.updateShowFunctions=i}}else if(2==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="OtherMgr.getOfficeRed";this.redDot.updateShowFunctions=i}}else if(18==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="GhostMgr.getRed";this.redDot.updateShowFunctions=i}}else if(8==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="MeridiansMgr.getDot";this.redDot.updateShowFunctions=i}}else if(20==this._btnId){if(this.targetObj&&this.targetObj instanceof t.RoleView){var i="SoldierSoulMgr.getWeaponRed";this.redDot.updateShowFunctions=i}}else if(22==this._btnId&&this.targetObj&&this.targetObj instanceof t.RoleView){var i="WordFormulaManager.getViewRed";this.redDot.updateShowFunctions=i}},i.prototype.setImagePath=function(t){void 0===t&&(t=null),null!=t&&(this.bg.source=t,this.bg0.source=t+"2")},i.prototype.onClickFunc=function(e){var i=e.currentTarget;if(!this.isOpen){var n=t.GlobalConfig.SystemOpen,s=n[i.btnId].name;return void t.UserTips.ins().showUITips(s)}null!=this.applyFunc&&this.applyFunc.call(this.targetObj,i)},i.prototype.refresh=function(){this.redDot&&this.redDot.delayUpdateShow()},Object.defineProperty(i.prototype,"btnId",{get:function(){return this._btnId},set:function(t){this._btnId=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isOpen",{get:function(){return this._isOpen},set:function(t){this._isOpen=t},enumerable:!0,configurable:!0}),i.prototype.setCurState=function(t){this.currentState=t},i.prototype.destroy=function(){this.applyFunc&&(this.applyFunc=null),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickFunc,this),t.DisplayUtils.removeFromParent(this)},i}(eui.Button);t.ButtonStateElement=e,__reflect(e.prototype,"app.ButtonStateElement")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.dir=4,this.team=Team.NotAtk}return t}();t.EffectModel=e,__reflect(e.prototype,"app.EffectModel")}(app||(app={}));var Team;!function(t){t[t.My=0]="My",t[t.Monster=1]="Monster",t[t.WillEntity=2]="WillEntity",t[t.WillBoss=3]="WillBoss",t[t.NotAtk=4]="NotAtk",t[t.Faker=5]="Faker"}(Team||(Team={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.errorCode=["",t.LanguageUtils.language_Error_11,t.LanguageUtils.language_Error_12,t.LanguageUtils.language_Error_13,t.LanguageUtils.language_Error_14,t.LanguageUtils.language_Error_108,t.LanguageUtils.language_Error_114],i.myRoleInfo={},i._switchPlayer=!1,i._createSex=0,i.createSign=!1,i.selectRolId=0,i._count=1,i.sysId=t.PackageID.Login,i.regNetMsg(1,i.g_255_1),i.regNetMsg(2,i.g_255_2),i.regNetMsg(3,i.g_255_3),i.regNetMsg(5,i.g_255_5),i.regNetMsg(8,i.g_255_8),i.regNetMsg(9,i.g_255_9),i}return __extends(i,e),i.prototype.connectServer=function(){t.GameSocket.ins().login(t.LocationProperty.openID,t.LocationProperty.password,t.LocationProperty.srvid,t.LocationProperty.serverIP,t.LocationProperty.serverPort,t.LocationProperty.originalSrvid)},i.prototype.initMyRoleInfo=function(){t.ObjectPool.wipe(this.myRoleInfo),this._count=1,this.selectRolId=0},i.prototype.getMyRoleInfo=function(){var t=[];for(var e in this.myRoleInfo)this.myRoleInfo[e].select=!1,t.push(this.myRoleInfo[e]);return t},i.prototype.setMyRoleInfoLevel=function(e){this.myRoleInfo[t.LocationProperty.roleId]&&(this.myRoleInfo[t.LocationProperty.roleId].level=e)},i.prototype.setMyRoleInfoZsLevel=function(e){this.myRoleInfo[t.LocationProperty.roleId]&&(this.myRoleInfo[t.LocationProperty.roleId].zsLevel=e)},i.prototype.setMyRoleInfoGuildName=function(e){this.myRoleInfo[t.LocationProperty.roleId]&&(this.myRoleInfo[t.LocationProperty.roleId].guildName=e)},i.prototype.setMyRoleInfoName=function(e){this.myRoleInfo[t.LocationProperty.roleId]&&(this.myRoleInfo[t.LocationProperty.roleId].name=e)},i.ins=function(){return e.ins.call(this)},i.prototype.initInfo=function(){this.myRoleInfo={};for(var e=t.GameSocket.ins().getMyRoleInfo(),i=0;i<e.length;i++)this.myRoleInfo[e[i].id]=e[i];this.openDay=t.GameSocket.ins().openDay,this.selectRolId=t.GameSocket.ins().selectRolId},Object.defineProperty(i.prototype,"switchPlayer",{get:function(){return this._switchPlayer},set:function(t){this._switchPlayer=t},enumerable:!0,configurable:!0}),i.prototype.s_255_3=function(){var t=this.getBytes(3);this.sendToServer(t)},i.prototype.s_255_6=function(t){var e=this.getBytes(6);e.writeByte(t),this.sendToServer(e)},Object.defineProperty(i.prototype,"createSex",{get:function(){return this._createSex},enumerable:!0,configurable:!0}),i.prototype.s_255_4=function(e,i,n,s,a){void 0===s&&(s=0),void 0===a&&(a=0),this.createSign=!0,this._createSex=s,ReportMgr.reporting(t.ReportDataEnum.CLICK_CREATE_ROLE,{},{uid:t.LocationProperty.openID,roleId:0,serverName:t.LocationProperty.srvname},!1);var r=this.getBytes(4);r.writeString(e),r.writeByte(s),r.writeByte(a),r.writeByte(0),r.writeByte(0),r.writeString(""),r.writeInt(0),this.sendToServer(r)},i.prototype.g_255_1=function(e){var i=e.readByte();this.errorCode[Math.abs(i)]?Main.showTipsPhone?Main.showTipsPhone(this.errorCode[Math.abs(i)]):t.UserTips.ins().showUITips(this.errorCode[Math.abs(i)]):17==Math.abs(i)?Main.showTipsPhone?Main.showTipsPhone(t.LanguageUtils.language_Error_104):t.UserTips.ins().showUITips(t.LanguageUtils.language_Error_104):18==Math.abs(i)?Main.showTipsPhone?Main.showTipsPhone(t.LanguageUtils.language_Error_108):t.UserTips.ins().showUITips(t.LanguageUtils.language_Error_108):Main.showTipsPhone?Main.showTipsPhone(t.LanguageUtils.language_Error_100+":"+i):t.UserTips.ins().showUITips(t.LanguageUtils.language_Error_100+":"+i),t.GameSocket.IsCrossService&&(t.GameSocket.IsCrossService=!1)},Object.defineProperty(i.prototype,"openDay",{get:function(){return this._openDay},set:function(t){this._openDay=t},enumerable:!0,configurable:!0}),i.prototype.g_255_2=function(e){this._openDay=e.readUnsignedInt();var n=(e.readByte(),e.readInt()),s=e.readByte();if(s>this._count&&this._count>0){this._count=s;for(var a,r=0;s>r;r++)if(a=new t.SimplePlayerInfo,a.read(e),!this.myRoleInfo[a.id]){this.selectRolId=a.id;break}return void t.GameApp.closesocket(!1)}if(this._count=s,0==s||i.ins().switchPlayer)return t.SceneManager.ins().runScene(t.CreateRoleScene),void(i.ins().switchPlayer=!1);if(t.ObjectPool.wipe(this.myRoleInfo),s>0&&100>s){for(var a,r=0;s>r;r++)a=new t.SimplePlayerInfo,a.read(e),this.selectRolId||(this.selectRolId=a.id),this.myRoleInfo[a.id]=a;if(this.createSign&&(ReportMgr.reporting(t.ReportDataEnum.CREATE_ROLE_SUCCESS,{},{roleId:a.id,roleName:a.name,level:0,sex:a.sex,job:a.job,guildName:a.guildName,zsLevel:0},!1),ReportMgr.reporting(t.ReportDataEnum.UPDATE_LEVEL,{},{roleId:a.id,roleName:a.name,level:1,prelevel:1,sex:a.sex,job:a.job,guildName:a.guildName,zsLevel:0},!1),this.createSign=!1,Main.gameParameter.pfID==t.PlatFormID.QQGame&&this.qqIDCard(),10007==Main.gameParameter.pfID&&Main.gameParameter.loginType&&gamelib.DeviceUtils.IsNative&&Main.Native_adJustData({type:2})),!this.myRoleInfo[this.selectRolId])for(var o in this.myRoleInfo){this.selectRolId=+o;break}t.DefaultMgr.ins().s_0_1(n,this.myRoleInfo[this.selectRolId].id)}},i.prototype.g_255_5=function(t){var e=t.readByte();if(0==e){var i=(t.readByte(),t.readUTF());this.setName(i)}},i.prototype.g_255_3=function(e){var i=(e.readInt(),e.readByte());if(i){var n=t.ViewManager.ins().getView(t.CreateRoleView2);n&&(this.errorCode[Math.abs(i)]?n.showUITips(this.errorCode[Math.abs(i)]):n.showUITips(t.LanguageUtils.language_Error_100+":"+i))}else t.SoundUtil.ins().delayTime(3e3),this.createSign?(t.ViewManager.ins().open(t.WelcomeView2),t.ViewManager.ins().close(t.CreateRoleView2)):this.s_255_3()},i.prototype.g_255_8=function(e){t.GameSocket.ins().automaticLink=!1,t.ViewManager.ins().open(t.MainBanView,t.LanguageUtils.language_Error_105)},i.prototype.g_255_9=function(e){var i=e.readInt(),n=t.KFManager.ins().kfRoleId;t.DefaultMgr.ins().s_0_1(i,n)},i.prototype.setName=function(t){this.createRoleView.setName(t)},Object.defineProperty(i.prototype,"createRoleView",{get:function(){return t.ViewManager.ins().getView(t.CreateRoleView2)},enumerable:!0,configurable:!0}),i.prototype.qqIDCard=function(){var t="openid="+Main.gameParameter.userInfo.openid+"&openkey="+Main.gameParameter.userInfo.openkey+"&pf="+Main.gameParameter.userInfo.pf,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=JSON.parse(e.responseText);t&&0==t.ret}},e.open("GET",window.Verified+t,!0),e.send(null)},i}(t.BaseSystem);t.MFRoleMgr=e,__reflect(e.prototype,"app.MFRoleMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.sysId=t.PackageID.Move,i.regNetMsg(5,i.postFlyShoes),i.regNetMsg(6,i.post_1_6),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.s_1_1=function(t,e,i){var n=Math.floor(egret.getTimer()),s=this.getBytes(1);s.writeShort(t),s.writeShort(e),s.writeShort(i),s.writeUnsignedInt(n),this.sendToServer(s)},i.prototype.s_1_2=function(t,e,i){var n=Math.floor(egret.getTimer()),s=this.getBytes(2);s.writeShort(t),s.writeShort(e),s.writeShort(i),s.writeUnsignedInt(n),this.sendToServer(s)},i.prototype.s_1_4=function(t){var e=this.getBytes(4);e.writeByte(t),this.sendToServer(e)},i.prototype.send_1_6=function(t,e){var i=this.getBytes(6);i.writeNumber(t),i.writeShort(e),this.sendToServer(i)},i.prototype.post_1_6=function(t){var e=t.readInt();return e},i.prototype.post_clearNpcTime=function(){},i.prototype.post_clearDuoBaoTime=function(){},i.prototype.s_1_5=function(t,e){var i=this.getBytes(5);i.writeByte(t),i.writeByte(0),i.writeByte(e),i.writeByte(0),this.sendToServer(i)},i.prototype.postFlyShoes=function(t){var e=t.readShort();0!=e&&this.isOpenNpcView(e)},i.prototype.isOpenNpcView=function(e){var i,n,s=t.EntityMgr.ins().getNpcList();for(var a in s)if(i=s[a],n=i.propSet.getACTOR_ID(),n==e){t.ViewManager.ins().isShow(t.NpcView)&&t.ViewManager.ins().close(t.NpcView),t.ViewManager.ins().open(t.NpcView,i.recog,i.propSet);break}},i}(t.BaseSystem);t.MoveMgr=e,__reflect(e.prototype,"app.MoveMgr")}(app||(app={}));var app;!function(t){var e=function(e){function n(){var n=e.call(this)||this;n._mainDic={},n.subImages=[["btn_js_zb","btn_js_shiz","btn_js_sx","btn_js_zf","btn_js_ch","btn_js_sz"],["btn_jn_zy","btn_jn_ty","btn_shenmo","btn_neigong"],[],[],[],["btn_jn_bh","btn_chongwu_icon","btn_js_zj"]];var s,a=t.OtherMgr.ins().getSubIdsByMainId(i.ROLE_EQUIP),r=t.OtherMgr.ins().getSubIdsByMainId(i.ROLE_SKILL),o=t.OtherMgr.ins().getSubIdsByMainId(i.ROLE_CIRCLE),l=t.OtherMgr.ins().getSubIdsByMainId(i.ROLE_TREASURE),h=t.OtherMgr.ins().getSubIdsByMainId(i.ROLE_STRENGTHEN),p=t.OtherMgr.ins().getSubIdsByMainId(i.ROLE_SACRED);for(s=0;s<a.length;s++)n._mainDic[a[s].id]=n.subImages[i.ROLE_EQUIP][s];for(s=0;s<r.length;s++)n._mainDic[r[s].id]=n.subImages[i.ROLE_SKILL][s];for(s=0;s<o.length;s++)n._mainDic[o[s].id]=n.subImages[i.ROLE_CIRCLE][s];for(s=0;s<l.length;s++)n._mainDic[l[s].id]=n.subImages[i.ROLE_TREASURE][s];for(s=0;s<h.length;s++)n._mainDic[h[s].id]=n.subImages[i.ROLE_STRENGTHEN][s];for(s=0;s<p.length;s++)n._mainDic[p[s].id]=n.subImages[i.ROLE_SACRED][s];return n}return __extends(n,e),n.ins=function(){return e.ins.call(this)},Object.defineProperty(n.prototype,"mainDic",{get:function(){return this._mainDic},enumerable:!0,configurable:!0}),n}(t.BaseClass);t.RoleSubBtn=e,__reflect(e.prototype,"app.RoleSubBtn");var i=function(){function t(){}return t.ROLE_EQUIP=0,t.ROLE_SKILL=1,t.ROLE_CIRCLE=2,t.ROLE_TREASURE=3,t.ROLE_STRENGTHEN=4,t.ROLE_SACRED=5,t}();t.RoleSubBtnType=i,__reflect(i.prototype,"app.RoleSubBtnType")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.ROLE=1,t.EQUIP=2,t.DIVINE=3,t.FASHION=4,t.SKILL=5,t.JOB=6,t.CURRENCY=7,t.MERIDIANS=8,t.CIRCLE=10,t.TREASURE=11,t.BLESS=12,t.FOUR=13,t.RING=14,t.STRENGTH=16,t.DESIGNAT=17,t.SHENMO=18,t.HALIDOM=19,t.SOLDIERSOUL=20,t.PET=21,t.WORDFORMULA=22,t}();t.RoleTabEnum=e,__reflect(e.prototype,"app.RoleTabEnum");var i=function(){function t(){}return t.myRolePanel=1,t.otherPlayerPanel=2,t}();t.RoleViewEnum=i,__reflect(i.prototype,"app.RoleViewEnum")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.tabName=["role_tab_js","role_tab_jn","role_tab_zs","role_tab_bw","role_tab_qh","role_tab_sw"],i._container=t,i.init(),i}return __extends(i,e),i.prototype.init=function(){if(console.log("init"),null!=this._container){this.tabElements=[];for(var e,i,n=t.OtherMgr.ins().dicMenu[1],s=0,a=this.tabName.length;a>s;s++)e=new t.RolePriBtnView,i=new t.Tab_Element(e),i.setData({txt:this.tabName[s],id:n[s].id,isOpen:!0}),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.tabElements.push(i)}},i.prototype.refresh=function(){for(var t=0,e=this.tabElements.length;e>t;t++)this.tabElements[t].refresh()},i.prototype.setData=function(e){this.removeAllChild();for(var i,n=(t.OtherMgr.ins().dicMenu[1],0);n<e.length;n++)for(var s=0;s<this.tabElements.length;s++)if(i=this.tabElements[s].tabBtn,i.id==e[n]){this._container.addChild(i);break}},i.prototype.removeAllChild=function(){for(;this._container.numElements>0;)this._container.removeChildAt(0)},i.prototype.onTouchTap=function(e){var i,n,s,a=e.currentTarget;if(!this._currTab||this._currTab.tabBtn!=a)for(n=0;n<this.tabElements.length;n++)if(i=this.tabElements[n],s=a.id,i.tabBtn==a){if(!i.isOpen){var r=t.GlobalConfig.SystemOpen,o=r[a.id].name;t.UserTips.ins().showUITips(o),this._currTab["goto"](2);continue}i["goto"](2),this._currIndex=n,this._currTab["goto"](1),this._currTab=i,this.dispatchEvent(new t.CompEvent(t.CompEvent.TAB_CHANGE))}else i.isOpen&&this._currTab!=i&&i["goto"](1)},Object.defineProperty(i.prototype,"currIndex",{get:function(){return this._currIndex},set:function(e){var i,n;if(i=this.tabElements[e],!this._currTab||this._currTab!=i||i){for(i["goto"](2),this._currIndex=e,this._currTab=i,n=0;n<this.tabElements.length;n++)n!=e&&this.tabElements[n]["goto"](1);this.dispatchEvent(new t.CompEvent(t.CompEvent.TAB_CHANGE))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currTab",{get:function(){return this._currTab},enumerable:!0,configurable:!0}),i.prototype.destory=function(){for(var t,e=void 0,i=this.tabElements.length;i>e;e++)t=this.tabElements[e],t.tabBtn&&t.tabBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),t.destory(),t=null},i}(egret.EventDispatcher);t.Tab_Bar=e,__reflect(e.prototype,"app.Tab_Bar")}(app||(app={}));var app;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._tabBtn=e,i}return __extends(e,t),Object.defineProperty(e.prototype,"tabBtn",{get:function(){return this._tabBtn},enumerable:!0,configurable:!0}),e.prototype["goto"]=function(t){this._tabBtn["goto"](t)},Object.defineProperty(e.prototype,"id",{get:function(){return this._tabBtn.id},set:function(t){this._tabBtn.id=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._tabBtn.isOpen},set:function(t){this._tabBtn.isOpen=t},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){t&&this._tabBtn.setData(t)},e.prototype.refresh=function(){this._tabBtn.refresh()},e.prototype.destroy=function(){this._tabBtn.destory(),this._tabBtn=null},e}(egret.EventDispatcher);t.Tab_Element=e,__reflect(e.prototype,"app.Tab_Element")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.sysId=t.PackageID.Bless,i.regNetMsg(1,i.post_18_1),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_18_1=function(t){var e=this.getBytes(1);e.writeByte(t),this.sendToServer(e)},i.prototype.post_18_1=function(t){t.readInt()},i.prototype.isCanBless=function(){var e=1,i=0,n=t.CurrencyUtils.getCurrency(QatEnum.qatEquipment,269),s=t.EntityMgr.ins().getPayer;if(s&&s.propSet)for(var a in t.GlobalConfig.BlessConfig){var r=t.GlobalConfig.BlessConfig[a];if(!(s.propSet.getBless()>=r.needBlessValue))break;i=r.level}return e=i&&i>5?5:1,n>=e?1:0},i.prototype.isCanBless2=function(){return i.ins().isCanAuto?i.ins().isCanBless():0},i.prototype.getRedById=function(t){return 269==t?this.isCanBless():0},Object.defineProperty(i.prototype,"isCanAuto",{get:function(){var e=t.EntityMgr.ins().getPayer,i=t.VipData.ins().getMyVipLv();return i>3||e.propSet.getZSLevel()>5?!0:!1},enumerable:!0,configurable:!0}),i}(t.BaseSystem);t.BlessMgr=e,__reflect(e.prototype,"app.BlessMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.sysId=t.PackageID.Circle,i.regNetMsg(1,i.post_11_1),i.regNetMsg(2,i.post_11_2),i.regNetMsg(3,i.post_11_3),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_11_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.send_11_2=function(){var t=this.getBytes(2);this.sendToServer(t)},i.prototype.send_11_3=function(t){var e=this.getBytes(3);e.writeByte(t),this.sendToServer(e)},i.prototype.post_11_1=function(t){for(var e,i,n=t.readByte(),s=0;n>s;s++)e=t.readByte(),i=t.readByte(),this.setExchangeData(e,i)},i.prototype.post_11_2=function(e){var i=e.readByte();1==i&&t.OtherMgr.ins().send_26_45()},i.prototype.post_11_3=function(t){t.readByte()},i.prototype.setExchangeData=function(e,i){t.ModelManager.ins().roleModel.exchangeListData[e].useTimes=t.ModelManager.ins().roleModel.exchangeListData[e].useLimit-i},i}(t.BaseSystem);t.CircleMgr=e,__reflect(e.prototype,"app.CircleMgr")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.isWk=!1,this.recog=0,this.btDir=0,this.X=0,this.Y=0}return t.prototype.read=function(t,e,i,n,s,a){void 0===t&&(t=!1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=0),this.isWk=t,this.recog=e,this.btDir=i,this.X=n,this.Y=s,this.Action=a},t.prototype.init=function(){this.isWk=!1,this.recog=0,this.btDir=0,this.X=0,this.Y=0,this.Action=0},t}();t.ActionInfo=e,__reflect(e.prototype,"app.ActionInfo")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MedalAttrItemCurSkin",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.visible=null!=this.data,this.data&&(this.txt_cur.text=this.data)},e}(eui.ItemRenderer);t.MedalAttrItemCurView=e,__reflect(e.prototype,"app.MedalAttrItemCurView")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.Human=0,t.Monster=1,t.Npc=2,t.enDropItem=3,t.enPet=4,t.enFire=5,t.offlineDummy=6,t.dummy=7,t}();t.ActorRace=e,__reflect(e.prototype,"app.ActorRace")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.STAND=1,t.MOVE=2,t.RIDE=4,t.ZANZEN=8,t.STALL=16,t.SING=32,t.BATTLE=64,t.DEATH=8,t.MOVE_FORBID=256,t.DIZZY=512,t.AUTO_BATTLE=1024,t.RETURN_BURN=2048,t.DISABLE_SKILLCD=4096,t.CHALLENGE=8192,t.TRAFFIC=16384,t.COUPLE_ZANZEN=32768,t.BODY_CHANGE=65536,t.SWIMMING=131072,t.KISS_SWIMMING=262144,t.FAST_BATTLE=524288,t.KISS_LAND=1048576,t.SILENT=2097152,t.CARRIER=4194304,t.PASSENGGER=8388608,t.DongFang=16777216,t.Own_Pet=33554432,t.HERO_FIT=67108864,t.GM=134217728,t.Chariot=268435456,t.DenyAttacked=536870912,t.YUNBIAO=2147483648,t}();t.ActorState=e,__reflect(e.prototype,"app.ActorState")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isShow=!1,t}return __extends(i,e),i.prototype.advanceTime=function(e){this.checkIsVisible(),t.ViewManager.gamescene.map.setShadowXY(this.recog,this.x,this.y)},i.prototype.initialize=function(){this.isShow=!1,e.prototype.initialize.call(this),this.checkIsVisible(),this.updateNameType()},i.prototype.updateNameType=function(){this.propSet&&(this._nameTxt.visible=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_ShowHuman)&&!t.GameMap.aaCannotSeeName?!0:!1,this.updateLabelxy())},i.prototype.setNameTxtColor=function(){this._nameTxt.textColor=t.ColorUtil.NAME_WHITE},i.prototype.onEndClick=function(e){t.EntityMgr.ins().getPayer;t.DefaultMgr.ins().postUpdateTarget(this.recog)},i.prototype.mouseMove=function(e){if(e.stopPropagation(),e.type==mouse.MouseEvent.MOUSE_OUT)this.filters=null,t.MapView.m_Move_Char=null,this.updateNameType(),t.UserTips.ins().closeTips(),this.isShowGuanZhi=!1;else if(e.type==mouse.MouseEvent.MOUSE_OVER){this.isShowGuanZhi=!0,this.filters=t.FilterUtil.WHITE();var i=t.EntityMgr.ins().getPayer;this.isDead||this.isMyPet&&5!=i.propSet.getPKtype()||(t.MapView.m_Move_Char=this),this.parent&&(this.isCharRole||this.isPet?this._nameTxt.visible=!t.GameMap.aaCannotSeeName:this._nameTxt.visible=!0)}},Object.defineProperty(i.prototype,"isCharRole",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDummyCharRole",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.checkIsVisible=function(){3==t.GameMap.mapID&&t.EntityMgr.ins().isVisibleDummy(this.recog)?this.setIsVisible(!0):this.setIsVisible(!1)},i.prototype.setIsVisible=function(i){if(i!=this.isShow)if(this.updateNameType(),this.isShow=i,this.isShow)e.prototype.initialize.call(this),this.updateNameType(),t.ViewManager.gamescene.map.addEntity(this),this.visible=!0;else{this.visible=!1,t.DisplayUtils.removeFromParent(this);var n=t.EntityMgr.ins().getPayer;this.recog==n.lockTarget&&t.DefaultMgr.ins().postUpdateTarget(0)}},i}(t.CharRole);t.CharDummy=e,__reflect(e.prototype,"app.CharDummy")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MedalAttrItemNextSkin",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.visible=null!=this.data,this.data&&(this.txt_next.text=this.data)},e}(eui.ItemRenderer);t.MedalAttrItemNextView=e,__reflect(e.prototype,"app.MedalAttrItemNextView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.visible=null!=this.data;var t=this.data;if(t){t.type;t.state>0?this.lbGift.textColor=1827328:this.lbGift.textColor=15779990,this.lbGift.text=t.content}},e}(eui.ItemRenderer);t.MedalUpItemCurView=e,__reflect(e.prototype,"app.MedalUpItemCurView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isShow=!1,t}return __extends(i,e),i.prototype.initialize=function(){this.isShow=!1,e.prototype.initialize.call(this),this.updateNameType(),this._nameTxt.visible=!0},i.prototype.updateNameType=function(){this.propSet&&(this._nameTxt.visible=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_ShowHuman)&&!t.GameMap.aaCannotSeeName?!0:!1,this.updateLabelxy())},i.prototype.setNameTxtColor=function(){this._nameTxt.textColor=t.ColorUtil.NAME_WHITE},i.prototype.onEndClick=function(e){t.EntityMgr.ins().getPayer;t.DefaultMgr.ins().postUpdateTarget(this.recog)},i.prototype.mouseMove=function(e){if(e.stopPropagation(),e.type==mouse.MouseEvent.MOUSE_OUT)this.filters=null,t.MapView.m_Move_Char=null,this.updateNameType(),t.UserTips.ins().closeTips(),this.isShowGuanZhi=!1;else if(e.type==mouse.MouseEvent.MOUSE_OVER){this.isShowGuanZhi=!0,this.filters=t.FilterUtil.WHITE();var i=t.EntityMgr.ins().getPayer;this.isDead||this.isMyPet&&5!=i.propSet.getPKtype()||(t.MapView.m_Move_Char=this),this.parent&&(this.isCharRole||this.isPet?this._nameTxt.visible=!t.GameMap.aaCannotSeeName:this._nameTxt.visible=!0)}},i.prototype.updateNameText=function(e){this.propSet.setProperty(t.ActorPropertyModel.ACTOR_NAME,e),this.setCharName(e),this.charName=e,this._nameTxt&&!this._nameTxt.parent&&t.ViewManager.gamescene.map.addNameLabel(this._nameTxt)},i.prototype.updateXY=function(e,i){this.dir=t.MathUtils.limitInteger(0,7),this.syncSetCurrentXY(e,i),this.advanceTime(egret.getTimer())},Object.defineProperty(i.prototype,"isCharRole",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDummyCharRole",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.setIsVisible=function(i){if(!this.parent&&i&&this.isShow&&(this.isShow=!1),i!=this.isShow)if(this.updateNameType(),this.isShow=i,this.isShow)e.prototype.initialize.call(this),this.updateNameType(),t.ViewManager.gamescene.map.addEntity(this),this.visible=!0;else{this.visible=!1,t.DisplayUtils.removeFromParent(this);var n=t.EntityMgr.ins().getPayer;this.recog==n.lockTarget&&t.DefaultMgr.ins().postUpdateTarget(0)}},i}(t.CharRole);t.CharMakeDummy=e,__reflect(e.prototype,"app.CharMakeDummy")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.getFbTab=function(){var e=[],i=t.GlobalConfig.ActivityAscriptionConf;for(var n in i)i[n].closelimit&&t.ViewManager.ins().isCheckClose(i[n].closelimit)||e.push(i[n]);return e},i.prototype.getTabInfo=function(t){},i}(t.BaseSystem);t.ActivityCopiesMgr=e,__reflect(e.prototype,"app.ActivityCopiesMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._nameTxt=null,i.touchEnabled=!1,i._body=t.ObjectPool.pop("app.MovieClip"),i.addChild(i._body),i._nameTxt=t.ViewManager.gamescene.map.getCharNameLable(),i._nameTxt.textColor=2682369,i}return __extends(i,e),i.prototype.onBeginClick=function(t){t.stopPropagation()},i.prototype.onEndClick=function(e){e.stopPropagation(),t.ViewManager.ins().isShow(t.NpcView)&&t.ViewManager.ins().close(t.NpcView),t.ViewManager.ins().open(t.NpcView,this.recog,this.propSet)},i.prototype.mouseMove=function(e){e.type==mouse.MouseEvent.MOUSE_OUT?this._body.filters=null:e.type==mouse.MouseEvent.MOUSE_OVER&&(this._body.filters=t.FilterUtil.WHITE())},Object.defineProperty(i.prototype,"isNpc",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.setPropertySet=function(e,i,n){this._body.touchEnabled=!0,gamelib.DeviceUtils.IsMobile?(this._body.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEndClick,this),this._body.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginClick,this)):(this._body.addEventListener(mouse.MouseEvent.LEFT_DOWN,this.onEndClick,this),this._body.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this._body.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)),this.propSet=n,this._body.scaleX=this._body.scaleY=1.25,this.x=t.GameMap.grip2Point(n.getX()),this.y=t.GameMap.grip2Point(n.getY()),this.recog=e,t.ViewManager.gamescene.map.addNameLabel(this._nameTxt),this._nameTxt.text=i,this._nameTxt.x=this.x-this._nameTxt.textWidth/2*.4,this._nameTxt.y=this.y-40,this.loadBody(),this.updateTitle();
var s=t.MainTaskMgr.ins().getMainTaskInfoData();if(s){var a=t.GlobalConfig.TaskDisplayConfig[s.taskID][s.taskState];a&&a.npcid==this.propSet.getACTOR_ID()&&this.updateTask(a.mark)}var r=t.GlobalConfig.Npc[this.propSet.getACTOR_ID()];void 0!=r.npcEff&&""!=r.npcEff?(this._addMC||(this._addMC=t.ObjectPool.pop("app.MovieClip"),this._addMC.blendMode=egret.BlendMode.ADD,this.addChild(this._addMC)),this._addMC.playFile(ResDirEnum.RES_DIR_NPC+r.npcEff,-1),this._addMC.alpha=r.nAlpha?r.nAlpha/100:1):this._addMC&&(this._addMC.destroy(),this._addMC=null)},i.prototype.loadBody=function(){this._body.stop(),this._body.addEventListener(egret.Event.CHANGE,this.playBody,this),this._body.playFile(ResDirEnum.RES_DIR_NPC+"npc"+this.propSet.getBody(),-1,null,!1)},i.prototype.playBody=function(t){var e=1;this._body.gotoAndPlay(e,-1)},Object.defineProperty(i.prototype,"weight",{get:function(){return this.y+2},enumerable:!0,configurable:!0}),i.prototype.updateTitle=function(){var e=t.GlobalConfig.Npc[this.propSet.getACTOR_ID()];if(e){var i=e.scale?e.scale/100:1;this._body.scaleX=this._body.scaleY=1.25*i,e.Npctitle?(this._titleImage?t.ViewManager.gamescene.map.addTitleImage(this._titleImage):this._titleImage=t.ViewManager.gamescene.map.getNpcTitleImage(),this._titleImage.anchorOffsetX=0,this._titleImage.x=this.x+e.Npctitle.x,this._titleImage.y=this.y+e.Npctitle.y,this._titleImage.source=e.Npctitle.source,this._titleImage.visible=!0):this._titleImage&&(this._titleImage.source="",t.DisplayUtils.removeFromParent(this._titleImage),this._titleImage.visible=!1),e.Npctitle2?(this._titleImage2?t.ViewManager.gamescene.map.addTitleImage(this._titleImage2):this._titleImage2=t.ViewManager.gamescene.map.getNpcTitleImage(),this._titleImage2.anchorOffsetX=0,this._titleImage2.x=this.x+e.Npctitle2.x,this._titleImage2.y=this.y+e.Npctitle2.y,this._titleImage2.source=e.Npctitle2.source,this._titleImage2.visible=!0):this._titleImage2&&(this._titleImage2.source="",t.DisplayUtils.removeFromParent(this._titleImage2),this._titleImage2.visible=!1),e.Npctitle3?(this._titleImage3?t.ViewManager.gamescene.map.addTitleImage(this._titleImage3):this._titleImage3=t.ViewManager.gamescene.map.getNpcTitleImage(),this._titleImage3.anchorOffsetX=0,this._titleImage3.x=this.x+e.Npctitle3.x,this._titleImage3.y=this.y+e.Npctitle3.y,this._titleImage3.source=e.Npctitle3.source,this._titleImage3.visible=!0):this._titleImage3&&(this._titleImage3.source="",t.DisplayUtils.removeFromParent(this._titleImage3),this._titleImage3.visible=!1)}else this._titleImage&&(this._titleImage.source="",t.DisplayUtils.removeFromParent(this._titleImage),this._titleImage.visible=!1),this._titleImage2&&(this._titleImage2.source="",t.DisplayUtils.removeFromParent(this._titleImage2),this._titleImage2.visible=!1),this._titleImage3&&(this._titleImage3.source="",t.DisplayUtils.removeFromParent(this._titleImage3),this._titleImage3.visible=!1),this.taskImage&&(this.taskImage.visible=!1,t.DisplayUtils.removeFromParent(this.taskImage))},i.prototype.updateTask=function(e){e?(this.taskImage?t.ViewManager.gamescene.map.addTitleImage(this.taskImage):this.taskImage=t.ViewManager.gamescene.map.getNpcTitleImage(),this.taskImage.source="rw_sign_"+e,this.taskImage.anchorOffsetX=22,this.taskImage.x=this.x,this.taskImage.y=this.y-170,this.taskImage.visible=!0):this.removeTask()},i.prototype.removeTask=function(){this.taskImage&&(this.taskImage.visible=!1,t.DisplayUtils.removeFromParent(this.taskImage))},i.prototype.destroy=function(){gamelib.DeviceUtils.IsMobile?(this._body.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEndClick,this),this._body.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginClick,this)):(this._body.removeEventListener(mouse.MouseEvent.LEFT_DOWN,this.onEndClick,this),this._body.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this._body.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)),this._body.stop(),this._body.dispose(),this._addMC&&(this._addMC.destroy(),this._addMC=null),this._nameTxt.text="",this._titleImage&&(this._titleImage.source="",t.DisplayUtils.removeFromParent(this._titleImage),this._titleImage.visible=!1),this._titleImage2&&(this._titleImage2.source="",t.DisplayUtils.removeFromParent(this._titleImage2),this._titleImage2.visible=!1),this._titleImage3&&(this._titleImage3.source="",t.DisplayUtils.removeFromParent(this._titleImage3),this._titleImage3.visible=!1),this.taskImage&&(this.taskImage.source="",this.taskImage.visible=!1,t.DisplayUtils.removeFromParent(this.taskImage)),t.DisplayUtils.removeFromParent(this._nameTxt),t.DisplayUtils.removeFromParent(this),t.ObjectPool.push(this)},i}(eui.Group);t.CharNpc=e,__reflect(e.prototype,"app.CharNpc")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initInfo=function(t,i,n){e.prototype.initInfo.call(this,t,i,n)},Object.defineProperty(i.prototype,"isMyPet",{get:function(){return this.propSet.getHandler()==t.EntityMgr.ins().getPayer.recog},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isPet",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.setCharName=function(t){this._nameTxt.text=t+"("+this.propSet.getMasterName()+")"},i}(t.CharMonster);t.CharPet=e,__reflect(e.prototype,"app.CharPet")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.itemList.itemRenderer=t.ItemBase,this.itemScroller.horizontalScrollBar.autoVisibility=!1,this.itemScroller.horizontalScrollBar.visible=!1,this.addTouchEvent(this.enterFb,this.onClick)},i.prototype.dataChanged=function(){if(this.data){var e=t.GlobalConfig["Activity"+this.data.actiType+"Config"];if(e){var i=e[this.data.actiID];if(i){if(this.systemBg.source=i.bg+"_png",this.title.source=i.titleIcon,this.systemJieShao.textFlow=t.TextFlowMaker.generateTextFlow(i.describe),this.enterFb.label=i.rewardBtn,i.ruleID?(this.rule.visible=!0,this.rule.ruleId=i.ruleID):this.rule.visible=!1,this.redPoint.visible=!1,i.buttoncolor){var n=t.ActvityMgr.ins().getActivityInfo(this.data.actiID);n&&n.redDot&&(this.redPoint.visible=!0,this.redPoint.setRedImg(i.buttoncolor))}this.itemList.dataProvider=new eui.ArrayCollection(i.rewards)}}}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.enterFb.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.enterFb:t.ActvityMgr.ins().enterActivity(this.data.actiID)}},i}(t.BaseItemRender);t.ActivityCopiesItem1=e,__reflect(e.prototype,"app.ActivityCopiesItem1")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._body=t.ObjectPool.pop("app.MovieClip"),i._body.scaleX=i._body.scaleY=1.25,i.addChild(i._body),i._nameTxt=new eui.Label,i._nameTxt.width=140,i._nameTxt.anchorOffsetX=70,i._nameTxt.y=-60,i._nameTxt.size=14,i._nameTxt.textAlign="center",i._nameTxt.textColor=2682369,i._nameTxt.stroke=1,i._nameTxt.strokeColor=0,i.addChild(i._nameTxt),i.touchEnabled=!0,i.touchChildren=!1,i}return __extends(i,e),i.prototype.setPropertySet=function(t,e,i,n){this.teleport=e,this.x=i,this.y=n,this._nameTxt.text=t,this.loadBody()},i.prototype.loadBody=function(){this._body.stop(),this._body.addEventListener(egret.Event.CHANGE,this.playBody,this),this._body.playFile(ResDirEnum.RES_DIR_TELEPORT+"teleport_"+this.teleport.modelid,-1,null,!1)},i.prototype.playBody=function(t){var e=1;this._body.gotoAndPlay(e,-1)},Object.defineProperty(i.prototype,"weight",{get:function(){return this.y},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){this._body.stop(),t.ObjectPool.push(this)},i}(eui.Group);t.CharTeleport=e,__reflect(e.prototype,"app.CharTeleport")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.nameTxt=null,i.touchChildren=!1,i.nameTxt=t.ViewManager.gamescene.map.getDropLable(),i.iconImage=new eui.Image,i.iconImage.width=i.iconImage.height=50,i.addChild(i.iconImage),i}return __extends(i,e),Object.defineProperty(i.prototype,"nX",{get:function(){return this._nX},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nY",{get:function(){return this._nY},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"packetId",{get:function(){return this._packetId},enumerable:!0,configurable:!0}),i.prototype.initInfo=function(e){t.ViewManager.gamescene.map.addDropLable(this.nameTxt),this.packId=e.readUnsignedInt(),this._packetId=e.readUnsignedShort(),this._nX=e.readUnsignedShort(),this._nY=e.readUnsignedShort();var i=e.readUnsignedInt();i?this.timeRemaining=1e3*i+egret.getTimer():this.timeRemaining=0,this.isBest=e.readByte();var n=e.readUnsignedShort();if(this.x=t.GameMap.grip2Point(this._nX)-25,this.y=t.GameMap.grip2Point(this._nY)-25,this.nameTxt.x=this.x-57,this.nameTxt.y=this.y-10,this.posKey=this._nX*t.GameMap.ROW+this._nY,this.nameTxt.textColor=10602993,65534==this._packetId)this.nameTxt.text=t.LanguageUtils.language_CURRENCY_NAME_1,this.iconImage.source=t.CurrencyUtils.getCoinIcon(n)+"";else if(65535==this._packetId)this.nameTxt.text=t.LanguageUtils.language_CURRENCY_NAME_2,this.iconImage.source=t.CurrencyUtils.getYBIcon(n)+"";else{var s=t.GlobalConfig.StdItems[this._packetId];if(s){if(s.showQuality>0){var a=t.ColorUtil.GOODS_COLOR[s.showQuality];a=a?a:t.ColorUtil.GOODS_COLOR[0],this.nameTxt.textColor=a}this.iconImage.source=s.icon+"",this.isBest?this.nameTxt.text=s.name+"[极]":this.nameTxt.text=s.name,s.dropEffect&&t.ViewManager.gamescene.map.addDropEff(this.packId,s.dropEffect,this.x,this.y)}}this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.updateNameColor();var r=egret.Tween.get(this.iconImage);this.iconImage.y=50,r.to({y:0},170).to({y:30},100).to({y:0},60).to({y:10},60).to({y:10},60).call(function(){egret.Tween.removeTweens(this)})},i.prototype.getIcon=function(){return this.iconImage.source},i.prototype.updateNameColor=function(){if(this.isBest);else if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Items,t.SetUpEnum.SetUp_Item_All_Mark))this.nameTxt.textColor=15991041;else{var e=t.SettingMgr.ins().getDataById(this._packetId);e&&e.isSelected2&&(this.nameTxt.textColor=15991041)}},i.prototype.mouseMove=function(e){e.type==mouse.MouseEvent.MOUSE_OUT?t.UserTips.ins().closeTips():e.type==mouse.MouseEvent.MOUSE_OVER&&this.showDrop()},i.prototype.showDrop=function(){var e=t.EntityMgr.ins().getKeyDropEntity(this.posKey);if(e){for(var i="",n=void 0,s=0;s<e.length;s++){var a=t.EntityMgr.ins().getDropItem(e[s]);if(a)if(65534==a._packetId)i+="\n"+t.LanguageUtils.language_CURRENCY_NAME_1,n=t.LanguageUtils.language_CURRENCY_NAME_1;else if(65535==a._packetId)i+="\n"+t.LanguageUtils.language_CURRENCY_NAME_2;else{var r=t.GlobalConfig.StdItems[a._packetId];r&&(i+="\n"+r.name)}}if(""==i)return;i=i.replace("\n","");var o=this.localToGlobal();t.UserTips.ins().shouwTips(this,t.TipsType.TIPS_DROP,i,{x:o.x+20,y:o.y-25}),o=null}},Object.defineProperty(i.prototype,"weight",{get:function(){return 1},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){egret.Tween.removeTweens(this.iconImage),t.ViewManager.gamescene.map.removeDropEff(this.packId),this.nameTxt.textColor=10602993;var e=t.DropMgr.ins().getPickUpById(this.packId);e&&t.DropMgr.ins().post_pushImage({source:this.getIcon(),point:this.localToGlobal()}),t.EntityMgr.ins().delKeyDrop(this.posKey,this.packId),this.posKey=null,this._packetId=null,this.packId=null,this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),t.DisplayUtils.removeFromParent(this.nameTxt),t.DisplayUtils.removeFromParent(this),t.ObjectPool.push(this)},i}(eui.Group);t.DropEntity=e,__reflect(e.prototype,"app.DropEntity")}(app||(app={}));var app;!function(t){var e;!function(t){t[t.no=0]="no",t[t.hard=1]="hard",t[t.lightblue=2]="lightblue",t[t.poison=3]="poison",t[t.invisible=4]="invisible",t[t.shield=5]="shield",t[t.fixed=6]="fixed",t[t.disabled=7]="disabled"}(e=t.EntityFilter||(t.EntityFilter={}));var i=function(){function e(){}return e.buffFilter={0:null,1:t.FilterUtil.ARRAY_GRAY_FILTER,2:t.FilterUtil.ARRAY_LIGHTBLUE_FILTER,3:t.FilterUtil.ARRAY_GREEN_FILTER,4:null,5:null,6:t.FilterUtil.ARRAY_DARK_BLUE_FILTER},e}();t.EntityFilterUtil=i,__reflect(i.prototype,"app.EntityFilterUtil")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.entityList={},t.petList={},t.recog=0,t.entityNpcList={},t.entitySpecialList={},t.appearEffObj={},t._dropList={},t.dropKeyObj={},t.gridNpcObj={},t.gridCharObj={},t.teleportObj={},t.dummyRecogArray=[],t._dummyCharList={},t._isDuRange=!1,t._makeDummyCharList=[],t._isShowMakeDummy=!1,t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.createPlayer=function(e,i,n){this.plyaerRole||(this.plyaerRole=new t.PlayerRole),this.plyaerRole.destruct(),this.plyaerRole.initInfo(e,i,n),t.SkillMgr.ins().s_5_1(),t.EquipItemMgr.ins().sendQueryEquip(),t.BagMgr.ins().send_8_2(),t.BagMgr.ins().send_8_12(),t.GuildMgr.ins().getDeclareWarList(),t.MainTaskMgr.ins().send_6_1(),t.BossMgr.ins().send_49_1(),t.StrengthenMgr.ins().sendStrengthenInit(t.StrengthenType.Equip),t.StrengthenMgr.ins().sendStrengthenInit(t.StrengthenType.Special),t.StrengthenMgr.ins().sendStrengthenInit(t.StrengthenType.RingJob),t.FashionMgr.ins().send_51_1(),t.SoldierSoulMgr.ins().send_58_1(1),gamelib.DeviceUtils.IsMobile?t.SettingMgr.ins().send_17_11():t.SettingMgr.ins().send_17_1(),t.StrengthenMgr.ins().sendStrengthenInit(2),t.OtherMgr.ins().getPopViewData(),t.TeamMgr.ins().onSendMyTeamList(),t.GhostMgr.ins().send_31_1(),t.OtherMgr.ins().send_26_68(),t.PlatformFuliManager.ins().initPlatformFuli()},Object.defineProperty(i.prototype,"getPayer",{get:function(){return this.plyaerRole},enumerable:!0,configurable:!0}),i.prototype.getPlayerPropertySet=function(){return this.plyaerRole?this.plyaerRole:null},i.prototype.getAllEntity=function(){return this.entityList},i.prototype.addPlayer=function(e,i){t.ViewManager.gamescene.map.mpaGrey(!1),t.MapView.m_ack_Char&&t.MapView.ClearChar(t.MapView.m_ack_Char.recog),this.plyaerRole.reset(),this.plyaerRole.propSet.setProperty(t.ActorPropertyModel.AP_STATE,0),this.plyaerRole.resurgenceChar(),this.entityList[this.plyaerRole.recog]=this.plyaerRole,this.plyaerRole.syncSetCurrentXY(e,i),t.DefaultMgr.ins().postPlayerChange(),t.ViewManager.gamescene.map.addEntity(this.plyaerRole),this.appearEffObj[this.plyaerRole.recog]&&(t.SkillEffPlayer.PlayHitEff(this.appearEffObj[this.plyaerRole.recog],{x:this.plyaerRole.currentX,y:this.plyaerRole.currentY},0),delete this.appearEffObj[this.plyaerRole.recog])},i.prototype.clearEntity=function(){for(var e in this.entityList)+e!=this.plyaerRole.recog&&this.entityList[+e].destruct();for(var e in this.entityNpcList)this.entityNpcList[+e].destroy();for(var e in this.entitySpecialList)this.entitySpecialList[+e].destroy();for(var e in this._dropList)this._dropList[+e].destroy();t.ObjectPool.wipe(this.gridCharObj),t.ObjectPool.wipe(this.entityList),t.ObjectPool.wipe(this.gridNpcObj),t.ObjectPool.wipe(this.entityNpcList),t.ObjectPool.wipe(this.entitySpecialList),t.ObjectPool.wipe(this._dropList),t.ObjectPool.wipe(this.dropKeyObj),t.ObjectPool.wipe(this.teleportObj),t.PlayerRoleAI.ins().clearBlackRecogAll(),t.PlayerRoleAI.ins().createDestinationXY()},i.prototype.addCharRole=function(e,n,s){var a=i.ins().getCharRole(e);a&&i.ins().removeCharRole(a);var r=t.ObjectPool.pop("app.CharRole");return r.initInfo(e,n,s),r.initialize(),r.reset(),s.getState()&t.ActorState.DEATH&&(r.CharVisible=!1,r.onDead(function(){r.CharVisible=!0})),this.entityList[r.recog]=r,t.ViewManager.gamescene.map.addEntity(r),r},i.prototype.removeCharRole=function(e){e&&(t.DefaultMgr.ins().post_remDot(e.recog),t.MapView.ClearChar(e.recog),this.delGridChar(e.recog),delete this.entityList[e.recog],e.destruct())},i.prototype.addCharNpc=function(e,i,n){var s=t.ObjectPool.pop("app.CharNpc");s.setPropertySet(e,i,n),this.entityNpcList[s.recog]=s,t.ViewManager.gamescene.map.addEntity(s),this.addNpcGrid(e,n.getX(),n.getY())},i.prototype.getNpcList=function(){return this.entityNpcList},i.prototype.addEntitySp=function(e,i,n,s){var a=t.ObjectPool.pop("app.FireWall");a.initInfo(e,i,n,s),t.ViewManager.gamescene.map.addTelepor(a),this.entitySpecialList[e]=a},i.prototype.delEntitySp=function(t){delete this.entitySpecialList[t]},i.prototype.getEntitySp=function(t){return this.entitySpecialList[t]},i.prototype.addCharMonster=function(e,i,n){var s=n.getRace()==t.ActorRace.enPet?t.ObjectPool.pop("app.CharPet"):t.ObjectPool.pop("app.CharMonster");return n.getRace()==t.ActorRace.enPet&&n.getActorId()==this.getPayer.recog&&this.getPayer.addPet(e),s.initInfo(e,i,n),s.initialize(),s.reset(),n.getState()&t.ActorState.DEATH&&(s.visible=!1,s.onDead(function(){s.visible=!0})),this.entityList[s.recog]=s,t.ViewManager.gamescene.map.addEntity(s),s},i.prototype.getCharRole=function(t){return this.entityList[t]},i.prototype.getCharNpc=function(t){return this.entityNpcList[t]},i.prototype.updateTaskNpc=function(t,e){var i;for(var n in this.entityNpcList)i=this.entityNpcList[n],i.propSet.getACTOR_ID()==t?i.updateTask(e):i.removeTask()},i.prototype.getFireWall=function(t){return this.entitySpecialList[t]},i.prototype.delCharNpc=function(e){t.DefaultMgr.ins().post_remDot(e),delete this.entityNpcList[e]},i.prototype.addAppearEff=function(t,e){this.appearEffObj[t]=e},i.prototype.addDropItem=function(e){var i=t.ObjectPool.pop("app.DropEntity");i.initInfo(e),this.addKeyDrop(i.posKey,i.packId),t.ViewManager.gamescene.map.addDropEntity(i),this._dropList[i.packId]=i},Object.defineProperty(i.prototype,"dropList",{get:function(){return this._dropList},enumerable:!0,configurable:!0}),i.prototype.delDropItem=function(t){this._dropList[t]&&(this._dropList[t].destroy(),delete this._dropList[t])},i.prototype.getDropItem=function(t){return this._dropList[t]},i.prototype.addKeyDrop=function(t,e){this.dropKeyObj[t]?this.dropKeyObj[t].push(e):this.dropKeyObj[t]=[e]},i.prototype.delKeyDrop=function(t,e){if(this.dropKeyObj[t]){var i=this.dropKeyObj[t].indexOf(e);i>-1&&this.dropKeyObj[t].splice(i,1)}},i.prototype.getKeyDropEntity=function(t){return this.dropKeyObj[t]},i.prototype.get_X_Y_CharRole=function(t,e){var i=this.getGridChar(t,e);if(i&&i!=this.recog){var n=this.getCharRole(i);if(n&&!n.isDead)return n}return null},i.prototype.addNpcGrid=function(e,i,n){this.gridNpcObj[i*t.GameMap.ROW+n]=e},i.prototype.getXYGridNpc=function(e,i){return this.gridNpcObj[e*t.GameMap.ROW+i]},i.prototype.setGridChar=function(e,i,n,s,a){if(i!=s||n!=a){var r=i*t.GameMap.ROW+n,o=this.gridCharObj[r];o&&(delete o[e],0==Object.keys(o).length&&delete this.gridCharObj[r]),r=s*t.GameMap.ROW+a,o=this.gridCharObj[r],o||(o={},this.gridCharObj[r]=o),o[e]=e}},i.prototype.getGridChar=function(e,i){var n=e*t.GameMap.ROW+i,s=this.gridCharObj[n];if(s)for(var a in s)return+a;return null},i.prototype.getTeleport=function(e,i){return this.teleportObj[e*t.GameMap.ROW+i]},i.prototype.addTeleport=function(e,i){this.teleportObj[e*t.GameMap.ROW+i]=!0},i.prototype.delGridChar=function(t){for(var e in this.gridCharObj)if(this.gridCharObj[e]&&this.gridCharObj[e][t]==t){delete this.gridCharObj[e][t];break}},i.prototype.getBeginFrame=function(e,i){switch(e){case t.EntityAction.STAND:return 4*i;case t.EntityAction.WALK:return 32+6*i;case t.EntityAction.RUN:return 80+6*i;case t.EntityAction.STAND1:return 128+1*i;case t.EntityAction.ATTACK:return 136+6*i;case t.EntityAction.CAST:return 296+6*i;case t.EntityAction.HIT:return 360+3*i;case t.EntityAction.DIE:return 384+4*i}return 0},i.prototype.checkWalkable=function(e,i){var n=this.getGridChar(e,i);if(n){var s=this.getCharRole(n);if(!s)return 0;if(s.propSet.getRace()==t.ActorRace.Human){if(t.GameMap.isThroughHuman)return 0}else if(t.GameMap.isThroughMonster)return 0;return n}return n=this.getXYGridNpc(e,i),n?n:0},i.prototype.FindChatNearPlayer=function(t){this.entityList[t.playerId]&&this.entityList[t.playerId].setNearChat(t.senderName+":"+t.message)},i.prototype.updateMonsterName=function(){var e=this.getAllEntity();for(var i in e)e[i].postCharMessage(t.StandardActions.UPDATA_NAME_TYPE,0,0,0);for(var n in this._dummyCharList)this._dummyCharList[+n]&&this._dummyCharList[+n].updateNameType();for(var n in this._makeDummyCharList)this._makeDummyCharList[+n]&&this._makeDummyCharList[+n].updateNameType()},i.prototype.updateRolePet=function(){var t=this.getAllEntity();for(var e in t)t[e].isCharRole&&t[e].updatePet()},i.prototype.updateTitle=function(){var e=this.getAllEntity();for(var i in e){e[i].isCharRole&&e[i].postCharMessage(t.StandardActions.TITLE_UPDATE,0,0,0)}for(var n in this._dummyCharList)this._dummyCharList[+n]&&this._dummyCharList[+n].updateTitle();for(var n in this._makeDummyCharList)this._makeDummyCharList[+n]&&this._makeDummyCharList[+n].updateTitle()},i.prototype.dummyCharList=function(){return this._dummyCharList},i.prototype.getDummy=function(){if(this.checkDeummyRange(),this.resetMakeDummy(),!t.GameSocket.IsCrossService&&this._isDuRange&&this.dummyRecogArray.length)for(var e=0;e<this.dummyRecogArray.length;e++)if(!this._dummyCharList[this.dummyRecogArray[e]]){t.OtherMgr.ins().send_26_94(this.dummyRecogArray[e]);break}},Object.defineProperty(i.prototype,"isDuRange",{get:function(){return this._isDuRange},enumerable:!0,configurable:!0}),i.prototype.checkDeummyRange=function(){var e=!1;if(3==t.GameMap.mapID&&!t.GameSocket.IsCrossService){var n=i.ins().getPayer,s=n.propSet.getX(),a=n.propSet.getY();s>200&&234>s&&a>135&&163>a&&(e=!0)}if(e!=this._isDuRange&&(this._isDuRange=e,!e))for(var r in this._dummyCharList)this._dummyCharList[+r]&&this._dummyCharList[+r].setIsVisible(!1)},i.prototype.isVisibleDummy=function(e){return!t.GameSocket.IsCrossService&&this._isDuRange&&-1!=this.dummyRecogArray.indexOf(e)},i.prototype.addDummyRid=function(t){-1==this.dummyRecogArray.indexOf(t)&&this.dummyRecogArray.push(t)},i.prototype.getDummyChar=function(t){return this._dummyCharList[t]||this._makeDummyCharList[t-100]},i.prototype.delDummyRid=function(t){var e=this.dummyRecogArray.indexOf(t);-1!=e&&(this.dummyRecogArray.splice(e,1),this._dummyCharList[t]&&this._dummyCharList[t].setIsVisible(!1))},i.prototype.clearDummy=function(){this.dummyRecogArray.length=0;for(var t in this._dummyCharList)this._dummyCharList&&this._dummyCharList[+t].setIsVisible(!1)},i.prototype.addDummyPropertySet=function(e){if(!this._dummyCharList[e.getACTOR_ID()]){var i=t.ObjectPool.pop("app.CharDummy");i.initInfo(e.getACTOR_ID(),e.getName(),e),i.initialize(),this._dummyCharList[e.getACTOR_ID()]=i}},Object.defineProperty(i.prototype,"isShowMakeDummy",{get:function(){return this._isShowMakeDummy},set:function(t){this._isShowMakeDummy=t},enumerable:!0,configurable:!0}),i.prototype.resetMakeDummy=function(e){if(void 0===e&&(e=!1),!t.GameSocket.IsCrossService){e&&(this._isShowMakeDummy=!1);var n=void 0,s=i.ins().getPayer,a=s.propSet.getX(),r=s.propSet.getY();for(var o in t.GlobalConfig.DummyBuildConfig){n=t.GlobalConfig.DummyBuildConfig[+o];var l=n.num;if(l&&n.map==t.GameMap.mapID&&a>n.region[0]-10&&a<n.region[2]+10&&r>n.region[1]-10&&r<n.region[5]+10&&!t.ViewManager.ins().isCheckOpen(n.hideask)){if(this._isShowMakeDummy)return;l<this._makeDummyCharList.length&&(l=this._makeDummyCharList.length);for(var h=0;l>h;h++)if(h<n.num){var p=t.MathUtils.limitInteger(n.dummy[0],n.dummy[1]),u=t.GlobalConfig.DummyPlayerConfig[p];if(!u)continue;var c=t.MathUtils.limitInteger(n.region[0],n.region[2]),g=t.MathUtils.limitInteger(n.region[1],n.region[5]),d=t.ObjectPool.pop("app.PropertySet");d.setProperty(t.ActorPropertyModel.AP_X,c),d.setProperty(t.ActorPropertyModel.AP_Y,g),d.setProperty(t.ActorPropertyModel.AP_DIR,t.MathUtils.limitInteger(0,7)),d.setProperty(t.ActorPropertyModel.ACTOR_RACE,t.ActorRace.dummy),d.setProperty(t.ActorPropertyModel.ACTOR_NAME,""),d.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,""),d.setProperty(t.ActorPropertyModel.AP_ACTOR_ID,h+100),d.setProperty(t.ActorPropertyModel.AP_BODY_ID,u.info.apBodyId),d.setProperty(t.ActorPropertyModel.AP_HP,u.info.apHp),d.setProperty(t.ActorPropertyModel.AP_MP,u.info.apMp),d.setProperty(t.ActorPropertyModel.AP_MAX_HP,u.info.apMaxHp),d.setProperty(t.ActorPropertyModel.AP_MAX_MP,u.info.apMaxMp),d.setProperty(t.ActorPropertyModel.AP_SEX,u.info.apSex),d.setProperty(t.ActorPropertyModel.AP_JOB,u.info.apJob),d.setProperty(t.ActorPropertyModel.AP_LEVEL,u.info.apLevel),d.setProperty(t.ActorPropertyModel.AP_ACTOR_CIRCLE,u.info.apActorCircle),d.setProperty(t.ActorPropertyModel.AP_WEAPON,u.info.apWeapon),d.setProperty(t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY,u.info.actorWeaponDisplay),d.setProperty(t.ActorPropertyModel.BODY_SUIT,u.info.bodySuit),d.setProperty(t.ActorPropertyModel.AP_FACE_ID,u.info.apFaceId),d.setProperty(t.ActorPropertyModel.AP_ACTOR_HEAD_TITLE,u.info.apActorHeadTitle),d.setProperty(t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE,u.info.propActorSoldiersoulappearance),d.setProperty(t.ActorPropertyModel.ACTOR_FASHION_DISPLAY,u.info.actorFashionDisplay),d.setProperty(t.ActorPropertyModel.PROP_ACTOR_WEAPON_ID,u.info.propActorWeaponId),d.setProperty(t.ActorPropertyModel.AP_ACTOR_VIP_POINT,u.info.apActorVipPoint),d.setProperty(t.ActorPropertyModel.OFFICIAL_POSITION,u.info.officialPosition),d.setProperty(t.ActorPropertyModel.AP_PICKUPPET,u.info.apPickuppet),d.setProperty(t.ActorPropertyModel.PROP_ACTOR_CURCUSTOMTITLE,u.info.propActorCurcustomtitle),this._makeDummyCharList[h]||this._makeDummyCharList.push(t.ObjectPool.pop("app.CharMakeDummy")),this._makeDummyCharList[h].initInfo(d.getACTOR_ID(),d.getName(),d),this._makeDummyCharList[h].initialize(),this._makeDummyCharList[h].updateXY(c,g),this._makeDummyCharList[h].updateNameText(this.getMakeDummyName()),this._makeDummyCharList[h].setIsVisible(!0)}else this._makeDummyCharList[h]&&this._makeDummyCharList[h].setIsVisible(!1);return void(this._isShowMakeDummy=!0)}}}if(this._isShowMakeDummy||e){for(var h=0;h<this._makeDummyCharList.length;h++)this._makeDummyCharList[h].setIsVisible(!1);this._isShowMakeDummy=!1}},i.prototype.getMakeDummyName=function(){var e=t.GlobalConfig.DummyNameConfig[1].name,i=t.GlobalConfig.DummyNameConfig[2].name;return e[t.MathUtils.limitInteger(0,e.length-1)]+i[t.MathUtils.limitInteger(0,i.length-1)]},i}(t.BaseClass);t.EntityMgr=e,__reflect(e.prototype,"app.EntityMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.initInfo=function(e,i,n,s){if(this.x=t.GameMap.grip2Point(i),this.y=t.GameMap.grip2Point(n),this.recog=e,this.movieClip)this.movieClip.playFile(ResDirEnum.RES_DIR_SKILL+"hq_c0",-1,null,!1);else{this.effAry=[];for(var a=0;1>a;a++)this.movieClip=t.ObjectPool.pop("app.MovieClip"),this.addChild(this.movieClip),this.movieClip.playFile(ResDirEnum.RES_DIR_SKILL+"hq_c0",-1,null,!1)}this.movieClip.blendMode=egret.BlendMode.ADD},i.prototype.destroy=function(){this.movieClip.destroy(),this.movieClip=null,t.DisplayUtils.removeFromParent(this),t.ObjectPool.push(this)},i}(eui.Group);t.FireWall=e,__reflect(e.prototype,"app.FireWall")}(app||(app={}));var JobConst;!function(t){t[t.None=0]="None",t[t.ZhanShi=1]="ZhanShi",t[t.FaShi=2]="FaShi",t[t.DaoShi=3]="DaoShi"}(JobConst||(JobConst={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.dir=4,i._hpBar.visible=!1,t.DisplayUtils.removeFromParent(i._hpBar),i}return __extends(i,e),i.prototype.loadFile=function(e,i,n){if(i&&!(t.CharEffect.ACTION_ODER[n]&&t.CharEffect.ACTION_ODER[n].indexOf(this._state)<0)){var s=this.getResDir(n),a=i+"_"+s+this._state;e.newFrameRate=0,(this._state!=t.EntityAction.STAND||n!=CharMcOrder.BODYEFF&&n!=CharMcOrder.WEAPONEFF)&&(this._state==t.EntityAction.HIT?e.newFrameRate=10:this._state==t.EntityAction.STAND?e.newFrameRate=3:e.newFrameRate=8),e.m_gather=n==CharMcOrder.HAIR||n==CharMcOrder.WEAPONEFF||n==CharMcOrder.WEAPON||n==CharMcOrder.BODY||n==CharMcOrder.BODYEFF;var r=this.propSet.getSuit();if(r){if(this._body.y=3,n==CharMcOrder.HAIR)return;e.playFileChar8(a,this.playCount(),e==this._body?this.playComplete:null,!1)}else this._body.y=0,e.playFileChar(a,this.playCount(),e==this._body?this.playComplete:null,!1)}},i.prototype.setWeaponFileName=function(t){t?this.addMc(CharMcOrder.WEAPON,ResDirEnum.RES_DIR_WEAPON+t):this.removeMc(CharMcOrder.WEAPON)},i.prototype.addSpecialMC=function(){t.DisplayUtils.removeFromParent(this._hpBar)},i.prototype.playRun=function(){this.playAction(t.EntityAction.RUN)},i.prototype.playWalk=function(){this.playAction(t.EntityAction.WALK)},i.prototype.playStand=function(){this.playAction(t.EntityAction.STAND)},i.prototype.playAttack=function(){this.playAction(t.EntityAction.ATTACK,this.playSTAND1.bind(this))},i.prototype.playSTAND1=function(){this.playAction(t.EntityAction.STAND1,this.playAttack.bind(this))},i.prototype.updateTitle=function(){},i.prototype.updateCustomisedTitle=function(){},i.prototype.updateRage=function(){},i}(t.CharRole);t.ModelCharRole=e,__reflect(e.prototype,"app.ModelCharRole")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.propObj={},t}return __extends(i,e),i.prototype.readProperty=function(e,i){if(e==t.ActorPropertyModel.NEXT_ACK_SKILLID)return this.propObj[t.ActorPropertyModel.ACK_SKILLID]=i.readUnsignedShort(),void(this.propObj[t.ActorPropertyModel.ACK_SKILLLEVEL]=i.readUnsignedShort());if(e==t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE)return this.propObj[t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE]=i.readUnsignedShort(),void(this.propObj[t.ActorPropertyModel.ACTOR_FASHION_DISPLAY]=i.readUnsignedShort());if(e==t.ActorPropertyModel.AP_WEAPON)return this.propObj[t.ActorPropertyModel.AP_WEAPON]=i.readUnsignedShort(),void(this.propObj[t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY]=i.readUnsignedShort());var n,s=this.getDataType(e);switch(s){case t.PropertySet.DT_UNSIGNED_INT:n=i.readUnsignedInt();break;case t.PropertySet.DT_FLOAT:n=i.readFloat();break;case t.PropertySet.DT_DOUBLE:n=i.readNumber();break;default:n=i.readInt()}this.propObj[e]=n},i.prototype.getValue=function(t){return this.propObj[t]},i}(t.PropertySet);t.OtherPlayerPropertySet=e,__reflect(e.prototype,"app.OtherPlayerPropertySet")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._state=t.EntityAction.STAND,i._dir=0,i._fileName="",i._nX=0,i._nY=0,i.m_dwNextActionTime=0,i.isPay=!1,i.touchEnabled=!1,i.touchChildren=!1,i._body=t.ObjectPool.pop("app.MovieClip"),i.addChild(i._body),i._Shadow=t.ViewManager.gamescene.map.getShadow(),i._Shadow.scaleX=.5,i._Shadow.scaleY=.25,i}return __extends(i,e),i.prototype.playAction=function(t){this._state!=t&&(this._state=t,this._body.clearComFun(),this.loadBody())},i.prototype.playMC=function(e){this._fileName=e,t.ViewManager.gamescene.map.addShadow(this._Shadow),this.loadBody()},i.prototype.loadBody=function(){this._body.stop(),this._body.addEventListener(egret.Event.CHANGE,this.playBody,this),this.loadFile(this._body,ResDirEnum.RES_DIR_PETEXTERIOR+this._fileName)},i.prototype.playBody=function(t){this._body.gotoAndPlay(1,-1),this.removeBodyEvent(this._body)},i.prototype.removeBodyEvent=function(t){t.removeEventListener(egret.Event.CHANGE,this.playBody,this)},i.prototype.loadFile=function(t,e){if(e){var i=this.getResDir();t.scaleX=this.dir>4?-1:1;var n=e+"_"+i+this._state;t.newFrameRate=0,t.m_gather=!0,t.playFileChar(n,-1,t==this._body?this.playComplete:null,!1)}},i.prototype.setXY_Dir=function(e,i,n,s){this.dir=n,(this._nX!=e||this._nY!=i)&&(this._nX=e,this._nY=i,this.playAction(t.EntityAction.WALK),this.moveTo(e,i,s))},Object.defineProperty(i.prototype,"dir",{get:function(){return this._dir
},set:function(e){e%=8,this._dir!=e&&this._state!=t.EntityAction.DIE&&(this._dir=e,this.loadBody())},enumerable:!0,configurable:!0}),i.prototype.getResDir=function(){return 5==this.dir?3:6==this.dir?2:7==this.dir?1:this.dir},i.prototype.destruct=function(){this.pickUpMc&&(this.pickUpMc.stop(),this.pickUpMc.destroy(),this.pickUpMc=null),this._chatTxt&&(t.TimerManager.ins().removeAll(this._chatTxt),t.DisplayUtils.removeFromParent(this._chatTxt),this._chatTxt=null),this.isPay=!1,this.x=-300,this.y=-300,t.DisplayUtils.removeFromParent(this._Shadow),this._state=t.EntityAction.STAND,this._body.dispose(),this.removeBodyEvent(this._body),t.DisplayUtils.removeFromParent(this),t.ObjectPool.push(this)},i.prototype.moveTo=function(e,i,n){this.m_dwNextActionTime=n,this.m_dwMoveStartTick=this.m_nCurrentActionTime;var s={x:t.GameMap.grip2Point(e),y:t.GameMap.grip2Point(i)},a={x:s.x-this.x,y:s.y-this.y},r=t.StandardActionsTime.SAM_WALK_TIME;a.x=a.x/r,a.y=a.y/r,this.moveObjDic={endPoint:s,vec:a,time:this.m_nCurrentActionTime+0}},i.prototype.advanceTime=function(e){if(this.m_nCurrentActionTime=e,this.moveObjDic)if(e>=this.m_dwNextActionTime)this.x=this.moveObjDic.endPoint.x,this.y=this.moveObjDic.endPoint.y,this.moveObjDic=null,this.playAction(t.EntityAction.STAND);else{var i=e-this.moveObjDic.time,n=this.moveObjDic.vec.x*i,s=this.moveObjDic.vec.y*i;this.moveObjDic.time=e,this.x+=n,this.y+=s}this._Shadow.x=this.x,this._Shadow.y=this.y},i.prototype.payPickUpMc=function(){if(this.pickUpMc||(this.pickUpMc=t.ObjectPool.pop("app.MovieClip"),this.addChild(this.pickUpMc)),!this.isPay){var e=this;this.isPay=!0,this.pickUpMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_cwjdx2",1,function(){e.pickUpMc.dispose(),e.isPay=!1})}},i.prototype.dialogueLabel=function(){var e=this;this._chatTxt||(this._chatTxt=new eui.Label,this._chatTxt.textAlign=egret.HorizontalAlign.CENTER,this._chatTxt.width=240,this._chatTxt.anchorOffsetX=120,this._chatTxt.size=14,this._chatTxt.stroke=1,this._chatTxt.strokeColor=0,this._chatTxt.textColor=15856626,this._chatTxt.touchEnabled=!1,this.addChild(this._chatTxt)),t.TimerManager.ins().removeAll(this._chatTxt),this._chatTxt.visible=!0,this._chatTxt.text="组队中无法自动拾取",this._chatTxt.y=-102-this._chatTxt.height,t.TimerManager.ins().doTimerDelay(5e3,0,1,function(){e._chatTxt&&(e._chatTxt.visible=!1)},this)},i}(eui.Group);t.PickUpPet=e,__reflect(e.prototype,"app.PickUpPet")}(app||(app={}));var app;!function(t){var e;!function(t){t[t.YY=10001]="YY",t[t.ShengQu=10002]="ShengQu",t[t.HongHu=10003]="HongHu",t[t.PF4366=10004]="PF4366",t[t.GameApp=10005]="GameApp",t[t.QQGame=10006]="QQGame",t[t.F1=10007]="F1",t[t.comi17=10008]="comi17",t[t.gameCat=10010]="gameCat",t[t.huoWu=10011]="huoWu",t[t.QuickBT=10012]="QuickBT",t[t.suHai=10013]="suHai",t[t.PF360=10014]="PF360",t[t.PF4399=10015]="PF4399",t[t.PF7game=10016]="PF7game",t[t.PFLuDaShi=10017]="PFLuDaShi",t[t.PFAQIYI=10018]="PFAQIYI",t[t.PFQIDIAN=10019]="PFQIDIAN",t[t.PFYAODOU=10020]="PFYAODOU",t[t.HUYU37=10021]="HUYU37",t[t.PFKu25=10022]="PFKu25",t[t.SOUGOU=10023]="SOUGOU",t[t.gameCatEnd=10024]="gameCatEnd",t[t.Potato=10025]="Potato",t[t.FeiHuo=10026]="FeiHuo",t[t.TanWan=10027]="TanWan",t[t.GeMen=10028]="GeMen",t[t.PotatoBXSC=10029]="PotatoBXSC",t[t.PF45yx=10030]="PF45yx",t[t.PF355wan=10031]="PF355wan",t[t.PF360uu=10032]="PF360uu",t[t.PF2144Game=10033]="PF2144Game",t[t.teeqee=10034]="teeqee",t[t.xiaoqi=10035]="xiaoqi",t[t.shunwang=10036]="shunwang",t[t.xunwan=10037]="xunwan",t[t.BaYe=10038]="BaYe",t[t.xiuLuoBaYe=10039]="xiuLuoBaYe",t[t.chinaGame=10040]="chinaGame",t[t.shengMa=10041]="shengMa",t[t.keleyx=10042]="keleyx",t[t.wan2323=10043]="wan2323",t[t.bvwan=10044]="bvwan",t[t.GameNo1=10045]="GameNo1",t[t.HuoYan=10046]="HuoYan",t[t.PF37tang=10047]="PF37tang",t[t.heheyx=10048]="heheyx",t[t.PF52gg=10049]="PF52gg",t[t.PF1771wan=10050]="PF1771wan",t[t.wuxiagu=10051]="wuxiagu",t[t.zixia=10052]="zixia",t[t.ShuangHuo=10053]="ShuangHuo",t[t.MaYi=10054]="MaYi",t[t.gameCatGaoBao=10055]="gameCatGaoBao"}(e=t.PlatFormID||(t.PlatFormID={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skillsData={},t._lockTarget=0,t.lockSkillId=0,t.sutomaticAckCD=500,t.satime=0,t._ishomingMove=1,t.moveCD=5e3,t.hitRecog=0,t.petCharObj={},t.AckX=0,t.AckY=0,t.mouseXY={x:0,y:0},t._nNextAction=0,t._aStarPatch=[],t.ackHashCode=0,t.dropPackId=0,t._xy={x:0,y:0},t.protectCDTime=-5e3,t.protectCDTime2=-5e3,t.hpTime=0,t.hpMaxTime=0,t.mpTime=0,t.mpMaxTime=0,t.hpNewTime=0,t.slowTimePercentage=-3e3,t.fastTimePercentage=-1e3,t.daoShiSkillAry=[30,22,33,24],t.zhiYuCDTime=-3e3,t._taskInfo={},t._isLockTurn=!1,t._lockCell={x:-1,y:-1},t._pathXY={x:0,y:0},t.maxLv=0,t.maxOpen=0,t.randomT=0,t.cdTime=0,t.petDialogueTime=0,t.logXy={x:0,y:0},t.logTime=0,t}return __extends(i,e),Object.defineProperty(i.prototype,"lockTarget",{get:function(){return this._lockTarget},set:function(t){this._lockTarget=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ishomingMove",{get:function(){return this._ishomingMove},set:function(t){this._ishomingMove=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"m_nNextAction",{get:function(){return this._nNextAction},set:function(t){this._nNextAction=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"aStarPatch",{get:function(){return this._aStarPatch},set:function(e){this._aStarPatch=e,t.DefaultMgr.ins().postUpdateMapStarPatch()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLockTurn",{get:function(){return this._isLockTurn},set:function(e){this._isLockTurn=e,!e||this.m_nNextAction!=t.StandardActions.SAM_WALK&&this.m_nNextAction!=t.StandardActions.SAM_RUN||(this._lockCell.x=this.currentX,this._lockCell.y=this.currentY)},enumerable:!0,configurable:!0}),i.prototype.clearLockCell=function(){this._lockCell.x=this._lockCell.y=-1},Object.defineProperty(i.prototype,"lockCell",{get:function(){return this._lockCell},enumerable:!0,configurable:!0}),i.prototype.setTask=function(e,i,n,s,a,r,o){void 0===s&&(s=-1),void 0===a&&(a=-1),void 0===r&&(r=0),void 0===o&&(o=-1),(this._taskInfo.sceneid!=e||this._taskInfo.posx!=i||this._taskInfo.posy!=n)&&(t.PlayerRoleAI.ins().stopAI(),t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122)),this.stopTask(),this.stopFinding(),this._taskInfo.sceneid=e,this._taskInfo.posx=i,this._taskInfo.posy=n,this._taskInfo.taskid=s,this._taskInfo.taskstate=a,this._taskInfo.isstartAi=r,this._taskInfo.npcID=o)},Object.defineProperty(i.prototype,"pathXY",{get:function(){return this._pathXY},enumerable:!0,configurable:!0}),i.prototype.pathFinding=function(e,i){t.GameMap.checkWalkable(e,i)&&(t.PlayerRoleAI.ins().stopAI(),t.MapView.m_ack_Char=null,this.aStarPatch.length=0,t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122)),this.stopTask(),this._pathXY.x=e,this._pathXY.y=i,t.PlayerRoleAI.ins().isFinding=!0,t.DefaultMgr.ins().post_setTarget({x:e,y:i}))},i.prototype.stopFinding=function(){this._pathXY.x=this._pathXY.y=0,t.PlayerRoleAI.ins().isFinding=!1,t.DefaultMgr.ins().post_setTarget(null)},i.prototype.isDothetask=function(){return this._taskInfo.sceneid},i.prototype.isMiniMapPath=function(){return this._pathXY.x||this._pathXY.y},i.prototype.ifFindTask=function(e,i,n){var s={};if(s.posx=i,s.posy=n,e&&e!=t.GameMap.mapID){if(!s.tposx)for(var a=t.GameMap.scenes,r=0;r<a.teleport.length;r++)if(a.teleport[r].toSceneid==this._taskInfo.sceneid){s.tposx=a.teleport[r].posx,s.tposy=a.teleport[r].posy;break}return s.tposx?{type:2,x:s.tposx,y:s.tposy}:(this.stopTask(),{type:2,x:-1,y:-1})}return{type:2,x:s.posx,y:s.posy}},i.prototype.getTaskPos=function(){if(this._taskInfo.sceneid&&this._taskInfo.sceneid!=t.GameMap.mapID){if(!this._taskInfo.tposx)for(var e=t.GameMap.scenes,i=0;i<e.teleport.length;i++)if(e.teleport[i].toSceneid==this._taskInfo.sceneid){this._taskInfo.tposx=e.teleport[i].posx,this._taskInfo.tposy=e.teleport[i].posy;break}return this._taskInfo.tposx?{type:2,x:this._taskInfo.tposx,y:this._taskInfo.tposy}:(this.stopTask(),{type:2,x:-1,y:-1})}return{type:2,x:this._taskInfo.posx,y:this._taskInfo.posy}},i.prototype.stopTask=function(){t.PlayerRoleAI.ins().isFinding=!1,this.aStarPatch.length=0,this._taskInfo.sceneid&&t.ObjectPool.wipe(this._taskInfo)},i.prototype.isCheckTeleport=function(){return this._taskInfo.sceneid&&this._taskInfo.sceneid!=t.GameMap.mapID?!1:!0},i.prototype.playAction=function(i,n){e.prototype.playAction.call(this,i,n),t.DefaultMgr.ins().postUpdateState(this._state,this.dir)},Object.defineProperty(i.prototype,"isMy",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.changeRoleProperty=function(t){this.changePropertys(t)},i.prototype.initInfo=function(i,n,s){t.ObjectPool.wipe(this.skillsData),t.ObjectPool.wipe(this.petCharObj),t.ObjectPool.wipe(this._taskInfo),this.clearLockCell(),this._lockTarget=0,this.lockSkillId=0,this.ishomingMove=1,this.hitRecog=0,this.m_nNextAction=0,this.hpTime=0,this.hpMaxTime=0,this.mpTime=0,this.mpMaxTime=0,this.hpNewTime=0,this.slowTimePercentage=-3e3,this.fastTimePercentage=-1e3,this.zhiYuCDTime=-3e3,this.protectCDTime=-5e3,this.protectCDTime2=-5e3,this._hpBar.thumb.source="boolGreen",e.prototype.initInfo.call(this,i,n,s),this.stopFinding(),this.stopTask(),t.MainTaskMgr.ins().delTaskInfo(),t.PlayerRoleAI.ins().isFinding=!1},i.prototype.$onAddToStage=function(i,n){e.prototype.$onAddToStage.call(this,i,n),t.TimerManager.ins().isExists(this.updateTime1000,this)||t.TimerManager.ins().doTimer(1e3,0,this.updateTime1000,this),t.TimerManager.ins().isExists(this.doTimer300,this)||t.TimerManager.ins().doTimer(300,0,this.doTimer300,this);var s=Object.keys(t.GlobalConfig.talklevelConfig).length,a=t.GlobalConfig.talklevelConfig[s];a&&(this.maxLv=a.maxlevel,this.maxOpen=a.maxopenday),t.TimerManager.ins().isExists(this.delayIntervalShow,this)||t.TimerManager.ins().doTimer(1e3,0,this.delayIntervalShow,this)},i.prototype.delayIntervalShow=function(){var e=this.propSet.getLevel(),i=t.GlobalData.sectionOpenDay;if(e>this.maxLv||i>this.maxOpen)return void t.TimerManager.ins().remove(this.delayIntervalShow,this);if(egret.getTimer()>this.cdTime&&this.findMonster()){var n=t.GlobalConfig.TimeManagerConfigConfig.Monstertalkmintime,s=t.GlobalConfig.TimeManagerConfigConfig.Monstertalkmaxtime;this.randomT=t.MathUtils.limitInteger(1e3*n,1e3*s),this.cdTime=egret.getTimer()+this.randomT}},i.prototype.findMonster=function(){var e,i,n,s=(Number.MAX_VALUE,[]),a=t.EntityMgr.ins().getAllEntity();t.StageUtils.ins().getWidth(),t.StageUtils.ins().getHeight();for(var r in a)e=a[r],n=e.localToGlobal(),e.propSet.getRace()==t.ActorRace.Monster&&(i=t.GlobalConfig.Monster[e.propSet.getACTOR_ID()],i&&i.monsterType<3&&!e.deadChar&&1==i.entityType&&!i.isAIAck&&Math.abs(this.currentX-e.currentX)<=7&&Math.abs(this.currentY-e.currentY)<=4&&s.push(e));if(s.length>0){var o=t.MathUtils.limitInteger(1,s.length)-1,l=s[o],h=t.GlobalConfig.talklevelConfig,p=this.propSet.getLevel(),u=t.GlobalData.sectionOpenDay,c=void 0;for(var g in h){var d=h[g];if(p>d.minlevel&&p<=d.maxlevel&&u>=d.minopenday&&u<=d.maxopenday){c=d.level;break}}var m=t.GlobalConfig["monstertalk"+c+"Config"];if(!m)return!1;var f=Object.keys(m).length,v=t.MathUtils.limitInteger(1,f),_=void 0;return m[v]&&(_=m[v].txt),t.ViewManager.ins().isShow(t.MonsterTalkView)?t.ViewManager.ins().close(t.MonsterTalkView):t.ViewManager.gamescene.map.showTalkView(_,l.x,l.y),!0}return!1},i.prototype.addPet=function(t){this.petCharObj[t]=1},i.prototype.remPet=function(t){delete this.petCharObj[t]},i.prototype.getPetSum=function(){return Object.keys(this.petCharObj).length},i.prototype.advanceTime=function(i){e.prototype.advanceTime.call(this,i),gamelib.DeviceUtils.IsMobile&&t.MapView.isClickMap&&t.MapView.mouseUpFunction()},i.prototype.updateTime=function(e){if(this.propSet){if(this.pickUpPet){var i=t.TeamMgr.ins().myTeamList;i.length&&e-this.petDialogueTime>2e4&&(this.petDialogueTime=e,this.pickUpPet.dialogueLabel())}if(this.m_CharMsgList.length){var n=this.m_CharMsgList.shift();this.dispatchActorMsg(n),t.ObjectPool.push(n),n=null}if(this.isDead)return;if(t.ViewManager.gamescene.map.lookAt(this.x,this.y),egret.getTimer()<this.ishomingMove)return;if(this.createNextActionTime(),e>=this.m_dwNextActionTime){if(t.MapView.overXY.x?(this.mouseXY.x=t.MapView.overXY.x,this.mouseXY.y=t.MapView.overXY.y):(this.mouseXY.x=t.MapView.overXY.x=this.x,this.mouseXY.y=t.MapView.overXY.y=this.y),this.m_ActionMsgList.length){var s=this.m_ActionMsgList.shift();return void this.setHumanAction(s)}if(!this.isHard()){if(t.MapView.m_clickSkillId>0){var a=this.getUserSkill(t.MapView.m_clickSkillId);if(a&&egret.getTimer()>=a.dwResumeTick){var r=void 0,o=this.dir+0,l=t.GlobalConfig.SkillsLevelConf[a.nSkillId][a.nLevel];if(!t.PlayerRoleAI.ins().isOpen||a.nSkillId!=t.SkillMgr.SKILL_SSZJ&&a.nSkillId!=t.SkillMgr.SKILL_ZY)if(t.PlayerRoleAI.ins().isOpen&&t.MapView.m_ack_Char)o=t.DirUtil.get8DirBy2Point(this,t.MapView.m_ack_Char),r={skill:l,skillId:a.nSkillId,actorRecog:t.MapView.m_ack_Char.recog,targetX:t.MapView.m_ack_Char.currentX,targetY:t.MapView.m_ack_Char.currentY,dir:o};else if(t.PlayerRoleAI.ins().attackState&&t.MapView.m_ack_Char)o=t.DirUtil.get8DirBy2Point(this,t.MapView.m_ack_Char),r={skill:l,skillId:a.nSkillId,actorRecog:t.MapView.m_ack_Char.recog,targetX:t.MapView.m_ack_Char.currentX,targetY:t.MapView.m_ack_Char.currentY,dir:o};else{var h=0;if(gamelib.DeviceUtils.IsMobile){h=this.lockTarget;var p=t.EntityMgr.ins().getCharRole(h);if(p)o=t.DirUtil.get8DirBy2Point(this,p),p=null;else{var u=t.EntityMgr.ins().getDummyChar(h);u&&(o=t.DirUtil.get8DirBy2Point(this,u),this.mouseXY.x=u.x,this.mouseXY.y=u.y,u=null,h=0)}}else t.MapView.m_Move_Char&&(h=t.MapView.m_Move_Char.recog);if(t.MapView.ackXy&&(this.mouseXY.x=t.MapView.ackXy.x,this.mouseXY.y=t.MapView.ackXy.y,t.MapView.ackXy=null),gamelib.DeviceUtils.IsMobile){if(a.nSkillId==t.SkillMgr.SKILL_HUOQIANG)if(t.MapView.m_ack_Char)this.mouseXY.x=t.MapView.m_ack_Char.x,this.mouseXY.y=t.MapView.m_ack_Char.y;else{var p=t.EntityMgr.ins().getCharRole(this._lockTarget);if(p)this.mouseXY.x=p.x,this.mouseXY.y=p.y;else{var u=t.EntityMgr.ins().getDummyChar(this._lockTarget);u?(o=t.DirUtil.get8DirBy2Point(this,u),this.mouseXY.x=u.x,this.mouseXY.y=u.y,u=null,h=0):(this.mouseXY.x=this.x,this.mouseXY.y=this.y)}}}else{var u=t.EntityMgr.ins().getDummyChar(this._lockTarget);u&&(o=t.DirUtil.get8DirBy2Point(this,u),this.mouseXY.x=u.x,this.mouseXY.y=u.y,u=null,h=0)}t.MapView.m_clickSkillId!=t.SkillMgr.SKILL_YMCZ&&(gamelib.DeviceUtils.IsMobile?t.MapView.m_ack_Char&&(o=t.DirUtil.get8DirBy2Point(this,t.MapView.m_ack_Char)):o=t.DirUtil.get8DirBy2Point(this,this.mouseXY)),r={skill:l,skillId:t.MapView.m_clickSkillId,actorRecog:h,targetX:t.GameMap.point2Grip(this.mouseXY.x),targetY:t.GameMap.point2Grip(this.mouseXY.y),dir:o}}else r={skill:l,skillId:a.nSkillId,actorRecog:0,targetX:this.currentX,targetY:this.currentY,dir:this.dir};var c=t.GlobalConfig.SkillConf[a.nSkillId];if(c.action)return this.skillAck(r),t.MapView.m_clickSkillId=0,void(a=null);t.MapView.m_clickSkillId=0;var g=this.propSet.getAP_JOB();t.SkillMgr.ins().s_5_2(r.skillId,r.actorRecog,r.targetX,r.targetY,r.dir,g),l=null,r=null}a=null}if(t.MapView.m_keyCode>0){var d=t.SettingMgr.ins().keyInfo[t.MapView.KEYS.indexOf(t.MapView.m_keyCode)];if(d&&d.type){var a=this.getUserSkill(d.id);if(a&&egret.getTimer()>a.dwResumeTick){var h=0;t.MapView.m_Move_Char&&t.MapView.m_Move_Char.propSet.getRace()!=t.ActorRace.Human&&(h=t.MapView.m_Move_Char.recog);var o=this.dir+0;a.nSkillId!=t.SkillMgr.SKILL_YMCZ&&(o=t.DirUtil.get8DirBy2Point(this,this.mouseXY));var l=t.GlobalConfig.SkillsLevelConf[a.nSkillId][a.nLevel];return void this.skillAck({skill:l,skillId:a.nSkillId,actorRecog:h,targetX:t.GameMap.point2Grip(this.mouseXY.x),targetY:t.GameMap.point2Grip(this.mouseXY.y),dir:o})}}}if(t.PlayerRoleAI.ins().isOpen){if(this.isSutomaticAck(1))return}else if(this.isSutomaticAck(1))return;if(t.MapView.m_isClickShift){var p=t.EntityMgr.ins().getCharRole(this._lockTarget);if(p&&!p.deadChar&&t.MapView.m_Move_Char&&t.MapView.m_Move_Char.recog!=p.recog&&(this._lockTarget=t.MapView.m_Move_Char.recog,t.SkillMgr.ins().postUpdateLock(this._lockTarget,this.lockSkillId)),p=t.EntityMgr.ins().getCharRole(this._lockTarget),p&&!p.deadChar)t.MapView.m_forceAck_Recog=p.recog;else{var m=!0,f=0,o=t.DirUtil.get8DirBy2Point(this,this.mouseXY);if(t.MapView.m_Move_Char)m=!1,f=t.MapView.m_Move_Char.recog;else{var v=t.GameMap.getPosRangeByDir(this.currentX,this.currentY,o,1);f=t.EntityMgr.ins().getGridChar(v[0],v[1])}if(!f)return void this.rawSetNextAction(t.StandardActions.SAM_NORMHIT,{recog:f,Dir:o,TargetX:this.currentX,TargetY:this.currentY,prohibitLock:!0});if(p=t.EntityMgr.ins().getCharRole(f),!p||p.deadChar)return void this.rawSetNextAction(t.StandardActions.SAM_NORMHIT,{recog:f,Dir:o,TargetX:this.currentX,TargetY:this.currentY,prohibitLock:!0});if(this._lockTarget=f,t.SkillMgr.ins().postUpdateLock(this._lockTarget,this.lockSkillId),t.GameMap.getAround8({X:this.currentX,Y:this.currentY},{X:p.currentX,Y:p.currentY}))return void this.rawSetNextAction(t.StandardActions.SAM_NORMHIT,{recog:f,Dir:o,TargetX:this.currentX,TargetY:this.currentY,prohibitLock:m});t.MapView.m_forceAck_Recog=f}}else{if(t.MapView.m_playerActon==t.PlayerAction.PICKUP){if(this.isFixed())return;return t.MapView.m_playerActon=t.PlayerAction.IDLE,void this.pickUpFunction()}if(t.MapView.m_playerActon==t.PlayerAction.WALK){if(this.isFixed())return;if(this.clearStarPatch(),t.MapView.m_ack_Char=null,!t.MapView.m_isClickShift){var f=t.EntityMgr.ins().getGridChar(t.MapView.m_moveX,t.MapView.m_moveY);if(f){var _=t.EntityMgr.ins().getCharRole(f);if(_&&_.isCharRole)return void this.setToIdleAction()}}var y=this.nextMouseMoveEntity(t.StandardActions.SA_WALK);if(y)return void this.rawSetNextAction(t.StandardActions.SAM_WALK,{Dir:y.btDir,X:this.currentX,Y:this.currentY,TargetX:y.X,TargetY:y.Y});t.MapView.moveDir!=this.dir&&(debug.log("转向"),this.setToIdleAction(),this.rawSetNextAction(t.StandardActions.SAM_IDLE,{Dir:t.MapView.moveDir,X:this.currentX,Y:this.currentY}))}else if(t.MapView.m_playerActon==t.PlayerAction.TURN){if(this.isFixed())return;this.clearStarPatch();var y=this.nextMouseMoveEntity(t.StandardActions.SA_RUN);if(y)return void(y.step==t.StandardActions.SA_RUN?this.rawSetNextAction(t.StandardActions.SAM_RUN,{Dir:y.btDir,X:this.currentX,Y:this.currentY,TargetX:y.X,TargetY:y.Y}):this.rawSetNextAction(t.StandardActions.SAM_WALK,{Dir:y.btDir,X:this.currentX,Y:this.currentY,TargetX:y.X,TargetY:y.Y}));t.MapView.moveDir!=this.dir&&(debug.log("转向"),this.setToIdleAction(),this.rawSetNextAction(t.StandardActions.SAM_IDLE,{Dir:t.MapView.moveDir,X:this.currentX,Y:this.currentY}))}else if(t.MapView.m_playerActon==t.PlayerAction.DIR)return this.setToIdleAction(),void(t.MapView.moveDir!=this.dir&&(debug.log("转向"),this.setToIdleAction(),this.rawSetNextAction(t.StandardActions.SAM_IDLE,{Dir:t.MapView.moveDir,X:this.currentX,Y:this.currentY})))}var T=!1;if(t.MapView.m_forceAck_Recog){var p=t.EntityMgr.ins().getCharRole(t.MapView.m_forceAck_Recog);if(p&&!p.deadChar&&(T=this.searchTagret(p,1)))return}if(T=this.isDothetask()){var M=this.getTaskPos();if(T=this.searchTagret(M))return void(t.PlayerRoleAI.ins().isFinding=!0);t.PlayerRoleAI.ins().isFinding=!1}if(T=this.searchTagret(t.MapView.m_ack_Char))return;if(t.PlayerRoleAI.ins().isOpen&&!t.MapView.m_ack_Char){if(t.PlayerRoleAI.ins().dropRecog&&this.searchTagret(t.EntityMgr.ins().getDropItem(t.PlayerRoleAI.ins().dropRecog)))return;if(-1!=t.PlayerRoleAI.ins().destinationXY.x&&-1!=t.PlayerRoleAI.ins().destinationXY.y&&this.searchTagret(t.PlayerRoleAI.ins().destinationXY))return}if(this._pathXY.x||this._pathXY.y){if(T=this.searchTagret(this._pathXY,3))return;this._pathXY.x==this.currentX&&this._pathXY.y==this.currentY&&this.stopFinding()}}this.setToIdleAction()}}},i.prototype.getNextAstarPatchNode=function(){var e=t.ObjectPool.pop("app.ActionInfo");if(this.aStarPatch&&this.aStarPatch.length>0){var i=this.aStarPatch[this.aStarPatch.length-1],n=t.EntityMgr.ins().checkWalkable(i.X,i.Y);if(n)return e.read(!1,n,i.btDir,i.X,i.Y),e;if(i=this.aStarPatch.pop(),this.aStarPatch.length){var s=this.aStarPatch[this.aStarPatch.length-1];if(!this.isLockTurn&&i.btDir==s.btDir&&!t.EntityMgr.ins().checkWalkable(s.X,s.Y))return s=this.aStarPatch.pop(),e.read(!0,0,i.btDir,s.X,s.Y,t.StandardActions.SAM_RUN),e}return this.isLockTurn=!1,e.read(!0,0,i.btDir,i.X,i.Y,t.StandardActions.SAM_WALK),e}return e},i.prototype.pursuitTarget=function(e){if(e&&t.MapView.m_playerActon!=t.PlayerAction.TURN&&(!this.aStarPatch.length||this.AckX!=e.currentX||this.AckY!=e.currentY||this.ackHashCode!=e.hashCode)){if(this.ackHashCode=+e.hashCode+0,this.AckX=e.currentX+0,this.AckY=e.currentY+0,t.PlayerRoleAI.ins().attackState){var i=t.GameMap.attackAStarPatch(this.currentX,this.currentY,e.currentX,e.currentY);if(!i)return}this.aStarPatch=t.GameMap.getAStarPatch(this.currentX,this.currentY,e.currentX,e.currentY),this.aStarPatch.length>0?this.aStarPatch.pop():(t.MapView.ClearChar(e.recog),t.PlayerRoleAI.ins().createDestinationXY(),t.PlayerRoleAI.ins().isOpen&&(t.PlayerRoleAI.ins().addBlackRecog(e.recog),t.PlayerRoleAI.ins().addBlackRecog(t.PlayerRoleAI.ins().dropRecog))),this.aStarPatch.length>0&&this.aStarPatch.shift()}},i.prototype.dropTarget=function(e){e?this.aStarPatch.length&&this.dropPackId==e.packId||(this.dropPackId=e.packId,this.aStarPatch=t.GameMap.getAStarPatch(this.currentX,this.currentY,e.nX,e.nY),this.aStarPatch.length>0?this.aStarPatch.pop():(t.PlayerRoleAI.ins().addBlackRecog(t.PlayerRoleAI.ins().dropRecog),t.PlayerRoleAI.ins().dropRecog=0,this.dropPackId=0,t.PlayerRoleAI.ins().createDestinationXY())):this.dropPackId=0},i.prototype.trackTarget=function(e){e&&(this.aStarPatch.length&&this._xy.x==e.x&&this._xy.y==e.y||(this._xy.x=e.x,this._xy.y=e.y,this.aStarPatch=t.GameMap.getAStarPatch(this.currentX,this.currentY,e.x,e.y),this.aStarPatch.length>0?this.aStarPatch.pop():(t.PlayerRoleAI.ins().dropRecog=0,this.dropPackId=0,t.PlayerRoleAI.ins().createDestinationXY())))},i.prototype.teleport=function(e){if(e&&(!this.aStarPatch.length||this._xy.x!=e.x||this._xy.y!=e.y)&&(this._xy.x=e.x,this._xy.y=e.y,this.aStarPatch=t.GameMap.getAStarPatch(this.currentX,this.currentY,e.x,e.y),this.aStarPatch.length>0&&this.aStarPatch.pop(),this._taskInfo.sceneid&&this._taskInfo.sceneid==t.GameMap.mapID&&this.aStarPatch.length>0&&this.aStarPatch.shift(),0==this.aStarPatch.length&&this._taskInfo.sceneid&&this._taskInfo.sceneid==t.GameMap.mapID)){var i=this.getTaskPos(),n=t.MathUtils.getDistanceByObject({x:this.x,y:this.y},{x:i.x*t.GameMap.CELL_SIZE,y:i.y*t.GameMap.CELL_SIZE});220>n&&(-1!=this._taskInfo.npcID&&this.isOpenNpcView(this._taskInfo.npcID),-1!=this._taskInfo.taskid&&-1!=this._taskInfo.taskstate&&(t.ViewManager.ins().isShow(t.TaskInfoWin)||t.ViewManager.ins().open(t.TaskInfoWin,this._taskInfo.taskid,this._taskInfo.taskstate)),1==this._taskInfo.isstartAi&&(t.PlayerRoleAI.ins().startAI(),egret.getTimer()>t.MainTaskMgr.ins().clickTime&&t.MainTaskMgr.ins().post_taskAiStart()),this.stopTask())}},i.prototype.protectSkill=function(){var e=egret.getTimer();if(!(this.propSet.getHp()>=this.propSet.getMaxHp())){if(this.getWeaponnSoulBuff())return null;if(this.propSet.getHp()>0&&!t.GameMap.getIsSafe&&e-this.protectCDTime>5e3&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1State)&&this.propSet.getHp()<t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1Val)){var i=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1Item);if(i){var n=t.EntityMgr.ins().getPayer.getUserSkill(i);if(n&&!n.isDisable&&egret.getTimer()>n.dwResumeTick){t.MapView.m_AiSkillId=n.nSkillId;var s=t.GlobalConfig.SkillConf[n.nSkillId];return t.UserTips.ins().showFightTips(t.StringUtils.replace(t.LanguageUtils.language_SetUp_Text50,s.name)),this.protectCDTime=e,n}}}if(this.propSet.getHp()>0&&!t.GameMap.getIsSafe&&e-this.protectCDTime2>5e3&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2State)&&this.propSet.getHp()<t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2Val)){var a=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2Item);if(a){var n=t.EntityMgr.ins().getPayer.getUserSkill(a);if(n&&n&&!n.isDisable&&egret.getTimer()>n.dwResumeTick){t.MapView.m_AiSkillId=n.nSkillId,this.protectCDTime2=e;var s=t.GlobalConfig.SkillConf[n.nSkillId];return t.UserTips.ins().showFightTips(t.StringUtils.replace(t.LanguageUtils.language_SetUp_Text50,s.name)),n}}}return null}},i.prototype.isSutomaticAck=function(e){if(void 0===e&&(e=0),this.propSet.getHp()>0&&egret.getTimer()-this.satime>this.sutomaticAckCD){this.satime=egret.getTimer();var i=this.protectSkill();if(i)return i;var n=this.propSet.getAP_JOB();if(JobConst.ZhanShi==n){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Skill1)){var s=t.EntityMgr.ins().getPayer.getUserSkill(t.SkillMgr.SKILL_LH);s&&!s.isDisable&&egret.getTimer()>s.dwResumeTick&&(this.propSet.setProperty(t.ActorPropertyModel.ACK_SKILLID,t.SkillMgr.SKILL_LH),this.propSet.setProperty(t.ActorPropertyModel.ACK_SKILLLEVEL,s.nLevel),t.MapView.m_AiSkillId=s.nSkillId)}if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Skill2)){var a=t.EntityMgr.ins().getPayer.getUserSkill(t.SkillMgr.SKILL_ZR);a&&!a.isDisable&&egret.getTimer()>a.dwResumeTick&&(this.propSet.setProperty(t.ActorPropertyModel.ACK_SKILLID,t.SkillMgr.SKILL_ZR),this.propSet.setProperty(t.ActorPropertyModel.ACK_SKILLLEVEL,a.nLevel),t.MapView.m_AiSkillId=a.nSkillId)}}else if(1==e&&JobConst.FaShi==n){if(this.propSet.getCurMp()>30&&!this.getIsEQSecure()&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Skill1)){var r=t.EntityMgr.ins().getPayer.getUserSkill(t.SkillMgr.SKILL_MFD);if(r&&!r.isDisable&&egret.getTimer()>r.dwResumeTick)return t.MapView.m_AiSkillId=r.nSkillId,r}}else if(1==e&&JobConst.DaoShi==n&&this.propSet.getCurMp()>30&&!this.getIsWarframe()&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Skill1)){var o=t.EntityMgr.ins().getPayer.getUserSkill(t.SkillMgr.SKILL_SSZJ);if(o&&!o.isDisable&&egret.getTimer()>o.dwResumeTick)return t.MapView.m_AiSkillId=o.nSkillId,o}}return null},i.prototype.createNextActionTime=function(){(this.m_nAction==t.StandardActions.SAM_UNDER_ATTACK||this.m_nAction==t.StandardActions.SAM_UNDER_RECRUIT)&&(this.m_nNextAction||t.MapView.m_playerActon!=t.PlayerAction.IDLE||t.MapView.m_ack_Char||t.MapView.m_keyCode||t.MapView.m_clickSkillId)&&(this.m_dwNextActionTime=0,this.m_HitTime=0)},i.prototype.pickUpFunction=function(){var e=t.EntityMgr.ins().getKeyDropEntity(this.currentX*t.GameMap.ROW+this.currentY);if(e){for(var i=void 0,n=!1,s=0;s<e.length;s++){var a=t.EntityMgr.ins().getDropItem(e[s]);if(a&&egret.getTimer()>=a.timeRemaining){if(65534!=a.packetId&&65535!=a.packetId){var r=t.GlobalConfig.StdItems[a.packetId];if(r&&(i=t.BagMgr.ins().getBagTypeItemNum(r.packageType)),1>i){n=!0;continue}}return void t.DropMgr.ins().s_15_9([a.packId])}return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips44)}n&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips72)}},i.prototype.doTimer300=function(){this.propSet&&(this.recoveryHpFun(),this.pickUpALLFunction())},i.prototype.pickUpALLFunction=function(){var e=[];if(!t.PlayerRoleAI.ins().isOpen||t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1)){var i;if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Items,t.SetUpEnum.SetUp_Item_All_Pick)){var n=t.EntityMgr.ins().getKeyDropEntity(this.currentX*t.GameMap.ROW+this.currentY);if(n){for(var s=0;s<n.length;s++){var a=t.EntityMgr.ins().getDropItem(n[s]);if(a&&65534!=a.packetId&&65535!=a.packetId){var r=t.GlobalConfig.StdItems[a.packetId];if(r&&(i=t.BagMgr.ins().getBagTypeItemNum(r.packageType)),1>i)continue}a&&egret.getTimer()>=a.timeRemaining?e.push(a.packId):(this.currentX!=this.lastX||this.currentY!=this.lastY)&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips44)}n=null}}else{var n=t.EntityMgr.ins().getKeyDropEntity(this.currentX*t.GameMap.ROW+this.currentY);if(n){for(var o=t.SettingMgr.ins().getDataById(65533).isSelected1,s=0;s<n.length;s++){var a=t.EntityMgr.ins().getDropItem(n[s]);if(65534!=a.packetId&&65535!=a.packetId){var r=t.GlobalConfig.StdItems[a.packetId];if(r&&(i=t.BagMgr.ins().getBagTypeItemNum(r.packageType)),1>i)continue}if(a&&egret.getTimer()>=a.timeRemaining){var l=t.SettingMgr.ins().getDataById(a.packetId);l&&(l.isSelected1||o&&a.isBest)&&e.push(a.packId)}}n=null}}t.DropMgr.ins().s_15_9(e),e=null,this.lastX=this.currentX,this.lastY=this.currentY}},i.prototype.recoveryHpFun=function(){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_Blood)){var e=egret.getTimer();this.propSet.getHp()<this.propSet.getMaxHp()&&(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_COM_Red)&&e-this.hpTime>=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_HP_TIME)&&this.propSet.getHp()<=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_HP)&&(this.getHpBuff()||(this.useItem(t.GlobalConfig.MedicineSettingConfig.itemHp),this.hpTime=e)),t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_COM_BLUE)&&e-this.hpMaxTime>=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_MP_TIME)&&this.propSet.getHp()<=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_MP)&&(this.useItem(t.GlobalConfig.MedicineSettingConfig.itemMaxHp),this.hpMaxTime=e),t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_MOMENT_RED)&&e-this.mpTime>=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_MOMENT_HP_TIME)&&this.propSet.getHp()<=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_MOMENT_HP)&&(this.useItem(t.GlobalConfig.MedicineSettingConfig.itemMp),this.mpTime=e),t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_MOMENT_BLUE)&&e-this.mpMaxTime>=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_MOMENT_MP_TIME)&&this.propSet.getHp()<=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_MOMENT_MP)&&(this.useItem(t.GlobalConfig.MedicineSettingConfig.itemMaxMp),this.mpMaxTime=e),t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_Select_LiaoShangYao)&&e-this.hpNewTime>=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_LiaoShangYaoTime)&&this.propSet.getHp()<=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_LiaoShangYaoHp)&&(this.useItem(t.GlobalConfig.MedicineSettingConfig.itemTherapy),this.hpNewTime=e))}},i.prototype.updateTime1000=function(){if(this.propSet){var e=egret.getTimer();if(t.GameMap.delayOnHook&&!t.PlayerRoleAI.ins().isOpen&&this.logXy.x==this.x&&this.logXy.y==this.y?e-this.logTime>3e3&&(this.logTime=e,t.PlayerRoleAI.ins().startAI()):(this.logTime=e,this.logXy.x=this.x,this.logXy.y=this.y),this.isDead)return;if(!t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_Blood)&&(this.propSet.getHp()<this.propSet.getMaxHp()&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_Red)>=this.propSet.getHpPercentage()&&(this.getHpBuff()||this.useItem(t.GlobalConfig.MedicineSettingConfig.itemHp)),e-this.fastTimePercentage>600)){if(this.propSet.getHp()<this.propSet.getMaxHp()&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_Blue)>=this.propSet.getHpPercentage()&&this.useItem(t.GlobalConfig.MedicineSettingConfig.itemMaxHp))return this.fastTimePercentage=e,void this.clearLockCell();
if(this.propSet.getHp()<this.propSet.getMaxHp()&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_Wink_Red)>=this.propSet.getHpPercentage()&&this.useItem(t.GlobalConfig.MedicineSettingConfig.itemMp))return this.fastTimePercentage=e,void this.clearLockCell();if(this.propSet.getHp()<this.propSet.getMaxHp()&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_Wink_Blue)>=this.propSet.getHpPercentage()&&this.useItem(t.GlobalConfig.MedicineSettingConfig.itemMaxMp))return this.fastTimePercentage=e,void this.clearLockCell();if(this.propSet.getHp()<this.propSet.getMaxHp()&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,t.SetUpEnum.SetUp_Drugs_LiaoShangYao)>=this.propSet.getHpPercentage()&&this.useItem(t.GlobalConfig.MedicineSettingConfig.itemTherapy))return this.fastTimePercentage=e,void this.clearLockCell()}}},i.prototype.useItem=function(e){if(this.propSet.getState()&t.ActorState.DEATH)return!1;for(var i,n=0;n<e.length;n++)if(i=t.BagMgr.ins().getItemById(e[n]))return t.BagMgr.ins().send_8_8(i.series),!0;return!1},i.prototype.getDaoShiSkill=function(e){var i=this.protectSkill();if(i&&!i.isDisable)return i;if(i=this.getUserSkill(91),i&&!i.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltDaoShi)&&this.propSet.getCurMp()>30&&egret.getTimer()>i.dwResumeTick)return i;if(i=this.getUserSkill(t.SkillMgr.SKILL_ZHSS),i&&!i.isDisable){if(this.propSet.getCurMp()>30&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ZhaoHuanShenShou)&&0==t.PetSettingMgr.ins().petNum&&egret.getTimer()>i.dwResumeTick)return i}else if(this.propSet.getCurMp()>30&&(i=this.getUserSkill(t.SkillMgr.SKILL_ZHKL),i&&!i.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ZhaoHuanShenShou)&&0==t.PetSettingMgr.ins().petNum&&egret.getTimer()>i.dwResumeTick))return i;if(i=this.getUserSkill(22),i&&!i.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_HpMin)&&this.propSet.getCurMp()>30){var n=egret.getTimer();if(n-this.zhiYuCDTime>3e3&&this.propSet.getHpPercentage()<t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_hpLess))return this.zhiYuCDTime=n,i}i=this.getUserSkill(23);var s=e.modelBuffAr[t.EntityFilter.poison];if(!s&&i&&!i.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Poison)&&this.propSet.getCurMp()>30&&egret.getTimer()>i.dwResumeTick)return i;if(i=this.getUserSkill(33),i&&!i.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Hemophagy)&&this.propSet.getCurMp()>30&&egret.getTimer()>i.dwResumeTick)return i;var a=this.isSutomaticAck(1);return a?a:this.isRange(e.currentX,e.currentY)&&this.propSet.getCurMp()>30&&(i=this.getUserSkill(24),i&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Huofu))?i:null},i.prototype.floatingBlood=function(t,e,i){void 0===e&&(e=700),void 0===i&&(i=!1);var n=t-this.getHP();this.updateHp(t),0!=n&&(this.floatingBloodAry.push(n),this.payFB())},i.prototype.isRange=function(t,e){return Math.abs(this.currentX-t)>10||Math.abs(this.currentY-e)>5?!1:!0},i.prototype.searchTagret=function(e,i){if(void 0===i&&(i=0),this.isFixed()||!e)return!1;if(e instanceof t.CharMonster){var n=this.propSet.getAP_JOB();if(t.PlayerRoleAI.ins().isOpen&&(this.satime=0,this.propSet.getCurMp()>30)){var s=null;if(JobConst.ZhanShi==n){if(s=this.isSutomaticAck(1),!s){if(s=this.getUserSkill(89),s&&!s.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltZhanShi)&&this.propSet.getCurMp()>30&&egret.getTimer()>s.dwResumeTick)return void(t.MapView.m_AiSkillId=s.nSkillId);s=null}}else if(JobConst.FaShi==n){if(this.isSutomaticAck(1))return void(this.aStarPatch.length=0);s=this.getFaShiSKill(e)}else JobConst.DaoShi==n&&(s=this.getDaoShiSkill(e));if(s&&!s.isDisable&&egret.getTimer()>s.dwResumeTick)return this.aStarPatch.length=0,void(t.MapView.m_AiSkillId=s.nSkillId);if(s){if(JobConst.FaShi==n&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt)&&this.isRange(e.currentX,e.currentY))return;if(JobConst.FaShi==n&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster)&&this.isRange(e.currentX,e.currentY))return;if(JobConst.FaShi==n&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_isRainFire)&&this.isRange(e.currentX,e.currentY))return;if(JobConst.DaoShi==n&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Huofu)&&this.isRange(e.currentX,e.currentY))return}}if(t.PlayerRoleAI.ins().attackState)if(this.propSet.getAP_JOB()==JobConst.ZhanShi){var s=null;if(s=this.getUserSkill(89),s&&!s.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltFashi)&&this.propSet.getCurMp()>30&&egret.getTimer()>s.dwResumeTick)return void(t.MapView.m_clickSkillId=s.nSkillId);s=null}else if(this.propSet.getAP_JOB()==JobConst.FaShi){var s=null;if(s=this.getFaShiSKill(e),s&&!s.isDisable&&egret.getTimer()>s.dwResumeTick)return this.aStarPatch.length=0,void(t.MapView.m_clickSkillId=s.nSkillId);if(s){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt)&&this.isRange(e.currentX,e.currentY))return;if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster)&&this.isRange(e.currentX,e.currentY))return;if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_isRainFire)&&this.isRange(e.currentX,e.currentY))return}}else if(this.propSet.getAP_JOB()==JobConst.DaoShi){var s=null;if(s=this.getDaoShiSkill(e),s&&!s.isDisable&&egret.getTimer()>s.dwResumeTick)return this.aStarPatch.length=0,void(t.MapView.m_clickSkillId=s.nSkillId);if(s&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Huofu)&&this.isRange(e.currentX,e.currentY))return}if(t.GameMap.getAround8({X:this.currentX,Y:this.currentY},{X:e.currentX,Y:e.currentY})){var a=t.DirUtil.get8DirBy2Point({x:this.currentX,y:this.currentY},{x:e.currentX,y:e.currentY});return a!=this.dir&&this.rawSetNextAction(t.StandardActions.SAM_IDLE,{Dir:a,TargetX:this.currentX,TargetY:this.currentY}),this.rawSetNextAction(t.StandardActions.SAM_NORMHIT,{Dir:a,TargetX:this.currentX,TargetY:this.currentY,recog:e.recog}),debug.log("检测到目标攻击"),i&&(t.MapView.m_forceAck_Recog=0),!0}this.pursuitTarget(e)}else if(e instanceof t.DropEntity){if(this.currentX==e.nX&&this.currentY==e.nY)return!1;this.dropTarget(e)}else if(1==e.type){if(this.currentX==e.x&&this.currentY==e.y)return!1;this.trackTarget(e)}else if(2==e.type){if(this.currentX==e.x&&this.currentY==e.y){if(0==this.aStarPatch.length&&this._taskInfo.sceneid&&this._taskInfo.sceneid==t.GameMap.mapID){var r=this.getTaskPos(),o=t.MathUtils.getDistanceByObject({x:this.x,y:this.y},{x:r.x*t.GameMap.CELL_SIZE,y:r.y*t.GameMap.CELL_SIZE});220>o&&(-1!=this._taskInfo.npcID&&this.isOpenNpcView(this._taskInfo.npcID),-1!=this._taskInfo.taskid&&-1!=this._taskInfo.taskstate&&(t.ViewManager.ins().isShow(t.TaskInfoWin)||t.ViewManager.ins().open(t.TaskInfoWin,this._taskInfo.taskid,this._taskInfo.taskstate)),1==this._taskInfo.isstartAi&&(t.PlayerRoleAI.ins().startAI(),egret.getTimer()>t.MainTaskMgr.ins().clickTime&&t.MainTaskMgr.ins().post_taskAiStart()),this.stopTask())}return!1}this.teleport(e)}else if(3==i){if(this.currentX==e.x&&this.currentY==e.y)return!1;this.trackTarget(e)}var l=this.getNextAstarPatchNode();if(l.isWk)return this.rawSetNextAction(l.Action,{Dir:l.btDir,X:this.currentX,Y:this.currentY,TargetX:l.X,TargetY:l.Y}),t.ObjectPool.push(l),!0;if(t.PlayerRoleAI.ins().isOpen){if(this.aStarPatch.length=0,t.MapView.m_ack_Char){var h=t.MapView.m_ack_Char.recog;t.PlayerRoleAI.ins().addBlackRecog(h),t.MapView.ClearChar(t.MapView.m_ack_Char.recog)}if(l.recog){var p=t.EntityMgr.ins().getCharRole(l.recog);if(p&&p.propSet.getRace()==t.ActorRace.Monster){var u=t.GlobalConfig.Monster[p.propSet.getACTOR_ID()];u&&!u.isAIAck&&(t.MapView.m_ack_Char=p)}}t.PlayerRoleAI.ins().createDestinationXY(),t.PlayerRoleAI.ins().dropRecog=0,this.dropPackId=0}else if(this.isDothetask()){if(this.aStarPatch.length=0,this._taskInfo.sceneid&&this._taskInfo.sceneid==t.GameMap.mapID){var r=this.getTaskPos(),o=t.MathUtils.getDistanceByObject({x:this.x,y:this.y},{x:r.x*t.GameMap.CELL_SIZE,y:r.y*t.GameMap.CELL_SIZE});220>o&&(-1!=this._taskInfo.npcID&&this.isOpenNpcView(this._taskInfo.npcID),-1!=this._taskInfo.taskid&&-1!=this._taskInfo.taskstate&&(t.ViewManager.ins().isShow(t.TaskInfoWin)||t.ViewManager.ins().open(t.TaskInfoWin,this._taskInfo.taskid,this._taskInfo.taskstate)),1==this._taskInfo.isstartAi&&t.PlayerRoleAI.ins().startAI(),this.stopTask())}}else 3==i?this.aStarPatch.length=0:t.PlayerRoleAI.ins().attackState&&(this.aStarPatch.length=0);return t.ObjectPool.push(l),!1},i.prototype.getFaShiSKill=function(e){var i=null;if(this.isRange(e.currentX,e.currentY)){if(i=this.getUserSkill(90),i&&!i.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltFashi)&&this.propSet.getCurMp()>30&&egret.getTimer()>i.dwResumeTick)return i;if(i=this.getUserSkill(21),i&&!i.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_isRainFire)&&this.propSet.getCurMp()>30&&egret.getTimer()>i.dwResumeTick)return i;if(i=this.getUserSkill(18),i&&!i.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster)&&this.propSet.getCurMp()>30)return i;if(i=this.getUserSkill(12),i&&!i.isDisable&&t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt)&&this.propSet.getCurMp()>30)return i}return null},i.prototype.isOpenNpcView=function(e){var i,n,s=t.EntityMgr.ins().getNpcList();for(var a in s)if(i=s[a],n=i.propSet.getACTOR_ID(),n==e){t.ViewManager.ins().isShow(t.NpcView)&&t.ViewManager.ins().close(t.NpcView),t.ViewManager.ins().open(t.NpcView,i.recog,i.propSet);break}},i.prototype.clearStarPatch=function(){this.AckX=0,this.AckY=0,this.aStarPatch.length=0},i.prototype.think=function(){return!1},i.prototype.nextMouseMoveEntity=function(e){void 0===e&&(e=1),e==t.StandardActions.SA_RUN&&(this.isFrozen()||this.isLockTurn)&&(e=t.StandardActions.SA_WALK,this.isLockTurn=!1);var i=null,n=this.currentX,s=this.currentY,a=t.GameMap.getPosRangeByDir(n,s,t.MapView.moveDir,1),r=t.EntityMgr.ins().checkWalkable(a[0],a[1]);if(r)return null;if(a&&a[2])i=t.ObjectPool.pop("app.TrajectoryNode"),i.init(a[0],a[1],t.MapView.moveDir,t.StandardActions.SA_WALK);else{var o=t.GameMap.point2Dir(t.MapView.moveDir,1);if(a=t.GameMap.getPosRangeByDir(n,s,o,1),a&&a[2]&&!t.EntityMgr.ins().checkWalkable(a[0],a[1]))return i=t.ObjectPool.pop("app.TrajectoryNode"),i.init(a[0],a[1],o,t.StandardActions.SA_WALK),i;if(o=t.GameMap.point2Dir(t.MapView.moveDir,-1),a=t.GameMap.getPosRangeByDir(n,s,o,1),a[2]&&!t.EntityMgr.ins().checkWalkable(a[0],a[1]))return i=t.ObjectPool.pop("app.TrajectoryNode"),i.init(a[0],a[1],o,t.StandardActions.SA_WALK),i}if(i&&e==t.StandardActions.SA_RUN){if(a=t.GameMap.getPosRangeByDir(n,s,t.MapView.moveDir,2),r=t.EntityMgr.ins().checkWalkable(a[0],a[1]))return i;a[2]&&!t.EntityMgr.ins().checkWalkable(a[0],a[1])&&(i=t.ObjectPool.pop("app.TrajectoryNode"),i.init(a[0],a[1],t.MapView.moveDir,t.StandardActions.SA_RUN))}return i},i.prototype.actionCast=function(){},i.prototype.skillAck=function(e){this.rawSetNextAction(t.StandardActions.SAM_SPELL,{Dir:e.dir,TargetX:this.currentX,TargetY:this.currentY,ackObj:e})},i.prototype.rawSetNextAction=function(e,i){if(this.ishomingMove<=egret.getTimer()||this.m_nAction==t.StandardActions.SAM_UNDER_ATTACK){this.m_nNextAction=e;var n=void 0;switch(e){case t.StandardActions.SAM_NORMHIT:this.postActionMessage(t.StandardActions.SAM_NORMHIT,i.TargetX,i.TargetY,i.Dir,{recog:i.recog,Dir:i.Dir,skillId:this.propSet.getNextAckSkillId(),level:this.propSet.getNextAckSkillLevel(),prohibitLock:i.prohibitLock});break;case t.StandardActions.SAM_SPELL:this.propSet.setProperty(t.ActorPropertyModel.AP_DIR,i.Dir),this.postActionMessage(t.StandardActions.SAM_SPELL,i.TargetX,i.TargetY,i.Dir,i.ackObj);break;case t.StandardActions.SAM_IDLE:n=t.ObjectPool.pop("app.ActorMessage"),n.setInfo(t.StandardActions.SAM_IDLE,i.X,i.Y,i.Dir),this.setHumanAction(n),t.MoveMgr.ins().s_1_4(i.Dir),this.propSet.setProperty(t.ActorPropertyModel.AP_DIR,i.Dir),this.m_nNextAction=0;break;case t.StandardActions.SAM_WALK:n=t.ObjectPool.pop("app.ActorMessage"),n.setInfo(t.StandardActions.SAM_WALK,i.TargetX,i.TargetY,i.Dir),this.ishomingMove=egret.getTimer()+this.moveCD,this.setHumanAction(n),t.MoveMgr.ins().s_1_1(i.X,i.Y,i.Dir),this.propSet.setProperty(t.ActorPropertyModel.AP_DIR,i.Dir);break;case t.StandardActions.SAM_RUN:n=t.ObjectPool.pop("app.ActorMessage"),n.setInfo(t.StandardActions.SAM_RUN,i.TargetX,i.TargetY,i.Dir),this.ishomingMove=egret.getTimer()+this.moveCD,this.setHumanAction(n),t.MoveMgr.ins().s_1_2(i.X,i.Y,i.Dir),this.propSet.setProperty(t.ActorPropertyModel.AP_DIR,i.Dir);break;default:this.m_nNextAction=0}}i=null},i.prototype.resurgenceChar=function(){this.m_nNextAction=0,this.refuseNextAction(),this.initialize(),this.showBodyContainer()},i.prototype.refuseNextAction=function(){this.m_nNextAction=0,this.m_nNextDirection=0,this.ishomingMove=1,this.aStarPatch.length=0,t.PlayerRoleAI.ins().isOpen&&(t.MapView.m_ack_Char&&t.MapView.ClearChar(t.MapView.m_ack_Char.recog),t.PlayerRoleAI.ins().createDestinationXY())},i.prototype.actionAccepted=function(){if(this.m_nNextAction>0)switch(this.m_nNextAction){case t.StandardActions.SAM_NORMHIT:this.ishomingMove=1;break;case t.StandardActions.SAM_SPELL:if(this.ishomingMove=1,this.m_MoveAction.data&&this.m_MoveAction.data.skill.ballisticId){var e=t.EntityMgr.ins().getCharRole(this.hitRecog);this.m_MoveAction.data.targeRole=e,this.playDanDao(this.m_MoveAction.data,400-(egret.getTimer()-this.acktTime)),this.hitRecog=0}}this.m_nNextAction=0,this.m_nNextDirection=0,this.ishomingMove=1},i.prototype.setHumanAction=function(i){var n=egret.getTimer();if(i.ident==t.StandardActions.SAM_NORMHIT){this.ishomingMove=n+this.moveCD,this.m_MoveAction.Action=t.StandardActions.SAM_NORMHIT,this.m_MoveAction.Dir=i.dir,this.dir=i.dir,this.m_nAction=i.ident;var s=this.getNormhitTime();this.m_dwNextActionTime=this.m_nCurrentActionTime+s;var a=i.data,r=t.EntityAction.ATTACK;if(this.lockSkillId=1000000001,a.recog?(a.prohibitLock||(this._lockTarget=a.recog),t.SkillMgr.ins().s_5_6(a.recog,a.Dir)):t.SkillMgr.ins().s_5_6(0,a.Dir),t.SkillMgr.ins().postUpdateLock(this._lockTarget,this.lockSkillId),a&&a.skillId){this.ackEffid(a.skillId,a.level);var o=t.GlobalConfig.SkillConf[a.skillId];o&&2==o.action&&(r=t.EntityAction.CAST)}else t.SoundUtil.ins().playAck();this.playAction(r)}else if(i.ident==t.StandardActions.SAM_SPELL){var o=t.GlobalConfig.SkillConf[i.data.skillId];if(!i.data.actorRecog&&this._lockTarget&&o&&o.isSwitchSkill&&!o.isIgnoreLock){var l=t.EntityMgr.ins().getCharRole(this._lockTarget);l&&(this.hitRecog=l.recog,i.data.actorRecog=l.recog,i.data.targetX=l.currentX,i.data.targetY=l.currentY,i.dir=t.DirUtil.get8DirBy2Point(this,{x:l.x,y:l.y}))}o.isIgnoreDir&&(i.dir=this.dir);var h=i.data;this.ishomingMove=n+this.moveCD,this.m_MoveAction.Dir=i.dir,this.m_MoveAction.data=i.data,t.SkillMgr.SKILL_YMCZ!=i.data.skillId&&(this.m_dwNextActionTime=this.m_nCurrentActionTime+t.StandardActionsTime.SAM_SPELL_TIME),o?(o.action&&(this.m_nAction=i.ident,this.m_MoveAction.Action=t.StandardActions.SAM_SPELL),1==o.action?this.playAction(t.EntityAction.ATTACK):2==o.action?this.playAction(t.EntityAction.CAST):(this.m_dwNextActionTime=0,this.m_nAction=0)):(this.m_dwNextActionTime=0,this.m_nAction=0,this.playAction(t.EntityAction.ATTACK)),this.acktTime=n,o&&(o.isSwitchSkill&&(this.lockSkillId=h.skillId),o.isLockTarget&&h.actorRecog&&(this._lockTarget=h.actorRecog)),t.SkillMgr.ins().postUpdateLock(this._lockTarget,this.lockSkillId);var p=this.propSet.getAP_JOB();t.SkillMgr.ins().s_5_2(h.skillId,h.actorRecog,h.targetX,h.targetY,i.dir,p),h.skill.id!=t.SkillMgr.SKILL_YMCZ&&o.action&&(this.dir=i.dir,o&&2==o.action?this.playAction(t.EntityAction.CAST):this.playAction(t.EntityAction.ATTACK),h.skill.prepareId&&t.SkillEffPlayer.playAckEff(h.skill.prepareId,this))}else e.prototype.setHumanAction.call(this,i)},i.prototype.addUserSkill=function(t){this.skillsData[t.nSkillId]=t},i.prototype.updateSkillCd=function(t,e){this.skillsData[t]&&(this.skillsData[t].dwResumeTick=e)},i.prototype.getUserSkill=function(t){return this.skillsData[t]},i.prototype.getUserSkills=function(){return this.skillsData},Object.defineProperty(i.prototype,"weight",{get:function(){return this.isDead?-1:this.y+5},enumerable:!0,configurable:!0}),i.prototype.initBody=function(t,i){gamelib.os.RM.filterMoviceResource=ResDirEnum.RES_DIR_BODY+this.propSet.getBodyStr(),e.prototype.initBody.call(this,t,i)},i.prototype.setNameTxtColor=function(){if(t.GameMap.getAACamp)this._nameTxt.textColor=t.ColorUtil.NAME_BLUE;else{var e=t.FriendMgr.ins().concernIsFriend(this.propSet.getACTOR_ID());if(e)return void(this._nameTxt.textColor=e.getColor());t.GameMap.getIsSafe?this.pkTextColor():this.propSet.getGuildId()?t.GameMap.getAAZY?this._nameTxt.textColor=t.ColorUtil.NAME_BLUE:t.GuildMgr.ins().getIsOwnDeclareWar()?this._nameTxt.textColor=t.ColorUtil.NAME_BLUE:this.pkTextColor():t.GameMap.getAAZY?this._nameTxt.textColor=t.ColorUtil.GREEN_COLOR:this.pkTextColor()}},i.prototype.pickUpPetRange=function(){if(this.isDead)return 0;var e=this.propSet.getPickUpPetRange();if(e){if(t.GameMap.isNoPickUp)return 0;var i=t.TeamMgr.ins().myTeamList;return i.length?0:e}return 0},i.prototype.payPickUpMc=function(){this.pickUpPet&&this.pickUpPet.payPickUpMc()},i.prototype.correctAI=function(){this.aStarPatch.length=0},i}(t.CharRole);t.PlayerRole=e,__reflect(e.prototype,"app.PlayerRole")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._isOpen=!1,t._isFinding=!1,t._attackState=!1,t._destinationXY={x:0,y:0,type:1},t.isFirst=!0,t._blacklist=[],t._stop_breakSkillAry=[5],t.AI_UPDATE_TIME=500,t._cdTime=0,t.destinationCDTiem=0,t.playXY={x:0,y:0},t.recordTime=0,t.standTime=0,t.isPickUpPet=0,t.hookIdx=0,t}return __extends(i,e),Object.defineProperty(i.prototype,"isOpen",{get:function(){return this._isOpen},set:function(e){this._isOpen!=e&&(this._isOpen=e,t.DefaultMgr.ins().post_updateOnHook())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isFinding",{get:function(){return this._isFinding},set:function(e){this._isFinding!=e&&(this._isFinding=e,t.DefaultMgr.ins().post_updateOnHook())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"attackState",{get:function(){return this._attackState},set:function(e){this._attackState!=e&&(this._attackState=e,t.DefaultMgr.ins().post_AttackState())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ackRecog",{get:function(){return this._ackRecog},set:function(t){this._ackRecog=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropRecog",{get:function(){return this._dropRecog},set:function(t){this._dropRecog=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"destinationXY",{get:function(){return this._destinationXY},set:function(t){this._destinationXY=t},enumerable:!0,configurable:!0}),i.prototype.addBlackRecog=function(t){t&&(+t==this._dropRecog&&(this.isFirst=!1),this._blacklist.push(+t))},i.prototype.removeBlackRecog=function(t){var e=this._blacklist.indexOf(+t);e>-1&&this._blacklist.splice(e,1)},i.prototype.clearBlackRecogAll=function(){this._blacklist.length=0,t.MapView.m_ack_Char=null,this._ackRecog=null,this._dropRecog=null},Object.defineProperty(i.prototype,"stopBreakSkillAry",{get:function(){return this._stop_breakSkillAry},enumerable:!0,configurable:!0}),i.ins=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.ins.call(this,t)},i.prototype.createDestinationXY=function(){this._destinationXY.x=this._destinationXY.y=-1},Object.defineProperty(i.prototype,"cdTime",{get:function(){return this._cdTime},set:function(e){if(this.isPickUpPet){var i=egret.getTimer(),n=this.petChickDrop(i);n.length&&t.DropMgr.ins().s_15_10(n)}this._cdTime=e},enumerable:!0,configurable:!0}),i.prototype.stopAI=function(){if(this._isOpen){this.standTime=0,this.isFirst=!0,this.isOpen=!1,t.MapView.m_playerActon=t.PlayerAction.IDLE,this._dropRecog=0,t.MapView.m_ack_Char&&t.MapView.ClearChar(t.MapView.m_ack_Char.recog),this.createDestinationXY(),t.TimerManager.ins().remove(this.checkAI,this),t.TimerManager.ins().remove(this.createBlackRecog,this);var e=t.EntityMgr.ins().getPayer;e=null,t.UserTips.ins().showUITips(t.LanguageUtils.language_System58),this.destinationCDTiem=0}},i.prototype.stopPK=function(){t.MapView.m_ack_Char&&t.MapView.ClearChar(t.MapView.m_ack_Char.recog)},i.prototype.startAI=function(){if(!this._isOpen){t.DefaultMgr.ins().postUpdateTarget(0),this.stopPK(),this.createDestinationXY();var e=t.EntityMgr.ins().getPayer;t.GameMap.scenes.isHook?(e.stopTask(),e.stopFinding(),this.isOpen=!0,t.TimerManager.ins().isExists(this.checkAI,this)||(this.checkAI(),t.TimerManager.ins().doTimer(this.AI_UPDATE_TIME,0,this.checkAI,this)),t.TimerManager.ins().isExists(this.createBlackRecog,this)||(this.checkAI(),t.TimerManager.ins().doTimer(5e3,0,this.createBlackRecog,this)),t.UserTips.ins().showUITips(t.LanguageUtils.language_System57)):249!=t.GameMap.scenes.sceneid&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips80)}},i.prototype.createBlackRecog=function(){this._blacklist.length=0;var e=t.EntityMgr.ins().getPayer;e&&e.clearLockCell()},i.prototype.clearplayXY=function(){this.playXY.x=this.playXY.y=0},i.prototype.checkAI=function(){var e=egret.getTimer();if(!(this._cdTime>e)){var i=t.EntityMgr.ins().getPayer;if(i){this.isPickUpPet=i.pickUpPetRange();var n=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1);if(this.standTime&&i.action==t.EntityAction.STAND?e-this.standTime>3e3&&(n=!1):this.standTime=e,t.MapView.m_ack_Char){if(this.isPickUpPet){var s=this.petChickDrop(e);s.length&&t.DropMgr.ins().s_15_10(s)}return this.clearplayXY(),-1!=this._blacklist.indexOf(+this._ackRecog)&&(this._ackRecog=0),void(t.MapView.m_ack_Char=t.EntityMgr.ins().getCharRole(this._ackRecog))}var a=Number.MAX_VALUE;this._ackRecog=0;var r=0,o=0,l=void 0,h=void 0;if(this.isFirst){if(this.chickDrop(e,a),this._dropRecog)return}else this._dropRecog=0,this.isFirst=!0;for(var p=0;8>p;++p)if(r=i.currentX+gamelib.AStar.NEIGHBORPOS_X_VALUES[p],o=i.currentY+gamelib.AStar.NEIGHBORPOS_Y_VALUES[p],l=t.EntityMgr.ins().get_X_Y_CharRole(r,o),l&&l.propSet.getRace()==t.ActorRace.Monster&&(h=t.GlobalConfig.Monster[l.propSet.getACTOR_ID()],h&&!l.deadChar&&1==h.entityType&&!h.isAIAck)){this._ackRecog=l.recog,a=t.MathUtils.getDistanceByObject(i,l);break}var u=!1;if(0==this._ackRecog){var c=t.EntityMgr.ins().getAllEntity();if(n)for(var p in c)if(l=c[p],l.isCharRole&&!l.isMy){u=!0;break}for(var p in c){l=c[p];var g=this.isRange(i.currentX,i.currentY,l.currentX,l.currentY);if(g&&l.propSet.getRace()==t.ActorRace.Monster&&-1==this._blacklist.indexOf(+l.recog)&&(h=t.GlobalConfig.Monster[l.propSet.getACTOR_ID()],h&&!l.deadChar&&1==h.entityType&&!h.isAIAck)){if(!t.GameMap.fubenID&&n&&u&&l.propSet.getHp()!=l.propSet.getMaxHp())continue;var d=t.MathUtils.getDistanceByObject(i,l);a>d&&(a=d,this._ackRecog=p)}}}if(!this._ackRecog&&n&&u){var c=t.EntityMgr.ins().getAllEntity();for(var p in c){l=c[p];var g=this.isRange(i.currentX,i.currentY,l.currentX,l.currentY);if(g&&l.propSet.getRace()==t.ActorRace.Monster&&-1==this._blacklist.indexOf(+l.recog)&&(h=t.GlobalConfig.Monster[l.propSet.getACTOR_ID()],h&&!l.deadChar&&1==h.entityType&&!h.isAIAck)){if(!t.GameMap.fubenID)continue;var d=t.MathUtils.getDistanceByObject(i,l);a>d&&(a=d,this._ackRecog=p)}}}if(this._ackRecog)return this.clearplayXY(),this.createDestinationXY(),t.MapView.m_playerActon=t.PlayerAction.IDLE,t.MapView.m_ack_Char=t.EntityMgr.ins().getCharRole(this._ackRecog),a=null,r=null,o=null,l=null,void(h=null);if(0==this._dropRecog)if(-1==this._destinationXY.x||-1==this._destinationXY.y||this._destinationXY.x==i.currentX&&this._destinationXY.y==i.currentY){if(this.createDestinationXY(),t.GameMap.scenes&&t.GameMap.scenes.hook&&t.GameMap.scenes.hook.length){this.hookIdx>t.GameMap.scenes.hook.length-1&&(this.hookIdx=0);var m=t.GameMap.scenes.hook[this.hookIdx];m&&(this._destinationXY.x=m.x,this._destinationXY.y=m.y),this.hookIdx++}this.playXY.x=this.playXY.y=0,this.clearplayXY(),this.recordTime=e}else this.playXY.x==i.currentX&&this.playXY.y==i.currentY?e-this.recordTime>2e3&&(this.createDestinationXY(),t.MapView.m_ack_Char&&t.MapView.ClearChar(t.MapView.m_ack_Char.recog)):(this.recordTime=e,this.playXY.x=i.currentX,this.playXY.y=i.currentY);else this.clearplayXY();a=null,r=null,o=null,l=null,h=null}}},i.prototype.isRange=function(t,e,i,n){return Math.abs(t-i)>13||Math.abs(e-n)>8?!1:!0},i.prototype.chickDrop=function(e,i){this._dropRecog=0;var n,s,a=t.EntityMgr.ins().dropList,r=t.EntityMgr.ins().getPayer;if(this.isPickUpPet&&(s=this.petChickDrop(e),s.length&&t.DropMgr.ins().s_15_10(s)),t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1)){var o=t.SettingMgr.ins().getDataById(65533).isSelected1,l=void 0;for(var h in a)if(n=a[h],-1==this._blacklist.indexOf(+h)&&(!s||-1==s.indexOf(h))){if(65534!=n.packetId&&65535!=n.packetId){var p=t.GlobalConfig.StdItems[n.packetId];if(p&&(l=t.BagMgr.ins().getBagTypeItemNum(p.packageType)),1>l)continue}if(!(n.timeRemaining>e||t.EntityMgr.ins().checkWalkable(n.nX,n.nY)||t.EntityMgr.ins().getTeleport(n.nX,n.nY))){if(!t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Items,t.SetUpEnum.SetUp_Item_All_Pick)){var u=t.SettingMgr.ins().getDataById(n.packetId);if(!u||!(u.isSelected1||o&&n.isBest))continue}var c=t.MathUtils.getDistanceByObject(r,n)-20;i>=c&&(i=c,this._dropRecog=h,this._ackRecog=0)}}}},i.prototype.isInside=function(t,e,i,n,s,a){return i>t||t>i+s||n>e||e>n+a?!1:!0},i.prototype.petChickDrop=function(e){var i=[];if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1)){var n=t.EntityMgr.ins().getPayer,s=this.isPickUpPet,a=n.currentX-s,r=n.currentY-s,o=t.EntityMgr.ins().dropList,l=t.SettingMgr.ins().getDataById(65533).isSelected1,h=void 0;for(var p in o){var u=o[p],c=this.isInside(u.nX,u.nY,a,r,2*s,2*s);if(c&&-1==this._blacklist.indexOf(+p)){if(65534!=u.packetId&&65535!=u.packetId){var g=t.GlobalConfig.StdItems[u.packetId];if(g&&(h=t.BagMgr.ins().getBagTypeItemNum(g.packageType)),1>h)continue}if(!(u.timeRemaining>e)){if(!t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Items,t.SetUpEnum.SetUp_Item_All_Pick)){var d=t.SettingMgr.ins().getDataById(u.packetId);if(!d||!(d.isSelected1||l&&u.isBest))continue}i.push(p)}}}}return i},i.prototype.onClickTab=function(){var e=t.EntityMgr.ins().getPayer;if(e){if(this.isOpen)return void t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_System94+"|");var i=Number.MAX_VALUE,n=void 0,s=t.EntityMgr.ins().getAllEntity(),a=[];for(var r in s)if(n=s[r],(3!=e.propSet.getPKtype()||!e.propSet.getGuildId()||e.propSet.getGuildId()!=n.propSet.getGuildId())&&n.isCharRole&&!n.isMy&&!n.deadChar&&e.lockTarget!=n.recog){var o=Math.abs(t.MathUtils.getDistanceByObject(e,n));i>=o?(Math.abs(o-i)>32&&(a.length=0,i=o),a.push(n.recog)):Math.abs(o-i)<32&&a.push(n.recog)}if(!a.length){if(a=null,e.lockTarget){var l=t.EntityMgr.ins().getCharRole(e.lockTarget);if(l)return void t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_System103+t.LanguageUtils.language_System105+"|C:0xffffff&T:"+l.propSet.getName()+"||")}return void t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_System103+"|")}if(1==a.length)t.DefaultMgr.ins().postUpdateTarget(a[0]),n=t.EntityMgr.ins().getCharRole(a[0]);else{var h=Math.floor(Math.random()*a.length);t.DefaultMgr.ins().postUpdateTarget(a[h]),n=t.EntityMgr.ins().getCharRole(a[h])}n?t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_System95+"|C:0xffffff&T:"+n.propSet.getName()+"||"):e.lockTarget&&t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_System103+"|"),n=null,a=null}},i.prototype.getNearestMonster=function(){var e,i,n,s=t.EntityMgr.ins().getAllEntity(),a=t.EntityMgr.ins().getPayer,r=Number.MAX_VALUE;for(var o in s){e=s[o];var l=this.isRange(a.currentX,a.currentY,e.currentX,e.currentY);if(l&&e.propSet.getRace()==t.ActorRace.Monster&&(i=t.GlobalConfig.Monster[e.propSet.getACTOR_ID()],i&&!e.deadChar&&1==i.entityType&&!i.isAIAck)){var h=t.MathUtils.getDistanceByObject(a,e);r>h&&(r=h,n=o)}}return n&&t.DefaultMgr.ins().postUpdateTarget(n),n},i.prototype.getNearestMonster_magicBOSS=function(){var e,i,n,s=t.EntityMgr.ins().getAllEntity(),a=t.EntityMgr.ins().getPayer,r=Number.MAX_VALUE;for(var o in s){e=s[o];var l=this.isRange(a.currentX,a.currentY,e.currentX,e.currentY);if(l&&e.propSet.getRace()==t.ActorRace.Monster&&(i=t.GlobalConfig.Monster[e.propSet.getACTOR_ID()],i&&1==i.ascriptionopen)){var h=t.MathUtils.getDistanceByObject(a,e);r>h&&(r=h,n=o)}}return n},i}(t.BaseClass);t.PlayerRoleAI=e,__reflect(e.prototype,"app.PlayerRoleAI")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.itemList.itemRenderer=t.ItemBase,this.addTouchEvent(this.enterFb,this.onClick),this.addTouchEvent(this.btnMore,this.onClick)},i.prototype.dataChanged=function(){if(this.data){var e=t.GlobalConfig["Activity"+this.data.actiType+"Config"];if(e){var i=e[this.data.actiID];if(this.itemCfg=i,i){this.imgBg.source=i.bg?i.bg+"_png":"Act_hdbg2_1_png",this.title.source=i.titleIcon?i.titleIcon:"",this.systemJieShao.textFlow=t.TextFlowMaker.generateTextFlow(i.describe),this.enterFb.label=i.rewardBtn;var n=t.ActvityMgr.ins().getActivityInfo(this.data.actiID);if(n&&n.info&&n.info.times?this.residueCount.text=t.StringUtils.replace(t.LanguageUtils.language_Common_64,n.info.times):this.residueCount.text="",i.ruleID?(this.rule.visible=!0,this.rule.ruleId=i.ruleID):this.rule.visible=!1,this.redPoint.visible=!1,0==i.Id)for(var s in e){var a=e[s];if(0!=a.Id){var r=t.ActvityMgr.ins().getActivityInfo(a.Id);if(a.buttoncolor&&r&&r.redDot){this.redPoint.visible=!0,this.redPoint.setRedImg(a.buttoncolor);break}}}else if(19==i.Id)for(var s in e){var a=e[s];if(19!=a.Id){var r=t.ActvityMgr.ins().getActivityInfo(a.Id);if(a.buttoncolor&&r&&r.redDot){this.redPoint.visible=!0,this.redPoint.setRedImg(a.buttoncolor);break}}}else if(3==i.Id){if(i.buttoncolor){var o=t.ActvityMgr.ins().getAppraisalRed(i.Id);o&&(this.redPoint.visible=!0,this.redPoint.setRedImg(i.buttoncolor))}}else i.buttoncolor&&n&&n.redDot&&(this.redPoint.visible=!0,this.redPoint.setRedImg(i.buttoncolor));this.itemList.dataProvider=new eui.ArrayCollection(i.rewards),this.btnMore.visible=i.rewards.length>3?!0:!1}}}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.enterFb.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeTouchEvent(this.btnMore,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.enterFb:t.ActvityMgr.ins().enterActivity(this.data.actiID);break;case this.btnMore:this.itemCfg&&t.ViewManager.ins().open(t.ShowGiftView,this.itemCfg.rewards)}},i}(t.BaseItemRender);t.ActivityCopiesItem2=e,__reflect(e.prototype,"app.ActivityCopiesItem2")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._equips=[],t._suitEquips=[],t}return __extends(i,e),Object.defineProperty(i.prototype,"equips",{get:function(){return this._equips},set:function(t){this._equips=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"suitEquips",{get:function(){return this._suitEquips
},set:function(t){this._suitEquips=t},enumerable:!0,configurable:!0}),i.ins=function(){return e.ins.call(this)},i.prototype.initEquipItems=function(e){this.equips=[],this.suitEquips=[];for(var i,n=0,s=e.length;s>n;n++)i=e[n],i.nPos>=t.StdItemType.itEquipDiamond&&i.nPos<t.StdItemType.itShield?this.suitEquips.push(i):this.equips.push(i)},i.prototype.getAllEquip=function(t){for(var e=this.suitEquips.concat(this.equips),i=0;i<e.length;i++)if(e[i].wItemId==t)return!0;return!1},i.prototype.getSuitAttrColor=function(e,i,n){for(var s=0,a=8421504,r=this.suitEquips.concat(this.equips),o=0;o<r.length;o++)if(r[o].wItemId){var l=t.GlobalConfig.StdItems[r[o].wItemId];if(l&&l.suitId>0){var h=Math.floor(l.suitId/100);if(h==e){var p=l.suitId%100;p>=i&&(s+=1)}}}return s==n&&(a=2682369),a},i.prototype.getEquipsByPos=function(e){var i,n;if(n=e>=t.StdItemType.itEquipDiamond&&e<t.StdItemType.itShield?this.suitEquips:this.equips){for(var s=0;s<n.length;s++)if(i=n[s],i.nPos==e)return i;return null}},i.prototype.getModeEquip=function(){for(var t,e=[],n=0;n<i.EquipPosArr.length&&3>n;n++)t=this.getEquipItemByType(i.EquipPosArr[n]),t&&e.push(t);return e},i.prototype.getOtherModeEquip=function(){for(var t,e=[],n=0;n<i.EquipPosArr.length&&3>n;n++)t=this.getOtherEquipItemByType(i.EquipPosArr[n]),t&&e.push(t);return e},i.prototype.sendQueryEquip=function(){t.EquipMgr.ins().send_7_3()},i.prototype.sendQueryOthersEquips=function(e,i){void 0===i&&(i=1),t.EquipMgr.ins().send_7_5(e,i)},i.prototype.sendWearEquip=function(e){t.EquipMgr.ins().send_7_1(e)},i.prototype.sendTakeOffEquip=function(e,i){t.EquipMgr.ins().send_7_2(e,i)},i.prototype.getEquipItemByType=function(e){if(!this.equips)return null;for(var i,n=0;n<this.equips.length;n++){var s=this.equips[n],a=t.GlobalConfig.StdItems[s.wItemId];if(a&&Number(a.type)==e)return i=s}return i},i.prototype.getOtherEquipItemByType=function(e){if(!this.otherPlayerEquips.equips)return null;for(var i,n=0;n<this.otherPlayerEquips.equips.length;n++){var s=this.otherPlayerEquips.equips[n],a=t.GlobalConfig.StdItems[s.wItemId];if(a&&Number(a.type)==e)return i=s}return i},i.prototype.wearEquip=function(e,i){void 0===i&&(i=0);var n,s=!1;if(n=i>=t.StdItemType.itEquipDiamond&&i<t.StdItemType.itShield?this.suitEquips:this.equips,n&&e){for(var a=void 0,r=0;r<n.length;r++)if(a=n[r],a.nPos==i){e.nPos=i,n[r]=e,s=!0;break}s||(e.nPos=i,n.push(e)),t.EventManager.ins().sendEvent(t.ItemEvent.EQUIP_WEAR_EQUIP,[e])}},i.prototype.getItemDataBySeries=function(t,e){void 0===e&&(e=0);var i;i=0==e?this.equips:this.otherPlayerEquips.equips;for(var n=0;n<i.length;n++){var s=i[n],a=s;if(a&&a.series&&a.series.toString()==t.toString())return s}if(0==e){i=this.suitEquips;for(var n=0;n<i.length;n++){var s=i[n],a=s;if(a&&a.series&&a.series.toString()==t.toString())return s}}if(10==e){i=this.otherPlayerEquips.suitEquips;for(var n=0;n<i.length;n++){var s=i[n],a=s;if(a&&a.series&&a.series.toString()==t.toString())return s}}return null},i.prototype.dropEquip=function(e){for(var i,n=this.equips.length,s=0;n>s;s++)if(i=this.equips[s],i.series.isCompleteEquals(e)){this.equips.splice(s,1),t.EventManager.ins().sendEvent(t.ItemEvent.EQUIP_DROP_EQUIP,[i]);break}n=this.suitEquips.length;for(var s=0;n>s;s++)if(i=this.suitEquips[s],i.series.isCompleteEquals(e)){this.suitEquips.splice(s,1),t.EventManager.ins().sendEvent(t.ItemEvent.EQUIP_DROP_EQUIP,[i]);break}},i.prototype.setOthersEquips=function(e){this.otherPlayerEquips=e,t.otherPlayerData.init(),t.ViewManager.ins().isShow(t.OtherPlayerView)&&t.ViewManager.ins().close(t.OtherPlayerView),t.ViewManager.ins().open(t.OtherPlayerView)},i.prototype.getSuitBonusAttrById=function(e){for(var i,n=this.equips.length,s=(t.GlobalConfig.SuitItemCfg.suitId,0);n>s;s++){i=this.equips[s];var a=t.GlobalConfig.StdItems[i.wItemId];if(a){var r=[];if(a.staitcAttrs)for(var o=0;o<a.staitcAttrs.length;o++)r.push(a.staitcAttrs[o])}}},i.EquipPosArr=[t.StdItemType.itWeapon,t.StdItemType.itDress,t.StdItemType.itHelmet,t.StdItemType.itNecklace,t.StdItemType.itDecoration,t.StdItemType.itBracelet,t.StdItemType.itRing,t.StdItemType.itGirdle,t.StdItemType.itShoes,t.StdItemType.itEquipDiamond,t.StdItemType.itBambooHat,t.StdItemType.itAVisor,t.StdItemType.itCape,t.StdItemType.itShield],i}(t.BaseSystem);t.EquipItemMgr=e,__reflect(e.prototype,"app.EquipItemMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.sysId=t.PackageID.Equip,i.regNetMsg(1,i.post_7_1),i.regNetMsg(2,i.post_7_2),i.regNetMsg(3,i.post_7_3),i.regNetMsg(4,i.post_7_4),i.regNetMsg(5,i.post_7_5),i.regNetMsg(7,i.post_7_7),i.regNetMsg(8,i.post_7_8),i.regNetMsg(15,i.post_7_15),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_7_1=function(t){var e=this.getBytes(1);t.writeToBytes(e),this.sendToServer(e)},i.prototype.send_7_2=function(t,e){var i=this.getBytes(2);t.writeToBytes(i),i.writeByte(e),this.sendToServer(i)},i.prototype.send_7_3=function(){var t=this.getBytes(3);this.sendToServer(t)},i.prototype.send_7_5=function(t,e){var i=this.getBytes(5);i.writeUnsignedInt(t),i.writeByte(e),this.sendToServer(i)},i.prototype.post_7_1=function(e){var n=t.EntityMgr.ins().getPayer,s=new t.userItem(e);if(n&&n.propSet){var a=i.equipScore(s,n.propSet.getAP_JOB());s.itemScore=a}var r=e.readByte();t.EquipItemMgr.ins().wearEquip(s,r)},i.prototype.post_7_2=function(e){var i=new t.userItem(e);t.EquipItemMgr.ins().dropEquip(i.series)},i.prototype.post_7_3=function(e){for(var n,s,a=e.readByte(),r=new Array(a),o=t.EntityMgr.ins().getPlayerPropertySet(),l=0;a>l;l++)if(n=new t.userItem(e),r[l]=n,s=e.readByte(),n.nPos=s,o&&o.propSet){var h=i.equipScore(n,o.propSet.getAP_JOB());n.itemScore=h}t.EquipItemMgr.ins().initEquipItems(r)},i.prototype.post_7_4=function(e){var i=e.readByte(),n=new t.userItem(e),s=t.EquipItemMgr.ins().getEquipsByPos(i);s.topLine=n.topLine,s.wStar=n.wStar},i.prototype.post_7_5=function(e){var i=new t.OtherPlayerInfos(e);t.EquipItemMgr.ins().setOthersEquips(i)},i.prototype.send_7_7=function(t){var e=this.getBytes(7);e.writeUnsignedInt(t),this.sendToServer(e)},i.prototype.send_7_8=function(t,e){var i=this.getBytes(8);i.writeUnsignedInt(t),i.writeByte(e),this.sendToServer(i)},i.prototype.post_7_7=function(e){var i=new t.OtherPlayerInfos(e);return i},i.prototype.post_7_8=function(e){var i=new t.OtherPlayerInfos(e);return i},i.prototype.send_7_15=function(t,e){var i=this.getBytes(15);i.writeUnsignedInt(t),i.writeUnsignedInt(e),this.sendToServer(i)},i.prototype.post_7_15=function(e){var i=new t.BossBelongVo;e.readByte();return i.nBossid=e.readInt(),i.isBelong=e.readByte(),1==i.isBelong&&(i.playerId=e.readUnsignedInt(),i.job=e.readByte(),i.sex=e.readByte(),i.playerName=e.readString(),i.guildName=e.readString(),i.isSbk=e.readByte(),i.maxHp=e.readInt(),i.currentHp=e.readInt(),i.recog=e.readNumber()),i},i.prototype.getRecommendEquip=function(){var e=!1;i.equipSouce={};var n=t.EntityMgr.ins().getPlayerPropertySet();if(n&&n.propSet)for(var s=0;s<t.BagMgr.ins().bagItem[1].length;s++){var a=t.BagMgr.ins().bagItem[1][s],r=t.GlobalConfig.StdItems[a.wItemId];if(a&&r&&(0==r.suggVocation||r.suggVocation==n.propSet.getAP_JOB())){var o=t.BagManager.ins().getItemUseState(r);if(1==o){var l=t.EquipItemMgr.ins().getEquipsByPos(r.type-1);if(l&&l.series){if(l.itemScore<a.itemScore){if(i.equipSouce[r.type-1]){var h=i.equipSouce[r.type-1].itemScore;h<a.itemScore&&(i.equipSouce[r.type-1]=a)}else i.equipSouce[r.type-1]=a;e=!0}}else if(e=!0,i.equipSouce[r.type-1]){var h=i.equipSouce[r.type-1].itemScore;h<a.itemScore&&(i.equipSouce[r.type-1]=a)}else i.equipSouce[r.type-1]=a}}}e&&i.ins().showGoodEquipTips()},i.getIsGoodEquip=function(e,n){var s=t.GlobalConfig.StdItems[e.wItemId];if(s&&(0==s.suggVocation||s.suggVocation==n)){var a=t.BagManager.ins().getItemUseState(s);if(1==a){var r=t.EquipItemMgr.ins().getEquipsByPos(s.type-1);if(r&&r.series){if(r.itemScore<e.itemScore)if(i.equipSouce[s.type-1]){var o=i.equipSouce[s.type-1].itemScore;o<e.itemScore&&(i.equipSouce[s.type-1]=e)}else i.equipSouce[s.type-1]=e}else if(i.equipSouce[s.type-1]){var o=i.equipSouce[s.type-1].itemScore;o<e.itemScore&&(i.equipSouce[s.type-1]=e)}else i.equipSouce[s.type-1]=e}}},i.prototype.showGoodEquipTips=function(){t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Recommend)&&(i.isShow||(i.isShow=!0,t.TimerManager.ins().remove(this.updateShowTips,this),t.TimerManager.ins().doTimer(2e3,1,this.updateShowTips,this)))},i.prototype.updateShowTips=function(){i.isShow=!1,t.ItemUserTipsManage.ins().showItemTip()},i.equipScore=function(e,i){var n=0,s=t.GlobalConfig.EquipValuation[i],a=t.GlobalConfig.StdItems[e.wItemId],r=[];if(a&&a.staitcAttrs){for(var o=0;o<a.staitcAttrs.length;o++)r.push(a.staitcAttrs[o]);if(e&&a.staitcAttrs&&""!=e.topLine&&void 0!=e.topLine){for(var l=t.AttributeData.getBestAttrs(e),h=t.AttributeData.getTotalAttrs(r,l),o=0;o<h.length;o++){var p=h[o],u=s[p.type];u&&(n+=u.unitVal*p.value)}if(e.wStar>0){var c=t.GlobalConfig.UpstarConfig[e.wItemId][e.wStar];if(c){var g=[];for(var d in c.attribute)g.push(c.attribute[d]);for(var m=0;m<g.length;m++){var p=g[m],u=s[p.type];u&&(n+=u.unitVal*p.value)}}}}else{for(var o=0;o<r.length;o++){var p=r[o],u=s[p.type];u&&(n+=u.unitVal*p.value)}if(e.wStar>0){var c=t.GlobalConfig.UpstarConfig[e.wItemId][e.wStar];if(c){var g=[];for(var d in c.attribute)g.push(c.attribute[d]);for(var m=0;m<g.length;m++){var p=g[m],u=s[p.type];u&&(n+=u.unitVal*p.value)}}}}}return n},i.equipSouce={},i.isShow=!1,i}(t.BaseSystem);t.EquipMgr=e,__reflect(e.prototype,"app.EquipMgr")}(app||(app={}));var app;!function(t){var e=function(e){function n(){var i=e.call(this)||this;return i._fashionDic={},i.sysId=t.PackageID.Fashion,i.regNetMsg(1,i.post_51_1),i.regNetMsg(2,i.post_51_2),i.regNetMsg(3,i.post_51_3),i.regNetMsg(4,i.post_51_4),i}return __extends(n,e),n.ins=function(){return e.ins.call(this)},n.prototype.send_51_1=function(){var t=this.getBytes(1);this.sendToServer(t)},n.prototype.send_51_2=function(t,e){var i=this.getBytes(2);i.writeInt(t),i.writeByte(e),this.sendToServer(i)},n.prototype.send_51_3=function(t){var e=this.getBytes(3);e.writeInt(t),this.sendToServer(e)},n.prototype.send_51_4=function(t){var e=this.getBytes(4);e.writeInt(t),this.sendToServer(e)},n.prototype.post_51_1=function(t){this._fashionDic={};for(var e,n=t.readByte(),s=0;n>s;s++)e=new i,e.id=t.readInt(),e.state=t.readByte(),e.lv=t.readInt(),this._fashionDic[e.id]=e},n.prototype.post_51_2=function(e){var i=e.readInt(),n=e.readByte(),s=e.readByte(),a=t.GlobalConfig.FashionattributeConfig,r=t.GlobalConfig.FashionsetConfig.cover;if(1==n){for(var o in this._fashionDic)for(var l in a){var h=a[l][this._fashionDic[o].id];if(h)for(var p=0;p<r[s-1].length;p++){var u=r[s-1][p];h.type==u&&(this._fashionDic[o].state=0)}}this._fashionDic[i].state=1}else this._fashionDic[i].state=0;return n},n.prototype.post_51_3=function(e){var n=e.readByte();if(0==n){var s=e.readInt(),a=e.readByte(),r=e.readByte(),o=t.GlobalConfig.FashionattributeConfig,l=t.GlobalConfig.FashionsetConfig.cover;if(1==a)for(var h in this._fashionDic)for(var p in o){var u=o[p][this._fashionDic[h].id];if(u)for(var c=0;c<l[r-1].length;c++){var g=l[r-1][c];u.type==g&&(this._fashionDic[h].state=0)}}var d=void 0;this.fashionDic[s]||(d=new i,d.id=s,d.state=a,d.lv=1),this._fashionDic[s]=d}else 1==n?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips99):2==n&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips89);return n},n.prototype.post_51_4=function(e){var i=e.readByte();if(0==i){var n=e.readInt(),s=e.readInt();this.fashionDic[n]&&(this.fashionDic[n].lv=s)}else 1==i?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips99):2==i?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips97):3==i&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips98);return i},Object.defineProperty(n.prototype,"fashionDic",{get:function(){return this._fashionDic},enumerable:!0,configurable:!0}),n.prototype.addfashionDic=function(t,e,i){},n.prototype.onChangeFashionLv=function(t,e,i){this._fashionDic[t].lv=e,this._fashionDic[t].state=i},n.prototype.isSatisFashionActOrUpdate=function(){return n.ins().isOpenSytemById(t.SystemOpenEnum.LatestFashion)?n.ins().isSatisFashionAct()?1:t.BlessMgr.ins().isCanBless()?1:t.StrengthenMgr.ins().fourImageRed()?1:t.OtherMgr.ins().getOfficeRed()?1:0:void 0},n.prototype.isSatisFashionAct=function(){var e=0;if(n.ins().isOpenSytemById(t.SystemOpenEnum.LatestFashion)){var i=t.GlobalConfig.FashionattributeConfig;for(var s in i){for(var a in i[s]){var r=i[s][a];e=n.ins().getFashionRedPoint(r.type);break}if(1==e)return e}return e}},n.prototype.isOpenSytemById=function(e){var i,n=t.EntityMgr.ins().getPlayerPropertySet();if(n&&n.propSet){var s=n.propSet.getLevel(),a=n.propSet.getZSLevel(),r=t.GlobalData.sectionOpenDay,o=t.GlobalConfig.SystemOpen[e];i=this.getState(o.id,s,a,r)}return i},n.prototype.getState=function(e,i,n,s){var a=t.OtherMgr.ins().getSysOpenCfgById(e);return i<a.openLevel||n<a.openCircle||s<a.openDay?0:1},n.prototype.findItemFromBag=function(){for(var e,i,n,s=t.ModelManager.ins().roleModel.getAllFashionData(),a=0,r=s.length;r>a;a++)if(e=s[a],i=e[0].id,n=e[0].lv,1==e[2]){var o=t.GlobalConfig.FashionupgradeConfig,l=Object.keys(o[i]).length;if(l-=1,l>n)return 1}return 0},n.prototype.isMaxLevel=function(){for(var e,i,n,s=t.ModelManager.ins().roleModel.getAllFashionData(),a=t.GlobalConfig.FashionupgradeConfig,r=(Object.keys(a).length,0),o=[],l=0,h=s.length;h>l;l++){e=s[l],i=e[0].id,n=e[0].lv;var p=Object.keys(a[i]).length;p-=1,p==n&&r++,o.push(p)}for(var u=0,c=0;c<o.length;c++)u+=o[c];return r==u?0:1},n.prototype.isSatisfyClothesAct=function(){},n.prototype.isSatisfyArmsAct=function(){},n.prototype.isSatisfyItemAct=function(e){for(var i,n,s=t.ModelManager.ins().roleModel.getAllFashionData(),a=0,r=s.length;r>a;a++)if(e==s[a][0].id){i=s[a][0].lv,n=s[a][2];var o=t.GlobalConfig.FashionupgradeConfig,l=Object.keys(o[s[a][0].id]).length;if(l-=1,1==n&&l>i)return 1}return 0},n.prototype.selectedIsCanAct=function(){},n.prototype.selectedItemIsMaxLevel=function(){for(var e,i,s,a=t.ModelManager.ins().roleModel.getAllFashionData(),r=t.GlobalConfig.FashionupgradeConfig,o=(Object.keys(r).length,0),l=a.length;l>o;o++)if(e=a[o],i=e[0].id,s=e[0].lv,n.ins().selectedId==i){var h=Object.keys(r[i]).length;if(h-=1,h==s)return 0}return 1},n.prototype.getFashionRedPoint=function(e){var i=0,s=t.GlobalConfig.FashionattributeConfig[e],a=n.ins().fashionDic;for(var r in s){var o=s[r];if(a&&a[o.id]){var l=t.GlobalConfig.FashionupgradeConfig[o.id][a[o.id].lv+1];l&&(i=t.CurrencyUtils.isRedDot(l.consume))}else i=t.CurrencyUtils.isRedDot(o.consume);if(1==i)return i}return i},n}(t.BaseSystem);t.FashionMgr=e,__reflect(e.prototype,"app.FashionMgr");var i=function(){function t(){this.red=0}return t}();t.FashionData=i,__reflect(i.prototype,"app.FashionData")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.getMeridiansAttrib=function(e,i){for(var n=[],s=t.GlobalConfig.MeridiansConfig,a=s[e]&&s[e].attrs,r=0;r<(a&&a.length);r++){var o=t.AttributeData.getItemAttStrByType(a[r],a,1,i);""!=o&&n.push(o)}return n},e}();t.MeridiansData=e,__reflect(e.prototype,"app.MeridiansData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.sysId=t.PackageID.Circle,i.regNetMsg(4,i.post_11_4),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_11_4=function(){var t=this.getBytes(4);this.sendToServer(t)},i.prototype.post_11_4=function(t){this.result=t.readByte(),this.meridiansLevel=t.readByte()},i.prototype.getMeridiansCurLevel=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet;return i&&i.getMeridians()},i.prototype.getDot=function(){var e=t.GlobalConfig.SystemOpen[8],i=t.ViewManager.ins().isCheckTabOpen(e);if(!i)return 0;var n=t.EntityMgr.ins().getPayer;if(n&&n.propSet){var s=n.propSet,a=t.GlobalConfig.MeridiansSetConfig.limit;if(s.getMeridians()>=a)return 0;var r=n.propSet.getZSLevel(),o=s.getMeridians()+1,l=t.GlobalConfig.MeridiansConfig[o];if(l){if(r<l.circle)return 0;var h=l.cost[0],p=t.CurrencyUtils.getCurrency(h.type,h.id);return p<h.count?0:1}}return 0},i.prototype.getRedById=function(e){var i=t.GlobalConfig.MeridiansConfig;for(var n in i){var s=i[n];if(s&&s.cost){var a=s.cost.filter(function(t){return t.id==e});if(a.length>0)return this.getDot()}}return 0},i}(t.BaseSystem);t.MeridiansMgr=e,__reflect(e.prototype,"app.MeridiansMgr")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.exchangeListData={},this.jobSkillListData={},this.currencySkillListData={},this.dicStrengthen={1:"武器部位",2:"衣服部位",3:"腰带部位",4:"鞋子部位",5:"戒指部位",6:"护腕部位",7:"项链部位",8:"头盔部位"}}return e.prototype.init=function(){var e=t.GlobalConfig.ExchangCircleConfig;this.setExchangeData(e);var i=t.GlobalConfig.SkillConf;this.setSkillData(i),this.meridiansConfig=t.GlobalConfig.MeridiansConfig,this.blessConfig=t.GlobalConfig.BlessConfig,this.setBless(this.blessConfig)},e.prototype.setExchangeData=function(t){if(!(this.exchangeListData&&Object.keys(this.exchangeListData).length>0)){var e,i,n,a=0;for(var r in t)e=t[r],i=new s,i.idx=a,i.type=e.type,i.cost=e.cost,i.value=e.value,i.useTimes=e.useLimit,i.useLimit=e.useLimit,1==e.type&&(i.id=259),this.exchangeListData[r]=i,n=1==e.type?259:0,this.exchangeListData[r]=i,i=null,a++}},e.prototype.setSkillData=function(e){if(this.curJob!=t.EntityMgr.ins().getPayer.propSet.getAP_JOB()||!(this.jobSkillListData&&Object.keys(this.jobSkillListData).length>0||this.currencySkillListData&&Object.keys(this.currencySkillListData).length>0)){var i,n={},s={},a=t.EntityMgr.ins().getPayer.propSet.getAP_JOB();this.curJob=a;for(var r in e)i=e[r],a!=i.vocation&&0!=i.vocation||i.isDelete||(1==i.skillClass&&(n[r]=i),3==i.skillClass&&(s[r]=i));this.jobSkillListData=n,this.currencySkillListData=s}},e.prototype.setBless=function(e){if(!(this.blessDatas&&this.blessDatas.length>0)){this.blessDatas=[];var i,n,s,a,o,l,h="",p="";for(var u in e){i=new r,n=e[u],s=e[Number(u)+1],i.level=n.level;var c=void 0,g=void 0;if(n)for(a=n.attrs,i.blessCur=n.needBlessValue,c=t.LanguageUtils.language_bless[1],i.attrsCur.push(c),l=0;l<a.length;l++)h=t.AttributeData.getItemAttStrByType(a[l],a,1),""!=h&&i.attrsCur.push(h);if(s)for(o=s.attrs,i.blessNext=s.needBlessValue,g=t.LanguageUtils.language_bless[2],i.attrsNext.push(g),l=0;l<o.length;l++)p=t.AttributeData.getItemAttStrByType(o[l],o,1),""!=p&&i.attrsNext.push(p);this.blessDatas.push(i)}}},e.prototype.getStarLev=function(){for(var e,i=t.EntityMgr.ins().getPlayerPropertySet().propSet,n=i.getBless(),s=this.blessDatas.length,a=0;s>a;a++)if(e=this.blessDatas[a],n>=e.blessCur&&n<e.blessNext)return e.level;var r=this.blessDatas[0].level;for(var a in this.blessDatas){var o=this.blessDatas[a];o.level>r&&(r=o.level)}return r},e.prototype.getSuitDataById=function(e){var i,s,a=t.GlobalConfig.SuitItemCfg[e],r=new n,o="",l=(t.EntityMgr.ins().getPlayerPropertySet().propSet,a.attr),h=a.percent,p=[];for(i=0;i<l.length;i++)s={},s.type=a.attr[i].type,s.value=a.attr[i].value,p.push(s);var u,c=this.getBasicEquipAttr();for(i=0;i<p.length;i++){u=0;for(var g=a.attr[i].type,d=0;d<c.length;d++)for(var m=c[d],f=0;f<m.length;f++)if(m[f].type==g){u+=m[f].value;break}p[i].value=h>0?Math.floor(u*(h/100)):p[i].value,o=t.AttributeData.getItemAttStrByType(p[i],p,1,!1,!0,"0xE0AE75","0xcbc2b2"),""!=o&&r.attrs.push(o)}return r.attrs},e.prototype.getBasicEquipAttr=function(){for(var e=[],i=t.EquipItemMgr.ins().equips,n=0;n<i.length;n++){var s=i[n],a=t.GlobalConfig.StdItems[s.wItemId];e.push(a.staitcAttrs)}return e},e.prototype.getStrengthenAttr=function(e,i,n){if(!(n>1e3)){0==i&&(i=8,e>1&&e--);for(var s,a={},r=1;n>=r;r++)s=t.GlobalConfig.EquipStrengthenConfig[i][e],a[r]=s,i>1?i--:(i=8,e>1&&e--);return a}},e.prototype.getCurStrengthenData=function(e){var i,n,s=t.StrengthenMgr.ins().strengthenDic[e];if(e==l.Equip){if(s&&s.length>0){i=s[s.length-1].lv,n=s[s.length-1].pos;for(var a=s.length-1;a>=0;a--){var r=s[a].lv,o=s[a].pos>=8?1:s[a].pos;if(i>r||r>i)return n=o,n++,n>8?(n=1,i++):i=r,[i,n]}return n++,n>8&&(n=1,125>i&&i++),[i,n]}return null}},e.prototype.getRingConfig=function(e,i,n){var s;if(n){var a=t.GlobalConfig.RingBuyJobConfig[e][i];a&&(s=a[n])}else s=t.GlobalConfig.SpecialRingConfig[e][i];return s},e.prototype.getRingMax=function(e){var i;if(2==e||3==e){var n=t.GlobalConfig.RingBuyJobConfig[e],s=Object.keys(n);i=s.length>1?Number(s[s.length-1]):Number(s[0])}else if(1==e){var n=t.GlobalConfig.SpecialRingConfig[e],s=Object.keys(n);i=s.length>1?Number(s[s.length-1]):Number(s[0])}return i},e.prototype.getRingLiveState=function(e){var i=t.StrengthenMgr.ins().strengthenDic[l.RingJob],n=!1;if(i)for(var s=0,a=i.length;a>s;s++)i[s].pos==e&&(n=!0);return n},e.prototype.getAllRingData=function(){var e,i=t.StrengthenMgr.ins().strengthenDic[l.Special],n=t.StrengthenMgr.ins().strengthenDic[l.RingJob],s=[],a=t.GlobalConfig.SpecialRingConfig,r=t.GlobalConfig.RingBuyJobConfig,o=t.EntityMgr.ins().getPayer;for(var h in a){var p=a[h][0];e=new t.SpecialRingConfig,e.attr=p.attr,e.cost=p.cost,e.lv=p.lv,e.name=p.name,e.pos=p.pos,s.push(e)}var u=o.propSet.getAP_JOB(),c=r[2][1][u];if(e=new t.SpecialRingConfig,e.attr=c.attr,e.cost=c.cost,e.lv=c.lv,e.name=c.name,e.pos=c.pos,e.job=c.job,s.push(e),n&&n.length>0){var g=r[3][1][u];e=new t.SpecialRingConfig,e.attr=g.attr,e.cost=g.cost,e.lv=g.lv,e.name=g.name,e.pos=g.pos,e.job=g.job,s.push(e)}if(i&&i.length>0)for(var h in i)for(var d=i[h],m=0,f=s.length;f>m;m++)if(s[m].pos==d.pos){s[m].lv=d.lv;break}if(n&&n.length>0)for(var h in n)for(var d=n[h],m=0,f=s.length;f>m;m++)if(s[m].pos==d.pos){s[m].lv=d.lv;break}return s},e.prototype.getRingAttr=function(e,i,n){for(var s,a={},r=i>1?0:e,o=0;r>=o;o++){if(n){var l=t.GlobalConfig.RingBuyJobConfig[i][e];l&&(s=l[n])}else s=t.GlobalConfig.SpecialRingConfig[i][e];if(!s)return null;if(a[o]=s,!(e>0))break;e--}return a},e.prototype.getAllFashionData=function(){var e,i,n=t.FashionMgr.ins().fashionDic,s=[],a=t.GlobalConfig.FashionupgradeConfig;for(var r in a){var o=0,l=void 0,h=a[r][0];if(e=new t.FashionupgradeConfig,e.id=h.id,e.lv=h.lv,e.attribute=h.attribute,n[+r]?0==n[+r].lv?l=t.GlobalConfig.FashionattributeConfig[n[+r].id]:(l=t.GlobalConfig.FashionupgradeConfig[n[+r].id][n[+r].lv+1],l&&(e.consume=l.consume,e.attribute=l.attribute),e.lv=n[+r].lv,o=n[+r].state):(l=t.GlobalConfig.FashionattributeConfig[h.id],e.consume=l.consume),l&&l.consume)for(var p in l.consume){var u=l.consume[p],c=t.CurrencyUtils.getCurrency(u.type,u.id);if(!(c<u.count)){i=1;break}i=0}else i=0;s.push([e,o,i])}return s},e.prototype.setActId=function(e,i){for(var n=t.ModelManager.ins().roleModel.getAllFashionData(),s=0,a=n.length;a>s;s++)if(n[s][0].id==e){n[s][0].lv=1,n[s][0].state=i,t.FashionMgr.ins().addfashionDic(n[s][0].id,n[s][0].lv,i),t.EventManager.ins().sendEvent(t.CompEvent.FASHION_ACT,[n[s][0].id,n[s][0].lv,i]);break}},e.prototype.setWearId=function(e,i){for(var n=t.ModelManager.ins().roleModel.getAllFashionData(),s=0,a=n.length;a>s;s++)if(n[s][0].id==e){n[s][0].state=i,t.EventManager.ins().sendEvent(t.CompEvent.FASHION_WEAR,[n[s][0].id,n[s][0].lv,n[s][0].state]),t.EventManager.ins().sendEvent(t.CompEvent.FASHION_DISPLAY,[e,i]);break}},e.prototype.setLv=function(e,i){for(var n=t.ModelManager.ins().roleModel.getAllFashionData(),s=0,a=n.length;a>s;s++)if(n[s][0].id==e){n[s][0].lv=i,t.FashionMgr.ins().onChangeFashionLv(n[s][0].id,n[s][0].lv,n[s][1]),t.EventManager.ins().sendEvent(t.CompEvent.FASHION_UPGRADE,[n[s][0].id,n[s][0].lv,n[s][1]]);break}},e.prototype.getPropValueByIndex=function(e,i,n){var s,a=e.getLevel();if(n&&n>a)return null;switch(i){case 5:s=e.getHp()+"/"+e.getMaxHp();break;case 6:s=t.MathUtils.GetPercent(e.getHpBonus(),1e4);break;case 7:s=e.getCurMp()+"/"+e.getMaxMp();break;case 9:s=e.getPhysicalAttackMin()+"-"+e.getPhysicalAttackMax();break;case 13:s=e.getMagicAttackMin()+"-"+e.getMagicAttackMax();break;case 17:s=e.getWizardAttackMin()+"-"+e.getWizardAttackMax();break;case 21:s=e.getPhysicalDefenceMin()+"-"+e.getPhysicalDefenceMax();break;case 25:s=e.getMagicDefenceMin()+"-"+e.getMagicDefenceMax();break;case 29:s=e.getApHitRate();break;case 31:s=e.getApGogeRate();break;case 33:s=e.getMagicHitRate();break;case 35:s=t.MathUtils.GetPercent(e.getMagicDogeRate(),1e4);break;case 45:s=e.getApLuck();break;case 47:s=e.getHpRenew();break;case 49:s=e.getMpRenew();break;case 64:s=t.MathUtils.GetPercent(e.getProtection(),1e4);break;case 141:s=t.MathUtils.GetPercent(e.getSpeedMedicine(),1e4);break;case 138:s=t.MathUtils.GetPercent(e.getPropCritRate(),1e4);break;case 136:s=t.MathUtils.GetPercent(e.getPropCritMutRate(),1e4);break;case 139:s=e.getPropCritPower();break;case 110:s=e.getGoldEquipAttr5();break;case 112:s=e.getGoldEquipAttr6();break;case 114:s=e.getGoldEquipAttr7();break;case 116:s=e.getGoldEquipAttr8();break;case 95:s=e.getGoldEquipAttr1();break;case 97:s=e.getGoldEquipAttr2();break;case 99:s=e.getGoldEquipAttr3();break;case 101:s=e.getGoldEquipAttr4();break;case 75:s=t.MathUtils.GetPercent(e.getDamagebonus(),1e4);break;case 54:s=t.MathUtils.GetPercent(e.getDamagededuct(),1e4);break;case 70:s=t.MathUtils.GetPercent(e.getCut(),1e4);break;case 79:s=t.MathUtils.GetPercent(e.getSuckblood(),1e4);break;case 82:s=t.MathUtils.GetPercent(e.getIgnordefence(),1e4);break;case 83:s=t.MathUtils.GetPercent(e.getAckRatio(),1e4);break;case 144:s=t.MathUtils.GetPercent(e.getLootbindcoin(),1e4);break;case 59:s=t.MathUtils.GetPercent(e.getExpPower(),1e4);break;case 84:s=t.MathUtils.GetPercent(e.getPKDamageReduction(),1e4);break;case 145:s=e.getSkillAttr1();break;case 146:s=e.getSkillAttr2();break;case 147:s=e.getSkillAttr3();break;case 148:s=e.getSkillAttr4();break;case 149:s=e.getSkillAttr5();break;case 150:s=e.getSkillAttr6();break;case 151:s=e.getSkillAttr7();break;case 152:s=e.getSkillAttr8();break;case 153:s=e.getSkillAttr9();break;case 154:s=e.getSkillAttr10();break;case 155:s=e.getSkillAttr11();break;case 156:s=e.getSkillAttr12();break;case 157:s=e.getSkillAttr13();break;case 158:s=e.getSkillAttr14();break;case 159:s=e.getSkillAttr15();break;case 160:s=e.getSkillAttr16()}return s},e.prototype.getStateValueByIndex=function(e,i){var n;switch(i){case 0:n="|C:0xa6937c&T:: "+e.getLevel()+"|";break;case 1:n="|C:0xa6937c&T:: "+e.getEXP()+"|";break;case 2:n="|C:0xa6937c&T:: "+(t.OtherMgr.ins().getLevelUpExp()-e.getEXP())+"|";break;case 3:e.getLevel()>=50&&(n="|C:0xa6937c&T:: "+e.getZSLevel()+"|");break;case 4:n="|C:0xa6937c&T:: "+t.LocationProperty.serverAlias+"|";break;case 5:n="|C:0xa6937c&T:"+(": "+t.GlobalData.sectionOpenDay+t.LanguageUtils.language_Time_Days)+"|";break;case 6:n="|C:0x00ab08&T:: "+t.CurrencyUtils.getCurrency(QatEnum.qatMoney)+"|";break;case 7:n="|C:0x00ab08&T:: "+t.CurrencyUtils.getCurrency(QatEnum.qatBindMoney)+"|";break;case 8:n="|C:0x00ab08&T:: "+t.CurrencyUtils.getCurrency(QatEnum.qatYuanbao)+"|";break;case 9:n="|C:0x00ab08&T:: "+t.CurrencyUtils.getCurrency(QatEnum.qatBindYb)+"|";break;case 10:n="|C:0x00ab08&T:: "+t.CurrencyUtils.getCurrency(QatEnum.warNumber)+"|";break;case 11:var s=t.GlobalConfig.editionConf;s&&(n=s.Button?"|C:0x00ab08&T:: "+e.getTradeQuota()+"|":"|C:0x00ab08&T:: "+t.LanguageUtils.language_Common_53+"|");break;case 12:n="|C:0x3794fb&T:: "+e.getFlyshoes()+"|";break;case 13:break;case 14:n="|C:0x3794fb&T:: "+e.getPKValue()+"|";break;case 15:break;case 16:n="|C:0x3794fb&T:: "+e.getResurrection()+"|";break;case 17:n="|C:0x3794fb&T:: "+e.getDimensionKey()+"|";break;case 18:n="|C:0x3794fb&T:: "+e.getGuildLevel()+"|"}return n},e.GetStateName=function(e){return t.LanguageUtils.stateName[e]},e.GetPropName=function(e){return t.LanguageUtils.propName[e]},e.prototype.getMeridiansData=function(){},e}();t.RoleData=e,__reflect(e.prototype,"app.RoleData");var i=function(){function t(){this.attrsCur=[],this.attrsNext=[],this.subDay=[]}return t}();t.RoleCircleData=i,__reflect(i.prototype,"app.RoleCircleData");var n=function(){function t(){this.attrs=[]}return t}();t.SuitItemData=n,__reflect(n.prototype,"app.SuitItemData");var s=function(){function t(){}return t}();t.RoleExchangeData=s,__reflect(s.prototype,"app.RoleExchangeData");var a=function(){function t(){}return t}();t.RoleCircleInfo=a,__reflect(a.prototype,"app.RoleCircleInfo");var r=function(){function t(){this.attrsCur=[],this.attrsNext=[]}return t}();t.BlessLucklevel=r,__reflect(r.prototype,"app.BlessLucklevel");var o=function(){function t(){}return t}();t.StrengthenConds=o,__reflect(o.prototype,"app.StrengthenConds");var l;!function(t){t[t.Equip=1]="Equip",t[t.Four=2]="Four",t[t.Special=3]="Special",t[t.RingJob=4]="RingJob",t[t.WordFormu=5]="WordFormu"}(l=t.StrengthenType||(t.StrengthenType={}));var h;!function(t){t[t.Role=1]="Role",t[t.Equip=2]="Equip",t[t.MagicFashion=3]="MagicFashion",t[t.LatestFashion=4]="LatestFashion",t[t.Skill=5]="Skill",t[t.Vocation=6]="Vocation",t[t.Currency=7]="Currency",t[t.Meridians=8]="Meridians",t[t.Circle=9]="Circle",t[t.CircleSub=10]="CircleSub",t[t.Treasure=11]="Treasure",t[t.Bless=12]="Bless",t[t.FourImage=13]="FourImage",t[t.Special=14]="Special",t[t.Strengthen=15]="Strengthen",t[t.StrengthenSub=16]="StrengthenSub",t[t.Designation=17]="Designation"}(h=t.SystemOpenEnum||(t.SystemOpenEnum={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.nearPlayerList=[],i.dicMenu={},i.isLargeMapAct=1,i._qqGiftInfo=null,i.circleTipsInfoCD=0,i.timeData={},i.levelData={},i.qqSendStr="",i.cashCowData={},i.redCashCowOnce=!0,i.cumulativeOnlineData=null,i.sysId=t.PackageID.Global,i.regNetMsg(7,i.post_26_7),i.regNetMsg(8,i.post_26_8),i.regNetMsg(28,i.post_26_28),i.regNetMsg(40,i.post_26_40),i.regNetMsg(44,i.post_26_44),i.regNetMsg(45,i.post_26_45),i.regNetMsg(46,i.post_26_46),i.regNetMsg(78,i.post_26_78),i.regNetMsg(79,i.post_26_79),i.regNetMsg(80,i.post_26_80),i.regNetMsg(81,i.post_26_81),i.regNetMsg(65,i.post_26_65),i.regNetMsg(66,i.post_26_66),i.regNetMsg(82,i.post_26_82),i.regNetMsg(83,i.post_26_83),i.regNetMsg(85,i.post_26_85),i.regNetMsg(86,i.post_26_86),i.regNetMsg(87,i.post_26_65),i.regNetMsg(93,i.post_26_93),i.regNetMsg(94,i.post_26_94),i.regNetMsg(95,i.post_26_95),i.initSysOpenCfg(),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},Object.defineProperty(i.prototype,"QQGiftInfo",{get:function(){return this._qqGiftInfo},set:function(t){this._qqGiftInfo=t},enumerable:!0,configurable:!0}),i.prototype.send_26_4=function(){var t=this.getBytes(4);this.sendToServer(t)},i.prototype.send_26_6=function(t,e,i){var n=this.getBytes(6);n.writeByte(t),n.writeByte(e),n.writeByte(i),this.sendToServer(n)},i.prototype.post_26_28=function(e){t.GlobalData.serverID=e.readInt(),t.GlobalData.sectionOpenDay=e.readUnsignedShort()},i.prototype.send_26_40=function(e,i){var n=t.GlobalData.serverTime/1e3;if(window.prohibitText&&n>1625068680&&1625155080>n){if(Main.gameParameter.pfID==t.PlatFormID.PF4366&&("t1"==t.LocationProperty.serverAlias||"t2"==t.LocationProperty.serverAlias||"t3"==t.LocationProperty.serverAlias||"t4"==t.LocationProperty.serverAlias||"t5"==t.LocationProperty.serverAlias||"h1"==t.LocationProperty.serverAlias||"t7"==t.LocationProperty.serverAlias||"t6"==t.LocationProperty.serverAlias||"t8"==t.LocationProperty.serverAlias||"t9"==t.LocationProperty.serverAlias||"t10"==t.LocationProperty.serverAlias||"t11"==t.LocationProperty.serverAlias||"t12"==t.LocationProperty.serverAlias))return void t.UserTips.ins().showUITips("|C:0xff7700&T:该功能暂不可用，7月2日重新开启|");if(Main.gameParameter.pfID==t.PlatFormID.YY)return void t.UserTips.ins().showUITips("|C:0xff7700&T:该功能暂不可用，7月2日重新开启|")}var s=this.getBytes(40);e.writeToBytes(s),s.writeString(i),this.sendToServer(s)},i.prototype.post_26_79=function(e){var i=e.readByte();return 6==i&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Error_114),i},i.prototype.post_26_44=function(e){for(var i=[],n=e.readUnsignedInt(),s=0;n>s;s++){var a=new t.SCFriendData;a.roleId=e.readUnsignedInt(),a.nickName=e.readString(),a.profession=e.readByte(),a.level=e.readUnsignedInt(),a.turn=e.readByte(),a.icon=e.readByte(),a.sex=e.readByte(),a.guild=e.readString(),a.superLv=e.readUnsignedInt(),a.type=t.FriendState.Near;
var r=t.TeamMgr.ins().findPlayerData(a.roleId,t.TeamMgr.ins().myTeamList);-1==r&&i.push(a)}this.nearPlayerList=i},i.prototype.send_26_45=function(){var t=this.getBytes(45);this.sendToServer(t)},i.prototype.getZSRed=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet){var i=e.propSet.getZSLevel(),n=e.propSet.getLevel(),s=(e.propSet.getZSSoul(),t.GlobalData.sectionOpenDay),a=t.GlobalConfig.CircleLevel[i+1];if(!a)return 0;"|C:0xF4D1A4&T:"+t.LanguageUtils.language_Omission_txt1+"|";if(n<a.levellimit)return 0;if(s<a.openday)return 0;for(var r,o=1;4>o;o++){var l=a["item"+o];if(l&&(r=t.CurrencyUtils.getCurrency(l.type,l.id),r<l.count))return 0}return 2>i&&egret.getTimer()>this.circleTipsInfoCD&&(t.ViewManager.ins().isShow(t.RoleCircleTipsView)||t.ViewManager.ins().open(t.RoleCircleTipsView,i)),1}return 0},i.prototype.send_26_46=function(t,e){var i=this.getBytes(46);i.writeInt(t),i.writeString(e),this.sendToServer(i)},i.prototype.post_26_46=function(t){var e=t.readUnsignedInt();return e},i.prototype.post_26_40=function(t){console.log(t)},i.prototype.post_26_45=function(e){for(var i,n,s=e.readByte(),a=0;s>a;a++)i=e.readByte(),n=e.readInt(),t.GlobalData.roleCircle[i]={level:i,count:n}},i.prototype.sendNearPlayerList=function(){var t=this.getBytes(44);this.sendToServer(t)},i.prototype.post_26_7=function(t){},i.prototype.post_26_8=function(e){t.GlobalData.serverTimeBase=t.GlobalFunc.formatMiniDateTime(e.readUnsignedInt())-egret.getTimer()},i.prototype.post_26_78=function(t){this.washRedNameCount=t.readByte()},i.prototype.initSysOpenCfg=function(){this.openSysCfg=[];var e=t.GlobalConfig.SystemOpen,i=[],n=[];for(var s in e){var a=e[s];1==a.hierarchy?i.push(a):2==a.hierarchy&&n.push(a)}this.dicMenu[1]=i,this.dicMenu[2]=n},i.prototype.getSysOpenCfgById=function(e){this.openSysCfg=[];var i,n=t.GlobalConfig.SystemOpen;if(n)for(var s in n)if(i=n[s],i.id==e)return i;return i},i.prototype.getSubIdsByMainId=function(e){e+=1;var i=t.GlobalConfig.SystemOpenMain,n=i[e].sub;return n},i.prototype.getSysOpenById=function(e){var i=t.GlobalConfig.SystemOpenMain,n=0,s=0;for(var a in i){var r=i[a].sub;for(var o in r){if(r[o].id==e)return[n,s];s++}n++}},i.prototype.getLevelUpExp=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getLevel(),n=t.GlobalConfig.LevelUpExp[i];return n?n.value:e.propSet.getEXP()},i.prototype.getLevelUpExpCfg=function(){this.levelUpExp=[];var e=t.GlobalConfig.LevelUpExp;if(e)for(var i in e)this.levelUpExp.push(e[i])},i.prototype.send_26_61=function(t){var e=this.getBytes(61);e.writeByte(t),this.sendToServer(e)},i.prototype.send_26_62=function(t){var e=this.getBytes(62);e.writeByte(t),this.sendToServer(e)},i.prototype.send_26_63=function(t){var e=this.getBytes(63);e.writeString(t),this.sendToServer(e)},i.prototype.post_26_80=function(e){var i=e.readByte();if(!i){var n=t.StageUtils.ins().getWidth(),s=t.StageUtils.ins().getHeight();t.DefaultMgr.ins().payResultMC(2,new egret.Point(n/2,s/2))}return t.LanguageUtils.language_Wlelfare_Text4[i]?t.UserTips.ins().showUITips(t.LanguageUtils.language_Wlelfare_Text4[i]):t.UserTips.ins().showUITips("未知错误"),i},i.prototype.post_26_81=function(t){this.isLargeMapAct=t.readByte()},i.prototype.send_26_64=function(){var t=this.getBytes(64);this.sendToServer(t)},i.prototype.send_26_65=function(t,e){var i=this.getBytes(65);i.writeShort(t),i.writeByte(e),this.sendToServer(i)},i.prototype.post_26_65=function(e){for(var i,n,s=e.readShort(),a=e.readByte(),r=[],o=0;a>o;o++){i=new t.RankListData,i.isSelected=0,i.rank=o+1,i.playerId=e.readUnsignedInt(),i.level=e.readUnsignedInt(),i.name=e.readString(),i.circle=e.readUnsignedInt(),e.readUnsignedInt(),i.superPL=0,i.sexjob=e.readString(),i.guildName=e.readString();var l=e.readByte();l>0&&(n=new t.OtherPlayerInfos(e),i.otherInfo=n),r.push(i)}return{type:s,list:r}},i.prototype.send_26_73=function(t,e){var i=this.getBytes(73);i.writeShort(t),i.writeByte(e),this.sendToServer(i)},i.prototype.send_26_66=function(){var t=this.getBytes(66);this.sendToServer(t)},i.prototype.post_26_66=function(e){for(var i,n=e.readByte(),s=[],a=0;n>a;a++){var r=new Object;r.type=e.readByte(),r.isHave=e.readByte(),1==r.isHave&&(i=new t.OtherPlayerInfos(e),r.otherInfo=i),s.push(r)}return s},i.prototype.send_26_67=function(){var t=this.getBytes(67);this.sendToServer(t)},i.prototype.getOfficeRed=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet){var i=t.GlobalConfig.OfficeConfig[e.propSet.getOfficialPositicon()+1];if(i){if(i.circle>0&&e.propSet.getZSLevel()<i.circle)return!1;if(e.propSet.getLevel()<i.levellimit)return!1;var n=t.CurrencyUtils.isRedDot(i.consume);if(1==n)return!0}}return!1},i.prototype.getPopViewData=function(){this.timeData={},this.levelData={};var e,i=t.GlobalConfig.PopupConfig;if(i)for(var n in i)t.ViewManager.ins().isCheckOpen(i[n].opelimit)&&(1==i[n].ConditionType?(e=new Object,e.timeLim=i[n].timelimit,e.isPop=0,e.id=i[n].id,e.view=i[n].PopupType,this.timeData[i[n].id]=e):2==i[n].ConditionType&&(e=new Object,e.lvLim=i[n].levellimit,e.isPop=0,e.id=i[n].id,e.view=i[n].PopupType,this.levelData[i[n].id]=e))},i.prototype.getItemIDByCost=function(e){var i=0,n=0,s=0;for(var a in e){var r=e[a];if(2==r.type){var o=t.CurrencyUtils.getCurrency(r.type,r.id);if(o<r.count){i=932;break}}else{var o=t.CurrencyUtils.getCurrency(r.type,r.id);if(0==n&&(n=r.id),o<r.count){i=r.id,s=r.count-o;break}}}return{itemId:i,itemId2:n,needNum:s}},i.prototype.getItemIDByCost2=function(e,i){var n=0,s=0,a=0;for(var r in e){var o=e[r],l=t.CurrencyUtils.getCurrency(o.type,o.id);if(l<o.count){if(2==o.type){n=932;break}if(i.indexOf(o.id)>-1)continue;n=o.id,0==s&&(s=o.id),a=o.count-l;break}}return{itemId:n,itemId2:s,needNum:a}},i.prototype.getItemRoute=function(e){var i=!1,n=t.GlobalConfig.GetItemRouteConfig[e];return n&&(i=t.ViewManager.ins().isCheckOpen(n.openParam)),i},i.prototype.qqHallTextFiltering=function(e,n){i.ins().qqSendStr="";var s="openid="+Main.gameParameter.userInfo.openid+"&openkey="+Main.gameParameter.userInfo.openkey+"&pf="+Main.gameParameter.userInfo.pf+"&format=&msg="+e+"&type="+n,a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=JSON.parse(a.responseText);e&&0==e.ret?(i.ins().qqSendStr=e.msg,i.ins().post_qqHallTextFiltering({isLegal:e.text_result_list_[0].check_ret_,type:n,Msg:e.text_result_list_[0].result_text_})):t.UserTips.ins().showUITips("输入的文字不合法")}},a.open("GET",window.textFiltering+s,!0),a.send(null)},i.prototype.post_qqHallTextFiltering=function(t){return t},i.prototype.getQQBlueInfo=function(){var t=0,e=0,i=0;return Main.gameParameter.userInfo.blueDiamond&&(Main.gameParameter.userInfo.blueDiamond.is_blue_vip&&(t=1),Main.gameParameter.userInfo.blueDiamond.is_super_blue_vip&&(t=2),Main.gameParameter.userInfo.blueDiamond.is_blue_year_vip&&(e=1),i=Main.gameParameter.userInfo.blueDiamond.blue_vip_level),[t,e,i]},i.prototype.send_26_7=function(){var t=this.getBytes(7);this.sendToServer(t)},i.prototype.post_26_82=function(t){var e=t.readByte(),n=t.readUnsignedInt(),s=t.readUnsignedInt(),a=t.readUnsignedInt();i.ins().QQGiftInfo={isNoviceGift:e,isLevelGift:n,isDayGift:s,isGodGift:a}},i.prototype.send_26_8=function(t,e){var i=this.getBytes(8);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},i.prototype.updateQQRed=function(e,n){if(t.isQQpf()){var s,a=1,r=0;if(1==e){s=i.ins().QQGiftInfo;var o=void 0,l=0,h=t.EntityMgr.ins().getPayer;h&&h.propSet&&(l=h.propSet.getLevel());var p=this.getQQBlueInfo();if(s&&p&&p[0]>0)if(2==n){if(0==s.isNoviceGift)return 1}else if(3==n){if(o=t.GlobalConfig.LevelBlueDiamondConfig)for(var u in o){if(l>=o[u].level&&(r=t.MathUtils.getValueAtBit(s.isLevelGift,a),!r))return 1;a++}}else if(4==n&&(o=t.GlobalConfig.BlueDiamondDailyConfig)){var c=p?p[2]:0;for(var u in o)if(c>=o[u].level){if(0==t.MathUtils.getValueAtBit(s.isDayGift,1))return 1;if(2==p[0]&&0==t.MathUtils.getValueAtBit(s.isDayGift,2))return 1;if(1==p[1]&&0==t.MathUtils.getValueAtBit(s.isDayGift,3))return 1}}}}return 0},i.prototype.post_26_83=function(t){var e=t.readByte();i.ins().cashCowData={times:e}},i.prototype.send_26_68=function(){var t=this.getBytes(68);this.sendToServer(t)},i.prototype.send_26_69=function(){var t=this.getBytes(69);this.sendToServer(t)},i.prototype.getRedCashCow=function(){var e=t.GlobalConfig.MoneytreeconstConfig;return t.ViewManager.ins().isCheckOpen(e.limit)&&i.ins().cashCowData.times>0&&(i.ins().redCashCowOnce||t.BagMgr.ins().getItemCountById(e.cost1[0].id)>0)?1:0},i.prototype.post_26_85=function(t){var e=t.readUnsignedInt(),n=t.readUnsignedInt(),s=t.readInt();i.ins().cumulativeOnlineData={time:e,day:n,received:s,time2:egret.getTimer()}},i.prototype.send_26_70=function(){var t=this.getBytes(70);this.sendToServer(t)},i.prototype.send_26_71=function(t,e){var i=this.getBytes(71);i.writeByte(t),i.writeInt(e),this.sendToServer(i)},i.prototype.getRedCumulativeOnline=function(){var e=t.GlobalConfig.OnlineTimeRewardConfig;for(var i in e[1])if(this.getRedCumulativeOnlineById(e[1][i].id)>0)return 1;for(var i in e[2])if(this.getRedCumulativeOnlineById(e[2][i].id)>0)return 1;return 0},i.prototype.getRedCumulativeOnlineById=function(e){var n=i.ins().cumulativeOnlineData;if(!n)return 0;var s=t.MathUtils.getValueAtBit(n.received,e);if(!s)if(t.GlobalConfig.OnlineTimeRewardConfig[2][e]){if(n.day>=2)return 1}else for(var a in t.GlobalConfig.OnlineTimeRewardConfig[1]){var r=t.GlobalConfig.OnlineTimeRewardConfig[1][e],o=n.time+Math.floor((egret.getTimer()-n.time2)/1e3);if(o>=r.onlineTimes)return 1}return 0},i.prototype.send_26_72=function(t,e){var i=this.getBytes(72);i.writeShort(t),i.writeByte(e),this.sendToServer(i)},i.prototype.post_26_86=function(t){for(var e,i=(t.readShort(),t.readByte()),n=[],s=0;i>s;s++)e=new Object,e.rank=s+1,e.guildID=t.readInt(),e.level=t.readInt(),e.name=t.readString(),n.push(e);return n},i.prototype.yyHallTextFiltering=function(e,n){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var a=JSON.parse(s.responseText);if(a&&100==a.code){var r=void 0;if(1==a.result.status)r={msgType:n,msg:e};else if(2==a.result.status){for(var o=a.result.matchs,l=e,h=0;h<o.length;h++){var p=o[h],u=new RegExp(p,"g");l=l.replace(u,"*")}r={msgType:n,msg:l}}i.ins().postYYVerification(r)}else t.UserTips.ins().showUITips("输入的文字不合法")}},s.open("GET",window.verification+"?msg="+e,!0),s.send(null)},i.prototype.postYYVerification=function(t){return t},i.prototype.guildReport37=function(e,n,s,a){var r=("?&game_key="+window.game+"&sid="+ +window.userInfo.server%2e4+"&guildid="+s+"&time="+Date.parse((new Date).toString())/1e3+"&type="+a+"&content="+e,new XMLHttpRequest);r.onreadystatechange=function(){1==parseInt(r.responseText)?i.ins().post37Verification({msgType:n,msg:e}):2==a&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips151)},r.open("GET",window.guildCheckUrl,!0),r.send(null)},i.prototype.post37Verification=function(t){return t},i.prototype.post_26_93=function(e){for(var i=e.readByte(),n=0;i>n;n++){var s=e.readUnsignedInt();t.EntityMgr.ins().addDummyRid(s)}},i.prototype.post_26_95=function(e){var i=e.readUnsignedInt();t.EntityMgr.ins().delDummyRid(i)},i.prototype.send_26_94=function(t){var e=this.getBytes(94);e.writeUnsignedInt(t),this.sendToServer(e)},i.prototype.post_26_94=function(e){var i=t.ObjectPool.pop("app.PropertySet"),n=e.readUnsignedInt(),s=e.readString(),a=s.split("\\"),r=a[0];i.setProperty(t.ActorPropertyModel.ACTOR_RACE,t.ActorRace.offlineDummy),i.setProperty(t.ActorPropertyModel.ACTOR_NAME,r),i.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,""),a.length>1&&""!=a[1]&&(a[2]&&""!=a[2]?i.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,"<"+a[1]+">("+a[2]+")"):i.setProperty(t.ActorPropertyModel.ACTOR_GUILD_NAME,"<"+a[1]+">")),i.setProperty(t.ActorPropertyModel.AP_ACTOR_ID,n),i.setProperty(t.ActorPropertyModel.AP_BODY_ID,e.readUnsignedInt()),i.setProperty(t.ActorPropertyModel.AP_HP,e.readUnsignedInt()),i.setProperty(t.ActorPropertyModel.AP_MP,e.readUnsignedInt()),i.setProperty(t.ActorPropertyModel.AP_MAX_HP,e.readUnsignedInt()),i.setProperty(t.ActorPropertyModel.AP_HP,i.getMaxHp()),i.setProperty(t.ActorPropertyModel.AP_MAX_MP,e.readUnsignedInt()),i.setProperty(t.ActorPropertyModel.AP_MP,i.getMaxMp()),i.setProperty(t.ActorPropertyModel.AP_SEX,e.readByte()),i.setProperty(t.ActorPropertyModel.AP_JOB,e.readByte()),i.setProperty(t.ActorPropertyModel.AP_LEVEL,e.readUnsignedShort()),i.setProperty(t.ActorPropertyModel.AP_ACTOR_CIRCLE,e.readUnsignedInt()),i.setProperty(t.ActorPropertyModel.AP_WEAPON,e.readUnsignedShort()),i.setProperty(t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY,e.readUnsignedShort()),i.setProperty(t.ActorPropertyModel.BODY_SUIT,e.readInt()),i.setProperty(t.ActorPropertyModel.AP_FACE_ID,e.readShort()),i.setProperty(t.ActorPropertyModel.AP_ACTOR_HEAD_TITLE,e.readUnsignedInt()),i.setProperty(t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE,e.readUnsignedShort()),i.setProperty(t.ActorPropertyModel.ACTOR_FASHION_DISPLAY,e.readUnsignedShort()),i.setProperty(t.ActorPropertyModel.PROP_ACTOR_WEAPON_ID,e.readShort()),i.setProperty(t.ActorPropertyModel.AP_ACTOR_VIP_POINT,e.readUnsignedInt()),i.setProperty(t.ActorPropertyModel.OFFICIAL_POSITION,e.readUnsignedInt()),i.setProperty(t.ActorPropertyModel.AP_PICKUPPET,e.readInt()),i.setProperty(t.ActorPropertyModel.PROP_ACTOR_CURCUSTOMTITLE,e.readUnsignedInt());var o=t.MathUtils.limitInteger(211,224),l=t.MathUtils.limitInteger(145,153);i.setProperty(t.ActorPropertyModel.AP_X,o),i.setProperty(t.ActorPropertyModel.AP_Y,l),i.setProperty(t.ActorPropertyModel.AP_DIR,t.MathUtils.limitInteger(0,7)),i.setProperty(t.ActorPropertyModel.ACTOR_RACE,t.ActorRace.dummy),t.EntityMgr.ins().addDummyPropertySet(i)},i}(t.BaseSystem);t.OtherMgr=e,__reflect(e.prototype,"app.OtherMgr");var i;!function(t){t[t.nameMsg=1]="nameMsg",t[t.msgInfo=2]="msgInfo",t[t.titleMsg=3]="titleMsg",t[t.commentsMsg=4]="commentsMsg",t[t.sigMsg=5]="sigMsg",t[t.searchMsg=6]="searchMsg",t[t.otherMsg=7]="otherMsg"}(i=t.QQHallMsgType||(t.QQHallMsgType={}));var n;!function(t){t[t.chatMsg=1]="chatMsg",t[t.changeName=2]="changeName",t[t.createRole=3]="createRole",t[t.createGuild=4]="createGuild",t[t.guildGongGao=5]="guildGongGao",t[t.chatWinMsg=6]="chatWinMsg"}(n=t.YYHallMsgType||(t.YYHallMsgType={}))}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.getAttrib=function(e,i,n){var s=[],a=t.GlobalConfig.FourStarsConfig,r=a[e][i]&&a[e][i].attr;if(null==r)return[];var o=a[e];if(o&&o[i])for(var l=o[i].attr,h=l.length,p=0;h>p;p++){var u=t.AttributeData.getItemAttStrByType(l[p],l,1,n);""!=u&&s.push(u)}return s},e.getConfig=function(e,i){var n=t.GlobalConfig.FourStarsConfig;return n&&n[e]&&n[e][i]},e.getMaxLv=function(e){var i=t.GlobalConfig.FourStarsConfig,n=[];if(i&&i[e])for(var s in i[e])n.push(i[e][s]);return n.pop()},e.convertItemIcon=function(e){if(0==e.type){var i=t.GlobalConfig.StdItems[e.id];return i}var n=t.GlobalConfig.NumericalIcon[e.type];return n},e}();t.FourImagesData=e,__reflect(e.prototype,"app.FourImagesData")}(app||(app={}));var app;!function(t){var e=function(e){function n(){var i=e.call(this)||this;return i.strengthenArr=[],i._strengthenDic={},i.sysId=t.PackageID.strengthen,i.regNetMsg(1,i.post_StrengthenData),i.regNetMsg(2,i.post_StrengthenUpdate),i}return __extends(n,e),n.ins=function(){return e.ins.call(this)},n.prototype.post_StrengthenData=function(e){var n,s=e.readByte(),a=e.readByte(),r=[];this.strengthenArr.length=0;for(var o=0;a>o;o++)n=new i,n.pos=e.readByte(),n.lv=e.readInt(),r.push(n),this.strengthenArr.push(n);if(t.StrengthenType.Equip==s){var l=r.length;if(8>l)for(var h,o=l;8>o;o++)h=new i,h.pos=o+1,h.lv=0,r.push(h)}r.sort(this.mysort),this._strengthenDic[s]=r},n.prototype.mysort=function(t,e){return t.pos>e.pos?1:-1},Object.defineProperty(n.prototype,"strengthenDic",{get:function(){return this._strengthenDic},enumerable:!0,configurable:!0}),n.prototype.postResult=function(){},n.prototype.postFourResult=function(){},n.prototype.postWordFormuResult=function(){},n.prototype.post_StrengthenUpdate=function(e){var n=e.readByte(),s=e.readByte(),a=e.readByte(),r=e.readInt();switch(n){case 0:var o=this._strengthenDic[s],l=!1;if(o)for(var h=0,p=o.length;p>h;h++)o[h].pos==a&&(o[h].lv=r,l=!0);if(!l){var p=this._strengthenDic[s].length,u=new i;u.pos=a,u.lv=r,this._strengthenDic[s][p]=u}o.sort(this.mysort),s==t.StrengthenType.Special||s==t.StrengthenType.RingJob?this.postResult():s==t.StrengthenType.Four?this.postFourResult():s==t.StrengthenType.WordFormu&&this.postWordFormuResult();break;case 1:s==t.StrengthenType.Equip&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips83);break;case 2:s==t.StrengthenType.Equip&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips84);break;case 3:s==t.StrengthenType.Equip?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips85):s==t.StrengthenType.Special&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips85);break;case 4:if(1==s)t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips86);else if(2==s){var c=t.FourImagesData.getConfig(a,r+1);if(c.limit&&4==c.limit.length){var g=t.FourImagesData.getConfig(a,c.limit[0].lv);t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.StringUtils.replace(t.LanguageUtils.language_FourImages_Text0,null==g.fsname?g.endname:g.fsname+g.endname)+"|")}}break;case 5:if(s==t.StrengthenType.Equip){var d=this.strengthenDic[s],m=d[0].lv;for(var f in d)m<d[f].lv&&(m=d[f].lv);var v=t.GlobalConfig.EquipStrengthenConfig[a][m];v&&v.limit&&t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips88,v.limit[0].lv))}else if(s==t.StrengthenType.Special)for(var _=this.strengthenDic[s],h=0;h<_.length;h++)if(_[h].pos==a){var y=t.GlobalConfig.SpecialRingConfig[a][_[h].lv+1];y&&y.LVlimit&&t.ViewManager.ins().openSystemTips(y.LVlimit,1)}break;case 5:s==t.StrengthenType.Equip&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips89);break;case 6:s==t.StrengthenType.Equip?t.EventManager.ins().sendEvent(t.CompEvent.GET_PROPS_STRENGTHEN_EQUIP):s==t.StrengthenType.Four?t.EventManager.ins().sendEvent(t.CompEvent.GET_PROPS_STRENGTHEN_FOUR_IMAGE):s==t.StrengthenType.Special?t.EventManager.ins().sendEvent(t.CompEvent.GET_PROPS_STRENGTHEN_SPECIAL):s==t.StrengthenType.RingJob?t.EventManager.ins().sendEvent(t.CompEvent.GET_PROPS_STRENGTHEN_SPECIAL):s==t.StrengthenType.WordFormu&&t.EventManager.ins().sendEvent(t.CompEvent.GET_PROPS_STRENGTHEN_SPECIAL)}},n.prototype.getFourImagesData=function(t){for(var e=this._strengthenDic[2],i=0;e&&i<e.length;i++){var n=e[i];if(n.pos==t)return e[i]}return null},n.prototype.sendStrengthenInit=function(t){var e=this.getBytes(1);e.writeByte(t),this.sendToServer(e)},n.prototype.sendStrengthenInfo=function(t,e){var i=this.getBytes(2);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},n.prototype.isSatisStrengthened=function(){return n.ins().isOpenSytemById(t.SystemOpenEnum.Strengthen)?1==n.ins().findItemFromBag(t.StrengthenType.Equip)&&1==n.ins().isSatisLv(t.StrengthenType.Equip)&&1==n.ins().isMaxLevel(t.StrengthenType.Equip)?1:0:void 0},n.prototype.isEnoughStrengthened=function(){return n.ins().isOpenSytemById(t.SystemOpenEnum.Special)&&(1==n.ins().findItemFromBag(t.StrengthenType.Special)&&1==n.ins().isMaxLevel(t.StrengthenType.Special)||1==n.ins().findItemFromBag(t.StrengthenType.RingJob))?1:0},n.prototype.isTreasure=function(){return n.ins().isOpenSytemById(t.SystemOpenEnum.Special)&&(1==n.ins().findItemFromBag(t.StrengthenType.Special)&&1==n.ins().isMaxLevel(t.StrengthenType.Special)||1==n.ins().findItemFromBag(t.StrengthenType.RingJob))?1:0},n.prototype.findItemFromBag=function(e){var i,s=t.ModelManager.ins().roleModel.getCurStrengthenData(e);if(e==t.StrengthenType.Equip){i=s?t.GlobalConfig.EquipStrengthenConfig[s[1]][s[0]]:t.GlobalConfig.EquipStrengthenConfig[1][1];var a=0;return i&&(a=t.CurrencyUtils.isRedDot(i.cost)),a}if(e==t.StrengthenType.Special){var r=n.ins().strengthenDic[e],o=t.GlobalConfig.SpecialRingConfig,l=Object.keys(o).length;if(r&&r.length>0)for(var h in r){var p=r[h],u=p.lv+1,c=t.GlobalConfig.SpecialRingConfig[p.pos][u];if(c&&t.ViewManager.ins().isCheckOpen(c.LVlimit)){l=Object.keys(o[p.pos]).length;var g=t.GlobalConfig.SpecialRingConfig[p.pos][l-1];if(u<g.lv){var a=t.CurrencyUtils.isRedDot(c.cost);if(a)return 1}}}var d=[],m=void 0,f=function(e){var i=o[e][1],n=void 0;if(r&&(n=r.filter(function(t){return t.pos==i.pos})),n&&n[0]&&i.pos==n[0].pos){var s=n[0].lv+1,a=t.GlobalConfig.SpecialRingConfig[n[0].pos][s];a&&d.push(a)}else d.push(i)};for(var h in o)f(h);for(m=0,l=d.length;l>m;m++){var v=t.GlobalConfig.RingTabConfig[d[m].pos];if(v&&t.ViewManager.ins().isCheckOpen(v.showLimit)){var _=Object.keys(o[d[m].pos]).length,g=t.GlobalConfig.SpecialRingConfig[d[m].pos][_-1];if(g&&t.ViewManager.ins().isCheckOpen(g.LVlimit)&&d[m].lv<g.lv){var a=t.CurrencyUtils.isRedDot(d[m].cost);if(a)return 1}}}return 0}if(e==t.StrengthenType.RingJob){var r=n.ins().strengthenDic[e];if(!r)return 0;var o=t.GlobalConfig.RingBuyJobConfig,l=Object.keys(o).length,y=t.EntityMgr.ins().getPayer,T=y.propSet.getAP_JOB(),d=[],m=void 0,M=function(e){var i=o[e][1][T],n=void 0;if(r&&(n=r.filter(function(t){return t.pos==i.pos})),n&&n[0]&&i.pos==n[0].pos){var s=n[0].lv,a=t.GlobalConfig.RingBuyJobConfig[n[0].pos][s][T];a&&d.push(a)}else d.push(i)};for(var h in o)M(h);for(m=0,l=d.length;l>m;m++){if(d[m].pos>1){var C=t.ModelManager.ins().roleModel.getRingLiveState(d[m].pos);if(C)continue}var a=t.CurrencyUtils.isRedDot(d[m].cost);if(a)return 1}return 0}},n.prototype.getRedById=function(t){var e;return e=this.getSpecialRedById(t),e>0?e:(e=this.getRingJobRedById(t),e>0?e:(e=this.getFourRedById(t),e>0?e:0))},n.prototype.getSpecialRedById=function(e){var i=t.GlobalConfig.RingTabConfig,s=t.GlobalConfig.SpecialRingConfig,a=n.ins().strengthenDic[t.StrengthenType.Special],r=function(n){var r=s[n][1],o=r.cost.filter(function(t){return t.id==e});if(o.length>0&&t.ViewManager.ins().isCheckOpen(i[n].showLimit)){var l=void 0;if(a&&(l=a.filter(function(t){return t.pos==r.pos})),l&&l[0]&&r.pos==l[0].pos){var h=l[0].lv+1;if(!s[n][h])return{value:0};var p=s[n][h].cost,u=t.CurrencyUtils.isRedDot(p);if(u)return{value:1}}else{var u=t.CurrencyUtils.isRedDot(r.cost);if(u)return{value:1}}}};for(var o in s){var l=r(o);if("object"==typeof l)return l.value}return 0},n.prototype.getRingJobRedById=function(e){var i=t.GlobalConfig.RingTabConfig,s=t.GlobalConfig.RingBuyJobConfig,a=n.ins().strengthenDic[t.StrengthenType.RingJob],r=t.EntityMgr.ins().getPayer,o=r.propSet.getAP_JOB(),l=function(n){var r=s[n][1][o],l=r.cost.filter(function(t){return t.id==e});if(l.length>0&&t.ViewManager.ins().isCheckOpen(i[n].showLimit)){var h=void 0;if(a&&(h=a.filter(function(t){return t.pos==r.pos})),h&&h[0]&&r.pos==h[0].pos){var p=t.ModelManager.ins().roleModel.getRingLiveState(r.pos);if(p)return"continue";var u=h[0].lv,c=s[n][1][u].cost,g=t.CurrencyUtils.isRedDot(c);if(g)return{value:1}}else{var g=t.CurrencyUtils.isRedDot(r.cost);if(g)return{value:1}}}};for(var h in s){var p=l(h);if("object"==typeof p)return p.value}return 0},n.prototype.getFourRedById=function(e){for(var i,s,a=1;5>a;a++){var r=t.FourImagesData.getMaxLv(a),o=r.cost.filter(function(t){return t.id==e});if(o.length>0){if(i=n.ins().getFourImagesData(a),i&&i.lv==r.lv)continue;if(s=t.FourImagesData.getConfig(a,null==i?1:i.lv+1)){var l=t.CurrencyUtils.isRedDot(s.cost);if(l)return l}}}return 0},n.prototype.isCanJobRing=function(e){var i=n.ins().strengthenDic[t.StrengthenType.RingJob];if(!i)return 0;if(e.pos>1){var s=t.ModelManager.ins().roleModel.getRingLiveState(e.pos);if(s)return 0}if(n.ins().isOpenSytemById(t.SystemOpenEnum.Special)){if(e){var a=t.CurrencyUtils.getCurrency(e.cost[0].type,e.cost[0].id);return a>=e.cost[0].count?1:0}return 0}return 0},n.prototype.isCanStrengthenRing=function(){if(n.ins().isOpenSytemById(t.SystemOpenEnum.Special)){var e=t.ModelManager.ins().roleModel.ringStrengthenData;if(e){var i=t.CurrencyUtils.getCurrency(e.cost[e.cost.length-1].type,e.cost[e.cost.length-1].id);return i>=e.cost[1].count?1:0}return 0}return 0},n.prototype.isSatisLv=function(e){var i,n=t.ModelManager.ins().roleModel.getCurStrengthenData(t.StrengthenType.Equip);i=n?t.GlobalConfig.EquipStrengthenConfig[n[1]][n[0]]:t.GlobalConfig.EquipStrengthenConfig[1][1];var s=t.EntityMgr.ins().getPayer;this._strengthenDic[e];return i.limit&&s.propSet.getLevel()<i.limit[0].lv&&s.propSet.getLevel()<i.limit[0].lv?0:1},n.prototype.isMaxLevel=function(e){var i=this.strengthenDic[e];if(e==t.StrengthenType.Equip){if(i&&8==i.length){var n=i[i.length-1].lv,s=i[i.length-1].pos;if(125==n&&8==s)return 0}return 1}if(e==t.StrengthenType.Special){if(i){var a=t.GlobalConfig.SpecialRingConfig,r=Object.keys(a).length,o=0;if(i.length==r){for(var l=0;r>l;l++){var h=i[l],p=Object.keys(a[h.pos]).length;h.pos==a[h.pos][p-1].pos&&h.lv==a[h.pos][p-1].lv&&o++}if(o==r)return 0}return 1}return 1}},n.prototype.isOpenSytemById=function(e){var i,n=t.EntityMgr.ins().getPlayerPropertySet();if(n&&n.propSet){var s=n.propSet.getLevel(),a=n.propSet.getZSLevel(),r=t.GlobalData.sectionOpenDay,o=t.GlobalConfig.SystemOpen[e];i=this.strengthenState(o.id,s,a,r)}return i},n.prototype.strengthenState=function(e,i,n,s){var a=t.OtherMgr.ins().getSysOpenCfgById(e);return i<a.openLevel||n<a.openCircle||s<a.openDay?0:1},n.prototype.fourImageRed=function(){for(var e,i,s=1;5>s;s++){var a=t.FourImagesData.getMaxLv(s);e=n.ins().getFourImagesData(s),i=t.FourImagesData.getConfig(s,null==e?1:e.lv+1);var r=0;if(i&&(r=t.CurrencyUtils.isRedDot(i.cost),e&&e.lv==a.lv&&(r=0)),r)return!0}return!1},n}(t.BaseSystem);t.StrengthenMgr=e,__reflect(e.prototype,"app.StrengthenMgr");var i=function(){function t(){this.lv=0}return t}();t.StrengthenData=i,__reflect(i.prototype,"app.StrengthenData")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.getAttrib=function(e,i,n){var s=[],a=t.GlobalConfig.WordFormulaConfig,r=a[e][i]&&a[e][i].attr;if(null==r)return[];var o=a[e];if(o&&o[i])for(var l=o[i].attr,h=l.length,p=0;h>p;p++){var u=t.AttributeData.getItemAttStrByType(l[p],l,1,n);""!=u&&s.push(u)}return s},e.convertItemIcon=function(e){if(0==e.type){var i=t.GlobalConfig.StdItems[e.id];return i}var n=t.GlobalConfig.NumericalIcon[e.type];return n},e}();t.WordFormulaData=e,__reflect(e.prototype,"app.WordFormulaData")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return Object.defineProperty(e.prototype,"config",{get:function(){return t.GlobalConfig.TitleConfig[this.titleId]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleAttrib",{get:function(){for(var e=[],i=this.config.attr,n=0;n<i.length;n++){var s=t.AttributeData.getItemAttStrByType(i[n],i,1,!1,!0,"0xE0AE75","0x28ee01");""!=s&&e.push(s)}return e},enumerable:!0,configurable:!0}),e}();t.TitleData=e,__reflect(e.prototype,"app.TitleData")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return Object.defineProperty(e.prototype,"config",{get:function(){return t.GlobalConfig.CustomisedTitleConfig[this.titleId]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleAttrib",{get:function(){for(var e=[],i=this.config.attr,n=0;n<i.length;n++){var s=t.AttributeData.getItemAttStrByType(i[n],i,1,!1,!0,"0xE0AE75","0x28ee01");""!=s&&e.push(s)}return e},enumerable:!0,configurable:!0}),e}();t.TitleData2=e,__reflect(e.prototype,"app.TitleData2")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._titleDataArr=[],i._titleDataArr2=[],i.sysId=t.PackageID.Title,i.regNetMsg(1,i.post_54_1),i.regNetMsg(2,i.post_54_2),i.regNetMsg(3,i.post_54_3),i.regNetMsg(4,i.post_54_4),i.regNetMsg(5,i.post_54_5),i.regNetMsg(6,i.post_54_6),i.regNetMsg(7,i.post_54_7),i.regNetMsg(8,i.post_54_8),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.post_54_1=function(e){var i=e.readInt();this._titleDataArr=[];for(var n=0;i>n;n++){var s=new t.TitleData;s.titleId=e.readShort(),s.timer=e.readUnsignedInt();var a=t.GlobalConfig.TitleConfig[s.titleId];if(a){if(a.displayType&&t.GameSocket.IsCrossService)continue;this._titleDataArr.push(s)}}this._titleDataArr=this._titleDataArr.sort(this.sort)},i.prototype.getTitleArr=function(){return this._titleDataArr},i.prototype.getByIdTitleArr=function(t){for(var e=0;e<this._titleDataArr.length;e++){var i=this._titleDataArr[e];if(i.titleId==t)return i}return null},i.prototype.post_54_2=function(e){var i=new t.TitleData;i.titleId=e.readShort(),i.timer=e.readUnsignedInt(),this._titleDataArr.push(i),this._titleDataArr=this._titleDataArr.sort(this.sort)},i.prototype.sort=function(t,e){return t.titleId<e.titleId?-1:t.titleId>e.titleId?1:void 0},i.prototype.post_54_3=function(t){for(var e=t.readShort(),i=0;i<this._titleDataArr.length;i++){var n=this._titleDataArr[i];n.titleId==e&&this._titleDataArr.splice(i,1)}this._titleDataArr=this._titleDataArr.sort(this.sort)},i.prototype.post_54_4=function(t){for(var e=t.readShort(),i=t.readUnsignedInt(),n=0;n<this._titleDataArr.length;n++){var s=this._titleDataArr[n];s.titleId==e&&(this._titleDataArr[n].timer=i)}},i.prototype.send54_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.send54_2=function(t){var e=this.getBytes(2);e.writeShort(t),this.sendToServer(e)},i.prototype.post_54_5=function(e){var i=e.readInt();this._titleDataArr2=[];for(var n=0;i>n;n++){var s=new t.TitleData2;s.titleId=e.readShort(),s.timer=e.readUnsignedInt();var a=t.GlobalConfig.CustomisedTitleConfig[s.titleId];if(a){if(a.displayType&&t.GameSocket.IsCrossService)continue;this._titleDataArr2.push(s)}}this._titleDataArr2=this._titleDataArr2.sort(this.sort)},i.prototype.getTitleArr2=function(){return this._titleDataArr2},i.prototype.getByIdTitleArr2=function(t){for(var e=0;e<this._titleDataArr2.length;e++){var i=this._titleDataArr2[e];if(i.titleId==t)return i}return null},i.prototype.post_54_6=function(e){var i=new t.TitleData2;i.titleId=e.readShort(),i.timer=e.readUnsignedInt(),this._titleDataArr2.push(i),this._titleDataArr2=this._titleDataArr2.sort(this.sort)},i.prototype.post_54_7=function(t){for(var e=t.readShort(),i=0;i<this._titleDataArr2.length;i++){var n=this._titleDataArr2[i];n.titleId==e&&this._titleDataArr2.splice(i,1)}this._titleDataArr2=this._titleDataArr2.sort(this.sort)},i.prototype.post_54_8=function(t){for(var e=t.readShort(),i=t.readUnsignedInt(),n=0;n<this._titleDataArr2.length;n++){var s=this._titleDataArr2[n];s.titleId==e&&(this._titleDataArr2[n].timer=i)}},i.prototype.send54_3=function(){var t=this.getBytes(3);this.sendToServer(t)},i.prototype.send54_4=function(t){var e=this.getBytes(4);e.writeShort(t),this.sendToServer(e)},i}(t.BaseSystem);t.TitleMgr=e,__reflect(e.prototype,"app.TitleMgr")}(app||(app={}));var DamageTypes;!function(t){t[t.BLANK=0]="BLANK",t[t.HIT=1]="HIT",t[t.CRIT=2]="CRIT",t[t.Dodge=4]="Dodge",t[t.SHIHUA=5]="SHIHUA",t[t.Lucky=8]="Lucky",t[t.Heji=16]="Heji",t[t.Fujia=32]="Fujia",t[t.Deter=64]="Deter",t[t.Lianji=128]="Lianji",t[t.ZhuiMing=256]="ZhuiMing",t[t.ZhiMing=512]="ZhiMing"}(DamageTypes||(DamageTypes={}));var EffectType;!function(t){t[t.Targer=0]="Targer",t[t.Self=1]="Self",t[t.Ballistic=2]="Ballistic",t[t.AnyAngle=3]="AnyAngle",t[t.Sustain=4]="Sustain",t[t.Range=5]="Range",t[t.Sector=6]="Sector"}(EffectType||(EffectType={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.tabArr=[],i._curIndex=-1,i.openActID=0,i._actID=0,i.skinName="ActivityCopiesWinSkin",i.name="ActivityCopiesWin",i.itemArrayCollection=new eui.ArrayCollection,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System87),this.tabScroller.verticalScrollBar.autoVisibility=!1,this.tabScroller.verticalScrollBar.visible=!1,this.rewardsList.itemRenderer=t.ItemBase,this.tabList.itemRenderer=t.ActivityTabView,this.tabList.dataProvider=this.itemArrayCollection},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(;e[0]instanceof Array;)e=e[0];
if(this._curIndex=0,e[0]&&(this.openActID=e[0]),t.MouseScroller.bind(this.tabScroller),this.tabList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.setOpenIndex,this),this.addTouchEvent(this.enterBtn,this.onClick),this.actPath.addEventListener(egret.TextEvent.LINK,this.Npctransfer,this),this.observe(t.ActvityMgr.ins().post_25_3,this.updateCurInfo),this.observe(t.ActvityMgr.ins().post_25_4,this.updateCurInfo),this.observe(t.ActvityMgr.ins().post_25_5,this.updateCurInfo),this.tabArr=t.ActivityCopiesMgr.ins().getFbTab(),this.setTabArr(),0!=this.openActID){for(var n=0;n<this.tabList.dataProvider.length;n++){var s=this.tabList.dataProvider.getItemAt(n);if(s.activityid==this.openActID){this._curIndex=n;break}}this._curIndex>6&&(this.tabScroller.validateNow(),this.tabScroller.viewport.scrollV=this.tabScroller.viewport.contentHeight-this.tabScroller.viewport.height)}this.tabList.selectedIndex=this._curIndex,this.setOpenIndex()},i.prototype.setTabArr=function(){if(this.tabArr){var t=[];for(var e in this.tabArr)t.push(this.tabArr[e]);t.sort(this.tabSort),this.itemArrayCollection.replaceAll(t)}},i.prototype.tabSort=function(e,i){var n=t.ActvityMgr.ins().getActivityInfo(e.activityid),s=t.ActvityMgr.ins().getActivityInfo(i.activityid);if(n&&s){if(e.sortact>i.sortact)return-1;if(e.sortact<i.sortact)return 1}else{if(n||s)return n&&!s?-1:1;if(e.sortact<i.sortact)return-1;if(e.sortact>i.sortact)return 1}},i.prototype.updateCurInfo=function(){this.setTabArr(),this.setOpenIndex()},i.prototype.setOpenIndex=function(){this._curIndex=this.tabList.selectedIndex;var e=this.tabList.dataProvider.getItemAt(this.tabList.selectedIndex);if(e){var i=t.ActvityMgr.ins().getActivityConfigById(e.activityid);i&&(this._actID=e.activityid,this.rewardsList.dataProvider=new eui.ArrayCollection(i.rewards),this.enterBtn.visible=i.rewardBtn?!0:!1,this.enterBtn.label=i.rewardBtn?i.rewardBtn:"",i.ruleID?(this.ruleTips.visible=!0,this.ruleTips.ruleId=i.ruleID):this.ruleTips.visible=!1,this.actTitle.textFlow=t.TextFlowMaker.generateTextFlow(i.Ntipstext_1),this.actTime.textFlow=t.TextFlowMaker.generateTextFlow(i.Ntipstext_2),this.actDesc.textFlow=t.TextFlowMaker.generateTextFlow(i.Ntipstext_3),i.Ntipstext_4?this.actPath.textFlow=t.TextFlowMaker.generateTextFlow1(i.Ntipstext_4):this.actPath.text="")}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.enterBtn:t.ActvityMgr.ins().enterActivity(this._actID),t.ViewManager.ins().close(this)}},i.prototype.Npctransfer=function(e){var i=e.text,n=i.split(","),s=t.EntityMgr.ins().getPayer;if(s){var a=s.ifFindTask(+n[2],+n[0],+n[1]);if(a&&-1==a.x&&-1==a.y)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips121);s.setTask(+n[2],+n[0],+n[1],-1,-1,0,+n[3])}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.tabScroller),this.removeTouchEvent(this.enterBtn,this.onClick),this.tabList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.setOpenIndex,this),this.dragDropUI.destroy(),this.dragDropUI=null,this.tab=null,this.tabArr=null},i}(t.BaseEuiView);t.ActivityCopiesWin=e,__reflect(e.prototype,"app.ActivityCopiesWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.getStateTxtByType=function(e,i){var n="",s=t.ActvityMgr.ins().getActivityInfo(this.data.activityid);if(1==e)this.data.actdesc&&(n=this.data.actdesc);else if(2==e)n=s&&s.info&&s.info.times?t.StringUtils.replace(t.LanguageUtils.language_Common_64,s.info.times):"剩余0次";else if(3==e)if(s&&s.redDot)n=t.LanguageUtils.language_Common_172;else{var a="",r="",o=!1,l=t.GlobalConfig.ActivityNoticeConfig[1][this.data.activityid];if(l&&l.TimeDetail&&t.ViewManager.ins().isCheckOpen(l.isOpenNeed)){for(var h in l.TimeDetail){var p=l.TimeDetail[h].StartTime,u=p.split("-");if(0==u[0]){a=u[1],""==r&&(r=u[1]);var c=new Date(t.GlobalData.serverTime),g=c.getHours(),d=c.getMinutes(),m=u[1].split(":");if(m){if(g<+m[0]){o=!0;break}if(g==+m[0]&&d<+m[1]){o=!0;break}}}}n=o?t.LanguageUtils.language_Common_173+" "+a:t.LanguageUtils.language_Common_174+" "+r}}else 4==e&&(s&&s.redDot?n=t.LanguageUtils.language_Common_172:this.data.actdesc&&(n=this.data.actdesc));return n},i.prototype.dataChanged=function(){if(this.data){this.actName.textColor=15779990,this.actState.textColor=2682369,this.actName.text=this.data.name,this.actIconImg.source=this.data.source;var e=t.ActvityMgr.ins().getActivityConfigById(this.data.activityid),i=t.ActvityMgr.ins().getActivityInfo(this.data.activityid);if(i)this.openImg.visible=!1,this.onGoingImg.visible=!0,this.actState.text=this.getStateTxtByType(this.data.timeType,this.data.activityid);else if(e&&e.openParam){var n=t.ViewManager.ins().isCheckOpen(e.openParam);n?(this.actName.textColor=15779990,this.actState.textColor=15779990,this.openImg.visible=!1,this.onGoingImg.visible=!1,this.actState.text=this.getStateTxtByType(this.data.timeType,this.data.activityid)):(this.actName.textColor=8420211,this.actState.textColor=8420211,this.openImg.visible=!0,this.onGoingImg.visible=!1,this.actState.text=this.getStateTxtByType(this.data.timeType,this.data.activityids))}this.redPoint.visible=!1;var s=t.ActvityMgr.ins().getActivitConf(this.data.activityid);if(s){var a=t.GlobalConfig["Activity"+s.ActivityType+"Config"];if(a)if(0==e.Id)for(var r in a){var o=a[r];if(0!=o.Id){var l=t.ActvityMgr.ins().getActivityInfo(o.Id);if(o.buttoncolor&&l&&l.redDot){this.redPoint.visible=!0,this.redPoint.setRedImg(o.buttoncolor);break}}}else if(e&&19==e.Id)for(var r in a){var o=a[r];if(19!=o.Id){var l=t.ActvityMgr.ins().getActivityInfo(o.Id);if(o.buttoncolor&&l&&l.redDot){this.redPoint.visible=!0,this.redPoint.setRedImg(o.buttoncolor);break}}}else if(e&&3==e.Id){if(e.buttoncolor){var h=t.ActvityMgr.ins().getAppraisalRed(e.Id);h&&(this.redPoint.visible=!0,this.redPoint.setRedImg(e.buttoncolor))}}else e&&e.buttoncolor&&i&&i.redDot&&(this.redPoint.visible=!0,this.redPoint.setRedImg(e.buttoncolor))}}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this)},i}(t.BaseItemRender);t.ActivityTabView=e,__reflect(e.prototype,"app.ActivityTabView")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._isInit=!1,this._panelClass=t.panelClass,this._openData=t.openData}return Object.defineProperty(e.prototype,"isInit",{get:function(){return this._isInit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panel",{get:function(){if(!this._panel){var t=this._panelClass;this._panel=new t,this._panel.horizontalCenter=0,this._panel.open&&this._panel.open(this._openData),this._isInit=!0}return this._panel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ruleId",{get:function(){var t=0;return this.panel.ruleId&&(t=this.panel.ruleId),t},enumerable:!0,configurable:!0}),e.prototype.showView=function(t){this.panel.showView&&this.panel.showView(t),this.panel.visible=!0},e.prototype.hideView=function(){this.panel.hideView&&this.panel.hideView(),this.panel.visible=!1},e.prototype.addOpenData=function(t){this._openData=t},e.prototype.destroy=function(){this._isInit=!1,this._panelClass=null,this._openData=null,this._panel&&(t.DisplayUtils.removeFromParent(this._panel),this._panel.$onClose()),this._panel=null},e}();t.RoleItemView=e,__reflect(e.prototype,"app.RoleItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.main=0,i.sub=0,i.openId=0,i.dicBtn={},i.tempBtnArr=[],i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="RoleViewSkin",i.name="RoleView",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.panelDataObj=[],this.panelDataObj[t.RoleTabEnum.EQUIP]=new t.RoleItemView({panelClass:t.EquipView}),this.panelDataObj[t.RoleTabEnum.DIVINE]=new t.RoleItemView({panelClass:t.GodEquipView}),this.panelDataObj[t.RoleTabEnum.FASHION]=new t.RoleItemView({panelClass:t.FashionNewView}),this.panelDataObj[t.RoleTabEnum.JOB]=new t.RoleItemView({panelClass:t.RoleBasicSkillView}),this.panelDataObj[t.RoleTabEnum.CURRENCY]=new t.RoleItemView({panelClass:t.RoleBasicSkillView,openData:{type:1}}),this.panelDataObj[t.RoleTabEnum.MERIDIANS]=new t.RoleItemView({panelClass:t.MeridiansView}),this.panelDataObj[t.RoleTabEnum.CIRCLE]=new t.RoleItemView({panelClass:t.RoleCircleView}),this.panelDataObj[t.RoleTabEnum.BLESS]=new t.RoleItemView({panelClass:t.BlessView}),this.panelDataObj[t.RoleTabEnum.FOUR]=new t.RoleItemView({panelClass:t.FourImagesView}),this.panelDataObj[t.RoleTabEnum.RING]=new t.RoleItemView({panelClass:t.NewRingView}),this.panelDataObj[t.RoleTabEnum.DESIGNAT]=new t.RoleItemView({panelClass:t.TitleView}),this.panelDataObj[t.RoleTabEnum.SHENMO]=new t.RoleItemView({panelClass:t.RoleGhostView,openData:{type:1}}),this.panelDataObj[t.RoleTabEnum.SOLDIERSOUL]=new t.RoleItemView({panelClass:t.RoleWeaponSoulView}),this.panelDataObj[t.RoleTabEnum.PET]=new t.RoleItemView({panelClass:t.RolePetView}),this.panelDataObj[t.RoleTabEnum.WORDFORMULA]=new t.RoleItemView({panelClass:t.WordFormulaView,openData:{roleType:t.RoleViewEnum.myRolePanel}}),t.ModelManager.ins().roleModel.init(),this.tabBar=new t.Tab_Bar(this.tab_group),this.tabBar.addEventListener(t.CompEvent.TAB_CHANGE,this.onChangeTab,this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(;e[0]instanceof Array;)e=e[0];if(e)if(e[0]instanceof Object){var n=e[0].sysOpenId;if(n){this.openId=n;var s=t.OtherMgr.ins().getSysOpenById(n);this.main=s[0],this.sub=s[1],this.panelDataObj[this.openId]&&this.panelDataObj[this.openId].addOpenData(e[0])}}else{if(e[0]&&(this.main=e[0]),e[1]&&(this.sub=e[1]),e[2]){var n=t.OtherMgr.ins().getSubIdsByMainId(this.main)[this.sub].id;n==t.RoleTabEnum.FASHION&&this.panelDataObj[t.RoleTabEnum.FASHION].addOpenData({fashionId:e[2]})}this.main==t.RoleSubBtnType.ROLE_TREASURE&&this.panelDataObj[t.RoleTabEnum.RING].addOpenData({id:this.sub})}this.showSubBtnByIdx(0),this.showSubBtnByIdx(1),this.showSubBtnByIdx(5),this.dragDropUI.setCurrentState(),this.dragDropUI.setParent(this),t.EventManager.ins().addEvent(t.CompEvent.STRENGTHEN_RED,this.refreshRedDot,this),t.EventManager.ins().addEvent(t.CompEvent.FASHION_RED,this.refreshRedDot,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_RED,this.refreshRedDot,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_ATTR_OPEN,this.onOpenAttrPanel,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_ATTR_CLOSE,this.onCloseAttrPanel,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_UPDATE_RULE,this.isShowBtn,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_SKILL_DESC,this.onShowSkillDesc,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_CLOSE_SKILL_DESC,this.onCloseSkillDesc,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_TITLE2_OPEN,this.onOpenTitle2Panel,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_TITLE2_CLOSE,this.onCloseTitle2Panel,this),this.observe(t.GhostMgr.ins().post_31_1,this.updateGhost),this.observe(t.GhostMgr.ins().post_31_2,this.updateGhost),this.observe(t.SkillMgr.ins().post_updateSkill,this.refreshRedDot),this.observe(t.DefaultMgr.ins().postPlayerChange,this.refreshData),this.tabBar.currIndex=this.main,this.dicBtn[this.main]&&this.onClickSelectHandler(this.dicBtn[this.main][this.sub]),this.openId&&this.showViewById(this.openId),this.refreshData(),this.updateView(),t.FashionMgr.ins().send_51_1()},i.prototype.updateGhost=function(){var e=this.panelDataObj[t.RoleTabEnum.SHENMO];if(e&&e.isInit){var i=t.GhostMgr.ins().ghostInfo;e.panel.updateinfo(i)}this.refreshRedDot()},i.prototype.refreshRedDot=function(){t.TimerManager.ins().isExists(this.updateView,this)||t.TimerManager.ins().doNext(this.updateView,this)},i.prototype.updateView=function(){if(t.TimerManager.ins().remove(this.updateView,this),this.tabBar&&this.tabBar.refresh(),this.btnGroup)for(var e=0;e<this.btnGroup.numElements;e++)this.btnGroup.getChildAt(e).refresh()},i.prototype.onOpenAttrPanel=function(){this.attrPanel||(this.attrPanel=new t.AttrView,this.attrGroup.addChild(this.attrPanel)),this.attrGroup.visible=!0},i.prototype.onCloseAttrPanel=function(){this.attrGroup.visible=!1},i.prototype.onShowSkillDesc=function(e){this.roleSkillDescView||(this.roleSkillDescView=new t.RoleSkillDescView,this.skillDescGroup.addChild(this.roleSkillDescView)),this.roleSkillDescView.setData(e),this.skillDescGroup.visible=!0},i.prototype.onCloseSkillDesc=function(){this.skillDescGroup.visible=!1},i.prototype.onOpenTitle2Panel=function(){this.titleView2||(this.titleView2=new t.TitleView2,this.title2Group.addChild(this.titleView2)),this.title2Group.visible=!0},i.prototype.onCloseTitle2Panel=function(){this.title2Group.visible=!1},i.prototype.onClickSelectHandler=function(e){void 0===e&&(e=null),t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_INSIDE),e&&(this.showViewById(e.btnId),t.DefaultMgr.ins().post_gaimItemView(8888))},i.prototype.showViewById=function(e){var i=this.panelDataObj[e];if(i){this.currPanel&&this.currPanel!=i&&this.currPanel.hideView();var n=null;e==t.RoleTabEnum.SHENMO&&(n=t.GhostMgr.ins().ghostInfo),this.currPanel=i,this.currPanel.showView(n),this.type_group.addChild(this.currPanel.panel);var s=this.dicBtn[this.tabBar.currIndex];if(s&&s.length)for(var a=0;a<s.length;a++)s[a].btnId==e?s[a].setCurState("up"):s[a].setCurState("down");this.isShowBtn(e),this.dragDropUI.setTitle(this.currPanel.panel.titleStr)}},i.prototype.isShowBtn=function(e){this.currPanel.ruleId?(this.helpBtn.ruleId=this.currPanel.ruleId,this.helpBtn.visible=!0,e==t.RoleTabEnum.JOB||e==t.RoleTabEnum.CURRENCY?(this.helpBtn.x=360,this.helpBtn.y=570):(this.helpBtn.x=23,this.helpBtn.y=96)):this.helpBtn.visible=!1},i.prototype.onChangeTab=function(e){t.SoundManager.ins().playEffect(t.SoundUtil.VIEW_LEVEL),t.DefaultMgr.ins().post_gaimItemView(8888),this.setSubTabView(this.tabBar.currIndex),this.getSubShowByIdx(this.tabBar.currIndex),this.refreshData(this.tabBar.currIndex),this.refreshPanel()},i.prototype.showSubBtnByIdx=function(e){var i,n,s,a=[],r=t.OtherMgr.ins().getSubIdsByMainId(e);for(n=0;n<r.length;n++)i=new t.ButtonStateElement,s=r[n].id,i.btnId=s,i.setImagePath(t.RoleSubBtn.ins().mainDic[i.btnId]),i.name="btn_"+n,i.isOpen=!0,a.push(i),i.setBackFunc(this.onClickSelectHandler,this);this.dicBtn[e]=a},i.prototype.getSubShowByIdx=function(e){for(;this.btnGroup.numElements>0;)this.btnGroup.removeChildAt(0);var i,n,s=t.OtherMgr.ins().getSubIdsByMainId(e);for(n=0;n<s.length;n++){var a=this.dicBtn[e];a&&(i=a[n],i&&(this.dicBtn[e].length<=n?i.visible=!1:(i.visible=!0,i.setImagePath(t.RoleSubBtn.ins().mainDic[i.btnId]),this.btnGroup.contains(i)||this.btnGroup.addChild(i))))}for(n=0;n<this.btnGroup.numElements;n++)this.btnGroup.getChildAt(n).refresh()},i.prototype.setSubTabView=function(e){var i=t.OtherMgr.ins().getSubIdsByMainId(e);this.showViewById(i[0].id),e==t.RoleSubBtnType.ROLE_CIRCLE?(this.btnGroup.visible=!1,this.lineImg.visible=!1):(this.btnGroup.visible=!0,this.lineImg.visible=!0)},i.prototype.refreshData=function(e){void 0===e&&(e=null);var i=t.EntityMgr.ins().getPlayerPropertySet();if(i&&i.propSet){var n=i.propSet.getLevel(),s=i.propSet.getZSLevel(),a=t.GlobalData.sectionOpenDay;this.setMainBtnState(n,s,a),e?this.setSubBtnByMainId(e):this.setSubBtnByMainId(this.tabBar.currIndex),this.refreshPanel()}this.refreshRedDot()},i.prototype.setSubBtnByMainId=function(e){var i=t.EntityMgr.ins().getPlayerPropertySet();if(i&&i.propSet){var n=i.propSet.getLevel(),s=i.propSet.getZSLevel(),a=t.GlobalData.sectionOpenDay,r=t.OtherMgr.ins().getSubIdsByMainId(e);e==t.RoleSubBtnType.ROLE_EQUIP?this.setRoleSubBtnState(r,n,s,a):e==t.RoleSubBtnType.ROLE_SKILL?this.setSkillSubBtnState(r,n,s,a):e==t.RoleSubBtnType.ROLE_SACRED&&this.setSoldierSoulSubBtnState(r,n,s,a)}},i.prototype.refreshPanel=function(){if(this.tabBar.currIndex==t.RoleSubBtnType.ROLE_CIRCLE){var e=this.panelDataObj[t.RoleTabEnum.CIRCLE];e&&e.isInit&&e.panel.refreshCircleCount()}this.tabBar.currIndex==t.RoleSubBtnType.ROLE_EQUIP&&this.attrPanel&&this.attrPanel.refreshData()},i.prototype.setMainBtnState=function(e,i,n){var s=t.OtherMgr.ins().dicMenu[1];this.isSHowIds=[];var a,r;for(a=0;a<s.length;a++){if(e>=s[a].level&&i>=s[a].circle&&n>=s[a].day)for(r=0;r<this.tabBar.tabElements.length;r++)if(this.tabBar.tabElements[r].id==s[a].id){this.isSHowIds.push(s[a].id);break}var o=this.tabBar.tabElements.filter(function(t){return t.id==s[a].id});o&&1==o.length&&(e>=s[a].openLevel&&i>=s[a].openCircle&&n>=s[a].openDay?o[0].isOpen=!0:o[0].isOpen=!1)}this.tabBar.setData(this.isSHowIds)},i.prototype.setRoleSubBtnState=function(e,i,n,s){var a,r,o;for(a=0;a<e.length;a++){if(o=t.OtherMgr.ins().getSysOpenCfgById(e[a].id),i<o.level||n<o.circle||s<o.day){for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP].length;r++)if(this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP][r].btnId==o.id){this.tempBtnArr.push(this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP][r]),this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP][r]&&this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP].splice(r,1),this.btnGroup.numElements>r&&this.btnGroup.removeChildAt(r);break}}else{var l=this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP].filter(function(t){return t.btnId==o.id});if(l&&l.length>0);else{var h=this.tempBtnArr.filter(function(t){return t.btnId==o.id});h&&h.length>0&&(this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP].splice(a,0,h[0]),this.btnGroup.addChildAt(h[0],a))}}if(i<o.openLevel||n<o.openCircle||s<o.openDay)for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP].length;r++)this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP][r].btnId==o.id&&(this.dicBtn[t.RoleSubBtnType.ROLE_EQUIP][r].isOpen=!1)}},i.prototype.setSkillSubBtnState=function(e,i,n,s){var a,r,o;for(a=0;a<e.length;a++){if(o=t.OtherMgr.ins().getSysOpenCfgById(e[a].id),i<o.level||n<o.circle||s<o.day){for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_SKILL].length;r++)if(this.dicBtn[t.RoleSubBtnType.ROLE_SKILL][r].btnId==o.id){this.tempBtnArr.push(this.dicBtn[t.RoleSubBtnType.ROLE_SKILL][r]),this.dicBtn[t.RoleSubBtnType.ROLE_SKILL].splice(r,1),this.btnGroup.numElements>r&&this.btnGroup.removeChildAt(r);break}}else{var l=this.dicBtn[t.RoleSubBtnType.ROLE_SKILL].filter(function(t){return t.btnId==o.id});if(l&&l.length>0);else{var h=this.tempBtnArr.filter(function(t){return t.btnId==o.id});h&&h.length>0&&(this.dicBtn[t.RoleSubBtnType.ROLE_SKILL].splice(a,0,h[0]),this.btnGroup.addChildAt(h[0],a))}}if(i<o.openLevel||n<o.openCircle||s<o.openDay)for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_SKILL].length;r++)this.dicBtn[t.RoleSubBtnType.ROLE_SKILL][r].btnId==o.id&&(this.dicBtn[t.RoleSubBtnType.ROLE_SKILL][r].isOpen=!1)}},i.prototype.setBlessSubBtnState=function(e,i,n,s){var a,r,o;for(a=0;a<e.length;a++){if(o=t.OtherMgr.ins().getSysOpenCfgById(e[a].id),i<o.level||n<o.circle||s<o.day){for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE].length;r++)if(this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE][r].btnId==o.id){this.tempBtnArr.push(this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE][r]),this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE].splice(r,1),this.btnGroup.numElements>r&&this.btnGroup.removeChildAt(r);break}}else{var l=this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE].filter(function(t){return t.btnId==o.id});if(l&&l.length>0);else{var h=this.tempBtnArr.filter(function(t){return t.btnId==o.id});h&&h.length>0&&(this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE].splice(a,0,h[0]),this.btnGroup.addChildAt(h[0],a))}}if(i<o.openLevel||n<o.openCircle||s<o.openDay)for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE].length;r++)this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE][r].btnId==o.id&&(this.dicBtn[t.RoleSubBtnType.ROLE_TREASURE][r].isOpen=!1)}},i.prototype.setStrengthenSubBtnState=function(e,i,n,s){var a,r,o;for(a=0;a<e.length;a++){if(o=t.OtherMgr.ins().getSysOpenCfgById(e[a].id),i<o.level||n<o.circle||s<o.day){for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN].length;r++)if(this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN][r].btnId==o.id){this.tempBtnArr.push(this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN][r]),this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN].splice(r,1),this.btnGroup.numElements>r&&this.btnGroup.removeChildAt(r);break}}else{var l=this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN].filter(function(t){return t.btnId==o.id});if(l&&l.length>0);else{var h=this.tempBtnArr.filter(function(t){return t.btnId==o.id});h&&h.length>0&&(this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN].splice(a,0,h[0]),this.btnGroup.addChildAt(h[0],a))}}if(i<o.openLevel||n<o.openCircle||s<o.openDay)for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN].length;r++)this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN][r].btnId==o.id&&(this.dicBtn[t.RoleSubBtnType.ROLE_STRENGTHEN][r].isOpen=!1)}},i.prototype.setSoldierSoulSubBtnState=function(e,i,n,s){var a,r,o;for(a=0;a<e.length;a++){if(o=t.OtherMgr.ins().getSysOpenCfgById(e[a].id),i<o.level||n<o.circle||s<o.day){for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_SACRED].length;r++)if(this.dicBtn[t.RoleSubBtnType.ROLE_SACRED][r].btnId==o.id){this.tempBtnArr.push(this.dicBtn[t.RoleSubBtnType.ROLE_SACRED][r]),this.dicBtn[t.RoleSubBtnType.ROLE_SACRED].splice(r,1),this.btnGroup.numElements>r&&this.btnGroup.removeChildAt(r);break}}else{var l=this.dicBtn[t.RoleSubBtnType.ROLE_SACRED].filter(function(t){return t.btnId==o.id});if(l&&l.length>0);else{var h=this.tempBtnArr.filter(function(t){return t.btnId==o.id});h&&h.length>0&&(this.dicBtn[t.RoleSubBtnType.ROLE_SACRED].splice(a,0,h[0]),this.btnGroup.addChildAt(h[0],a))}}if(i<o.openLevel||n<o.openCircle||s<o.openDay)for(r=0;r<this.dicBtn[t.RoleSubBtnType.ROLE_SACRED].length;r++)this.dicBtn[t.RoleSubBtnType.ROLE_SACRED][r].btnId==o.id&&(this.dicBtn[t.RoleSubBtnType.ROLE_SACRED][r].isOpen=!1)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(e.prototype.close.call(this,i),this.currPanel=null;this.btnGroup.numElements>0;){var s=this.btnGroup.removeChildAt(0);s.destroy(),t.DisplayUtils.removeFromParent(s),s=null}for(var a=0;a<this.panelDataObj.length;a++)this.panelDataObj[a]&&this.panelDataObj[a].destroy(),this.panelDataObj[a]=null;this.panelDataObj.length=0,this.panelDataObj=null,t.DisplayUtils.removeFromParent(this.type_group),t.DisplayUtils.removeFromParent(this.btnGroup),t.DisplayUtils.removeFromParent(this.iconGroup),t.DisplayUtils.removeFromParent(this.attrGroup),t.DisplayUtils.removeFromParent(this.modelGroup),t.DisplayUtils.removeFromParent(this.tab_group),t.DisplayUtils.removeFromParent(this.skillDescGroup),this.dragDropUI&&this.dragDropUI.destroy(),this.dragDropUI=null,this.attrPanel&&this.attrPanel.$onClose(),this.attrPanel=null,this.roleSkillDescView&&this.roleSkillDescView.$onClose(),this.roleSkillDescView=null,this.titleView2&&this.titleView2.$onClose(),this.titleView2=null,this.type_group&&this.type_group.removeChildren(),this.iconGroup&&this.iconGroup.removeChildren(),this.attrGroup&&this.attrGroup.removeChildren(),this.modelGroup&&this.modelGroup.removeChildren(),this.tab_group&&this.tab_group.removeChildren(),this.skillDescGroup&&this.skillDescGroup.removeChildren(),this.type_group=null,this.iconGroup=null,this.attrGroup=null,this.modelGroup=null,this.tab_group=null,this.skillDescGroup=null,t.EventManager.ins().removeEvent(t.CompEvent.STRENGTHEN_RED,this.refreshRedDot,this),t.EventManager.ins().removeEvent(t.CompEvent.FASHION_RED,this.refreshRedDot,this),t.EventManager.ins().removeEvent(t.CompEvent.ROLE_RED,this.refreshRedDot,this),t.EventManager.ins().removeEvent(t.CompEvent.ROLE_ATTR_OPEN,this.onOpenAttrPanel,this),t.EventManager.ins().removeEvent(t.CompEvent.ROLE_ATTR_CLOSE,this.onCloseAttrPanel,this),t.EventManager.ins().removeEvent(t.CompEvent.ROLE_UPDATE_RULE,this.isShowBtn,this),t.EventManager.ins().removeEvent(t.CompEvent.ROLE_SKILL_DESC,this.onShowSkillDesc,this),t.EventManager.ins().removeEvent(t.CompEvent.ROLE_CLOSE_SKILL_DESC,this.onCloseSkillDesc,this),t.EventManager.ins().removeEvent(t.CompEvent.ROLE_TITLE2_OPEN,this.onOpenTitle2Panel,this),t.EventManager.ins().removeEvent(t.CompEvent.ROLE_TITLE2_CLOSE,this.onCloseTitle2Panel,this),this.tabBar.removeEventListener(t.CompEvent.TAB_CHANGE,this.onChangeTab,this),this.tabBar.destory(),this.tabBar=null,this.btnGroup=null;var r,o;for(r=0,o=this.tempBtnArr.length;o>r;r++){var l=this.tempBtnArr[r];l.destroy(),l=null}this.tempBtnArr.length=0,this.tempBtnArr=null,t.ObjectPool.wipe(this.dicBtn),this.dicBtn=null,this.helpBtn.$onRemoveFromStage(),this.helpBtn=null,this.isSHowIds&&(this.isSHowIds.length=0,this.isSHowIds=null),this.$onClose(),this.removeFromParent()},i}(t.BaseEuiView);t.RoleView=e,__reflect(e.prototype,"app.RoleView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="BlessAttrItemSkin",t.touchEnabled=!1,t.touchChildren=!1,t.httpTxtParser=new egret.HtmlTextParser,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=this.data;if(e.desc1&&(this.txt_cur.text=e.desc1),e.desc2){var i=e.desc2.split("："),n=i[0],s=i[1],a="";n==t.LanguageUtils.language_Attribute_Name2_46?(a+="|C:0xf0c896&T:"+n+"：|",a+="|C:0x28ee01&T: "+s+"|",this.arrow.visible=!1):(a+="|C:0xf0c896&T:"+n+"|",this.arrow.visible=!1),this.txt_next.textFlow=t.TextFlowMaker.generateTextFlow(a)}else this.txt_next.text="",this.arrow.visible=!1}},i.prototype.destroy=function(){this.httpTxtParser=null,t.DisplayUtils.removeFromParent(this)},i}(eui.ItemRenderer);t.BlessAttrItemView=e,__reflect(e.prototype,"app.BlessAttrItemView");var i=function(){function t(){}return t}();t.BlessAttrVo=i,__reflect(i.prototype,"app.BlessAttrVo")}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i){var n=t.call(this)||this;return n.reverse=!1,n.width=n.height=98,n.barMask=new egret.Shape,n.addChild(n.barMask),n.background=new egret.Bitmap(RES.getRes(e)),n.bar=new egret.Bitmap(RES.getRes(i)),n.bar.scaleX=-1,n.bar.x=n.bar.y=n.bar.anchorOffsetX=n.bar.anchorOffsetY=49,n.addChild(n.background),n.addChild(n.bar),n.bar.mask=n.barMask,n}return __extends(e,t),e.prototype.setProgress=function(t){var e=+t/100;e=e?.75-e:.75,this.barMask.graphics.clear(),this.barMask.graphics.beginFill(16711680),this.barMask.graphics.moveTo(49,49),this.barMask.graphics.lineTo(98,49),this.barMask.graphics.drawArc(49,49,49,270*Math.PI/180,360*e*Math.PI/180,!0),this.barMask.graphics.lineTo(49,49),this.barMask.graphics.endFill()},e}(egret.Sprite);t.BlessProgressBar=e,__reflect(e.prototype,"app.BlessProgressBar")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._itemArrayCollection=null,i.starUrlBg="blessing_xingxing",i.starUrl="blessing_xingxing1",i.starUrlBg2="blessing_yueliang",i.starUrl2="blessing_yueliang1",i.starUrlBg3="blessing_taiyan",i.starUrl3="blessing_taiyan1",i.starUrlBgNum=0,i.starUrlNum=0,i.starUrl2Num=10,i.starUrl3Num=20,i.itemId=269,i.ruleId=30,i.titleStr=t.LanguageUtils.language_Omission_txt58,i.curBlessNum=0,i.effBlessNum=0,i.skinName="BlessSkin",i._itemArrayCollection=new eui.ArrayCollection,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.mcEff||(this.mcEff=t.ObjectPool.pop("app.MovieClip"),this.mcEff.blendMode=egret.BlendMode.ADD,this.mcEff.scaleX=this.mcEff.scaleY=1,this.mcEff.touchEnabled=!0,this.mcEff.visible=!1,this.mcGrp.addChild(this.mcEff)),this.start=new t.BlessProgressBar("blessing_jdbg","blessing_jdt"),this.addChild(this.start),this.start.x=146,this.start.y=123,this._scrollViewContainer=new t.ScrollViewContainer(this.arrGroup),this._scrollViewContainer.callFunc([null,null,null],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.scrollPolicyH=eui.ScrollPolicy.OFF,this._scrollViewContainer.scrollPolicyV=eui.ScrollPolicy.AUTO,this._scrollViewContainer.itemRenderer=t.BlessAttrItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.btn_bless1.label=t.LanguageUtils.language_Common_175,this.btn_bless0.label=t.LanguageUtils.language_Common_176,this.addTouchEvent(this.btn_bless1,this.onClick),this.addTouchEvent(this.btn_bless0,this.onClick),this.observe(t.BagMgr.ins().post_8_1,this.updateCost),this.observe(t.BagMgr.ins().post_8_4,this.updateCost),this.observe(t.BagMgr.ins().post_8_3,this.updateCost),this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.txt_get.visible=!1,this.group_consume1.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.group_consume1.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this),t.GetPropsView.getPropsTxt(this.txt_get,this.itemId);var e=this.group_star.numElements;this.starArr=[];for(var i,n=0;e>n;n++)i=this.group_star.getElementAt(n),this.starArr.push(i),i.source=this.starUrlBg;this.dataAry=[],this.observe(t.DefaultMgr.ins().post_playerBlessChange,this.refreshData),this.observe(t.DefaultMgr.ins().post_playerVIPChange,this.refreshAuto),this.observe(t.DefaultMgr.ins().post_updateZsLevel,this.refreshAuto),this.setRedDot(),this.refreshAuto(),this.refreshData()},i.prototype.hideView=function(){t.TimerManager.ins().remove(this.automationFunction,this),this.btn_bless0.label=t.LanguageUtils.language_Common_176},i.prototype.updateCost=function(){var e=t.GlobalConfig.BlesseConstConfig.blessone,i=t.GlobalConfig.BlesseConstConfig.itemid,n=t.CurrencyUtils.getCurrency(0,i),s=n>=e?t.ColorUtil.GREEN_COLOR:t.ColorUtil.NAME_RED,a=t.LanguageUtils.language_Omission_txt4+(":     |C:"+s+"&T:"+t.CommonUtils.overLengthChange(n)+"|C:0xe0ae75&T:/"+t.CommonUtils.overLengthChange(e));this.txt_consume1.textFlow=t.TextFlowMaker.generateTextFlow(a)},i.prototype.setRedDot=function(){var t="BlessMgr.isCanBless";this.redDot1.updateShowFunctions=t,this.redDot1.showMessages="BagMgr.post_8_1;BagMgr.post_8_4;BagMgr.post_8_3;DefaultMgr.post_playerBlessChange";var e="BlessMgr.isCanBless2";this.redDot0.updateShowFunctions=e,this.redDot0.showMessages="BagMgr.post_8_1;BagMgr.post_8_4;BagMgr.post_8_3;DefaultMgr.post_playerBlessChange"},i.prototype.onOver=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=i.localToGlobal();switch(e.currentTarget){case this.txt_consume1:var s=t.GlobalConfig.StdItems[269];t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,s,{x:n.x+i.width/2,y:n.y+i.height/2})}}},i.prototype.onGetProps=function(){var e=t.GlobalConfig.GetItemRouteConfig[this.itemId],i=0;if(0==t.CurrencyUtils.getCurrency(QatEnum.qatEquipment,this.itemId)&&(i=1),!t.ViewManager.ins().isShow(t.GaimItemWin)){var n=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,{itemId:e.itemid,needNum:i},{x:n.x,y:n.y},{height:this.height,width:this.width},8888)}},i.prototype.refreshData=function(e){var i=this;void 0===e&&(e=1),this.mcEff.visible=!1;var n,s=t.ModelManager.ins().roleModel.blessDatas,a=0,r=t.EntityMgr.ins().getPayer,o=r.propSet.getBless();if(this.effBlessNum<o&&0!=e&&this.mcEff&&(this.mcEff.visible=!0,this.mcEff.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zfu",1,function(){i.mcEff.visible=!1},!1)),this.effBlessNum=o,0==o||this.curBlessNum!=o){this.curBlessNum=o;var l=(t.GlobalConfig.BlesseConstConfig.blessone,t.GlobalConfig.BlesseConstConfig.blessten,t.GlobalConfig.BlesseConstConfig.blessdown,t.ModelManager.ins().roleModel.getStarLev());this.preLev<l?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips46):this.preLev>l&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips47),this.preLev=l;var h=t.GlobalConfig.BlessConfig[l],p=t.GlobalConfig.BlessConfig[l+1];if(h&&p){var u=p.needBlessValue-h.needBlessValue,c=o-h.needBlessValue,g=100*c;this.start&&this.start.setProgress(Math.floor(g/u)),this.txt_blessing.text=t.LanguageUtils.language_Omission_txt19+":"+o+"/"+p.needBlessValue
}else this.txt_blessing.text=t.LanguageUtils.language_Omission_txt19+":"+o,this.start&&this.start.setProgress(100);this.txt_star.text=t.LanguageUtils.language_Omission_txt18+l,this.txt_desc.visible=h.blessdown>0,this.txt_desc.text=t.LanguageUtils.language_Omission_txt20+(h&&h.blessdown)+t.LanguageUtils.language_Omission_txt19;var d=0,m="",f="";l>this.starUrl3Num?(d=l-this.starUrl3Num,m=this.starUrl3,f=this.starUrlBg3):l>this.starUrl2Num?(d=l-this.starUrl2Num,m=this.starUrl2,f=this.starUrlBg2):l>this.starUrlNum&&(d=l-this.starUrlNum,m=this.starUrl,f=this.starUrlBg);for(var v=0,_=this.starArr.length;_>v;v++)d>v?this.starArr[v].source=m:this.starArr[v].source=f;var y,T;if(this.newArr=[],s){for(a=s.length,T=0;a>T;T++)if(n=s[T],n.level==l){for(y=0;y<n.attrsCur.length;y++)this.newArr.push({desc1:n.attrsCur[y],desc2:n.attrsNext[y]});break}this.setData(this.newArr)}else this.setData([]);this.setRedDot(),this.updateCost()}},i.prototype.refreshAuto=function(){t.BlessMgr.ins().isCanAuto?this.btn_bless0.filters=null:this.btn_bless0.filters=t.FilterUtil.ARRAY_GRAY_FILTER},i.prototype.setData=function(t){this.creatItem(t)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this._itemArrayCollection.replaceAll(this.dataAry)},i.prototype.onClick=function(e){var i=t.CurrencyUtils.getCurrency(0,this.itemId);if(e.currentTarget==this.btn_bless1)1>i&&this.onGetProps(),t.BlessMgr.ins().send_18_1(1);else if(e.currentTarget==this.btn_bless0)if(t.BlessMgr.ins().isCanAuto)t.TimerManager.ins().isExists(this.automationFunction,this)?(t.TimerManager.ins().remove(this.automationFunction,this),this.btn_bless0.label=t.LanguageUtils.language_Common_176):(this.automationFunction(),this.btn_bless0.label=t.LanguageUtils.language_Common_177,t.TimerManager.ins().doTimer(150,0,this.automationFunction,this));else{var n=t.VipData.ins().getVipDataByLv(4),s=t.StringUtils.replace(t.LanguageUtils.language_Common_178,6,n.name);t.UserTips.ins().showUITips(s)}},i.prototype.automationFunction=function(){var e=t.CurrencyUtils.getCurrency(0,this.itemId);e>0?t.BlessMgr.ins().send_18_1(1):(t.TimerManager.ins().remove(this.automationFunction,this),this.btn_bless0.label=t.LanguageUtils.language_Common_176,this.onGetProps())},i.prototype.$onClose=function(){for(e.prototype.$onClose.call(this);this._list.numChildren>0;){var i=this._list.getChildAt(0);this._list.removeChild(i),i.destroy(),i=null}this.mcEff&&(this.mcEff.destroy(),this.mcEff=null),t.TimerManager.ins().remove(this.automationFunction,this),t.DefaultMgr.ins().post_gaimItemView(8888),this.dataAry.length=0,this.dataAry=null,this.newArr&&(this.newArr.length=0,this.newArr=null),t.DisplayUtils.removeFromParent(this.group_star),this.group_star&&this.group_star.removeChildren(),this.group_star=null,this.starArr.length=0,this.starArr=null,this._scrollViewContainer.destory(),this.removeTouchEvent(this.btn_bless1,this.onClick),this.removeTouchEvent(this.btn_bless0,this.onClick),this.txt_consume1.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.txt_consume1.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this),this.txt_star.text="",this.txt_blessing.text="",this.txt_consume1.text="",this.btn_bless1=null,this.btn_bless0=null,this.txt_star=null,this.txt_blessing=null,this.txt_consume1=null,this.starUrlBg="",this.starUrl="",this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,this.arrGroup&&this.arrGroup.removeChildren(),this.arrGroup=null,t.DisplayUtils.removeFromParent(this)},i}(t.BaseEuiView);t.BlessView=e,__reflect(e.prototype,"app.BlessView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="RoleCircleAttrItemSkin",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var t=this.data;t.desc1&&(this.txt_cur.text=t.desc1),t.desc2?this.txt_next.text=t.desc2:(this.txt_next.text="",this.arrow.visible=!1)}},e}(eui.ItemRenderer);t.RoleCircleAttrItemView=e,__reflect(e.prototype,"app.RoleCircleAttrItemView");var i=function(){function t(){}return t}();t.RoleCircleVo=i,__reflect(i.prototype,"app.RoleCircleVo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="CircleTipsWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.effMc||(this.effMc=t.ObjectPool.pop("app.MovieClip"),this.effMc.scaleX=this.effMc.scaleY=1,this.effMc.touchEnabled=!1,this.circleEffGrp.addChild(this.effMc)),this.effMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zstjdc",1,function(){},!1),this.addTouchEvent(this.closeGrp,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeGrp:t.ViewManager.ins().close(this),t.ViewManager.ins().isShow(t.RoleView)||t.ViewManager.ins().open(t.RoleView,[2,0])}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.effMc&&(this.effMc.destroy(),this.effMc=null),this.removeTouchEvent(this.closeGrp,this.onClick),t.OtherMgr.ins().circleTipsInfoCD=egret.getTimer()+12e4},i}(t.BaseEuiView);t.RoleCircleTipsView=e,__reflect(e.prototype,"app.RoleCircleTipsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._itemArrayCollection=null,i.itemId=931,i.ruleId=8,i.titleStr=t.LanguageUtils.language_System8,i.level=0,i.skinName="CircleSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.red.visible=!1,this._itemArrayCollection||(this.list.itemRenderer=t.RoleCircleAttrItemView,this._itemArrayCollection=new eui.ArrayCollection,this.list.dataProvider=this._itemArrayCollection,this.addTouchEvent(this.btnCircle,this.onTouchAp),this.txt_get_repair.textFlow=t.TextFlowMaker.generateTextFlow("<a><u>"+t.LanguageUtils.language_System26+"<u></a>"),this.addTouchEvent(this.txt_get_repair,this.getFunction),this.addMouseMoveEvent(this.materImg2,this.mouseMove),this.addMouseOverEvent(this.materImg2,this.mouseMove),this.addMouseMoveEvent(this.materImg3,this.mouseMove),this.addMouseOverEvent(this.materImg3,this.mouseMove),this.observe(t.OtherMgr.ins().post_26_45,this.updateInfo),this.observe(t.DefaultMgr.ins().post_g_0_7,this.updateInfo),this.observe(t.BagMgr.ins().post_8_1,this.updateInfo),this.observe(t.BagMgr.ins().post_8_4,this.updateInfo),this.observe(t.BagMgr.ins().post_8_3,this.updateInfo)),this.level=-1,this.refreshCircleCount(),this.updateView(),t.GetPropsView.getPropsTxt(this.txt_get,this.itemId),this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.blendMode=egret.BlendMode.ADD,this.mc.x=194,this.mc.y=160,this.reinGroup.addChildAt(this.mc,10),this.mc.playFile(ResDirEnum.RES_DIR_EFF+"eff_zsyw1",-1))},i.prototype.updateInfo=function(){t.TimerManager.ins().removeAll(this),t.TimerManager.ins().doTimer(100,1,this.updateView,this)},i.prototype.onGetProps=function(e){var i=Number(e),n=t.GlobalConfig.GetItemRouteConfig[i?i:this.itemId];if(!t.ViewManager.ins().isShow(t.GaimItemWin)){var s=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,n.itemid,{x:s.x,y:s.y},{height:this.height,width:this.width},8888)}},i.prototype.getFunction=function(){t.ViewManager.ins().isShow(t.RoleExchangView)||t.ViewManager.ins().open(t.RoleExchangView)},i.prototype.refreshCircleCount=function(){t.OtherMgr.ins().send_26_45()},i.prototype.attrSort=function(e,i){return e.desc1.indexOf(t.LanguageUtils.language_ATTROBJ[70])>i.desc1.indexOf(t.LanguageUtils.language_ATTROBJ[70])?1:e.desc1.indexOf(t.LanguageUtils.language_ATTROBJ[75])>i.desc1.indexOf(t.LanguageUtils.language_ATTROBJ[75])?1:-1},i.prototype.updateView=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getZSLevel();this.level>-1&&i>this.level&&this.playMC(),this.level=e.propSet.getZSLevel();var n=e.propSet.getLevel(),s=(e.propSet.getZSSoul(),t.GlobalData.sectionOpenDay);this.txt_circle.text=t.LanguageUtils.language_Omission_txt13+i+t.LanguageUtils.language_Common_0;for(var a,r,o,l=t.GlobalConfig.CircleLevel[i],h=t.GlobalConfig.CircleLevel[i+1],p=!0,u=null,c={},g=[],d=0;d<l.attrs.length;d++)a=l.attrs[d],c[a.type]=a.value;if(h){u={},this.circleData=h;for(var m="",d=0;d<h.attrs.length;d++)a=h.attrs[d],u[a.type]=a.value,75==a.type&&(m="，"+t.LanguageUtils.language_ATTROBJ[75]+"|C:0xe50000&T: "+t.MathUtils.GetPercent(a.value,1e4)+"|");for(var f in u)o=t.AttributeData.getAttrValue(+f,u),o&&(r=t.AttributeData.getAttrValue(+f,c,!0),g.push({desc1:r,desc2:o}));this.conditionGroup.visible=!0,this.txt_max_lev.visible=!1;var v="|C:0xE0AE75&T:"+t.LanguageUtils.language_Omission_txt1+"|";n<h.levellimit?(v+="|C:0xe50000&T:"+h.levellimit,p=!1):v+="|C:0xE0AE75&T:"+h.levellimit,this.txt_level.textFlow=t.TextFlowMaker.generateTextFlow(v);var _,y,T=13740407;this.mater1.visible=!1,h.item1&&(this.mater1.visible=!0,_=t.CurrencyUtils.getCurrencyNameIcon(h.item1.type,h.item1.id),_&&(y=t.CurrencyUtils.getCurrency(h.item1.type,h.item1.id),y<h.item1.count&&(T=15007744,p=!1),this.mater1.textFlow=t.TextFlowMaker.generateTextFlow(""+t.LanguageUtils.language_Omission_txt4+_[0]+"：|C:"+T+"&T:"+t.CommonUtils.overLengthChange(h.item1.count)+"|"))),T=13740407,this.mater2.visible=!1,h.item2&&(this.mater2.visible=!0,_=t.CurrencyUtils.getCurrencyNameIcon(h.item2.type,h.item2.id),_&&(this.materImg2.source=_[1]+"",this.materImg2.itemID=h.item2.id,y=t.CurrencyUtils.getCurrency(h.item2.type,h.item2.id),y<h.item2.count&&(T=15007744,p=!1),this.txt_mater2.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Omission_txt4+"   ：|C:"+T+"&T:"+y+"|/"+h.item2.count))),T=13740407,this.mater3.visible=!1,h.item3&&h.item3.id&&(this.mater3.visible=!0,_=t.CurrencyUtils.getCurrencyNameIcon(h.item3.type,h.item3.id),_&&(this.materImg3.source=_[1]+"",this.materImg3.itemID=h.item3.id,y=t.CurrencyUtils.getCurrency(h.item3.type,h.item3.id),y<h.item3.count&&(T=15007744,p=!1),this.txt_mater3.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Omission_txt4+"   ：|C:"+T+"&T:"+y+"|/"+h.item3.count))),this.txt_reduceLv.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt45,h.costlevel)),s<h.openday&&(p=!1)}else{p=!1;for(var f in c)r=t.AttributeData.getAttrValue(+f,c,!0),r&&g.push({desc1:r,desc2:null});this.conditionGroup.visible=!1,this.txt_max_lev.visible=!0,this.txt_max_lev.text=t.LanguageUtils.language_Omission_txt14}g.sort(this.attrSort),this._itemArrayCollection.replaceAll(g),this.red.visible=p},i.prototype.showGetPropsView=function(){var e=t.GlobalData.sectionOpenDay,i=t.EntityMgr.ins().getPayer,n=i.propSet.getLevel();if(!this.circleData)return t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt70),!1;if(this.circleData.openday>e)return t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips134,this.circleData.openday)),!1;if(this.circleData.levellimit>n)return t.UserTips.ins().showUITips(t.LanguageUtils.language_Common_84),!1;var s=[];this.circleData.item2&&s.push(this.circleData.item2),this.circleData.item3&&s.push(this.circleData.item3);for(var a=0;a<s.length;a++){var r=s[a],o=t.CurrencyUtils.getCurrency(r.type,r.id);if(o<r.count)return this.onGetProps(931),!1}var l=this.circleData.item1,h=t.CurrencyUtils.getCurrency(l.type,l.id);return h<l.count?(this.onGetProps(932),!1):!0},i.prototype.playMC=function(){this.upMc||(this.upMc=t.ObjectPool.pop("app.MovieClip"),this.upMc.blendMode=egret.BlendMode.ADD,this.upMc.x=182,this.upMc.y=200),this.reinGroup.addChildAt(this.upMc,100),this.upMc.playFile(ResDirEnum.RES_DIR_EFF+"eff_zs2",1,this.stopMC.bind(this))},i.prototype.stopMC=function(){this.upMc&&(this.upMc.destroy(),this.upMc=null)},i.prototype.onTouchAp=function(){this.showGetPropsView()&&t.CircleMgr.ins().send_11_2()},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(e.currentTarget.itemID){var n=t.GlobalConfig.StdItems[e.currentTarget.itemID];if(n){var s=i.localToGlobal(),a=t.TipsType.TIPS_EQUIP;a=n.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,n,{x:s.x+i.width/2,y:s.y+i.height/2})}}}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),t.TimerManager.ins().removeAll(this),t.DefaultMgr.ins().post_gaimItemView(8888),this.stopMC(),this.mc&&(this.mc.destroy(),this.mc=null),this.removeTouchEvent(this.btnCircle,this.onTouchAp),this.removeTouchEvent(this.txt_get_repair,this.getFunction),this.materImg2.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.materImg2.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.materImg3.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.materImg3.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)},i}(t.BaseView);t.RoleCircleView=e,__reflect(e.prototype,"app.RoleCircleView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._itemArrayCollection=null,t.dataAry=[],t._itemArrayCollection2=null,t.dataAry2=[],t.endScrollV=0,t.skinName="AttrSkin",t._itemArrayCollection=new eui.ArrayCollection,t._itemArrayCollection2=new eui.ArrayCollection,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.attrBtn.currentState="show",this.stateBtn.currentState="hide",this.stateScroller.visible=!1,this.init()},i.prototype.init=function(){this._scrollViewContainer=new t.ScrollViewContainer(this.attrGroup),this._scrollViewContainer.callFunc([this.onScrollerChange,this.onScrollerEnd,null],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.itemRenderer=t.RoleAttrItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.attrConfigArr=[],this.stateList.itemRenderer=t.RoleStateItemView,this.stateList.dataProvider=this._itemArrayCollection2,this.refreshData2(),t.MouseScroller.bind(this.stateScroller),this.refreshData(),this.addTouchEvent(this.attrBtn,this.onClose),this.addTouchEvent(this.stateBtn,this.onClose),this.addTouchEvent(this.btn_close,this.onClose)},i.prototype.onClose=function(e){switch(e.currentTarget){case this.attrBtn:this.attrBtn.currentState="show",this.stateBtn.currentState="hide",this.stateScroller.visible=!1,this.attrScroller.visible=!0,this.attrList.visible=!0;break;case this.stateBtn:this.stateScroller.visible=!0,this.attrScroller.visible=!1,this.attrList.visible=!1,this.attrBtn.currentState="hide",this.stateBtn.currentState="show";break;case this.btn_close:t.EventManager.ins().sendEvent(t.CompEvent.ROLE_ATTR_CLOSE,!0)}},i.prototype.refreshData2=function(){for(var e,i=t.EntityMgr.ins().getPayer,n=[],s=t.LanguageUtils.stateName.length,a=0;s>a;++a){var r=t.ModelManager.ins().roleModel.getStateValueByIndex(i.propSet,a);if(r){e=new t.RoleAttrVo,e.attr_name=t.RoleData.GetStateName(a),e.attr_value=r,e.attr_explain="";var o=t.LanguageUtils["stateArr"+a];o&&(e.attrConfigVo={name:o[0],desc:o[1]}),n.push(e)}}this.setData2(n)},i.prototype.setData2=function(t){this.creatItem2(t)},i.prototype.creatItem2=function(t){this.dataAry2.length=0;for(var e=0;e<t.length;++e)this.dataAry2.push(t[e]);this._itemArrayCollection2.replaceAll(this.dataAry2)},i.prototype.onTouch=function(e){t.UserTips.ins().closeTips()},i.prototype.refreshData=function(){var e,i,n=t.EntityMgr.ins().getPayer,s=[];for(var a in t.GlobalConfig.HumanAttrConfig){var r=t.GlobalConfig.HumanAttrConfig[a];e=new t.RoleAttrVo,e.attr_name=r.attrName,i=t.ModelManager.ins().roleModel.getPropValueByIndex(n.propSet,r.attrID,r.lv),null!=i&&(e.attr_value=i+"",e.attr_explain="",r.tips&&(e.attrConfigVo={desc:r.tips,name:""}),s.push(e))}this.setData(s)},i.prototype.setData=function(t){this.creatItem(t)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this._itemArrayCollection&&this._itemArrayCollection.replaceAll(this.dataAry),this._scroller.validateNow()},i.prototype.onScrollerChange=function(){for(var t,e=0;e<this._list.numChildren;e++)t=this._list.getChildAt(e),t&&t.removeListener()},i.prototype.onScrollerEnd=function(){for(var t,e=0;e<this._list.numChildren;e++)t=this._list.getChildAt(e),t&&t.addListener()},i.prototype.$onClose=function(){for(e.prototype.$onClose.call(this);this._list.numChildren>0;){var i=this._list.getChildAt(0);this._list.removeChild(i),i.destroy(),i=null}this.removeTouchEvent(this.attrBtn,this.onClose),this.removeTouchEvent(this.stateBtn,this.onClose),this.removeTouchEvent(this.btn_close,this.onClose),this._itemArrayCollection.removeAll(),this._scrollViewContainer.destory(),this._scrollViewContainer=null,t.DisplayUtils.removeFromParent(this.attrGroup)},i}(t.BaseView);t.AttrView=e,__reflect(e.prototype,"app.AttrView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isShowAtrr=!0,t.ruleId=4,t.titleStr="",t.skinName="EquipSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.init()},i.prototype.init=function(){t.ModelManager.ins().roleModel.init(),this.roleInnerModel=new t.RoleInnerModel(this.modelGroup);var e,i;for(this.equipArr=[],i=0;i<this.iconGroup.numElements;i++)e=this.iconGroup.getChildByName("icon_"+i),e.setEquipBg(i),this.equipArr.push(e);this.neiGongBtn.visible=!1,this.neiGongGrp.visible=!1;var n=t.GlobalConfig.MeridiansSetConfig.equipOpen,s=t.GlobalConfig.MeridiansSetConfig.equipOpenBS;if(n){var a=0,r=[];t.ViewManager.ins().isCheckOpen(n)&&(r.push({type:"equipOpen",img1:"tab_ngzbt01",img2:"tab_ngzbt02"}),this.neiGongBtn.visible=!0,a=r.length-1),t.ViewManager.ins().isCheckOpen(s)&&r.push({type:"equipOpenBS",img1:"tab_ngzbt12",img2:"tab_ngzbt11"}),this.ngEquiTabBar.itemRenderer=t.NGEquipTab,this.ngEquiTabBar.dataProvider=new eui.ArrayCollection(r),this.ngEquipView.init(1),this.ngGemstoneView.init(2),this.ngEquiTabBar.selectedIndex=a,this.onTabTouch(null)}this.observe(t.EquipMgr.ins().post_7_3,this.setEquipData),this.observe(t.BagMgr.ins().post_8_1,this.updateGzRed),this.observe(t.BagMgr.ins().post_8_4,this.updateGzRed),this.observe(t.BagMgr.ins().post_8_3,this.updateGzRed),this.observe(t.DefaultMgr.ins().postPlayerChange,this.refreshData),this.observe(t.DefaultMgr.ins().postMoneyChange,this.updateGzRed),t.EventManager.ins().addEvent(t.CompEvent.ROLE_ATTR_OPEN,this.showAtrr,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_ATTR_CLOSE,this.hideAtrr,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_LEVEL_CIRCLE,this.updateGzRed,this),t.EventManager.ins().addEvent(t.ItemEvent.EQUIP_WEAR_EQUIP,this.onEquipWear,this),t.EventManager.ins().addEvent(t.ItemEvent.EQUIP_DROP_EQUIP,this.onEquipDrop,this),this.addTouchEvent(this.gzClickGroup,this.onClick),this.addTouchEvent(this.btnAtrr,this.onClick),this.addTouchEvent(this.btnAtrr0,this.onClick),this.addTouchEvent(this.neiGongBtn,this.onClick),this.addTouchEvent(this.neiGongCloseBtn,this.onClick),this.addChangeEvent(this.ngEquiTabBar,this.onTabTouch),this.updateGzRed(),this.setEquipData(),this.showAtrr(),this.refreshData()},i.prototype.showView=function(){this.isShowAtrr&&t.EventManager.ins().sendEvent(t.CompEvent.ROLE_ATTR_OPEN)},i.prototype.hideView=function(){t.EventManager.ins().sendEvent(t.CompEvent.ROLE_ATTR_CLOSE),this.neiGongGrp.visible=!1},i.prototype.showAtrr=function(){this.btnAtrr.visible=!1,this.btnAtrr0.visible=!0},i.prototype.hideAtrr=function(t){void 0===t&&(t=!1),t&&(this.isShowAtrr=!1),this.btnAtrr.visible=!0,this.btnAtrr0.visible=!1},i.prototype.updateGzRed=function(){this.gzRedPoint.visible=t.OtherMgr.ins().getOfficeRed()},i.prototype.onClick=function(e){switch(e.currentTarget){case this.gzClickGroup:t.ViewManager.ins().open(t.GuanZhiView);break;case this.btnAtrr:this.isShowAtrr=!0,this.showAtrr(),t.EventManager.ins().sendEvent(t.CompEvent.ROLE_ATTR_OPEN);break;case this.btnAtrr0:this.isShowAtrr=!1,this.hideAtrr(),t.EventManager.ins().sendEvent(t.CompEvent.ROLE_ATTR_CLOSE);break;case this.neiGongBtn:var i=t.GlobalConfig.MeridiansSetConfig;i&&t.ViewManager.ins().isCheckOpen(i.openLimit)?this.neiGongGrp.visible=!this.neiGongGrp.visible:i&&i.limitStr&&t.UserTips.ins().showUITips(i.limitStr);break;case this.neiGongCloseBtn:this.neiGongGrp.visible=!1}},i.prototype.onTabTouch=function(t){this.ngEquipView.visible=!1,this.ngGemstoneView.visible=!1;var e=this.ngEquiTabBar.selectedItem;e&&("equipOpen"==e.type?this.ngEquipView.visible=!0:"equipOpenBS"==e.type&&(this.ngGemstoneView.visible=!0))},i.prototype.refreshData=function(){var e=t.EntityMgr.ins().getPayer;this.titleStr=e.propSet.getName();var i,n=e.propSet.getAP_JOB(),s=e.propSet.getLevel(),a=e.propSet.getZSLevel(),r=e.propSet.getOfficialPositicon();e.propSet.getGuildName()&&""!=e.propSet.getGuildName()&&(i=e.propSet.getGuildName());var o="";switch(n){case JobConst.ZhanShi:o=t.AttributeData.job[JobConst.ZhanShi];break;case JobConst.FaShi:o=t.AttributeData.job[JobConst.FaShi];break;case JobConst.DaoShi:o=t.AttributeData.job[JobConst.DaoShi]}this.job=o,this.txt_job.text=o,this.txt_guild.text=i?i:"";var l=a>0?o+"  "+a+t.LanguageUtils.language_Common_0+s+t.LanguageUtils.language_Common_1:o+"  "+s+t.LanguageUtils.language_Common_1;this.txt_job.text=l,this.gzImage.source="gz_zw_"+r,this.setModel()},i.prototype.setEquipData=function(){var e=t.EquipItemMgr.ins().equips;if(e){for(var i,n=0;n<e.length;n++)i=e[n].nPos,i>=t.StdItemType.itEquipDiamond&&i<t.StdItemType.itShield||i>t.StdItemType.itMoQi||(i>=t.StdItemType.itShield&&i<=t.StdItemType.itMoQi&&(i-=4),this.equipArr[i].setItem(e[n]));this.setModel()}},i.prototype.setModel=function(){var e=t.EquipItemMgr.ins().getModeEquip();this.roleInnerModel.setData(e)},i.prototype.onEquipWear=function(e){var i=e[0];i.nPos&&i.nPos>=t.StdItemType.itEquipDiamond&&i.nPos<t.StdItemType.itShield||i.nPos>t.StdItemType.itMoQi||i&&null!=i.nPos&&(i.nPos>=t.StdItemType.itShield&&i.nPos<=t.StdItemType.itMoQi?this.equipArr[i.nPos-4].setItem(i):this.equipArr[i.nPos].setItem(i),this.setModel())},i.prototype.onEquipDrop=function(e){var i=e[0];if(!(i.nPos&&i.nPos>=t.StdItemType.itEquipDiamond&&i.nPos<t.StdItemType.itShield||i.nPos>t.StdItemType.itMoQi)){for(var n,s=0;s<this.equipArr.length;s++)if(n=this.equipArr[s],n.userItem&&n.userItem.series.isCompleteEquals(i.series)){var a=i.nPos;i.nPos>=t.StdItemType.itShield&&i.nPos<=t.StdItemType.itMoQi&&(a=i.nPos-4),this.equipArr[a].resum();break}this.setModel()}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.ngEquipView&&(this.ngEquipView.$onClose(),this.ngEquipView=null),this.ngGemstoneView&&(this.ngGemstoneView.$onClose(),this.ngGemstoneView=null),this.removeTouchEvent(this.gzClickGroup,this.onClick),this.removeTouchEvent(this.btnAtrr,this.onClick),this.removeTouchEvent(this.btnAtrr0,this.onClick),this.removeTouchEvent(this.neiGongBtn,this.onClick),this.removeTouchEvent(this.neiGongCloseBtn,this.onClick),t.DisplayUtils.removeFromParent(this.iconGroup),this.iconGroup&&this.iconGroup.removeChildren(),this.modelGroup&&this.modelGroup.removeChildren(),this.iconGroup=null,this.modelGroup=null,t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_ATTR_OPEN,this.showAtrr,this),t.EventManager.ins().removeEvent(t.CompEvent.OTHER_PLAYER_ATTR_CLOSE,this.hideAtrr,this),t.EventManager.ins().removeEvent(t.ItemEvent.EQUIP_WEAR_EQUIP,this.onEquipWear,this),t.EventManager.ins().removeEvent(t.ItemEvent.EQUIP_DROP_EQUIP,this.onEquipDrop,this),t.EventManager.ins().removeEvent(t.CompEvent.ROLE_LEVEL_CIRCLE,this.updateGzRed,this);var i,n;for(i=0,n=this.equipArr.length;n>i;i++){var s=this.equipArr[i];s.destroy(),s=null}this.ngEquiTabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.ngEquiTabBar=null,this.equipArr.length=0,this.equipArr=null,this.roleInnerModel&&this.roleInnerModel.destory(),this.roleInnerModel=null,this.txt_job.text="",this.txt_job=null,this.txt_guild.text="",this.txt_guild=null,t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.EquipView=e,__reflect(e.prototype,"app.EquipView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RoleAttrItemSkin",t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),gamelib.DeviceUtils.IsMobile?this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOver,this):(this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this))},i.prototype.onClickHandler=function(t){var e=this.data.attr_explain;this.func&&this.func(e)},i.prototype.onOver=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else if(this.data&&this.data.attrConfigVo){var i=new egret.Point(e.stageX,e.stageY),n=this.data.attrConfigVo;t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_SKILL_DESC,{desc:n.desc},{x:i.x,y:i.y})}},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var t=this.data;this.txt_name.text=t.attr_name,this.txt_value.text=t.attr_value,this.func=t.func}},i.prototype.removeListener=function(){},i.prototype.addListener=function(){},i.prototype.destroy=function(){gamelib.DeviceUtils.IsMobile?this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOver,this):(this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this)),t.DisplayUtils.removeFromParent(this)},i}(eui.ItemRenderer);t.RoleAttrItemView=e,__reflect(e.prototype,"app.RoleAttrItemView");var i=function(){function t(){}return t}();t.RoleAttrVo=i,__reflect(i.prototype,"app.RoleAttrVo");var n=function(){function t(){}return t}();t.AttrConfigVo=n,__reflect(n.prototype,"app.AttrConfigVo")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._actID=0,i.clickParam=null,i.closeCD=120,i.skinName="ActivityTipsWinSKin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.itemList.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(this.addTouchEvent(this.goBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),e[0]&&(this._actID=e[0]),0!=this._actID){var n=t.ActvityMgr.ins().getActivityConfigById(this._actID);n&&(this.titleIcon.source=n.tipstitleicon+"",this.actTime.textFlow=t.TextFlowMaker.generateTextFlow(n.tipstime),this.actDesc.textFlow=t.TextFlowMaker.generateTextFlow(n.tipstext),this.itemList.dataProvider=new eui.ArrayCollection(n.rewards),this.goBtn.label=n.tipsbuttontext+"",this.clickParam=n.tipsbuttonfunction)}this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this)},i.prototype.updateTime=function(){var e=this.closeCD-=1;0>=e&&(t.TimerManager.ins().remove(this.updateTime,this),t.ViewManager.ins().close(this))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.goBtn:this.clickParam&&this.clickResult(this.clickParam),t.ViewManager.ins().close(this);break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.clickResult=function(e){switch(e.type){case 1:e.param1&&e.param2&&t.ViewManager.ins().open(e.param1,e.param2);break;case 2:t.ActvityMgr.ins().enterActivity(this._actID);break;case 3:t.ActvityMgr.ins().send_25_1(this._actID,t.Operate.cKuaFu);break;case 4:}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.TimerManager.ins().remove(this.updateTime,this),this.removeTouchEvent(this.goBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.ActivityTipsWin=e,__reflect(e.prototype,"app.ActivityTipsWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RolePriBtnSkin",t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._redDot.visible=!1;var t=null;15==this._id?t="StrengthenMgr.isSatisStrengthened":11==this._id?t="StrengthenMgr.isTreasure":1==this._id?t="FashionMgr.isSatisFashionActOrUpdate":9==this._id?t="OtherMgr.getZSRed":19==this._id&&(t="SoldierSoulMgr.getWeaponTabRed"),gamelib.DeviceUtils.IsMobile&&5==this._id&&(t="SkillMgr.getSkillredDot"),this._redDot.updateShowFunctions=t},i.prototype.refresh=function(){(1==this._id||11==this._id||15==this._id||9==this._id||19==this._id)&&(this._redDot.param=null),gamelib.DeviceUtils.IsMobile&&5==this._id&&(this._redDot.param=null)},i.prototype.setData=function(t){t.txt&&(this._nameTf.source=t.txt+1,this._nameTf2.source=t.txt+2),t.id&&(this._id=t.id),t.isOpen&&(this._isOpen=t.isOpen)},Object.defineProperty(i.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isOpen",{get:function(){return this._isOpen},set:function(t){this._isOpen=t},enumerable:!0,configurable:!0}),i.prototype["goto"]=function(t){1==t?(this._normalImg.visible=!0,this._selectImg.visible=!1,this._nameTf.visible=!1):(this._selectImg.visible=!0,this._nameTf.visible=!0,this._normalImg.visible=!1)},i.prototype.destory=function(){this.$onClose(),t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.RolePriBtnView=e,__reflect(e.prototype,"app.RolePriBtnView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RoleStateItemSkin",t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),gamelib.DeviceUtils.IsMobile?this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOver,this):(this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this))},i.prototype.onOver=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else if(this.data&&this.data.attrConfigVo){var i=new egret.Point(e.stageX,e.stageY),n=this.data.attrConfigVo;t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_SKILL_DESC,{desc:"【"+n.name+"】"+n.desc},{x:i.x,y:i.y})}},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=this.data;if("复活加速"==e.attr_name){this.txt_name.textFlow=t.TextFlowMaker.generateTextFlow("|C:0x3794fb&T:复活加速 |");var i=t.EntityMgr.ins().getPayer.propSet.getResurrection(),n="";if(-1==i)n="永久";else if(0==i)n="0时";else{var s=t.DateUtils.formatMiniDateTime(i)-t.GlobalData.serverTime;n=s>0?t.DateUtils.getFormatBySecond(Math.floor(s/1e3),t.DateUtils.TIME_FORMAT_5):"0时"}this.txt_value.textFlow=t.TextFlowMaker.generateTextFlow("|C:0x3794fb&T:: "+n+"|")}else this.txt_name.textFlow=t.TextFlowMaker.generateTextFlow(e.attr_name),this.txt_value.textFlow=t.TextFlowMaker.generateTextFlow(e.attr_value)}},i.prototype.destroy=function(){gamelib.DeviceUtils.IsMobile?this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOver,this):(this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this)),t.DisplayUtils.removeFromParent(this)},i}(eui.ItemRenderer);t.RoleStateItemView=e,__reflect(e.prototype,"app.RoleStateItemView")
}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._itemArrayCollection=null,t.dataAry=[],t.skinName="StateSkin",t._itemArrayCollection=new eui.ArrayCollection,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.list.itemRenderer=t.RoleStateItemView,this._itemArrayCollection=new eui.ArrayCollection,this.list.dataProvider=this._itemArrayCollection,this.refreshData(),this.addTouchEvent(this.btn_close,this.onClose),t.MouseScroller.bind(this.scroller)},i.prototype.onClose=function(e){t.EventManager.ins().sendEvent(t.CompEvent.ROLE_ATTR_CLOSE)},i.prototype.refreshData=function(){for(var e,i=t.EntityMgr.ins().getPayer,n=[],s=(i.propSet.getLevel(),t.LanguageUtils.stateName.length),a=0;s>a;++a){var r=t.ModelManager.ins().roleModel.getStateValueByIndex(i.propSet,a);if(r){e=new t.RoleAttrVo,e.attr_name=t.RoleData.GetStateName(a),e.attr_value=r,e.attr_explain="";var o=t.LanguageUtils["stateArr"+a];o&&(e.attrConfigVo={name:o[0],desc:o[1]}),n.push(e)}}this.setData(n)},i.prototype.setData=function(t){this.creatItem(t)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this._itemArrayCollection.replaceAll(this.dataAry)},i.prototype.$onClose=function(){for(e.prototype.$onClose.call(this);this.list.numChildren>0;){var i=this.list.getChildAt(0);this.list.removeChild(i),i.destroy(),i=null}this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,t.MouseScroller.unbind(this.scroller),t.DisplayUtils.removeFromParent(this.attrGroup)},i}(t.BaseView);t.StateView=e,__reflect(e.prototype,"app.StateView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RoleExchangtemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.btn_exchange,this.onTouchAp)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.btn_exchange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchAp,this)},i.prototype.onTouchAp=function(e){t.RoleExchangView.TYPE_EXCHANGE=this.data.type,t.RoleExchangView.INDEX=this.data.idx,t.CircleMgr.ins().send_11_3(this.data.type)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e="",i="",n="",s=t.EntityMgr.ins().getPayer,a=s.propSet.getEXP(),r=this.data;if(e=""+t.LanguageUtils.language_Omission_txt30+r.value+t.LanguageUtils.language_Omission_txt12,this.txt_desc1.textFlow=t.TextFlowMaker.generateTextFlow(e),2==r.type)this.btn_exchange.label=t.LanguageUtils.language_Omission_txt11,i=r.cost<=a?""+t.LanguageUtils.language_Omission_txt31+r.cost+t.LanguageUtils.language_Omission_txt32:""+t.LanguageUtils.language_Omission_txt33+r.cost+t.LanguageUtils.language_Omission_txt32,this.txt_desc2.textFlow=t.TextFlowMaker.generateTextFlow(i),this.item.setItem(null,0,t.GlobalConfig.NumericalIcon[5].icon,1);else{var o=0;if(r.id>0){var l=t.GlobalConfig.StdItems[r.id];l&&(this.item.setItem(null,l.showQuality,l.icon,1,l),o=t.BagMgr.ins().getItemCountById(l.id)),i=o>0?l.name+(":"+t.LanguageUtils.language_Common_104+"|C:0x28ee01&T:"+o+"|C:0xF4D1A4&T:"+t.LanguageUtils.language_Common_38):l.name+(":"+t.LanguageUtils.language_Common_104+"|C:0xe50000&T:"+o+"|C:0xF4D1A4&T:"+t.LanguageUtils.language_Common_38),this.txt_desc2.textFlow=t.TextFlowMaker.generateTextFlow(i)}else o=t.EntityMgr.ins().getPayer.propSet.getRecycleIntergral(),i=o>=r.cost?t.LanguageUtils.language_Omission_txt34+"|C:0x28ee01&T:"+r.cost+"|C:0xF4D1A4&T:"+t.LanguageUtils.language_Time_Min:t.LanguageUtils.language_Omission_txt34+"|C:0xe50000&T:"+r.cost+"|C:0xF4D1A4&T:"+t.LanguageUtils.language_Time_Min,this.txt_desc2.textFlow=t.TextFlowMaker.generateTextFlow(i),this.item.setItem(null,0,t.GlobalConfig.NumericalIcon[9].icon,1)}this.btn_exchange.label=t.LanguageUtils.language_Omission_txt10,n=r.useTimes>0?t.LanguageUtils.language_Omission_txt35+"|C:0x28ee01&T:"+r.useTimes+"|C:0xF4D1A4&T:"+t.LanguageUtils.language_Wlelfare_Text5:i=t.LanguageUtils.language_Omission_txt35+"|C:0xe50000&T:"+r.useTimes+"|C:0xF4D1A4&T:"+t.LanguageUtils.language_Wlelfare_Text5,this.txt_desc3.textFlow=t.TextFlowMaker.generateTextFlow(n)}},i}(t.BaseItemRender);t.RoleExchangItemView=e,__reflect(e.prototype,"app.RoleExchangItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._itemArrayCollection=null,i.dataAry=[],i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="RoleExchangSkin",i.name="RoleExchangView",i._itemArrayCollection=new eui.ArrayCollection,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.open.call(this,i),this.dragDropUI.setCurrentState("default6"),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System26),this._scrollViewContainer=new t.ScrollViewContainer(this.exchange_list),this._scrollViewContainer.callFunc([null,null,null],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.scrollPolicyH=eui.ScrollPolicy.OFF,this._scrollViewContainer.scrollPolicyV=eui.ScrollPolicy.AUTO,this._scrollViewContainer.itemRenderer=t.RoleExchangItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.observe(t.CircleMgr.ins().post_11_1,this.init),this.observe(t.DefaultMgr.ins().postPlayerChange,this.refreshData),this.observe(t.CircleMgr.ins().post_11_3,this.onRefreshExchange),t.CircleMgr.ins().send_11_1()},i.prototype.setData=function(){this.dataAry.length=0;for(var e in t.ModelManager.ins().roleModel.exchangeListData)this.dataAry.push(t.ModelManager.ins().roleModel.exchangeListData[e]);this._itemArrayCollection.replaceAll(this.dataAry)},i.prototype.init=function(){this.setData()},i.prototype.onRefreshExchange=function(){var e=t.ModelManager.ins().roleModel.exchangeListData[i.TYPE_EXCHANGE];e&&(e.useTimes-=1,e.useTimes=e.useTimes<0?0:e.useTimes,this._itemArrayCollection.replaceItemAt(e,i.INDEX))},i.prototype.refreshData=function(){this.setData()},i.prototype.onClose=function(){t.ViewManager.ins().close(i)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.dataAry&&(this.dataAry.length=0,this.dataAry=null),this._scrollViewContainer.itemRenderer=null,this._scrollViewContainer.dataProvider=null,this._scrollViewContainer.destory(),this._scrollViewContainer=null,this.dragDropUI&&this.dragDropUI.destroy(),this._itemArrayCollection.removeAll(),this.removeObserve(),this.$onClose()},i.TYPE_EXCHANGE=0,i.INDEX=-1,i}(t.BaseEuiView);t.RoleExchangView=e,__reflect(e.prototype,"app.RoleExchangView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),this.redDot==i&&(this.redDot.visible=!1)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.labelDisplay.text=t.LanguageUtils.language_Omission_txt44;var i="FashionMgr.selectedIsCanAct";this.redDot.updateShowFunctions=i},i.prototype.refresh=function(){this.redDot.param=null},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(eui.Button);t.FashionActBtnItemView=e,__reflect(e.prototype,"app.FashionActBtnItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.itemArrayCollection=null,t.itemArrayCollection2=null,t.dataAry=[],t.dataAry2=[],t.selectedIndex=0,t.skinName="FashionAttrSkin",t.itemArrayCollection=new eui.ArrayCollection,t.itemArrayCollection2=new eui.ArrayCollection,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.scroller_cur.scrollPolicyH=eui.ScrollPolicy.OFF,this.scroller_cur.scrollPolicyV=eui.ScrollPolicy.AUTO,this.scroller_cur.verticalScrollBar.autoVisibility=!1,this.scroller_cur.verticalScrollBar.visible=!1,this.scroller_next.scrollPolicyH=eui.ScrollPolicy.OFF,this.scroller_next.scrollPolicyV=eui.ScrollPolicy.AUTO,this.scroller_next.verticalScrollBar.autoVisibility=!1,this.scroller_next.verticalScrollBar.visible=!1,this.list_cur.itemRenderer=t.FashionAttrItemRender,this.itemArrayCollection=new eui.ArrayCollection,this.list_cur.dataProvider=this.itemArrayCollection,this.list_next.itemRenderer=t.FashionAttrItemRender,this.itemArrayCollection2=new eui.ArrayCollection,this.list_next.dataProvider=this.itemArrayCollection2,this.list_cur.visible=!1,this.list_next.visible=!1,this.txt_cur_desc.visible=!1,this.txt_next_desc.visible=!1,this.txt_desc.visible=!1,t.MouseScroller.bind(this.scroller_cur),t.MouseScroller.bind(this.scroller_next)},i.prototype.setAttr=function(e,i,n,s){if(void 0===n&&(n=1),void 0===s&&(s=0),this.list_cur.visible=!1,this.list_next.visible=!1,1==s?this.txt_desc.text="套装展示后将覆盖原来的衣服和武器时装，套装激活后无需展示也可享永久属性加成！":this.txt_desc.text="时装激活后无需展示也可享永久属性加成！",0==n)return this.txt_cur_desc.visible=!1,this.txt_next_desc.visible=!1,void(this.txt_desc.visible=!1);i>0?(this.txt_cur_desc.visible=!0,this.txt_next_desc.visible=!0,this.txt_cur_desc.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_System74),this.txt_next_desc.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_System73),this.txt_desc.visible=!1):(this.txt_cur_desc.visible=!0,this.txt_cur_desc.textFlow=t.TextFlowMaker.generateTextFlow("|C:0xff7700&T:"+t.LanguageUtils.language_System72+"|"),this.txt_next_desc.visible=!1,this.txt_desc.visible=!0);var a;a=t.GlobalConfig.FashionupgradeConfig[e][i],i++,this.cfg1=t.GlobalConfig.FashionupgradeConfig[e][i];var r,o,l=[],h=[],p=[],u=0;if(a){if(this.list_cur.visible=!0,a.attribute)for(r=0;r<a.attribute.length;r++){var c={};c.type=a.attribute[r].type,u=a.attribute[r].value,c.value=u,p.push(c)}for(r=0;r<p.length;r++)o=t.AttributeData.getItemAttStrByType(p[r],p,1,!1,!0,"0xE0AE75","0xcbc2b2"),""!=o&&l.push(o);if(p.length=0,!this.txt_desc.visible)if(this.cfg1){if(this.txt_next_desc.visible=!0,this.list_next.visible=!0,this.cfg1.attribute)for(r=0;r<this.cfg1.attribute.length;r++){var c={};c.type=this.cfg1.attribute[r].type,u=this.cfg1.attribute[r].value,c.value=u,p.push(c)}for(0==p.length&&(this.txt_next_desc.visible=!1),r=0;r<p.length;r++)p[r]&&(o=t.AttributeData.getItemAttStrByType(p[r],p,1,!1,!0,"0xE0AE75","0xcbc2b2"),""!=o&&h.push(o))}else this.txt_next_desc.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Tips98),this.txt_next_desc.visible=!0;this.setData(l,h)}},i.prototype.setData=function(t,e){this.creatItem(t),this.creatItem2(e)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);0==this.dataAry.length?(this.list_cur.visible=!1,this.txt_cur_desc.visible&&(this.txt_cur_desc.visible=!1),this.txt_desc.visible=!1):(this.list_cur.visible=!0,this.txt_cur_desc.visible=!0),this.itemArrayCollection.replaceAll(this.dataAry)},i.prototype.creatItem2=function(e){this.dataAry2.length=0;for(var i=0;i<e.length;++i)this.dataAry2.push(e[i]);0==this.dataAry2.length?(this.list_next.visible=!1,this.txt_next_desc.text==t.LanguageUtils.language_Tips98&&(this.txt_next_desc.visible=!1)):(this.list_next.visible=!0,this.txt_next_desc.visible=!0),this.itemArrayCollection2.replaceAll(this.dataAry2)},i.prototype.destroy=function(){this.itemArrayCollection.removeAll(),this.itemArrayCollection=null,t.MouseScroller.unbind(this.scroller_cur),t.MouseScroller.unbind(this.scroller_next),this.dataAry.length=0,this.dataAry=null,this.dataAry2.length=0,this.dataAry2=null,this.removeObserve(),t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.FashionAtrrView=e,__reflect(e.prototype,"app.FashionAtrrView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FashionAttrItemSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=this.data;this.txt.textFlow=t.TextFlowMaker.generateTextFlow(e)}},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(eui.ItemRenderer);t.FashionAttrItemRender=e,__reflect(e.prototype,"app.FashionAttrItemRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchAp,this),this.icon=""},i.prototype.onTouchAp=function(t){this.callFunc&&this.callFunc.call(this.targetObj,this.roleAction)},i.prototype.setData=function(t,e,i){this.roleAction=t,this.callFunc=e,this.targetObj=i},i.prototype.destroy=function(){this.callFunc=null,this.targetObj=null,t.DisplayUtils.removeFromParent(this)},i}(eui.Button);t.FashionBtnItemView=e,__reflect(e.prototype,"app.FashionBtnItemView");var i;!function(t){t[t.Attack=0]="Attack",t[t.Await=1]="Await",t[t.Walk=2]="Walk",t[t.Run=3]="Run"}(i=t.RoleAction||(t.RoleAction={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FourImagesCostItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this)},i.prototype.onOver=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;i.localToGlobal(),t.GlobalConfig.FashionattributeConfig[this.data.id]}},i.prototype.dataChanged=function(){this.visible=null!=this.data;var e=this.data.data.type,i=this.data.name,n=t.CurrencyUtils.getCurrency(e,this.data.data.id),s=n>=this.data.data.count?t.ColorUtil.GREEN_COLOR:t.ColorUtil.NAME_RED,a="|C:"+s+"&T:"+i+"|C:"+s+"&T:*"+this.data.data.count;this.txtCost.textFlow=t.TextFlowMaker.generateTextFlow(a),this.iconGoods.source=t.FourImagesData.convertItemIcon(this.data.data).icon+""},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this)},i}(eui.ItemRenderer);t.FashionCostItem=e,__reflect(e.prototype,"app.FashionCostItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),this.redDot==i&&(this.redDot.visible=!1)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.labelDisplay.text=t.LanguageUtils.language_Omission_txt8;var i="FashionMgr.selectedIsCanAct";this.redDot.updateShowFunctions=i},i.prototype.refresh=function(){this.redDot.param=null},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(eui.Button);t.FashionUpgradeBtnItemView=e,__reflect(e.prototype,"app.FashionUpgradeBtnItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="FourImageLevelUpWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.tabList.itemRenderer=t.TradeLineTabView,this.costList.itemRenderer=t.FourImagesCostItem,this.gCurList.itemRenderer=t.FourImagesAttrItemCurView,this.gNextList.itemRenderer=t.FourImagesAttrItemNextView,this.costArr=new eui.ArrayCollection},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System63),this.redPoint1.visible=this.redPoint2.visible=this.redPoint3.visible=this.redPoint4.visible=!1,this.observe(t.StrengthenMgr.ins().post_StrengthenData,this.updateData),this.observe(t.StrengthenMgr.ins().post_StrengthenUpdate,this.updateData),this.observe(t.StrengthenMgr.ins().postFourResult,this.postFourResult),this.observe(t.BagMgr.ins().post_8_1,this.updateRedPoint),this.observe(t.BagMgr.ins().post_8_4,this.updateRedPoint),this.observe(t.BagMgr.ins().post_8_3,this.updateRedPoint),this.observe(t.DefaultMgr.ins().postMoneyChange,this.updateRedPoint),this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),t.EventManager.ins().addEvent(t.CompEvent.GET_PROPS_STRENGTHEN_FOUR_IMAGE,this.onGetProps,this),this.tabList.dataProvider=new eui.ArrayCollection([{name:t.LanguageUtils.language_FourImages_Text1},{name:t.LanguageUtils.language_FourImages_Text2},{name:t.LanguageUtils.language_FourImages_Text3},{name:t.LanguageUtils.language_FourImages_Text4}]),this.tabList.selectedIndex=0,this.addTouchEvent(this.btnUp,this.levelUp),this.updateList(0),this.updateRedPoint()},i.prototype.postFourResult=function(e){e?4==e&&t.DefaultMgr.ins().payResultMC(0,this.localToGlobal(this.width/2+60,this.height/2)):t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2+60,this.height/2))},i.prototype.updateRedPoint=function(){for(var e,i,n=1;5>n;n++){var s=t.FourImagesData.getMaxLv(n);if(e=t.StrengthenMgr.ins().getFourImagesData(n),i=t.FourImagesData.getConfig(n,null==e?1:e.lv+1),i&&i.cost){this["redPoint"+n].visible=!0;for(var a in i.cost){var r=i.cost[a],o=t.CurrencyUtils.getCurrency(r.type,r.id);if(o<r.count||e&&e.lv==s.lv){this["redPoint"+n].visible=!1;break}}}else this["redPoint"+n].visible=!1}this.cfgCur&&this.costArr.replaceAll(this.cfgCur.cost)},i.prototype.updateData=function(){this.updateList(this.tabList.selectedIndex)},i.prototype.levelUp=function(){if(this.cfgCur){var e=t.OtherMgr.ins().getItemIDByCost(this.cfgCur.cost);if(e.itemId>0)return this.onGetProps(null,e),!1}t.StrengthenMgr.ins().sendStrengthenInfo(2,this.tabList.selectedIndex+1)},i.prototype.onGetProps=function(e,i){void 0===i&&(i=null),this.cfgCur&&(i||(i=t.OtherMgr.ins().getItemIDByCost(this.cfgCur.cost)),0==i.itemId&&(i.itemId=i.itemId2),i.itemId>0&&(t.ViewManager.ins().isShow(t.GaimItemWin)||t.ViewManager.ins().open(t.GaimItemWin,i,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode)))},i.prototype.updateList=function(e){this.cfgCur=null,this.Mc||(this.Mc=t.ObjectPool.pop("app.MovieClip"),this.Mc.scaleX=this.Mc.scaleY=1,this.Mc.touchEnabled=!1,this.effGrp.addChild(this.Mc)),this.Mc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_sx"+(e+1),-1),this.nextLv.visible=!0;var i=t.StrengthenMgr.ins().getFourImagesData(e+1);if(i){var n=t.FourImagesData.getConfig(e+1,i.lv);if(n){this.curLV.text=t.LanguageUtils.language_Omission_txt59+i.lv,this.curOrder.text=t.TextFlowMaker.getCStr(i.lv)+t.LanguageUtils.language_Common_230;var s=t.FourImagesData.getAttrib(e+1,i.lv,!1);this.gCurList.dataProvider=new eui.ArrayCollection(s);var a=t.FourImagesData.getAttrib(e+1,i.lv+1,!1);this.gNextList.dataProvider=new eui.ArrayCollection(a),a.length>0?this.nextLv.text=t.LanguageUtils.language_Omission_txt60+(i.lv+1):this.nextLv.visible=!1}}else{this.curLV.text=t.LanguageUtils.language_Omission_txt59+"0",this.nextLv.text=t.LanguageUtils.language_Omission_txt60+"1",this.curOrder.text="零阶";var s=t.FourImagesData.getAttrib(e+1,0,!1),a=t.FourImagesData.getAttrib(e+1,1,!1);this.gCurList.dataProvider=new eui.ArrayCollection(s),this.gNextList.dataProvider=new eui.ArrayCollection(a)}this.setAttribData(e+1)},i.prototype.setAttribData=function(e){this.cfgCur=null;var i=t.StrengthenMgr.ins().getFourImagesData(e),n=t.FourImagesData.getMaxLv(e);if(i&&i.lv==n.lv)return this.costList.visible=!1,this.txt_get.visible=!1,this.btnUp.visible=!1,this.lbMax0.visible=!0,this.lbMax.visible=!0,void(this.lbMax.text=t.LanguageUtils["language_FourImages_Text"+e]+t.LanguageUtils.language_FourImages_MaxText);this.costList.visible=!0,this.btnUp.visible=!0,this.lbMax.visible=!1,this.lbMax0.visible=!1;var s=t.FourImagesData.getConfig(e,null==i?1:i.lv+1);this.cfgCur=s,this.costArr.source=s.cost,t.GetPropsView.getPropsTxt(this.txt_get,s.cost[0].id),this.costList.dataProvider=this.costArr},i.prototype.onChange=function(t){this.tabList.selectedIndex=t.itemIndex,this.updateList(t.itemIndex)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.removeTouchEvent(this.btnUp,this.levelUp),this.tabList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.Mc&&(this.Mc.destroy(),this.Mc=null)},i}(t.BaseEuiView);t.FourImageLevelUpWin=e,__reflect(e.prototype,"app.FourImageLevelUpWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FourImagesAttrItemCurSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){this.visible=null!=this.data,this.data&&(this.txt_cur.textFlow=t.TextFlowMaker.generateTextFlow(this.data))},i}(eui.ItemRenderer);t.FourImagesAttrItemCurView=e,__reflect(e.prototype,"app.FourImagesAttrItemCurView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FourImagesAttrItemNextSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){this.visible=null!=this.data,this.data&&(this.txt_next.textFlow=t.TextFlowMaker.generateTextFlow(this.data))},i}(eui.ItemRenderer);t.FourImagesAttrItemNextView=e,__reflect(e.prototype,"app.FourImagesAttrItemNextView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FourImagesCostItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),gamelib.DeviceUtils.IsMobile?this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOver,this):(this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this))},i.prototype.onOver=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=(i.localToGlobal(),i.localToGlobal());if(0==this.data.type){var s=t.GlobalConfig.StdItems[this.data.id];if(s){var a=t.TipsType.TIPS_EQUIP;a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2})}}else{var r=t.GlobalConfig.NumericalIcon[this.data.id];r.description&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,r.description,{x:n.x+i.width/2,y:n.y+i.height/2})}}},i.prototype.dataChanged=function(){this.visible=null!=this.data;var e=this.data.type,i=t.CurrencyUtils.getCurrency(e,this.data.id),n=i>=this.data.count?t.ColorUtil.GREEN_COLOR:t.ColorUtil.NAME_RED,s="|C:"+n+"&T:"+t.CommonUtils.overLengthChange(i)+"|C:0xe0ae75&T:/"+t.CommonUtils.overLengthChange(this.data.count);this.txtCost.textFlow=t.TextFlowMaker.generateTextFlow(s),this.iconGoods.source=t.FourImagesData.convertItemIcon(this.data).icon+""},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),gamelib.DeviceUtils.IsMobile?this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOver,this):(this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this))},i}(eui.ItemRenderer);t.FourImagesCostItem=e,__reflect(e.prototype,"app.FourImagesCostItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){},i.prototype.setData=function(e){void 0===e&&(e=0);var i;if(0==e)i=t.StrengthenMgr.ins().getFourImagesData(this.pos);else{var n=t.EquipItemMgr.ins().otherPlayerEquips;i=n.getFourImagesData(this.pos)}if(this.lbTitle.text=t.LanguageUtils["language_FourImages_Title_Text"+this.pos],!i)return void(this.lbLevel.text="");var s=t.FourImagesData.getConfig(this.pos,i.lv),a=null==s.fsname?"":s.fsname;this.lbTitle.text+=a+s.endname},i.prototype.updateData=function(){this.icon.source="sx_icon_"+this.pos},i.prototype.setSeleted=function(t){this.seletectd.visible=t},i}(t.BaseView);t.FourImagesItemView=e,__reflect(e.prototype,"app.FourImagesItemView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="FourImagesLevelViewSkin",e}return __extends(e,t),e}(t.BaseView);t.FourImagesLevelView=e,__reflect(e.prototype,"app.FourImagesLevelView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FourImagesShowInfoViewSkin",t}return __extends(i,e),i.prototype.updateStr=function(i,n){this.gCurList.itemRenderer=t.FourImagesAttrItemCurView,this.gNextList.itemRenderer=t.FourImagesAttrItemNextView,this.txtLimit.visible=!1,this.setData(i.pos,i.type),e.prototype.onResizeUI.call(this,i,n)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.mc&&(this.mc.destroy(),this.mc=null)},i.prototype.setData=function(e,i){if(void 0===i&&(i=0),e){this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.scaleX=this.mc.scaleY=.5,this.mc.touchEnabled=!1,this.effGrp.addChild(this.mc)),this.mc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_sx"+e,-1),this.pos=e,this.txtAttrib.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils["language_FourImages_Tips"+this.pos]);var n;if(0==i)n=t.StrengthenMgr.ins().getFourImagesData(this.pos);else{var s=t.EquipItemMgr.ins().otherPlayerEquips;n=s.getFourImagesData(this.pos)}var a=new eui.ArrayCollection;if(this.gCurList.dataProvider=a,n){var r=t.FourImagesData.getConfig(this.pos,n.lv),o=null==r.fsname?"":r.fsname;this.lbTitle.text=o+r.endname+t.LanguageUtils["language_FourImages_Text"+this.pos];var l=t.FourImagesData.getAttrib(this.pos,n.lv,!1);a.source=l,this.curOrder.text=t.TextFlowMaker.getCStr(n.lv)+t.LanguageUtils.language_Common_230,this.gCurList.dataProvider=a;var h=t.FourImagesData.getConfig(this.pos,n.lv+1);if(h&&h.limit)if(this.txtLimit.visible=!1,4==h.limit.length){var p=t.FourImagesData.getConfig(this.pos,h.limit[0].lv);this.txtLimit.text=t.StringUtils.replace(t.LanguageUtils.language_FourImages_Text0,null==p.fsname?p.endname:p.fsname+p.endname)}else for(var u=0,c=h.limit;u<c.length;u++){c[u]}else this.txtLimit.visible=!1}else{this.curOrder.text="零阶",this.lbTitle.text=t.LanguageUtils["language_FourImages_Text"+this.pos];var l=t.FourImagesData.getAttrib(this.pos,0,!1);a.source=l;t.FourImagesData.getAttrib(this.pos,1,!1);this.gCurList.dataProvider=a}}},i}(t.TipsBase);t.FourImagesShowInfoView=e,__reflect(e.prototype,"app.FourImagesShowInfoView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="FourImagesStarViewSkin",e}return __extends(e,t),e.prototype.setData=function(t){1==t?this.star_1.visible=!0:this.star_1.visible=!1},e}(t.BaseView);t.FourImagesStarView=e,__reflect(e.prototype,"app.FourImagesStarView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.ruleId=61,i.titleStr=t.LanguageUtils.language_System63,i.skinName="FourImagesViewSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){t.StrengthenMgr.ins().sendStrengthenInit(2),this.observe(t.DefaultMgr.ins().postMoneyChange,this.updateRedPoint),this.observe(t.BagMgr.ins().post_8_1,this.updateRedPoint),this.observe(t.BagMgr.ins().post_8_4,this.updateRedPoint),this.observe(t.BagMgr.ins().post_8_3,this.updateRedPoint),this.observe(t.StrengthenMgr.ins().post_StrengthenData,this.updateData),this.observe(t.StrengthenMgr.ins().post_StrengthenUpdate,this.updateData);for(var e=1;5>e;e++){var i=this["fourImagesItemView_"+e];i.pos=e,i.updateData(),this.addMouseMoveEvent(i,this.mouseMove),this.addMouseOverEvent(i,this.mouseMove)}this.addTouchEvent(this.goBtn,this.onClick),this.updateData(),this.updateRedPoint()},i.prototype.updateRedPoint=function(){this.redPoint.visible=t.StrengthenMgr.ins().fourImageRed()},i.prototype.updateData=function(){for(var e=(t.StrengthenMgr.ins().strengthenDic[2],1);5>e;e++){var i=this["fourImagesItemView_"+e];i&&i.setData()}},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=i.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_FOURIMAGE,{pos:i.pos,type:0},{x:n.x+i.width/2,y:n.y+i.height/2})}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.goBtn:t.ViewManager.ins().open(t.FourImageLevelUpWin)}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this);for(var t=1;5>t;t++){var i=this["fourImagesItemView_"+t];i&&(this.removeTouchEvent(i,this.mouseMove),this.removeTouchEvent(i,this.mouseMove))}this.removeTouchEvent(this.goBtn,this.onClick),this.seltecdFourImagesItem=null},i}(t.BaseView);t.FourImagesView=e,__reflect(e.prototype,"app.FourImagesView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.suitDic={},i.ruleId=59,i.titleStr=t.LanguageUtils.language_System3,i.skinName="GodEquipSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){var e,i,n;for(this.equipArr=[],this.imgArr=[],i=0;i<this.iconGroup.numElements;i++)e=this.iconGroup.getChildByName("item_"+i),this.equipArr.push(e),n=this.getChildByName("img_"+i),this.imgArr.push(n);var s=t.EquipItemMgr.ins().suitEquips;this.preLen=s.length,this.curLen=s.length,this.setSuitData(),this.refreshSuitEquipAtrr(),t.EventManager.ins().addEvent(t.ItemEvent.EQUIP_WEAR_EQUIP,this.onWear,this),t.EventManager.ins().addEvent(t.ItemEvent.EQUIP_DROP_EQUIP,this.onDrop,this)},i.prototype.refreshSuitEquipAtrr=function(){var e=t.EquipItemMgr.ins().suitEquips;if(this.curLen=e.length,4==e.length){for(var i=void 0,n=void 0,s=[],a=0,r=e.length;r>a;a++)i=e[a],n=t.GlobalConfig.StdItems[i.wItemId],s.push(n.suitId);for(var o=s[0],l=0,h=s.length;h>l;l++){var p=s[l];o>p&&(o=p)}this.setData(o)}else this.setData()},i.prototype.setData=function(e){if(void 0===e&&(e=null),!e)return this.group_yjh.visible=!1,this.img_wjh.visible=!0,this.preLen=this.curLen,this.curId=null,void(this.preId=null);this.curId=e,this.preLen=this.curLen;var i=t.ModelManager.ins().roleModel.getSuitDataById(e);this.group_yjh.visible=!0,this.img_wjh.visible=!1,this.suitLv.text="已激活套装属性：共鸣"+(e+"").substring(2)+"阶",this.attrLab.textFlow=t.TextFlowMaker.generateTextFlow(i.toString()),this.preId=this.curId},i.prototype.setSuitData=function(){for(var e=0;e<this.equipArr.length;e++)this.equipArr[e].visible=!1,this.imgArr[e].visible=!0;var i=t.EquipItemMgr.ins().suitEquips;if(i)for(var n,e=0;e<i.length;e++)n=i[e].nPos,this.equipArr[n-10].visible=!0,this.imgArr[n-10].visible=!1,this.equipArr[n-10].setItem(i[e],null,null,0,null,null,null,"")},i.prototype.onWear=function(e){var i=e[0];this.setSuitData(),i&&null!=i.nPos&&i.nPos>=t.StdItemType.itEquipDiamond&&i.nPos<t.StdItemType.itShield&&this.equipArr[i.nPos-10].setItem(i,null,null,0,null,null,null,""),this.refreshSuitEquipAtrr()},i.prototype.onDrop=function(t){this.setSuitData(),this.refreshSuitEquipAtrr()
},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),t.DisplayUtils.removeFromParent(this.iconGroup),this.iconGroup&&this.iconGroup.removeChildren(),this.iconGroup=null,t.EventManager.ins().removeEvent(t.ItemEvent.EQUIP_WEAR_EQUIP,this.onWear,this),t.EventManager.ins().removeEvent(t.ItemEvent.EQUIP_DROP_EQUIP,this.onDrop,this);var i,n;for(i=0,n=this.equipArr.length;n>i;i++){var s=this.equipArr[i];s.destroy(),s=null}this.equipArr.length=0,this.equipArr=null,t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.GodEquipView=e,__reflect(e.prototype,"app.GodEquipView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="GuanZhiSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.costArr=new eui.ArrayCollection},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setTitle(t.LanguageUtils.language_System93),this.dragDropUI.setParent(this),this.currentLabel.text=t.LanguageUtils.language_GuanZhi_Label,this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.addTouchEvent(this.btnUp,this.levelUp),this.costList.itemRenderer=t.FourImagesCostItem,this.gCurList.itemRenderer=t.FourImagesAttrItemCurView,this.gNextList.itemRenderer=t.FourImagesAttrItemNextView,this.observe(t.BagMgr.ins().post_8_1,this.updateCostList),this.observe(t.BagMgr.ins().post_8_4,this.updateCostList),this.observe(t.BagMgr.ins().post_8_3,this.updateCostList),this.observe(t.DefaultMgr.ins().post_g_0_7,this.updateView),this.observe(t.DefaultMgr.ins().postMoneyChange,this.updateCostList),this.costList.dataProvider=this.costArr,t.GetPropsView.getPropsTxt(this.txt_get,932),this.txt_get.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_155+"<u>"),this.updateView()},i.prototype.onGetProps=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getOfficialPositicon()+1,n=t.GlobalConfig.OfficeConfig[i];if(n){var s=t.OtherMgr.ins().getItemIDByCost(n.consume);return s.itemId&&(t.ViewManager.ins().isShow(t.GaimItemWin)||t.ViewManager.ins().open(t.GaimItemWin,s,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode)),!1}return!0},i.prototype.levelUp=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getOfficialPositicon()+1,n=t.GlobalConfig.OfficeConfig[i];if(n){if(n.circle>0&&e.propSet.getZSLevel()<n.circle)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips119);if(e.propSet.getLevel()<n.levellimit)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips119);this.onGetProps()||t.OtherMgr.ins().send_26_67()}},i.prototype.updateCostList=function(){this.redPoint.visible=t.OtherMgr.ins().getOfficeRed();var e=t.EntityMgr.ins().getPayer,i=e.propSet.getOfficialPositicon()+1,n=t.GlobalConfig.OfficeConfig[i];if(n){this.costList.visible=!0;for(var s=[],a=0;a<n.consume.length;a++)s.push({type:n.consume[a].type,id:n.consume[a].id,count:n.consume[a].count});this.costArr.replaceAll(s),this.txt_get.visible=!0}else this.costList.visible=!1,this.txt_get.visible=!1},i.prototype.updateView=function(){this.isMaxLab.visible=!1,this.jiantou.visible=!0;var e=t.EntityMgr.ins().getPayer,i=e.propSet.getOfficialPositicon(),n=t.GlobalConfig.OfficeConfig[i];if(n){this.curGzImage.source="gz_zw_"+i,this.gzImage.source="gz_zw_"+i,this.gCurList.visible=!0;for(var s=n.attribute,a=[],r=0;r<s.length;r++)a.push(s[r]);for(var o=[],l="",r=0;r<a.length;r++)l=t.AttributeData.getItemAttStrByType(a[r],a),""!=l&&o.push(l);this.gCurList.dataProvider=new eui.ArrayCollection(o)}else this.gCurList.visible=!1,this.gzImage.source="gz_zw_0";var h=i+1,p=t.GlobalConfig.OfficeConfig[h];if(p){this.txt_get.visible=!0,this.levelLabel.visible=!0,this.btnUp.visible=!0,this.nextGzImage.visible=!0,p.circle>0?this.levelLabel.text=t.StringUtils.replace(t.LanguageUtils.language_GuanZhi_Label2,p.circle,p.levellimit):this.levelLabel.text=t.LanguageUtils.language_Meridians_NeedLevel_text+p.levellimit+t.LanguageUtils.language_Friend_Level_txt;var u=e.propSet.getZSLevel(),c=e.propSet.getLevel();u<p.circle||c<p.levellimit?this.levelLabel.textColor=15007744:this.levelLabel.textColor=15064527,this.nextGzImage.source="gz_zw_"+h,this.gNextList.visible=!0;for(var s=p.attribute,a=[],r=0;r<s.length;r++)a.push(s[r]);for(var o=[],l="",r=0;r<a.length;r++)l=t.AttributeData.getItemAttStrByType(a[r],a),""!=l&&o.push(l);this.gNextList.dataProvider=new eui.ArrayCollection(o)}else this.nextGzImage.visible=!1,this.gNextList.visible=!1,this.levelLabel.visible=!1,this.btnUp.visible=!1,this.txt_get.visible=!1,this.isMaxLab.visible=!0,this.jiantou.visible=this.redPoint.visible=!1,this.curGzImage.x=366,this.gCurList.x=392;this.updateCostList()},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.txt_get.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.removeTouchEvent(this.btnUp,this.levelUp)},i}(t.BaseEuiView);t.GuanZhiView=e,__reflect(e.prototype,"app.GuanZhiView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.titleStr=t.LanguageUtils.language_System99,i.skinName="RoleWeaponSoulViewSkin",i.touchEnabled=!1,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),t.SoldierSoulMgr.ins().send_58_1(1),this.addTouchEvent(this.goBtn,this.onClick),this.init()},i.prototype.init=function(){this.goBtn.visible=!0,this.observe(t.BagMgr.ins().post_8_1,this.updateRed),this.observe(t.BagMgr.ins().post_8_4,this.updateRed),this.observe(t.BagMgr.ins().post_8_3,this.updateRed);for(var e=1;5>e;e++){var i=this["weaponItem"+e];i.setData(e,1)}this.updateRed()},i.prototype.updateRed=function(){this.redPoint.visible=t.SoldierSoulMgr.ins().getWeaponRed()?!0:!1},i.prototype.onClick=function(e){switch(e.currentTarget){case this.goBtn:t.ViewManager.ins().open(t.SoldierSoulWin)}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.removeTouchEvent(this.goBtn,this.onClick)},i}(t.BaseEuiView);t.RoleWeaponSoulView=e,__reflect(e.prototype,"app.RoleWeaponSoulView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.weaponInfo=null,t.weaponID=0,t.type=0,t.touchEnabled=!1,t}return __extends(i,e),i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.addMouseMoveEvent(this.tipsGrp,this.mouseMove),this.addMouseOverEvent(this.tipsGrp,this.mouseMove)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=i.localToGlobal(0,0);t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_SOLDIERSOUL,{ID:this.weaponID,TYPE:this.type},{x:n.x+i.width/2,y:n.y+i.height/2})}},i.prototype.setData=function(e,i){this.weaponID=e,this.type=i,this.weaponName.source="role_bh_mc"+e,this.weaponMc||(this.weaponMc=t.ObjectPool.pop("app.MovieClip"),this.weaponMc.scaleX=this.weaponMc.scaleY=.7,this.weaponMc.touchEnabled=!1,this.weaponMc.blendMode=egret.BlendMode.ADD,this.weaponEff.addChild(this.weaponMc)),this.weaponMc&&this.weaponMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_bh"+e,-1);var n,s=0;if(1==this.type)n=t.SoldierSoulMgr.ins().weaponInfo[e],n&&(s=n.soulOrder);else{var a=t.EquipItemMgr.ins().otherPlayerEquips;a&&(n=a.weaponSoulInfo[this.weaponID],n&&(s=n.soulOrder))}this.curOrder.text=t.TextFlowMaker.getCStr(s)+t.LanguageUtils.language_Common_230},i.prototype.$onRemoveFromStage=function(){this.removeTouchEvent(this.tipsGrp,this.mouseMove),this.removeTouchEvent(this.tipsGrp,this.mouseMove),this.weaponMc&&(this.weaponMc.destroy(),this.weaponMc=null)},i}(t.BaseView);t.WeaponSoulItemView=e,__reflect(e.prototype,"app.WeaponSoulItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skillNum=11,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="ShortcutKeySetViewSkin",i.name="ShortcutKeySetView",i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.btnArr=[];for(var n,s=0;s<this.skillNum;s++)n=new t.ShortcutKeyView,n.id=s,this.btnArr.push(n),this.keyGroup.addChild(n),i.BUTTON_STATE==s&&(n.effectBg=!0)},i.prototype.open=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];e.prototype.open.call(this,n),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System10);var a=i.SKILL_ITEM;this.icon.source=a.icon;t.LanguageUtils.language_Omission_txt9;this.txt_desc.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt9,a.name)),this.addTouchEvent(this.btn_ok,this.onTouch),this.addTouchEvent(this.btn_noSet,this.onTouch),this.addTouchEvent(this.btn_cancel,this.onTouch),t.EventManager.ins().addEvent(t.CompEvent.SHORTCUTKEY_SET,this.onKeySet,this)},i.prototype.onTouch=function(e){switch(t.SoundManager.ins().playEffect(t.SoundUtil.VIEW),e.currentTarget){case this.btn_ok:this.func(t.UIViewFrameType.ShortcutKeyOk);break;case this.btn_noSet:this.func(t.UIViewFrameType.ShortcutKeyNoSet);break;case this.btn_cancel:this.func(t.UIViewFrameType.ShortcutKeyCancel)}t.ViewManager.ins().close(i)},i.prototype.onKeySet=function(t){var e=t[0],n=t[1];if(!n){i.BUTTON_STATE=e;for(var s,a=0,r=this.btnArr.length;r>a;a++)s=this.btnArr[a],s.id==e?s.effectBg=!0:s.effectBg=!1}},i.prototype.onShortcutKey=function(t){t?this.btn_ok.enabled=!0:this.btn_ok.visible=!1},i.prototype.func=function(e){var n=i.SKILL_ITEM;e==t.UIViewFrameType.ShortcutKeyOk?t.SettingMgr.ins().send_17_2(i.BUTTON_STATE,i.TYPE,n.skillId,i.OLD_POS):e==t.UIViewFrameType.ShortcutKeyNoSet?t.SettingMgr.ins().send_17_3(i.BUTTON_STATE):console.log("退出设置快捷键"),i.BUTTON_STATE=-1},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI&&this.dragDropUI.destroy(),this.dragDropUI=null,this.txt_desc&&(this.txt_desc.textFlow=[]);for(var n=0,s=this.btnArr.length;s>n;n++)this.btnArr[n].destory(),this.btnArr[n]=null;this.btnArr.length=0,this.btnArr=null,t.EventManager.ins().removeEvent(t.CompEvent.SHORTCUTKEY_SET,this.onKeySet,this),this.$onClose(),t.TimerManager.ins().removeAll(this)},i.BUTTON_STATE=t.CommonButtonState.none,i.TYPE=1,i.OLD_POS=-1,i}(t.BaseEuiView);t.ShortcutKeySetView=e,__reflect(e.prototype,"app.ShortcutKeySetView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.iconArr=["anjian_1","anjian_2","anjian_3","anjian_4","anjian_5","anjian_6","anjian_q","anjian_w","anjian_e","anjian_r","anjian_t","anjian_y","anjian_sz"],t.skinName="ShortcutKeyBtnSkin",t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.effect.visible=!1,this.addTouchEvent(this,this.onTouch)},i.prototype.onTouch=function(e){t.EventManager.ins().sendEvent(t.CompEvent.SHORTCUTKEY_SET,[this.id,this._skillId])},Object.defineProperty(i.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t,this.iconArr[t]?(this.icon.visible=!0,this.icon.source=this.iconArr[t],this.labelDisplay.visible=!1,this.labelDisplay.text=""):(this.icon.visible=!0,this.icon.source=this.iconArr[12],this.labelDisplay.visible=!1,this.labelDisplay.text="")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skillId",{get:function(){return this._skillId},set:function(t){this._skillId=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"effectBg",{get:function(){return this.effect.visible},set:function(t){this.effect.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"label",{set:function(t){this.labelDisplay.text=t,this.labelDisplay.visible=!0,this.icon.source=null,this.icon.visible=!1},enumerable:!0,configurable:!0}),i.prototype.destory=function(){this.effect.source=null,this.icon.source=null,this.iconArr.length=0,this.iconArr=null,this.$onClose(),this.removeTouchEvent(this,this.onTouch),t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.ShortcutKeyView=e,__reflect(e.prototype,"app.ShortcutKeyView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MeridiansAttrItemCurSkin",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.visible=null!=this.data,this.data&&(this.txt_cur.text=this.data)},e}(eui.ItemRenderer);t.MeridiansAttrItemCurView=e,__reflect(e.prototype,"app.MeridiansAttrItemCurView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MeridiansAttrItemNextSkin",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.visible=null!=this.data,this.data&&(this.txt_next.text=this.data)},e}(eui.ItemRenderer);t.MeridiansAttrItemNextView=e,__reflect(e.prototype,"app.MeridiansAttrItemNextView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="MeridiansItemView",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.fireBallmc=t.ObjectPool.pop("app.MovieClip"),this.fireBallmc.touchEnabled=!1,this.fireBallmc.blendMode=egret.BlendMode.ADD,this.effGp.addChild(this.fireBallmc),this.fireBallmc.x=this.fireBallmc.y=-10,this.lightMc=t.ObjectPool.pop("app.MovieClip"),this.lightMc.touchEnabled=!1,this.lightMc.blendMode=egret.BlendMode.ADD,this.effGp0.addChild(this.lightMc),this.lightMc.x=this.lightMc.y=-10},i.prototype.setEffPayer=function(t){t?(this.fireBallmc.visible=!0,this.fireBallmc.isPlaying||this.fireBallmc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jm_huoqiu",-1,null,!1)):this.fireBallmc&&(this.fireBallmc.stop(),this.fireBallmc.visible=!1)},i.prototype.setLights=function(t){t?(this.lightMc.visible=!0,this.lightMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jm_kuoshn",1,null,!1)):this.lightMc.visible=!1},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this),this.lightMc&&(this.lightMc.destroy(),this.lightMc=null),this.fireBallmc&&(this.fireBallmc.destroy(),this.fireBallmc=null),this.effGp0&&(t.DisplayUtils.removeFromParent(this.effGp0),this.effGp0.numElements>0&&this.effGp0.removeChildren(),this.effGp0=null),this.effGp&&(t.DisplayUtils.removeFromParent(this.effGp),this.effGp.numElements>0&&this.effGp.removeChildren(),this.effGp=null)},i}(t.BaseView);t.MeridiansItemView=e,__reflect(e.prototype,"app.MeridiansItemView")}(app||(app={}));var MeridiansLevelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MerdiansLevelItemSkin",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){this.img.source="Meridians_jie_"+this.data},e}(eui.ItemRenderer);__reflect(MeridiansLevelItem.prototype,"MeridiansLevelItem");var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MeridiansLevelSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.curArr=new eui.ArrayCollection,this.imgList.itemRenderer=MeridiansLevelItem,this.imgList.dataProvider=this.curArr},e.prototype.setLevelValue=function(t){var e=[];e=t>99?this.getLevelStr3(t):t>9?this.getLevelStr2(t):this.getLevelStr1(t),e.push("ji"),this.curArr.source=e},e.prototype.getLevelStr1=function(t){return[t]},e.prototype.getLevelStr2=function(t){var e=[],i=Math.floor(t/10);i>1&&e.push(i),e.push("10");var n=t%10;return n>0&&e.push(n),e},e.prototype.getLevelStr3=function(t){var e=[],i=Math.floor(t/100);e.push(i),e.push("11");var n=Math.floor(t%100/10);n>0&&(e.push(n),e.push("10"));var s=t%10;return s>0&&(0==n&&e.push("0"),e.push(s)),e},e.prototype.destroy=function(){this.$onClose()},e}(t.BaseView);t.MeridiansLevelView=e,__reflect(e.prototype,"app.MeridiansLevelView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.meridiansLevel=-1,i.breakthrough=!1,i.ruleId=7,i.titleStr=t.LanguageUtils.language_System7,i.skinName="MeridiansViewSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.initUI()},i.prototype.initUI=function(){this.neiGongBtn.visible=!1,this.neiGongGrp.visible=!1;var e=t.GlobalConfig.MeridiansSetConfig.equipOpen,i=t.GlobalConfig.MeridiansSetConfig.equipOpenBS;if(i){var n=0,s=[];t.ViewManager.ins().isCheckOpen(e)&&s.push({type:"equipOpen",img1:"tab_ngzbt01",img2:"tab_ngzbt02"}),t.ViewManager.ins().isCheckOpen(i)&&(s.push({type:"equipOpenBS",img1:"tab_ngzbt12",img2:"tab_ngzbt11"}),this.neiGongBtn.visible=!0,n=s.length-1),this.ngEquiTabBar.itemRenderer=t.NGEquipTab,this.ngEquiTabBar.dataProvider=new eui.ArrayCollection(s),this.ngEquipView.init(1),this.ngGemstoneView.init(2),this.ngEquiTabBar.selectedIndex=n,this.onTabTouch(null)}this.maxTipsLabel.text=t.LanguageUtils.language_Meridians_Max_Lv,this.maxLevel=t.GlobalConfig.MeridiansSetConfig.limit,this.tipsMc=t.ObjectPool.pop("app.MovieClip"),this.tipsMc.blendMode=egret.BlendMode.ADD,this.tipsMc.touchEnabled=!1,this.tipsMc.x=20,this.tipsGP.addChild(this.tipsMc),this.roleMc=t.ObjectPool.pop("app.MovieClip"),this.roleMc.blendMode=egret.BlendMode.ADD,this.roleMc.touchEnabled=!1,this.roleMc.x=20,this.roleGP.addChild(this.roleMc),this.curAttribArr=new eui.ArrayCollection,this.nextAttribArr=new eui.ArrayCollection,this.gCurList.itemRenderer=t.MeridiansAttrItemCurView,this.gCurList.dataProvider=this.curAttribArr,this.gNextList.itemRenderer=t.MeridiansAttrItemNextView,this.gNextList.dataProvider=this.nextAttribArr,this.httpTxtParser=new egret.HtmlTextParser,this.addTouchEvent(this.btnUp,this.onClick),this.addTouchEvent(this.neiGongBtn,this.onClick),this.addTouchEvent(this.neiGongCloseBtn,this.onClick),this.addChangeEvent(this.ngEquiTabBar,this.onTabTouch),this.addMouseMoveEvent(this.materImg,this.mouseMove),this.addMouseOverEvent(this.materImg,this.mouseMove),this.txt_get_repair.textFlow=t.TextFlowMaker.generateTextFlow("<a><u>"+t.LanguageUtils.language_Common_155+"<u></a>"),this.addTouchEvent(this.txt_get_repair,this.getFunction),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateData),this.observe(t.BagMgr.ins().post_8_1,this.setAttribData),this.observe(t.BagMgr.ins().post_8_3,this.setAttribData),this.observe(t.BagMgr.ins().post_8_4,this.setAttribData),this.updateData()},i.prototype.showView=function(){},i.prototype.hideView=function(){this.neiGongGrp.visible=!1},i.prototype.getFunction=function(){if(!t.ViewManager.ins().isShow(t.GaimItemWin)){var e=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,this.materImg.itemID,{x:e.x,y:e.y},{height:this.height,width:this.width},this.hashCode)}},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(e.currentTarget.itemID){var n=t.GlobalConfig.StdItems[e.currentTarget.itemID];if(n){var s=i.localToGlobal(),a=t.TipsType.TIPS_EQUIP;a=n.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,n,{x:s.x+i.width/2,y:s.y+i.height/2})}}}},i.prototype.updateData=function(){var e=this,i=t.EntityMgr.ins().getPayer,n=i.propSet,s=n.getMeridians();if(-1==this.meridiansLevel)this.meridiansLevel=s,this.initData(),this.setAttribData();else if(this.meridiansLevel!=s){this.meridiansLevel=s;var a=s>0&&s%10==0?!0:!1;a?(this.meridiansLine8.source="Meridians_xian_1",this.meridiansitemView9.item.visible=!0,this.meridiansitemView9.setEffPayer(!0),this.tipsMc.visible=!0,this.tipsMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jm_tpcg",1,null,!1),this.roleMc.visible=!0,this.roleMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_jm_renwu",3,function(){e.roleMc.visible=!1,e.tipsMc.visible=!1;var i=e;t.TimerManager.ins().doNext(function(){i.initData(!0),i.setAttribData()},e)},!1),this.updateButton()):(this.initData(!0),this.setAttribData())}},i.prototype.initData=function(e){void 0===e&&(e=!1);var i=t.EntityMgr.ins().getPayer,n=i.propSet,s=n.getMeridians(),a=s>=this.maxLevel,r=s%10;9==r?(this.btnUp.label=t.LanguageUtils.language_Meridians_Up_text1,this.breakthrough=!0):(this.btnUp.label=t.LanguageUtils.language_Meridians_Up_text0,this.breakthrough=!1);for(var o=0;9>o;o++)this["meridiansLine"+o].source="Meridians_xian_"+(r>o+1?"1":"2");for(var l,o=1;10>=o;o++)l=this["meridiansitemView"+(o-1)],l.item.visible=a&&0==r||(r>=o?!0:!1),l.setEffPayer(l.item.visible),l.setLights(o==r&&e),l.bg.visible=!l.item.visible;this.updateButton()},i.prototype.updateButton=function(){this.meridiansShowLevel.setLevelValue(this.meridiansLevel);var e=t.MeridiansData.getMeridiansAttrib(this.meridiansLevel,!1),i=t.MeridiansData.getMeridiansAttrib(this.meridiansLevel+1,!0);this.curAttribArr.source=e,this.nextAttribArr.source=i,this.setAttribData()},i.prototype.setAttribData=function(){var e=this.meridiansLevel+1<1?1:this.meridiansLevel+1,i=t.GlobalConfig.MeridiansConfig;if(this.txt_get_repair.visible=!1,this.meridiansLevel>=this.maxLevel)return this.txt_level.text="",this.materImg.visible=!1,this.costLabel.visible=!1,this.maxTipsLabel.visible=!0,this.redDotMeridians.visible=!1,this.btnUp.visible=!1,this.costTipsLabel.visible=!1,this.gNextList.visible=!1,void(this.gCurList.x=110);var n=t.EntityMgr.ins().getPayer,s=n.propSet.getZSLevel();this.gCurList.x=0,this.gNextList.visible=!0,this.maxTipsLabel.visible=!1,this.costTipsLabel.visible=!0,this.btnUp.visible=!0;var a=!0;this.nextMeridiansData=i[e];var r="|C:0xD1A977&T:"+t.LanguageUtils.language_Meridians_CostCircleLevel_text+"|";s<this.nextMeridiansData.circle?(a=!1,r+="|C:0xe50000&T:"+this.nextMeridiansData.circle+"|"):r+="|C:0x28ee01&T:"+this.nextMeridiansData.circle+"|",this.txt_level.textFlow=t.TextFlowMaker.generateTextFlow(r),this.materImg.visible=!0,this.costLabel.visible=!0;var o=this.nextMeridiansData.cost[0],l=t.CurrencyUtils.getCurrencyNameIcon(o.type,o.id),h=t.CurrencyUtils.getCurrency(o.type,o.id);this.materImg.source=l[1]+"",this.materImg.itemID=o.id,h<o.count?(a=!1,this.txt_get_repair.visible=!0,this.costLabel.textFlow=t.TextFlowMaker.generateTextFlow("|C:0xe50000&T:"+h+"|/"+o.count)):this.costLabel.textFlow=t.TextFlowMaker.generateTextFlow(h+"/"+o.count),this.redDotMeridians.visible=a},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnUp:t.MeridiansMgr.ins().send_11_4();break;case this.neiGongBtn:var i=t.GlobalConfig.MeridiansSetConfig.equipOpenBS;i&&t.ViewManager.ins().isCheckOpen(i.openLimit)?this.neiGongGrp.visible=!this.neiGongGrp.visible:i&&i.limitStr&&t.UserTips.ins().showUITips(i.limitStr);break;case this.neiGongCloseBtn:this.neiGongGrp.visible=!1}},i.prototype.onTabTouch=function(t){this.ngEquipView.visible=!1,this.ngGemstoneView.visible=!1;var e=this.ngEquiTabBar.selectedItem;e&&("equipOpen"==e.type?this.ngEquipView.visible=!0:"equipOpenBS"==e.type&&(this.ngGemstoneView.visible=!0))},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.ngEquipView&&(this.ngEquipView.$onClose(),this.ngEquipView=null),this.ngGemstoneView&&(this.ngGemstoneView.$onClose(),this.ngGemstoneView=null),this.gCurList.itemRenderer=null,this.gCurList.dataProvider=null,this.gCurList.removeChildren(),this.gCurList=null,this.gNextList.itemRenderer=null,this.gNextList.dataProvider=null,this.gNextList.removeChildren(),this.gNextList=null;var i;for(i=0;9>i;i++)this["meridiansLine"+i].source="";for(var n,s=0;10>s;s++)n=this["meridiansitemView"+s],n.destroy(),n=null;this.removeTouchEvent(this.btnUp,this.onClick),this.removeTouchEvent(this.neiGongBtn,this.onClick),this.removeTouchEvent(this.neiGongCloseBtn,this.onClick),this.removeMouseMoveEvent(this.materImg,this.mouseMove),this.removeMouseOverEvent(this.materImg,this.mouseMove),this.removeTouchEvent(this.txt_get_repair,this.getFunction),egret.Tween.removeTweens(this),this.roleMc&&(this.roleMc.destroy(),this.roleMc=null),this.tipsMc&&(this.tipsMc.destroy(),this.tipsMc=null),this.materImg.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.materImg.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.ngEquiTabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.ngEquiTabBar=null,t.DisplayUtils.removeFromParent(this),t.TimerManager.ins().removeAll(this)},i}(t.BaseEuiView);t.MeridiansView=e,__reflect(e.prototype,"app.MeridiansView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.redPoint.visible=!1,this.data&&(this.effect.visible=1==this.data.wearState?!0:!1,this.sign.visible=1==this.data.dressState?!0:!1,this.data.itemInfo&&(this.txtName.textFlow=t.TextFlowMaker.generateTextFlow(this.data.itemInfo.name),this.icon.source=this.data.itemInfo.con+"",this.Lv.text=this.data.Lv?this.data.Lv+t.LanguageUtils.language_Common_1:"",this.data.isMy)))if(this.data.Lv){var e=t.GlobalConfig.FashionupgradeConfig[this.data.itemInfo.id][this.data.Lv+1];e&&(this.redPoint.visible=t.CurrencyUtils.isRedDot(e.consume)?!0:!1)}else this.redPoint.visible=t.CurrencyUtils.isRedDot(this.data.itemInfo.consume)?!0:!1},i}(t.BaseItemRender);t.FashionNewItemRender=e,__reflect(e.prototype,"app.FashionNewItemRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._curIndex=-1,i.curItemData=null,i.openId=0,i.ruleId=74,i.titleStr=t.LanguageUtils.language_System4,i.tabArr=[],i.dir=4,i.curListInfo=[],i.lastSelected=-1,i.skinName="FashionSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.itemArrayCollection=new eui.ArrayCollection,this.tabBarArrayCollection=new eui.ArrayCollection,this.initView()},i.prototype.open=function(t){t&&t.fashionId&&(this.openId=t.fashionId)},i.prototype.initView=function(){if(this._curIndex=0,this.lastSelected=0,this.openId>0){var e=t.GlobalConfig.FashionattributeConfig;for(var i in e){var n=e[i];for(var s in n)if(n[s].id==this.openId){this._curIndex=parseInt(i)-1,this.lastSelected=parseInt(s);break}}}this.fashionAtrrView=new t.FashionAtrrView,this.fashionAtrrGroup.addChild(this.fashionAtrrView),this.tabBar.itemRenderer=t.NewTabBarItemRenderer2,this.tabBar.dataProvider=this.tabBarArrayCollection,this.tabBar.selectedIndex=this._curIndex,this.list_cost.itemRenderer=t.FourImagesCostItem,this.list.itemRenderer=t.FashionNewItemRender,this.list.dataProvider=this.itemArrayCollection,this.scroller.horizontalScrollBar.autoVisibility=!1,this.scroller.horizontalScrollBar.visible=!1,this.addTouchEvent(this.btn_activat,this.onTouchAp),this.addTouchEvent(this.btn_wear,this.onTouchAp),this.addTouchEvent(this.btn_upgrade,this.onTouchAp),this.addTouchEvent(this.btn_inverse,this.onTouchAp),this.addTouchEvent(this.btn_along,this.onTouchAp),this.addChangeEvent(this.tabBar,this.onTabTouch),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.await.setData(t.RoleAction.Await,this.callFunc,this),this.attack.setData(t.RoleAction.Attack,this.callFunc,this),this.walk.setData(t.RoleAction.Walk,this.callFunc,this),this.run.setData(t.RoleAction.Run,this.callFunc,this),this.observe(t.FashionMgr.ins().post_51_1,this.updateCurInfo),this.observe(t.FashionMgr.ins().post_51_2,this.wearFashionData),this.observe(t.FashionMgr.ins().post_51_3,this.activationData),this.observe(t.FashionMgr.ins().post_51_4,this.fashionUpData),this.observe(t.BagMgr.ins().post_8_1,this.updateData),this.observe(t.BagMgr.ins().post_8_4,this.updateData),this.observe(t.BagMgr.ins().post_8_3,this.updateData),this.setTabArray(),this.createPlayerModel(),t.FashionMgr.ins().send_51_1()},i.prototype.setTabArray=function(){var e=t.GlobalConfig.FashionattributeConfig;this.tabArr=[];for(var i in e){var n=e[i],s="",a=0;for(var r in n)if(n[r].tabImg){s=n[r].tabImg,a=n[r].type;break}this.tabArr.push({tabType:a,tabImg:s,isMy:1})}this.tabBarArrayCollection.replaceAll(this.tabArr)},i.prototype.createPlayerModel=function(){this.modelCharRole=t.ObjectPool.pop("app.ModelCharRole"),this.modelCharRole.propSet=new t.PropertySet,this.modelCharRole.showBodyContainer();var e=t.EntityMgr.ins().getPayer,i=e.propSet.getSex();this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.AP_SEX,i),e.propSet.getFacte()?(this.modelCharRole.initHair(ResDirEnum.RES_DIR_HAIR+e.propSet.getFacteStr()+"_"+i),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.AP_FACE_ID,e.propSet.getFacte())):this.modelCharRole.initHair(null),e.propSet.getWeapon()?(this.modelCharRole.setWeaponFileName(e.propSet.getWeaponStr()),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.AP_WEAPON,e.propSet.getWeapon())):this.modelCharRole.setWeaponFileName(null),this.modelCharRole.initBody(ResDirEnum.RES_DIR_BODY+e.propSet.getBodyStr()+"_"+i),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.PROP_ACTOR_SOLDIERSOULAPPEARANCE,e.propSet.getFashionDisplayStr()),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.AP_BODY_ID,e.propSet.getBody()),this.modelCharRole.setBodyEff(e.propSet.getBodyEFFStr()),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.ACTOR_FASHION_DISPLAY,e.propSet.getValue(t.ActorPropertyModel.ACTOR_FASHION_DISPLAY)),this.modelCharRole.setWeaponEff(e.propSet.getWeaponEffStr()),this.modelCharRole.propSet.setProperty(t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY,e.propSet.getValue(t.ActorPropertyModel.ACTOR_WEAPON_DISPLAY)),this.bodyContainer.addChild(this.modelCharRole),this.modelCharRole.addSpecialMC(),this.modelCharRole.dir=4},i.prototype.setDisplay=function(){var e=t.EntityMgr.ins().getPayer,i=e.propSet.getSex();if(this.curItemData&&this.curItemData.itemInfo){var n=this.curItemData.itemInfo;2==n.type?(this.modelCharRole.updateSuit(0),e.propSet.getFacte()&&this.modelCharRole.initHair(ResDirEnum.RES_DIR_HAIR+e.propSet.getFacteStr()+"_"+i),n.display?this.modelCharRole.initBody(ResDirEnum.RES_DIR_BODY+this.getBodyStr(n.display)):this.modelCharRole.initBody(ResDirEnum.RES_DIR_BODY+e.propSet.getBodyStr()+"_"+i),n.back?this.modelCharRole.setBodyEff(this.getBodyEffStr(n.back)):this.modelCharRole.setBodyEff("")):1==n.type?(this.modelCharRole.updateSuit(0),e.propSet.getFacte()&&this.modelCharRole.initHair(ResDirEnum.RES_DIR_HAIR+e.propSet.getFacteStr()+"_"+i),n.display?this.modelCharRole.setWeaponFileName(this.getWeaponStr(n.display)):e.propSet.getWeapon()?this.modelCharRole.setWeaponFileName(e.propSet.getWeaponStr()):this.modelCharRole.setWeaponFileName(null),n.back?this.modelCharRole.setWeaponEff(this.getWeaponEffStr(n.back)):this.modelCharRole.setWeaponEff("")):3==n.type&&n.display&&this.modelCharRole.updateSuit(n.display)}},i.prototype.getWeaponEffStr=function(e){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getSex();return"weaponeff"+this.PrefixInteger(e,3)+"_"+n},i.prototype.getWeaponStr=function(e){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getSex();return"weapon"+this.PrefixInteger(e,3)+"_"+n},i.prototype.getBodyEffStr=function(e){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getSex();return"bodyeff_"+e+"_"+n},i.prototype.getBodyStr=function(e){var i=t.EntityMgr.ins().getPayer,n=i.propSet.getSex();return"body"+this.PrefixInteger(e,3)+"_"+n},i.prototype.PrefixInteger=function(t,e){return(Array(e).join("0")+t).slice(-e)},i.prototype.updateCurInfo=function(){-1!=this._curIndex&&this.setOpenIndex(this._curIndex,this.openId)},i.prototype.activationData=function(e){if(0==e){for(var i=t.FashionMgr.ins().fashionDic,n=0;n<this.curListInfo.length;n++){var s=this.curListInfo[n];i&&i[s.itemInfo.id]&&1==i[s.itemInfo.id].state?(s.dressState=1,s.Lv=1):s.dressState=0}this.itemArrayCollection.replaceAll(this.curListInfo),this.setCurFashionCost()
}},i.prototype.fashionUpData=function(e){if(0==e&&this.curItemData&&this.curItemData.itemInfo&&this.curListInfo){var i=t.FashionMgr.ins().fashionDic;i[this.curItemData.itemInfo.id]&&this.curListInfo[this.lastSelected]&&(this.curListInfo[this.lastSelected].Lv=i[this.curItemData.itemInfo.id].lv,this.itemArrayCollection.replaceAll(this.curListInfo),this.setCurFashionCost())}},i.prototype.wearFashionData=function(e){if(0==e)this.btn_wear.label=t.LanguageUtils.language_Omission_txt36,this.curListInfo&&this.curListInfo[this.lastSelected]&&(this.curListInfo[this.lastSelected].dressState=0,this.itemArrayCollection.replaceAll(this.curListInfo));else{this.btn_wear.label=t.LanguageUtils.language_Omission_txt37;for(var i=t.FashionMgr.ins().fashionDic,n=0;n<this.curListInfo.length;n++){var s=this.curListInfo[n];i&&i[s.itemInfo.id]&&1==i[s.itemInfo.id].state?s.dressState=1:s.dressState=0}this.itemArrayCollection.replaceAll(this.curListInfo)}},i.prototype.onTabTouch=function(t){this._curIndex=t.currentTarget.selectedIndex,this.setOpenIndex(t.currentTarget.selectedIndex)},i.prototype.setScrollerH=function(){t.TimerManager.ins().remove(this.updateScrollerH,this),t.TimerManager.ins().doTimer(50,2,this.updateScrollerH,this)},i.prototype.updateScrollerH=function(){if(this.lastSelected<=3)this.scroller.viewport.scrollH=0;else{var t=Math.floor((this.scroller.viewport.contentWidth-this.scroller.viewport.width)/(this.lastSelected+1)),e=t*(this.lastSelected+1);e>this.scroller.viewport.contentWidth-this.scroller.viewport.width&&(e=this.scroller.viewport.contentWidth-this.scroller.viewport.width),this.scroller.viewport.scrollH=e}},i.prototype.callFunc=function(e){switch(e){case t.RoleAction.Await:this.modelCharRole.playStand();break;case t.RoleAction.Attack:this.modelCharRole.playAttack();break;case t.RoleAction.Walk:this.modelCharRole.playWalk();break;case t.RoleAction.Run:this.modelCharRole.playRun()}},i.prototype.onTouchAp=function(e){var i=t.FashionMgr.ins().fashionDic;switch(e.currentTarget){case this.btn_activat:this.curItemData&&this.curItemData.itemInfo&&t.FashionMgr.ins().send_51_3(this.curItemData.itemInfo.id);break;case this.btn_wear:this.curItemData&&this.curItemData.itemInfo&&i[this.curItemData.itemInfo.id]&&t.FashionMgr.ins().send_51_2(this.curItemData.itemInfo.id,i[this.curItemData.itemInfo.id].state?0:1);break;case this.btn_upgrade:this.curItemData&&this.curItemData.itemInfo&&i[this.curItemData.itemInfo.id]&&t.FashionMgr.ins().send_51_4(this.curItemData.itemInfo.id);break;case this.btn_along:this.dir+=1,this.dir>8&&(this.dir=this.dir%8),this.modelCharRole.dir=this.dir;break;case this.btn_inverse:this.dir-=1,this.dir<0&&(this.dir=8),this.modelCharRole.dir=this.dir}},i.prototype.onItemTap=function(t){this.lastSelected>=0&&(this.curListInfo[this.lastSelected].wearState=0),this.lastSelected=this.list.selectedIndex,this.curItemData=t.item,this.list.dataProvider&&this.lastSelected>-1&&this.lastSelected<this.list.dataProvider.length&&(this.curListInfo[this.list.selectedIndex].wearState=1),this.itemArrayCollection.replaceAll(this.curListInfo),this.setDisplay(),this.setCurFashionCost()},i.prototype.setOpenIndex=function(e,i){void 0===i&&(i=0);var n=t.GlobalConfig.FashionattributeConfig[e+1];this.curListInfo=[];var s=t.FashionMgr.ins().fashionDic;if(n){this.lastSelected=0;for(var a in n)this.curListInfo.push({itemInfo:n[a],wearState:0,dressState:0,Lv:0,isMy:1});for(var r=0;r<this.curListInfo.length;r++){var o=this.curListInfo[r];o.itemInfo.id==i&&(this.lastSelected=r),s&&s[o.itemInfo.id]&&(o.Lv=s[o.itemInfo.id].lv,1==s[o.itemInfo.id].state&&(o.dressState=1,i||(this.lastSelected=r)))}this.curItemData=this.curListInfo[this.lastSelected],this.curItemData.wearState=1,this.list.selectedIndex=this.lastSelected,this.itemArrayCollection.replaceAll(this.curListInfo),this.setDisplay(),this.setCurFashionCost(),this.setScrollerH()}},i.prototype.updateData=function(){this.tabBarArrayCollection.replaceAll(this.tabArr),this.itemArrayCollection.replaceAll(this.curListInfo),this.setCurFashionCost()},i.prototype.setCurFashionCost=function(){if(this.list_cost.visible=!0,this.btn_activat.visible=this.lvGrp.visible=this.btn_wear.visible=this.lvRed.visible=!1,this.curItemData&&this.curItemData.itemInfo){var e=this.curItemData.itemInfo,i=t.FashionMgr.ins().fashionDic;if(i&&i[e.id]){this.activationRed.visible=!1,this.lvGrp.visible=this.btn_wear.visible=!0,0==i[e.id].state?this.btn_wear.label=t.LanguageUtils.language_Omission_txt36:this.btn_wear.label=t.LanguageUtils.language_Omission_txt37,this.fashionAtrrView.setAttr(e.id,i[e.id].lv,1,3==e.type?1:0);var n=t.GlobalConfig.FashionupgradeConfig[e.id][i[e.id].lv+1];n?(this.lvRed.visible=t.CurrencyUtils.isRedDot(n.consume)?!0:!1,this.list_cost.dataProvider=new eui.ArrayCollection(n.consume)):this.list_cost.visible=!1}else this.btn_activat.visible=!0,this.activationRed.visible=t.CurrencyUtils.isRedDot(e.consume)?!0:!1,this.fashionAtrrView.setAttr(e.id,0,1,3==e.type?1:0),this.list_cost.dataProvider=new eui.ArrayCollection(e.consume)}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.removeTouchEvent(this.btn_inverse,this.onTouchAp),this.removeTouchEvent(this.btn_along,this.onTouchAp),this.removeTouchEvent(this.btn_activat,this.onTouchAp),this.removeTouchEvent(this.btn_wear,this.onTouchAp),this.removeTouchEvent(this.btn_upgrade,this.onTouchAp),this.fashionAtrrView&&this.fashionAtrrView.destroy(),this.modelCharRole&&this.modelCharRole.destruct()},i}(t.BaseEuiView);t.FashionNewView=e,__reflect(e.prototype,"app.FashionNewView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.data){this.iconDark.source=this.data.tabImg+"_d",this.iconLight.source=this.data.tabImg+"_u";var e=this.getRingInfo(this.data.id),i=void 0;1==this.data.type?(i=t.GlobalConfig.SpecialRingConfig[this.data.id][e+1],i&&t.ViewManager.ins().isCheckOpen(i.LVlimit)?this.redPoint.visible=t.CurrencyUtils.isRedDot(i.cost)?!0:!1:this.redPoint.visible=!1):(i=t.GlobalConfig.RingBuyJobConfig[this.data.id][1][1],i&&1>e?this.redPoint.visible=t.CurrencyUtils.isRedDot(i.cost)?!0:!1:this.redPoint.visible=!1)}},i.prototype.getRingInfo=function(e){var i=0,n=t.GlobalConfig.RingTabConfig[e];if(n){var s=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.Special],a=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.RingJob],r=1==n.type?s:a;if(r)for(var o in r)r[o].pos==e&&(i=r[o].lv)}return i},i}(t.BaseItemRender);t.NewRingTabItenView=e,__reflect(e.prototype,"app.NewRingTabItenView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.mcName="",i.playerJob=0,i.curSelect=0,i.openId=0,i.ruleId=0,i.titleStr=t.LanguageUtils.language_System66,i.skinName="NewRingSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.txt_max.visible=!1,this.iconList.itemRenderer=t.NewRingTabItenView,this.listCost.itemRenderer=t.FourImagesCostItem,this.itemList.itemRenderer=t.RingAttrItemView,this.itemArr=new eui.ArrayCollection,this.itemList.dataProvider=this.itemArr,this.ringEff||(this.ringEff=t.ObjectPool.pop("app.MovieClip"),this.ringEff.touchEnabled=!1,this.mcGroup.addChild(this.ringEff));var i=t.EntityMgr.ins().getPayer;i&&i.propSet&&(this.playerJob=i.propSet.getAP_JOB()),this.observe(t.StrengthenMgr.ins().post_StrengthenData,this.updateData),this.observe(t.StrengthenMgr.ins().postResult,this.postResult),this.observe(t.StrengthenMgr.ins().post_StrengthenUpdate,this.onRefreshStrengthen),this.observe(t.BagMgr.ins().post_8_1,this.updateItemChanage),this.observe(t.BagMgr.ins().post_8_4,this.updateItemChanage),this.observe(t.BagMgr.ins().post_8_3,this.updateItemChanage),this.observe(t.DefaultMgr.ins().postMoneyChange,this.updateItemChanage),this.observe(t.DefaultMgr.ins().post_updateZsLevel,this.updateItemChanage),t.EventManager.ins().addEvent(t.CompEvent.GET_PROPS_STRENGTHEN_SPECIAL,this.onGetProps,this),t.StrengthenMgr.ins().sendStrengthenInit(t.StrengthenType.Special),t.StrengthenMgr.ins().sendStrengthenInit(t.StrengthenType.RingJob),this.addChangeEvent(this.iconList,this.onTabTouch),this.addTouchEvent(this.btn_strengthen,this.onTouchAp),t.GetPropsView.getPropsTxt(this.txt_get,421),this.init(),this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.txt_get.visible=!1,this.openId>0?this.setRuleId(this.openId):(this.iconList.selectedIndex=0,this.updateBtnSelect(0))},i.prototype.open=function(t){t&&t.id&&(this.openId=t.id)},i.prototype.onGetProps=function(){var e=this.iconList.dataProvider.getItemAt(this.iconList.selectedIndex);if(e&&e&&this.curCfg&&this.curCfg.cost){var i=t.OtherMgr.ins().getItemIDByCost(this.curCfg.cost);if(0==i.itemId&&(i.itemId=i.itemId2),!t.ViewManager.ins().isShow(t.GaimItemWin)&&0!=i.itemId){var n=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,i,{x:n.x,y:n.y},{height:this.height,width:this.width},this.hashCode)}}},i.prototype.init=function(){var e=t.GlobalConfig.RingTabConfig,i=[];for(var n in e){var s=!0;if(t.ViewManager.ins().isCheckOpen(e[n].showLimit)){if(e[n].ringLimit)for(var a in e[n].ringLimit)if(s=this.getRingInfo(e[n].ringLimit[a]),!s)break;s&&i.push(e[n])}}i.sort(function(t,e){return t.index-e.index}),this.iconList.dataProvider=new eui.ArrayCollection(i)},i.prototype.getRingInfo=function(e){var i=t.GlobalConfig.RingTabConfig[e];if(i){var n=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.Special],s=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.RingJob],a=1==i.type?n:s;if(a)for(var r in a)if(a[r].pos==e&&a[r].lv>=1)return!0}return!1},i.prototype.setRuleId=function(t){for(var e=0,i=0;i<this.iconList.dataProvider.length;i++){var n=this.iconList.dataProvider.getItemAt(i);if(n.id==t){e=i;break}}this.iconList.selectedIndex=e,this.updateBtnSelect(e)},i.prototype.onTouchAp=function(e){switch(e.currentTarget){case this.btn_strengthen:var i=this.iconList.dataProvider.getItemAt(this.iconList.selectedIndex);if(i){var n=1==i.type?t.StrengthenType.Special:t.StrengthenType.RingJob;t.StrengthenMgr.ins().sendStrengthenInfo(n,i.id)}}},i.prototype.onRefreshStrengthen=function(){this.init(),this.iconList.selectedIndex=this.curSelect,t.SoundManager.ins().playEffect(t.SoundUtil.VIEW),this.updateData()},i.prototype.updateItemChanage=function(){this.init(),this.iconList.selectedIndex=this.curSelect,this.updateData()},i.prototype.updateBtnSelect=function(e){this.curSelect=e,this.updateData();var i=this.iconList.dataProvider.getItemAt(e);i&&(i.ruleid?this.ruleId=i.ruleid:this.ruleId=0,t.EventManager.ins().sendEvent(t.CompEvent.ROLE_UPDATE_RULE,t.RoleTabEnum.RING))},i.prototype.onTabTouch=function(e){t.DefaultMgr.ins().post_gaimItemView(8888),this.updateBtnSelect(e.currentTarget.selectedIndex)},i.prototype.updateData=function(){this.txt_max.visible=this.redDot.visible=!1,this.listCost.visible=this.btn_strengthen.visible=this.txt_get.visible=!0;var e=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.Special],i=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.RingJob],n=this.iconList.dataProvider.getItemAt(this.iconList.selectedIndex);if(n){this.btn_strengthen.label=1==n.type?t.LanguageUtils.language_System84:t.LanguageUtils.language_System83;var s=1==n.type?e:i,a=t.GlobalConfig.SpecialRingConfig[n.id];for(var r in s)if(s[r].pos==n.id)return this.bt_lv.visible=1==n.type?!0:!1,this.bt_lv.text=s[r].lv+"",this.mcName=n.ringeff,this.strengthen_name.source=n.ringname,this.txt_max.visible=2==n.type&&1==s[r].lv||1==n.type&&s[r].lv==Object.keys(a).length-1?!0:!1,this.txt_max.text=1==n.type?t.LanguageUtils.language_Omission_txt115:t.LanguageUtils.language_System85,this.listCost.visible=this.btn_strengthen.visible=this.txt_get.visible=2==n.type&&1==s[r].lv||1==n.type&&s[r].lv==Object.keys(a).length-1?!1:!0,this.ringEff.playFileEff(ResDirEnum.RES_DIR_EFF+n.ringeff,-1),this.setAttrList(s[r].lv,s[r].pos,n.type),void this.setCostList(s[r].lv,s[r].pos,n.type);this.bt_lv.visible=1==n.type?!0:!1,this.bt_lv.text="0",this.mcName=n.ringeff,this.strengthen_name.source=n.ringname,this.ringEff.playFileEff(ResDirEnum.RES_DIR_EFF+n.ringeff,-1);var o=1==n.type?0:1;this.setAttrList(o,n.id,n.type),this.setCostList(o,n.id,n.type)}},i.prototype.setAttrList=function(e,i,n){void 0===n&&(n=1),this.curAttr.text="",this.nextAttr.text="";var s="";if(1==n){s=this.getAttrStr(i,e,n,1);var a=this.getAttrStr(i,e+1,n,2);s&&(this.curAttr.textFlow=t.TextFlowMaker.generateTextFlow(s)),a?(this.arrow.visible=!0,this.nextAttr.textFlow=t.TextFlowMaker.generateTextFlow(a)):this.arrow.visible=!1}else this.arrow.visible=!1,s=this.getAttrStr(i,e,n,1),s&&(this.curAttr.textFlow=t.TextFlowMaker.generateTextFlow(s))},i.prototype.getAttrStr=function(e,i,n,s){void 0===n&&(n=1),void 0===s&&(s=1);var a;a=1==n?t.GlobalConfig.SpecialRingConfig[e][i]:t.GlobalConfig.RingBuyJobConfig[e][i][this.playerJob];var r=null;if(a){var o=[],l="",h=1==n&&1==s?"0xcbc2b2":"0x28ee01";r=1==n?"|C:0xE0AE75&T:"+t.LanguageUtils.language_Friend_Txt1+"：||C:"+h+"&T:"+i+"|\n":"";for(var p in a.attr)o.push(a.attr[p]);for(var p=0;p<o.length;p++)l=t.AttributeData.getItemAttStrByType(o[p],o,1,!1,!0,"0xE0AE75",h),""!=l&&(r+=l+"\n")}return r},i.prototype.setCostList=function(e,i,n){void 0===n&&(n=1);var s;if(1==n)s=t.GlobalConfig.SpecialRingConfig[i][e+1],s?(this.curCfg=s,t.ViewManager.ins().isCheckOpen(s.LVlimit)?this.redDot.visible=t.CurrencyUtils.isRedDot(s.cost)?!0:!1:this.redDot.visible=!1,this.listCost.dataProvider=new eui.ArrayCollection(s.cost)):(this.listCost.visible=!1,this.redDot.visible=!1);else if(s=t.GlobalConfig.RingBuyJobConfig[i][e][this.playerJob]){this.curCfg=s;var a=this.getRingInfo(i);a||(this.redDot.visible=t.CurrencyUtils.isRedDot(s.cost)?!0:!1),this.listCost.dataProvider=new eui.ArrayCollection(s.cost)}else this.listCost.visible=!1,this.redDot.visible=!1},i.prototype.postResult=function(){t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2,this.height/2))},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),t.DefaultMgr.ins().post_gaimItemView(8888),this.iconList.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.removeTouchEvent(this.btn_strengthen,this.onTouchAp),this.txt_get.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),t.EventManager.ins().removeEvent(t.CompEvent.GET_PROPS_STRENGTHEN_SPECIAL,this.onGetProps,this)},i}(t.BaseEuiView);t.NewRingView=e,__reflect(e.prototype,"app.NewRingView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.txtIcon1.source=this.data.img1,this.txtIcon2.source=this.data.img2},e}(eui.ItemRenderer);t.NGEquipTab=e,__reflect(e.prototype,"app.NGEquipTab")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.equiStartId=0,t.equiEndId=0,t.viewType="roleView",t.skinName="NGEquipViewSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1;var t;this.equipArr=[];for(var i=0;4>i;i++)t=this["icon"+i],this.equipArr.push(t)},i.prototype.init=function(e,i){if(void 0===e&&(e=1),void 0===i&&(i="roleView"),this.viewType=i,1==e){this.equiStartId=t.StdItemType.itBloodSoul,this.equiEndId=t.StdItemType.itIntellectBall,this.imgTitle.source="t_neigongzb",this.helpBtn.ruleId=99;for(var n=void 0,s=0;4>s;s++){var a=this.equipArr[s];a.setEquipBg(s+12),n=t.GlobalConfig.MeridiansSetConfig["equipOpen"+(s+1)],n&&(a.visible=t.ViewManager.ins().isCheckOpen(n))}}else{this.equiStartId=t.StdItemType.itBloodSoul2,this.equiEndId=t.StdItemType.itIntellectBall2,this.imgTitle.source="t_neigongzb1",this.helpBtn.ruleId=100;for(var s=0;4>s;s++){var a=this.equipArr[s];a.setEquipBg(s+16)}}"roleView"==this.viewType&&(this.observe(t.EquipMgr.ins().post_7_3,this.setEquipData),t.EventManager.ins().addEvent(t.ItemEvent.EQUIP_WEAR_EQUIP,this.onEquipWear,this),t.EventManager.ins().addEvent(t.ItemEvent.EQUIP_DROP_EQUIP,this.onEquipDrop,this)),this.setEquipData()},i.prototype.setEquipData=function(){var e,i=0;if("roleView"==this.viewType?e=t.EquipItemMgr.ins().equips:(e=t.EquipItemMgr.ins().otherPlayerEquips.equips,i=1),e)for(var n,s=0;s<e.length;s++)n=e[s].nPos,n>=this.equiStartId&&n<=this.equiEndId&&(n-=this.equiStartId,this.equipArr[n].setItem(e[s],null,null,i))},i.prototype.onEquipWear=function(e){var i=e[0];if(!(i.nPos&&i.nPos>=t.StdItemType.itEquipDiamond&&i.nPos<t.StdItemType.itShield)&&i){var n=i.nPos;n>=this.equiStartId&&n<=this.equiEndId&&(n-=this.equiStartId,this.equipArr[n].setItem(i))}},i.prototype.onEquipDrop=function(e){var i=e[0];if(!(i.nPos&&i.nPos>=t.StdItemType.itEquipDiamond&&i.nPos<t.StdItemType.itShield))for(var n,s=0;s<this.equipArr.length;s++)if(n=this.equipArr[s],n.userItem&&n.userItem.series.isCompleteEquals(i.series)){var a=i.nPos;a>=this.equiStartId&&a<=this.equiEndId&&(a-=this.equiStartId,this.equipArr[a].resum());break}},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.$onClose(),t.EventManager.ins().removeEvent(t.ItemEvent.EQUIP_WEAR_EQUIP,this.onEquipWear,this),t.EventManager.ins().removeEvent(t.ItemEvent.EQUIP_DROP_EQUIP,this.onEquipDrop,this);var n,s;for(n=0,s=this.equipArr.length;s>n;n++){var a=this.equipArr[n];a.destroy(),a=null}this.equipArr.length=0,this.equipArr=null},i}(t.BaseView);t.NGEquipView=e,__reflect(e.prototype,"app.NGEquipView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.icon.source=t.icon}},e}(t.BaseItemRender);t.RolePetItem=e,__reflect(e.prototype,"app.RolePetItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.ruleId=98,i.titleStr=t.LanguageUtils.language_System101,i.skinName="RolePetSkin",i.touchEnabled=!1,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.petMc||(this.petMc=t.ObjectPool.pop("app.MovieClip"),this.petMc.touchEnabled=!1,this.effGrp.addChild(this.petMc)),this.iconList.itemRenderer=t.RolePetItem;var e=this.getPetDataList();this.iconList.dataProvider=new eui.ArrayCollection(e),this.iconList.selectedIndex=0,this.observe(t.PetSettingTwoMgr.ins().post_35_1,this.updateData),this.observe(t.PetSettingTwoMgr.ins().post_35_2,this.updateData),this.observe(t.PetSettingTwoMgr.ins().post_35_3,this.updateData),this.observe(t.PetSettingTwoMgr.ins().post_35_4,this.updateData),this.observe(t.DefaultMgr.ins().post_g_0_7,this.updateGoOut),this.addChangeEvent(this.iconList,this.onTabTouch),this.addTouchEvent(this.btn_goOut,this.onTouch),t.PetSettingTwoMgr.ins().send_35_1(),this.updateData()},i.prototype.onTabTouch=function(t){this.updateData()},i.prototype.onTouch=function(e){switch(e.currentTarget){case this.btn_goOut:var i=this.iconList.dataProvider.getItemAt(this.iconList.selectedIndex),n=t.PetSettingTwoMgr.ins().peiTypeList[i.type];if(n){var s=t.EntityMgr.ins().getPayer;s&&s.propSet&&(n.id==s.propSet.getPickUpPet()?(this.btn_goOut.label=t.LanguageUtils.language_Omission_txt36,t.PetSettingTwoMgr.ins().send_35_2(0)):(this.btn_goOut.label=t.LanguageUtils.language_Omission_txt37,t.PetSettingTwoMgr.ins().send_35_2(n.id)))}}},i.prototype.updateData=function(){var e=this.iconList.dataProvider.getItemAt(this.iconList.selectedIndex);this.imgName.source=e.nameIcon,this.petMc.playFileEff(ResDirEnum.RES_DIR_PET+e.icon,-1),this.iconState.visible=!1,this.labTips.text=e.PetStr;var i=[];for(var n in e.attr)i.push(e.attr[n]);var s="",a=t.PetSettingTwoMgr.ins().peiTypeList,r=a[e.type];if(r&&r.time>0&&r.time>t.GlobalData.serverTime){this.iconState.source="chongwu_btn2",this.iconState.visible=!0,this.btn_goOut.visible=!0,this.updateGoOut();var o=Math.floor((r.time-t.GlobalData.serverTime)/1e3);s+="|C:0x28ee01&T:"+(t.LanguageUtils.language_Common_65+t.DateUtils.getFormatBySecond(o,t.DateUtils.TIME_FORMAT_18))+"|";for(var n=0;n<i.length;n++){var l=t.AttributeData.getItemAttStrByType(i[n],i,1,!1,!0,"0xE0AE75","0x28ee01");""!=l&&(s+="\n"+l)}this.labTips.textColor=16742144}else{this.iconState.source="chongwu_btn1",this.iconState.visible=!0,this.btn_goOut.visible=!1,s+=t.LanguageUtils.language_System72;for(var n=0;n<i.length;n++){var l=t.AttributeData.getItemAttStrByType(i[n],i,1,!1,!0);""!=l&&(s+="\n"+l)}this.labTips.textColor=15064527}this.labAttribute.textFlow=t.TextFlowMaker.generateTextFlow(s)},i.prototype.updateGoOut=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet){var i=this.iconList.dataProvider.getItemAt(this.iconList.selectedIndex),n=t.PetSettingTwoMgr.ins().peiTypeList[i.type];n&&n.id==e.propSet.getPickUpPet()?this.btn_goOut.label=t.LanguageUtils.language_Omission_txt37:this.btn_goOut.label=t.LanguageUtils.language_Omission_txt36}},i.prototype.getPetDataList=function(){var e=t.GlobalConfig.lootPetConfig,i=[];for(var n in e){var s=t.CommonUtils.objectToArray(e[n]),a=s[0];i.push({type:a.type,id:a.id,attr:a.attr,icon:a.icon,nameIcon:a.nameIcon,PetStr:a.PetStr})}return i.sort(function(t,e){return t.type-e.type}),i},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.iconList.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this)},i}(t.BaseEuiView);t.RolePetView=e,__reflect(e.prototype,"app.RolePetView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RingAttrItemSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=this.data;e.desc1&&(this.txt_cur.textFlow=t.TextFlowMaker.generateTextFlow(e.desc1)),e.desc2?(this.txt_next.textFlow=t.TextFlowMaker.generateTextFlow(e.desc2),this.arrow.visible=!0):(this.txt_next.text="",this.arrow.visible=!1)}},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(eui.ItemRenderer);t.RingAttrItemView=e,__reflect(e.prototype,"app.RingAttrItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.redDot.visible=!1,this.labelDisplay.text=t.LanguageUtils.language_Omission_txt8;var i="StrengthenMgr.isCanStrengthenRing";this.redDot.updateShowFunctions=i},i.prototype.refresh=function(){this.redDot.param=null},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(eui.Button);t.RingBtnItemView=e,__reflect(e.prototype,"app.RingBtnItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="RingIconItemSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=this.data;this._pos=e.pos,this._lv=e.lv,this.effect.visible=1==e.isShow,this.icon.source=this.effect.visible?"btn_sj_"+e.pos+"_u":"btn_sj_"+e.pos+"_d";var i=void 0;if(1==this._pos)i=t.GlobalConfig.SpecialRingConfig[this._pos][this._lv+1],i?this.redPoint.visible=t.CurrencyUtils.isRedDot(i.cost)?!0:!1:this.redPoint.visible=!1;else{var n=t.ModelManager.ins().roleModel.getRingLiveState(this._pos);n?this.redPoint.visible=!1:(i=t.GlobalConfig.RingBuyJobConfig[this._pos][this._lv][1],this.redPoint.visible=t.CurrencyUtils.isRedDot(i.cost)?!0:!1)}}},Object.defineProperty(i.prototype,"pos",{get:function(){return this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lv",{get:function(){return this._lv},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(t.BaseItemRender);t.RingIconItemView=e,__reflect(e.prototype,"app.RingIconItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.effect.visible=!1},i.prototype.setData=function(t){this.icon.source=t},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.RingItemView=e,__reflect(e.prototype,"app.RingItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.maxSize=5,t.isInit=!0,t.selectedIndex=0,t.skinName="RingSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.listCost.itemRenderer=t.FourImagesCostItem,this.flipPage=new t.FlipPage(null,this.btn_prev,this.btn_next),this.flipPage.maxLength=5,this.flipPage.type=t.FlipPageType.Special;var e=t.GlobalConfig.SpecialRingConfig,i=Object.keys(e).length,n=i>=this.maxSize;this.flipPage.setHide(n),this.flipPage.addEventListener(t.CompEvent.PAGE_CHANGE,this.onPageChange,this),this.dataAry=[],this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.txt_get.visible=!1,this.txt_max.visible=!1,this.img_money.visible=!1,this.txt_consume.visible=!1,this.iconArrayCollection=new eui.ArrayCollection,this.iconList.itemRenderer=t.RingIconItemView,this.iconList.dataProvider=this.iconArrayCollection,this.iconList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.itemArrayCollection=new eui.ArrayCollection,this.itemList.itemRenderer=t.RingAttrItemView,this.itemList.dataProvider=this.itemArrayCollection,t.EventManager.ins().addEvent(t.CompEvent.STRENGTHEN_RED,this.refreshRedDot,this),t.EventManager.ins().addEvent(t.CompEvent.GET_PROPS_STRENGTHEN_SPECIAL,this.onGetProps,this),this.observe(t.StrengthenMgr.ins().post_StrengthenData,this.onRefreshData),this.observe(t.StrengthenMgr.ins().post_StrengthenUpdate,this.onRefreshStrengthen),this.observe(t.DefaultMgr.ins().postPlayerChange,this.refreshRedDot),this.observe(t.StrengthenMgr.ins().postResult,this.postResult),t.StrengthenMgr.ins().sendStrengthenInit(t.StrengthenType.Special),t.StrengthenMgr.ins().sendStrengthenInit(t.StrengthenType.RingJob),this.initPageData(),this.redDot.visible=!1},i.prototype.postResult=function(){t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2,this.height/2))},i.prototype.onGetProps=function(){var e;this.nextCfg?e=this.nextCfg:this.curCfg instanceof t.RingBuyJobConfig&&(e=this.curCfg);var i=t.OtherMgr.ins().getItemIDByCost(e.cost);if(!t.ViewManager.ins().isShow(t.GaimItemWin)&&0!=i.itemId){var n=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,i,{x:n.x,y:n.y},{height:this.height,width:this.width},this.hashCode)}},i.prototype.getItemVisible=function(){this.txt_get.visible=!1;var e=t.ModelManager.ins().roleModel.getRingMax(this.curCfg.pos);if(this.nextCfg||this.curCfg instanceof t.RingBuyJobConfig)if(1!=e){var i=this.nextCfg?this.nextCfg.cost[this.nextCfg.cost.length-1].id:this.curCfg instanceof t.RingBuyJobConfig?this.curCfg.cost[this.curCfg.cost.length-1].id:0;t.GetPropsView.getPropsTxt(this.txt_get,i),this.txt_get.visible=!0}else if(1==e){var n=t.ModelManager.ins().roleModel.getRingLiveState(this.curCfg.pos);if(!n){var s=this.nextCfg?this.nextCfg.cost[this.nextCfg.cost.length-1].id:this.curCfg instanceof t.RingBuyJobConfig?this.curCfg.cost[this.curCfg.cost.length-1].id:0;t.GetPropsView.getPropsTxt(this.txt_get,s),this.txt_get.visible=!0}}},i.prototype.onItemTap=function(t){this.selectedIndex=t.itemIndex,this.selectedItem=t.item,this.onRefreshTab(),this.setStrengthenData()},i.prototype.onRefreshTab=function(){this.selectedItem&&this.setTabData(this.showData)},i.prototype.setTabData=function(e){void 0===e&&(e=null),this.tabArr?this.tabArr.length=0:this.tabArr=[];for(var i,n=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Special],s=n.name,a=0;a<e.length;a++)for(var r in s)if(s[r].ringid==e[a].pos){i=0,this.selectedItem?this.selectedItem.pos==e[a].pos&&(i=1):0==a&&(i=1,this.selectedItem={name:s[r].ringpc.ringpcid,pos:e[a].pos,lv:e[a].lv,job:e[a].job,isShow:i}),this.tabArr.push({name:s[r].ringpc.ringpcid,pos:e[a].pos,lv:e[a].lv,job:e[a].job,isShow:i});break}this.iconArrayCollection.replaceAll(this.tabArr)},i.prototype.onPageChange=function(t){var e=t.data;this.showData=e,this.setTabData(e)},i.prototype.refreshRedDot=function(){this.showConsume(this.nextCfg),this.onRefreshTab()},i.prototype.onRefreshStrengthen=function(){this.initPageData(),t.SoundManager.ins().playEffect(t.SoundUtil.STRENGTHEN),this.setStrengthenData()},i.prototype.onRefreshData=function(){this.initPageData(),this.setStrengthenData()},i.prototype.initPageData=function(){var e=t.ModelManager.ins().roleModel.getAllRingData(),i=e;i&&this.flipPage.setData(i),this.flipPage.currentPage=1},i.prototype.setRuleId=function(){var e=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Special],i=e.name;if(this.curCfg){var n=i[this.curCfg.pos-1].ringpc.ruleid;n&&this.callFunc?this.callFunc(n):this.callFunc&&this.callFunc(0)}},i.prototype.setStrengthenData=function(){this.redDot.showMessages="BagMgr.post_8_1;BagMgr.post_8_4;BagMgr.post_8_3";var e,i,n=t.ModelManager.ins().roleModel.getAllRingData();if(this.showData&&!this.selectedItem){for(var s=void 0,a=[],r=0,o=this.showData.length;o>r;r++){i=this.showData[r];for(var l=0,h=n.length;h>l;l++)if(s=n[r],s.pos==i.pos){a.push(s);break}}e=a[this.selectedIndex],this.curCfg=e,e&&(1==e.pos&&(this.redDot.param=null,this.redDot.updateShowFunctions="StrengthenMgr.isCanStrengthenRing"),this.nextCfg=t.ModelManager.ins().roleModel.getRingConfig(e.pos,e.lv+1,e.job),this.setAttr(e.lv,e.pos,e.job))}else if(this.selectedItem){for(var p=0,h=n.length;h>p;p++){var s=n[p];if(s.pos==this.selectedItem.pos){i=s;break}}e=t.ModelManager.ins().roleModel.getRingConfig(i.pos,i.lv,i.job),this.curCfg=e,e&&(this.nextCfg=t.ModelManager.ins().roleModel.getRingConfig(e.pos,e.lv+1,e.job),this.setAttr(e.lv,e.pos,e.job),1==e.pos?(this.redDot.param=null,this.redDot.updateShowFunctions="StrengthenMgr.isCanStrengthenRing"):(this.redDot.param=e,this.redDot.updateShowFunctions="StrengthenMgr.isCanJobRing"))}this.showConsume(this.nextCfg),this.addTouchEvent(this.btn_strengthen,this.onClick)},i.prototype.showConsume=function(e){if(void 0===e&&(e=null),this.txt_max.visible=!1,this.curCfg){this.setRuleId(),this.nextCfg=t.ModelManager.ins().roleModel.getRingConfig(this.curCfg.pos,this.curCfg.lv+1,this.curCfg.job),this.getItemVisible(),this.curCfg&&(this.bt_lv.text=this.curCfg.lv+"");var i=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Special],n=i.name;for(var s in n)if(n[s].ringid==this.curCfg.pos){this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mcGroup.addChild(this.mc)),this.mcName!=n[s].ringpc.ringpcid&&(this.mcName=n[s].ringpc.ringpcid,this.mc.playFileEff(ResDirEnum.RES_DIR_EFF+n[s].ringpc.ringpcid,-1)),this.strengthen_name.source=n[s].ringpc.ringname;break}var a=t.ModelManager.ins().roleModel.getRingMax(this.curCfg.pos);if(1==a){this.bt_lv.visible=!1,this.txt_max.text=t.LanguageUtils.language_System85;var r=t.ModelManager.ins().roleModel.getRingLiveState(this.curCfg.pos);return r?(this.btn_strengthen.visible=!1,this.listCost.visible=!1,this.txt_max.visible=!0,void(t.ModelManager.ins().roleModel.ringStrengthenData=null)):(this.listCost.visible=!0,this.btn_strengthen.visible=!0,this.listCost.dataProvider=new eui.ArrayCollection(this.curCfg.cost),t.ModelManager.ins().roleModel.ringStrengthenData=this.curCfg,void(this.btn_strengthen.label=t.LanguageUtils.language_System83))}if(this.bt_lv.visible=!0,this.btn_strengthen.label=t.LanguageUtils.language_System84,!e)return this.btn_strengthen.visible=!1,this.listCost.visible=!1,this.txt_max.visible=!0,this.txt_max.text="强化已达最高等级",void(t.ModelManager.ins().roleModel.ringStrengthenData=null);
if(!this.cfg1Dic)return this.btn_strengthen.visible=!1,this.listCost.visible=!1,this.txt_max.visible=!0,t.ModelManager.ins().roleModel.ringStrengthenData=null,void t.EventManager.ins().sendEvent(t.CompEvent.ROLE_RED);this.bt_lv.visible=!0,this.listCost.visible=!0,this.btn_strengthen.visible=!0,this.listCost.dataProvider=new eui.ArrayCollection(e.cost),t.ModelManager.ins().roleModel.ringStrengthenData=e}},i.prototype.onClick=function(e){this.removeTouchEvent(this.btn_strengthen,this.onClick);var i=this.iconList.selectedItem;if(i){var n=1==i.pos?t.StrengthenType.Special:t.StrengthenType.RingJob;t.StrengthenMgr.ins().sendStrengthenInfo(n,i.pos)}else{var n=1==this.curCfg.pos?t.StrengthenType.Special:t.StrengthenType.RingJob;t.StrengthenMgr.ins().sendStrengthenInfo(n,this.curCfg.pos)}},i.prototype.setAttr=function(e,i,n){var s;s=t.ModelManager.ins().roleModel.getRingAttr(e,i,n),e++,this.cfg1Dic=t.ModelManager.ins().roleModel.getRingAttr(e,i,n);var a,r,o,l,h,p=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Special],u=[],c=[],g=[],d=[],m=[],f=0;for(r=0;r<p.attr.length;r++)a={},a.type=p.attr[r],a.value=0,c.push(a);if(s){for(var v in s)for(r=0;r<s[v].attr.length;r++){var _={};_.type=s[v].attr[r].type,f=s[v].attr[r].value,_.value=f,m.push(_)}for(o=0,l=c.length;l>o;o++)for(r=0;r<m.length;r++){var y=m[r].type;y==c[o].type&&(c[o].value+=m[r].value)}var T=[];for(r=0;r<c.length;r++){var M=m.filter(function(t){return t.type==c[r].type});M[0]&&T.push(M[0])}for(r=0;r<c.length;r++)for(var C=0;C<T.length;C++)c[r].type==T[C].type&&(h=t.AttributeData.getItemAttStrByType(c[r],c,1,!1,!0,"0xE0AE75","0xcbc2b2"),""!=h&&g.push(h))}var b="|C:0xE0AE75&T:"+t.LanguageUtils.language_Friend_Txt1+"：||C:0xcbc2b2&T:"+(e-1)+"|",I=t.ModelManager.ins().roleModel.getRingMax(i);for(I>1&&g.unshift(b),r=0;r<c.length;r++)c[r].value=0;if(m.length=0,this.cfg1Dic){for(var v in this.cfg1Dic)for(r=0;r<this.cfg1Dic[v].attr.length;r++){var _={};_.type=this.cfg1Dic[v].attr[r].type,f=this.cfg1Dic[v].attr[r].value,_.value=f,m.push(_)}for(o=0,l=c.length;l>o;o++)for(r=0;r<m.length;r++){var y=m[r].type;y==c[o].type&&(c[o].value+=m[r].value)}var S="|C:0xE0AE75&T:"+t.LanguageUtils.language_Friend_Txt1+"：||C:0x28ee01&T:"+e+"|";d.unshift(S);var T=[];for(r=0;r<c.length;r++){var M=m.filter(function(t){return t.type==c[r].type});M[0]&&T.push(M[0])}for(r=0;r<c.length;r++)for(var E=0;E<T.length;E++)c[r].type==T[E].type&&(h=t.AttributeData.getItemAttStrByType(c[r],c,1,!1,!0,"0xE0AE75","0x28ee01"),""!=h&&d.push(h))}for(r=0;r<g.length;r++)d.length<r?u.push({desc1:g[r],desc2:null}):u.push({desc1:g[r],desc2:d[r]});this.setData(u)},i.prototype.setData=function(t){this.creatItem(t)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this.itemArrayCollection.replaceAll(this.dataAry)},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.flipPage&&(this.flipPage.removeEventListener(t.CompEvent.PAGE_CHANGE,this.onPageChange,this),this.flipPage.destory(),this.flipPage=null),this.mcName=null,this.mc&&(this.mc.destroy(),this.mc=null),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.dataAry.length=0,this.dataAry=null,this.itemArrayCollection.removeAll(),this.itemArrayCollection=null,this.iconArrayCollection.removeAll(),this.iconArrayCollection=null,this.tabArr.length=0,this.tabArr=null,this.nextCfg=null,t.EventManager.ins().removeEvent(t.CompEvent.STRENGTHEN_RED,this.refreshRedDot,this),t.EventManager.ins().removeEvent(t.CompEvent.GET_PROPS_STRENGTHEN_SPECIAL,this.onGetProps,this),t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.RingView=e,__reflect(e.prototype,"app.RingView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._itemArrayCollection=null,t.maxHight=415,t._type=0,t.itemId=261,t.ruleId=0,t.titleStr="",t.lhLevel=0,t.csLevel=0,t.isMoving=!1,t.skinName="SkillSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.init()},i.prototype.open=function(e){e&&(this._type=e.type),0==this._type?(this.ruleId=5,this.titleStr=t.LanguageUtils.language_System5):1==this._type&&(this.ruleId=6,this.titleStr=t.LanguageUtils.language_System6)},i.prototype.init=function(){this._scrollViewContainer||(this._scrollViewContainer=new t.ScrollViewContainer(this.container),this._scrollViewContainer.callFunc([this.onScrollerChange,this.onScrollerEnd,null],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.itemRenderer=t.RoleSkillItemView,this._itemArrayCollection=new eui.ArrayCollection,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.observe(t.SettingMgr.ins().post_17_2,this.onRefresh),this.observe(t.DefaultMgr.ins().post_g_0_7,this.onRefresh),this.observe(t.SkillMgr.ins().postg_5_2,this.updateSkill),this.observe(t.SkillMgr.ins().post_updateSkillMC,this.updateSkillMC),t.EventManager.ins().addEvent(t.CompEvent.ROLE_LEVEL_CIRCLE,this.onRefresh,this),t.EventManager.ins().addEvent(t.CompEvent.SHORTCUTKEY,this.onRefresh,this),t.EventManager.ins().addEvent(t.CompEvent.DRAG_END,this.onDragEnd,this),t.EventManager.ins().addEvent(t.CompEvent.DRAG_START,this.onDragStart,this)),this.onRefresh()},i.prototype.updateSkill=function(t){t&&(6==t.nSkillId?this.lhLevel!=t.nLevel&&(this.lhLevel=t.nLevel,this.onRefresh()):8==t.nSkillId?this.csLevel!=t.nLevel&&(this.csLevel=t.nLevel,this.onRefresh()):this.onRefresh())},i.prototype.onRefresh=function(){t.TimerManager.ins().isExists(this.updateSkillList,this)||t.TimerManager.ins().doTimer(100,1,this.updateSkillList,this)},i.prototype.updateSkillMC=function(t){for(var e,i=0;i<this._list.numChildren;i++)e=this._list.getChildAt(i),e&&e.data.skillId==t&&e.playMC()},i.prototype.updateSkillList=function(){t.TimerManager.ins().remove(this.updateSkillList,this);var e,i,n,s,a,r=t.EntityMgr.ins().getPayer,o=r.propSet.getZSLevel(),l=r.propSet.getAP_JOB(),h=(t.SettingMgr.ins().keyInfo,[]),p=t.EntityMgr.ins().getPayer.propSet.getLevel(),u=r.propSet.getBindCoin(),c=r.propSet.getMeridians(),g=0,d=-1;for(var m in t.GlobalConfig.SkillConf)if(e=t.GlobalConfig.SkillConf[m],g=0,t.ViewManager.ins().isCheckOpen(e.isShowNeed)&&!e.isDelete&&(e.vocation==l||0==e.vocation)){i=t.EntityMgr.ins().getPayer.getUserSkill(e.id),i&&(g=i.nLevel),6==e.id?this.lhLevel=g:8==e.id&&(this.csLevel=g),n=t.GlobalConfig.SkillsLevelConf[e.id][g],s=t.GlobalConfig.SkillsLevelConf[e.id][g+1];var f=!1,v=0,_=!1;if(e){if(1==this._type){if(3!=e.skillClass)continue}else if(1!=e.skillClass)continue;if(s&&s.upgradeConds){f=!0,_=!0;for(var y in s.upgradeConds)if(a=s.upgradeConds[y],1==a.cond){if(p<a.value){f=!1,_=!1,v=a.cond;break}}else if(4==a.cond){if(o<a.value){f=!1,_=!1,v=a.cond;break}}else if(6==a.cond){if(c<a.value){f=!1,_=!1,v=a.cond;break}}else if(2==a.cond){if(a.value>u){_=!1,v=a.cond;break}}else if(3==a.cond){var T=void 0;if(T=t.GlobalConfig.StdItems[a.value]){var M=t.CurrencyUtils.getCurrency(QatEnum.qatEquipment,T.id);if(a.count>M){_=!1,v=a.cond;break}}}}d=t.SettingMgr.ins().getSkillKey(e.id),e.isRedDot||(_=!1),n?h.push({type:1,isRedDot:_,skillId:e.id,level:g,name:e.name,state:d,dragName:"skillIcon_"+e.skillType+h.length,icon:n.skillName,isMax:!s,isUpgrade:f,errorType:v,skillType:e.skillType,upgradeConds:s&&s.upgradeConds}):h.push({type:1,isRedDot:_,skillId:e.id,level:g,name:e.name,state:d,dragName:"skillIcon_"+e.skillType+h.length,icon:s.skillName,isMax:!s,isUpgrade:f,errorType:v,skillType:e.skillType,upgradeConds:s&&s.upgradeConds})}}this._itemArrayCollection.replaceAll(h),this._scroller.validateNow()},i.prototype.onGetProps=function(){var e=t.GlobalConfig.GetItemRouteConfig[this.itemId];if(!t.ViewManager.ins().isShow(t.GaimItemWin)){var i=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,e.itemid,{x:i.x,y:i.y},{height:this.height,width:this.width},8888)}},i.prototype.onDragStart=function(t){this.isMoving=!0,this._scroller.scrollPolicyV=eui.ScrollPolicy.OFF},i.prototype.onDragEnd=function(t){this.isMoving=!1,this._scroller.scrollPolicyV=eui.ScrollPolicy.AUTO},i.prototype.onScrollerChange=function(){for(var t,e=0;e<this._list.numChildren;e++)t=this._list.getChildAt(e),t&&t.removeListener()},i.prototype.onScrollerEnd=function(){for(var t,e=0;e<this._list.numChildren;e++)t=this._list.getChildAt(e),t&&t.addListener()},i.prototype.callFunc=function(e,i,n){this.curIdx=e,this.curSkillId=i,this.curSkillLev=n,t.SkillMgr.ins().send_5_3(i)},i.prototype.$onClose=function(){for(e.prototype.$onClose.call(this),this.txt_get.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this);this._list.numChildren>0;){var i=this._list.getChildAt(0);i.destroy(),i=null}t.DefaultMgr.ins().post_gaimItemView(8888),this.txt_get.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),t.GetPropsView.getPropsTxt(this.txt_get,this.itemId),t.EventManager.ins().removeEvent(t.CompEvent.ROLE_LEVEL_CIRCLE,this.onRefresh,this),t.EventManager.ins().removeEvent(t.CompEvent.SHORTCUTKEY,this.onRefresh,this),t.EventManager.ins().removeEvent(t.CompEvent.DRAG_END,this.onDragEnd,this),t.EventManager.ins().removeEvent(t.CompEvent.DRAG_START,this.onDragStart,this),this._scrollViewContainer.destory(),this._scrollViewContainer=null,this._itemArrayCollection.removeAll(),t.DisplayUtils.removeFromParent(this.container)},i}(t.BaseEuiView);t.RoleBasicSkillView=e,__reflect(e.prototype,"app.RoleBasicSkillView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.touchEnabled=t.touchChildren=!1,t.skinName="SkillDescSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.setData=function(e){if(e){var i="";this.descLab.textFlow=null;var n=t.EntityMgr.ins().getPayer,s=n.propSet.getLevel(),a=n.propSet.getZSLevel(),r=n.propSet.getBindCoin(),o=n.propSet.getMeridians();if(e[0]){var l=e[0].skillId,h=e[0].desc,p=e[0].name,u=e[0].level;t.EntityMgr.ins().getPayer.getUserSkill(l);0==u?p&&(i+="|C:0xf7883a&T:"+(p+"("+t.LanguageUtils.language_Omission_txt6+")")+"\n"):(p?(i+="|C:0xf7883a&T:"+(p+"("+u+t.LanguageUtils.language_Common_1+")")+"\n",h.length>0&&(i+="\n|C:0xffffff&T:"+h)):i+="|C:0xffffff&T:"+h,i=i.replace(/^\s+|\s+$/g,"")+"\n")}if(e[1]){i+="\n"+t.LanguageUtils.language_Omission_txt39+"\n";var c=e[1].conds,l=e[1].skillId,h=e[1].desc,g=e[1].name,u=e[1].level,d=new Array(4);if(i+="\n",c)for(var m=void 0,f=c?c.length:0,v=0;f>v;v++)if(m=c[v],1==m.cond)m.value>s?d[0]="|C:0xe50000&T:"+(t.LanguageUtils.language_Omission_txt1+m.value+t.LanguageUtils.language_Common_1+"\n"):d[0]="|C:0x28ee01&T:"+(t.LanguageUtils.language_Omission_txt1+m.value+t.LanguageUtils.language_Common_1+"\n");else if(4==m.cond)m.value>a?d[1]="|C:0xe50000&T:"+(t.LanguageUtils.language_Omission_txt2+m.value+t.LanguageUtils.language_Common_0+"\n"):d[1]="|C:0x28ee01&T:"+(t.LanguageUtils.language_Omission_txt2+m.value+t.LanguageUtils.language_Common_0+"\n");else if(6==m.cond)m.value>o?d[0]="|C:0xe50000&T:"+(t.LanguageUtils.language_Omission_txt145+m.value+t.LanguageUtils.language_Common_1+"\n"):d[0]="|C:0x28ee01&T:"+(t.LanguageUtils.language_Omission_txt145+m.value+t.LanguageUtils.language_Common_1+"\n");else if(2==m.cond&&m.consume)m.value>r?d[2]="|C:0xe50000&T:"+(t.LanguageUtils.language_Omission_txt3+m.value+"\n"):d[2]="|C:0x28ee01&T:"+(t.LanguageUtils.language_Omission_txt3+m.value+"\n");else if(3==m.cond&&m.consume){var _=void 0;if(_=t.GlobalConfig.StdItems[m.value]){var y=t.CurrencyUtils.getCurrency(QatEnum.qatEquipment,_.id);y<m.count?d[3]="|C:0xe50000&T:"+(t.LanguageUtils.language_Omission_txt4+_.name+"："+m.count+"\n"):d[3]="|C:0x28ee01&T:"+(t.LanguageUtils.language_Omission_txt4+_.name+"："+m.count+"\n")}}for(var v=0;v<d.length;v++)d[v]&&(i+=d[v]);g?h.length>0&&(i+="\n|C:0xffffff&T:"+h):i+="\n|C:0xffffff&T:"+h,i=i.replace(/^\s+|\s+$/g,"")+"\n",this.descLab.textFlow=t.TextFlowMaker.generateTextFlow(i)}else i+="\n"+t.LanguageUtils.language_Omission_txt40+"\n",this.descLab.textFlow=t.TextFlowMaker.generateTextFlow(i)}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.descLab.textFlow=null,t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.RoleSkillDescView=e,__reflect(e.prototype,"app.RoleSkillDescView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="CommonGiftShowSKin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),t.MouseScroller.bind(this.itemScroller),this.itemList.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.itemList.dataProvider=new eui.ArrayCollection(e[0])),this.itemScroller.verticalScrollBar.autoVisibility=!1,this.itemScroller.verticalScrollBar.visible=!1,this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System81),this.addTouchEvent(this.btnConfim,this.onClick)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.itemScroller),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.btnConfim,this.onClick)},i.prototype.onClick=function(){t.ViewManager.ins().close(this)},i}(t.BaseEuiView);t.ShowGiftView=e,__reflect(e.prototype,"app.ShowGiftView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="StrengthenAttrItemSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=this.data;e.desc1&&(this.txt_cur.textFlow=t.TextFlowMaker.generateTextFlow(e.desc1)),e.desc2?this.txt_next.textFlow=t.TextFlowMaker.generateTextFlow(e.desc2):(this.txt_next.text="",this.arrow.visible=!1)}},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(eui.ItemRenderer);t.StrengthenAttrItemView=e,__reflect(e.prototype,"app.StrengthenAttrItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.redDot.visible=!1,this.labelDisplay.text=t.LanguageUtils.language_Omission_txt42;var i="StrengthenMgr.isSatisStrengthened";this.redDot.updateShowFunctions=i},i.prototype.refresh=function(){this.redDot.param=null},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(eui.Button);t.StrengthenBtnItemView=e,__reflect(e.prototype,"app.StrengthenBtnItemView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(t,e,i){this.icon.source=t,this.txtName.text=e,this.txtAdd.text="+"+i},e}(eui.Component);t.StrengthenItemSlot=e,__reflect(e.prototype,"app.StrengthenItemSlot")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.setData=function(e){e&&(e.desc1&&(this.txt_desc.textFlow=t.TextFlowMaker.generateTextFlow(e.desc1)),e.desc2?this.txt_desc2.textFlow=t.TextFlowMaker.generateTextFlow(e.desc2):(this.txt_desc2.text="",this.arrow.visible=!1),this.arrow.x=this.txt_desc.x+this.txt_desc.textWidth+5,this.txt_desc2.x=this.arrow.x+this.arrow.width+5)},i.prototype.destroy=function(){t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.StrengthenItemView=e,__reflect(e.prototype,"app.StrengthenItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.iconBg="qh_icon_bg",i.iconUrl=t.LanguageUtils.language_Omission_txt43,i.selectPos=-1,i.selectPosLv=0,i.updatePos=-1,i.pointAry=[],i.itemSlotAry=[],i.skinName="StrengthenSkin",i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(!this.pointAry.length){for(var n=void 0,s=0;8>s;s++)n=this.icon_group.getChildByName("icon_"+s),this.pointAry.push({x:n.x,y:n.y}),this.itemSlotAry.push(n);this.itemList.itemRenderer=t.StrengthenAttrItemView,this.itemArrayCollection=new eui.ArrayCollection,this.itemList.dataProvider=this.itemArrayCollection,this.txt_consume.text=t.LanguageUtils.language_Omission_txt4,this.txt_get.textFlow=t.TextFlowMaker.generateTextFlow("<a><u>"+t.LanguageUtils.language_Common_155+"<u></a>")}this.addTouchEvent(this.btn_strengthen,this.onClick),this.addTouchEvent(this.txt_get,this.onGetProps),this.observe(t.StrengthenMgr.ins().post_StrengthenData,this.updateData),this.observe(t.StrengthenMgr.ins().post_StrengthenUpdate,this.updateData),this.observe(t.BagMgr.ins().post_8_1,this.updateConsume),this.observe(t.BagMgr.ins().post_8_4,this.updateConsume),this.observe(t.BagMgr.ins().post_8_3,this.updateConsume),this.observe(t.DefaultMgr.ins().post_g_0_7,this.updateConsume),this.ListCost.itemRenderer=t.FourImagesCostItem,this.updateData()},i.prototype.updateConsume=function(){var e=t.GlobalConfig.EquipStrengthenConfig[this.selectPos][this.selectPosLv+1];if(e){var i=e.cost[0],n=new eui.ArrayCollection;n.source=e.cost,this.ListCost.dataProvider=n;var s=t.BagMgr.ins().getItemCountById(i.id);s>=i.count?this.txt_consume2.textFlow=t.TextFlowMaker.generateTextFlow("|C:0x2eb52d&T:"+s+"|C:0xE0AE75&T:/"+i.count):this.txt_consume2.textFlow=t.TextFlowMaker.generateTextFlow("|C:0xe50000&T:"+s+"|C:0xE0AE75&T:/"+i.count)}},i.prototype.updateData=function(){var e=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.Equip];if(e){var i=void 0,n=void 0,s=e[0].lv;this.selectPosLv=s,this.selectPos=1;for(var a=7,r=0;8>r;r++)i=this.itemSlotAry[r],n=e[r],i.setData(t.LanguageUtils.language_Omission_txt43[r][0],t.LanguageUtils.language_Omission_txt43[r][1],n.lv),n.lv<s&&(s=n.lv,this.selectPosLv=n.lv,this.selectPos=n.pos,a=r-1);if(this.updatePos>-1&&this.updatePos!=this.selectPos)return this.updatePos=this.selectPos,void this.playMC();this.updatePos=this.selectPos,a=0>a?7:a;for(var o=void 0,l=void 0,r=0;8>r;r++)o=this.pointAry[r],l=Math.abs((this.selectPos-1+r)%8),i=this.itemSlotAry[l],i.x=o.x,i.y=o.y;var h=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Equip];if(h){for(var p=h.name,r=0;8>r;r++)if(+p[r].equipid==this.selectPos){this.selectImg.source=p[r].equippc.equippcid,this.selectName.source=p[r].equippc.equipname;break}n=e[a];var u=t.GlobalConfig.EquipStrengthenConfig[n.pos][n.lv];this.txt_desc.text=t.LanguageUtils.language_Omission_txt43[this.selectPos-1][1]+t.LanguageUtils.language_Common_154+":"+s+t.LanguageUtils.language_Common_1,this.txt_desc2.text=s+1+t.LanguageUtils.language_Common_1;var c=t.GlobalConfig.EquipStrengthenConfig[this.selectPos][s+1];this.txt_max.visible=!c,this.group2.visible=!this.txt_max.visible;var g={},d={},m=[],f=void 0,v=null,_=[];if(u)for(var r=0;r<u.attrnew.length;r++)d[u.attrnew[r].type]=u.attrnew[r].value;if(c)for(var r=0;r<c.attrnew.length;r++)g[c.attrnew[r].type]=c.attrnew[r].value;for(var r=0;r<h.attrnew.length;r++)u?(v=null,f=h.attrnew[r].des+":",_=h.attrnew[r].att,_.length>1?(f+=d[_[0]]?d[_[0]]:0,f+="-",f+=d[_[1]]?d[_[1]]:0):(f+="+",f+=d[_[0]]?d[_[0]]:0),c&&(v=h.attrnew[r].des+":",_.length>1?(v+=g[_[0]]?g[_[0]]:0,v+="-",v+=g[_[1]]?g[_[1]]:0):(v+="+",v+=g[_[0]]?g[_[0]]:0))):c&&(f=h.attrnew[r].des+":0",v=h.attrnew[r].des+":",_=h.attrnew[r].att,_.length>1?(v+=g[_[0]]?g[_[0]]:0,v+="-",v+=g[_[1]]?g[_[1]]:0):(v+="+",v+=g[_[0]]?g[_[0]]:0)),m.push({desc1:f,desc2:v});this.itemArrayCollection.replaceAll(m)}}this.updateConsume()},i.prototype.init=function(){},i.prototype.onOver=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=(i.localToGlobal(),t.GlobalConfig.StdItems[this.selectedId]),s=i.localToGlobal();if(n){var a=t.TipsType.TIPS_EQUIP;a=n.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,n,{x:s.x+i.width/2,y:s.y+i.height/2})}}},i.prototype.onGetProps=function(){var e,i=t.ModelManager.ins().roleModel.getCurStrengthenData(t.StrengthenType.Equip);this.cfg1Dic=t.ModelManager.ins().roleModel.getStrengthenAttr(1,1,1),e=i?t.GlobalConfig.EquipStrengthenConfig[i[1]][i[0]]:t.GlobalConfig.EquipStrengthenConfig[1][1];var n,s=0;if(this.cfg1Dic)for(var a in this.cfg1Dic){var r=this.cfg1Dic[a].cost[0];n=r.id,0==r.type&&(s=r.count-t.CurrencyUtils.getCurrency(QatEnum.qatEquipment,n));break}if(!t.ViewManager.ins().isShow(t.GaimItemWin)){var o=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,{itemId:n,needNum:s},{x:o.x,y:o.y},{height:this.height,width:this.width})}},i.prototype.stopMC=function(){this.upMc&&(this.updateData(),this.upMc.destroy(),this.upMc=null)},i.prototype.playMC=function(){this.upMc||(this.upMc=t.ObjectPool.pop("app.MovieClip"),this.upMc.blendMode=egret.BlendMode.ADD,this.upMc.x=180,this.upMc.y=31),this.icon_group.addChild(this.upMc),this.upMc.playFile(ResDirEnum.RES_DIR_EFF+"eff_qh",1,this.stopMC.bind(this))},i.prototype.getItemVisible=function(){this.txt_get.visible=!1;var e;if(this.cfg1Dic){for(var i in this.cfg1Dic){e=this.cfg1Dic[i].cost[0].id;break}var n=t.GlobalConfig.GetItemRouteConfig[e],s=t.GlobalData.sectionOpenDay,a=n.itemstr;this.txt_get.textFlow=null,n.openParam&&s<n.openParam.openDay?this.txt_get.visible=!1:n.Route?(this.txt_get.textFlow=t.TextFlowMaker.generateTextFlow("<a><u>"+a+"<u></a>"),this.txt_get.visible=!0):this.txt_get.visible=!1}},i.prototype.refreshRedDot=function(){this.redDot.param=null,this.showConsume(this.curCfg)},i.prototype.onRefreshStrengthen=function(){t.SoundManager.ins().playEffect(t.SoundUtil.STRENGTHEN),this.setStrengthenData()},i.prototype.setStrengthenData=function(){this.selectedId=-1;var e=t.ModelManager.ins().roleModel.getCurStrengthenData(t.StrengthenType.Equip),i=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.Equip];if(this.temp=e,e){this.iconUrl=[["qh_icon_wuqi","武器"],["qh_icon_yifu","衣服"],["qh_icon_yaodai","腰带"],["qh_icon_xiezi","鞋子"],["qh_icon_jiezhi","戒指"],["qh_icon_huwan","护腕"],["qh_icon_xianglian","项链"],["qh_icon_toukui","头盔"]];var n=void 0,s=void 0;this.setAttr(e[0],e[1]);var a=e[1],r=[],o=[],l=void 0,h=void 0,p=void 0,u=a-1,c=a-1;for(p=0;p<i.length;p++){var g=i[p];this.strenghtenLvArr[g.pos-1]=g.lv}for(p=0;p<this.iconUrl.length;p++)1==a?(l=this.iconUrl[p],h=this.strenghtenLvArr[p]):(l=this.iconUrl[p+a-1],h=this.strenghtenLvArr[p+a-1],l||(l=this.iconUrl[a-1-u],u--),null==h&&(h=this.strenghtenLvArr[a-1-c],c--)),o.push(h),r[p]=l;var d=[],m=void 0;for(u=a-1,p=0;p<i.length;p++)1==a?m=i[p]:(m=i[p+a-1],m||(m=i[a-1-u],u--)),d[p]=m;var f=d.filter(function(t){return 125==t.lv});for(p=0;p<this.iconArr.length;p++)0==p?(n=8==f.length?0:1,s=t.GlobalConfig.EquipStrengthenConfig[e[1]][e[0]],this.showConsume(s),this.curCfg=s):n=0,this.iconArr[p].setStengthenData(this.iconBg,r[p][0],r[p][1],o[p],n)}else{for(var p=0,v=this.iconArr.length;v>p;p++)this.iconArr[p].setStengthenData(this.iconBg,this.iconUrl[p][0],this.iconUrl[p][1],this.strenghtenLvArr[p],0);var s=t.GlobalConfig.EquipStrengthenConfig[1][1];this.curCfg=s,this.setAttr(1,1,!0),this.showConsume(s)}},i.prototype.showConsume=function(e){if(void 0===e&&(e=null),this.txt_get.visible=!1,!e)return this.img_money.visible=!1,void(this.txt_consume.visible=!1);if(!this.cfg1Dic)return this.img_money.visible=!1,this.txt_consume.visible=!1,this.btn_strengthen.visible=!1,this.txt_max.visible=!0,this.strengthen_item.visible=!1,this.strengthen_icon.visible=!1,void t.EventManager.ins().sendEvent(t.CompEvent.ROLE_RED);this.getItemVisible(),this.btn_strengthen.visible=!0,this.img_money.visible=!0,this.txt_consume.visible=!0;var i=e.cost[0].type,n=e.cost[0].id,s=e.cost[0].count;this.selectedId=n;if(0==i){var a=t.GlobalConfig.StdItems[n];this.img_money.source=a.icon+""}else{var r=t.GlobalConfig.NumericalIcon[n];this.img_money.source=r.icon+""}var o,l=t.BagMgr.ins().getItemCountById(n);l?l>=s?(o=t.LanguageUtils.language_Omission_txt4+"：    |C:0x2eb52d&T:"+l+"|C:0xE0AE75&T:/"+s,this.txt_consume.textFlow=t.TextFlowMaker.generateTextFlow(o)):(o=t.LanguageUtils.language_Omission_txt4+"：    |C:0xe50000&T:"+l+"|C:0xE0AE75&T:/"+s,this.txt_consume.textFlow=t.TextFlowMaker.generateTextFlow(o)):(o=t.LanguageUtils.language_Omission_txt4+"：    |C:0xe50000&T:0|C:0xE0AE75&T:/"+s,this.txt_consume.textFlow=t.TextFlowMaker.generateTextFlow(o));var h,p=t.GlobalConfig.AttrLookupConfig[t.StrengthenType.Equip],u=p.name;for(var c in u)if(u[c].equipid==e.pos){this.strengthen_icon.setData(u[c].equippc.equippcid),this.strengthen_name.source=u[c].equippc.equipname,h=e.lv;var g=t.ModelManager.ins().roleModel.dicStrengthen[e.pos];t.GlobalConfig.EquipStrengthenConfig[e.pos][h]?this.strengthen_item.setData({desc1:g+":"+(e.lv-1)+t.LanguageUtils.language_Common_1,desc2:h+t.LanguageUtils.language_Common_1}):this.strengthen_item.setData({desc1:g+":"+(e.lv-1)+t.LanguageUtils.language_Common_1,desc2:null});break}},i.prototype.onClick=function(e){var i=t.GlobalConfig.EquipStrengthenConfig[this.selectPos][this.selectPosLv+1];if(i){var n=i.cost[0];if(0==n.type){var s=t.GlobalConfig.StdItems[n.id];this.img_money.source=s.icon+""}else{var a=t.GlobalConfig.NumericalIcon[n.id];this.img_money.source=a.icon+""}var r=t.BagMgr.ins().getItemCountById(n.id);if(r>=n.count){if(i.limit){var o=t.EntityMgr.ins().getPayer;if(o.propSet.getLevel()<i.limit[0].lv)return void t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_Tips88,i.limit[0].lv))}t.StrengthenMgr.ins().sendStrengthenInfo(t.StrengthenType.Equip,this.selectPos)}else this.onGetProps()}},i.prototype.setAttr=function(e,i,n){void 0===n&&(n=!1);var s,a,r=t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.Equip],o=1,l=!1;if(r.length>0){o=r[0].lv;for(var h=0;h<r.length;h++)o<r[h].lv&&(o=r[h].lv,l=!0)}n?(s=t.ModelManager.ins().roleModel.getStrengthenAttr(e,1,1),this.cfg1Dic=t.ModelManager.ins().roleModel.getStrengthenAttr(e,1,1)):(a=1!=i||l?8*o-(8-i+1):8*o,s=t.ModelManager.ins().roleModel.getStrengthenAttr(e,i-1,a),a++,this.cfg1Dic=t.ModelManager.ins().roleModel.getStrengthenAttr(e,i,a));var p,u,c,g,d,m=t.GlobalConfig.AttrLookupConfig[1],f=[],v=[],_=[],y=[],T=[];for(u=0;u<m.attr.length;u++)p={},p.type=m.attr[u],p.value=0,v.push(p);var M=0;if(s){for(var C in s)for(u=0;u<s[C].attr.length;u++){var b={};b.type=s[C].attr[u].type,M=s[C].attr[u].value,n?b.value=0:b.value=M,T.push(b)}for(c=0,g=v.length;g>c;c++){for(u=0;u<T.length;u++){var I=T[u].type;I==v[c].type&&(v[c].value+=T[u].value)}d=t.AttributeData.getItemAttStrByType(v[c],v,1,!1,!0,"0xE0AE75","0xcbc2b2"),""!=d&&_.push(d)}}var S=t.LanguageUtils.attrMinMax[5];for(u=0,g=_.length;g>u;u++)if(_[u].indexOf(S)>-1){var E=_.splice(u,1);_.unshift(E[0]);break}for(u=0;u<v.length;u++)v[u].value=0;if(T.length=0,this.cfg1Dic){for(var C in this.cfg1Dic)for(u=0;u<this.cfg1Dic[C].attr.length;u++){var b={};b.type=this.cfg1Dic[C].attr[u].type,M=this.cfg1Dic[C].attr[u].value,b.value=M,T.push(b)}for(c=0,g=v.length;g>c;c++){for(u=0;u<T.length;u++){var I=T[u].type;I==v[c].type&&(v[c].value+=T[u].value)}d=t.AttributeData.getItemAttStrByType(v[c],v,1,!1,!0,"0xE0AE75","0x28ee01"),""!=d&&y.push(d)}}for(u=0,g=y.length;g>u;u++)if(y[u].indexOf(S)>-1){var E=y.splice(u,1);y.unshift(E[0]);break}for(var w=0,A=_.length;A>w;w++)y.length<w?f.push({desc1:_[w],desc2:null}):f.push({desc1:_[w],desc2:y[w]});this.setData(f)},i.prototype.setData=function(t){this.creatItem(t)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this.itemArrayCollection.replaceAll(this.dataAry)},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.stopMC(),this.removeTouchEvent(this.btn_strengthen,this.onClick),this.removeTouchEvent(this.txt_get,this.onGetProps)},i}(t.BaseEuiView);t.StrengthenView=e,__reflect(e.prototype,"app.StrengthenView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="TitleAttribItemViewSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){this.visible=null!=this.data,this.data&&(this.txtAttrib.textFlow=t.TextFlowMaker.generateTextFlow(this.data))},i}(eui.ItemRenderer);t.TitleAttribItemView=e,__reflect(e.prototype,"app.TitleAttribItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._type=t,i.skinName="TitleItemViewSkin",i.touchEnabled=!1,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.list.itemRenderer=t.TitleAttribItemView,0==this._type&&(this.addTouchEvent(this.selectImg,this.onClick),this.addChangeEvent(this.cbSeletTitle,this.onClick))},i.prototype.setData=function(e){this.titleData=e;var i=e.config;this.list.dataProvider=new eui.ArrayCollection(e.titleAttrib),this.lbDesc.text=i.titleDesc,i.effect?(this.iconTitle.visible=!1,this.titleMc||(this.titleMc=t.ObjectPool.pop("app.MovieClip"),this.titleMc.touchEnabled=!1,this.titleMc.blendMode=egret.BlendMode.ADD,this.titleMc.x=0,this.titleMc.y=0,this.group_mc.addChild(this.titleMc)),this.currIcon!=i.icon&&(this.titleMc.playFileEff(ResDirEnum.RES_DIR_TITLE+i.icon,-1,null,!1),this.currIcon=i.icon),this.group_mc.visible=!0):(this.iconTitle.source=i.icon,this.iconTitle.visible=!0,this.titleMc&&(this.titleMc.visible=!1,this.titleMc.stop()),this.group_mc.visible=!1),0==i.titleTime?this.lbValidity.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Common_108+t.LanguageUtils.language_Common_109):this.lbValidity.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Common_108+t.DateUtils.getFormatBySecond(Math.floor(e.timer),t.DateUtils.TIME_FORMAT_5))},i.prototype.onShowSelect=function(t){this.cbSeletTitle.visible=t},i.prototype.setShorten=function(t){t?this.height=300:this.height=80,this.groupDetailed.visible=t,this.bg.visible=t},i.prototype.setReveal=function(t){this.cbSeletTitle.selected=t,this.iconShow.visible=t},i.prototype.onClick=function(e){switch(e.currentTarget){case this.selectImg:t.EventManager.ins().sendEvent(t.CompEvent.ROLE_TITLE_SHORTEN,this.titleId);break;case this.cbSeletTitle:var i=this.cbSeletTitle.selected;this.iconShow.visible=i,this.setShorten(i),t.EventManager.ins().sendEvent(t.CompEvent.ROLE_TITLE_REVEAL,this.titleId,i)}},Object.defineProperty(i.prototype,"titleId",{get:function(){return this.titleData?this.titleData.titleId:0},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){this.removeTouchEvent(this.selectImg,this.onClick),this.removeTouchEvent(this.cbSeletTitle,this.onClick),this.titleMc&&(this.titleMc.destroy(),this.titleMc=null),this.titleData=null},i}(t.BaseView);t.TitleItemView=e,__reflect(e.prototype,"app.TitleItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._type=t,i.skinName="TitleItemViewSkin2",i.touchEnabled=!1,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.list.itemRenderer=t.TitleAttribItemView,0==this._type&&(this.addTouchEvent(this.selectImg,this.onClick),this.addChangeEvent(this.cbSeletTitle,this.onClick))},i.prototype.setData=function(e){this.titleData=e;var i=e.config;this.list.dataProvider=new eui.ArrayCollection(e.titleAttrib),this.lbDesc.text=i.titleDesc,i.effect?(this.iconTitle.visible=!1,this.titleMc||(this.titleMc=t.ObjectPool.pop("app.MovieClip"),this.titleMc.touchEnabled=!1,this.titleMc.blendMode=egret.BlendMode.ADD,this.titleMc.x=0,this.titleMc.y=0,this.group_mc.addChild(this.titleMc)),this.currIcon!=i.icon&&(this.titleMc.playFileEff(ResDirEnum.RES_DIR_TITLE+i.icon,-1,null,!1),this.currIcon=i.icon),this.group_mc.visible=!0):(this.iconTitle.source=i.icon,this.iconTitle.visible=!0,this.titleMc&&(this.titleMc.visible=!1,this.titleMc.stop()),this.group_mc.visible=!1),0==i.titleTime?this.lbValidity.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Common_108+t.LanguageUtils.language_Common_109):this.lbValidity.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Common_108+t.DateUtils.getFormatBySecond(Math.floor(e.timer),t.DateUtils.TIME_FORMAT_5))
},i.prototype.onShowSelect=function(t){this.cbSeletTitle.visible=t},i.prototype.setShorten=function(t){t?this.height=300:this.height=80,this.groupDetailed.visible=t,this.bg.visible=t},i.prototype.setReveal=function(t){this.cbSeletTitle.selected=t,this.iconShow.visible=t},i.prototype.onClick=function(e){switch(e.currentTarget){case this.selectImg:t.EventManager.ins().sendEvent(t.CompEvent.ROLE_TITLE2_SHORTEN,this.titleId);break;case this.cbSeletTitle:var i=this.cbSeletTitle.selected;this.iconShow.visible=i,this.setShorten(i),t.EventManager.ins().sendEvent(t.CompEvent.ROLE_TITLE2_REVEAL,this.titleId,i)}},Object.defineProperty(i.prototype,"titleId",{get:function(){return this.titleData?this.titleData.titleId:0},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){this.removeTouchEvent(this.selectImg,this.onClick),this.removeTouchEvent(this.cbSeletTitle,this.onClick),this.titleMc&&(this.titleMc.destroy(),this.titleMc=null),this.titleData=null},i}(t.BaseView);t.TitleItemView2=e,__reflect(e.prototype,"app.TitleItemView2")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.ruleId=63,i.titleStr=t.LanguageUtils.language_System67,i.currShortenItem=-1,i.currRevealItem=-1,i.skinName="TitleViewSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.currShortenItem=this.currRevealItem=t.EntityMgr.ins().getPayer.propSet.getTITLE(),t.MouseScroller.bind(this.scroller),this.lbNoTitle.visible=!1,t.EventManager.ins().addEvent(t.CompEvent.ROLE_TITLE_SHORTEN,this.onShortenlItem,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_TITLE_REVEAL,this.onRevealItem,this),this.observe(t.TitleMgr.ins().post_54_1,this.updateData),this.observe(t.TitleMgr.ins().post_54_2,this.updateData),this.observe(t.TitleMgr.ins().post_54_3,this.updateData),this.observe(t.TitleMgr.ins().post_54_4,this.updateData),this.observe(t.DefaultMgr.ins().post_updateTitle,this.updateNewData),t.TitleMgr.ins().send54_1()},i.prototype.showView=function(){t.EventManager.ins().sendEvent(t.CompEvent.ROLE_TITLE2_OPEN)},i.prototype.hideView=function(){t.EventManager.ins().sendEvent(t.CompEvent.ROLE_TITLE2_CLOSE)},i.prototype.onShortenlItem=function(t){t==this.currShortenItem&&(t=-1),this.currShortenItem=t;for(var e=0;e<this.listTitle.numChildren;e++){var i=this.listTitle.getChildAt(e);i.setShorten(i.titleId==t)}},i.prototype.onRevealItem=function(e,i){if(i){for(var n=0;n<this.listTitle.numChildren;n++){var s=this.listTitle.getChildAt(n);s.setShorten(s.titleId==e),s.setReveal(s.titleId==e)}t.TitleMgr.ins().send54_2(e)}else t.TitleMgr.ins().send54_2(0)},i.prototype.updateData=function(){this.onClearItemList();for(var e=t.TitleMgr.ins().getTitleArr(),i=0;i<e.length;i++){var n=new t.TitleItemView(0);n.setData(e[i]),n.onShowSelect(!0),n.setShorten(e[i].titleId==this.currShortenItem),n.setReveal(e[i].titleId==this.currRevealItem),this.listTitle.addChild(n)}this.lbNoTitle.visible=e.length<=0?!0:!1},i.prototype.updateNewData=function(){var e=t.EntityMgr.ins().getPayer.propSet.getTITLE();if(e!=this.currRevealItem){this.currShortenItem=this.currRevealItem=e;for(var i=0;i<this.listTitle.numChildren;i++){var n=this.listTitle.getChildAt(i);n.setReveal(n.titleId==e)}}},i.prototype.onClearItemList=function(){for(;this.listTitle.numChildren>0;){var t=this.listTitle.getChildAt(0);this.listTitle.removeChild(t),t.destroy(),t=null}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.onClearItemList()},i}(t.BaseView);t.TitleView=e,__reflect(e.prototype,"app.TitleView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.currShortenItem=-1,t.currRevealItem=-1,t.skinName="TitleViewSkin2",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.currShortenItem=this.currRevealItem=t.EntityMgr.ins().getPayer.propSet.getCurCustomTitle(),t.MouseScroller.bind(this.scroller),this.lbNoTitle.visible=!1,t.EventManager.ins().addEvent(t.CompEvent.ROLE_TITLE2_SHORTEN,this.onShortenlItem,this),t.EventManager.ins().addEvent(t.CompEvent.ROLE_TITLE2_REVEAL,this.onRevealItem,this),this.observe(t.TitleMgr.ins().post_54_5,this.updateData),this.observe(t.TitleMgr.ins().post_54_6,this.updateData),this.observe(t.TitleMgr.ins().post_54_7,this.updateData),this.observe(t.TitleMgr.ins().post_54_8,this.updateData),this.observe(t.DefaultMgr.ins().post_updateTitle2,this.updateNewData),t.TitleMgr.ins().send54_3()},i.prototype.onShortenlItem=function(t){t==this.currShortenItem&&(t=-1),this.currShortenItem=t;for(var e=0;e<this.listTitle.numChildren;e++){var i=this.listTitle.getChildAt(e);i.setShorten(i.titleId==t)}},i.prototype.onRevealItem=function(e,i){if(i){for(var n=0;n<this.listTitle.numChildren;n++){var s=this.listTitle.getChildAt(n);s.setShorten(s.titleId==e),s.setReveal(s.titleId==e)}t.TitleMgr.ins().send54_4(e)}else t.TitleMgr.ins().send54_4(0)},i.prototype.updateData=function(){this.onClearItemList();for(var e=t.TitleMgr.ins().getTitleArr2(),i=0;i<e.length;i++){var n=new t.TitleItemView2(0);n.setData(e[i]),n.onShowSelect(!0),n.setShorten(e[i].titleId==this.currShortenItem),n.setReveal(e[i].titleId==this.currRevealItem),this.listTitle.addChild(n)}this.lbNoTitle.visible=e.length<=0?!0:!1},i.prototype.updateNewData=function(){var e=t.EntityMgr.ins().getPayer.propSet.getCurCustomTitle();if(e!=this.currRevealItem){this.currShortenItem=this.currRevealItem=e;for(var i=0;i<this.listTitle.numChildren;i++){var n=this.listTitle.getChildAt(i);n.setReveal(n.titleId==e)}}},i.prototype.onClearItemList=function(){for(;this.listTitle.numChildren>0;){var t=this.listTitle.getChildAt(0);this.listTitle.removeChild(t),t.destroy(),t=null}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this),this.onClearItemList()},i}(t.BaseView);t.TitleView2=e,__reflect(e.prototype,"app.TitleView2")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.levelsMaxHash={},t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.getLevelByPos=function(t){var e=0,i=this.getDataByPos(t);return i&&(e=i.lv),e},i.prototype.getOtherLevelByPos=function(t){var e=0,i=this.getOtherDataByPos(t);return i&&(e=i.lv),e},i.prototype.getDataByPos=function(e){var i=t.StrengthenMgr.ins().strengthenDic&&t.StrengthenMgr.ins().strengthenDic[t.StrengthenType.WordFormu];if(i)for(var n=0;n<i.length;n++)if(i[n].pos==e)return i[n];return null},i.prototype.getOtherDataByPos=function(e){var i=t.EquipItemMgr.ins().otherPlayerEquips;if(i){var n=i.strengthenDic&&i.strengthenDic[t.StrengthenType.WordFormu];if(n)for(var s=0;s<n.length;s++)if(n[s].pos==e)return n[s]}return null},i.prototype.getLevelMaxByPos=function(e){if(!this.levelsMaxHash[e]){var i=0,n=t.GlobalConfig.WordFormulaConfig;if(n&&n[e])for(var s in n[e])n[e][s].lv>i&&(i=n[e][s].lv);this.levelsMaxHash[e]=i}return this.levelsMaxHash[e]},i.prototype.getConfigByPosLevel=function(e,i){var n=t.GlobalConfig.WordFormulaConfig;return n&&n[e]&&n[e][i]},i.prototype.getAttrib=function(e,i,n){var s=[],a=this.getConfigByPosLevel(e,i),r=a&&a.attr;if(null==r)return[];for(var o=r.length,l=0;o>l;l++){var h=t.AttributeData.getItemAttStrByType(r[l],r,1,n);""!=h&&s.push(h)}return s},i.prototype.getViewRed=function(){for(var e,n=1;5>n;n++){var s=i.ins().getLevelByPos(n),a=i.ins().getLevelMaxByPos(n),r=0;if(s==a?r=0:(e=i.ins().getConfigByPosLevel(n,s+1),e&&(r=t.CurrencyUtils.isRedDot(e.cost))),r)return!0}return!1},i}(t.BaseClass);t.WordFormulaManager=e,__reflect(e.prototype,"app.WordFormulaManager")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FourImagesAttrItemCurSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){this.visible=null!=this.data,this.data&&(this.txt_cur.textFlow=t.TextFlowMaker.generateTextFlow(this.data))},i}(eui.ItemRenderer);t.WordFormulaAttrItemCurView=e,__reflect(e.prototype,"app.WordFormulaAttrItemCurView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FourImagesAttrItemNextSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){this.visible=null!=this.data,this.data&&(this.txt_next.textFlow=t.TextFlowMaker.generateTextFlow(this.data))},i}(eui.ItemRenderer);t.WordFormulaAttrItemNextView=e,__reflect(e.prototype,"app.WordFormulaAttrItemNextView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="FourImagesCostItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),gamelib.DeviceUtils.IsMobile?this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOver,this):(this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this))},i.prototype.onOver=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=(i.localToGlobal(),i.localToGlobal());if(0==this.data.type){var s=t.GlobalConfig.StdItems[this.data.id];if(s){var a=t.TipsType.TIPS_EQUIP;a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2})}}else{var r=t.GlobalConfig.NumericalIcon[this.data.id];r.description&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_MONEY,r.description,{x:n.x+i.width/2,y:n.y+i.height/2})}}},i.prototype.dataChanged=function(){this.visible=null!=this.data;var e=this.data.type,i=t.CurrencyUtils.getCurrency(e,this.data.id),n=i>=this.data.count?t.ColorUtil.GREEN_COLOR:t.ColorUtil.NAME_RED,s="|C:"+n+"&T:"+t.CommonUtils.overLengthChange(i)+"|C:0xe0ae75&T:/"+t.CommonUtils.overLengthChange(this.data.count);this.txtCost.textFlow=t.TextFlowMaker.generateTextFlow(s),this.iconGoods.source=t.CurrencyUtils.getCurrencyNameIcon(this.data.type,this.data.id)[1]+""},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),gamelib.DeviceUtils.IsMobile?this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOver,this):(this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onOver,this))},i}(eui.ItemRenderer);t.WordFormulaCostItem=e,__reflect(e.prototype,"app.WordFormulaCostItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){},i.prototype.setData=function(e){void 0===e&&(e=0);var i=0;e==t.RoleViewEnum.myRolePanel?i=t.WordFormulaManager.ins().getLevelByPos(this.pos):e==t.RoleViewEnum.otherPlayerPanel&&(i=t.WordFormulaManager.ins().getOtherLevelByPos(this.pos)),this.level=i;var n=t.WordFormulaManager.ins().getConfigByPosLevel(this.pos,i);n&&(this.lbTitle.text=t.LanguageUtils.language_WordFormula_names[this.pos-1]+n.endname,this.lbTitle.textColor=t.ColorUtil.GOODS_COLOR[n.colorid-1],this.icon.source="zj_"+n.colorid+"_"+this.pos)},i.prototype.setSeleted=function(t){this.seletectd.visible=t},i}(t.BaseView);t.WordFormulaItemView=e,__reflect(e.prototype,"app.WordFormulaItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="WordFormulaLevelUpWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.tabList.itemRenderer=t.TradeLineTabView,this.costList.itemRenderer=t.WordFormulaCostItem,this.gCurList.itemRenderer=t.WordFormulaAttrItemCurView,this.gNextList.itemRenderer=t.WordFormulaAttrItemNextView,this.costArr=new eui.ArrayCollection},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System108),this.redPoint1.visible=this.redPoint2.visible=this.redPoint3.visible=this.redPoint4.visible=!1,this.observe(t.StrengthenMgr.ins().post_StrengthenData,this.updateData),this.observe(t.StrengthenMgr.ins().post_StrengthenUpdate,this.updateData),this.observe(t.StrengthenMgr.ins().postWordFormuResult,this.postFourResult),this.observe(t.BagMgr.ins().post_8_1,this.updateRedPoint),this.observe(t.BagMgr.ins().post_8_4,this.updateRedPoint),this.observe(t.BagMgr.ins().post_8_3,this.updateRedPoint),this.observe(t.DefaultMgr.ins().postMoneyChange,this.updateRedPoint),this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),t.EventManager.ins().addEvent(t.CompEvent.GET_PROPS_STRENGTHEN_WORD_FORMULA,this.onGetProps,this),this.tabList.dataProvider=new eui.ArrayCollection([{name:t.LanguageUtils.language_WordFormula_names[0]},{name:t.LanguageUtils.language_WordFormula_names[1]},{name:t.LanguageUtils.language_WordFormula_names[2]},{name:t.LanguageUtils.language_WordFormula_names[3]}]),this.tabList.selectedIndex=0,this.addTouchEvent(this.btnUp,this.levelUp),this.updateList(),this.updateRedPoint()},i.prototype.postFourResult=function(e){e?4==e&&t.DefaultMgr.ins().payResultMC(0,this.localToGlobal(this.width/2+60,this.height/2)):t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2+60,this.height/2))},i.prototype.updateRedPoint=function(){for(var e,i=1;5>i;i++){var n=t.WordFormulaManager.ins().getLevelByPos(i),s=t.WordFormulaManager.ins().getLevelMaxByPos(i);if(this["redPoint"+i].visible=!0,n==s)this["redPoint"+i].visible=!1;else if(e=t.WordFormulaManager.ins().getConfigByPosLevel(i,n+1),e&&e.cost)for(var a in e.cost){var r=e.cost[a],o=t.CurrencyUtils.getCurrency(r.type,r.id);if(o<r.count){this["redPoint"+i].visible=!1;break}}else this["redPoint"+i].visible=!1}this.cfgCur&&this.costArr.replaceAll(this.cfgCur.cost)},i.prototype.updateData=function(){this.updateList()},i.prototype.levelUp=function(){if(this.cfgCur){var e=t.OtherMgr.ins().getItemIDByCost(this.cfgCur.cost);if(e.itemId>0)return this.onGetProps(null,e),!1}t.StrengthenMgr.ins().sendStrengthenInfo(t.StrengthenType.WordFormu,this.tabList.selectedIndex+1)},i.prototype.onGetProps=function(e,i){void 0===i&&(i=null),this.cfgCur&&(i||(i=t.OtherMgr.ins().getItemIDByCost(this.cfgCur.cost)),0==i.itemId&&(i.itemId=i.itemId2),i.itemId>0&&(t.ViewManager.ins().isShow(t.GaimItemWin)||t.ViewManager.ins().open(t.GaimItemWin,i,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode)))},i.prototype.updateList=function(){var e=this.tabList.selectedIndex+1,i=t.WordFormulaManager.ins().getLevelByPos(e),n=t.WordFormulaManager.ins().getConfigByPosLevel(e,i);this.Mc||(this.Mc=t.ObjectPool.pop("app.MovieClip"),this.Mc.scaleX=this.Mc.scaleY=1,this.Mc.touchEnabled=!1,this.effGrp.addChild(this.Mc)),this.Mc.playFileEff(ResDirEnum.RES_DIR_EFF+("effzijue_"+n.colorid+"_"+e),-1),this.curOrder.text=t.TextFlowMaker.getCStr(i)+t.LanguageUtils.language_Common_1,this.curLV.text=t.LanguageUtils.language_Omission_txt59+i,this.nextLv.text=t.LanguageUtils.language_Omission_txt60+(i+1);var s=t.WordFormulaManager.ins().getAttrib(e,i,!1),a=t.WordFormulaManager.ins().getAttrib(e,i+1,!1);this.gCurList.dataProvider=new eui.ArrayCollection(s),this.gNextList.dataProvider=new eui.ArrayCollection(a),this.nextLv.visible=a.length>0,this.setAttribData(e)},i.prototype.setAttribData=function(e){this.cfgCur=null;var i=t.WordFormulaManager.ins().getLevelByPos(e);if(i>0){var n=t.WordFormulaManager.ins().getLevelMaxByPos(e);if(i==n){this.costList.visible=!1,this.txt_get.visible=!1,this.btnUp.visible=!1,this.lbMax0.visible=!0,this.lbMax.visible=!0;var s=t.WordFormulaManager.ins().getConfigByPosLevel(e,i);return this.lbMax.text=t.LanguageUtils.language_WordFormula_names[e-1]+t.LanguageUtils.language_WordFormula_MaxText,void(this.lbMax.textColor=t.ColorUtil.GOODS_COLOR[s.colorid-1])}}this.costList.visible=!0,this.btnUp.visible=!0,this.lbMax.visible=!1,this.lbMax0.visible=!1;var a=t.WordFormulaManager.ins().getConfigByPosLevel(e,i+1);this.cfgCur=a,this.costArr.source=a.cost,t.GetPropsView.getPropsTxt(this.txt_get,a.cost[0].id),this.costList.dataProvider=this.costArr},i.prototype.onChange=function(t){this.tabList.selectedIndex=t.itemIndex,this.updateList()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.removeTouchEvent(this.btnUp,this.levelUp),this.tabList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.Mc&&(this.Mc.destroy(),this.Mc=null)},i}(t.BaseEuiView);t.WordFormulaLevelUpWin=e,__reflect(e.prototype,"app.WordFormulaLevelUpWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="WordFormulaShowInfoViewSkin",t}return __extends(i,e),i.prototype.updateStr=function(i,n){this.gCurList.itemRenderer=t.WordFormulaAttrItemCurView,this.gNextList.itemRenderer=t.WordFormulaAttrItemNextView,this.txtLimit.visible=!1,this.setData(i.pos,i.type),e.prototype.onResizeUI.call(this,i,n)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.mc&&(this.mc.destroy(),this.mc=null)},i.prototype.setData=function(e,i){if(void 0===i&&(i=0),e){this.pos=e;var n=t.WordFormulaManager.ins().getConfigByPosLevel(e,i);if(!n)return;this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.scaleX=this.mc.scaleY=.5,this.mc.touchEnabled=!1,this.effGrp.addChild(this.mc)),this.mc.playFileEff(ResDirEnum.RES_DIR_EFF+("effzijue_"+n.colorid+"_"+e),-1),this.curOrder.text=t.TextFlowMaker.getCStr(i)+t.LanguageUtils.language_Common_1,this.txtAttrib.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils["language_WordFormula_Tips"+this.pos]);var s=new eui.ArrayCollection,a=t.WordFormulaManager.ins().getAttrib(this.pos,i,!1);if(s.source=a,this.gCurList.dataProvider=s,i>0){this.lbTitle.text=t.LanguageUtils.language_WordFormula_names[this.pos-1]+n.endname,this.lbTitle.textColor=t.ColorUtil.GOODS_COLOR[n.colorid-1];var r=t.WordFormulaManager.ins().getConfigByPosLevel(this.pos,i+1);if(r&&r.limit){if(this.txtLimit.visible=!1,4==r.limit.length){var o=t.WordFormulaManager.ins().getConfigByPosLevel(this.pos,r.limit[0].lv);this.txtLimit.text=t.StringUtils.replace(t.LanguageUtils.language_WordFormula_Text0,o.endname)}}else this.txtLimit.visible=!1}else this.lbTitle.text=t.LanguageUtils.language_WordFormula_names[this.pos-1],this.lbTitle.textColor=t.ColorUtil.GOODS_COLOR[n.colorid-1]}},i}(t.TipsBase);t.WordFormulaShowInfoView=e,__reflect(e.prototype,"app.WordFormulaShowInfoView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.ruleId=110,i.titleStr=t.LanguageUtils.language_System108,i.skinName="WordFormulaViewSkin",i}return __extends(i,e),i.prototype.initUI=function(){for(var t=1;5>t;t++){var e=this["itemView"+t];e.pos=t,this.addMouseMoveEvent(e,this.mouseMove),this.addMouseOverEvent(e,this.mouseMove)}this.updateData()},i.prototype.initMyRoleView=function(){this.observe(t.StrengthenMgr.ins().post_StrengthenData,this.updateData),this.observe(t.StrengthenMgr.ins().post_StrengthenUpdate,this.updateData),this.observe(t.DefaultMgr.ins().postMoneyChange,this.updateRedPoint),this.observe(t.BagMgr.ins().post_8_1,this.updateRedPoint),this.observe(t.BagMgr.ins().post_8_4,this.updateRedPoint),this.observe(t.BagMgr.ins().post_8_3,this.updateRedPoint),this.addTouchEvent(this.goBtn,this.onClick),t.StrengthenMgr.ins().sendStrengthenInit(t.StrengthenType.WordFormu),this.updateRedPoint()},i.prototype.initOtherPlayerView=function(){this.goBtn.visible=!1},i.prototype.updateRedPoint=function(){this.redPoint.visible=t.WordFormulaManager.ins().getViewRed()},i.prototype.updateData=function(){for(var t=1;5>t;t++){var e=this["itemView"+t];e&&e.setData(this._roleType)}},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=i.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_WordFormula,{pos:i.pos,type:i.level},{x:n.x+i.width/2,y:n.y+i.height/2})}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.goBtn:t.ViewManager.ins().open(t.WordFormulaLevelUpWin)}},i.prototype.$onClose=function(){e.prototype.$onClose.call(this);for(var t=1;5>t;t++){var i=this["itemView"+t];i&&(this.removeTouchEvent(i,this.mouseMove),this.removeTouchEvent(i,this.mouseMove))}this.removeTouchEvent(this.goBtn,this.onClick)},i}(t.RoleBasePanel);t.WordFormulaView=e,__reflect(e.prototype,"app.WordFormulaView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},Object.defineProperty(i.prototype,"ruleId",{get:function(){return this._ruleId},set:function(t){this._ruleId=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ruleDesc",{get:function(){return this._ruleDesc},set:function(t){this._ruleDesc=t},enumerable:!0,configurable:!0}),i.prototype.onClick=function(){this.ruleId?t.ViewManager.ins().open(t.RuleView,{id:this.ruleId}):this.ruleDesc&&t.ViewManager.ins().open(t.RuleView,{desc:this.ruleDesc})},i}(eui.Button);t.RuleTipsButton=e,__reflect(e.prototype,"app.RuleTipsButton")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.htmlParser=null,t.skinName="RuleViewSkin",t.name="RuleView",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),this.dragDropUI.setCurrentState("default7"),this.dragDropUI.setParent(this),this.htmlParser=new egret.HtmlTextParser,this.title.text=t.LanguageUtils.language_Rule_Title},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e&&e.length){var n="";if(e[0].id){var s=t.GlobalConfig.RuleConf[e[0].id];s&&(n=s.ruleContent+"")}else e[0].desc&&(n=e[0].desc+"");n&&(this.contentLabel.textFlow=t.TextFlowMaker.generateTextFlow(n))}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.title=null,this.contentLabel=null},i}(t.BaseEuiView);t.RuleView=e,__reflect(e.prototype,"app.RuleView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.itemList.itemRenderer=t.ItemBase,this.scroller.horizontalScrollBar.autoVisibility=!1,this.scroller.horizontalScrollBar.visible=!1,this.addTouchEvent(this.btnSweep,this.onClick),this.addTouchEvent(this.btnChallenge,this.onClick)},i.prototype.dataChanged=function(){if(this.data){var e=this.data;if(e){var i=t.ActvityMgr.ins().getActivityInfo(e.Id);i&&i.info?(this.itemBg.source=e.bg?e.bg+"_png":"act_clfbbg_0_png",this.itemTxt.source=e.titleIcon?e.titleIcon:"",this.btnSweep.visible=this.btnChallenge.visible=i.info.times>=0,this.timeTxt.text=t.StringUtils.replace(t.LanguageUtils.language_Common_64,i.info.times),this.itemList.dataProvider=new eui.ArrayCollection(e.rewards)):(this.itemBg.source="act_clfbbg_0_png",this.itemTxt.source="",this.btnSweep.visible=this.btnChallenge.visible=!1,this.timeTxt.text="",this.itemList.dataProvider=new eui.ArrayCollection(null))}}this.setRedDot()},i.prototype.setRedDot=function(){this.redDot.visible=!1,this.redDot2.visible=!1;var e=this.data,i=t.ActvityMgr.ins().getActivityInfo(e.Id);e.buttoncolor&&i&&i.redDot&&(this.redDot.visible=!0,this.redDot2.visible=!0,this.redDot.setRedImg(e.buttoncolor),this.redDot2.setRedImg(e.buttoncolor))},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.btnSweep,this.onClick),this.removeTouchEvent(this.btnChallenge,this.onClick)},i.prototype.onClick=function(e){switch(e.target){case this.btnSweep:t.ActvityMgr.ins().send_25_1(this.data.Id,t.Operate.cMaterialMopUp);break;case this.btnChallenge:var i=t.EntityMgr.ins().getPayer;i&&i.propSet&&(i.propSet.getState()&t.ActorState.DEATH?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips102):t.GameMap.fubenID>0?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips106):t.ActvityMgr.ins().send_25_1(this.data.Id,t.Operate.cEnterFuBen))}},i}(t.BaseItemRender);t.ActivityDefendTaskItemView=e,__reflect(e.prototype,"app.ActivityDefendTaskItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.actid=43,t.curCDTime=0,t.skinName="SecretLandTreasureViewSkin",t.name="SecretLandTreasureView",t.touchEnabled=!1,gamelib.DeviceUtils.IsMobile?(t.left=0,t.top=60):(t.right=0,t.verticalCenter=-60),t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.observe(t.ActvityMgr.ins().post_25_15,this.updateView),this.observe(t.ActvityMgr.ins().post_jingjiTime,this.updateJingJiTime),this.updateView(),this.updateJingJiTime()},i.prototype.updateView=function(){var e=t.ActvityMgr.ins().getActivityConfigById(this.actid);if(e){var i={type:e.AwardA[0].type,id:e.AwardA[0].id},n={type:e.AwardB[0].type,id:e.AwardB[0].id},s={type:e.AwardC[0].type,id:e.AwardC[0].id},a=t.CurrencyUtils.getCurrencyNameIcon(i.type,i.id),r=t.CurrencyUtils.getCurrencyNameIcon(n.type,n.id),o=t.CurrencyUtils.getCurrencyNameIcon(s.type,s.id);this.itemDesc1.textFlow=t.TextFlowMaker.generateTextFlow(a[0]+"：|C:0x28ee01&T:"+t.ActvityMgr.ins().secretBoxScore+"|"),this.itemDesc2.textFlow=t.TextFlowMaker.generateTextFlow(r[0]+"：|C:0x28ee01&T:"+t.ActvityMgr.ins().wordsBoxScore+"|"),this.itemDesc3.textFlow=t.TextFlowMaker.generateTextFlow(o[0]+"：|C:0x28ee01&T:"+t.ActvityMgr.ins().materialsBoxScore+"|"),this.itemData1.data=i,this.itemData2.data=n,this.itemData3.data=s}},i.prototype.updateJingJiTime=function(){var e=t.ActvityMgr.ins().jingjiTime-egret.getTimer()>>0;t.GameMap.fubenID>0&&e>0&&(this.timeGrp.visible=!0,this.curCDTime=t.ActvityMgr.ins().jingjiTime,this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this))},i.prototype.updateTime=function(){var e=this.curCDTime-egret.getTimer();this.actTime.text=t.LanguageUtils.language_Common_65+t.DateUtils.getFormatBySecond(Math.floor(e/1e3),t.DateUtils.TIME_FORMAT_10),0>=e&&(t.TimerManager.ins().remove(this.updateTime,this),this.actTime.text="",this.timeGrp.visible=!1)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.removeFromParent(),t.TimerManager.ins().remove(this.updateTime,this)},i}(t.BaseEuiView);t.SecretLandTreasureView=e,__reflect(e.prototype,"app.SecretLandTreasureView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.SetUp_Type_ShowHuman=1,t.SetUp_Type_ShowMonster=2,t.SetUp_Type_Bit3=3,t.SetUp_Type_Network=4,t.SetUp_Type_Recommend=5,t.SetUp_Type_Chase=6,t.SetUp_Type_autoTask=7,t.SetUp_Type_Skill1=8,t.SetUp_Type_Skill2=9,t.SetUp_Type_Skill3=10,t.SetUp_Type_autoRecycle=11,t.SetUp_Type_counterAtk=12,t.SetUp_Type_shieldPet=13,t.SetUp_Type_Sound=1,t.SetUp_Type_BgSound=2,t.SetUp_Type_HighQuality=3,t.SetUp_Type_LowQuality=4,t.SetUp_Type_SwimShow=5,t.SetUp_Type_scale1=6,t.SetUp_Type_scale2=7,t.SetUp_Type_scale3=8,t.SetUp_Type_closeEff=9,t.SetUp_Type_Rocker=11,t.SetUp_Type_Rocker2=11,t.SetUp_Drugs_Red=1,t.SetUp_Drugs_Blue=2,t.SetUp_Drugs_Wink_Red=3,t.SetUp_Drugs_Wink_Blue=4,t.SetUp_Drugs_HP=5,t.SetUp_Drugs_HP_TIME=6,t.SetUp_Drugs_MP=7,t.SetUp_Drugs_MP_TIME=8,t.SetUp_Drugs_MOMENT_HP=9,t.SetUp_Drugs_MOMENT_HP_TIME=10,t.SetUp_Drugs_MOMENT_MP=11,t.SetUp_Drugs_MOMENT_MP_TIME=12,t.SetUp_Drugs_Per=100,t.SetUp_Drugs_Blood=101,t.SetUp_Drugs_COM_Red=102,t.SetUp_Drugs_COM_BLUE=103,t.SetUp_Drugs_MOMENT_RED=104,t.SetUp_Drugs_MOMENT_BLUE=105,t.SetUp_Drugs_Select_LiaoShangYao=106,t.SetUp_Item_Pick=1e3,t.SetUp_Item_Mark=1001,t.SetUp_Item_All_Pick=1,t.SetUp_Item_All_Mark=2,t.SetUp_Hp1Val=13,t.SetUp_Hp1Item=14,t.SetUp_Hp2Val=15,t.SetUp_Hp2Item=16,t.SetUp_Hp1State=1,t.SetUp_Hp2State=2,t.SetUp_AI_skillID=17,t.SetUp_AI_pet=18,t.SetUp_AI_hpLess=19,t.SetUp_AI_hpLessSkill=20,t.SetUp_Drugs_LiaoShangYao=21,t.SetUp_Drugs_LiaoShangYaoHp=22,t.SetUp_Drugs_LiaoShangYaoTime=23,t.SetUp_AI_MaxHpMonster1=1,t.SetUp_AI_DotPickItem1=2,t.SetUp_AI_PickItem1=3,t.SetUp_AI_Huofu=4,t.SetUp_AI_ZhaoHuanShenShou=5,t.SetUp_AI_HpMin=6,t.SetUp_AI_Hemophagy=7,t.SetUp_AI_Thunderbolt=8,t.SetUp_AI_Poison=9,t.SetUp_AI_iceBluster=10,t.SetUp_AI_isRainFire=11,t.SetUp_AI_ltZhanShi=12,t.SetUp_AI_ltFashi=13,t.SetUp_AI_ltDaoShi=14,t.SetUp_Recycle_woma=1,t.SetUp_Recycle_zuma=2,t.SetUp_Recycle_caveBest=3,t.SetUp_Recycle_mineBest=4,t.SetUp_Recycle_womaBest=5,t.SetUp_Recycle_fortyLevel=6,t.SetUp_Recycle_fiftyLevel=7,t.SetUp_Recycle_oneTurnLevel=8,t.SetUp_Recycle_jinchuangDrug0=9,t.SetUp_Recycle_jinchuangDrug1=10,t.SetUp_Recycle_jinchuangDrug2=11,t.SetUp_Recycle_jinchuangDrug3=12,t.SetUp_Recycle_magicDrug0=13,t.SetUp_Recycle_magicDrug1=14,t.SetUp_Recycle_magicDrug2=15,t.SetUp_Recycle_magicDrug3=16,t.SetUp_Recycle_sunWater0=17,t.SetUp_Recycle_sunWater1=18,t.SetUp_Recycle_sunWater2=19,t.SetUp_Recycle_sunWater3=20,t}();t.SetUpEnum=e,__reflect(e.prototype,"app.SetUpEnum");var i=function(){function t(){}return t.SetUp_Basics=1,t.SetUp_Items=2,t.SetUp_Drugs=3,t.SetUp_Protection=4,t.SetUp_AI=5,t.SetUp_System=6,t.SetUp_Recycle=7,t}();t.SetUpTypeTEnum=i,__reflect(i.prototype,"app.SetUpTypeTEnum")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.dicName={},t}return __extends(i,e),i.prototype.setData=function(){t.ObjectPool.wipe(this.dicName);for(var e,i,n=[],s=t.GlobalData.sectionOpenDay,a=0;a<this.setUpListData.length;a++)e=this.setUpListData[a],i=t.GlobalConfig.StdItems[e.itemId],e.itemName=i?i.name:e.itemName,(e.openDay&&e.openDay<=s||!e.openDay)&&n.push(e);this.dicName[0]=n},i.prototype.getItemSetData=function(t){if(0==t)return this.dicName[0];for(var e=[],i=0,n=this.dicName[0];i<n.length;i++){var s=n[i];s.type==t&&e.push(s)}return e},i.prototype.getItemSetPageData=function(){var e=[],i=t.GlobalConfig.ItemTypeConfig;for(var n in i)e.push(i[n]);return e},i.prototype.init=function(){this.setData()},i.prototype.getCheckBox=function(e){return t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Items,e)},Object.defineProperty(i.prototype,"setItemData",{set:function(e){this.setUpListData&&(this.setUpListData.length=0),this.setUpListData=e,t.EventManager.ins().sendEvent(t.CompEvent.SETUP_ITEM_DATA)},enumerable:!0,configurable:!0}),i}(egret.EventDispatcher);t.SetUpData=e,__reflect(e.prototype,"app.SetUpData");var i=function(){function t(){}return t}();t.SetUpListData=i,__reflect(i.prototype,"app.SetUpListData")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.iconDisplay&&this.data.source&&(this.iconDisplay.source=this.data.source),this.labelDisplay&&this.data.text&&(this.labelDisplay.text=this.data.text)},e}(t.BaseItemRender);t.ButtonRender=e,__reflect(e.prototype,"app.ButtonRender")}(app||(app={}));
var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.iconDisplay&&this.data.source&&(this.iconDisplay.source=this.data.source),this.labelDisplay&&this.data.pagename&&(this.labelDisplay.text=this.data.pagename)},e}(t.BaseItemRender);t.ItemButtonRender=e,__reflect(e.prototype,"app.ItemButtonRender")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.data){var e=t.GlobalConfig.SkillConf[this.data];t.GlobalConfig.SkillsLevelConf[this.data][1];e&&e.name&&(this.nameLbl.text=e.name)}},i}(t.BaseItemRender);t.SetAIDropDownItemView=e,__reflect(e.prototype,"app.SetAIDropDownItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.dropIndex=-1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.touchEnabled=!0,this.currentState="up",this.btn.currentState="up",this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listSelect,this),this.addTouchEvent(this,this.onTap),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStage,this),this.dataPro=new eui.ArrayCollection,this.list.itemRenderer=t.SetAIDropDownItemView,this.list.dataProvider=this.dataPro},i.prototype.listSelect=function(e){var i=t.GlobalConfig.SkillConf[e.item],n=t.GlobalConfig.SkillsLevelConf[e.item][1];i&&i.name&&n&&n.skillName&&(this.value.text=i.name)},i.prototype.removeStage=function(t){this.stage&&this.removeTouchEvent(this.stage,this.onTap)},i.prototype.onTap=function(t){this.currentState="up"==this.currentState?"down":"up",this.btn.currentState="up"==this.btn.currentState?"down":"up",t.stopPropagation(),this.stage&&("down"==this.currentState?this.addTouchEvent(this.stage,this.onTap):this.removeTouchEvent(this.stage,this.onTap))},i.prototype.setData=function(t){this.dataPro.replaceAll(t)},i.prototype.setLabel=function(t){this.value.text=t},i.prototype.getLabel=function(){return this.value.text},i.prototype.setDropIndex=function(t){this.dropIndex=t},i.prototype.getEnabled=function(){return this.list.touchEnabled},i.prototype.destructor=function(){this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.listSelect,this),this.removeTouchEvent(this,this.onTap),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStage,this),this.removeStage()},i}(t.BaseView);t.SetAIDropDownView=e,__reflect(e.prototype,"app.SetAIDropDownView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){if(this.data){var e=t.GlobalConfig.SkillConf[this.data],i=t.GlobalConfig.SkillsLevelConf[this.data][1];e&&e.name&&(this.nameLbl.text=e.name),i&&i.skillName&&(this.icon.source=i.skillName)}},i}(t.BaseItemRender);t.SetDropDownItemView=e,__reflect(e.prototype,"app.SetDropDownItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.dropIndex=-1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},i.prototype.init=function(){this.touchEnabled=!0,this.currentState="up",this.btn.currentState="up",this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listSelect,this),this.addTouchEvent(this,this.onTap),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStage,this),this.dataPro=new eui.ArrayCollection,this.list.itemRenderer=t.SetDropDownItemView,this.list.dataProvider=this.dataPro},i.prototype.listSelect=function(e){var i=t.GlobalConfig.SkillConf[e.item],n=t.GlobalConfig.SkillsLevelConf[e.item][1];i&&i.name&&n&&n.skillName&&(this.value.text=i.name,this.icon.source=n.skillName,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Protection,this.dropIndex,e.item),t.SettingMgr.ins().send_17_5(t.SetUpTypeTEnum.SetUp_Protection,this.dropIndex,e.item))},i.prototype.removeStage=function(t){this.stage&&this.removeTouchEvent(this.stage,this.onTap)},i.prototype.onTap=function(t){this.currentState="up"==this.currentState?"down":"up",this.btn.currentState="up"==this.btn.currentState?"down":"up",t.stopPropagation(),this.stage&&("down"==this.currentState?this.addTouchEvent(this.stage,this.onTap):this.removeTouchEvent(this.stage,this.onTap))},i.prototype.setData=function(t){this.dataPro.replaceAll(t)},i.prototype.setLabel=function(t){this.value.text=t},i.prototype.setIcon=function(t){this.icon.source=t},i.prototype.getLabel=function(){return this.value.text},i.prototype.setDropIndex=function(t){this.dropIndex=t},i.prototype.getEnabled=function(){return this.list.touchEnabled},i.prototype.destructor=function(){this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.listSelect,this),this.removeTouchEvent(this,this.onTap),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStage,this),this.removeStage()},i}(t.BaseView);t.SetDropDownView=e,__reflect(e.prototype,"app.SetDropDownView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.taoistArr=[],t.skinName="SetUpAISkin",t}return __extends(i,e),i.prototype.initUI=function(){this.labAry={isCure2:{htmlText:t.LanguageUtils.language_SetUp_Text42}},this.basicsLab=[{htmlText:t.LanguageUtils.language_SetUp_Text41,x:22,y:23}],this.dsph=new how.DSpriteSheet,this.checkboxAry=[this.isCure2],this.addTouchEvent(this.isCure2,this.onclick),this.hpInput.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.initView(),e.prototype.initUI.call(this),this.observe(t.SkillMgr.ins().postg_5_2,this.initView),this.observe(t.SettingMgr.ins().post_17_4,this.initView)},i.prototype.initView=function(){this.taoistArr=[this.isAutoRelease2,this.isPoison,this.ltItem2,this.petGrp,this.isAutoMaxHp2,this.notPickItem2,this.pickItem2];var e=t.EntityMgr.ins().getPayer.propSet.getAP_JOB();switch(e){case JobConst.ZhanShi:this.jobGrp1.visible=!0,this.isMaxHp1.label=t.LanguageUtils.language_SetUp_Text43,this.isMaxHp1.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1),this.isMaxHp1.setCallback(this,this.onclick),this.notPickItem1.label=t.LanguageUtils.language_SetUp_Text44,this.notPickItem1.setCallback(this,this.onclick),this.pickItem1.label=t.LanguageUtils.language_SetUp_Text45,this.pickItem1.setCallback(this,this.onclick),this.ltItem1.label=t.LanguageUtils.language_SetUp_Text64,this.ltItem1.setCallback(this,this.onclick);var i=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1),n=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1);this.notPickItem1.selected=i,this.pickItem1.selected=n,this.ltItem1.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltZhanShi),0==i&&0==n&&(this.pickItem1.selected=!n,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,!0),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,!n));break;case JobConst.DaoShi:this.jobGrp2.visible=!0;var s=t.GlobalConfig.SkillConf[33];s&&t.EntityMgr.ins().getPayer.getUserSkill(s.id)&&this.taoistArr.splice(3,0,this.isAutoHemophagy2);for(var a=0;a<this.taoistArr.length;a++)this.taoistArr[a].x=30,this.taoistArr[a].y=18+60*a,this.taoistArr[a].visible=!0;this.isAutoRelease2.label=t.LanguageUtils.language_SetUp_Text46,this.isAutoRelease2.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Huofu),this.isAutoRelease2.setCallback(this,this.onclick),this.isPoison.label=t.LanguageUtils.language_Common_137,this.isPoison.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Poison),this.isPoison.setCallback(this,this.onclick),this.ltItem2.label=t.LanguageUtils.language_SetUp_Text66,this.ltItem2.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltDaoShi),this.ltItem2.setCallback(this,this.onclick),this.isAutoSummon2.label=t.LanguageUtils.language_SetUp_Text47,this.isAutoSummon2.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ZhaoHuanShenShou),this.isAutoSummon2.setCallback(this,this.onclick),this.isCure2.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_HpMin),this.isAutoHemophagy2.label=t.LanguageUtils.language_SetUp_Text48,this.isAutoHemophagy2.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Hemophagy),this.isAutoHemophagy2.setCallback(this,this.onclick),this.isAutoMaxHp2.label=t.LanguageUtils.language_SetUp_Text43,this.isAutoMaxHp2.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1),this.isAutoMaxHp2.setCallback(this,this.onclick),this.notPickItem2.label=t.LanguageUtils.language_SetUp_Text44,this.notPickItem2.setCallback(this,this.onclick),this.pickItem2.label=t.LanguageUtils.language_SetUp_Text45,this.pickItem2.setCallback(this,this.onclick);var r=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_hpLess);this.hpInput.text=r+"";var o=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1),l=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1);this.notPickItem2.selected=o,this.pickItem2.selected=l,0==o&&0==l&&(this.pickItem2.selected=!l,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,!0),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,!l));break;case JobConst.FaShi:this.jobGrp3.visible=!0,this.isThunderbolt3.label=t.LanguageUtils.language_SetUp_Text49,this.isThunderbolt3.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt),this.isThunderbolt3.setCallback(this,this.onclick),this.isIceBluster3.label=t.LanguageUtils.language_Common_138,this.isIceBluster3.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster),this.isIceBluster3.setCallback(this,this.onclick),this.isRainFire3.label=t.LanguageUtils.language_Common_157,this.isRainFire3.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_isRainFire),this.isRainFire3.setCallback(this,this.onclick),this.ltItem3.label=t.LanguageUtils.language_SetUp_Text65,this.ltItem3.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltFashi),this.ltItem3.setCallback(this,this.onclick),this.isMaxHp3.label=t.LanguageUtils.language_SetUp_Text43,this.isMaxHp3.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1),this.isMaxHp3.setCallback(this,this.onclick),this.notPickItem3.label=t.LanguageUtils.language_SetUp_Text44,this.notPickItem3.setCallback(this,this.onclick),this.pickItem3.label=t.LanguageUtils.language_SetUp_Text45,this.pickItem3.setCallback(this,this.onclick);var h=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1),p=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1);this.notPickItem3.selected=h,this.pickItem3.selected=p,0==h&&0==p&&(this.pickItem3.selected=!p,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,!0),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,!p))}e=null},i.prototype.onFocusOut=function(e){var i=e.currentTarget;switch(i){case this.hpInput:+this.hpInput.text>100&&(this.hpInput.text="100"),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_hpLess,+this.hpInput.text),t.SettingMgr.ins().send_17_5(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_hpLess,+this.hpInput.text)}},i.prototype.onclick=function(e){switch(e.currentTarget){case this.isMaxHp1:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1,e.currentTarget.selected?1:0);break;case this.notPickItem1:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,e.currentTarget.selected?1:0),this.pickItem1.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,e.currentTarget.selected?0:1);break;case this.pickItem1:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,e.currentTarget.selected?1:0),this.notPickItem1.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,e.currentTarget.selected?0:1);break;case this.isAutoRelease2:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Huofu,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Huofu,e.currentTarget.selected?1:0);break;case this.isAutoSummon2:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ZhaoHuanShenShou,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ZhaoHuanShenShou,e.currentTarget.selected?1:0);break;case this.isCure2:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_HpMin,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_HpMin,e.currentTarget.selected?1:0);break;case this.isAutoHemophagy2:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Hemophagy,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Hemophagy,e.currentTarget.selected?1:0);break;case this.isPoison:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Poison,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Poison,e.currentTarget.selected?1:0);break;case this.isAutoMaxHp2:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1,e.currentTarget.selected?1:0);break;case this.notPickItem2:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,e.currentTarget.selected?1:0),this.pickItem2.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,e.currentTarget.selected?0:1);break;case this.pickItem2:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,e.currentTarget.selected?1:0),this.notPickItem2.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,e.currentTarget.selected?0:1);break;case this.isThunderbolt3:t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt)?(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt,e.currentTarget.selected?1:0)):t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster)?(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt,e.currentTarget.selected?1:0),this.isIceBluster3.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster,e.currentTarget.selected?0:1)):(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt,e.currentTarget.selected?1:0));break;case this.isIceBluster3:t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster)?(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster,e.currentTarget.selected?1:0)):t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt)?(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster,e.currentTarget.selected?1:0),this.isThunderbolt3.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_Thunderbolt,e.currentTarget.selected?0:1)):(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_iceBluster,e.currentTarget.selected?1:0));break;case this.isRainFire3:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_isRainFire,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_isRainFire,e.currentTarget.selected?1:0);break;case this.isMaxHp3:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1,e.currentTarget.selected?1:0);break;case this.notPickItem3:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,e.currentTarget.selected?1:0),this.pickItem3.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,e.currentTarget.selected?0:1);break;case this.pickItem3:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_PickItem1,e.currentTarget.selected?1:0),this.notPickItem3.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_DotPickItem1,e.currentTarget.selected?0:1);break;case this.isAutoMaxHp2:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_MaxHpMonster1,e.currentTarget.selected?1:0);break;case this.ltItem1:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltZhanShi,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltZhanShi,e.currentTarget.selected?1:0);break;case this.ltItem2:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltDaoShi,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltDaoShi,e.currentTarget.selected?1:0);break;case this.ltItem3:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltFashi,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_AI,t.SetUpEnum.SetUp_AI_ltFashi,e.currentTarget.selected?1:0)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this),this.removeObserve(),this.removeTouchEvent(this.isCure2,this.onclick),this.hpInput.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.removeObserve(),this.dsph.dispose(),this.jobGrp1=null,this.jobGrp2=null,this.jobGrp3=null,this.isMaxHp1=null,this.notPickItem1.$onRemoveFromStage(),this.notPickItem1=null,this.pickItem1.$onRemoveFromStage(),this.pickItem1=null,this.isAutoRelease2.$onRemoveFromStage(),this.isAutoRelease2=null,this.isPoison.$onRemoveFromStage(),this.isPoison=null,this.isAutoSummon2.$onRemoveFromStage(),this.isAutoSummon2=null,this.isCure2.$onRemoveFromStage(),this.isCure2=null,this.isAutoHemophagy2.$onRemoveFromStage(),this.isAutoHemophagy2=null,this.isAutoMaxHp2.$onRemoveFromStage(),this.isAutoMaxHp2=null,this.notPickItem2.$onRemoveFromStage(),this.notPickItem2=null,this.pickItem2.$onRemoveFromStage(),this.pickItem2=null,this.hpInput=null,this.cureGrp.removeChildren(),this.cureGrp=null,this.petGrp.removeChildren(),this.petGrp=null;for(var n=0,s=this.taoistArr.length;s>n;n++)this.taoistArr[n]=null;this.taoistArr.length=0,this.taoistArr=null,this.isThunderbolt3.$onRemoveFromStage(),this.isThunderbolt3=null,this.isIceBluster3.$onRemoveFromStage(),this.isIceBluster3=null,this.isRainFire3.$onRemoveFromStage(),this.isRainFire3=null,this.isMaxHp3.$onRemoveFromStage(),this.isMaxHp3=null,this.notPickItem3.$onRemoveFromStage(),this.notPickItem3=null,this.pickItem3.$onRemoveFromStage(),this.pickItem3=null},i}(t.SetUpBaseView);t.SetUpAI=e,__reflect(e.prototype,"app.SetUpAI")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._actID=0,i.skinName="ActivityDefendTaskSKin",i.name="ActivityDefendTaskView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setCurrentState("default13"),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System70),this.itemArrayCollection=new eui.ArrayCollection,this.list.itemRenderer=t.ActivityDefendTaskItemView,this.list.dataProvider=this.itemArrayCollection,this.scroller.verticalScrollBar.autoVisibility=!1,this.scroller.verticalScrollBar.visible=!1,this.observe(t.ActvityMgr.ins().post_25_3,this.refreshData),this.observe(t.ActvityMgr.ins().post_defendTaskResult,this.updateResult)},i.prototype.updateResult=function(e){if(e.result>0){var i=e.times;i=egret.getTimer()/1e3+i,i>0&&t.EventManager.ins().sendEvent(t.CompEvent.TimerEvent,[i]),t.ViewManager.ins().close(this),t.ViewManager.ins().close(t.ActivityCopiesWin),t.ViewManager.ins().open(t.ActivityDefendTipsView,e.times)}},i.prototype.refreshData=function(t){t&&this.itemArrayCollection.replaceAll(this.dataAry)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this._actID=e[0]),t.MouseScroller.bind(this.scroller),this.dataAry=[],this.setData()},i.prototype.setData=function(){var e=t.GlobalConfig.Activity13Config,i=[];for(var n in e)if(e[Number(n)]){var s=e[n];19!=s.Id&&i.push(s)}var a=i.length;if(5>a)for(var r=0;5-a>r;r++)i.push(t.GlobalConfig.Activity13Config[19]);this.creatItem(i)},i.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this.itemArrayCollection.replaceAll(this.dataAry)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.MouseScroller.unbind(this.scroller),this.dragDropUI.destroy(),this.dragDropUI=null,this.scroller=null,this.list=null,this.dataAry.length=0,this.dataAry=null,this.itemArrayCollection.removeAll(),this.itemArrayCollection=null},i}(t.BaseEuiView);t.ActivityDefendTaskView=e,__reflect(e.prototype,"app.ActivityDefendTaskView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.checkBoxAry=[],t.skinName="SetUpBasicsSkin",t}return __extends(i,e),i.prototype.initUI=function(){this.checkBox1.label=t.LanguageUtils.language_SetUp_Text1,this.checkBox1.setCallback(this,this.onclick),this.checkBox1.dataObj=t.GlobalConfig.BasicsSettingmConfig[1],this.checkBox2.label=t.LanguageUtils.language_SetUp_Text2,this.checkBox2.setCallback(this,this.onclick),this.checkBox2.dataObj=t.GlobalConfig.BasicsSettingmConfig[2],this.checkBox3.label=t.LanguageUtils.language_SetUp_Text3,this.checkBox3.setCallback(this,this.onclick),this.checkBox3.dataObj=t.GlobalConfig.BasicsSettingmConfig[3],this.checkBox4.label=t.LanguageUtils.language_SetUp_Text4,this.checkBox4.setCallback(this,this.onclick),this.checkBox4.dataObj=t.GlobalConfig.BasicsSettingmConfig[4],this.checkBox5.label=t.LanguageUtils.language_SetUp_Text5,this.checkBox5.setCallback(this,this.onclick),this.checkBox5.dataObj=t.GlobalConfig.BasicsSettingmConfig[5],this.autoTask.label=t.LanguageUtils.language_System82,this.autoTask.setCallback(this,this.onclick),this.autoTask.dataObj=t.GlobalConfig.BasicsSettingmConfig[7],this.counterAtk.label=t.LanguageUtils.language_SetUp_Text62,this.counterAtk.setCallback(this,this.onclick),this.counterAtk.dataObj=t.GlobalConfig.BasicsSettingmConfig[8],this.shieldPet.label=t.LanguageUtils.language_SetUp_Text63,this.shieldPet.setCallback(this,this.onclick),this.shieldPet.dataObj=t.GlobalConfig.BasicsSettingmConfig.showPet,this.basicsLab=[{htmlText:t.LanguageUtils.language_SetUp_Text0,x:22,y:23}];var i=t.EntityMgr.ins().getPayer.propSet.getAP_JOB();switch(i){case JobConst.ZhanShi:this.basicsLab.push({htmlText:t.LanguageUtils.language_SetUp_Text6,x:22,y:176});break;case JobConst.FaShi:this.basicsLab.push({htmlText:t.LanguageUtils.language_SetUp_Text12,x:22,y:176});break;case JobConst.DaoShi:this.basicsLab.push({htmlText:t.LanguageUtils.language_SetUp_Text10,x:22,y:176})}this.updateSkill(),e.prototype.initUI.call(this),this.observe(t.SettingMgr.ins().post_17_3,this.updateSkill),this.observe(t.SkillMgr.ins().postg_5_1,this.updateSkill),this.observe(t.SkillMgr.ins().postg_5_2,this.updateSkill),this.observe(t.SettingMgr.ins().post_17_4,this.updateSkill)},i.prototype.onclick=function(e){switch(e.currentTarget){case this.checkBox1:t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_ShowHuman,e.currentTarget.selected?1:0),this.setCheckBox(t.SetUpEnum.SetUp_Type_ShowHuman,e.currentTarget.selected),t.EntityMgr.ins().updateMonsterName();break;case this.checkBox2:t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_ShowMonster,e.currentTarget.selected?1:0),this.setCheckBox(t.SetUpEnum.SetUp_Type_ShowMonster,e.currentTarget.selected),t.EntityMgr.ins().updateMonsterName();break;case this.checkBox3:t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Bit3,e.currentTarget.selected?1:0),this.setCheckBox(t.SetUpEnum.SetUp_Type_Bit3,e.currentTarget.selected),t.EntityMgr.ins().updateTitle();break;case this.checkBox4:t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Network,e.currentTarget.selected?1:0),this.setCheckBox(t.SetUpEnum.SetUp_Type_Network,e.currentTarget.selected),t.SettingMgr.ins().postSetWIFI();break;case this.checkBox5:t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Recommend,e.currentTarget.selected?1:0),this.setCheckBox(t.SetUpEnum.SetUp_Type_Recommend,e.currentTarget.selected);break;case this.autoTask:t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoTask,e.currentTarget.selected?1:0),this.setCheckBox(t.SetUpEnum.SetUp_Type_autoTask,e.currentTarget.selected);break;case this.counterAtk:t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_counterAtk,e.currentTarget.selected?1:0),this.setCheckBox(t.SetUpEnum.SetUp_Type_counterAtk,e.currentTarget.selected),t.SettingMgr.ins().post_counterAtk();break;case this.shieldPet:t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_shieldPet,e.currentTarget.selected?1:0),this.setCheckBox(t.SetUpEnum.SetUp_Type_shieldPet,e.currentTarget.selected),t.EntityMgr.ins().updateRolePet();break;default:e.data&&(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,e.data.pos+7,e.currentTarget.selected?1:0),this.setCheckBox(e.data.pos+7,e.currentTarget.selected))}},i.prototype.updateCheckBox=function(){this.checkBox1.selected=this.getCheckBox(t.SetUpEnum.SetUp_Type_ShowHuman),this.checkBox2.selected=this.getCheckBox(t.SetUpEnum.SetUp_Type_ShowMonster),this.checkBox3.selected=this.getCheckBox(t.SetUpEnum.SetUp_Type_Bit3),this.checkBox4.selected=this.getCheckBox(t.SetUpEnum.SetUp_Type_Network),this.checkBox5.selected=this.getCheckBox(t.SetUpEnum.SetUp_Type_Recommend),this.autoTask.selected=this.getCheckBox(t.SetUpEnum.SetUp_Type_autoTask),this.counterAtk.selected=this.getCheckBox(t.SetUpEnum.SetUp_Type_counterAtk),this.shieldPet.selected=this.getCheckBox(t.SetUpEnum.SetUp_Type_shieldPet);for(var e=0;e<this.checkBoxAry.length;e++)this.checkBoxAry[e].selected=this.getCheckBox(this.checkBoxAry[e].dataObj.pos+7)},i.prototype.getCheckBox=function(e){return t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,e)},i.prototype.setCheckBox=function(e,i){return t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Basics,e,i)},i.prototype.updateSkill=function(){this.skillGroup.removeChildren(),this.checkBoxAry=[];var e,i=t.EntityMgr.ins().getPayer.propSet.getAP_JOB();if(JobConst.ZhanShi==i?e=t.GlobalConfig.BasicsSettingmConfig.skills1:JobConst.FaShi==i?e=t.GlobalConfig.BasicsSettingmConfig.skills2:JobConst.DaoShi==i&&(e=t.GlobalConfig.BasicsSettingmConfig.skills3),e){t.EntityMgr.ins().getPayer.getUserSkills();for(var n in e){var s=t.GlobalConfig.SkillConf[e[n].skillId];if(s&&t.EntityMgr.ins().getPayer.getUserSkill(s.id)){var a=new t.SetUpCheckBoxEui;a.label=s.name,a.dataObj=e[n],a.setCallback(this,this.onclick),this.checkBoxAry.push(a),this.skillGroup.addChild(a)}}}this.updateCheckBox()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(e.prototype.close.call(this),this.skillGroup.numElements>0&&this.skillGroup.removeChildren(),t.DisplayUtils.removeFromParent(this.skillGroup),this.checkBox1.$onRemoveFromStage(),this.checkBox2.$onRemoveFromStage(),this.checkBox3.$onRemoveFromStage(),this.checkBox4.$onRemoveFromStage(),this.checkBox5.$onRemoveFromStage(),this.autoTask.$onRemoveFromStage(),this.counterAtk.$onRemoveFromStage(),this.shieldPet.$onRemoveFromStage(),this.checkBoxAry){for(var s=0,a=this.checkBoxAry.length;a>s;s++)this.checkBoxAry[s].$onRemoveFromStage();this.checkBoxAry.length=0,this.checkBoxAry=null}this.removeTouchEvent(this.checkBox1,this.onclick),this.removeTouchEvent(this.checkBox2,this.onclick),this.removeTouchEvent(this.checkBox3,this.onclick),this.removeTouchEvent(this.checkBox4,this.onclick),this.removeTouchEvent(this.checkBox5,this.onclick),this.removeTouchEvent(this.autoTask,this.onclick),this.removeTouchEvent(this.counterAtk,this.onclick),this.removeTouchEvent(this.shieldPet,this.onclick),this.removeObserve(),t.DisplayUtils.removeFromParent(this)
},i}(t.SetUpBaseView);t.SetUpBasics=e,__reflect(e.prototype,"app.SetUpBasics")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._isCanClick=!0,t.htmlText=new egret.HtmlTextParser,t.skinName="SetUpCheckBox",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initUI()},i.prototype.initUI=function(){gamelib.DeviceUtils.IsMobile?this.labelDisplay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mouseMove,this):(this.labelDisplay.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.labelDisplay.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)),this.checkBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCheck,this)},Object.defineProperty(i.prototype,"isCanClick",{get:function(){return this._isCanClick},set:function(t){this._isCanClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this.checkBox.selected},set:function(t){this.checkBox.selected=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelColor",{set:function(t){this.labelDisplay.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"label",{set:function(e){this.labelDisplay.textFlow=t.TextFlowMaker.generateTextFlow(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataObj",{get:function(){return this._dataObj},set:function(t){this._dataObj=t},enumerable:!0,configurable:!0}),i.prototype.setCallback=function(t,e){this.func=e,this.funcObj=t},i.prototype.clickCheck=function(){if(this._isCanClick){var t=this;egret.Tween.removeTweens(this.checkBox),egret.Tween.get(this.checkBox).call(function(){t.checkBox.scaleX=t.checkBox.scaleY=.95}).wait(150).call(function(){t.checkBox.scaleX=t.checkBox.scaleY=1})}this.func.call(this.funcObj,{currentTarget:this,data:this._dataObj})},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{if(this._dataObj&&this._dataObj.tips){var i=this.labelDisplay.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,this._dataObj.tips,{x:i.x+this.labelDisplay.width/2,y:i.y+this.labelDisplay.height/2}),i=null}gamelib.DeviceUtils.IsMobile&&(this._isCanClick?(this.selected=!this.selected,this.clickCheck()):this.func.call(this.funcObj,{currentTarget:this,data:this._dataObj}))}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this._dataObj=null,this.htmlText=null,this.func=null,this.funcObj=null,this.labelDisplay.textFlow=null,gamelib.DeviceUtils.IsMobile?this.labelDisplay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.mouseMove,this):(this.labelDisplay.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.labelDisplay.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)),this.checkBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCheck,this)},i}(eui.Component);t.SetUpCheckBoxEui=e,__reflect(e.prototype,"app.SetUpCheckBoxEui")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.resetValue=[70,0,40,0],t.minimum=0,t.maximum=100,t.skinName="SetUpDrugsSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.init()},i.prototype.init=function(){this.percentageLab.textFlow=t.TextFlowMaker.generateTextFlow("<u>按百分比自动吃药</u>"),this.hpLab.textFlow=t.TextFlowMaker.generateTextFlow("<u>按血量自动吃药</u>"),this.addChangeEvent(this.percentageBox,this.onClickChange),this.addChangeEvent(this.hpbox,this.onClickChange),this.addChangeEvent(this.hpCheckBox1,this.onClickChange),this.addChangeEvent(this.hpCheckBox2,this.onClickChange),this.addChangeEvent(this.hpCheckBox3,this.onClickChange),this.addChangeEvent(this.hpCheckBox4,this.onClickChange),this.addChangeEvent(this.hpCheckBox5,this.onClickChange),this.edit_hp.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_hp_time.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_mp.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_mp_time.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_moment_hp.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_moment_hp_time.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_moment_mp.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_moment_mp_time.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_therapy_hp.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_therapy_hp_time.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.observe(t.SettingMgr.ins().post_17_3,this.updateCheckBox),this.observe(t.SettingMgr.ins().post_17_4,this.updateCheckBox),this.groupArr=[],this.comHSliderArr=[];var e,i;for(e=0;e<this.percentageGroup.numElements;e++)i=this.percentageGroup.getChildByName("group_"+e),this.groupArr.push(i);for(var n,s=0;5>s;s++)n=new t.ComHSlider(this.groupArr[s]),n.minimum=this.minimum,n.maximum=this.maximum,n.type=4==s?21:s+1,this.comHSliderArr.push(n),n.addEventListener(t.CompEvent.SET_HSLIDER,this.onScrollEnd,this);this.txtDescArr=[];for(var a,r=0;4>r;r++)a=this.labGroup.getChildByName("txt_desc_"+r),this.txtDescArr.push(a);this.updateCheckBox()},i.prototype.onFocusOut=function(e){var i=e.currentTarget;switch(i){case this.edit_hp:this.isNumber(this.edit_hp.text)||(this.edit_hp.text=""),this.setHpAndMp(t.SetUpEnum.SetUp_Drugs_HP,+this.edit_hp.text);break;case this.edit_hp_time:this.isNumber(this.edit_hp_time.text)||(this.edit_hp_time.text=""),this.setInputValue(this.edit_hp_time),this.setHpAndMp(t.SetUpEnum.SetUp_Drugs_HP_TIME,+this.edit_hp_time.text);break;case this.edit_mp:this.isNumber(this.edit_mp.text)||(this.edit_mp.text=""),this.setHpAndMp(t.SetUpEnum.SetUp_Drugs_MP,+this.edit_mp.text);break;case this.edit_mp_time:this.isNumber(this.edit_mp_time.text)||(this.edit_mp_time.text=""),this.setInputValue(this.edit_mp_time),this.setHpAndMp(t.SetUpEnum.SetUp_Drugs_MP_TIME,+this.edit_mp_time.text);break;case this.edit_moment_hp:this.isNumber(this.edit_moment_hp.text)||(this.edit_moment_hp.text=""),this.setHpAndMp(t.SetUpEnum.SetUp_Drugs_MOMENT_HP,+this.edit_moment_hp.text);break;case this.edit_moment_hp_time:this.isNumber(this.edit_moment_hp_time.text)||(this.edit_moment_hp_time.text=""),this.setInputValue(this.edit_moment_hp_time),this.setHpAndMp(t.SetUpEnum.SetUp_Drugs_MOMENT_HP_TIME,+this.edit_moment_hp_time.text);break;case this.edit_moment_mp:this.isNumber(this.edit_moment_mp.text)||(this.edit_moment_mp.text=""),this.setHpAndMp(t.SetUpEnum.SetUp_Drugs_MOMENT_MP,+this.edit_moment_mp.text);break;case this.edit_moment_mp_time:this.isNumber(this.edit_moment_mp_time.text)||(this.edit_moment_mp_time.text=""),this.setInputValue(this.edit_moment_mp_time),this.setHpAndMp(t.SetUpEnum.SetUp_Drugs_MOMENT_MP_TIME,+this.edit_moment_mp_time.text);break;case this.edit_therapy_hp:this.isNumber(this.edit_therapy_hp.text)||(this.edit_therapy_hp.text=""),this.setHpAndMp(t.SetUpEnum.SetUp_Drugs_LiaoShangYaoHp,+this.edit_therapy_hp.text);break;case this.edit_therapy_hp_time:this.isNumber(this.edit_therapy_hp_time.text)||(this.edit_therapy_hp_time.text=""),this.setInputValue(this.edit_therapy_hp_time),this.setHpAndMp(t.SetUpEnum.SetUp_Drugs_LiaoShangYaoTime,+this.edit_therapy_hp_time.text)}},i.prototype.setHpAndMp=function(e,i){t.SettingMgr.ins().send_17_5(t.SetUpTypeTEnum.SetUp_Drugs,e,i),this.setCheckBox(e,i)},i.prototype.isNumber=function(t){return this.numReg||(this.numReg=new RegExp("^(0|[1-9][0-9]*)$")),this.numReg.test(t)?!0:!1},i.prototype.setInputValue=function(t){var e=+t.text;e&&300>e?t.text="300":e&&e>=300&&1e4>=e?t.text=e+"":t.text="10000"},i.prototype.showRadio=function(){this.percentageBox.selected&&(this.percentageGroup.visible=!0,this.hpGroup.visible=!1),this.hpbox.selected&&(this.percentageGroup.visible=!1,this.hpGroup.visible=!0)},i.prototype.updateCheckBox=function(){this.updatePerCheckBox(),this.updateHpCheckBox(),this.showRadio()},i.prototype.updatePerCheckBox=function(){this.percentageBox.selected=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_Per),this.setDrugsPercent()},i.prototype.updateHpCheckBox=function(){this.hpbox.selected=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_Blood),this.hpCheckBox1.selected=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_COM_Red),this.hpCheckBox2.selected=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_COM_BLUE),this.hpCheckBox3.selected=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_MOMENT_RED),this.hpCheckBox4.selected=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_MOMENT_BLUE),this.hpCheckBox5.selected=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_Select_LiaoShangYao),this.setDrugsComHp(),this.setDrugsComMp(),this.setDrugsMomentHp(),this.setDrugsMomentMp(),this.setDrugsTherapyHp()},i.prototype.getCheckBox=function(e){return t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,e)},i.prototype.onScrollEnd=function(e){var i=e.data,n=Number(i.type),s=Number(i.param);t.SettingMgr.ins().send_17_5(t.SetUpTypeTEnum.SetUp_Drugs,n,s),this.setCheckBox(n,s)},i.prototype.setCheckBox=function(e,i){return t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,e,i)},i.prototype.onClickPercent=function(t){console.log(t.target.selected)},i.prototype.onClickHp=function(t){console.log(t.target.selected)},i.prototype.onClickChange=function(e){switch(e.target){case this.percentageBox:this.percentageGroup.visible=!0,this.hpGroup.visible=!1,t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,1,1),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,2,0),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_Blood,0),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_Per,1);break;case this.hpbox:this.percentageGroup.visible=!1,this.hpGroup.visible=!0,t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,1,0),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,2,1),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_Per,0),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_Blood,1);break;case this.hpCheckBox1:this.hpCheckBox1.selected?(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,3,1),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_COM_Red,1)):(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,3,0),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_COM_Red,0));break;case this.hpCheckBox2:this.hpCheckBox2.selected?(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,4,1),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_COM_BLUE,1)):(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,4,0),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_COM_BLUE,0));break;case this.hpCheckBox3:this.hpCheckBox3.selected?(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,5,1),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_MOMENT_RED,1)):(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,5,0),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_MOMENT_RED,0));break;case this.hpCheckBox4:this.hpCheckBox4.selected?(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,6,1),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_MOMENT_BLUE,1)):(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,6,0),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_MOMENT_BLUE,0));break;case this.hpCheckBox5:this.hpCheckBox5.selected?(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,7,1),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_Select_LiaoShangYao,1)):(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Drugs,7,0),this.setCheckBox(t.SetUpEnum.SetUp_Drugs_Select_LiaoShangYao,0))}console.log(e.target.selected)},i.prototype.setDrugsPercent=function(){for(var t=0;t<this.comHSliderArr.length;t++){var e=this.comHSliderArr[t].type;this.comHSliderArr[t].HsValue=this.getCheckBox(e)?+this.getCheckBox(e):0}},i.prototype.setDrugsComHp=function(){this.edit_hp.text=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_HP)+"",this.edit_hp_time.text=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_HP_TIME)},i.prototype.setDrugsComMp=function(){this.edit_mp.text=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_MP)+"",this.edit_mp_time.text=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_MP_TIME)},i.prototype.setDrugsMomentHp=function(){this.edit_moment_hp.text=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_MOMENT_HP)+"",this.edit_moment_hp_time.text=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_MOMENT_HP_TIME)},i.prototype.setDrugsMomentMp=function(){this.edit_moment_mp.text=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_MOMENT_MP)+"",this.edit_moment_mp_time.text=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_MOMENT_MP_TIME)},i.prototype.setDrugsTherapyHp=function(){this.edit_therapy_hp.text=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_LiaoShangYaoHp)+"",this.edit_therapy_hp_time.text=this.getCheckBox(t.SetUpEnum.SetUp_Drugs_LiaoShangYaoTime)},i.prototype.getDrugsPercent=function(e){return t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Drugs,e)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.edit_hp.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_hp_time.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_mp.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_mp_time.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_moment_hp.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_moment_hp_time.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_moment_mp.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_moment_mp_time.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_therapy_hp.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.edit_therapy_hp_time.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this);for(var s=0,a=this.comHSliderArr.length;a>s;s++){var r=this.comHSliderArr[s];r.destory(),r=null}this.removeChangeEvent(this.percentageBox,this.onClickChange),this.removeChangeEvent(this.hpbox,this.onClickChange),this.removeChangeEvent(this.hpCheckBox1,this.onClickChange),this.removeChangeEvent(this.hpCheckBox2,this.onClickChange),this.removeChangeEvent(this.hpCheckBox3,this.onClickChange),this.removeChangeEvent(this.hpCheckBox4,this.onClickChange),this.removeChangeEvent(this.hpCheckBox5,this.onClickChange),this.comHSliderArr.length=0,this.comHSliderArr=null,this.removeObserve(),t.DisplayUtils.removeFromParent(this)},i}(t.SetUpBaseView);t.SetUpDrugs=e,__reflect(e.prototype,"app.SetUpDrugs")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.dropDlist=[{text:t.LanguageUtils.language_SetUp_Text21},{text:t.LanguageUtils.language_SetUp_Text22},{text:t.LanguageUtils.language_SetUp_Text23},{text:t.LanguageUtils.language_SetUp_Text24},{text:t.LanguageUtils.language_SetUp_Text25},{text:t.LanguageUtils.language_SetUp_Text26},{text:t.LanguageUtils.language_SetUp_Text27}],i.skinName="SetUpItemSkin",i}return __extends(i,e),i.prototype.initUI=function(){t.ModelManager.ins().setUpModel.init(),this.labAry={pickUp:{htmlText:t.LanguageUtils.language_SetUp_Text17,nX:-33},tabRed:{htmlText:t.LanguageUtils.language_SetUp_Text18,nX:-33},pickUpAll:{htmlText:t.LanguageUtils.language_SetUp_Text19},tabRedAll:{htmlText:t.LanguageUtils.language_SetUp_Text20}},this.basicsLab=[{htmlText:t.LanguageUtils.language_SetUp_Text34,x:22,y:23}],this.checkboxAry=[this.pickUp,this.tabRed,this.pickUpAll,this.tabRedAll],e.prototype.initUI.call(this),this.dropDownList.itemRenderer=t.ItemButtonRender,this.dropDlist=t.ModelManager.ins().setUpModel.getItemSetPageData(),this.dropDownList.dataProvider=new eui.ArrayCollection(this.dropDlist),this.observe(t.SettingMgr.ins().post_17_3,this.updateCheckBox),this.observe(t.SettingMgr.ins().post_17_4,this.updateCheckBox),this.addTouchEvent(this.dropDownBtn,this.onClick),this.addChangeEvent(this.pickUp,this.onClickChange),this.addChangeEvent(this.tabRed,this.onClickChange),this.addChangeEvent(this.pickUpAll,this.onClickChange),this.addChangeEvent(this.tabRedAll,this.onClickChange),t.EventManager.ins().addEvent(t.CompEvent.SETUP_ITEM_DATA,this.onSetUpData,this),this.dropDownList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickMenu,this),this.dropDownBtn.label=t.LanguageUtils.language_SetUp_dropDownBtn,this.setUpItemListView=new t.SetUpItemListView(this.list),this.updateCheckBox(),this.dropDownImage.visible=!1},i.prototype.updateCheckBox=function(){this.pickUp.selected=this.getCheckBox(t.SetUpEnum.SetUp_Item_Pick),this.tabRed.selected=this.getCheckBox(t.SetUpEnum.SetUp_Item_Mark),this.pickUpAll.selected=this.getCheckBox(t.SetUpEnum.SetUp_Item_All_Pick),this.tabRedAll.selected=this.getCheckBox(t.SetUpEnum.SetUp_Item_All_Mark)},i.prototype.getCheckBox=function(e){return t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Items,e)},i.prototype.onClickChange=function(e){switch(e.target){case this.pickUp:this.pickUp.selected?(this.setCheckBox(t.SetUpEnum.SetUp_Item_Pick,1),this.isSelected(1,1)):(this.setCheckBox(t.SetUpEnum.SetUp_Item_Pick,0),this.isSelected(1,0));break;case this.tabRed:this.tabRed.selected?(this.setCheckBox(t.SetUpEnum.SetUp_Item_Mark,1),this.isSelected(2,1)):(this.setCheckBox(t.SetUpEnum.SetUp_Item_Mark,0),this.isSelected(2,0));break;case this.pickUpAll:this.pickUpAll.selected?(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Items,t.SetUpEnum.SetUp_Item_All_Pick,1),this.setCheckBox(t.SetUpEnum.SetUp_Item_All_Pick,1)):(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Items,t.SetUpEnum.SetUp_Item_All_Pick,0),this.setCheckBox(t.SetUpEnum.SetUp_Item_All_Pick,0));break;case this.tabRedAll:this.tabRedAll.selected?(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Items,t.SetUpEnum.SetUp_Item_All_Mark,1),this.setCheckBox(t.SetUpEnum.SetUp_Item_All_Mark,1)):(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Items,t.SetUpEnum.SetUp_Item_All_Mark,0),this.setCheckBox(t.SetUpEnum.SetUp_Item_All_Mark,0))}console.log(e.target.selected)},i.prototype.isSelected=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);for(var n,s,a=t.ModelManager.ins().setUpModel.dicName[0],r=a.length,o=0;r>o;o++)n=a[o].idx,s=a[o].pos,1==e?a[o].isSelected1!=i&&(a[o].isSelected1=i,this.setCheckBox(s[0],a[o])):a[o].isSelected2!=i&&(a[o].isSelected2=i,this.setCheckBox(s[1],a[o]));1==e?t.SettingMgr.ins().send_17_7(0,i):t.SettingMgr.ins().send_17_7(1,i),this.setUpItemListView.itemListData(a)},i.prototype.setCheckBox=function(e,i){return t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Items,e,i)},i.prototype.onClickMenu=function(e){var i=t.GlobalConfig.ItemTypeConfig[e.item.id];this.dropDownBtn.label=i.pagename,this.dropDownGroup.visible=!1,this.updateDropImage(),this.setCurData(e.itemIndex)},i.prototype.onClick=function(t){switch(t.currentTarget){case this.dropDownBtn:this.dropDownGroup.visible=!this.dropDownGroup.visible,this.updateDropImage()}},i.prototype.updateDropImage=function(){this.dropDownImage.source=this.dropDownGroup.visible?"com_ljt_1":"com_ljt_2"},i.prototype.setCurData=function(e){void 0===e&&(e=0);var i=t.ModelManager.ins().setUpModel.getItemSetData(e);this.setUpItemListView.initData(i)},i.prototype.onSetUpData=function(){var e=t.ModelManager.ins().setUpModel.dicName[0];this.setUpItemListView.setData(e)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.dropDlist.length=0,this.dropDlist=null,this.dropDownList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickMenu,this),this.dropDownList.itemRenderer=null,this.dropDownList.dataProvider=null,this.dropDownList=null,this.removeObserve(),this.removeTouchEvent(this.dropDownBtn,this.onClick),t.EventManager.ins().removeEvent(t.CompEvent.SETUP_ITEM_DATA,this.onSetUpData,this),this.setUpItemListView&&this.setUpItemListView.destroy(),this.setUpItemListView=null,this.list.numElements>0&&this.list.removeChildren(),t.DisplayUtils.removeFromParent(this)},i}(t.SetUpBaseView);t.SetUpItem=e,__reflect(e.prototype,"app.SetUpItem")}(app||(app={}));var app;!function(t){var e=function(){function e(t){this._itemArrayCollection=null,this._container=t,t&&(this._itemArrayCollection=new eui.ArrayCollection,this.init())}return e.prototype.init=function(){this._scrollViewContainer=new t.ScrollViewContainer(this._container),this._scrollViewContainer.callFunc([null,null,null],this),this._scroller=this._scrollViewContainer.scroller,this._list=this._scrollViewContainer.list,this._scrollViewContainer.itemRenderer=t.SetUpItemView,this._scrollViewContainer.dataProvider=this._itemArrayCollection,this.dataAry=[],this.initData(t.ModelManager.ins().setUpModel.dicName[0])},e.prototype.initData=function(t){t&&t.length>0?this.setData(t):this.setData([])},e.prototype.itemListData=function(t){this.setData(t)},e.prototype.setData=function(t){var e;if(t&&t.length>0)for(var i=0;i<t.length;i++)e=t[i],e.idx=i,e.callFunc=this.callFunc.bind(this);this.creatItem(t)},e.prototype.creatItem=function(t){this.dataAry.length=0;for(var e=0;e<t.length;++e)this.dataAry.push(t[e]);this._itemArrayCollection.replaceAll(this.dataAry),this._itemArrayCollection.refresh()},e.prototype.callFunc=function(e,i,n){if(n){var s=void 0;s=n.pos,1==e?(n.isSelected1=i,t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Items,s[0],i),this.setCheckBox(s[0],n)):(n.isSelected2=i,t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Items,s[1],i),this.setCheckBox(s[1],n)),this._itemArrayCollection.replaceItemAt(n,n.idx)}},e.prototype.setCheckBox=function(e,i){return t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Items,e,i)},e.prototype.destroy=function(){for(;this._list.numChildren>0;){var e=this._list.getChildAt(0);e.destroy(),e=null}t.ObjectPool.wipe(this.dataAry),this.dataAry.length=0,this.dataAry=null,this._itemArrayCollection.removeAll(),this._itemArrayCollection=null,this._scrollViewContainer.destory(),this._scrollViewContainer=null},e}();t.SetUpItemListView=e,__reflect(e.prototype,"app.SetUpItemListView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.state_1="bg_quyu_1",t.state_2="bg_quyu_2",t.skinName="SetUpListItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addChangeEvent(this.check_pick_up,this.onClickCheck),this.addChangeEvent(this.check_marked_red,this.onClickCheck)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.check_pick_up.removeEventListener(egret.TouchEvent.CHANGE,this.onClickCheck,this),this.check_marked_red.removeEventListener(egret.TouchEvent.CHANGE,this.onClickCheck,this)},i.prototype.onClickCheck=function(t){var e=0,i=0;switch(t.target){case this.check_pick_up:e=1,i=this.check_pick_up.selected?1:0;break;case this.check_marked_red:e=2,i=this.check_marked_red.selected?1:0}this.callFunc&&this.callFunc(e,i,this.data),console.log(t.target.selected)},i.prototype.dataChanged=function(){if(this.visible=null!=this.data,this.data){var e=this.data,i=e.idx%2==0?this.state_1:this.state_2;this.bg.$setTexture(RES.getRes(i)),this.txt_name.text=e.itemName,65533==e.itemId?this.txt_name.textColor=t.ColorUtil.SET_UP_ITEM_PURPLE:this.txt_name.textColor=t.ColorUtil.SET_UP_ITEM_YELLOW,this.callFunc=e.callFunc,this.check_pick_up.selected=1==e.isSelected1,this.check_marked_red.selected=1==e.isSelected2}},i.prototype.destroy=function(){this.$onRemoveFromStage(),this.data.callFunc&&(this.data.callFunc=null),this.data=null,this.callFunc&&(this.callFunc=null),this.removeChangeEvent(this.check_pick_up,this.onClickCheck),this.removeChangeEvent(this.check_marked_red,this.onClickCheck),t.DisplayUtils.removeFromParent(this)},i}(t.BaseItemRender);t.SetUpItemView=e,__reflect(e.prototype,"app.SetUpItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="SetUpProtectSkin",t}return __extends(i,e),i.prototype.initUI=function(){this.basicsLab=[{htmlText:t.LanguageUtils.language_SetUp_Text39,x:22,y:23}],this.dsph=new how.DSpriteSheet,e.prototype.initUI.call(this),this.hp1Input.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.hp2Input.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.observe(t.SettingMgr.ins().post_17_4,this.updateCheckBox),this.warnHp.label=t.LanguageUtils.language_SetUp_Text40,this.warnHp.setCallback(this,this.onClick),this.warnHp.dataObj={},this.warnHp2.label=t.LanguageUtils.language_SetUp_Text40,this.warnHp2.setCallback(this,this.onClick),this.warnHp2.dataObj={},this.updateCheckBox()},i.prototype.updateCheckBox=function(){var e=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1Val),i=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2Val);this.hp1Input.text=e+"",this.hp2Input.text=i+"",this.warnHp.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1State),this.warnHp2.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2State);var n=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1Item),s=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2Item),a=t.GlobalConfig.SkillConf[55];a&&this.hp1Drop.setLabel(a.name);var r=t.GlobalConfig.SkillsLevelConf[55][1];r&&this.hp1Drop.setIcon(r.skillName),(0>=n||58==n)&&(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1Item,55),t.SettingMgr.ins().send_17_5(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1Item,55));var o=t.GlobalConfig.SkillConf[58];o&&o.name&&this.hp2Drop.setLabel(o.name);var l=t.GlobalConfig.SkillsLevelConf[58][1];l&&l.skillName&&this.hp2Drop.setIcon(l.skillName),(0>=s||55==s)&&(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2Item,58),t.SettingMgr.ins().send_17_5(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2Item,58))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.warnHp:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1State,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1State,e.currentTarget.selected?1:0);break;case this.warnHp2:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2State,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2State,e.currentTarget.selected?1:0)}},i.prototype.onFocusOut=function(e){var i=t.EntityMgr.ins().getPlayerPropertySet(),n=e.currentTarget;if(i&&i.propSet)switch(n){case this.hp1Input:+this.hp1Input.text>i.propSet.getHp()&&(this.hp1Input.text=i.propSet.getHp()+""),+this.hp1Input.text<0&&(this.hp1Input.text="0"),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1Val,+this.hp1Input.text),t.SettingMgr.ins().send_17_5(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp1Val,+this.hp1Input.text);break;case this.hp2Input:+this.hp2Input.text>i.propSet.getHp()&&(this.hp2Input.text=i.propSet.getHp()+""),+this.hp2Input.text<0&&(this.hp2Input.text="0"),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2Val,+this.hp2Input.text),t.SettingMgr.ins().send_17_5(t.SetUpTypeTEnum.SetUp_Protection,t.SetUpEnum.SetUp_Hp2Val,+this.hp2Input.text)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.removeTouchEvent(this.warnHp,this.onClick),this.removeTouchEvent(this.warnHp2,this.onClick),this.hp1Input.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.hp2Input.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.hp1Drop.destructor(),this.hp2Drop.destructor(),this.dsph.dispose(),this.warnHp=null,this.warnHp2=null,this.hp2Input=null,this.hp1Input=null,this.hp1Drop=null,this.hp2Drop=null,this.removeObserve(),t.DisplayUtils.removeFromParent(this)},i}(t.SetUpBaseView);t.SetUpProtect=e,__reflect(e.prototype,"app.SetUpProtect")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.boxList.itemRenderer=t.SetUpRecycleItemCheckBox,this.addMouseMoveEvent(this.title,this.mouseMove),this.addMouseOverEvent(this.title,this.mouseMove)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.title.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.title.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else if(this.data.tips){var i=this.title.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,this.data.tips,{x:i.x+this.title.width/2,y:i.y+this.title.height/2}),i=null}},i.prototype.dataChanged=function(){if(this.data){this.title.text=this.data.title;var e=t.GlobalConfig.RecyclingSettingConfig[this.data.ID];if(e){var i=[];for(var n in e)t.ViewManager.ins().isCheckOpen(e[n].ShowLimit)&&i.push(e[n]);this.boxList.dataProvider=new eui.ArrayCollection(i)}}},i}(t.BaseItemRender);t.SetUpRecycleItem=e,__reflect(e.prototype,"app.SetUpRecycleItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.vipLv=0,t._canVip=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.box.setCallback(this,this.onclick),this.addTouchEvent(this.rect,this.onclick)},i.prototype.dataChanged=function(){this.data&&(this._canVip=!0,this.vipLv=t.VipData.ins().getMyVipLv(),this.data.VipLV?this.vipLv>=this.data.VipLV?this.rect.visible=!1:(this.rect.visible=!0,this._canVip=!1):this.rect.visible=!1,this.box.label=this.data.name,this.box.labelColor=t.ColorUtil.GOODS_COLOR[this.data.showQuality]?t.ColorUtil.GOODS_COLOR[this.data.showQuality]:15064527,this.box.dataObj=this.data,this.box.selected=this.getCheckBox(this.data.optionid-1),this.box.isCanClick=this._canVip)},i.prototype.getCheckBox=function(e){return t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Recycle,e)},i.prototype.setCheckBox=function(e,i){return t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Recycle,e,i)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.box.$onRemoveFromStage(),this.removeTouchEvent(this.rect,this.onclick)},i.prototype.onclick=function(e){switch(e.currentTarget){case this.box:if(this._canVip)t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Recycle,this.data.optionid,e.currentTarget.selected?1:0),this.setCheckBox(this.data.optionid-1,e.currentTarget.selected),t.BagMgr.ins().setBagRecycleSelect(this.data.itemlevel,e.currentTarget.selected),t.BagMgr.ins().postBagRecycleSelect();else{var i=t.VipData.ins().getVipDataByLv(this.data.VipLV),n=t.StringUtils.replace(t.LanguageUtils.language_Tips137,i.name);t.UserTips.ins().showUITips(n)}break;case this.rect:var s=t.VipData.ins().getVipDataByLv(this.data.VipLV),a=t.StringUtils.replace(t.LanguageUtils.language_Tips137,s.name);t.UserTips.ins().showUITips(a)}},i}(t.BaseItemRender);t.SetUpRecycleItemCheckBox=e,__reflect(e.prototype,"app.SetUpRecycleItemCheckBox")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.isMc=0,i.autoTaskId=-1,i._canSmart=!1,i.skinName="SetUpRecycleSkin",i.isMc=t,i}return __extends(i,e),i.prototype.stoMc=function(){t.TimerManager.ins().removeAll(this)},i.prototype.updateTask=function(){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoTask)&&!t.PlayerRoleAI.ins().isFinding&&0==t.GameMap.fubenID&&1==t.OtherMgr.ins().isLargeMapAct){var e=t.MainTaskMgr.ins().getTaskArr();
if(e&&e[0]&&(7==e[0].taskID&&e[0].taskState||11==e[0].taskID&&e[0].taskState||20==e[0].taskID&&e[0].taskState||27==e[0].taskID&&e[0].taskState||29==e[0].taskID&&e[0].taskState)){var i=t.GlobalConfig.TaskDisplayConfig[e[0].taskID][e[0].taskState];if(i&&1==i.taskstate){this.autoTaskId=i.id;var n=7==i.id?0:11==i.id?1:20==i.id?2:27==i.id?3:29==i.id?4:-1,s=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Recycle,n);t.MainTaskMgr.ins().postUpdateTask(1),this.mouseMc||(this.mouseMc=t.ObjectPool.pop("app.MovieClip"),this.mouseMc.scaleX=this.mouseMc.scaleY=1,this.mouseMc.touchEnabled=!1,this.effGrp.addChild(this.mouseMc)),s?(this.effGrp.x=343,this.effGrp.y=536,t.TimerManager.ins().remove(this.udpate6000,this),t.TimerManager.ins().isExists(this.udpate6000_2,this)||t.TimerManager.ins().doTimer(6e3,1,this.udpate6000_2,this)):(this.effGrp.x=7==i.id?37:11==i.id?207:20==i.id?377:27==i.id?547:29==i.id?37:-1,this.effGrp.y=29==i.id?151:115,t.TimerManager.ins().remove(this.udpate6000_2,this),t.TimerManager.ins().isExists(this.udpate6000,this)||t.TimerManager.ins().doTimer(6e3,1,this.udpate6000,this)),this.mouseMc.isPlaying||this.mouseMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_xsyd1",-1),10==i.taskname.type&&this.playOpenMc()}}}},i.prototype.playOpenMc=function(){this.openMc||(this.openMc=t.ObjectPool.pop("app.MovieClip"),this.openMc.touchEnabled=!1,this.openMc.x=3,this.openMc.y=-2,this.effGrp.addChild(this.openMc)),this.openMc.isPlaying||this.openMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_gjxbz",-1)},i.prototype.stopOpenMc=function(){this.openMc&&(this.openMc.destroy(),this.openMc=null)},i.prototype.udpate6000=function(){var e=7==this.autoTaskId?1:11==this.autoTaskId?2:20==this.autoTaskId?3:27==this.autoTaskId?4:29==this.autoTaskId?5:-1;-1!=e&&(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Recycle,e,!0),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Recycle,e-1,!0),this.updatePrivilege(),this.updateTask())},i.prototype.udpate6000_2=function(){this.doTimerClick()},Object.defineProperty(i.prototype,"visible",{set:function(i){e.prototype.$setVisible.call(this,i),t.TimerManager.ins().removeAll(this),i?(t.BagMgr.ins().postBagRecycleSelect(),t.TimerManager.ins().doTimer(1e3,0,this.updateTask,this),this.updateTask()):(this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null,this.stoMc()),this.stopOpenMc())},enumerable:!0,configurable:!0}),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.boxList.itemRenderer=t.SetUpRecycleItem,this.updatePrivilege(),t.MouseScroller.bind(this.boxScroller),this.addTouchEvent(this.rect,this.onclick),this.addTouchEvent(this.recycle,this.onclick),this.observe(t.DefaultMgr.ins().post_playerRectVisChange,this.updateRectVis);var i=t.GlobalConfig.BasicsSettingmConfig.previlege;i&&(this.smartRecycle.label=i.name,this.smartRecycle.setCallback(this,this.onclick),this.smartRecycle.dataObj=i),t.BagMgr.ins().postBagRecycleSelect();var n=this.setRectVis();this._canSmart=!n,this.rect.visible=n,this.smartRecycle.isCanClick=this._canSmart},i.prototype.doTimerClick=function(){if(this.stoMc(),this.addClsoe(),gamelib.DeviceUtils.IsMobile){var e=t.ViewManager.ins().getView("app.MainPhoneTaskWin");e&&(t.MainTaskMgr.isClickSetup=!1)}else t.MainTaskWin.isClickSetup=!1;t.MainTaskWin.isTaskSetUpMC=!1,t.BagManager.ins().batchRecycle()},i.prototype.updateRectVis=function(){var e=this.setRectVis();this._canSmart=!e,this.rect.visible=e,this.smartRecycle.isCanClick=this._canSmart,e&&(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoRecycle,1),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoRecycle,!0))},i.prototype.setRectVis=function(){var e=!1,i=t.EntityMgr.ins().getPayer;return i&&i.propSet&&(e=1==i.propSet.getRecoverState()),e?(this.smartRecycle.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoRecycle),!1):!0},i.prototype.updatePrivilege=function(){var e,i=[],n="",s="",a=t.GlobalConfig.RecyclingSettingConfig;for(var r in a){var o=a[r];for(var l in o){e=o[l].id,n=o[l].title,s=o[l].Titletips;break}i.push({ID:e,title:n,tips:s})}this.boxList.dataProvider=new eui.ArrayCollection(i),t.BagMgr.ins().delBagRecycleSelect();for(var l in a){var h=a[l];for(var p in h){var u=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Recycle,h[p].optionid-1);t.BagMgr.ins().setBagRecycleSelect(h[p].itemlevel,u)}}},i.prototype.addClsoe=function(){this.mouseMc&&(this.clseGroup.visible=!0,this.addTouchEvent(this.clseGroup,this.closeTime),this.effGrp.x=742,this.effGrp.y=-32,t.TimerManager.ins().isExists(this.closeTime,this)||t.TimerManager.ins().doTimer(6e3,1,this.closeTime,this))},i.prototype.closeTime=function(){this.clseGroup.visible=!1,this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null,this.stoMc(),t.ViewManager.ins().close(t.SetUpView)),this.stopOpenMc()},i.prototype.onclick=function(e){switch(e.currentTarget){case this.smartRecycle:this._canSmart?(t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_Basics,e.data.pos+7,e.currentTarget.selected?1:0),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_Basics,e.data.pos+7,e.currentTarget.selected)):t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt54);break;case this.rect:t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt54);break;case this.recycle:if(t.SoundManager.ins().playEffect(t.SoundUtil.GOLD),this.stoMc(),this.addClsoe(),gamelib.DeviceUtils.IsMobile){var i=t.ViewManager.ins().getView("app.MainPhoneTaskWin");i&&(t.MainTaskMgr.isClickSetup=!1)}else t.MainTaskWin.isClickSetup=!1;t.MainTaskWin.isTaskSetUpMC=!1;var n=t.GlobalConfig.BagRemainConfig[5];if(n){var s=t.BagMgr.ins().getBagCapacity(n.bagremain);s?t.BagManager.ins().batchRecycle():t.UserTips.ins().showUITips(n.bagtips)}break;default:e.data}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc(),this.removeTouchEvent(this.clseGroup,this.closeTime),this.stoMc(),t.MouseScroller.unbind(this.boxScroller),this.smartRecycle.$onRemoveFromStage(),this.removeTouchEvent(this.rect,this.onclick),this.removeTouchEvent(this.recycle,this.onclick),this.removeObserve()},i}(t.SetUpBaseView);t.SetUpRecycleView=e,__reflect(e.prototype,"app.SetUpRecycleView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="SetUpSystemSkin",t}return __extends(i,e),i.prototype.initUI=function(){this.basicsLab.push({text:t.LanguageUtils.language_SetUp_Text16,x:22,y:23}),this.basicsLab.push({text:t.LanguageUtils.language_SetUp_Text61,x:39,y:250}),gamelib.DeviceUtils.IsMobile&&(this.rockerImg.visible=!0,this.basicsLab.push({text:t.LanguageUtils.language_SetUp_Text67,x:39,y:370})),e.prototype.initUI.call(this),this.observe(t.SettingMgr.ins().post_17_4,this.updateCheckBox),this.openSound.label=t.LanguageUtils.language_SetUp_Text14,this.openSound.setCallback(this,this.onclick),this.openSound.dataObj=t.GlobalConfig.SystemSettingmConfig[1],this.openBgSound.label=t.LanguageUtils.language_SetUp_Text15,this.openBgSound.setCallback(this,this.onclick),this.openBgSound.dataObj=t.GlobalConfig.SystemSettingmConfig[2],this.highQuality.label=t.LanguageUtils.language_Common_151,this.highQuality.setCallback(this,this.onclick),this.highQuality.dataObj=t.GlobalConfig.SystemSettingmConfig[3],this.lowQuality.label=t.LanguageUtils.language_Common_152,this.lowQuality.setCallback(this,this.onclick),this.lowQuality.dataObj=t.GlobalConfig.SystemSettingmConfig[4],this.swimShow.label=t.LanguageUtils.language_Common_153,this.swimShow.setCallback(this,this.onclick),this.swimShow.dataObj=t.GlobalConfig.SystemSettingmConfig[5],this.scale1.label=t.LanguageUtils.language_Common_158,this.scale1.setCallback(this,this.onclick),this.scale1.dataObj=t.GlobalConfig.SystemSettingmConfig[6],this.scale2.label=t.LanguageUtils.language_Common_159,this.scale2.setCallback(this,this.onclick),this.scale2.dataObj=t.GlobalConfig.SystemSettingmConfig[7],this.scale3.label=t.LanguageUtils.language_Common_160,this.scale3.setCallback(this,this.onclick),this.scale3.dataObj=t.GlobalConfig.SystemSettingmConfig[8],this.closeEff.label=t.LanguageUtils.language_Common_183,this.closeEff.setCallback(this,this.onclick),this.closeEff.dataObj=t.GlobalConfig.SystemSettingmConfig[9],this.rocker1.label=t.LanguageUtils.language_SetUp_Text68,this.rocker1.setCallback(this,this.onclick),this.rocker1.dataObj=t.GlobalConfig.SystemSettingmConfig[10],this.rocker2.label=t.LanguageUtils.language_SetUp_Text69,this.rocker2.setCallback(this,this.onclick),this.rocker2.dataObj=t.GlobalConfig.SystemSettingmConfig[11],this.updateCheckBox()},i.prototype.updateCheckBox=function(){this.openSound.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Sound),this.openBgSound.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_BgSound),this.highQuality.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_HighQuality),this.lowQuality.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_LowQuality),this.swimShow.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_SwimShow),this.scale1.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale1),this.scale2.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale2),this.scale3.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale3),this.closeEff.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_closeEff),gamelib.DeviceUtils.IsMobile?(this.rocker1.visible=!0,this.rocker2.visible=!0,this.rocker1.selected=!t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Rocker),this.rocker2.selected=t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Rocker)):(this.rocker1.visible=!1,this.rocker2.visible=!1)},i.prototype.onclick=function(e){switch(e.currentTarget){case this.openSound:t.SoundManager.ins().setEffectOn(e.currentTarget.selected),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Sound,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Sound,e.currentTarget.selected?1:0);break;case this.openBgSound:t.SoundManager.ins().setBgOn(e.currentTarget.selected),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_BgSound,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_BgSound,e.currentTarget.selected?1:0);break;case this.highQuality:t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_HighQuality)?this.highQuality.selected=!e.currentTarget.selected:(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_HighQuality,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_HighQuality,e.currentTarget.selected?1:0),t.StageUtils.ins().setFrameRate(60),this.lowQuality.selected=!e.currentTarget.selected,this.swimShow.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_LowQuality,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_LowQuality,e.currentTarget.selected?0:1),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_SwimShow,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_SwimShow,e.currentTarget.selected?0:1));break;case this.lowQuality:t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_LowQuality)?this.lowQuality.selected=!e.currentTarget.selected:(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_LowQuality,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_LowQuality,e.currentTarget.selected?1:0),t.StageUtils.ins().setFrameRate(30),this.highQuality.selected=!e.currentTarget.selected,this.swimShow.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_HighQuality,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_HighQuality,e.currentTarget.selected?0:1),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_SwimShow,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_SwimShow,e.currentTarget.selected?0:1));break;case this.swimShow:t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_SwimShow)?this.swimShow.selected=!e.currentTarget.selected:(t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_SwimShow,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_SwimShow,e.currentTarget.selected?1:0),t.StageUtils.ins().setFrameRate(10),this.lowQuality.selected=!e.currentTarget.selected,this.highQuality.selected=!e.currentTarget.selected,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_LowQuality,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_LowQuality,e.currentTarget.selected?0:1),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_HighQuality,!e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_HighQuality,e.currentTarget.selected?0:1));break;case this.scale1:t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale1)||(t.StageUtils.ins().setScale(1),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale1,!0),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale1,1),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale2,!1),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale2,0),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale3,!1),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale3,0),this.scale1.selected=!0,this.scale2.selected=!1,this.scale3.selected=!1,t.ViewManager.gamescene.updateScale());break;case this.scale2:t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale2)||(t.StageUtils.ins().setScale(1.25),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale1,!1),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale1,0),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale2,!0),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale2,1),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale3,!1),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale3,0),this.scale1.selected=!1,this.scale2.selected=!0,this.scale3.selected=!1,t.ViewManager.gamescene.updateScale());break;case this.scale3:t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale3)||(t.StageUtils.ins().setScale(1.5),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale1,!1),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale1,0),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale2,!1),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale2,0),t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale3,!0),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_scale3,1),this.scale1.selected=!1,this.scale2.selected=!1,this.scale3.selected=!0,t.ViewManager.gamescene.updateScale());break;case this.closeEff:t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_closeEff,e.currentTarget.selected),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_closeEff,e.currentTarget.selected?1:0);case this.rocker1:this.rocker1.selected=!0,this.rocker2.selected=!1,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Rocker,!1),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Rocker,0),t.SettingMgr.ins().updateRocker();break;case this.rocker2:this.rocker1.selected=!1,this.rocker2.selected=!0,t.SettingMgr.ins().setcheckBox(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Rocker,!0),t.SettingMgr.ins().send_17_4(t.SetUpTypeTEnum.SetUp_System,t.SetUpEnum.SetUp_Type_Rocker,1),t.SettingMgr.ins().updateRocker()}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this),this.openSound.$onRemoveFromStage(),this.openBgSound.$onRemoveFromStage(),this.removeTouchEvent(this.openSound,this.onclick),this.removeTouchEvent(this.openBgSound,this.onclick),this.highQuality.$onRemoveFromStage(),this.lowQuality.$onRemoveFromStage(),this.removeTouchEvent(this.highQuality,this.onclick),this.removeTouchEvent(this.lowQuality,this.onclick),this.swimShow.$onRemoveFromStage(),this.scale1.$onRemoveFromStage(),this.scale2.$onRemoveFromStage(),this.scale3.$onRemoveFromStage(),this.closeEff.$onRemoveFromStage(),this.removeTouchEvent(this.swimShow,this.onclick),this.removeTouchEvent(this.scale1,this.onclick),this.removeTouchEvent(this.scale2,this.onclick),this.removeTouchEvent(this.scale3,this.onclick),this.removeTouchEvent(this.closeEff,this.onclick),this.removeObserve(),this.openSound=null,this.openBgSound=null,this.highQuality=null,this.lowQuality=null,this.swimShow=null,t.DisplayUtils.removeFromParent(this)},i}(t.SetUpBaseView);t.SetUpSystem=e,__reflect(e.prototype,"app.SetUpSystem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.basicView=null,i.itemView=null,i.drugsView=null,i.protectView=null,i.aiView=null,i.sysemView=null,i.recycleView=null,i.helpBtn=null,i.tabAry=[{name:"基础"},{name:"物品"},{name:"药品"},{name:"保护"},{name:"挂机"},{name:"回收"},{name:"系统"}],i.recycleMc=0,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.name="SetUpView",i.skinName="SetUpSkin",i}return __extends(i,e),Object.defineProperty(i.prototype,"getUpViewIdx",{get:function(){return this.tabBar?this.tabBar.selectedIndex:0},enumerable:!0,configurable:!0}),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.resetButton.label=t.LanguageUtils.language_SetUp_Btn,this.addTouchEndEvent(this.resetButton,this.onReset),this.pagAry=["basicView","itemView","drugsView","protectView","aiView","recycleView","sysemView"],this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_SetUp_Title),this.tabBar.itemRenderer=t.TradeLineTabView,this.tabBar.dataProvider=new eui.ArrayCollection(this.tabAry),this.addChangeEvent(this.tabBar,this.onClick)},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]?(t[1]&&(this.recycleMc=t[1]),this.tabBar.selectedIndex=t[0],this.setTabData(t[0])):(this.tabBar.selectedIndex=0,this.setTabData(0))},i.prototype.onClick=function(t){switch(t.currentTarget){case this.tabBar:this.setTabData(this.tabBar.selectedIndex)}},i.prototype.updatePag=function(){for(var t=0;t<this.pagAry.length;t++)t==this.tabBar.selectedIndex?(this[this.pagAry[t]]||this.openPag(this.pagAry[t]),this[this.pagAry[t]].visible=!0):this[this.pagAry[t]]&&(this[this.pagAry[t]].visible=!1)},i.prototype.openPag=function(e){switch(e){case"basicView":this.basicView=new t.SetUpBasics,this.pageGrp.addChild(this.basicView);break;case"itemView":this.itemView=new t.SetUpItem,this.pageGrp.addChild(this.itemView);break;case"drugsView":this.drugsView=new t.SetUpDrugs,this.pageGrp.addChild(this.drugsView);break;case"protectView":this.protectView=new t.SetUpProtect,this.pageGrp.addChild(this.protectView);break;case"aiView":this.aiView=new t.SetUpAI,this.pageGrp.addChild(this.aiView);break;case"sysemView":this.sysemView=new t.SetUpSystem,this.pageGrp.addChild(this.sysemView);break;case"recycleView":this.recycleView=new t.SetUpRecycleView(this.recycleMc),this.pageGrp.addChild(this.recycleView)}},i.prototype.setTabData=function(t){this.updatePag(),5==t?this.resetButton.visible=!1:this.resetButton.visible=!0,this.isShowHelp(t),this.bg2.height=1==t?500:568},i.prototype.isShowHelp=function(t){5==t?(this.helpBtn.visible=!0,this.helpBtn.ruleId=71):1>t||t>3?this.helpBtn.visible=!1:(this.helpBtn.ruleId=t+26,this.helpBtn.visible=!0)},i.prototype.onReset=function(){t.SettingMgr.ins().send_17_6(this.tabBar.selectedIndex+1)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null;for(var s=0;s<this.pagAry.length;s++)this[this.pagAry[s]]&&this[this.pagAry[s]].close();t.BagMgr.ins().postBagRecycleSelect(),this.basicView=null,this.itemView=null,this.drugsView=null,this.protectView=null,this.aiView=null,this.sysemView=null,this.recycleView=null,t.ObjectPool.wipe(this.tabAry),this.tabAry.length=0,this.tabAry=null,this.helpBtn.$onRemoveFromStage(),this.removeTouchEndEvent(this.resetButton,this.onReset),this.tabBar.itemRenderer=null,this.tabBar.dataProvider=null,this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onClick,this),this.pageGrp=null,this.pagAry=null,this.removeFromParent()},i}(t.BaseEuiView);t.SetUpView=e,__reflect(e.prototype,"app.SetUpView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._actID=13,i.isHaveGuild=!1,i.cdTime=0,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER2),i.skinName="ShaChengStarcraftWinSkin",i.touchEnabled=!1,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabList.itemRenderer=t.TradeLineTabView,this.actReward.itemRenderer=t.ItemBase,this.dukeRewadr.itemRenderer=t.ItemBase,this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System90)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._actID=t.GlobalData.sectionOpenDay<=3?41:t.GameSocket.IsCrossService?26:13,this.roleInnerModel0=new t.RoleInnerModel(this.modelGroup0),this.roleInnerModel1=new t.RoleInnerModel(this.modelGroup1),this.roleInnerModel2=new t.RoleInnerModel(this.modelGroup2),this.addTouchEvent(this.receliveBtn,this.onClick),this.addTouchEvent(this.goBtn,this.onClick),this.tabList.dataProvider=new eui.ArrayCollection([{name:t.LanguageUtils.language_System90},{name:t.LanguageUtils.language_System91}]),this.tabList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.tabList.selectedIndex=0,this.observe(t.GuildMgr.ins().post_10_26,this.updateName),this.observe(t.OtherMgr.ins().post_26_66,this.updateTab1Info),this.appoint1.visible=this.appoint2.visible=this.name0.visible=this.name1.visible=this.name2.visible=!1,t.GuildMgr.ins().send_10_25(),this.setActTimeCD(),t.OtherMgr.ins().send_26_66(),this.setTabGrp2Info(),this.updateList(0)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.receliveBtn:t.GuildMgr.ins().send_10_24();break;case this.goBtn:var i=t.ActvityMgr.ins().getActivityConfigById(this._actID);i&&i.toflyid&&(t.MoveMgr.ins().s_1_5(i.toflyid.FlyTable,i.toflyid.Flyid),t.ViewManager.ins().close(this))}},i.prototype.updateTab1Info=function(t){var e=0;this.isHaveGuild&&(this.appoint1.visible=this.appoint2.visible=!0);for(var i=0;i<t.length;i++){var n=t[i];4==n.type?n.otherInfo&&(this.imgModel0.visible=!1,this.name0.visible=!0,this.name0.text=n.otherInfo.name,this.roleInnerModel0.setOtherData(n.otherInfo.equips,n.otherInfo)):3==n.type&&n.otherInfo&&(e++,this["imgModel"+e].visible=!1,this["name"+e].text=n.otherInfo.name,this["name"+e].visible=!0,this["appoint"+e].visible=!1,this["roleInnerModel"+e].setOtherData(n.otherInfo.equips,n.otherInfo))}},i.prototype.setActTimeCD=function(){var e=t.GlobalConfig.ActivityNoticeConfig[1][this._actID];if(!e||t.ViewManager.ins().isCheckOpen(e.isOpenNeed)){var i=t.ActvityMgr.ins().getActivityInfo(this._actID);t.ActvityMgr.ins().getActivityConfigById(this._actID);if(i&&i.redDot)t.TimerManager.ins().remove(this.updateCDTime,this),this.actTimeLab.textFlow=t.TextFlowMaker.generateTextFlow("|C:0x28ee01&T:"+t.LanguageUtils.language_Common_172+"|");else{if(e&&e.TimeDetail)for(var n in e.TimeDetail){var s=e.TimeDetail[n],a=s.StartTime,r=new Date(t.GlobalData.serverTime),o=r.getHours(),l=r.getMinutes(),h=r.getSeconds(),p=r.getDay(),u=0,c=0;if(s.type){var g=a.split(":");if(+g[0]>o||+g[0]==o&&+g[1]>l){if(u=o*t.DateUtils.MS_PER_HOUR+l*t.DateUtils.MS_PER_MINUTE+1e3*h,c=+g[0]*t.DateUtils.MS_PER_HOUR+ +g[1]*t.DateUtils.MS_PER_MINUTE,c>u?this.cdTime=c-u:u>c&&(this.cdTime=t.DateUtils.MS_PER_DAY-(u-c)),this.cdTime>0){this.cdTime+=egret.getTimer(),this.updateCDTime(),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this);break}}else t.TimerManager.ins().remove(this.updateCDTime,this),this.actTimeLab.text=""}else{var d=a.split("-"),m=d[1].split(":");if(0==p&&7!=+d[0]){this.actTimeLab.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt110,"3天"));break}if(+d[0]==p&&(+m[0]>o||+m[0]==o&&+m[1]>l)||0==p&&7==+d[0]&&(+m[0]>o||+m[0]==o&&+m[1]>l)){if(u=o*t.DateUtils.MS_PER_HOUR+l*t.DateUtils.MS_PER_MINUTE+1e3*h,c=+m[0]*t.DateUtils.MS_PER_HOUR+ +m[1]*t.DateUtils.MS_PER_MINUTE,c>u?this.cdTime=c-u:u>c&&(this.cdTime=t.DateUtils.MS_PER_DAY-(u-c)),this.cdTime>0){this.cdTime+=egret.getTimer(),this.updateCDTime(),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this);break}}else{if(+d[0]==p&&(m[0]<o||m[0]==o&&+m[1]<l)){var f=3==p?"3":6==p?"4":0==p?"7":"";this.actTimeLab.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt110,f+"天"));break}if(+d[0]>p){this.actTimeLab.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt110,+d[0]-p+"天"));break}}}}}}else if(e.isOpenNeed.openDay){var v=e.isOpenNeed.openDay-t.GlobalData.sectionOpenDay;this.actTimeLab.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt110,v+"天"))}},i.prototype.updateCDTime=function(){var e=this.cdTime-egret.getTimer(),i=t.DateUtils.getShaBaKeCD(e);this.actTimeLab.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt110,i)),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.actTimeLab.text="")},i.prototype.updateName=function(e){""==e[1]?this.guildName.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Omission_txt109+"|C:0xe50000&T:"+t.LanguageUtils.language_Omission_txt89+"|"):(this.isHaveGuild=!0,this.guildName.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Omission_txt109+"|C:0xeee104&T:"+e[1]+"|"))},i.prototype.setTabGrp2Info=function(){var e=t.ActvityMgr.ins().getActivityConfigById(this._actID);e&&(this.actTimeLab2.textFlow=t.TextFlowMaker.generateTextFlow(e.Ntipstext_2),this.actDescLab.textFlow=t.TextFlowMaker.generateTextFlow(e.Ntipstext_3),this.actReward.dataProvider=new eui.ArrayCollection(e.rewards),this.dukeRewadr.dataProvider=new eui.ArrayCollection(e.czrewards))},i.prototype.onChange=function(t){this.tabList.selectedIndex=t.itemIndex,this.updateList(t.itemIndex)},i.prototype.updateList=function(t){0==t?(this.tabGrp0.visible=!0,this.tabGrp1.visible=!1):1==t&&(this.tabGrp0.visible=!1,this.tabGrp1.visible=!0)},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.roleInnerModel0.destory(),this.roleInnerModel1.destory(),this.roleInnerModel2.destory(),this.removeTouchEvent(this.receliveBtn,this.onClick),this.removeTouchEvent(this.goBtn,this.onClick),t.TimerManager.ins().remove(this.updateCDTime,this),this.tabList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this)},i}(t.BaseEuiView);t.ShaChengStarcraftWin=e,__reflect(e.prototype,"app.ShaChengStarcraftWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.shopList=[],i.npcCog=0,i.sysId=t.PackageID.Shop,i.regNetMsg(t.ShopProtocol.sc_responseShopList,i.post_onReceiveshopList),i.regNetMsg(t.ShopProtocol.sc_responseBuyGood,i.post_onReceivesBuyGoods),i.regNetMsg(t.ShopProtocol.sc_responseOpenShop,i.post_onReceivesOpenShopView),i}return __extends(i,e),i.prototype.post_onReceivesOpenShopView=function(e){var i=e.readByte(),n=e.readByte();this.npcCog=e.readNumber(),t.ViewManager.ins().open(t.ShopView,i,n,this.npcCog)},i.prototype.post_onReceiveshopList=function(e){this.shopType=e.readByte(),this.shopSmallType=e.readByte();var i,n=e.readByte();this.shopList=[];for(var s=0;n>s;s++)i=new t.ShopData,i.shopType=this.shopType,i.shopSmallType=this.shopSmallType,i.shopId=e.readInt(),i.buyCountNum=e.readByte(),i.buyLimitNum=e.readInt(),i.buySell=e.readByte(),i.isLimit=e.readByte(),this.shopList.push(i)},i.prototype.getShopList=function(){var e=[],i=0,n=t.EntityMgr.ins().getPayer;n&&n.propSet&&(i=n.propSet.getGuildLevel());for(var s=t.GlobalConfig.ShopConfig[this.shopType][this.shopSmallType],a=0;a<this.shopList.length;a++){var r=s[this.shopList[a].shopId];r&&r.guildLevel&&r.guildLevel>i||e.push(this.shopList[a])}return e.sort(this.shopSort),e},i.prototype.shopSort=function(t,e){return t.shopId>e.shopId?1:-1},i.prototype.post_onReceivesBuyGoods=function(t){var e=t.readByte(),i=t.readByte(),n=t.readInt(),s=t.readInt();return[e,i,n,s]},i.prototype.sendShopList=function(e,i){var n=this.getBytes(t.ShopProtocol.cs_requestShopList);n.writeByte(e),n.writeByte(i),this.sendToServer(n)},i.prototype.sendBuyShop=function(e,i,n,s,a){void 0===a&&(a=1);var r=this.getBytes(t.ShopProtocol.cs_requestBuyGood);r.writeByte(e),r.writeByte(i),r.writeByte(n),r.writeNumber(s),r.writeInt(a),this.sendToServer(r)},i.prototype.getShopTabList=function(e){var i=t.GlobalConfig.ShoptagConfig[e],n=[];for(var s in i)i[Number(s)]&&t.ViewManager.ins().isCheckOpen(i[s].openlimit)&&!t.ViewManager.ins().isCheckClose(i[s].closelimit)&&n.push(i[s]);return n},i.ins=function(){return e.ins.call(this)},i}(t.BaseSystem);t.ShopMgr=e,__reflect(e.prototype,"app.ShopMgr")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.findItemIcon=function(t,i,n){var s=e.findShopCnf(t,i,n);if(s){var a=e.convertItemIcon({type:s.shop.type,id:s.shop.id});return a}return null},e.convertItemIcon=function(e){if(0==e.type){var i=t.GlobalConfig.StdItems[e.id];return i}var n=t.GlobalConfig.NumericalIcon[e.type];return n},e.findShopCnf=function(e,i,n){var s=t.GlobalConfig.ShopConfig,a=s[i][n];return a&&a[e]},e}();t.ShopConfData=e,__reflect(e.prototype,"app.ShopConfData")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t}();t.ShopData=e,__reflect(e.prototype,"app.ShopData");var i;!function(t){t[t.cs_requestShopList=1]="cs_requestShopList",t[t.cs_requestBuyGood=2]="cs_requestBuyGood",t[t.sc_responseShopList=1]="sc_responseShopList",t[t.sc_responseBuyGood=2]="sc_responseBuyGood",t[t.sc_responseOpenShop=3]="sc_responseOpenShop"}(i=t.ShopProtocol||(t.ShopProtocol={}));var n=function(){function t(){}return t}();t.ShopBuyData=n,__reflect(n.prototype,"app.ShopBuyData");
var s;!function(t){t[t.Shop=1]="Shop",t[t.ShopGuild=2]="ShopGuild",t[t.GroceryStore=3]="GroceryStore"}(s=t.ShopTypes||(t.ShopTypes={}));var a;!function(t){t[t.ShopHot=101]="ShopHot",t[t.ShopSale=102]="ShopSale"}(a=t.ShopHotTypes||(t.ShopHotTypes={}));var r;!function(t){t[t.Level=1]="Level",t[t.ZhuanshenLv=2]="ZhuanshenLv",t[t.KaifuDay=3]="KaifuDay"}(r=t.ShopSmallTypes||(t.ShopSmallTypes={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.itemID=0,i.shopId=0,i.currentNum=1,i.maxNum=1,i.shopType=0,i.shopSmallType=0,i.limitNum=0,i.skinName="ShopBatchBuySkin",i.name="ShopBatchBuyView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setCurrentState("default5"),this.dragDropUI.setParent(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.shopId=e[0],this.shopType=e[1],this.shopSmallType=e[2],this.limitNum=e[3]),t.MouseScroller.bind(this.scroller),this.addTouchEvent(this.btnAdd,this.onClick),this.addTouchEvent(this.btnAddadd,this.onClick),this.addTouchEvent(this.btnBuy,this.onClick),this.addTouchEvent(this.btnCannel,this.onClick),this.addTouchEvent(this.btnLess,this.onClick),this.addTouchEvent(this.btnLessLess,this.onClick),this.initViewData()},i.prototype.initViewData=function(){var e=t.ShopConfData.findShopCnf(this.shopId,this.shopType,this.shopSmallType),i=e.shop.id;this.maxNum=this.limitNum>-1?this.limitNum:e.Maxbatchbuy,this.lbNum.text="1";var n=5395542;if(e){this.itemData.data=e.shop,this.icon_Itemprite.source=t.ShopConfData.convertItemIcon(e.price).icon.toString(),this.icon_item.source=t.ShopConfData.convertItemIcon(e.price).icon.toString(),this.lbPrice.text=e.price.count+"",this.lbCount.text=e.price.count*Number(this.lbNum.text)+"";var s=t.CurrencyUtils.getCurrencyNameIcon(e.shop.type,e.shop.id);this.itemName.text=s?s[0]:"",this.itemDesc.text=s?s[2]:""}if(e.shop&&0==e.shop.type&&0!=i){var s=t.GlobalConfig.StdItems[i];s&&(n=t.ColorUtil.GOODS_COLOR[s.showQuality],this.itemName.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+n+"&T:"+s.name+"|"),this.itemDesc.textFlow=t.TextFlowMaker.generateTextFlow(s.desc))}},i.prototype.updateMoneyCount=function(){this.lbCount.text=Number(this.lbPrice.text)*Number(this.lbNum.text)+""},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnAdd:this.add(1);break;case this.btnAddadd:this.add(10);break;case this.btnBuy:this.onBuy();break;case this.btnCannel:t.ViewManager.ins().close(this);break;case this.btnLess:this.sub(1);break;case this.btnLessLess:this.sub(10)}},i.prototype.onBuy=function(){var e=Number(this.lbNum.text);t.ShopMgr.ins().sendBuyShop(this.shopType,this.shopSmallType,this.shopId,t.ShopMgr.ins().npcCog,e)},i.prototype.add=function(t){var e=(Number(this.lbNum.text),Math.min(Number(this.lbNum.text)+t,this.maxNum));this.lbNum.text=e+"",this.updateMoneyCount()},i.prototype.sub=function(t){var e=(Number(this.lbNum.text),Math.max(Number(this.lbNum.text)-t,1));this.lbNum.text=e+"",this.updateMoneyCount()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.btnAdd,this.onClick),this.removeTouchEvent(this.btnAddadd,this.onClick),this.removeTouchEvent(this.btnBuy,this.onClick),this.removeTouchEvent(this.btnCannel,this.onClick),this.removeTouchEvent(this.btnLess,this.onClick),this.removeTouchEvent(this.btnLessLess,this.onClick),t.MouseScroller.unbind(this.scroller)},i}(t.BaseEuiView);t.ShopBatchBuyView=e,__reflect(e.prototype,"app.ShopBatchBuyView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="Btn14Skin",t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){this.visible=null!=this.data,this.iconDisplay&&this.data.source&&(this.iconDisplay.source=this.data.source),this.labelDisplay&&this.data.text&&(this.labelDisplay.text=this.data.text)},i.prototype.destroy=function(){this.iconDisplay=null,this.labelDisplay=null,t.DisplayUtils.removeFromParent(this)},i}(eui.ItemRenderer);t.ShopBuyBtnView=e,__reflect(e.prototype,"app.ShopBuyBtnView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ShopHotViewSkin",t}return __extends(i,e),i.prototype.setState=function(t){t?this.currentState="odd":this.currentState="dual"},i.prototype.setOddNum=function(e){return e>100?(this.hotIon0.visible=!0,e==t.ShopHotTypes.ShopHot?this.hotIon0.source="shop_rexiao":e==t.ShopHotTypes.ShopSale&&(this.hotIon0.source="shop_xianshi"),this.oddNum.visible=!1,void(this.oddText.visible=!1)):(this.oddNum.source="shop_zhekou_"+e/10,this.hotIon0.visible=!1,this.oddNum.visible=!0,void(this.oddText.visible=!0))},i.prototype.setDualNum=function(t,e){this.dualNum_0.source="shop_zhekou_"+t,this.dualNum_1.source="shop_zhekou_"+e},i.prototype.destroy=function(){this.hotOddGp=null,this.hotIon1=null,this.dualNum_0=null,this.dualNum_1=null,this.dualText=null,this.hotDualGp=null,this.hotIon0=null,this.oddNum=null,this.oddText=null,t.DisplayUtils.removeFromParent(this)},i}(t.BaseView);t.ShopHotView=e,__reflect(e.prototype,"app.ShopHotView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.batchbuy=0,i.item=new Object,i.hot=new t.ShopHotView,i.buyBtn=new t.ShopBuyBtnView,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.hot.x=this.hot.y=0,this.buyBtn.x=101,this.buyBtn.y=85,this.addChild(this.hot),this.addChild(this.buyBtn),this.addTouchEvent(this.buyBtn,this.onClick),this.addMouseMoveEvent(this.goodsItem,this.mouseMove),this.addMouseOverEvent(this.goodsItem,this.mouseMove)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget;if(i&&this.itemId){var n=i.localToGlobal(),s=t.GlobalConfig.StdItems[this.itemId];if(this.item.type>0)return;if(s){var a=t.TipsType.TIPS_EQUIP;a=s.fashionTips?t.TipsType.TIPS_FASHION:t.TipsType.TIPS_EQUIP,t.UserTips.ins().shouwTips(e.target,a,s,{x:n.x+i.width/2,y:n.y+i.height/2})}n=null}i=null}},i.prototype.onClick=function(){var e=this;if(this.batchbuy){var i=""==this.numLb.text?-1:Number(this.numLb.text);return 0==i?void t.UserTips.ins().showUITips(t.LanguageUtils.language_Shop_Limit_Txt):void t.ViewManager.ins().open(t.ShopBatchBuyView,this.itemData.shopId,this.itemData.shopType,this.itemData.shopSmallType,i)}var n="|C:0xFFFFFF&T:"+t.LanguageUtils.language_Shop_Buy_Item_txt+"|C:0xDBC789&T:"+t.CommonUtils.overLength(this.item.price)+this.item.moneyType+"|C:0xFFFFFF&T:"+t.LanguageUtils.language_System45+"|C:0xDBC789&T:"+this.item.name+"*"+t.CommonUtils.overLength(this.item.count),s=t.TextFlowMaker.generateTextFlow(n);3==this.item.id||4==this.item.id?t.CautionView.show(s,function(){t.ShopMgr.ins().sendBuyShop(e.itemData.shopType,e.itemData.shopSmallType,e.itemData.shopId,t.ShopMgr.ins().npcCog)},this):t.ShopMgr.ins().sendBuyShop(this.itemData.shopType,this.itemData.shopSmallType,this.itemData.shopId,t.ShopMgr.ins().npcCog)},i.prototype.dataChanged=function(){if(this.itemData=this.data,null!=this.itemData){0==this.itemData.buyLimitNum?(this.numTxt.visible=this.numLb.visible=!1,this.numLb.text=""):(this.numTxt.text=t.LanguageUtils.language_Common_62,this.numTxt.visible=this.numLb.visible=!0,-1==this.itemData.buyLimitNum?this.numLb.text="":this.numLb.text=""+(this.itemData.buyLimitNum-this.itemData.buyCountNum));var e=t.ShopConfData.findShopCnf(this.itemData.shopId,this.itemData.shopType,this.itemData.shopSmallType);this.buyBtn.labelDisplay.text=e&&t.CommonUtils.overLength(e.price.count);var i=e&&{type:e.price.type,id:e.price.id};this.buyBtn.iconDisplay.source=e&&t.ShopConfData.convertItemIcon(i).icon.toString(),this.countLb.text=e&&t.CommonUtils.overLength(e.shop.count);var n=t.ShopConfData.findItemIcon(this.itemData.shopId,this.itemData.shopType,this.itemData.shopSmallType);if(this.item.moneyType=e&&t.GlobalConfig.NumericalIcon[e.price.type].name,this.item.id=e&&t.GlobalConfig.NumericalIcon[e.price.type].id,this.item.price=e&&e.price.count,this.item.count=e&&e.shop.count,this.item.type=e&&e.shop.type,this.batchbuy=e.batchbuy,0==this.itemData.buySell)this.hot.visible=!1;else if(this.hot.visible=!0,this.itemData.buySell=this.itemData.buySell<10?10:this.itemData.buySell,this.itemData.buySell%10==0||this.itemData.buySell>=100)this.hot.setState(!0),this.hot.setOddNum(this.itemData.buySell);else{this.hot.setState(!1);var s=this.itemData.buySell.toString().split("");this.hot.setDualNum(s[0],s[1])}n?(this.itemId=n.id,this.goodsItem.source=n.icon.toString(),this.shopItemNameLb.text=n.name,this.item.name=n.name):this.shopItemNameLb.text=t.LanguageUtils.language_Tips83,e=null,t.ObjectPool.wipe(i),n=null}},i.prototype.destroy=function(){for(this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.goodsItem.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.goodsItem.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.hot.destroy(),this.buyBtn.destroy(),this.data=null,this.itemData=null,this.buyBtn=null,t.ObjectPool.wipe(this.item),this.item=null,this.hot=null;this.gp.numChildren>0;){var e=this.gp.getChildAt(0);e&&(e=null),this.gp.removeChildAt(0)}this.gp=null},i}(t.BaseItemRender);t.ShopItemView=e,__reflect(e.prototype,"app.ShopItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.shopType=1,i.moneyList=[],i.isRfresh=!1,i.cdTime=0,i.skinName=Main.gameParameter.pfID==t.PlatFormID.QQGame?"ShopQQViewSkin":"ShopViewSkin",i.name="ShopView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.shopList=new eui.ArrayCollection,this.bindShopList(),this.setText()},i.prototype.setText=function(){this.txt0.text=t.LanguageUtils.language_Shop_Txt0,this.noListTipsLb.text=t.LanguageUtils.language_Shop_NotShop_Txt},i.prototype.showMoneyType=function(e){for(var i=0;i<e.length;i++){this.moneyP=new t.moneyPanel,this.moneyP.skinName="moneyPanelSkin",this.moneyP.height=29,this.moneyP.width=173,this.moneyP.y=574,this.moneyP.x=187*i+200+2*i;t.GlobalConfig.NumericalIcon[e[i].type];this.moneyP.setData(e[i].type,!0),this.moneyP.type=e[i].type,this.moneyP.icon.width=this.moneyP.icon.height=36,this.win.addChild(this.moneyP),this.moneyList.push(this.moneyP)}},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(t.MouseScroller.bind(this.scroller),e)for(;e[0]instanceof Array;)e=e[0];this.shopType=null==e[0]?1:e[0],this.dafaultTabshop=null==e[1]?-1:e[1],t.ShopMgr.ins().npcCog=null==e[2]?0:e[2];var n=t.ShopMgr.ins().getShopTabList(this.shopType),s=t.GlobalConfig.ShopnameConfig[this.shopType];this.showMoneyType(s.costtype),this.dragDropUI.setTitle(s.shopname),this.bindOptTabBar(n),this.addTouchEvent(this.btnExchangeMoney,this.showChange),this.optTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.lastIndex=-1==this.dafaultTabshop?n[0].Tabshop:this.dafaultTabshop,t.ShopMgr.ins().sendShopList(this.shopType,this.lastIndex),this.observe(t.ShopMgr.ins().post_onReceiveshopList,this.updateShopList),this.observe(t.ShopMgr.ins().post_onReceivesBuyGoods,this.updateBuyGoods),this.observe(t.DefaultMgr.ins().postPlayerChange,this.changeMoney),Main.gameParameter.pfID==t.PlatFormID.QQGame?this.addTouchEvent(this.openBlue,this.openBlueFun):this.updateBanner(),this.changeMoney();for(var a=0;a<this.optTab.numElements;a++){var r=this.optTab.getVirtualElementAt(a);r&&r.itemIndex+1==this.lastIndex&&(this.optTab.selectedIndex=r.itemIndex,this.btnExchangeMoney.visible=Boolean(n[a].sctype),this.sctype=n[a].sctype,this.btnExchangeMoney.label=n[a].dealtype)}},i.prototype.showChange=function(){0!=this.sctype&&t.ViewManager.ins().open(t.BagGoldChangeView,this.sctype,{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode)},i.prototype.changeMoney=function(){var e=t.EntityMgr.ins().getPlayerPropertySet();if(e&&e.propSet)for(var i=e.propSet,n=0;n<this.moneyList.length;n++){var s=this.moneyList[n];if(3==s.type){var a=t.ColorUtil.getMoneyColor(i.getBindYuanBao()),r="|C:"+a+"&T:"+t.CommonUtils.zhuanhuan(i.getBindYuanBao())+"|";s.setCount(r)}else if(2==s.type){var o=t.ColorUtil.getMoneyColor(i.getBindCoin()),l="|C:0xe5ddcf&T:"+t.CommonUtils.zhuanhuan(i.getBindCoin())+"|";s.setCount(l)}else if(10==s.type){var h="|C:0xe5ddcf&T:"+t.CommonUtils.zhuanhuan(i.getGuildDevote())+"|";s.setCount(h)}else if(4==s.type){var o=t.ColorUtil.getMoneyColor(i.getNotBindYuanBao()),l="|C:"+o+"&T:"+t.CommonUtils.zhuanhuan(i.getNotBindYuanBao())+"|";s.setCount(l)}else if(12==s.type){var p="|C:0xe5ddcf&T:"+t.CommonUtils.zhuanhuan(i.getActivity())+"|";s.setCount(p)}}else for(var n=0;n<this.moneyList.length;n++){var s=this.moneyList[n];s.setCount("0")}},i.prototype.bindOptTabBar=function(e){this.optTab.itemRenderer=t.TradeLineTabView;var i=new eui.ArrayCollection(e);this.optTab.dataProvider=i},i.prototype.updateBuyGoods=function(e){var i=e[0],n=e[1],s=e[2],a=e[3];if(n&&s>0){for(var r in this.shopList.source)if(this.shopList.source[r].shopId==i){this.shopList.source[r].buyCountNum=a,this.shopList.source[r].buyLimitNum=s,this.shopList.replaceAll(this.shopList.source);break}}i>0&&t.ViewManager.ins().isShow(t.ShopBatchBuyView)&&t.ViewManager.ins().close(t.ShopBatchBuyView)},i.prototype.updateShopList=function(){if(2!=t.ShopMgr.ins().shopType&&6!=t.ShopMgr.ins().shopType){if(this.shopList.replaceAll(t.ShopMgr.ins().getShopList()),!this.isRfresh)return;this.scroller.stopAnimation(),this.scroller.viewport.validateNow(),this.scroller.viewport.scrollV=0}},i.prototype.bindShopList=function(){this.gList.useVirtualLayout=!0,this.gList.dataProvider=this.shopList,this.gList.itemRenderer=t.ShopItemView},i.prototype.onBarItemTap=function(e){var i=e.item;this.lastIndex=i.Tabshop,this.btnExchangeMoney.visible=Boolean(i.sctype),this.sctype=i.sctype,this.btnExchangeMoney.label=i.dealtype,this.isRfresh=!0,t.ShopMgr.ins().sendShopList(this.shopType,i.Tabshop),window.pfID!=t.PlatFormID.QQGame&&this.updateBanner(),this.dragDropUI.setTitle(i.title)},i.prototype.openBlueFun=function(){window.openBlueFunction()},i.prototype.updateBanner=function(){if(1==this.shopType&&6==this.lastIndex){this.bannerGrp.visible=!0,this.scroller.top=105;var e=t.GlobalConfig.PlayFunConfig[63];if(e&&63==e.id){var i=t.GlobalConfig.ShoptagConfig[1][6];i&&!t.ViewManager.ins().isCheckOpen(i.closelimit)&&t.ViewManager.ins().isCheckOpen(i.openlimit)&&(this.cdTime=(i.closelimit.openDay-t.GlobalData.sectionOpenDay)*t.DateUtils.SECOND_PER_DAY-t.DateUtils.getTodayPassedSecond(),this.updateCDTime(),t.TimerManager.ins().remove(this.updateCDTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateCDTime,this))}}else this.bannerGrp.visible=!1,this.scroller.top=0},i.prototype.updateCDTime=function(){var e=this.cdTime-Math.floor(egret.getTimer()/1e3);this.timeLabel.text=t.LanguageUtils.language_Pay_Text7+t.DateUtils.getFormatBySecond(e,t.DateUtils.TIME_FORMAT_18),0>=e&&(t.TimerManager.ins().remove(this.updateCDTime,this),this.timeLabel.text="")},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.dragDropUI.destroy(),this.dragDropUI=null,this.optTab.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),Main.gameParameter.pfID==t.PlatFormID.QQGame&&this.removeTouchEvent(this.openBlue,this.openBlueFun),this.destroy()},i.prototype.destroy=function(){for(;this.gList.numChildren>0;){var e=this.gList.getChildAt(0);e.destroy(),this.gList.removeChild(e),e=null}this.shopList.removeAll();for(var i=0;i<this.moneyList.length;i++){var n=this.moneyList[i];n.removeEvent(),n.parent.removeChild(n),n=null}t.MouseScroller.unbind(this.scroller),this.moneyList=[]},i}(t.BaseEuiView);t.ShopView=e,__reflect(e.prototype,"app.ShopView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.shoptagConfig=this.data,this.labelDisplay.text=this.shoptagConfig.tabname},e}(t.BaseItemRender);t.ShowTarView=e,__reflect(e.prototype,"app.ShowTarView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._buffCDInfo={},i.isAddSavior=!0,i.sysId=t.PackageID.Buff,i.regNetMsg(1,i.g_4_1),i.regNetMsg(2,i.g_4_2),i.regNetMsg(3,i.g_4_3),i.regNetMsg(4,i.g_4_4),i.regNetMsg(5,i.g_4_5),i.regNetMsg(6,i.post_4_6),i}return __extends(i,e),Object.defineProperty(i.prototype,"buffCDInfo",{get:function(){return this._buffCDInfo},enumerable:!0,configurable:!0}),i.ins=function(){return e.ins.call(this)},i.prototype.postUpdateBuff=function(){},i.prototype.g_4_1=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=t.ObjectPool.pop("app.CharStatus");s.read2(e),n.postCharMessage(t.StandardActions.BUFF_ADD,0,0,0,s)}},i.prototype.g_4_2=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);n&&n.postCharMessage(t.StandardActions.BUFF_DELECT,0,0,0,{type:e.readUnsignedByte(),group:e.readUnsignedByte()})},i.prototype.g_4_3=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);n&&n.postCharMessage(t.StandardActions.BUFF_DELECT_TYPE,0,0,0,{type:e.readUnsignedByte()})},i.prototype.g_4_4=function(e){for(var i,n=e.readUnsignedByte(),s=0;n>s;s++)i=t.ObjectPool.pop("app.CharStatus"),i.read2(e),t.EntityMgr.ins().getPayer.initBuff(i)},i.prototype.g_4_5=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=e.readUnsignedShort(),a=e.readUnsignedInt(),r=t.GlobalConfig.BuffConf[s];if(r){var o=n.getBuff(1e4*r.type+r.group);o&&n.postCharMessage(t.StandardActions.BUFF_UPDATE,0,0,0,{key:o.key,value:a})}}},i.prototype.post_updateSavior=function(){},i.prototype.post_4_6=function(t){var e=t.readUnsignedShort(),i=t.readInt(),n=1e3*i+egret.getTimer();this._buffCDInfo[e]=n},i}(t.BaseSystem);t.BuffMgr=e,__reflect(e.prototype,"app.BuffMgr")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.prototype.read=function(e){this.id=e.readUnsignedShort();var i=e.readInt();this.endTime=0>i?4294967295:1e3*i+egret.getTimer(),this.value=e.readNumeric(e.readUnsignedByte());var n=t.GlobalConfig.BuffConf[this.id];n&&(this.key=1e4*n.type+n.group)},e.prototype.read2=function(e){this.read(e),this.endTime2=e.readInt(),this.endTime2>0&&(this.endTime2=t.DateUtils.formatMiniDateTime(this.endTime2));t.GlobalData.serverTime;this.endTime2>t.GlobalData.serverTime&&(t.BuffMgr.ins().buffCDInfo[this.id]=this.endTime2-t.GlobalData.serverTime+egret.getTimer())},e}();t.CharStatus=e,__reflect(e.prototype,"app.CharStatus")}(app||(app={}));var app;!function(t){var e=function(){function t(t){this.skillId=t.readUnsignedShort(),this.skillLevel=t.readByte(),this.isOpen=1==t.readByte()}return t}();t.OtherPlayerSkill=e,__reflect(e.prototype,"app.OtherPlayerSkill")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.SC_LEVEL=1,t.SC_MONEY=2,t.SC_ITEM=3,t.SC_EXP=4,t}();t.SkillCond=e,__reflect(e.prototype,"app.SkillCond")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.lhLevel=0,i.csLevel=0,i.sysId=t.PackageID.Skill,i.regNetMsg(1,i.postg_5_1),i.regNetMsg(2,i.postg_5_2),i.regNetMsg(5,i.postg_5_5),i.regNetMsg(6,i.post_g_5_6),i.regNetMsg(7,i.g_5_7),i.regNetMsg(18,i.g_5_18),i.regNetMsg(19,i.g_5_19),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.s_5_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.postg_5_1=function(e){for(var i=e.readByte(),n=0;i>n;n++){var s=new t.UserSkill(e);t.EntityMgr.ins().getPayer.addUserSkill(s)}this.post_updateSkill()},i.prototype.send_5_3=function(t){var e=this.getBytes(3);e.writeShort(t),this.sendToServer(e)},i.prototype.post_updateSkillMC=function(t){return t},i.prototype.postg_5_2=function(e){var i=new t.UserSkill(e),n=t.EntityMgr.ins().getPayer;if(n){var s=n.getUserSkill(i.nSkillId);s&&s.nLevel<i.nLevel&&this.post_updateSkillMC(i.nSkillId)}return t.EntityMgr.ins().getPayer.addUserSkill(i),6==i.nSkillId?this.lhLevel!=i.nLevel&&(this.lhLevel=i.nLevel,this.post_updateSkill()):8==i.nSkillId&&this.csLevel!=i.nLevel&&(this.csLevel=i.nLevel,this.post_updateSkill()),i},i.prototype.post_updateSkill=function(){},i.prototype.s_5_2=function(e,i,n,s,a,r){var o=t.GlobalConfig.SkillConf[e];if(!o.vocation||o.vocation==r){i||(i=0);var l=this.getBytes(2);l.writeShort(e),l.writeNumber(i),l.writeShort(n),l.writeShort(s),l.writeByte(a),this.sendToServer(l)}},i.prototype.s_5_6=function(t,e){var i=this.getBytes(6);i.writeNumber(t),i.writeByte(e),this.sendToServer(i)},i.prototype.postUpdateLock=function(t,e){return[t,e]},i.prototype.s_5_18=function(t){var e=this.getBytes(18);e.writeShort(t),this.sendToServer(e)},i.prototype.s_5_19=function(t){var e=this.getBytes(19);e.writeShort(t),this.sendToServer(e)},i.prototype.postg_5_5=function(e){var i=e.readUnsignedShort();return t.EntityMgr.ins().getPayer.updateSkillCd(i,egret.getTimer()+e.readUnsignedInt()),i},i.prototype.post_g_5_6=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i),s=t.EntityMgr.ins().getPayer;return n?(s.postActionMessage(t.StandardActions.SAM_UNDER_ATTACK,0,0,s.dir),i):0},i.prototype.g_5_7=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i);if(n){var s=e.readInt(),a=(e.readInt(),e.readInt()),r=e.readInt();n.postCharMessage(t.StandardActions.AM_DAMAGE,0,0,0,{hp:s,bong:a,nowHp:r})}},i.prototype.g_5_18=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i),s=t.EntityMgr.ins().getPayer;n&&s.postActionMessage(t.StandardActions.SAM_UNDER_ATTACK,0,0,s.dir)},i.prototype.g_5_19=function(e){var i=e.readNumber(),n=t.EntityMgr.ins().getCharRole(i),s=t.EntityMgr.ins().getPayer;n&&s.postActionMessage(t.StandardActions.SAM_UNDER_ATTACK,0,0,s.dir)},i.prototype.post_playSkillMc=function(t,e){return{skillName:t,id:e}},i.prototype.getSkillredDot=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet){var n=e.propSet.getAP_JOB(),s=i.ins().getJobSkillredDot(n),a=i.ins().getJobSkillredDot(0),r=t.GhostMgr.ins().getRed(),o=t.MeridiansMgr.ins().getDot();return s||a||r||o}return 0},i.prototype.getJobSkillredDot=function(e){void 0===e&&(e=0);var i,n,s,a=t.EntityMgr.ins().getPayer,r=(a.propSet.getAP_JOB(),a.propSet.getLevel()),o=a.propSet.getZSLevel(),l=a.propSet.getBindCoin(),h=a.propSet.getMeridians(),p=0;for(var u in t.GlobalConfig.SkillConf)if(p=0,i=t.GlobalConfig.SkillConf[u],i.isRedDot&&!i.isDelete&&i.vocation==e&&(n=t.EntityMgr.ins().getPayer.getUserSkill(i.id),n&&(p=n.nLevel),s=t.GlobalConfig.SkillsLevelConf[i.id][p+1])){var c=s.upgradeConds;if(c){for(var g=void 0,d=c?c.length:0,m=!0,f=0;d>f;f++)if(g=c[f],1==g.cond){if(g.value>r){m=!1;continue}}else if(4==g.cond){if(g.value>o){m=!1;continue}}else if(6==g.cond){if(g.value>h){m=!1;continue}}else if(2==g.cond&&g.consume){if(g.value>l){m=!1;continue}}else if(3==g.cond&&g.consume){var v=void 0;if(v=t.GlobalConfig.StdItems[g.value]){var _=t.CurrencyUtils.getCurrency(QatEnum.qatEquipment,v.id);if(g.count>_){m=!1;continue}}}if(m)return 1}}return 0},i.SKILL_YMCZ=5,i.SKILL_CX=3,i.SKILL_BY=4,i.SKILL_LH=6,i.SKILL_ZR=8,i.SKILL_MFD=17,i.SKILL_ZY=22,i.SKILL_SSZJ=28,i.SKILL_ZHKL=25,i.SKILL_ZHSS=30,i.SKILL_HUOQIANG=14,i}(t.BaseSystem);t.SkillMgr=e,__reflect(e.prototype,"app.SkillMgr")}(app||(app={}));var app;!function(t){var e=function(){function t(t){this.nSkillId=t.readUnsignedShort(),this.nLevel=t.readUnsignedByte(),this.dwResumeTick=t.readUnsignedInt()+egret.getTimer(),this.isOpen=1==t.readByte(),this.isDisable=1==t.readByte()}return t}();t.UserSkill=e,__reflect(e.prototype,"app.UserSkill")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._weaponInfo={},i._weaponInfo={},i.sysId=t.PackageID.SoldierSoul,i.regNetMsg(1,i.post_58_1),i.regNetMsg(2,i.post_58_2),i.regNetMsg(3,i.post_58_3),i.regNetMsg(4,i.post_58_4),i}return __extends(i,e),Object.defineProperty(i.prototype,"weaponInfo",{get:function(){return this._weaponInfo},enumerable:!0,configurable:!0}),i.ins=function(){return e.ins.call(this)},i.prototype.send_58_1=function(t){var e=this.getBytes(1);e.writeByte(t),this.sendToServer(e)},i.prototype.post_58_1=function(e){this._weaponInfo={};for(var i=(e.readByte(),e.readByte()),n=0;i>n;n++){var s=new t.SoldierSoulData;s.parser(e),this._weaponInfo[s.soulID]=s}},i.prototype.send_58_2=function(t,e,i,n,s){void 0===s&&(s=0);var a=this.getBytes(2);a.writeByte(t),a.writeByte(e),a.writeByte(i),a.writeByte(n),a.writeByte(s),this.sendToServer(a)},i.prototype.post_58_2=function(e){var i=e.readByte(),n=(e.readByte(),e.readByte()),s=e.readByte(),a=e.readByte();if(0==i||11==i)this._weaponInfo[n]&&(1==s?this._weaponInfo[n].soulOrder=a:2==s?this._weaponInfo[n].soulStar=a:3==s&&(this._weaponInfo[n].soulLv=a));else if(1==i)t.UserTips.ins().showUITips("|C:0xff7700&T:"+t.LanguageUtils.language_Common_229+"|");else if(7==i){var r=t.GlobalConfig.soulWeaponLvConfig[n][a+1];r&&r.limitMsg&&t.UserTips.ins().showUITips("|C:0xff7700&T:"+r.limitMsg+"|")}else if(8==i){var o=t.GlobalConfig.soulWeaponstarConfig[n][a+1];o&&o.limitMsg&&t.UserTips.ins().showUITips("|C:0xff7700&T:"+o.limitMsg+"|")}return i},i.prototype.send_58_3=function(t,e,i){var n=this.getBytes(3);n.writeByte(t),n.writeByte(e),n.writeByte(i),this.sendToServer(n)},i.prototype.post_58_3=function(e){var i=e.readByte(),n=(e.readByte(),e.readByte()),s=e.readByte(),a=e.readString(),r=e.readString();if(9==i){var o=t.GlobalConfig.soulWpRefiningConfig[n];o&&o.limitMsg&&t.UserTips.ins().showUITips("|C:0xff7700&T:"+o.limitMsg+"|")}return{errcode:i,weaponID:n,currAttr:a,newAttr:r,replace:s}},i.prototype.send_58_4=function(t,e){var i=this.getBytes(4);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},i.prototype.post_58_4=function(t){var e=t.readByte(),i=(t.readByte(),t.readByte()),n=t.readString(),s=t.readString();return{errcode:e,weaponID:i,currAttr:n,newAttr:s}},i.prototype.getWeaponTypeRed=function(e,n){var s=0,a=i.ins().weaponInfo[e];if(a)if(1==n){var r=t.GlobalConfig.soulWeaponLorderConfig[e][a.soulOrder+1];r&&r.cost&&(s=t.CurrencyUtils.isRedDot(r.cost))}else if(2==n){var o=t.GlobalConfig.soulWeaponLvConfig[e][a.soulLv+1];if(o&&o.cost)if(o.limit){var l=o.limit[0].lv;a.soulOrder>=l&&1==t.CurrencyUtils.isRedDot(o.cost)&&(s=1)}else s=t.CurrencyUtils.isRedDot(o.cost)}return s},i.prototype.getWeaponTabRed=function(){return i.ins().getWeaponRed()?1:t.WordFormulaManager.ins().getViewRed()?1:0},i.prototype.getWeaponRed=function(){var e=!0,n=t.GlobalConfig.SystemOpen[20];if(n){var s=t.EntityMgr.ins().getPayer;if(s&&s.propSet){var a=s.propSet;(a.getLevel()<n.level||a.getZSLevel()<n.circle||t.GlobalData.sectionOpenDay<n.day||a.getLevel()<n.openLevel||a.getZSLevel()<n.openCircle||t.GlobalData.sectionOpenDay<n.openDay)&&(e=!1)}}if(e)for(var r=1;3>r;r++)for(var o in t.GlobalConfig.soulWptableConfig){var l=t.GlobalConfig.soulWptableConfig[o];if(l){var h=i.ins().getWeaponTypeRed(l.type,r);if(h)return 1}}return 0},i.prototype.getIsUpLv=function(t){var e=!0,n=i.ins().weaponInfo[t.pos];return n&&n.soulOrder<t.lv&&(e=!1),e},i}(t.BaseSystem);t.SoldierSoulMgr=e,__reflect(e.prototype,"app.SoldierSoulMgr")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.prototype.parser=function(t){this.soulID=t.readByte(),this.soulOrder=t.readInt(),this.soulStar=t.readInt(),this.soulLv=t.readInt(),this.soulTopLine=t.readString(),this.soulRefine=t.readString()},t}();t.SoldierSoulData=e,__reflect(e.prototype,"app.SoldierSoulData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.weaponID=0,t.curLevelLv=0,t.skinName="SoldierSoulLevelViewSkin",t.touchEnabled=!1,t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.costList.itemRenderer=t.FourImagesCostItem,this.gCurList.itemRenderer=t.FourImagesAttrItemCurView,this.gNextList.itemRenderer=t.FourImagesAttrItemNextView,this.txt_get.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_155+"<u>"),this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.observe(t.BagMgr.ins().post_8_1,this.updateCostList),this.observe(t.BagMgr.ins().post_8_4,this.updateCostList),this.observe(t.BagMgr.ins().post_8_3,this.updateCostList),this.observe(t.SoldierSoulMgr.ins().post_58_2,this.updateInfo),this.addTouchEvent(this.btnUp,this.levelUp),this.weaponMc||(this.weaponMc=t.ObjectPool.pop("app.MovieClip"),this.weaponMc.scaleX=this.weaponMc.scaleY=1,this.weaponMc.touchEnabled=!1,this.weaponMc.blendMode=egret.BlendMode.ADD,this.weaponEff.addChild(this.weaponMc)),e&&e[0]&&(this.weaponID=e[0]),this.weaponID&&this.updateView(this.weaponID)},i.prototype.updateInfo=function(){this.updateView(this.weaponID)},i.prototype.updateView=function(e){this.weaponID=e,this.weaponMc&&this.weaponMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_bh"+this.weaponID,-1);var i=t.GlobalConfig.soulWptableConfig[this.weaponID];i&&(this.weaponName.source=i.wpname+""),this.weaponTips.source=4==this.weaponID?"sw_bh_Lv_4":"";var n=t.SoldierSoulMgr.ins().weaponInfo[e];if(n){this.curLevelLv=n.soulLv;var s=t.GlobalConfig.soulWeaponLvConfig[e][n.soulLv];if(s){this.gCurList.visible=!0,this.curLV.text=t.LanguageUtils.language_Omission_txt59+n.soulLv,this.curOrder.text=n.soulLv+"";for(var a=[],r=0;r<s.attr.length;r++)a.push(s.attr[r]);for(var o=[],l="",r=0;r<a.length;r++)l=t.AttributeData.getItemAttStrByType(a[r],a),""!=l&&o.push(l);this.gCurList.dataProvider=new eui.ArrayCollection(o)}else this.gCurList.visible=!1,this.curLV.text=t.LanguageUtils.language_Omission_txt59+0,this.curOrder.text="0";var h=n.soulLv+1,p=t.GlobalConfig.soulWeaponLvConfig[e][h];if(p){this.gNextList.visible=this.nextLv.visible=!0,this.lbMax0.visible=this.lbMax.visible=!1,this.nextLv.text=t.LanguageUtils.language_Omission_txt60+h;for(var u=p.attr,c=[],r=0;r<u.length;r++)c.push(u[r]);for(var g=[],d="",r=0;r<c.length;r++)d=t.AttributeData.getItemAttStrByType(c[r],c),""!=d&&g.push(d);this.gNextList.dataProvider=new eui.ArrayCollection(g)}else this.gNextList.visible=this.nextLv.visible=!1,this.lbMax0.visible=this.lbMax.visible=!0,this.lbMax.text=t.LanguageUtils["language_SoldierSoul_Text"+this.weaponID]+t.LanguageUtils.language_SoldierSoul_MaxText;this.updateCostList()}},i.prototype.updateCostList=function(){this.redPoint.visible=t.SoldierSoulMgr.ins().getWeaponTypeRed(this.weaponID,2)?!0:!1;var e=t.SoldierSoulMgr.ins().weaponInfo[this.weaponID];if(e){var i=t.GlobalConfig.soulWeaponLvConfig[this.weaponID][e.soulLv+1];if(i){for(var n=[],s=0;s<i.cost.length;s++)n.push({type:i.cost[s].type,id:i.cost[s].id,count:i.cost[s].count});n.length>0?t.GetPropsView.getPropsTxt(this.txt_get,n[0].id):this.txt_get.visible=!1,this.costList.dataProvider=new eui.ArrayCollection(n),this.costList.visible=!0}else this.txt_get.visible=this.costList.visible=!1}},i.prototype.getCostObj=function(){var e=(t.EntityMgr.ins().getPayer,t.SoldierSoulMgr.ins().weaponInfo[this.weaponID]);if(e){var i=t.GlobalConfig.soulWeaponLvConfig[this.weaponID][e.soulLv+1];if(i){var n=t.OtherMgr.ins().getItemIDByCost(i.cost);return n}}return null},i.prototype.levelUp=function(){var e=this.getCostObj();if(e&&e.itemId>0){if(!t.ViewManager.ins().isShow(t.GaimItemWin)){var i=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,e,{x:i.x,y:i.y},{height:this.height,width:this.width},this.hashCode)
}}else t.SoldierSoulMgr.ins().send_58_2(1,this.weaponID,3,this.curLevelLv)},i.prototype.onGetProps=function(){var e=this.getCostObj();if(e&&(0==e.itemId&&(e.itemId=e.itemId2),!t.ViewManager.ins().isShow(t.GaimItemWin)&&e.itemId>0)){var i=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,e,{x:i.x,y:i.y},{height:this.height,width:this.width},this.hashCode)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.txt_get.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.removeTouchEvent(this.btnUp,this.levelUp),this.weaponMc&&(this.weaponMc.destroy(),this.weaponMc=null)},i}(t.BaseEuiView);t.SoldierSoulLevelView=e,__reflect(e.prototype,"app.SoldierSoulLevelView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.checkYes,this.onClick)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.checkYes,this.onClick)},i.prototype.onClick=function(){this.checkYes.selected;1==this.data.type?t.EventManager.ins().sendEvent(t.CommonEvent.SELECT_SOLDIERSOUL_UPSTAR):2==this.data.type&&t.EventManager.ins().sendEvent(t.CommonEvent.SELECT_SOLDIERSOUL_REFINE)},i.prototype.dataChanged=function(){this.goodsId=this.data.itemid;var e=this.data.price,i=2682369,n=t.GlobalConfig.StdItems[this.data.itemid],s=t.CurrencyUtils.getCurrencyNameIcon(e.type,e.id);if(n&&s){var a="|C:"+i+"&T:"+e.count+"|C:0xdcb789&T:"+s[0]+t.LanguageUtils.language_Refining_Text2+"|C:0xe68246&T:"+n.name+"|";this.lbMoney.textFlow=t.TextFlowMaker.generateTextFlow(a)}},i}(t.BaseItemRender);t.SoldierSoulMoneyItem=e,__reflect(e.prototype,"app.SoldierSoulMoneyItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.weaponID=0,t.curOrderLv=0,t.skinName="SoldierSoulOrderViewSkin",t.touchEnabled=!1,t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.costList.itemRenderer=t.FourImagesCostItem,this.gCurList.itemRenderer=t.FourImagesAttrItemCurView,this.gNextList.itemRenderer=t.FourImagesAttrItemNextView,this.gCurList0.itemRenderer=t.FourImagesAttrItemCurView,this.gNextList0.itemRenderer=t.FourImagesAttrItemNextView,this.txt_get.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_155+"<u>"),this.txt_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.observe(t.BagMgr.ins().post_8_1,this.updateCostList),this.observe(t.BagMgr.ins().post_8_4,this.updateCostList),this.observe(t.BagMgr.ins().post_8_3,this.updateCostList),this.observe(t.SoldierSoulMgr.ins().post_58_2,this.updateInfo),this.addTouchEvent(this.btnUp,this.levelUp),this.weaponMc||(this.weaponMc=t.ObjectPool.pop("app.MovieClip"),this.weaponMc.scaleX=this.weaponMc.scaleY=1,this.weaponMc.touchEnabled=!1,this.weaponMc.blendMode=egret.BlendMode.ADD,this.weaponEff.addChild(this.weaponMc)),e&&e[0]&&(this.weaponID=e[0]),this.weaponID&&this.updateView(this.weaponID)},i.prototype.updateInfo=function(){this.updateView(this.weaponID)},i.prototype.updateView=function(e){this.specialCurLab.visible=this.specialNextLab.visible=this.gCurList0.visible=this.gNextList0.visible=!1,this.gCurList.verticalCenter=this.gNextList.verticalCenter=65.5,this.weaponID=e,this.weaponMc&&this.weaponMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_bh"+this.weaponID,-1),this.weaponTips.source="sw_bh_"+this.weaponID;var i=t.SoldierSoulMgr.ins().weaponInfo[e];if(i){this.curOrderLv=i.soulOrder;var n=t.GlobalConfig.soulWeaponLorderConfig[e][i.soulOrder];if(n){this.gCurList.visible=!0,this.curLV.text=t.LanguageUtils.language_Omission_txt143+i.soulOrder,this.curOrder.text=t.TextFlowMaker.getCStr(i.soulOrder)+t.LanguageUtils.language_Common_230;for(var s=[],a=0;a<n.attr.length;a++)s.push(n.attr[a]);for(var r=[],o="",a=0;a<s.length;a++)o=t.AttributeData.getItemAttStrByType(s[a],s),""!=o&&r.push(o);if(this.gCurList.dataProvider=new eui.ArrayCollection(r),n.buffattr){var l=[];for(var h in n.buffattr)l.push(n.buffattr[h]);for(var p=[],u="",c=0;c<l.length;c++)u=t.AttributeData.getItemAttStrByType(l[c],l,1,!1,!0,"0xD48842","0xF4D1A4"),""!=u&&p.push(u);this.gCurList.verticalCenter=18,this.gCurList0.visible=this.specialCurLab.visible=!0,this.gCurList0.dataProvider=new eui.ArrayCollection(p)}}else this.gCurList.visible=!1,this.curLV.text=t.LanguageUtils.language_Omission_txt143+0,this.curOrder.text="零阶";var g=i.soulOrder+1,d=t.GlobalConfig.soulWeaponLorderConfig[e][g];if(d){this.gNextList.visible=this.nextLv.visible=!0,this.lbMax0.visible=this.lbMax.visible=!1,this.nextLv.text=t.LanguageUtils.language_Omission_txt144+g;for(var m=d.attr,f=[],a=0;a<m.length;a++)f.push(m[a]);for(var v=[],_="",a=0;a<f.length;a++)_=t.AttributeData.getItemAttStrByType(f[a],f),""!=_&&v.push(_);if(this.gNextList.dataProvider=new eui.ArrayCollection(v),d.buffattr){var y=[];for(var h in d.buffattr)y.push(d.buffattr[h]);for(var T=[],M="",c=0;c<y.length;c++)M=t.AttributeData.getItemAttStrByType(y[c],y,1,!1,!0,"0xD48842","0x28ee01"),""!=M&&T.push(M);this.gNextList.verticalCenter=18,this.gNextList0.visible=this.specialNextLab.visible=!0,this.gNextList0.dataProvider=new eui.ArrayCollection(T)}}else this.gNextList.visible=this.nextLv.visible=!1,this.lbMax0.visible=this.lbMax.visible=!0,this.lbMax.text=t.LanguageUtils["language_SoldierSoul_Text"+this.weaponID]+t.LanguageUtils.language_FourImages_MaxText;this.updateCostList()}},i.prototype.updateCostList=function(){this.redPoint.visible=t.SoldierSoulMgr.ins().getWeaponTypeRed(this.weaponID,1)?!0:!1;var e=t.SoldierSoulMgr.ins().weaponInfo[this.weaponID];if(e){var i=t.GlobalConfig.soulWeaponLorderConfig[this.weaponID][e.soulOrder+1];if(i){for(var n=[],s=0;s<i.cost.length;s++)n.push({type:i.cost[s].type,id:i.cost[s].id,count:i.cost[s].count});n.length>0?t.GetPropsView.getPropsTxt(this.txt_get,n[0].id):this.txt_get.visible=!1,this.costList.dataProvider=new eui.ArrayCollection(n),this.costList.visible=!0}else this.txt_get.visible=this.costList.visible=!1}},i.prototype.getCostObj=function(){var e=(t.EntityMgr.ins().getPayer,t.SoldierSoulMgr.ins().weaponInfo[this.weaponID]);if(e){var i=t.GlobalConfig.soulWeaponLorderConfig[this.weaponID][e.soulOrder+1];if(i){var n=t.OtherMgr.ins().getItemIDByCost(i.cost);return n}}return null},i.prototype.levelUp=function(){var e=this.getCostObj();if(e&&e.itemId>0){if(!t.ViewManager.ins().isShow(t.GaimItemWin)){var i=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,e,{x:i.x,y:i.y},{height:this.height,width:this.width},this.hashCode)}}else t.SoldierSoulMgr.ins().send_58_2(1,this.weaponID,1,this.curOrderLv)},i.prototype.onGetProps=function(){var e=this.getCostObj();if(e&&(0==e.itemId&&(e.itemId=e.itemId2),!t.ViewManager.ins().isShow(t.GaimItemWin)&&e.itemId>0)){var i=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,e,{x:i.x,y:i.y},{height:this.height,width:this.width},this.hashCode)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.txt_get.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetProps,this),this.removeTouchEvent(this.btnUp,this.levelUp),this.weaponMc&&(this.weaponMc.destroy(),this.weaponMc=null)},i}(t.BaseEuiView);t.SoldierSoulOrderView=e,__reflect(e.prototype,"app.SoldierSoulOrderView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.data&&(this.txtIcon1.source=this.data.icon+"1",this.txtIcon2.source=this.data.icon+"2")},e}(eui.ItemRenderer);t.SoldierSoulTabBarWin=e,__reflect(e.prototype,"app.SoldierSoulTabBarWin")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){this.data&&(this.weaponIcon.source=this.data.tabImg,this.weaponName.source=this.data.wpname)},i.prototype.refreshRed=function(e){this.redPoint.visible=t.SoldierSoulMgr.ins().getWeaponTypeRed(this.data.type,e)?!0:!1},i}(t.BaseItemRender);t.SoldierSoulTabWin=e,__reflect(e.prototype,"app.SoldierSoulTabWin")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.weaponID=0,t.attrColor={11:14838538,15:45296,19:16746752,23:16776960,27:16776960,5:14214305,33:14024885,29:14024885,35:14325396,31:14325396},t.itemIconArr=["13538","13539","13537","13540"],t.curStarLv=0,t.seletePos=0,t.skinName="SoldierSoulUpRefineViewSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.listCurAttr.itemRenderer=t.ForgeRefiningCurrAttrItem,this.listGoods.itemRenderer=t.ForgeRefiningCostGoodsItem,this.listMoney.itemRenderer=t.SoldierSoulMoneyItem,this.listNewAttr.itemRenderer=t.ForgeRefiningNewAttrItem,this.addTouchEvent(this.btnRefining,this.onClick),this.addTouchEvent(this.btnReplace,this.onClick),this.addTouchEvent(this.lbShowDesc,this.onClick),this.observe(t.SoldierSoulMgr.ins().post_58_3,this.updateInfo),this.observe(t.SoldierSoulMgr.ins().post_58_4,this.updateReplace),t.EventManager.ins().addEvent(t.CommonEvent.SELECT_SOLDIERSOUL_REFINE,this.refreshReplace,this);var n="|C:0xe68246&T:<u>"+t.LanguageUtils.language_Refining_Text3+"</u>|";this.lbShowDesc.textFlow=t.TextFlowMaker.generateTextFlow(n),this.lbReplaceState.visible=this.lbFail.visible=this.btnReplace.visible=!1,e&&e[0]&&(this.weaponID=e[0]),this.weaponID&&this.updateView(this.weaponID)},i.prototype.updateInfo=function(e){if(this.lbReplaceState.visible=!1,0==e.errcode){this.updateCost();var i=t.SoldierSoulMgr.ins().weaponInfo[e.weaponID];i&&(i.soulTopLine=e.currAttr,i.soulRefine=e.newAttr),this.refiningBind(i.soulTopLine),1==e.replace?(this.lbReplaceState.visible=!0,this.btnReplace.visible=!1,this.refiningNewAttrBind(i.soulTopLine,i.soulTopLine)):e.newAttr?(this.lbFail.visible=!1,this.lbReplaceState.visible=!1,this.btnReplace.visible=!0,this.refiningNewAttrBind(i.soulTopLine,i.soulRefine),t.UserTips.ins().showUITips(t.LanguageUtils.language_Refining_Text6)):(this.lbFail.visible=!0,this.lbReplaceState.visible=!1,this.btnReplace.visible=!1,this.listNewAttr.dataProvider=new eui.ArrayCollection([]),t.UserTips.ins().showUITips(t.LanguageUtils.language_Refining_Text5))}},i.prototype.updateReplace=function(e){if(0==e.errcode){this.updateCost();var i=t.SoldierSoulMgr.ins().weaponInfo[e.weaponID];i&&(i.soulTopLine=e.currAttr,i.soulRefine=e.newAttr,this.updateViewInfo())}},i.prototype.updateView=function(t){this.weaponID=t,this.itemIcon.source=this.itemIconArr[this.weaponID-1]+"",this.updateViewInfo(),this.updateCost(),this.listMoney.visible&&this.replaceItem()},i.prototype.updateViewInfo=function(){var e=t.SoldierSoulMgr.ins().weaponInfo[this.weaponID];e&&(e.soulTopLine==e.soulRefine&&(e.soulRefine=""),e.soulRefine?this.btnReplace.visible=!0:this.btnReplace.visible=!1,this.refiningBind(e.soulTopLine),this.refiningNewAttrBind(e.soulTopLine,e.soulRefine))},i.prototype.refiningBind=function(e){if(e){for(var i=e.split("|"),n=[],s=[],a=0;a<i.length;a++){var r=i[a].split(","),o={type:Number(r[0]),value:Number(r[1])};n.push(o)}for(var a=0;a<n.length;a++){var l=this.attrColor[n[a].type],h=t.AttributeData.getRiningItemAttStrByType(n[a],l,l);""!=h&&s.push({attrStr:h,attrValue:n[a]})}this.listCurAttr.dataProvider=new eui.ArrayCollection(s)}else this.listCurAttr.dataProvider=new eui.ArrayCollection([])},i.prototype.refiningNewAttrBind=function(e,i){if(i){for(var n=e.split("|"),s=i.split("|"),a=[],r=[],o=0;o<s.length;o++){var l=s[o].split(","),h={type:Number(l[0]),value:Number(l[1])};a.push(h)}for(var o=0;o<a.length;o++){for(var p=1,u=0,c=n;u<c.length;u++){var g=c[u],h=g.split(",");h[0]==a[o].type&&(p=a[o].value>h[1]?1:a[o].value<h[1]?2:0)}var d=this.attrColor[a[o].type],m=t.AttributeData.getRiningItemAttStrByType(a[o],d,d);""!=m&&r.push({attrStr:m,sort:p})}this.listNewAttr.dataProvider=new eui.ArrayCollection(r)}else this.listNewAttr.dataProvider=new eui.ArrayCollection([])},i.prototype.onClick=function(e){var i=this,n=!0,s=t.GlobalConfig.soulWpRefiningConfig[this.weaponID];switch(e.currentTarget){case this.btnRefining:if(s){if(s.limit&&s.limit[0]){var a=s.limit[0];if(n=t.SoldierSoulMgr.ins().getIsUpLv(a),!n&&s.limitMsg)return void t.UserTips.ins().showUITips("|C:0xff7700&T:"+s.limitMsg+"|")}for(var r=[],o=0;o<this.listMoney.numElements;o++){var l=this.listMoney.getVirtualElementAt(o);l&&l.data&&l.checkYes.selected&&r.push(l.data.itemid)}var h=t.OtherMgr.ins().getItemIDByCost2(s.consume,r);if(0!=h.itemId){var p=t.GlobalConfig.GetItemRouteConfig[h.itemId];if(p){if(!t.ViewManager.ins().isShow(t.GaimItemWin)){var u=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,h,{x:u.x,y:u.y},{height:this.height,width:this.width},this.hashCode)}}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips21)}else t.SoldierSoulMgr.ins().send_58_3(1,this.weaponID,this.seletePos)}break;case this.btnReplace:var c=t.LanguageUtils.language_Refining_Text4;t.CautionView.show(c,function(){t.SoldierSoulMgr.ins().send_58_4(1,i.weaponID)},this);break;case this.lbShowDesc:s&&t.ViewManager.ins().open(t.ForgeRefiningAttrShowView,s.attribute)}},i.prototype.refiningmaterialsGetData=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],s=n.type,a=n.id,r=n.count;e.push({type:s,id:a,count:r})}return e},i.prototype.replaceItem=function(){var e=t.GlobalConfig.soulWpReplaceConfig[2][this.weaponID];if(e){var i=[];this.listMoney.visible=!0;for(var n in e)t.ViewManager.ins().isCheckOpen(e[n].showlimit)&&i.push(e[n]);this.listMoney.dataProvider=new eui.ArrayCollection(i)}else this.listMoney.dataProvider=new eui.ArrayCollection([])},i.prototype.updateCost=function(){var e=t.GlobalConfig.soulWpRefiningConfig[this.weaponID];if(e){e.limitMsg?this.upTips.textFlow=t.TextFlowMaker.generateTextFlow("|C:0xff7700&T:"+e.limitMsg+"|"):this.upTips.text="";var i=this.refiningmaterialsGetData(e.consume);this.listGoods.visible=!0,this.listGoods.dataProvider=new eui.ArrayCollection(i)}else this.upTips.text="",this.listGoods.visible=!1,this.listGoods.dataProvider=new eui.ArrayCollection([])},i.prototype.refreshReplace=function(t){this.seletePos=0;for(var e=0;e<this.listMoney.numElements;e++){var i=this.listMoney.getVirtualElementAt(e);i&&i.data&&i.checkYes.selected&&(this.seletePos=this.seletePos^1<<i.data.idx)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.removeTouchEvent(this.btnRefining,this.onClick),this.removeTouchEvent(this.btnReplace,this.onClick),this.removeTouchEvent(this.lbShowDesc,this.onClick),t.EventManager.ins().removeEvent(t.CommonEvent.SELECT_SOLDIERSOUL_REFINE,this.refreshReplace,this)},i}(t.BaseEuiView);t.SoldierSoulUpRefineView=e,__reflect(e.prototype,"app.SoldierSoulUpRefineView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.weaponID=0,t.itemIconArr=["13538","13539","13537","13540"],t.curStarLv=0,t.seletePos=0,t.skinName="SoldierSoulUpStarViewSkin",t}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.listCurAttr.itemRenderer=t.ForgeRefiningCurrAttrItem,this.listGoods.itemRenderer=t.ForgeRefiningCostGoodsItem,this.listNextAttr.itemRenderer=t.ForgeUpStarNextAttrItem,this.listMoney.itemRenderer=t.SoldierSoulMoneyItem,this.addTouchEvent(this.btnUpStar,this.onClick),this.observe(t.BagMgr.ins().post_8_1,this.updateCost),this.observe(t.BagMgr.ins().post_8_4,this.updateCost),this.observe(t.BagMgr.ins().post_8_3,this.updateCost),this.observe(t.SoldierSoulMgr.ins().post_58_2,this.updateInfo),t.EventManager.ins().addEvent(t.CommonEvent.SELECT_SOLDIERSOUL_UPSTAR,this.refreshReplace,this),e&&e[0]&&(this.weaponID=e[0]),this.weaponID&&this.updateView(this.weaponID)},i.prototype.updateInfo=function(e){0==e?t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2,this.height/2)):11==e&&t.DefaultMgr.ins().payResultMC(0,this.localToGlobal(this.width/2,this.height/2)),this.updateViewInfo()},i.prototype.updateView=function(t){this.weaponID=t,this.updateViewInfo(),this.replaceItem()},i.prototype.updateViewInfo=function(){this.lbTitle.text=t.LanguageUtils["language_SoldierSoul_Text"+this.weaponID],this.itemIcon.source=this.itemIconArr[this.weaponID-1]+"";var e=t.SoldierSoulMgr.ins().weaponInfo[this.weaponID];if(e){this.curStarLv=e.soulStar;for(var i=1;12>=i;i++)this["imgStar"+i].source="forge_xxbg",i<=this.curStarLv&&(this["imgStar"+i].source=this.curStarLv<7?"forge_xx1":"forge_xx2");var n=t.GlobalConfig.soulWeaponstarConfig[this.weaponID][e.soulStar];if(n){this.listCurAttr.visible=!0;for(var s=[],i=0;i<n.attribute.length;i++)s.push(n.attribute[i]);this.listCurAttr.dataProvider=new eui.ArrayCollection(this.upStarAttrBind(s,"0xbb8f5e","0xcbc2b2"))}else this.listCurAttr.visible=!1;var a=e.soulStar+1,r=t.GlobalConfig.soulWeaponstarConfig[this.weaponID][a];if(r){r.limitMsg?this.upTips.textFlow=t.TextFlowMaker.generateTextFlow("|C:0xff7700&T:"+r.limitMsg+"|"):this.upTips.text="",this.listNextAttr.visible=this.listMoney.visible=!0,this.lbMax.visible=!1;for(var o=[],i=0;i<r.attribute.length;i++)o.push(r.attribute[i]);this.listNextAttr.dataProvider=new eui.ArrayCollection(this.upStarAttrBind(o,"0xE0AE75","0x28ee01")),this.rateLabel.text=t.LanguageUtils.language_Common_161+t.MathUtils.GetPercent(r.rate,1e4)+"\n"+t.LanguageUtils.language_Omission_txt142}else this.upTips.text="",this.listNextAttr.visible=!1,this.lbMax.visible=!0,this.rateLabel.text="",this.listMoney.visible=!1;this.updateCost()}},i.prototype.replaceItem=function(){if(this.listMoney.visible){var e=t.GlobalConfig.soulWpReplaceConfig[1][this.weaponID];if(e){this.listMoney.visible=!0;var i=[];for(var n in e)t.ViewManager.ins().isCheckOpen(e[n].showlimit)&&i.push(e[n]);this.listMoney.dataProvider=new eui.ArrayCollection(i)}else this.listMoney.dataProvider=new eui.ArrayCollection([])}},i.prototype.updateCost=function(){var e=t.GlobalConfig.soulWeaponstarConfig[this.weaponID][this.curStarLv+1];if(e){var i=this.refiningmaterialsGetData(e.consume);this.listGoods.visible=!0,this.listGoods.dataProvider=new eui.ArrayCollection(i)}else this.listGoods.visible=!1,this.listGoods.dataProvider=new eui.ArrayCollection([])},i.prototype.refiningmaterialsGetData=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],s=n.type,a=n.id,r=n.count;e.push({type:s,id:a,count:r})}return e},i.prototype.upStarAttrBind=function(e,i,n){for(var s=[],a=0;a<e.length;a++){var r=t.AttributeData.getItemAttStrByType(e[a],e,0,!1,!0,i,n);""!=r&&s.push({attrStr:r,attrValue:e[a]})}return s},i.prototype.onClick=function(e){var i=!0,n=t.GlobalConfig.soulWeaponstarConfig[this.weaponID][this.curStarLv+1];if(n){if(n.limit&&n.limit[0]){var s=n.limit[0];if(i=t.SoldierSoulMgr.ins().getIsUpLv(s),!i&&n.limitMsg)return void t.UserTips.ins().showUITips("|C:0xff7700&T:"+n.limitMsg+"|")}var a=[];if(n.consume){for(var r=0;r<this.listMoney.numElements;r++){var o=this.listMoney.getVirtualElementAt(r);o&&o.data&&o.checkYes.selected&&a.push(o.data.itemid)}var l=t.OtherMgr.ins().getItemIDByCost2(n.consume,a);if(0!=l.itemId){var h=t.GlobalConfig.GetItemRouteConfig[l.itemId];if(h){if(!t.ViewManager.ins().isShow(t.GaimItemWin)){var p=this.localToGlobal();t.ViewManager.ins().open(t.GaimItemWin,l,{x:p.x,y:p.y},{height:this.height,width:this.width},this.hashCode)}}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips21);return}}}t.SoldierSoulMgr.ins().send_58_2(1,this.weaponID,2,this.curStarLv,this.seletePos)},i.prototype.refreshReplace=function(t){this.seletePos=0;for(var e=0;e<this.listMoney.numElements;e++){var i=this.listMoney.getVirtualElementAt(e);i&&i.data&&i.checkYes.selected&&(this.seletePos=this.seletePos^1<<i.data.idx)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),this.removeTouchEvent(this.btnUpStar,this.onClick),t.EventManager.ins().removeEvent(t.CommonEvent.SELECT_SOLDIERSOUL_UPSTAR,this.refreshReplace,this)},i}(t.BaseEuiView);t.SoldierSoulUpStarView=e,__reflect(e.prototype,"app.SoldierSoulUpStarView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.lastIndex=0,i.skinName="SoldierSoulWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System99),this.tabBar.itemRenderer=t.SoldierSoulTabBarWin;var i=[];for(var n in t.GlobalConfig.soulWptableConfig)i.push(t.GlobalConfig.soulWptableConfig[n]);this.weaponTab.itemRenderer=t.SoldierSoulTabWin,this.weaponTab.dataProvider=new eui.ArrayCollection(i)},i.prototype.setViewTabInfo=function(){var e=[];for(var i in t.GlobalConfig.soulWpViewConfig)t.ViewManager.ins().isCheckOpen(t.GlobalConfig.soulWpViewConfig[i].showLimit)&&e.push(t.GlobalConfig.soulWpViewConfig[i]);this.tabBar.dataProvider=new eui.ArrayCollection(e)},i.prototype.updateViewTab=function(){this.setViewTabInfo(),this.tabBar.selectedIndex=this.lastIndex},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addChangeEvent(this.tabBar,this.onBarItemTap),this.weaponTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.updateViewInfo,this),this.observe(t.SoldierSoulMgr.ins().post_58_1,this.updateInfo),this.observe(t.DefaultMgr.ins().post_updateZsLevel,this.updateViewTab),this.observe(t.BagMgr.ins().post_8_1,this.updateRed),this.observe(t.BagMgr.ins().post_8_4,this.updateRed),this.observe(t.BagMgr.ins().post_8_3,this.updateRed),this.setViewTabInfo(),this.lastIndex=0,this.tabBar.selectedIndex=this.lastIndex,this.weaponTab.selectedIndex=0,t.SoldierSoulMgr.ins().send_58_1(1)},i.prototype.updateInfo=function(){this.updateView(this.lastIndex),this.updateViewTabRed()},i.prototype.onBarItemTap=function(t){this.lastIndex=t.currentTarget.selectedIndex,this.updateView(t.currentTarget.selectedIndex)},i.prototype.updateView=function(e){void 0===e&&(e=0),t.DefaultMgr.ins().post_gaimItemView(6789),this.updateWeaponTabRed(),this.curPanel&&(this.curPanel.close(),t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel=null);var i=this.tabBar.dataProvider.getItemAt(this.tabBar.selectedIndex);if(i){var n=egret.getDefinitionByName(i.view);if(n&&(this.curPanel=new n,this.curPanel)){this.curPanel.left=0,this.curPanel.right=0,this.curPanel.top=0,this.curPanel.bottom=0,this.infoGrp.addChild(this.curPanel);var s=this.weaponTab.dataProvider.getItemAt(this.weaponTab.selectedIndex);s&&(this.ruleTips.ruleId=s.ruleid?s.ruleid:0,this.curPanel.open(s.type))}}},i.prototype.updateViewInfo=function(){if(t.DefaultMgr.ins().post_gaimItemView(6789),this.curPanel){var e=this.weaponTab.dataProvider.getItemAt(this.weaponTab.selectedIndex);e&&(this.ruleTips.ruleId=e.ruleid?e.ruleid:0,this.curPanel.updateView(e.type))}},i.prototype.onClick=function(t){t.currentTarget},i.prototype.updateRed=function(){this.updateWeaponTabRed(),this.updateViewTabRed()},i.prototype.updateWeaponTabRed=function(){for(var t=0;t<this.weaponTab.dataProvider.length;t++){var e=this.weaponTab.getVirtualElementAt(t);e&&e.refreshRed(this.lastIndex+1)}},i.prototype.updateViewTabRed=function(){for(var e=1;3>e;e++){this["redPoint"+e].visible=!1;for(var i=0;i<this.weaponTab.dataProvider.length;i++){var n=this.weaponTab.dataProvider.getItemAt(i);if(n){var s=t.SoldierSoulMgr.ins().getWeaponTypeRed(n.type,e);if(s){this["redPoint"+e].visible=!0;break}}}}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.DefaultMgr.ins().post_gaimItemView(6789),this.removeChangeEvent(this.tabBar,this.onBarItemTap),this.weaponTab.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.updateViewInfo,this),this.curPanel&&(this.curPanel.close(),t.DisplayUtils.removeFromParent(this.curPanel),this.curPanel=null)},i}(t.BaseEuiView);t.SoldierSoulWin=e,__reflect(e.prototype,"app.SoldierSoulWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.taskInfo={},i.clickTime=0,i.lastState=0,i.lastState2=0,i.taskInfoID=0,i._lastTaskID=0,i._lastTaskState=0,i._lastCD=0,i.lastMapID=0,i.sysId=t.PackageID.Task,i.regNetMsg(1,i.post_6_1),i.regNetMsg(2,i.post_6_2),i.regNetMsg(3,i.post_6_3),i.regNetMsg(4,i.post_6_4),i.regNetMsg(5,i.post_6_5),i.regNetMsg(6,i.post_6_6),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.delTaskInfo=function(){this.taskInfo={}},Object.defineProperty(i.prototype,"taskInfoData",{get:function(){return this.taskInfo},enumerable:!0,configurable:!0}),i.prototype.getMainTaskInfoData=function(){var e,i;for(var n in this.taskInfo)if(i=this.taskInfo[n],e=t.GlobalConfig.TaskDisplayConfig[i.taskID][i.taskState],e&&!e.tasktype)return i;return null},i.prototype.send_6_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.post_6_1=function(e){t.ObjectPool.wipe(this.taskInfo);for(var i,n=e.readInt(),s=0;n>s;s++){var a=new t.MainTaskData;a.parser(e),this.taskInfo[a.taskID]=a,i=t.GlobalConfig.TaskDisplayConfig[a.taskID][a.taskState],i&&!i.tasktype&&t.EntityMgr.ins().updateTaskNpc(i.npcid,i.mark)}},i.prototype.getTaskArr=function(){var t=[];for(var e in this.taskInfo)t.push(this.taskInfo[e]);t.sort(this.sortFun);var i=this.getActTaskDataArr();return t=t.concat(i)},i.prototype.getActTaskDataArr=function(){var e=[],i=t.GlobalConfig.ActivityPromptConfig,n=t.EntityMgr.ins().getPayer;for(var s in i)if(1==i[s].type){var a=t.ActvityMgr.ins().getActivityInfo(i[s].ActivityId);if(a&&a.info&&a.info.times>0){var r=i[s];r.times=a.info.times,e.push(r)}}else if(2==i[s].type){var o=i[s];if(!t.ModelManager.ins().bossModel.bossTimesDic)continue;var l=t.ModelManager.ins().bossModel.bossTimesDic[o.ActivityId];if(!l)continue;var h=l.bossTimes,p=l.levelLimt;if(0>=h)continue;if(n.propSet.getLevel()<p)continue;o.times=h,e.push(o)}else if(3==i[s].type){var o=i[s];e.push(o)}else if(4==i[s].type){var o=i[s],u=o.limit;t.ViewManager.ins().isCheckOpen(u)&&e.push(o)}return e},i.prototype.sortFun=function(e,i){var n=t.GlobalConfig.TaskDisplayConfig[e.taskID][e.taskState],s=t.GlobalConfig.TaskDisplayConfig[i.taskID][i.taskState];return 0==n.tasktype&&0==s.tasktype?e.taskID<i.taskID?-1:e.taskID>i.taskID?1:0:0==n.tasktype&&1==s.tasktype?-1:1==n.tasktype&&0==s.tasktype?1:1==s.tasktype&&1==n.tasktype?n.completeSign&&!s.completeSign?-1:!n.completeSign&&s.completeSign?1:0:void 0},i.prototype.send_6_2=function(t,e,i){void 0===i&&(i=0);var n=this.getBytes(2);n.writeInt(t),n.writeInt(e),n.writeNumber(i),this.sendToServer(n)},i.prototype.post_6_2=function(e){var n=e.readByte();switch(n){case 0:var s=new t.MainTaskData;s.parser(e),this.taskInfo[s.taskID]=s,1==s.taskID&&102==s.taskState&&ReportMgr.reporting(t.ReportDataEnum.COMPLETETASK,{},null,!1);var a=t.GlobalConfig.TaskDisplayConfig[s.taskID][s.taskState];a&&(a.specialeffects&&this.lastState!=s.taskState&&(this.lastState=s.taskState,t.EntityMgr.ins().getPayer.playTaskEff(a.specialeffects)),a.specialeffects2&&this.lastState2!=s.taskState&&(this.lastState2=s.taskState,t.EventManager.ins().sendEvent(t.MainEvent.ADD_TASK_EFF,a.specialeffects2))),a&&!a.tasktype&&t.EntityMgr.ins().updateTaskNpc(a.npcid,a.mark),(t.MapView.autoState=!0)&&t.MapView.taskState&&t.MapView.taskState.id==s.taskID&&a&&t.MapView.taskState.state+1==s.taskState&&t.MapView.taskState.taskstate+1==a.taskstate&&(t.MapView.taskState=null),t.ViewManager.ins().isShow(t.TaskInfoWin)&&i.ins().taskInfoID==s.taskID&&t.ViewManager.ins().close(t.TaskInfoWin);break;case 1:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips78);break;case 2:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips79);break;case 3:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips83);break;case 4:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips81);break;case 5:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips82);break;case 6:t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips83)}},i.prototype.post_taskAi=function(){},i.prototype.post_6_3=function(e){var n=e.readInt();e.readInt();delete this.taskInfo[n],t.ViewManager.ins().isShow(t.TaskInfoWin)&&i.ins().taskInfoID==n&&t.ViewManager.ins().close(t.TaskInfoWin)},i.prototype.post_6_4=function(e){var i=new t.MainTaskData;i.parser(e),this.taskInfo[i.taskID]=i;var n=t.GlobalConfig.TaskDisplayConfig[i.taskID][i.taskState];n&&(n.specialeffects&&(this.lastState=i.taskState,t.EntityMgr.ins().getPayer.playTaskEff(n.specialeffects)),n.specialeffects2&&(this.lastState2=i.taskState,t.EventManager.ins().sendEvent(t.MainEvent.ADD_TASK_EFF,n.specialeffects2))),n&&!n.tasktype&&t.EntityMgr.ins().updateTaskNpc(n.npcid,n.mark)},i.prototype.send_6_5=function(e,i,n,s,a){if(void 0===n&&(n=0),!(this._lastTaskID==e&&this._lastTaskState==s&&a==t.GameMap.mapID&&egret.getTimer()<this._lastCD)){this._lastTaskID=e,this._lastTaskState=s,this._lastCD=egret.getTimer()+3e3,t.PlayerRoleAI.ins().stopAI(),t.PlayerRoleAI.ins().attackState&&(t.PlayerRoleAI.ins().attackState=!1,t.UserTips.ins().showFightTips(t.LanguageUtils.language_Tips122));var r=t.EntityMgr.ins().getPayer;r.stopFinding();var o=this.getBytes(5);o.writeInt(e),o.writeByte(i),o.writeByte(n),this.sendToServer(o)}},i.prototype.post_6_5=function(e){var n=e.readByte(),s=e.readByte(),a=e.readByte(),r=e.readInt(),o=e.readInt(),l=e.readInt();0==n?(0!=s&&(t.ViewManager.ins().isShow(t.TaskInfoWin)&&t.ViewManager.ins().close(t.TaskInfoWin),t.ViewManager.ins().open(t.TaskInfoWin,r,o)),1==a&&(t.MapView.m_ack_Char=null,t.PlayerRoleAI.ins().startAI(),console.log("MainTaskMgr：任务传送开启挂机"),egret.getTimer()>i.ins().clickTime&&i.ins().post_taskAiStart()),0!=l?(this.isOpenNpcView(l),this.lastMapID=l):0!=this.lastMapID&&(t.ViewManager.ins().isShow(t.NpcView)&&t.ViewManager.ins().close(t.NpcView),this.lastMapID=0)):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips59)},i.prototype.post_6_6=function(e){var i=new t.MainTaskData;return i.parser(e),i},i.prototype.post_taskAiStart=function(){},i.prototype.isOpenNpcView=function(e){var i,n,s=t.EntityMgr.ins().getNpcList();for(var a in s)if(i=s[a],n=i.propSet.getACTOR_ID(),n==e){t.ViewManager.ins().isShow(t.NpcView)&&t.ViewManager.ins().close(t.NpcView),t.ViewManager.ins().open(t.NpcView,i.recog,i.propSet);break}},i.prototype.postUpdateTask=function(t){return t},i.prototype.post_selectIsShow=function(t,e){return[t,e]},i.conveyName=1,i.conveyLink=2,i.conveyFly=3,i.isClickSetup=!1,i}(t.BaseSystem);t.MainTaskMgr=e,__reflect(e.prototype,"app.MainTaskMgr")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.prototype.parser=function(t){this.taskID=t.readInt(),this.taskState=t.readInt(),this.taskLimit=t.readInt(),this.taskValue=t.readInt(),this.flyshoes=t.readInt()},t}();t.MainTaskData=e,__reflect(e.prototype,"app.MainTaskData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.telePortArr=[],t.linkNum=0,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this,this.onTouchView),this.addTouchEvent(this.taskBtn,this.onTouch),this.addTouchEvent(this.taskName,this.onTouch),this.addTouchEvent(this.taskSend0,this.onTouch),this.addTouchEvent(this.taskSend1,this.onTouch),this.addTouchEvent(this.taskSend2,this.onTouch),this.addTouchEvent(this.taskSend3,this.onTouch),this.addTouchEvent(this.taskSend4,this.onTouch),this.addTouchEvent(this.taskSend5,this.onTouch),this.addTouchEvent(this.flyGrp,this.onTouch),this.addTouchEvent(this.rect,this.onTouch),this.taskContent.addEventListener(egret.TextEvent.LINK,this.onLink,this),this.addMouseMoveEvent(this.rect,this.mouseMove),this.addMouseOverEvent(this.rect,this.mouseMove),this.addMouseMoveEvent(this.taskSendGrp,this.mouseMove),this.addMouseOverEvent(this.taskSendGrp,this.mouseMove),this.addMouseMoveEvent(this.taskBtn,this.mouseMove),this.addMouseOverEvent(this.taskBtn,this.mouseMove),this.addMouseMoveEvent(this.taskName,this.mouseMove),this.addMouseOverEvent(this.taskName,this.mouseMove),this.addMouseMoveEvent(this.taskSend0,this.mouseMove),this.addMouseOverEvent(this.taskSend0,this.mouseMove),this.addMouseMoveEvent(this.taskSend1,this.mouseMove),this.addMouseOverEvent(this.taskSend1,this.mouseMove),this.addMouseMoveEvent(this.taskSend2,this.mouseMove),this.addMouseOverEvent(this.taskSend2,this.mouseMove),this.addMouseMoveEvent(this.taskSend3,this.mouseMove),this.addMouseOverEvent(this.taskSend3,this.mouseMove),this.addMouseMoveEvent(this.taskSend4,this.mouseMove),this.addMouseOverEvent(this.taskSend4,this.mouseMove),this.addMouseMoveEvent(this.taskSend5,this.mouseMove),this.addMouseOverEvent(this.taskSend5,this.mouseMove),this.addMouseMoveEvent(this.flyGrp,this.mouseMove),this.addMouseOverEvent(this.flyGrp,this.mouseMove),this.addMouseMoveEvent(this.taskContent,this.mouseMove),this.addMouseOverEvent(this.taskContent,this.mouseMove),this.addMouseMoveEvent(this.taskTips,this.mouseMove),this.addMouseOverEvent(this.taskTips,this.mouseMove)
},i.prototype.onClickLink=function(e){if(!(gamelib.DeviceUtils.IsMobile&&this.linkNum>1)&&e.text){var i=e.text.split(",");-2==+i[0]&&t.ViewManager.ins().openViewId(+i[1])}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this,this.onTouchView),this.removeTouchEvent(this.taskBtn,this.onTouch),this.removeTouchEvent(this.taskName,this.onTouch),this.removeTouchEvent(this.taskSend0,this.onTouch),this.removeTouchEvent(this.taskSend1,this.onTouch),this.removeTouchEvent(this.taskSend2,this.onTouch),this.removeTouchEvent(this.taskSend3,this.onTouch),this.removeTouchEvent(this.taskSend4,this.onTouch),this.removeTouchEvent(this.taskSend5,this.onTouch),this.removeTouchEvent(this.flyGrp,this.onTouch),this.removeTouchEvent(this.rect,this.onTouch),this.taskContent.removeEventListener(egret.TextEvent.LINK,this.onLink,this),this.rect.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.rect.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.taskSendGrp.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.taskSendGrp.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this),this.taskTips.removeEventListener(egret.TextEvent.LINK,this.onClickLink,this),this.removeMouseMoveEvent(this.rect,this.mouseMove),this.removeMouseOverEvent(this.rect,this.mouseMove),this.removeMouseMoveEvent(this.taskSendGrp,this.mouseMove),this.removeMouseOverEvent(this.taskSendGrp,this.mouseMove),this.removeMouseMoveEvent(this.taskBtn,this.mouseMove),this.removeMouseOverEvent(this.taskBtn,this.mouseMove),this.removeMouseMoveEvent(this.taskName,this.mouseMove),this.removeMouseOverEvent(this.taskName,this.mouseMove),this.removeMouseMoveEvent(this.taskSend0,this.mouseMove),this.removeMouseOverEvent(this.taskSend0,this.mouseMove),this.removeMouseMoveEvent(this.taskSend1,this.mouseMove),this.removeMouseOverEvent(this.taskSend1,this.mouseMove),this.removeMouseMoveEvent(this.taskSend2,this.mouseMove),this.removeMouseOverEvent(this.taskSend2,this.mouseMove),this.removeMouseMoveEvent(this.taskSend3,this.mouseMove),this.removeMouseOverEvent(this.taskSend3,this.mouseMove),this.removeMouseMoveEvent(this.taskSend4,this.mouseMove),this.removeMouseOverEvent(this.taskSend4,this.mouseMove),this.removeMouseMoveEvent(this.taskSend5,this.mouseMove),this.removeMouseOverEvent(this.taskSend5,this.mouseMove),this.removeMouseMoveEvent(this.flyGrp,this.mouseMove),this.removeMouseOverEvent(this.flyGrp,this.mouseMove),this.removeMouseMoveEvent(this.taskContent,this.mouseMove),this.removeMouseOverEvent(this.taskContent,this.mouseMove),this.removeMouseMoveEvent(this.taskTips,this.mouseMove),this.removeMouseOverEvent(this.taskTips,this.mouseMove)},i.prototype.onLink=function(e){gamelib.DeviceUtils.IsMobile&&this.linkNum>1||this.actTaskInfo&&(this.actTaskInfo.view.length>1?t.ViewManager.ins().isShow(this.actTaskInfo.view[1])||t.ViewManager.ins().open(this.actTaskInfo.view[0],this.actTaskInfo.hierarchy[0])&&t.ViewManager.ins().open(this.actTaskInfo.view[1],this.actTaskInfo.hierarchy[1]):t.ViewManager.ins().isShow(this.actTaskInfo.view[0])||t.ViewManager.ins().open(this.actTaskInfo.view[0],this.actTaskInfo.hierarchy))},i.prototype.mouseMove=function(e){return gamelib.DeviceUtils.IsMobile?void t.MainTaskMgr.ins().post_selectIsShow(this.taskInfo.taskID,this.taskInfo.taskState):void(e.type==mouse.MouseEvent.MOUSE_OUT?this.isSelectImg.visible=!1:this.isSelectImg.visible=!0)},i.prototype.dataChanged=function(){if(this.linkNum=1,this.taskTips.touchEnabled=!1,this.data){this.flyGrp.visible=!1,this.isSelectImg.visible=!1,this.flyShoeLab.visible=!1,this.completeImg.visible=!1,this.taskInfo=this.data;var e=t.GlobalConfig.TaskDisplayConfig[this.taskInfo.taskID];if(e){var i=t.GlobalConfig.TaskDisplayConfig[this.taskInfo.taskID][this.taskInfo.taskState];if(i){this.completeImg.visible=i.completeSign?!0:!1;var n=i.name;if(this.taskName.textFlow=t.TextFlowMaker.generateTextFlow(n),i.flyshoes){var s="<u>"+t.LanguageUtils.language_Common_100+"</u>";this.flyGrp.visible=!0,this.flyShoeLab.visible=!0,this.flyShoeLab.textFlow=t.TextFlowMaker.generateTextFlow(s)}if(i.task){var a=i.task;if(i.schedule)if(i.levelTaskschedule){var r=0,o=t.EntityMgr.ins().getPayer;if(o&&o.propSet){var l=t.GlobalConfig.LevelUpExp[+o.propSet.getLevel()];l&&(r=l.value-o.propSet.getEXP());for(var h=void 0,p=o.propSet.getLevel()+1;p<this.taskInfo.taskLimit;p++)h=t.GlobalConfig.LevelUpExp[p],h&&(r+=h.value);a+="还需|C:0xff7700&T:"+r+"|经验"}}else a+="("+this.taskInfo.taskValue+"/"+this.taskInfo.taskLimit+")";this.taskContent.textFlow=t.TextFlowMaker.generateTextFlow(a),this.allGrp.addChildAt(this.taskContent,1)}else t.DisplayUtils.removeFromParent(this.taskContent);if(i.needitems){this.allGrp.addChildAt(this.taskCirceGrp,2),this.taskCirceGrp.removeChildren();var u=0;for(var p in i.needitems){var c=i.needitems[p],g=t.CurrencyUtils.getCurrency(c.item.type,c.item.id),d=16777215;g<c.item.count&&(d=15007744);var m=new eui.Label;m.size=36,m.width=448,m.stroke=2.5,m.strokeColor=0,m.textColor=15064527,m.scaleX=.5,m.scaleY=.5,m.textFlow=t.TextFlowMaker.generateTextFlow(c.text+("(|C:"+d+"&T:"+g+"|/"+c.item.count+")")),this.taskCirceGrp.addChild(m),u+=1}}else t.DisplayUtils.removeFromParent(this.taskCirceGrp);this.setConveyInfo(i.teleport),this.taskTips.removeEventListener(egret.TextEvent.LINK,this.onClickLink,this),i.tips?(-1!=i.tips.indexOf("|E:")&&(this.linkNum++,this.taskTips.touchEnabled=!0,this.taskTips.addEventListener(egret.TextEvent.LINK,this.onClickLink,this)),this.taskTips.textFlow=t.TextFlowMaker.generateTextFlow1(i.tips),this.allGrp.addChildAt(this.taskTips,4)):t.DisplayUtils.removeFromParent(this.taskTips),i.acceptbutton||i.completebutton?(i.acceptbutton&&(this.taskBtn.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_73+"</u>")),i.completebutton&&(this.taskBtn.textFlow=t.TextFlowMaker.generateTextFlow("<u>"+t.LanguageUtils.language_Common_72+"</u>")),this.allGrp.addChildAt(this.taskBtn,5)):t.DisplayUtils.removeFromParent(this.taskBtn)}}else{if(this.actTaskInfo=this.taskInfo,!this.actTaskInfo)return;var f="C:0xffffff&T:("+this.actTaskInfo.times+t.LanguageUtils.language_Wlelfare_Text5+")",v="";v=4==this.actTaskInfo.type?""+this.actTaskInfo.ActivityName:""+this.actTaskInfo.ActivityName+f,this.taskName.textFlow=t.TextFlowMaker.generateTextFlow(v),this.actTaskInfo.ActivityDescription?(this.taskContent.textFlow=t.TextFlowMaker.generateTextFlow1(this.actTaskInfo.ActivityDescription),this.allGrp.addChildAt(this.taskContent,4)):t.DisplayUtils.removeFromParent(this.taskContent),t.DisplayUtils.removeFromParent(this.taskTips),t.DisplayUtils.removeFromParent(this.taskBtn),t.DisplayUtils.removeFromParent(this.taskSendGrp),t.DisplayUtils.removeFromParent(this.taskCirceGrp)}}},i.prototype.onTouchView=function(){gamelib.DeviceUtils.IsMobile&&t.EventManager.ins().sendEvent(t.MainEvent.CLICK_MAIN_TASK_LINK,this.taskInfo.taskID)},i.prototype.onTouch=function(e){if(!(gamelib.DeviceUtils.IsMobile&&this.linkNum>1)){var i,n=this.taskInfo.taskID?t.GlobalConfig.TaskDisplayConfig[this.taskInfo.taskID][this.taskInfo.taskState]:null;switch(e.currentTarget){case this.taskBtn:n&&t.ViewManager.ins().open(t.TaskInfoWin,this.taskInfo.taskID,this.taskInfo.taskState);break;case this.taskName:case this.rect:if(n){if(n.noteleport)for(var s in n.noteleport)if(t.GameMap.mapID==n.noteleport[s])return void(t.PlayerRoleAI.ins().isOpen||t.PlayerRoleAI.ins().startAI());this.nameClick(n.taskname),n.tasknametips&&t.UserTips.ins().showUITips(n.tasknametips)}else{if(!this.actTaskInfo)return;this.actTaskInfo.view.length>1?t.ViewManager.ins().isShow(this.actTaskInfo.view[0])||t.ViewManager.ins().open(this.actTaskInfo.view[0],this.actTaskInfo.hierarchy[0])&&t.ViewManager.ins().open(this.actTaskInfo.view[1],this.actTaskInfo.hierarchy[1]):t.ViewManager.ins().isShow(this.actTaskInfo.view[0])||t.ViewManager.ins().open(this.actTaskInfo.view[0],this.actTaskInfo.hierarchy)}break;case this.taskSend0:case this.taskSend1:case this.taskSend2:case this.taskSend3:case this.taskSend4:case this.taskSend5:this.taskInfo&&t.MainTaskMgr.ins().send_6_5(this.taskInfo.taskID,t.MainTaskMgr.conveyLink,e.currentTarget.flyID,this.taskInfo.taskState,t.GameMap.mapID);break;case this.flyGrp:this.taskInfo&&(i=this.telePortArr[2],t.MainTaskMgr.ins().send_6_5(this.taskInfo.taskID,t.MainTaskMgr.conveyFly,0,this.taskInfo.taskState,t.GameMap.mapID))}}},i.prototype.setConveyInfo=function(e){this.telePortArr=[];for(var i in e)this.telePortArr.push(e[i]);if(this.telePortArr.length>0){var n=!1;this.allGrp.addChildAt(this.taskSendGrp,3),this.taskSendGrp.addChildAt(this.taskflyGrp1,1),this.taskSend0.visible=this.taskSend1.visible=this.taskSend2.visible=this.taskSend3.visible=this.taskSend4.visible=this.taskSend5.visible=!1;for(var s=0;s<this.telePortArr.length;s++){var a=this.telePortArr[s];a.id-1>=3&&!n&&(n=!0),this["taskSend"+(a.id-1)].text="",this["taskSend"+(a.id-1)].visible=!0;var r="<u>"+this.telePortArr[s].name+"</u>";this["taskSend"+(a.id-1)].textFlow=t.TextFlowMaker.generateTextFlow(r),this["taskSend"+(a.id-1)].flyID=a.id,this.linkNum++}n||t.DisplayUtils.removeFromParent(this.taskflyGrp1)}else t.DisplayUtils.removeFromParent(this.taskSendGrp)},i.prototype.nameClick=function(e){var i=t.EntityMgr.ins().getPayer;t.MainTaskWin.isClickSetup=!1;var n;if(e&&this.taskInfo)switch(e.type){case 1:t.MainTaskMgr.ins().send_6_5(this.taskInfo.taskID,t.MainTaskMgr.conveyName,0,this.taskInfo.taskState,t.GameMap.mapID);break;case 2:if(i){var s=0;if(e.param4&&(s=e.param4),n=i.ifFindTask(e.param1,e.param2,e.param3),n&&-1==n.x&&-1==n.y)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips150);i.setTask(e.param1,e.param2,e.param3,-1,-1,s)}break;case 3:e.param1&&(e.param2?t.ViewManager.ins().isShow(e.param1)||t.ViewManager.ins().open(e.param1,e.param2):t.ViewManager.ins().isShow(e.param1)||t.ViewManager.ins().open(e.param1));break;case 4:if(i){if(n=i.ifFindTask(e.param1,e.param2,e.param3),n&&-1==n.x&&-1==n.y)return void t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips150);i.setTask(e.param1,e.param2,e.param3,this.taskInfo.taskID,this.taskInfo.taskState)}break;case 5:t.MainTaskMgr.ins().send_6_5(this.taskInfo.taskID,t.MainTaskMgr.conveyName,0,this.taskInfo.taskState,t.GameMap.mapID);break;case 6:break;case 7:case 8:t.ViewManager.ins().open(t.TaskInfoWin,this.taskInfo.taskID,this.taskInfo.taskState);break;case 9:t.ViewManager.ins().isShow(t.BagView)||t.ViewManager.ins().open(t.BagView,{0:1}),t.ViewManager.ins().isShow(t.BagRecycleView)||t.ViewManager.ins().open(t.BagRecycleView);break;case 10:t.MainTaskWin.isClickSetup=!0,t.MainTaskMgr.ins().postUpdateTask(1);break;case 11:e.param1&&e.param2&&e.param3&&e.param4&&t.ViewManager.ins().open(e.param1,e.param2,e.param3,e.param4)}},i}(t.BaseItemRender);t.MainTaskItemView=e,__reflect(e.prototype,"app.MainTaskItemView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.labelDisplay.text=this.data.str)},e}(t.BaseItemRender);t.MainTaskLinkItem=e,__reflect(e.prototype,"app.MainTaskLinkItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.dataTaskIdHash={},t.dataList=[],t.skinName="PhoneTaskLinkSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.taskList.itemRenderer=t.MainTaskLinkItem,this.taskInfo=new eui.ArrayCollection,this.taskList.dataProvider=this.taskInfo,t.EventManager.ins().addEvent(t.MainEvent.CLICK_MAIN_TASK_LINK,this.onShowView,this),this.taskList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listClick,this)},i.prototype.updateTask=function(t){this.dataTaskIdHash={};for(var e=0;e<t.length;e++)this.addData(t[e]);this.updateLIstanbul(),this.dataList&&0!=this.dataList.length||this.onHideView()},i.prototype.addData=function(e){var i=e.taskID,n=t.GlobalConfig.TaskDisplayConfig[i];if(n){var s=e.taskState,a=t.GlobalConfig.TaskDisplayConfig[i][s];if(a&&0==a.tasktype){(this.taskId!=e.taskID||this.taskState!=e.taskState)&&this.onHideView(),this.taskId=e.taskID,this.taskState=e.taskState;var r=[];if(a.taskname){var o=a.taskname,l=a.NpcName,h={str:l,type:o.type,taskID:i,taskState:s};1==o.type?(h.flyID=0,h.conveyType=t.MainTaskMgr.conveyName):2==o.type?(h.sceneid=o.param1,h.posx=o.param2,h.posy=o.param3,h.isStartAI=o.param4):3==o.type?(h.openView=o.param1,h.openViewObj=o.param2):4==o.type?(h.sceneid=o.param1,h.posx=o.param2,h.posy=o.param3):5==o.type?h.flyID=0:11==o.type&&(h.openView=o.param1,h.param2=o.param2,h.param3=o.param3,h.param4=o.param4),r.push(h)}if(a.teleport)for(var p in a.teleport){var u=a.teleport[p],l=u.name;r.push({str:l,type:1,flyID:u.id,conveyType:t.MainTaskMgr.conveyLink,taskID:i,taskState:s})}if(a.tips){var c=a.tips;if(-1!=c.indexOf("|E:"))for(var g=c.split("|E:"),p=1;p<g.length;p++){var d=g[p].split("|")[0],m=d.split(","),l=d.split("&T:")[1];"-2"==m[0]&&r.push({str:l,type:"openViewId",viewId:m[1]})}}r.length>1&&(this.dataTaskIdHash[i]=r)}}},i.prototype.updateLIstanbul=function(){this.dataList=[];for(var t in this.dataTaskIdHash)for(var e=0;e<this.dataTaskIdHash[t].length;e++)this.dataList.push(this.dataTaskIdHash[t][e]);this.taskInfo.replaceAll(this.dataList)},i.prototype.onShowView=function(t){this.taskId==t&&this.dataList&&this.dataList.length>1&&(this.taskList.scrollV=0,this.visible=!this.visible)},i.prototype.onHideView=function(){this.visible=!1},i.prototype.listClick=function(e){var i=t.EntityMgr.ins().getPayer;t.MainTaskWin.isClickSetup=!1;var n=this.taskList.selectedItem;switch(n.type){case 1:t.MainTaskMgr.ins().send_6_5(n.taskID,n.conveyType,n.flyID,n.taskState,t.GameMap.mapID);break;case 2:if(i){var s=0;n.isStartAI&&(s=n.isStartAI),i.setTask(n.sceneid,n.posx,n.posy,-1,-1,s)}break;case 3:n.openView&&(n.openViewObj?t.ViewManager.ins().isShow(n.openView)||t.ViewManager.ins().open(n.openView,n.openViewObj):t.ViewManager.ins().isShow(n.openView)||t.ViewManager.ins().open(n.openView));break;case 4:i&&i.setTask(n.sceneid,n.posx,n.posy,n.taskID,n.taskState);break;case 5:t.MainTaskMgr.ins().send_6_5(n.taskID,t.MainTaskMgr.conveyName,0,n.taskState,t.GameMap.mapID);break;case 6:break;case 7:case 8:t.ViewManager.ins().open(t.TaskInfoWin,n.taskID,n.taskState);break;case 9:t.ViewManager.ins().isShow(t.BagView)||t.ViewManager.ins().open(t.BagView,{0:1}),t.ViewManager.ins().isShow(t.BagRecycleView)||t.ViewManager.ins().open(t.BagRecycleView);break;case 10:t.MainTaskWin.isClickSetup=!0,t.MainTaskMgr.ins().postUpdateTask(1);break;case 11:n.openView&&n.param2&&n.param3&&n.param4&&t.ViewManager.ins().open(n.openView,n.param2,n.param3,n.param4);break;case"openViewId":t.ViewManager.ins().openViewId(n.viewId)}this.onHideView()},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHideView,this),t.EventManager.ins().removeEvent(t.MainEvent.CLICK_MAIN_TASK_LINK,this.onShowView,this),this.taskList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.listClick,this)},i}(t.BaseEuiView);t.MainTaskLinkWin=e,__reflect(e.prototype,"app.MainTaskLinkWin")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isUnfold=!0,t.btnSelect=1,gamelib.DeviceUtils.IsMobile?(t.skinName="PhoneTaskSkin",t.scaleX=t.scaleY=.94,t.left=0,t.top=46):(t.skinName="MainTaskWinSkin",t.right=0,t.top=276),t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.touchEnabled=!1,this.taskList.itemRenderer=t.MainTaskItemView,this.taskInfo=new eui.ArrayCollection,this.taskList.dataProvider=this.taskInfo,this.teamList.itemRenderer=t.TeamMainItemView,this.teamInfo=new eui.ArrayCollection,this.teamList.dataProvider=this.teamInfo},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.isTeam.label="允许组队",this.isTeam.setCallback(this,this.onClick),this.isTeam.dataObj={},this.taskScroller.verticalScrollBar.autoVisibility=!1,this.taskScroller.verticalScrollBar.visible=!1,t.MouseScroller.bind(this.taskScroller),this.addTouchEvent(this.shrinkBtn,this.onClick),this.addTouchEvent(this.unfoldBtn,this.onClick),this.addTouchEvent(this.teamBtn,this.onClick),this.addTouchEvent(this.inviteTeamBtn,this.onClick),this.addTouchEvent(this.invitePlayerBtn,this.onClick),this.addTouchEvent(this.inviteTeamBtn1,this.onClick),this.addTouchEvent(this.invitePlayerBtn1,this.onClick),this.taskList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.listClick,this),t.GameSocket.IsCrossService||(this.observe(t.MainTaskMgr.ins().post_6_1,this.updateTask),this.observe(t.MainTaskMgr.ins().post_6_2,this.updateTask),this.observe(t.MainTaskMgr.ins().post_6_3,this.updateTask),this.observe(t.MainTaskMgr.ins().post_6_4,this.updateTask),this.observe(t.ActvityMgr.ins().post_25_1,this.updateTask),this.observe(t.ActvityMgr.ins().post_25_2,this.updateTask),this.observe(t.ActvityMgr.ins().post_25_3,this.updateTask),this.observe(t.ActvityMgr.ins().post_25_4,this.updateTask),this.observe(t.ActvityMgr.ins().post_25_5,this.updateTask),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateTaskView),this.observe(t.DefaultMgr.ins().post_playerExpChange,this.updateTaskExp),this.observe(t.BagMgr.ins().post_8_1,this.updateTaskExp),this.observe(t.BagMgr.ins().post_8_3,this.updateTaskExp),this.observe(t.BagMgr.ins().post_8_4,this.updateTaskExp),this.observe(t.BossMgr.ins().post_49_4,this.updateTask),this.observe(t.DefaultMgr.ins().post_updateLevel,this.updateTask),this.observe(t.DefaultMgr.ins().post_taskMouse,this.updateMouseEff),this.observe(t.DefaultMgr.ins().post_autoReceiveTask,this.removeAutoTimer),this.observe(t.MainTaskMgr.ins().post_taskAiStart,this.updateOnHook),this.observe(t.MainTaskMgr.ins().post_taskAi,this.doTimerClick),t.TimerManager.ins().doTimer(2e3,0,this.updateMouseEff,this),t.MainTaskMgr.ins().send_6_1()),this.observe(t.TeamMgr.ins().post_onReceiveMyTeamMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveAddMbMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveDelMbMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveUpdateOnlineState,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveSetLeadMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveDestroyMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveTeamState,this.updateTeamState),this.observe(t.MainTaskMgr.ins().post_selectIsShow,this.updateItemSelect),this.addMouseMoveEvent(this.slidingImg,this.mouseMove),this.addMouseOverEvent(this.slidingImg,this.mouseMove),this.teamRect.visible=!0,this.taskRect.visible=this.teamGrp.visible=!1,this.updateNearTeamList()},i.prototype.updateTeamState=function(){this.isTeam.selected=1==t.TeamMgr.ins().myTeamState?!0:!1},i.prototype.updateTaskExp=function(){var e=t.MainTaskMgr.ins().getTaskArr();if(e&&e[0]&&e[0].taskID&&e[0].taskState){var i=t.GlobalConfig.TaskDisplayConfig[e[0].taskID][e[0].taskState];i&&0==i.tasktype&&(i.levelTaskschedule||i.needitems)&&this.taskInfo.itemUpdated(e[0])}},i.prototype.stopMC=function(){this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc()},i.prototype.listClick=function(t){this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc()},i.prototype.updateOnHook=function(){if(t.PlayerRoleAI.ins().isOpen&&1==t.MapView.autoState){var e=t.MainTaskMgr.ins().getTaskArr();if(e&&e[0]&&e[0].taskID&&e[0].taskState){var i=t.GlobalConfig.TaskDisplayConfig[e[0].taskID][e[0].taskState];i&&0==i.tasktype&&(t.MapView.taskState={id:i.id,state:i.state,taskstate:i.taskstate})}}},i.prototype.updateTaskView=function(){this.isUnfold||((this.unfoldGrp.visible=!1)&&(this.unfoldGrp.visible=this.effGrp.visible=!0,this.teamGrp.visible=!1),this.btnSelect=1)},i.prototype.updateNearTeamList=function(){this.slidingImg.visible=this.teamList.visible=!0,this.btnGrp.visible=this.btnGrp1.visible=!1;var e=t.TeamMgr.ins().myTeamList;0==e.length?(this.btnGrp.visible=this.slidingImg.visible=this.teamList.visible=!1,this.btnGrp1.visible=!0):e.length<4&&(this.btnGrp.y=185,this.btnGrp.visible=!0,this.slidingImg.visible=!1),this.teamInfo.replaceAll(e)},i.prototype.updateTask=function(){var e=t.MainTaskMgr.ins().getTaskArr();this.taskInfo.replaceAll(e),this.updateMouseEff(),this.linkView&&this.linkView.updateTask(e)},i.prototype.updateMouseEff=function(){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoTask))if(t.PlayerRoleAI.ins().isFinding||0!=t.GameMap.fubenID||1!=t.OtherMgr.ins().isLargeMapAct)t.TimerManager.ins().isExists(this.doTimerClick,this)&&t.TimerManager.ins().remove(this.doTimerClick,this),this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc();else{var e=t.MainTaskMgr.ins().getTaskArr();if(e&&e[0]&&e[0].taskID&&e[0].taskState){var n=t.GlobalConfig.TaskDisplayConfig[e[0].taskID][e[0].taskState];if(n&&0==n.tasktype){if(!n.animation)return;if(1==n.taskstate){if(i.isClickSetup){var s=t.ViewManager.ins().getView(t.SetUpView);s&&5==s.getUpViewIdx&&t.MainTaskMgr.ins().postUpdateTask(2)}if(egret.getTimer()<t.MainTaskMgr.ins().clickTime)return void(t.TimerManager.ins().isExists(this.doTimerClick,this)&&t.TimerManager.ins().remove(this.doTimerClick,this))}if(0==this.unfoldGrp.visible)return void(t.TimerManager.ins().isExists(this.doTimerClick,this)&&t.TimerManager.ins().remove(this.doTimerClick,this));var a=t.ViewManager.ins().getView(t.SetUpView);if(t.ViewManager.ins().isShow(t.TaskInfoWin)||a&&5==a.getUpViewIdx||i.isTaskSetUpMC)return this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc(),void(t.TimerManager.ins().isExists(this.doTimerClick,this)&&t.TimerManager.ins().remove(this.doTimerClick,this));var r=1==t.GameMap.mapID||3==t.GameMap.mapID;if(this.mouseMc){if(1==n.taskstate&&(t.PlayerRoleAI.ins().isOpen||t.PlayerRoleAI.ins().isFinding)&&(this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc()),n.isauto)if(1==n.taskstate&&!r&&t.PlayerRoleAI.ins().isOpen)t.TimerManager.ins().isExists(this.doTimerClick,this)&&t.TimerManager.ins().remove(this.doTimerClick,this);else{if(0==n.taskstate)return t.TimerManager.ins().isExists(this.startAI,this)&&t.TimerManager.ins().remove(this.startAI,this),t.TimerManager.ins().isExists(this.doTimerClick,this)&&t.TimerManager.ins().remove(this.doTimerClick,this),void this.doTimerClick();2==n.taskstate?(t.TimerManager.ins().isExists(this.startAI,this)&&t.TimerManager.ins().remove(this.startAI,this),t.TimerManager.ins().isExists(this.doTimerClick,this)||t.TimerManager.ins().doTimer(1e3*n.automatic,1,this.doTimerClick,this)):1==n.taskstate&&(r?(t.TimerManager.ins().isExists(this.startAI,this)&&t.TimerManager.ins().remove(this.startAI,this),t.TimerManager.ins().isExists(this.doTimerClick,this)||t.TimerManager.ins().doTimer(1e3*n.automatic,1,this.doTimerClick,this)):t.TimerManager.ins().isExists(this.startAI,this)||t.TimerManager.ins().doTimer(1e3*n.automatic,1,this.startAI,this))}}else{if(i.isClickSetup)return void this.doTimerClick();var o=t.PlayerRoleAI.ins().isOpen||t.PlayerRoleAI.ins().isFinding?!0:!1;if(1==n.taskstate&&o||(this.mouseMc=t.ObjectPool.pop("app.MovieClip"),this.mouseMc.scaleX=this.mouseMc.scaleY=1,this.mouseMc.touchEnabled=!1,this.effGrp.addChild(this.mouseMc)),n.isauto)if(1==n.taskstate&&!r&&t.PlayerRoleAI.ins().isOpen)t.TimerManager.ins().isExists(this.doTimerClick,this)&&t.TimerManager.ins().remove(this.doTimerClick,this);else{if(0==n.taskstate)return t.TimerManager.ins().isExists(this.startAI,this)&&t.TimerManager.ins().remove(this.startAI,this),t.TimerManager.ins().isExists(this.doTimerClick,this)&&t.TimerManager.ins().remove(this.doTimerClick,this),void this.doTimerClick();2==n.taskstate?(t.TimerManager.ins().isExists(this.startAI,this)&&t.TimerManager.ins().remove(this.startAI,this),t.TimerManager.ins().isExists(this.doTimerClick,this)||t.TimerManager.ins().doTimer(1e3*n.automatic,1,this.doTimerClick,this)):1==n.taskstate&&(r?(t.TimerManager.ins().isExists(this.startAI,this)&&t.TimerManager.ins().remove(this.startAI,this),t.TimerManager.ins().isExists(this.doTimerClick,this)||t.TimerManager.ins().doTimer(1e3*n.automatic,1,this.doTimerClick,this)):t.TimerManager.ins().isExists(this.startAI,this)||t.TimerManager.ins().doTimer(1e3*n.automatic,1,this.startAI,this))}else t.TimerManager.ins().isExists(this.doTimerClick,this)&&t.TimerManager.ins().remove(this.doTimerClick,this)}if(this.mouseMc){if(!this.mouseMc.isPlaying){var l=gamelib.DeviceUtils.IsMobile?"eff_xsyd2":"eff_xsyd1";this.mouseMc.playFileEff(ResDirEnum.RES_DIR_EFF+l,-1)}10==n.taskname.type&&this.playOpenMc()}}}}else t.TimerManager.ins().isExists(this.doTimerClick,this)&&t.TimerManager.ins().remove(this.doTimerClick,this),this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),t.MainTaskMgr.ins().postUpdateTask(2),this.stopOpenMc()},i.prototype.playOpenMc=function(){this.openMc||(this.openMc=t.ObjectPool.pop("app.MovieClip"),this.openMc.touchEnabled=!1,this.effGrp.addChild(this.openMc)),this.openMc.isPlaying||this.openMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_gjxbz",-1)},i.prototype.stopOpenMc=function(){this.openMc&&(this.openMc.destroy(),this.openMc=null)},i.prototype.startAI=function(){t.TimerManager.ins().remove(this.startAI,this),t.TimerManager.ins().remove(this.dailtStartAi,this),t.PlayerRoleAI.ins().isOpen||(t.TimerManager.ins().doTimer(500,1,this.dailtStartAi,this),console.log("MainTaskWin：任务状态1的情况下不在比奇和盟重开启的挂机"))},i.prototype.dailtStartAi=function(){t.TimerManager.ins().remove(this.dailtStartAi,this);var e=1==t.GameMap.mapID||3==t.GameMap.mapID,i=t.MainTaskMgr.ins().getTaskArr();if(i&&i[0]&&i[0].taskID&&i[0].taskState){var n=t.GlobalConfig.TaskDisplayConfig[i[0].taskID][i[0].taskState];1!=n.taskstate||e||t.PlayerRoleAI.ins().startAI()}},i.prototype.removeAutoTimer=function(){if(t.TimerManager.ins().isExists(this.doTimerClick,this)){t.TimerManager.ins().remove(this.doTimerClick,this),t.TimerManager.ins().remove(this.startAI,this);var e=t.MainTaskMgr.ins().getTaskArr();if(e&&e[0]&&e[0].taskID&&e[0].taskState){var i=t.GlobalConfig.TaskDisplayConfig[e[0].taskID][e[0].taskState],n=2e3;if(i)if(1==i.taskstate){var s=t.GlobalConfig.TimeManagerConfigConfig,a=1;s&&s.Taskfingertime&&(a=s.Taskfingertime),n=1e3*i.automatic+1e3*a}else 0==i.taskstate?n=0:2==i.taskstate&&(n=1e3*i.automatic);var r=1==t.GameMap.mapID||3==t.GameMap.mapID;i.isauto&&(0==i.taskstate?this.doTimerClick():1==i.taskstate?t.TimerManager.ins().doTimer(n,1,this.doTimerClick,this):2==i.taskstate&&(r?t.TimerManager.ins().doTimer(n,1,this.doTimerClick,this):t.TimerManager.ins().doTimer(n,1,this.startAI,this)))}}},i.prototype.doTimerClick=function(){var e=t.MainTaskMgr.ins().getTaskArr();if(e&&e[0]&&e[0].taskID&&e[0].taskState){this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc();var i=t.GlobalConfig.TaskDisplayConfig[e[0].taskID][e[0].taskState];i&&0==i.tasktype&&(i.taskname?this.nameClick(i):1==i.flyshoes&&t.MainTaskMgr.ins().send_6_5(i.id,t.MainTaskMgr.conveyFly,0,i.state,t.GameMap.mapID))}},i.prototype.nameClick=function(e){var n=t.EntityMgr.ins().getPayer;if(i.isClickSetup=!1,e&&e.taskname)switch(e.taskname.type){case 1:t.MainTaskMgr.ins().send_6_5(e.id,t.MainTaskMgr.conveyName,0,e.state,t.GameMap.mapID);break;case 2:if(n){var s=n.ifFindTask(e.taskname.param1,e.taskname.param2,e.taskname.param3);if(s&&-1==s.x&&-1==s.y)return void(1==e.flyshoes&&t.MainTaskMgr.ins().send_6_5(e.id,t.MainTaskMgr.conveyFly,0,e.state,t.GameMap.mapID));var a=0;e.taskname.param4&&(a=e.taskname.param4),n.setTask(e.taskname.param1,e.taskname.param2,e.taskname.param3,-1,-1,a)}break;case 3:e.taskname.param1&&(e.taskname.param2?t.ViewManager.ins().open(e.taskname.param1,e.taskname.param2):t.ViewManager.ins().open(e.taskname.param1));break;case 4:if(n){var s=n.ifFindTask(e.taskname.param1,e.taskname.param2,e.taskname.param3);if(s&&-1==s.x&&-1==s.y)return void(1==e.flyshoes&&t.MainTaskMgr.ins().send_6_5(e.id,t.MainTaskMgr.conveyFly,0,e.state,t.GameMap.mapID));n.setTask(e.taskname.param1,e.taskname.param2,e.taskname.param3,e.id,e.state)}break;case 5:t.MainTaskMgr.ins().send_6_5(e.id,t.MainTaskMgr.conveyName,0,e.state,t.GameMap.mapID);break;case 6:break;case 7:case 8:t.ViewManager.ins().open(t.TaskInfoWin,e.id,e.state);break;case 9:t.ViewManager.ins().isShow(t.BagView)||t.ViewManager.ins().open(t.BagView,{0:1}),t.ViewManager.ins().isShow(t.BagRecycleView)||t.ViewManager.ins().open(t.BagRecycleView);break;case 10:i.isClickSetup=!0,t.MainTaskMgr.ins().postUpdateTask(1);break;case 11:e.taskname.param1&&e.taskname.param2&&e.taskname.param3&&e.taskname.param4&&t.ViewManager.ins().open(e.taskname.param1,e.taskname.param2,e.taskname.param3,e.taskname.param4)}},i.prototype.mouseMove=function(t){var e=this;if(t.type==mouse.MouseEvent.MOUSE_OUT)egret.setTimeout(function(){egret.Tween.removeTweens(e.btnGrp);var t=egret.Tween.get(e.btnGrp);t.to({y:227},100).call(function(){e.btnGrp.visible=!1})},this,3e3);else if(0==this.btnGrp.visible){this.btnGrp.visible=!0,egret.Tween.removeTweens(this.btnGrp),this.btnGrp.y=227;var i=egret.Tween.get(this.btnGrp);i.to({y:185},100)}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.isTeam:var i=this.isTeam.selected?1:0;t.TeamMgr.ins().onSendAllowableTeam(i);break;case this.inviteTeamBtn:case this.inviteTeamBtn1:t.ViewManager.ins().isShow(t.TeamView)||t.ViewManager.ins().open(t.TeamView,1);break;case this.invitePlayerBtn:case this.invitePlayerBtn1:t.ViewManager.ins().isShow(t.TeamView)||t.ViewManager.ins().open(t.TeamView,2);break;case this.shrinkBtn:this.isUnfold&&(0==this.unfoldGrp.visible&&(this.unfoldGrp.visible=this.effGrp.visible=!0),this.teamGrp.visible=!1),this.btnSelect=1,this.teamRect.visible=!0,this.taskRect.visible=!1;break;case this.teamBtn:this.isUnfold&&(0==this.teamGrp.visible&&(this.teamGrp.visible=!0),this.unfoldGrp.visible=this.effGrp.visible=!1,t.TeamMgr.ins().onSendGetTeamState()),this.btnSelect=2,this.taskRect.visible=!0,this.teamRect.visible=!1;break;case this.unfoldBtn:this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc(),this.isUnfold=this.bgImg.visible=!this.isUnfold,this.unfoldBtn.scaleX=this.isUnfold?1:-1,0==this.isUnfold?this.unfoldGrp.visible=this.teamGrp.visible=this.effGrp.visible=!1:1==this.btnSelect?0==this.unfoldGrp.visible&&(this.unfoldGrp.visible=this.effGrp.visible=!0,this.teamGrp.visible=!1):2==this.btnSelect&&(t.TeamMgr.ins().onSendGetTeamState(),0==this.teamGrp.visible&&(this.unfoldGrp.visible=this.effGrp.visible=!1,this.teamGrp.visible=!0))}},i.prototype.updateItemSelect=function(t){for(var e=0;e<this.taskList.dataProvider.length;e++){var i=this.taskList.getVirtualElementAt(e);i&&(i.isSelectImg.visible=!1)}if(t&&0!=t[0]&&0!=t[1])for(var n=0;n<this.taskInfo.length;n++){var s=this.taskInfo.getItemAt(n);if(s.taskID==t[0]&&s.taskState==t[1]){var a=this.taskList.getVirtualElementAt(n);if(a){a.isSelectImg.visible=!0;break}}}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc(),t.TimerManager.ins().remove(this.doTimerClick,this),t.TimerManager.ins().remove(this.startAI,this),t.TimerManager.ins().remove(this.updateMouseEff,this),t.MouseScroller.unbind(this.taskScroller),this.removeTouchEvent(this.isTeam,this.onClick),this.removeTouchEvent(this.shrinkBtn,this.onClick),this.removeTouchEvent(this.unfoldBtn,this.onClick),this.removeTouchEvent(this.teamBtn,this.onClick),this.removeTouchEvent(this.inviteTeamBtn,this.onClick),this.removeTouchEvent(this.invitePlayerBtn,this.onClick),this.removeTouchEvent(this.inviteTeamBtn1,this.onClick),this.removeTouchEvent(this.invitePlayerBtn1,this.onClick),this.slidingImg.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.mouseMove,this),this.slidingImg.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.mouseMove,this)
},i.isTaskSetUpMC=!1,i.isClickSetup=!1,i}(t.BaseEuiView);t.MainTaskWin=e,__reflect(e.prototype,"app.MainTaskWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.taskID=-1,i.taskState=-1,i.npcCog=0,i.btnState=0,i.createTime=0,i.autoTaskNum=0,i.skinName="TaskInfoWinSkin2",i.name="TaskInfoWin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.rewardList.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.autoTask.visible=!1;var n=t.GlobalConfig.TimeManagerConfigConfig,s=1;n&&n.Taskfingertime&&(s=n.Taskfingertime),t.MainTaskMgr.ins().clickTime=egret.getTimer()+1e3*s,e[0]&&(this.taskID=e[0],t.MainTaskMgr.ins().taskInfoID=e[0]),e[1]&&(this.taskState=e[1]),e[2]&&(this.npcCog=e[2]);var a=t.GlobalConfig.TaskDisplayConfig[this.taskID][this.taskState];a&&(this.title.text=a.NpcName,this.taskDesc.textFlow=t.TextFlowMaker.generateTextFlow(a.description),a.taskbutton?(this.btnState=1,this.sureBtn.label=t.LanguageUtils.language_Common_72):(this.btnState=0,this.sureBtn.label=t.LanguageUtils.language_Common_73),this.taskAims.visible=0==this.btnState,this.taskAims.text=a.tasktarget?t.LanguageUtils.language_Common_74+a.tasktarget:t.LanguageUtils.language_Common_74,this.rewardList.dataProvider=new eui.ArrayCollection(a.awarddisplay),this.rewardImg.visible=a.awarddisplay&&a.awarddisplay.length>0),this.addTouchEvent(this.sureBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),t.DefaultMgr.ins().post_taskMouse(),this.observe(t.DefaultMgr.ins().post_taskMouse,this.updateMouseEff),this.observe(t.DefaultMgr.ins().post_autoReceiveTask,this.removeAutoTimer),t.TimerManager.ins().doTimer(2e3,0,this.updateMouseEff,this)},i.prototype.updateMouseEff=function(){if(t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_autoTask))if(t.PlayerRoleAI.ins().isFinding||0!=t.GameMap.fubenID||1!=t.OtherMgr.ins().isLargeMapAct)t.TimerManager.ins().isExists(this.clickBtn,this)&&t.TimerManager.ins().remove(this.clickBtn,this),t.TimerManager.ins().isExists(this.autoTaskTxt,this)&&t.TimerManager.ins().remove(this.autoTaskTxt,this);else{var e=t.GlobalConfig.TaskDisplayConfig[this.taskID][this.taskState];if(e){if(!e.animation)return;if(1==e.taskstate&&egret.getTimer()<t.MainTaskMgr.ins().clickTime)return;if(!this.mouseMc){this.mouseMc=t.ObjectPool.pop("app.MovieClip"),this.mouseMc.scaleX=this.mouseMc.scaleY=1,this.mouseMc.touchEnabled=!1,this.effGrp.addChild(this.mouseMc);var i=2e3;i=1e3*e.automatic,e.isauto&&(t.TimerManager.ins().doTimer(i,1,this.clickBtn,this),this.autoTask.visible=!0,this.autoTaskNum=Math.floor(i/1e3),t.TimerManager.ins().doTimer(1e3,0,this.autoTaskTxt,this),this.autoTaskTxt())}this.mouseMc.isPlaying||this.mouseMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_xsyd1",-1),10==e.taskname.type&&this.playOpenMc()}}else t.TimerManager.ins().isExists(this.clickBtn,this)&&t.TimerManager.ins().remove(this.clickBtn,this),t.TimerManager.ins().isExists(this.autoTaskTxt,this)&&t.TimerManager.ins().remove(this.autoTaskTxt,this),this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc()},i.prototype.playOpenMc=function(){this.openMc||(this.openMc=t.ObjectPool.pop("app.MovieClip"),this.openMc.touchEnabled=!1,this.effGrp.addChild(this.openMc)),this.openMc.isPlaying||this.openMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_gjxbz",-1)},i.prototype.stopOpenMc=function(){this.openMc&&(this.openMc.destroy(),this.openMc=null)},i.prototype.autoTaskTxt=function(){this.autoTask.textFlow=t.TextFlowMaker.generateTextFlow("|C:0x28ee01&T:"+this.autoTaskNum+"秒||C:0xe9ebd8&T:后自动点击|"),this.autoTaskNum-=1,this.autoTaskNum<0&&(this.autoTask.visible=!1,this.autoTask.text="",t.TimerManager.ins().remove(this.autoTaskTxt,this))},i.prototype.removeAutoTimer=function(){if(t.TimerManager.ins().isExists(this.clickBtn,this)){t.TimerManager.ins().remove(this.clickBtn,this),t.TimerManager.ins().remove(this.autoTaskTxt,this);var e=t.GlobalConfig.TaskDisplayConfig[this.taskID][this.taskState],i=2e3;if(e)if(1==e.taskstate){var n=t.GlobalConfig.TimeManagerConfigConfig,s=1;n&&n.Taskfingertime&&(s=n.Taskfingertime),i=1e3*e.automatic+1e3*s}else i=1e3*e.automatic;e.isauto&&(t.TimerManager.ins().doTimer(i,1,this.clickBtn,this),this.autoTask.visible=!0,this.autoTaskNum=Math.floor(i/1e3),t.TimerManager.ins().doTimer(1e3,Math.floor(i/1e3),this.autoTaskTxt,this),this.autoTaskTxt())}},i.prototype.clickBtn=function(){if(1==this.btnState){var e=t.GlobalConfig.BagRemainConfig[7];if(e){var i=t.BagMgr.ins().getBagCapacity(e.bagremain);i?(this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc(),t.SoundManager.ins().playEffect(t.SoundUtil.UPGRADE),t.MainTaskMgr.ins().send_6_2(this.taskID,this.taskState,this.npcCog)):t.UserTips.ins().showUITips(e.bagtips)}}else this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc(),t.MainTaskMgr.ins().send_6_2(this.taskID,this.taskState,this.npcCog)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.sureBtn:if(this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc(),1==this.btnState){var i=t.GlobalConfig.BagRemainConfig[7];if(i){var n=t.BagMgr.ins().getBagCapacity(i.bagremain);n?(t.SoundManager.ins().playEffect(t.SoundUtil.UPGRADE),t.MainTaskMgr.ins().send_6_2(this.taskID,this.taskState,this.npcCog)):t.UserTips.ins().showUITips(i.bagtips)}}else t.MainTaskMgr.ins().send_6_2(this.taskID,this.taskState,this.npcCog);break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose();var s=t.GlobalConfig.TimeManagerConfigConfig,a=1;s&&s.Taskfingertime&&(a=s.Taskfingertime),t.MainTaskMgr.ins().clickTime=egret.getTimer()+1e3*a,this.dragDropUI=null,t.TimerManager.ins().remove(this.clickBtn,this),t.TimerManager.ins().remove(this.updateMouseEff,this),t.TimerManager.ins().remove(this.autoTaskTxt,this),this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null),this.stopOpenMc(),this.removeTouchEvent(this.sureBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.TaskInfoWin=e,__reflect(e.prototype,"app.TaskInfoWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.myTeamList=[],i.nearPlayerList=[],i.nearTeamList=[],i.onlineFriendList=[],i.inviteList=[],i.sysId=t.PackageID.Team,i.regNetMsg(t.TeamProtocol.sc_enTeamSystemsInitTeam,i.post_onReceiveMyTeamMsg),i.regNetMsg(t.TeamProtocol.sc_enTeamSystemsAddMember,i.post_onReceiveAddMbMsg),i.regNetMsg(t.TeamProtocol.sc_enTeamSystemsDelMember,i.post_onReceiveDelMbMsg),i.regNetMsg(t.TeamProtocol.sc_enTeamSystemsApplyJoinTeam,i.post_onReceiveAppJoinMsg),i.regNetMsg(t.TeamProtocol.sc_enTeamSystemsSetCaptin,i.post_onReceiveSetLeadMsg),i.regNetMsg(t.TeamProtocol.sc_enTeamSystemsMemberLogout,i.post_onReceiveDelMbMsg),i.regNetMsg(t.TeamProtocol.sc_enTeamSystemsDestroyTeam,i.post_onReceiveDestroyMsg),i.regNetMsg(t.TeamProtocol.sc_enTeamSystemcNearTeamList,i.post_onReceiveNearTeamListMsg),i.regNetMsg(t.TeamProtocol.sc_enTeamSystemcIsTeam,i.post_onReceiveTeamState),i.regNetMsg(t.TeamProtocol.sc_enTeamSystemcTeamOnlineState,i.post_onReceiveUpdateOnlineState),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.post_onReceiveTeamState=function(t){this.myTeamState=t.readByte()},i.prototype.setNearPlayerList=function(){this.nearPlayerList=t.OtherMgr.ins().nearPlayerList},i.prototype.setFriendList=function(){var e=t.FriendMgr.ins().friendsList;this.onlineFriendList=[];for(var i=0;i<e.length;i++){var n=e[i];if(1==n.online){if(this.findAlikePlayerData(n.roleId))continue;this.onlineFriendList.push(n)}}},i.prototype.findInviteListDel=function(t){for(var e=0;e<this.inviteList.length;e++){var i=this.inviteList[e];t==i.roleId&&this.inviteList.splice(e,1)}},i.prototype.findAlikePlayerData=function(t){for(var e=0;e<this.onlineFriendList.length;e++){var i=this.onlineFriendList[e];if(t==i.roleId)return!0}return!1},i.prototype.post_onReceiveUpdateOnlineState=function(e){var i=new t.TeamData;i.roleId=e.readUnsignedInt(),i.nickName=e.readString(),i.level=e.readInt(),i.turn=e.readByte(),i.profession=e.readByte(),i.sex=e.readByte(),i.online=e.readByte(),i.sceneId=e.readInt(),i.maxHP=e.readUnsignedInt(),i.curHP=e.readUnsignedInt(),i.superLv=e.readUnsignedInt();for(var n=0;n<this.myTeamList.length;n++){var s=this.myTeamList[n];i.roleId==s.roleId&&(this.myTeamList[n]=i)}t.MapView.updateNaemColor()},i.prototype.post_onReceiveNearTeamListMsg=function(e){for(var i=e.readByte(),n=null,s=[],a=0;i>a;a++)n=new t.NearTeamData,n.roleId=e.readUnsignedInt(),n.nickName=e.readString(),n.level=e.readInt(),n.turn=e.readByte(),n.teamNum=e.readByte(),n.guildName=e.readString(),n.type=2,s.push(n);this.nearTeamList=s},i.prototype.post_onReceiveMyTeamMsg=function(e){var i=e.readByte(),n=null,s=[];this.myTeamList=[];for(var a=0;i>a;a++){n=new t.TeamData,n.roleId=e.readUnsignedInt(),n.nickName=e.readString(),n.level=e.readInt(),n.turn=e.readByte(),n.profession=e.readByte(),n.sex=e.readByte(),n.online=e.readByte(),n.sceneId=e.readInt(),n.maxHP=e.readUnsignedInt(),n.curHP=e.readUnsignedInt(),n.superLv=e.readUnsignedInt(),n.type=0;var r=t.GlobalConfig.Scenes[n.sceneId];n.sceneName=r&&r.scencename,s.push(n)}i>0&&(this.myTeamleaderid=e.readUnsignedInt()),this.myTeamList=s.sort(this.sort),t.MapView.updateNaemColor()},i.prototype.sort=function(t,e){var n=i.ins().myTeamleaderid;return t.roleId==n?-1:e.roleId==n?1:t.online&&!e.online?-1:!t.online&&e.online?1:t.level>e.level?-1:t.level<e.level?1:void 0},i.prototype.post_onReceiveAddMbMsg=function(e){var i=new t.TeamData;i.roleId=e.readUnsignedInt(),i.nickName=e.readString(),i.level=e.readInt(),i.turn=e.readByte(),i.profession=e.readByte(),i.sex=e.readByte(),i.online=e.readByte(),i.sceneId=e.readInt(),i.maxHP=e.readUnsignedInt(),i.curHP=e.readUnsignedInt(),i.superLv=e.readUnsignedInt(),this.myTeamList.push(i),t.MapView.updateNaemColor()},i.prototype.post_onReceiveDelMbMsg=function(e){var i=e.readUnsignedInt();this.delRoleId=i;var n=this.findPlayerData(i,this.myTeamList);n>-1&&this.myTeamList.splice(n,1),t.MapView.updateNaemColor()},i.prototype.post_onReceiveAppJoinMsg=function(e){var i=new t.TeamCommonData;i.roleId=e.readUnsignedInt(),i.nickName=e.readString(),i.timer=15,this.curRequestTeamRoleId=i.roleId,this.inviteList.push(i)},i.prototype.post_onReceiveSetLeadMsg=function(e){var i=new t.TeamCommonData;i.roleId=e.readUnsignedInt(),this.myTeamleaderid=i.roleId},i.prototype.post_onReceiveDestroyMsg=function(e){this.myTeamList=[],t.ViewManager.ins().close(t.TeamMainView),t.MapView.updateNaemColor()},i.prototype.onSendMyTeamList=function(){var e=this.getBytes(t.TeamProtocol.cc_enTeamSystemsInitTeam);this.sendToServer(e)},i.prototype.onSendNearList=function(){var e=this.getBytes(t.TeamProtocol.cs_enTeamSystemcNearTeamList);this.sendToServer(e)},i.prototype.onSendInviteJoinTeam=function(e,i){var n=this.getBytes(t.TeamProtocol.cs_enTeamSystemcInviteJoinTeam);n.writeString(i),n.writeUnsignedInt(e),this.sendToServer(n)},i.prototype.onSendleaveTeam=function(){var e=this.getBytes(t.TeamProtocol.cs_enTeamSystemcLeaveTeam);this.sendToServer(e)},i.prototype.onSendApplyJoinTeam=function(e){var i=this.getBytes(t.TeamProtocol.cs_enTeamSystemcApplyJoinTeam);i.writeUnsignedInt(e),this.sendToServer(i)},i.prototype.onSendSetTeamLeadTeam=function(e){var i=this.getBytes(t.TeamProtocol.cs_enTeamSystemcSetCaptin);i.writeUnsignedInt(e),this.sendToServer(i)},i.prototype.onSendDelMember=function(e){var i=this.getBytes(t.TeamProtocol.cs_enTeamSystemcKickMember);i.writeUnsignedInt(e),this.sendToServer(i)},i.prototype.onSendSetDestroyLeader=function(){var e=this.getBytes(t.TeamProtocol.cs_enTeamSystemcDestroyTeam);this.sendToServer(e)},i.prototype.onSendAllowableTeam=function(e){var i=this.getBytes(t.TeamProtocol.cs_enTeamSysteAutoTeam);i.writeByte(e),this.sendToServer(i)},i.prototype.onSendApplyJoinTeamReply=function(e,i){var n=this.getBytes(t.TeamProtocol.cs_enTeamSystemcApplyJoinTeamReply);n.writeUnsignedInt(e),n.writeByte(i),this.sendToServer(n)},i.prototype.onSendGetTeamState=function(){var e=this.getBytes(t.TeamProtocol.cs_enTeamSystemcIsTeam);this.sendToServer(e)},i.prototype.findPlayerData=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(t==n.roleId)return i}return-1},i.prototype.getNumByTab=function(t){var e=0;return 0==t?e=this.myTeamList.length:1==t?e=this.nearPlayerList.length:2==t?e=this.nearTeamList.length:3==t&&(e=this.onlineFriendList.length),e},i.prototype.getIsMyTeam=function(t){if(this.myTeamList.length)for(var e=0;e<this.myTeamList.length;e++)if(this.myTeamList[e].roleId==t)return!0;return!1},i}(t.BaseSystem);t.TeamMgr=e,__reflect(e.prototype,"app.TeamMgr")}(app||(app={}));var app;!function(t){var e=function(){function t(){this.superLv=0}return t}();t.TeamData=e,__reflect(e.prototype,"app.TeamData");var i=function(){function t(){}return t}();t.NearTeamData=i,__reflect(i.prototype,"app.NearTeamData");var n=function(){function t(){}return t}();t.TeamCommonData=n,__reflect(n.prototype,"app.TeamCommonData");var s;!function(t){t[t.cc_enTeamSystemsInitTeam=1]="cc_enTeamSystemsInitTeam",t[t.cs_enTeamSystemcInviteJoinTeam=2]="cs_enTeamSystemcInviteJoinTeam",t[t.cs_enTeamSystemcLeaveTeam=3]="cs_enTeamSystemcLeaveTeam",t[t.cs_enTeamSystemcApplyJoinTeam=4]="cs_enTeamSystemcApplyJoinTeam",t[t.cs_enTeamSystemcSetCaptin=5]="cs_enTeamSystemcSetCaptin",t[t.cs_enTeamSystemcKickMember=6]="cs_enTeamSystemcKickMember",t[t.cs_enTeamSystemcDestroyTeam=7]="cs_enTeamSystemcDestroyTeam",t[t.cs_enTeamSystemcApplyJoinTeamReply=8]="cs_enTeamSystemcApplyJoinTeamReply",t[t.cs_enTeamSystemcIsTeam=9]="cs_enTeamSystemcIsTeam",t[t.cs_enTeamSysteAutoTeam=10]="cs_enTeamSysteAutoTeam",t[t.cs_enTeamSystemcNearTeamList=11]="cs_enTeamSystemcNearTeamList",t[t.sc_enTeamSystemsInitTeam=1]="sc_enTeamSystemsInitTeam",t[t.sc_enTeamSystemsAddMember=2]="sc_enTeamSystemsAddMember",t[t.sc_enTeamSystemsDelMember=3]="sc_enTeamSystemsDelMember",t[t.sc_enTeamSystemsApplyJoinTeam=4]="sc_enTeamSystemsApplyJoinTeam",t[t.sc_enTeamSystemsSetCaptin=5]="sc_enTeamSystemsSetCaptin",t[t.sc_enTeamSystemsMemberLogout=6]="sc_enTeamSystemsMemberLogout",t[t.sc_enTeamSystemsDestroyTeam=7]="sc_enTeamSystemsDestroyTeam",t[t.sc_enTeamSystemcIsTeam=9]="sc_enTeamSystemcIsTeam",t[t.sc_enTeamSystemcNearTeamList=11]="sc_enTeamSystemcNearTeamList",t[t.sc_enTeamSystemcTeamOnlineState=12]="sc_enTeamSystemcTeamOnlineState"}(s=t.TeamProtocol||(t.TeamProtocol={}));var a;!function(t){t[t.TeamAddMember=0]="TeamAddMember",t[t.TeamDelMember=1]="TeamDelMember",t[t.TeamMemberApplyJoinTeam=2]="TeamMemberApplyJoinTeam",t[t.TeamSetLeader=3]="TeamSetLeader",t[t.TeamInviteMemberJoin=4]="TeamInviteMemberJoin"}(a=t.TeamOptType||(t.TeamOptType={}))}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="TeamAddViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.typeLb.text=t.LanguageUtils.language_Team_Add_Team_Text},i.prototype.setTxt=function(){},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System52),this.addTouchEvent(this.ConfirmBtn,this.onClick)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.ConfirmBtn,this.onClick)},i.prototype.onClick=function(){""!=this.playerNameText.text.trim()&&(t.TeamMgr.ins().onSendInviteJoinTeam(0,this.playerNameText.text),t.ViewManager.ins().close(i))},i}(t.BaseEuiView);t.TeamAddView=e,__reflect(e.prototype,"app.TeamAddView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Popup)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName=Main.gameParameter.pfID==t.PlatFormID.QQGame?"TeamQQItemSkin":"TeamCommonItemSkin",i}return __extends(i,e),i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this)},i.prototype.dataChanged=function(){if(this.itemData=this.data,this.selected=!1,this.captainImg.visible=!1,this.id=this.itemData.roleId,this.playerName.text=this.itemData.nickName,this.playerLevel.text=this.setLevelStyle(),this.playerName.textColor=15064527,this.playerLevel.textColor=15064527,this.playerProfessionorNum.textColor=15064527,this.playerGuildorMap.textColor=15064527,Main.gameParameter.pfID==t.PlatFormID.QQGame){var e=this.itemData.superLv>>16,i=e>>8,n=255&e,s=65535&this.itemData.superLv;this.blueImg.visible=i&&s>0,this.blueImg.source=i&&s>0?1==i?"lz_pt"+(s+1):"lz_hh"+(s+1):"",this.blueYearImg.visible=1==n}0==this.itemData.type?(this.playerGuildorMap.text=this.itemData.sceneName,0==this.itemData.online?(this.playerName.textColor=8420211,this.playerLevel.textColor=8420211,this.playerProfessionorNum.textColor=8420211,this.playerGuildorMap.textColor=8420211):(this.playerName.textColor=15064527,this.playerLevel.textColor=15064527,this.playerProfessionorNum.textColor=15064527,this.playerGuildorMap.textColor=15064527),0==this.itemIndex&&(this.captainImg.visible=!0,this.playerName.textColor=15007744,this.playerLevel.textColor=15007744,this.playerProfessionorNum.textColor=15007744,this.playerGuildorMap.textColor=15007744),this.playerProfessionorNum.text=t.LanguageUtils["language_Role_Name_"+this.itemData.profession]):2==this.itemData.type?(this.playerProfessionorNum.text=this.itemData.teamNum,this.playerGuildorMap.text=this.itemData.guildName):(this.playerProfessionorNum.text=t.LanguageUtils["language_Role_Name_"+this.itemData.profession],this.playerGuildorMap.text=this.itemData.guildName),this.itemIndex%2==1?(this.state_1.visible=!0,this.state_2.visible=!1):(this.state_1.visible=!1,this.state_2.visible=!0)},i.prototype.setLevelStyle=function(){var e=0==this.itemData.turn||null==this.itemData.turn?this.itemData.level.toString():this.itemData.turn+t.LanguageUtils.language_Friend_Turn_txt+this.itemData.level.toString()+t.LanguageUtils.language_Friend_Level_txt;return e},Object.defineProperty(i.prototype,"selected",{set:function(t){if(this.selectedBg.visible=t,t)this.playerName.textColor=15655172,this.playerLevel.textColor=15655172,this.playerProfessionorNum.textColor=15655172,this.playerGuildorMap.textColor=15655172;else{if(null==this.itemData)return;0==this.itemData.online?(this.playerName.textColor=8420211,this.playerLevel.textColor=8420211,this.playerProfessionorNum.textColor=8420211,this.playerGuildorMap.textColor=8420211):(this.playerName.textColor=15064527,this.playerLevel.textColor=15064527,this.playerProfessionorNum.textColor=15064527,this.playerGuildorMap.textColor=15064527),0==this.itemData.type&&0==this.itemIndex&&(this.captainImg.visible=!0,this.playerName.textColor=15007744,this.playerLevel.textColor=15007744,this.playerProfessionorNum.textColor=15007744,this.playerGuildorMap.textColor=15007744)}},enumerable:!0,configurable:!0}),i}(t.BaseItemRender);t.TeamCommonItemView=e,__reflect(e.prototype,"app.TeamCommonItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.setText=function(e){for(var i=0;4>i;i++)this["txt"+i].text=t.LanguageUtils["Language_Team_Text"+(3==e?1:e)][i]},i}(t.BaseEuiView);t.TeamHeaderView=e,__reflect(e.prototype,"app.TeamHeaderView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="TeamMainItemViewSkin",t}return __extends(i,e),i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this)},i.prototype.dataChanged=function(){if(this.data){var e=this.data;e.roleId==t.TeamMgr.ins().myTeamleaderid?this.iconLeader.visible=!0:this.iconLeader.visible=!1,0==e.turn?this.playerLevel.text="Lv"+e.level:this.playerLevel.text=e.turn+t.LanguageUtils.language_Common_0+e.level;var i=e.curHP/e.maxHP;this.hpBar.value=Math.floor(100*i),this.lbPlayerName.text=e.nickName,0==e.online?(this.lbPlayerName.textColor=8421504,this.lbJob.source="m_task_zy"+e.profession+"h"):(this.lbPlayerName.textColor=15064527,this.lbJob.source="m_task_zy"+e.profession)}},i.prototype.setData=function(t){},i}(t.BaseItemRender);t.TeamMainItemView=e,__reflect(e.prototype,"app.TeamMainItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.teamArr=[],t.skinName="TeamMainViewSkin",t.left=5,t.top=230,t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.teamArr=[],this.touchEnabled=!1},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.observe(t.TeamMgr.ins().post_onReceiveMyTeamMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveAddMbMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveDelMbMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveUpdateOnlineState,this.updateNearTeamList)},i.prototype.updateNearTeamList=function(){this.teamArr=t.TeamMgr.ins().myTeamList;for(var e;this.gList.numChildren>0;){var i=this.gList.getChildAt(0);i=null,this.gList.removeChildAt(0)}for(var n=0;n<this.teamArr.length;n++)e=new t.TeamMainItemView,e.setData(this.teamArr[n]),this.gList.addChild(e);this.gList.validateNow(),this.height=37+this.gList.height,this.bg.height=this.height},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(this.$onClose();this.gList.numChildren>0;){var i=this.gList.getChildAt(0);i=null,this.gList.removeChildAt(0)}this.teamArr=[],this.teamArr=null},i}(t.BaseEuiView);t.TeamMainView=e,__reflect(e.prototype,"app.TeamMainView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.lastindex=0,i.data2TabBar_arr=null,i.skinName="TeamViewSkin",i.name="TeamView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.setText(),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System18)},i.prototype.setText=function(){this.txt0.text=t.LanguageUtils.Language_Team_Text3},i.prototype.bindTabBar=function(){this.tabBar.itemRenderer=t.CommonTabBarWin,this.arrayCollection=new eui.ArrayCollection(["t_zd_wddw","t_zd_fjwj","t_zd_fjdw","t_zd_zxhy"]),this.tabBar.dataProvider=this.arrayCollection},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e&&e[0]?(this.tabBar.selectedIndex=e[0],this.lastindex=e[0]):this.tabBar.selectedIndex=0,this.bindTabBar(),this.addTouchEvent(this.addBtn,this.onClick),this.addTouchEvent(this.kickBtn,this.onClick),this.addTouchEvent(this.exitBtn,this.onClick),this.addTouchEvent(this.autoTeamCB,this.onClick),this.addTouchEvent(this.operationBtn,this.onClick),this.addTouchEvent(this.applyBtn,this.onClick),this.addTouchEvent(this.inviteBtn,this.onClick),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),t.EventManager.ins().addEvent(t.TeamEvent.ITEM_SELECTED,this.selectedItem,this),0==this.tabBar.selectedIndex?t.TeamMgr.ins().onSendMyTeamList():1==this.tabBar.selectedIndex&&t.OtherMgr.ins().sendNearPlayerList(),this.setOptShowHide(this.tabBar.selectedIndex),this.page.updateData(this.lastindex),this.observe(t.OtherMgr.ins().post_26_44,this.updateNearList),this.observe(t.FriendMgr.ins().post_gFriendsList,this.updateOnlineFriendList),this.observe(t.TeamMgr.ins().post_onReceiveTeamState,this.updateTeamState),this.observe(t.TeamMgr.ins().post_onReceiveNearTeamListMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveMyTeamMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveDestroyMsg,this.updateNearTeamList),this.observe(t.TeamMgr.ins().post_onReceiveDelMbMsg,this.updateDelTeamState),t.TeamMgr.ins().onSendGetTeamState()},i.prototype.updateNearTeamList=function(){this.page.updateData(this.lastindex),this.setOptShowHide(this.lastindex)},i.prototype.updateDelTeamState=function(){this.page.updateData(this.lastindex),this.setOptShowHide(this.lastindex)},i.prototype.updateTeamState=function(){this.autoTeamCB.selected=1==t.TeamMgr.ins().myTeamState?!0:!1},i.prototype.onCloseMenu=function(){t.ViewManager.ins().close(t.CommonFunMenuView)},i.prototype.updateOnlineFriendList=function(){t.TeamMgr.ins().setFriendList(),this.page.updateData(this.lastindex),this.setOptShowHide(this.lastindex)},i.prototype.selectedItem=function(t){var e=t[0];this.itemData=e},i.prototype.updateNearList=function(){t.TeamMgr.ins().setNearPlayerList(),this.page.updateData(this.lastindex),this.setOptShowHide(this.lastindex)},i.prototype.onClick=function(e){var i=this;switch(e.currentTarget){case this.addBtn:t.ViewManager.ins().open(t.TeamAddView);break;case this.autoTeamCB:var n=this.autoTeamCB.selected?1:0;t.TeamMgr.ins().onSendAllowableTeam(n);break;case this.kickBtn:if(null==this.itemData)return;var s=t.LanguageUtils.language_Team_LeaderKickExitTeam_tips_0+this.itemData.nickName+t.LanguageUtils.language_Team_LeaderKickExitTeam_tips_1;t.CautionView.show(s,function(){t.TeamMgr.ins().onSendDelMember(i.itemData.roleId)},this);break;case this.applyBtn:if(null==this.itemData)return;var a=t.LanguageUtils.language_Team_ApplyAddTeam_tips_0+this.itemData.nickName+t.LanguageUtils.language_Team_ApplyAddTeam_tips_1;t.CautionView.show(a,function(){t.TeamMgr.ins().onSendApplyJoinTeam(i.itemData.roleId)},this);break;case this.inviteBtn:if(null==this.itemData)return;var r=t.LanguageUtils.language_Team_LeaderinviteJonTeam_tips_0+this.itemData.nickName+t.LanguageUtils.language_Team_LeaderinviteJonTeam_tips_1;t.CautionView.show(r,function(){t.TeamMgr.ins().onSendInviteJoinTeam(i.itemData.roleId,"")},this);break;case this.exitBtn:t.CautionView.show(t.LanguageUtils.language_Team_ExitTeam_tips,function(){t.TeamMgr.ins().onSendleaveTeam()},this);break;case this.operationBtn:t.ViewManager.ins().open(t.CommonFunMenuView,this.operationBtn.localToGlobal(0,0),this.itemData)}},i.prototype.onBarItemTap=function(e){this.itemData=null,this.lastindex=e.itemIndex,this.page.setScroller(),this.setOptShowHide(e.itemIndex),0==e.itemIndex?(this.page.updateData(this.lastindex),t.TeamMgr.ins().onSendMyTeamList()):1==e.itemIndex?t.OtherMgr.ins().sendNearPlayerList():2==e.itemIndex?t.TeamMgr.ins().onSendNearList():3==e.itemIndex&&t.FriendMgr.ins().sendFriendsList(t.FriendState.Friend)},i.prototype.setOptShowHide=function(e){for(var i=0,n=0;4>n;n++)this["teamGp_"+n].visible=!1,n==e&&(0==e?(this["teamGp_"+n].visible=!0,this.addBtn.visible=!0,this.kickBtn.visible=this.exitBtn.visible=!1,i=t.TeamMgr.ins().getNumByTab(n),i>0&&(this.kickBtn.visible=this.exitBtn.visible=!0)):(i=t.TeamMgr.ins().getNumByTab(n),i>0&&(this["teamGp_"+n].visible=!0)))},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.removeTouchEvent(this.addBtn,this.onClick),this.removeTouchEvent(this.kickBtn,this.onClick),this.removeTouchEvent(this.exitBtn,this.onClick),this.removeTouchEvent(this.autoTeamCB,this.onClick),this.removeTouchEvent(this.operationBtn,this.onClick),this.removeTouchEvent(this.applyBtn,this.onClick),this.removeTouchEvent(this.inviteBtn,this.onClick),this.dragDropUI.destroy(),this.dragDropUI=null,this.arrayCollection.removeAll(),this.page.destroy(),this.page=null,t.EventManager.ins().removeEvent(t.TeamEvent.ITEM_SELECTED,this.selectedItem,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.onCloseMenu,this)},i}(t.BaseEuiView);t.TeamView=e,__reflect(e.prototype,"app.TeamView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.list=new eui.ArrayCollection,t.lastIndex=-1,t.crrentType=-1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init(),this.lastIndex=-1},i.prototype.init=function(){t.MouseScroller.bind(this.scroller),this.gList.itemRenderer=t.TeamCommonItemView,this.gList.dataProvider=this.list,this.gList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),t.EventManager.ins().addEvent(t.FriendEvent.ITEM_ONCHANGE,this.onListChange,this)},i.prototype.setScroller=function(){this.scroller.stopAnimation(),this.scroller.viewport.validateNow(),this.scroller.viewport.scrollV=0},i.prototype.onListChange=function(t){t[0],this.gList.getChildAt(this.lastIndex)},i.prototype.onChange=function(e){this.selectdItem&&(this.selectdItem.selected=!1),this.lastIndex=e.itemIndex,this.selectdItem=e.itemRenderer,this.selectdItem.selected=!0,t.EventManager.ins().sendEvent(t.TeamEvent.ITEM_SELECTED,[this.selectdItem.itemData]),this.gList.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this)},i.prototype.onTouchDouble=function(){var e=this.gList.localToGlobal(this.gp.width,this.gp.height-100);e.x+=10,t.ViewManager.ins().open(t.CommonFunMenuView,e,this.selectdItem.itemData)},i.prototype.setHeaderText=function(t){this.header.setText(t)},i.prototype.updateData=function(e){this.lastIndex=-1,this.crrentType=e,this.gList.dataProvider=new eui.ArrayCollection,this.setHeaderText(e),0==e&&(this.list.source=t.TeamMgr.ins().myTeamList,this.list.source.sort(this.sort)),1==e?this.list.source=t.TeamMgr.ins().nearPlayerList:2==e?this.list.source=t.TeamMgr.ins().nearTeamList:3==e&&(this.list.source=t.TeamMgr.ins().onlineFriendList),this.gList.dataProvider=this.list,this.list.length<1?(this.noListTipsLb.visible=!0,0==e&&(this.noListTipsLb.text=t.LanguageUtils.language_Team_NoTeam_tips),1==e?this.noListTipsLb.text=t.LanguageUtils.language_Friend_NoNear_tips:2==e?this.noListTipsLb.text=t.LanguageUtils.language_Team_NearNoTeamList_tips:3==e&&(this.noListTipsLb.text=t.LanguageUtils.language_Team_NoOnlineFriendList_tips)):this.noListTipsLb.visible=!1},i.prototype.sort=function(e,i){var n=t.TeamMgr.ins().myTeamleaderid;return e.roleId==n?-1:i.roleId==n?1:e.online&&!i.online?-1:!e.online&&i.online?1:e.level>i.level?-1:e.level<i.level?1:void 0},i.prototype.destroy=function(){t.ViewManager.ins().isShow(t.CommonFunMenuView)&&t.ViewManager.ins().close(t.CommonFunMenuView),t.MouseScroller.unbind(this.scroller),this.gList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),t.EventManager.ins().removeEvent(t.FriendEvent.ITEM_ONCHANGE,this.onListChange,this)},i}(t.BaseView);t.TeamViewPage=e,__reflect(e.prototype,"app.TeamViewPage")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.clickParam=null,i.closeCD=30,i.popID=0,i.skinName="ActivityTimingSkin1",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.itemList.itemRenderer=t.ItemBase},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(this.addTouchEvent(this.goBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),e&&e[0]&&(this.popID=e[0]),0!=this.popID){var n=t.GlobalConfig.PopupConfig[this.popID];n&&(this.title.textFlow=t.TextFlowMaker.generateTextFlow(n.title),this.desc.textFlow=t.TextFlowMaker.generateTextFlow(n.description),this.goBtn.label=n.buttondes+"",this.closeCD=n.closeCD,this.itemList.dataProvider=new eui.ArrayCollection(n.rewards),this.clickParam=n.btnfunc)}this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this)
},i.prototype.updateTime=function(){var e=this.closeCD-=1;this.cdLab.text=e+"秒后关闭",0>=e&&(this.cdLab.text="",t.TimerManager.ins().remove(this.updateTime,this),t.ViewManager.ins().close(this))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.goBtn:this.clickParam&&this.clickResult(this.clickParam),t.ViewManager.ins().close(this);break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.clickResult=function(e){switch(e.type){case 1:e.param1&&(t.ViewManager.ins().isShow(e.param1)||t.ViewManager.ins().open(e.param1));break;case 2:e.param1&&e.param2&&(t.ViewManager.ins().isShow(e.param1)||t.ViewManager.ins().open(e.param1,e.param2));break;case 3:e.param1&&e.param2&&(t.ViewManager.ins().isShow(e.param1)||t.ViewManager.ins().open(e.param1),t.ViewManager.ins().isShow(e.param2)||t.ViewManager.ins().open(e.param2));break;case 4:}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.TimerManager.ins().remove(this.updateTime,this),this.removeTouchEvent(this.goBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.ActivityTimePopWin1=e,__reflect(e.prototype,"app.ActivityTimePopWin1"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.clickParam=null,i.closeCD=30,i.popID=0,i.skinName="ActivityTimingSkin2",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(this.addTouchEvent(this.goBtn,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),e&&e[0]&&(this.popID=e[0]),0!=this.popID){var n=t.GlobalConfig.PopupConfig[this.popID];n&&(this.title.textFlow=t.TextFlowMaker.generateTextFlow(n.title),this.desc.textFlow=t.TextFlowMaker.generateTextFlow(n.description),this.goBtn.label=n.buttondes+"",this.closeCD=n.closeCD,this.clickParam=n.btnfunc)}this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this)},i.prototype.updateTime=function(){var e=this.closeCD-=1;this.cdLab.text=e+"秒后关闭",0>=e&&(this.cdLab.text="",t.TimerManager.ins().remove(this.updateTime,this),t.ViewManager.ins().close(this))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.goBtn:this.clickParam&&this.clickResult(this.clickParam),t.ViewManager.ins().close(this);break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.clickResult=function(e){switch(e.type){case 1:e.param1&&t.ViewManager.ins().open(e.param1);break;case 2:e.param1&&e.param2&&t.ViewManager.ins().open(e.param1,e.param2);break;case 3:e.param1&&e.param2&&(t.ViewManager.ins().isShow(e.param1)||t.ViewManager.ins().open(e.param1),t.ViewManager.ins().isShow(e.param2)||t.ViewManager.ins().open(e.param2));break;case 4:}},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.TimerManager.ins().remove(this.updateTime,this),this.removeTouchEvent(this.goBtn,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.ActivityTimePopWin2=e,__reflect(e.prototype,"app.ActivityTimePopWin2"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.ins=function(){return e.ins.call(this)},Object.defineProperty(n.prototype,"view",{get:function(){return this._view&&this._view.parent||(t.ViewManager.ins().open(t.TipsView),this._view=t.ViewManager.ins().getView(t.TipsView)),this._view},enumerable:!0,configurable:!0}),n.prototype.showItemTips=function(e){t.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showItemTips,e)},n.prototype.showRightItemTips=function(e){t.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showRightItemTips,e)},n.prototype.showJingYanTips=function(e){t.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showJingYanTips,e)},n.prototype.showAttrTips=function(e){t.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showAttrTips,e)},n.prototype.showMoneyTips=function(e){t.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showMoneyTips,e)},n.prototype.showUITips=function(e){t.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showUITips,e)},n.prototype.showFightTips=function(e){t.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showFightTips,e)},n.prototype.showJobAttrTips=function(e){t.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showJobAttrTips,e)},n.prototype.showItemUseTips=function(t,e){this.view.showItemUseTips(t,e)},n.prototype.showBossRefreshTips=function(){this.view.showBossTip()},n.prototype.shouwTips=function(e,n,s,a,r){switch(void 0===r&&(r=null),this.closeTips(),this.thisObject=e,this.thisObject&&this.thisObject.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.closeTips,this),n){case i.TIPS_BUFF:this.tipsView=t.ObjectPool.pop("app.TipsBuffView"),this.tipsView.onResizeUI(s,a);break;case i.TIPS_EQUIP:this.tipsView=t.ObjectPool.pop("app.TipsEquipView"),this.tipsView.updateStr(s,a,i.TIPS_EQUIP);break;case i.TIPS_ROLE_EQUIP:this.tipsView=t.ObjectPool.pop("app.TipsEquipView"),this.tipsView.updateStr(s,a,i.TIPS_ROLE_EQUIP,r);break;case i.TIPS_EQUIPCONTRAST:this.tipsView=t.ObjectPool.pop("app.TipsEquipContrastView"),this.tipsView.updateStr(s,a,r);break;case i.TIPS_SKILL_DESC:this.tipsView=t.ObjectPool.pop("app.TipsSkillDescView"),this.tipsView.updateStr(s,a);break;case i.TIPS_DROP:this.tipsView=t.ObjectPool.pop("app.TipsDropView"),this.tipsView.onResizeUI(s,a);break;case i.TIPS_MONEY:this.tipsView=t.ObjectPool.pop("app.TipsMoneyView"),this.tipsView.updateStr(s,a);break;case i.TIPS_FOURIMAGE:this.tipsView=t.ObjectPool.pop("app.FourImagesShowInfoView"),this.tipsView.updateStr(s,a);break;case i.TIPS_RANKTIPS:this.tipsView=t.ObjectPool.pop("app.RankTipsView"),this.tipsView.updateStr(s,a);break;case i.TIPS_NPCLOOKREWARDS:this.tipsView=t.ObjectPool.pop("app.TipsLookRewardsView"),this.tipsView.updateStr(s,a);break;case i.TIPS_FASHION:this.tipsView=t.ObjectPool.pop("app.TipsEquipFashionView"),this.tipsView.updateStr(s,a,i.TIPS_EQUIP);break;case i.TIPS_SOLDIERSOUL:this.tipsView=t.ObjectPool.pop("app.TipsSoldierSoulView"),this.tipsView.updateStr(s,a);break;case i.TIPS_WordFormula:this.tipsView=t.ObjectPool.pop("app.WordFormulaShowInfoView"),this.tipsView.updateStr(s,a)}this.tipsView&&t.LayerManager.UI_Tips.addChild(this.tipsView)},n.prototype.closeTips=function(){this.thisObject&&this.thisObject.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.closeTips,this),this.thisObject=null,this.tipsView&&(this.tipsView.close(),t.DisplayUtils.removeFromParent(this.tipsView),t.ObjectPool.push(this.tipsView),this.tipsView=null)},n}(t.BaseClass);t.UserTips=e,__reflect(e.prototype,"app.UserTips");var i=function(){function t(){}return t.TIPS_BUFF=1,t.TIPS_EQUIP=2,t.TIPS_EQUIPCONTRAST=3,t.TIPS_SKILL_DESC=4,t.TIPS_ROLE_EQUIP=5,t.TIPS_DROP=6,t.TIPS_CIRCLE_DESC=7,t.TIPS_MONEY=8,t.TIPS_FOURIMAGE=9,t.TIPS_RANKTIPS=10,t.TIPS_NPCLOOKREWARDS=11,t.TIPS_FASHION=12,t.TIPS_SOLDIERSOUL=13,t.TIPS_WordFormula=14,t}();t.TipsType=i,__reflect(i.prototype,"app.TipsType")}(app||(app={}));var app;!function(t){var e;!function(t){t[t.EquipTips=0]="EquipTips",t[t.UseItemTips=1]="UseItemTips",t[t.UseItemTips2=2]="UseItemTips2",t[t.UseItemTips3=3]="UseItemTips3",t[t.ItemOpenUITips=4]="ItemOpenUITips"}(e=t.ItemUserTipsType||(t.ItemUserTipsType={}));var i=function(i){function n(){var t=i.call(this)||this;return t.tipsList={},t}return __extends(n,i),n.ins=function(){return i.ins.call(this)},n.prototype.addTipsObj=function(i){if(!this.tipsList[i.wItemId]){var n=t.GlobalConfig.StdItems[i.wItemId];if(n&&(!n.openDaylimit||t.GlobalData.sectionOpenDay>n.openDaylimit)){var s=t.GlobalConfig.ItemOpenUIConfig[i.wItemId];s&&t.ViewManager.ins().isCheckOpen(s.openLimit)&&!t.ViewManager.ins().isCheckClose(s.closeLimit)&&this.isCanRedItem(i.wItemId)&&(this.tipsList[i.wItemId]={type:e.ItemOpenUITips,data:i},t.TimerManager.ins().isExists(this.showItemTip,this)||t.TimerManager.ins().doTimer(1e3,1,this.showItemTip,this));var a=t.GlobalConfig.UseItemConfig[n.type];if(a){if(a.exclude)for(var r in a.exclude)if(a.exclude[r]==n.id)return;t.ViewManager.ins().isCheckOpen(a.openLimit)&&!t.ViewManager.ins().isCheckClose(a.closeLimit)&&(1==a.useType?this.tipsList[i.wItemId]={type:e.UseItemTips3,data:i}:n.dup>1?this.tipsList[i.wItemId]={type:e.UseItemTips2,data:i}:this.tipsList[i.wItemId]={type:e.UseItemTips,data:i},t.TimerManager.ins().isExists(this.showItemTip,this)||t.TimerManager.ins().doTimer(1e3,1,this.showItemTip,this))}}}},n.prototype.removeTipsObj=function(e){var i=t.GlobalConfig.StdItems[e.wItemId];if(i)if(1==e.bagType)for(var n in t.EquipMgr.equipSouce)t.EquipMgr.equipSouce[n].series==e.series&&delete t.EquipMgr.equipSouce[n];else this.tipsList[e.wItemId]&&delete this.tipsList[e.wItemId]},n.prototype.clearAllData=function(){t.EquipMgr.equipSouce={},this.tipsList={}},n.prototype.showItemTip=function(e){return void 0===e&&(e=!1),e&&(t.TimerManager.ins().remove(this.goodEquipTimer,this),t.TimerManager.ins().remove(this.useItemTimer,this)),t.TimerManager.ins().isExists(this.goodEquipTimer,this)||t.TimerManager.ins().isExists(this.useItemTimer,this)?void 0:t.SettingMgr.ins().getcheckBox(t.SetUpTypeTEnum.SetUp_Basics,t.SetUpEnum.SetUp_Type_Recommend)&&this.getEquipData()?(t.TimerManager.ins().doTimer(7200,0,this.goodEquipTimer,this),void this.goodEquipTimer()):this.getUseItemData()?(t.TimerManager.ins().doTimer(7200,0,this.useItemTimer,this),void this.useItemTimer()):void 0},n.prototype.goodEquipTimer=function(){var i=this.getEquipData();return null==i?(t.TimerManager.ins().remove(this.goodEquipTimer,this),void this.showItemTip()):void t.UserTips.ins().showItemUseTips(i,e.EquipTips)},n.prototype.useItemTimer=function(){var e=this.getUseItemData();return null==e?(t.TimerManager.ins().remove(this.useItemTimer,this),void this.showItemTip()):void t.UserTips.ins().showItemUseTips(e.data,e.type)},n.prototype.isCanRedItem=function(e){var i;return i=t.BlessMgr.ins().getRedById(e),i>0?!0:(i=t.GhostMgr.ins().getRedById(e),i>0?!0:(i=t.MeridiansMgr.ins().getRedById(e),i>0?!0:(i=t.StrengthenMgr.ins().getRedById(e),i>0?!0:!1)))},n.prototype.getEquipData=function(){for(var e in t.EquipMgr.equipSouce)return t.EquipMgr.equipSouce[e];return null},n.prototype.getUseItemData=function(){for(var t in this.tipsList)return this.tipsList[t];return null},n}(t.BaseClass);t.ItemUserTipsManage=i,__reflect(i.prototype,"app.ItemUserTipsManage")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.bitLabArr=[],t.tarPosArr=[],t.addNumArr=[],t.addNumPos=[],t.skinName="TipsActorSkin",t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.setData=function(e,i,n){this.fireMc||(this.fireMc=t.ObjectPool.pop("app.MovieClip"),this.fireMc.scaleX=this.fireMc.scaleY=1,this.fireMc.touchEnabled=!1,this.fireMc.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.fireMc)),this.jobImg=new eui.Image,this.jobImg.y=25,this.jobImg.left=65,this.addChildAt(this.jobImg,0),this.bg=new eui.Image,this.addChildAt(this.bg,0),this.bg.source="fightnum_bg";var s=e.toString(),a=i.toString();(i-e).toString();this.jobImg.source=1==n?"fightnum_z":2==n?"fightnum_m":"fightnum_d",this.bitLabArr=[],this.tarPosArr=[];for(var r=0;r<a.length;r++){var o=new eui.BitmapLabel;o.width=22,o.font="num_5_fnt",o.lineSpacing=2,o.text="0123456789",o.x=20*r,o.y=a.length>s.length?0==r?0:-28*+s[r-1]:-28*+s[r],this.attrStrGrp.addChild(o),this.bitLabArr.push(o),this.tarPosArr.push(-28*+a[r])}this.playEffMc(),this.playTween()},i.prototype.playEffMc=function(){var t=this;this.fireMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_shuxing",1,function(){t.fireMc&&(t.fireMc.destroy(),t.fireMc=null)})},i.prototype.playTween=function(){if(this.bitLabArr.length>0){var e=this,i=this.tarPosArr.pop(),n=this.bitLabArr.pop();if(n.y==i)return void e.playTween();egret.Tween.removeTweens(n);var s=egret.Tween.get(n);s.to({y:n.y},150).to({y:i},600).call(function(){e.playTween()})}else this.addToEvent||(this.addToEvent=!0,t.TimerManager.ins().remove(this.removeFromParent,this),t.TimerManager.ins().doTimer(3e3,1,this.removeFromParent,this))},i.prototype.playAddTween=function(){if(this.addNumArr.length>0){var t=this,e=this.addNumPos.pop(),i=this.addNumArr.pop();if(i.y==e)return void t.playAddTween();egret.Tween.removeTweens(i);var n=egret.Tween.get(i);n.to({y:i.y},150).to({y:e},600).call(function(){t.playAddTween()})}},i.prototype.removeFromParent=function(){t.TimerManager.ins().remove(this.removeFromParent,this),this.attrStrGrp.removeChildren(),this.tarNumGrp.removeChildren(),this.addToEvent=!1,t.DisplayUtils.removeFromParent(this.jobImg),this.jobImg=null,t.DisplayUtils.removeFromParent(this.bg),this.bg=null,t.DisplayUtils.removeFromParent(this),egret.Tween.removeTweens(this),t.ObjectPool.push(this)},i}(t.BaseView);t.TipsActorView=e,__reflect(e.prototype,"app.TipsActorView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.cereateLabel=function(){this.levelLab||(this.levelLab=new eui.Label,this.levelLab.size=20,this.levelLab.touchEnabled=!1,this.levelLab.textColor=2682369,this.levelLab.textAlign="left",this.levelLab.stroke=1,this.levelLab.strokeColor=0,this.addChild(this.levelLab))},Object.defineProperty(i.prototype,"labelText",{get:function(){return this._labelText},set:function(e){this._labelText=e,this.levelLab.textFlow=t.TextFlowMaker.generateTextFlow(this._labelText),this.levelLab.alpha=1,this.addToEvent||(this.addToEvent=!0,t.TimerManager.ins().remove(this.removeFromParent,this),t.TimerManager.ins().doTimer(3e3,1,this.removeFromParent,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelColor",{set:function(t){this.levelLab.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelSize",{set:function(t){this.levelLab.size=t},enumerable:!0,configurable:!0}),i.prototype.removeFromParent=function(){this.addToEvent=!1,t.DisplayUtils.removeFromParent(this),egret.Tween.removeTweens(this),t.ObjectPool.push(this)},i}(t.BaseView);t.TipsArticlesItem=e,__reflect(e.prototype,"app.TipsArticlesItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._cdTime=0,t.skinName="TipsAttrItemSkin",t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"attrImgSource",{set:function(t){this.attrImg.source=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cdTime",{get:function(){return this._cdTime},set:function(t){this._cdTime=t},enumerable:!0,configurable:!0}),i.prototype.checkTime=function(){return egret.getTimer()>this._cdTime?!0:!1},i.prototype.labelText=function(e,i){this.imgBg.source="fightnum_bg2",this.strImg.source=e,this.valueStr.text="+"+i,this.viewGrp.x=this.viewGrp.y=this.viewGrp.alpha=0,egret.Tween.removeTweens(this.viewGrp);var n=egret.Tween.get(this.viewGrp);n.to({x:-130,alpha:1},150),this.addToEvent||(this.addToEvent=!0,t.TimerManager.ins().remove(this.removeFromParent,this),t.TimerManager.ins().doTimer(3e3,1,this.removeFromParent,this))},i.prototype.removeFromParent=function(){this.addToEvent=!1,t.DisplayUtils.removeFromParent(this),egret.Tween.removeTweens(this),t.ObjectPool.push(this)},i}(t.BaseView);t.TipsAttrItem=e,__reflect(e.prototype,"app.TipsAttrItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="ActivityCommonViewSkin",i.name="ActivityDefendTipsView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System61)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e[0]){var n=e[0],s=t.GlobalConfig.Scenes[t.GameMap.mapID],a=s&&s.scencename,r=t.StringUtils.replace(t.LanguageUtils.language_Tips93,a,t.DateUtils.getFormatBySecond(n,t.DateUtils.TIME_FORMAT_19));this.strLab.textFlow=t.TextFlowMaker.generateTextFlow(r)}this.addTouchEvent(this.closeBtn,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.closeBtn,this.onClick)},i}(t.BaseEuiView);t.ActivityDefendTipsView=e,__reflect(e.prototype,"app.ActivityDefendTipsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="TipsBossRefreshSkin",i.btn_close.name="closeBtn",i.btn_go.name="goBtn",i.checkBox.selected=!1,i.labTitle.text=t.LanguageUtils.language_Common_209,i.checkLabel.text=t.LanguageUtils.language_Common_210,i}return __extends(i,e),Object.defineProperty(i.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e;var i=t.GlobalConfig.Monster[e.entityid];i&&(this.itemIcon.source="monhead"+i.modelid,this.itemName.text=i.name),this.checkBox.setCallback(this,this.clickCheck),this.checkBox.initUI()},enumerable:!0,configurable:!0}),i.prototype.clickCheck=function(){t.BossMgr.isShowTip=!this.checkBox.selected},i}(t.BaseView);t.TipsBossRefreshView=e,__reflect(e.prototype,"app.TipsBossRefreshView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="TipsBuffSkin",e}return __extends(e,t),e.prototype.inItFunction=function(){this.touchEnabled=this.touchChildren=!1},e.prototype.onResizeUI=function(e,i){t.prototype.onResizeUI.call(this,e,i),e&&i&&(this.data=e,this.xy=i,this.txt.text=e+"")},e.prototype.close=function(){this.data=null,this.txt.text=""},e}(t.TipsBase);t.TipsBuffView=e,__reflect(e.prototype,"app.TipsBuffView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.htmlParser=new egret.HtmlTextParser,e.skinName="TipsDropSkin",e}return __extends(e,t),e.prototype.inItFunction=function(){this.touchEnabled=this.touchChildren=!1},e.prototype.onResizeUI=function(e,i){t.prototype.onResizeUI.call(this,e,i),e&&i&&(this.data=e,this.xy=i,this.txt.textFlow=this.htmlParser.parser(e+""),this.x-=this.txt.textWidth/2)},e.prototype.close=function(){},e}(t.TipsBase);t.TipsDropView=e,__reflect(e.prototype,"app.TipsDropView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="TipsEquipContrastSkin",gamelib.DeviceUtils.IsMobile?t.touchEnabled=t.touchChildren=!0:(t.touchEnabled=t.touchChildren=!1,t.tips1Scroller.maxHeight=1e4,t.tips2Scroller.maxHeight=1e4),t}return __extends(i,e),i.prototype.inItFunction=function(){},i.prototype.updateStr=function(i,n,s){if(i&&s){e.prototype.onResizeUI.call(this,i,n),this.xy=n,this.data=i;var a=i,r=s;if(a&&r){var o=t.GlobalConfig.StdItems[a.wItemId],l=t.GlobalConfig.StdItems[r.wItemId];if(o&&l){this.imgBg1.visible=!1,this.imgBg2.visible=!1,o.showQuality>0&&(this.imgBg1.visible=!0,this.imgBg1.source="bag_piliangbg_"+o.showQuality),o.type<100&&o.showQuality>1&&(this.itemMc1||(this.itemMc1=t.ObjectPool.pop("app.MovieClip"),this.itemMc1.scaleX=this.itemMc1.scaleY=1,this.itemMc1.touchEnabled=!1,this.itemMc1.blendMode=egret.BlendMode.ADD,this.effGrp1.addChild(this.itemMc1)),this.itemMc1.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_kuang"+o.showQuality,-1)),l.showQuality>0&&(this.imgBg2.visible=!0,this.imgBg2.source="bag_piliangbg_"+l.showQuality),o.type<100&&l.showQuality>1&&(this.itemMc2||(this.itemMc2=t.ObjectPool.pop("app.MovieClip"),this.itemMc2.scaleX=this.itemMc2.scaleY=1,this.itemMc2.touchEnabled=!1,this.itemMc2.blendMode=egret.BlendMode.ADD,this.effGrp2.addChild(this.itemMc2)),this.itemMc2.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_kuang"+l.showQuality,-1));var h="",p=t.ColorUtil.GOODS_COLOR[o.showQuality];h=""!=a.topLine&&void 0!=a.topLine?"|C:"+p+"&T:"+o.name+" ["+t.LanguageUtils.language_Omission_txt133+"]|":"|C:"+p+"&T:"+o.name+"|",this.nameLab.textFlow=t.TextFlowMaker.generateTextFlow1(h);var u="",c=t.ColorUtil.GOODS_COLOR[l.showQuality];u=""!=r.topLine&&void 0!=r.topLine?"|C:"+c+"&T:"+l.name+" ["+t.LanguageUtils.language_Omission_txt133+"]|":"|C:"+c+"&T:"+l.name+"|",this.nameLab2.textFlow=t.TextFlowMaker.generateTextFlow1(u);var g=[];if(o.staitcAttrs)for(var d=0;d<o.staitcAttrs.length;d++)g.push(o.staitcAttrs[d]);var m=t.AttributeData.getBestAttrs(a),f=[];if(l.staitcAttrs)for(var d=0;d<l.staitcAttrs.length;d++)f.push(l.staitcAttrs[d]);var v=t.AttributeData.getBestAttrs(r);this.getAttrs(g,m,a,1),this.getAttrs(f,v,r,2),e.prototype.onResizeUI.call(this,null,n),this.tips1Scroller.viewport.scrollV=0,this.tips2Scroller.viewport.scrollV=0,this.tips1Scroller&&this.tips1Scroller.verticalScrollBar&&(this.tips1Scroller.verticalScrollBar.autoVisibility=!1,this.tips1Scroller.verticalScrollBar.visible=!1),this.tips2Scroller&&this.tips2Scroller.verticalScrollBar&&(this.tips2Scroller.verticalScrollBar.autoVisibility=!1,this.tips2Scroller.verticalScrollBar.visible=!1)}}}},i.prototype.getAttrs=function(e,i,n,s){void 0===n&&(n=null);var a="",r=t.GlobalConfig.StdItems[n.wItemId];if(e&&i&&""!=n.topLine&&void 0!=n.topLine){var o=t.AttributeData.getTotalAttrs(e,i);a=this.getAllAttrs(o)}else if(e){var l=e.concat();a=this.getAllAttrs(l)}if(r&&r.suitId>0&&(a+="\n",a+=this.getEquipSuitAttr(r.suitId)),r.resonanceId){var h=this.getEquipResonanceAttr(r.resonanceId);""!=h&&(a+="\n",a+="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt146+"]|",a+="\n",a+=h)}a+="\n",n.wStar>0?(a+="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt134+"]|",1==s?(this.bindLab1.textFlow=t.TextFlowMaker.generateTextFlow(a),this.createStar(1,n,r)):2==s&&(this.bindLab2.textFlow=t.TextFlowMaker.generateTextFlow(a),this.createStar(2,n,r))):(r.dup||""!=n.sourceStr&&(a+=n.sourceStr+"\n"),a+=this.getOtherAttr(r,n),1==s?this.bindLab1.textFlow=t.TextFlowMaker.generateTextFlow(a):2==s&&(this.bindLab2.textFlow=t.TextFlowMaker.generateTextFlow(a)))},i.prototype.getAllAttrs=function(e){var i=[],n=[],s="",a="";for(var r in e){var o=e[r];5==o.type||9==o.type||11==o.type||13==o.type||15==o.type||17==o.type||19==o.type||21==o.type||23==o.type||25==o.type||27==o.type?i.push(o):n.push(o)}if(i.length>0){s="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt135+"]|\n";for(var l=0;l<i.length;l++)a=t.AttributeData.getItemAttStrByType(i[l],i),""!=a&&(s+=a+"\n")}if(n.length>0){s+="\n|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt136+"]|\n";for(var l=0;l<n.length;l++)a=t.AttributeData.getItemAttStrByType(n[l],n),""!=a&&(s+="|C:0x78fff5&T:"+a+"|\n")}return s},i.prototype.getEquipSuitAttr=function(e){var i=t.GlobalConfig.SuitItemCfg[e],n=0,s="",a="";if(i){for(var r in i.NeedItemId){var o=t.EquipItemMgr.ins().getAllEquip(i.NeedItemId[r]),l=t.GlobalConfig.StdItems[i.NeedItemId[r]];o?(l&&(s+="|C:0x28ee01&T:"+l.name+"|\n"),n+=1):l&&(s+="|C:0x808080&T:"+l.name+"|\n")}var h=Math.floor(e/100),p=e%100,u=t.EquipItemMgr.ins().getSuitAttrColor(h,p,i.suitnum),c=[];for(var g in i.attr)c.push(i.attr[g]);for(var d="",m="",r=0;r<c.length;r++)d=t.AttributeData.getItemAttStrByType(c[r],c),""!=d&&(m+="|C:"+u+"&T:"+d+"|\n");a+="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt137+"]("+n+"/"+i.suitnum+")|\n",a+=s,a+=m}return a},i.prototype.getEquipResonanceAttr=function(e){var i="",n="",s=t.GlobalConfig.ResonanceItemCfg[e],a=t.EquipItemMgr.ins().equips;if(s&&a){for(var r=[],o=0;o<s.attr.length;o++)for(var l=0;l<a.length;l++)if(a[l].wItemId==s.attr[o].itemid){r=s.attr[o].attr;break}for(var o=0;o<r.length;o++)i=t.AttributeData.getItemAttStrByType(r[o],r),""!=i&&(n+="|C:0x78fff5&T:"+i+"|\n")}return n},i.prototype.getStarlvAttr=function(e,i){var n="",s="",a=t.GlobalConfig.UpstarConfig[e][i];if(a){var r=[];for(var o in a.attribute)r.push(a.attribute[o]);for(var o=0;o<r.length;o++)n=t.AttributeData.getItemAttStrByType(r[o],r),""!=n&&(s+="|C:0xf133ff&T:"+n+"|\n")}return s},i.prototype.getOtherAttr=function(e,i){var n="",s="",a=t.AttributeData.getItemUseCond(e.conds);return a&&(n+=a+"\n"),e.desc&&(n+=e.desc+"\n"),""!=i.topLine&&void 0!=i.topLine&&(s=t.LanguageUtils.language_Common_2),s="|C:0x318aff&T:"+s+t.AttributeData.getItemBagType(e)+t.AttributeData.getItemBindByType(e)+"|\n",n+=s},i.prototype.createStar=function(e,i,n){if(!this["starGrp"+e]){this["starGrp"+e]=new eui.Group,this["starGrp"+e].x=15,this["starGrp"+e].y=this["bindLab"+e].height+12,this["starGrp"+e].width=300;var s=new eui.VerticalLayout;s.gap=9,this["starGrp"+e].layout=s,this["strGrp"+e].addChild(this["starGrp"+e])}var a=new eui.Group;a.width=300;var r=new eui.HorizontalLayout;r.gap=0,a.layout=r,this["starGrp"+e].addChild(a);for(var o=1;o<=i.wStar;o++){var l=new t.TipsStarLevel;a.addChild(l),i.wStar<=6?l.starLvImg="forge_xx1":l.starLvImg="common_xx",o<=i.wStar?l.starLvVis=!0:l.starLvVis=!1}var h=new eui.Label;h.size=20,h.width=300,h.stroke=2,h.strokeColor=0,h.lineSpacing=4,this["starGrp"+e].addChild(h);var p="";p+=this.getStarlvAttr(n.id,i.wStar),""!=p&&(p+="\n"),n.dup||""!=i.sourceStr&&(p+=i.sourceStr+"\n"),p+=this.getOtherAttr(n,i),h.textFlow=t.TextFlowMaker.generateTextFlow(p)},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.nameLab.text="",this.nameLab2.text="",this.bindLab1.text="",this.bindLab2.text="",this.starGrp1&&(t.DisplayUtils.removeFromParent(this.starGrp1),this.starGrp1=null),this.starGrp2&&(t.DisplayUtils.removeFromParent(this.starGrp2),this.starGrp2=null),this.itemMc1&&(this.itemMc1.destroy(),this.itemMc1=null),this.itemMc2&&(this.itemMc2.destroy(),this.itemMc2=null)},i}(t.TipsBase);t.TipsEquipContrastView=e,__reflect(e.prototype,"app.TipsEquipContrastView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="TipsEquipFashionSKin",gamelib.DeviceUtils.IsMobile?t.touchEnabled=t.touchChildren=!0:t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.inItFunction=function(){},i.prototype.updateStr=function(i,n,s,a){if(void 0===s&&(s=null),void 0===a&&(a=0),i){var r,o="";if(i instanceof t.userItem||i instanceof t.TradeLineData){if(s&&s==t.TipsType.TIPS_ROLE_EQUIP&&(r=t.EquipItemMgr.ins().getItemDataBySeries(i.series,a)),s&&s==t.TipsType.TIPS_EQUIP&&(r=i),r&&r.wItemId){this.splitData=r;var l=t.GlobalConfig.StdItems[r.wItemId];if(l){this.imgBg.visible=!1,l.showQuality>0&&(this.imgBg.visible=!0,this.imgBg.source="bag_piliangbg_"+l.showQuality),l.type<100&&l.showQuality>1&&(this.itemMc||(this.itemMc=t.ObjectPool.pop("app.MovieClip"),this.itemMc.scaleX=this.itemMc.scaleY=1,this.itemMc.touchEnabled=!1,this.itemMc.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.itemMc)),this.itemMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_kuang"+l.showQuality,-1));var h=[];if(l.staitcAttrs)for(var p=0;p<l.staitcAttrs.length;p++)h.push(l.staitcAttrs[p]);var u=t.AttributeData.getBestAttrs(r);if(1==r.bagType){var c=15774976,g="";c=t.ColorUtil.GOODS_COLOR[l.showQuality],g=l.staitcAttrs&&""!=r.topLine&&void 0!=r.topLine&&u?"|C:"+c+"&T:"+l.name+" ["+t.LanguageUtils.language_Omission_txt133+"]|":"|C:"+c+"&T:"+l.name+"|",this.nameLab.textFlow=t.TextFlowMaker.generateTextFlow1(g);if(l.staitcAttrs&&""!=r.topLine&&void 0!=r.topLine&&u){var d=t.AttributeData.getTotalAttrs(h,u);o=this.getAllAttrs(d)}else l.staitcAttrs&&(o=this.getAllAttrs(l.staitcAttrs));if(l.suitId>0&&(o+="\n",o+=this.getEquipSuitAttr(l.suitId,a)),r.wStar>0){if(o+="\n",o+="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt134+"]|",this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o),!this.starGrp){this.starGrp=new eui.Group,this.starGrp.x=15,this.starGrp.y=this.bindLab.height+44,this.starGrp.width=300;var m=new eui.VerticalLayout;m.gap=9,this.starGrp.layout=m,this.strGrp.addChild(this.starGrp)}var f=new eui.Group;f.width=300;var v=new eui.HorizontalLayout;v.gap=0,f.layout=v,this.starGrp.addChild(f);for(var _=1;_<=r.wStar;_++){var y=new t.TipsStarLevel;f.addChild(y),r.wStar<=6?y.starLvImg="forge_xx1":y.starLvImg="common_xx",_<=r.wStar?y.starLvVis=!0:y.starLvVis=!1}var T=new eui.Label;T.size=20,T.width=300,T.stroke=2,T.strokeColor=0,T.lineSpacing=4,this.starGrp.addChild(T);var M="";M+=this.getStarlvAttr(l.id,r.wStar),""!=M&&(M+="\n"),l.dup||""!=r.sourceStr&&(M+=r.sourceStr+"\n"),M+=this.getOtherAttr(l,r),T.textFlow=t.TextFlowMaker.generateTextFlow(M)}else o+="\n",l.dup||""!=r.sourceStr&&(o+=r.sourceStr+"\n"),o+=this.getOtherAttr(l,r),this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o)}else l.openDaylimit&&t.GlobalData.sectionOpenDay<=l.openDaylimit&&(o+=t.StringUtils.replace(t.LanguageUtils.language_Common_214,l.openDaylimit-t.GlobalData.sectionOpenDay+1)+"\n"),o+=this.setAttr(l),l.dup>1?gamelib.DeviceUtils.IsMobile?(this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o),!this.splitBtn&&this.splitData.btCount>1&&(this.splitBtn=new eui.Button,this.splitBtn.skinName="Btn9Skin",this.splitBtn.label="拆 分",this.splitBtn.name="tipsview",this.splitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.splitFun,this),this.splitBtn.x=113,this.splitBtn.y=this.bindLab.height+300,this.strGrp.addChild(this.splitBtn))):(o+=t.LanguageUtils.language_Tips7,this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o)):this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o);gamelib.DeviceUtils.IsMobile&&!this.useItemBtn&&l.isShowUseBtn&&(this.useItemBtn=new eui.Button,this.useItemBtn.skinName="Btn9Skin",this.useItemBtn.label="使 用",this.useItemBtn.name="tipsview",this.useItemBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useItemFun,this),this.useItemBtn.x=this.splitBtn?186:113,this.useItemBtn.y=this.bindLab.height+300,this.splitBtn&&(this.splitBtn.x=39),this.strGrp.addChild(this.useItemBtn))}}}else if(i instanceof t.StdItems)if(1==i.packageType){this.imgBg.visible=!1,i.showQuality>0&&(this.imgBg.visible=!0,this.imgBg.source="bag_piliangbg_"+i.showQuality),i.type<100&&i.showQuality>1&&(this.itemMc||(this.itemMc=t.ObjectPool.pop("app.MovieClip"),this.itemMc.scaleX=this.itemMc.scaleY=1,this.itemMc.touchEnabled=!1,this.itemMc.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.itemMc)),this.itemMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_kuang"+i.showQuality,-1));var C=t.ColorUtil.GOODS_COLOR[i.showQuality];if(this.nameLab.textFlow=t.TextFlowMaker.generateTextFlow1("|C:"+C+"&T:"+i.name+"|"),i.staitcAttrs){var b=i.staitcAttrs.concat();o=this.getAllAttrs(b)}i.suitId>0&&(o+="\n",o+=this.getEquipSuitAttr(i.suitId)),""!=o&&(o+="\n");var I="",S="",E=t.AttributeData.getItemUseCond(i.conds);""!=E&&(I+=E+"\n"),i.desc&&(I+=i.desc+"\n"),S="|C:0x0066ff&T:"+S+t.AttributeData.getItemBagType(i)+t.AttributeData.getItemBindByType(i)+"|\n",I+=S,o+=I,this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o)}else o+=this.setAttr(i),i.dup>1&&(o+=t.LanguageUtils.language_Tips7),this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o);e.prototype.onResizeUI.call(this,i,n)}},i.prototype.setAttr=function(e){var i="";this.imgBg.visible=!1,e.showQuality>0&&(this.imgBg.visible=!0,this.imgBg.source="bag_piliangbg_"+e.showQuality),e.type<100&&e.showQuality>1&&(this.itemMc||(this.itemMc=t.ObjectPool.pop("app.MovieClip"),this.itemMc.scaleX=this.itemMc.scaleY=1,this.itemMc.touchEnabled=!1,this.itemMc.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.itemMc)),this.itemMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_kuang"+e.showQuality,-1));var n=t.ColorUtil.GOODS_COLOR[e.showQuality],s="|C:"+n+"&T:"+e.name+"|";if(this.nameLab.textFlow=t.TextFlowMaker.generateTextFlow1(s),e.fashionTips)if(-1!=e.fashionTips.indexOf("sz")){var a=t.EntityMgr.ins().getPayer;
a&&a.propSet&&(this.fashionImg.source=e.fashionTips+"_"+a.propSet.getSex()+"_png")}else this.fashionImg.source=e.fashionTips+"_png";if(127==e.type||131==e.type||133==e.type){e.desc&&(i+=e.desc+"\n");var r="|C:0x0066ff&T:"+t.AttributeData.getItemBagType(e)+"  "+t.AttributeData.getItemBindByType(e)+"|\n";i+=r}else 128==e.type||129==e.type?(i="|C:0x2eb52d&T:"+t.AttributeData.getSlowMedicine(e.staitcAttrs)+"|\n",e.desc&&(i+=e.desc+"\n"),i+="|C:0x0066ff&T:"+t.AttributeData.getItemBagType(e)+"|\n"):130==e.type?(i="|C:0x2eb52d&T:"+t.AttributeData.getShunHuiMedicine(e.staitcAttrs)+"|\n",e.desc&&(i+=e.desc+"\n"),i+="|C:0x0066ff&T:"+t.AttributeData.getItemBagType(e)+"|\n"):(e.desc&&(i+=e.desc+"\n"),i+="|C:0x0066ff&T:"+t.AttributeData.getItemBagType(e)+"|\n");return i},i.prototype.getAllAttrs=function(e){var i=[],n=[],s="",a="";for(var r in e){var o=e[r];5==o.type||9==o.type||11==o.type||13==o.type||15==o.type||17==o.type||19==o.type||21==o.type||23==o.type||25==o.type||27==o.type?i.push(o):n.push(o)}if(i.length>0){s="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt135+"]|\n";for(var l=0;l<i.length;l++)a=t.AttributeData.getItemAttStrByType(i[l],i),""!=a&&(s+=a+"\n")}if(n.length>0){s+="\n|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt136+"]|\n";for(var l=0;l<n.length;l++)a=t.AttributeData.getItemAttStrByType(n[l],n),""!=a&&(s+="|C:0x78fff5&T:"+a+"|\n")}return s},i.prototype.getEquipSuitAttr=function(e,i){void 0===i&&(i=0);var n=t.GlobalConfig.SuitItemCfg[e],s=0,a="",r="";if(n){for(var o in n.NeedItemId){var l=0==i?t.EquipItemMgr.ins().getAllEquip(n.NeedItemId[o]):t.EquipItemMgr.ins().otherPlayerEquips.getAllEquip(n.NeedItemId[o]),h=t.GlobalConfig.StdItems[n.NeedItemId[o]];l?(h&&(a+="|C:0x28ee01&T:"+h.name+"|\n"),s+=1):h&&(a+="|C:0x808080&T:"+h.name+"|\n")}var p=Math.floor(e/100),u=e%100,c=8421504;c=0==i?t.EquipItemMgr.ins().getSuitAttrColor(p,u,n.suitnum):t.EquipItemMgr.ins().otherPlayerEquips.getSuitAttrColor(p,u,n.suitnum);var g=[];for(var d in n.attr)g.push(n.attr[d]);for(var m="",f="",o=0;o<g.length;o++)m=t.AttributeData.getItemAttStrByType(g[o],g),""!=m&&(f+="|C:"+c+"&T:"+m+"|\n");r+="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt137+"]("+s+"/"+n.suitnum+")|\n",r+=a,r+=f}return r},i.prototype.getStarlvAttr=function(e,i){var n="",s="",a=t.GlobalConfig.UpstarConfig[e][i];if(a){var r=[];for(var o in a.attribute)r.push(a.attribute[o]);for(var o=0;o<r.length;o++)n=t.AttributeData.getItemAttStrByType(r[o],r),""!=n&&(s+="|C:0xf133ff&T:"+n+"|\n")}return s},i.prototype.getOtherAttr=function(e,i){var n="",s="",a=t.AttributeData.getItemUseCond(e.conds);return a&&(n+=a+"\n"),e.desc&&(n+=e.desc+"\n"),""!=i.topLine&&void 0!=i.topLine&&(s=t.LanguageUtils.language_Common_2),s="|C:0x0066ff&T:"+s+t.AttributeData.getItemBagType(e)+t.AttributeData.getItemBindByType(e)+"|\n",n+=s},i.prototype.splitFun=function(){t.ViewManager.ins().open(t.BagItemSplitView,this.splitData),t.UserTips.ins().closeTips()},i.prototype.useItemFun=function(){t.BagManager.ins().onUseItem(this.splitData),t.UserTips.ins().closeTips()},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.nameLab.text="",this.bindLab.text="",this.starGrp&&(t.DisplayUtils.removeFromParent(this.starGrp),this.starGrp=null),this.splitBtn&&(t.DisplayUtils.removeFromParent(this.splitBtn),this.splitBtn=null,this.splitData=null),this.useItemBtn&&(t.DisplayUtils.removeFromParent(this.useItemBtn),this.useItemBtn=null),this.itemMc&&(this.itemMc.destroy(),this.itemMc=null)},i}(t.TipsBase);t.TipsEquipFashionView=e,__reflect(e.prototype,"app.TipsEquipFashionView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="TipsEquipSKin",gamelib.DeviceUtils.IsMobile?t.touchEnabled=t.touchChildren=!0:(t.touchEnabled=t.touchChildren=!1,t.tipsScroller.maxHeight=1e4),t}return __extends(i,e),i.prototype.inItFunction=function(){},i.prototype.updateSurplusUseCount=function(e){if(e==this.itemId){var i=t.BagMgr.ins().surplusUseCount[e],n="|C:0x28ee01&T:"+t.LanguageUtils.language_Common_261+i+"|";this.useCountLab.textFlow=t.TextFlowMaker.generateTextFlow1(n)}},i.prototype.updateStr=function(i,n,s,a){if(void 0===s&&(s=null),void 0===a&&(a=0),i){var r,o="";if(i instanceof t.userItem||i instanceof t.TradeLineData){if(s&&s==t.TipsType.TIPS_ROLE_EQUIP&&(r=t.EquipItemMgr.ins().getItemDataBySeries(i.series,a)),s&&s==t.TipsType.TIPS_EQUIP&&(r=i),r&&r.wItemId){this.splitData=r;var l=t.GlobalConfig.StdItems[r.wItemId];if(l){this.itemId=l.id,this.imgBg.visible=!1,l.showQuality>0&&(this.imgBg.visible=!0,this.imgBg.source="bag_piliangbg_"+l.showQuality),l.type<100&&l.showQuality>1&&(this.itemMc||(this.itemMc=t.ObjectPool.pop("app.MovieClip"),this.itemMc.scaleX=this.itemMc.scaleY=1,this.itemMc.touchEnabled=!1,this.itemMc.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.itemMc)),this.itemMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_kuang"+l.showQuality,-1));var h=[];if(l.staitcAttrs)for(var p=0;p<l.staitcAttrs.length;p++)h.push(l.staitcAttrs[p]);if(this.useCountLab.text="",l.UseLimit){var u=t.BagMgr.ins().surplusUseCount[l.id];void 0==u&&(u=l.UseLimit.CanUseCount);var c="|C:0x28ee01&T:"+t.LanguageUtils.language_Common_261+u+"|";this.useCountLab.textFlow=t.TextFlowMaker.generateTextFlow1(c),t.MessageCenter.addListener(t.BagMgr.ins().post_8_13,this.updateSurplusUseCount,this),t.BagMgr.ins().send_8_13(l.id)}var g=t.AttributeData.getBestAttrs(r);if(1==r.bagType){var d=15774976,m="";d=t.ColorUtil.GOODS_COLOR[l.showQuality],m=l.staitcAttrs&&""!=r.topLine&&void 0!=r.topLine&&g?"|C:"+d+"&T:"+l.name+" ["+t.LanguageUtils.language_Omission_txt133+"]|":"|C:"+d+"&T:"+l.name+"|",this.nameLab.textFlow=t.TextFlowMaker.generateTextFlow1(m);if(l.staitcAttrs&&""!=r.topLine&&void 0!=r.topLine&&g){var f=t.AttributeData.getTotalAttrs(h,g);o=this.getAllAttrs(f)}else l.staitcAttrs&&(o=this.getAllAttrs(l.staitcAttrs));if(l.suitId>0&&(o+="\n",o+=this.getEquipSuitAttr(l.suitId,a)),l.resonanceId){var v=this.getEquipResonanceAttr(l.resonanceId,a);""!=v&&(o+="\n",o+="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt146+"]|",o+="\n",o+=v)}if(r.wStar>0){if(o+="\n",o+="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt134+"]|",this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o),!this.starGrp){this.starGrp=new eui.Group,this.starGrp.x=15,this.starGrp.y=this.bindLab.height+12,this.starGrp.width=300,this.starGrp.touchEnabled=!1,this.starGrp.touchChildren=!1;var _=new eui.VerticalLayout;_.gap=9,this.starGrp.layout=_,this.strGrp.addChild(this.starGrp)}var y=new eui.Group;y.touchEnabled=!1,y.touchChildren=!1,y.width=300;var T=new eui.HorizontalLayout;T.gap=0,y.layout=T,this.starGrp.addChild(y);for(var M=1;M<=r.wStar;M++){var C=new t.TipsStarLevel;y.addChild(C),r.wStar<=6?C.starLvImg="forge_xx1":C.starLvImg="common_xx",M<=r.wStar?C.starLvVis=!0:C.starLvVis=!1}var b=new eui.Label;b.size=20,b.width=300,b.stroke=2,b.strokeColor=0,b.lineSpacing=4,this.starGrp.addChild(b);var I="";I+=this.getStarlvAttr(l.id,r.wStar),""!=I&&(I+="\n"),l.dup||""!=r.sourceStr&&(I+=r.sourceStr+"\n"),I+=this.getOtherAttr(l,r),b.textFlow=t.TextFlowMaker.generateTextFlow(I)}else o+="\n",l.dup||""!=r.sourceStr&&(o+=r.sourceStr+"\n"),o+=this.getOtherAttr(l,r),this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o)}else{l.openDaylimit&&t.GlobalData.sectionOpenDay<=l.openDaylimit&&(o+=t.StringUtils.replace(t.LanguageUtils.language_Common_214,l.openDaylimit-t.GlobalData.sectionOpenDay+1)+"\n"),o+=this.setAttr(l),""!=o&&(o+="\n");var S=t.AttributeData.getItemUseCond(l.conds);""!=S&&(o+=S+"\n"),l.dup>1?gamelib.DeviceUtils.IsMobile?(this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o),!this.splitBtn&&this.splitData.btCount>1&&(this.splitBtn=new eui.Button,this.splitBtn.skinName="Btn9Skin",this.splitBtn.label="拆 分",this.splitBtn.name="tipsview",this.splitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.splitFun,this),this.splitBtn.x=113,this.splitBtn.y=this.bindLab.height+18,this.strGrp.addChild(this.splitBtn))):(o+=t.LanguageUtils.language_Tips7+"\n",this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o)):this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o),gamelib.DeviceUtils.IsMobile&&!this.useItemBtn&&l.isShowUseBtn&&(this.useItemBtn=new eui.Button,this.useItemBtn.skinName="Btn9Skin",this.useItemBtn.label="使 用",this.useItemBtn.name="tipsview",this.useItemBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useItemFun,this),this.useItemBtn.x=this.splitBtn?186:113,this.useItemBtn.y=this.bindLab.height+18,this.splitBtn&&(this.splitBtn.x=39),this.strGrp.addChild(this.useItemBtn))}}}}else if(i instanceof t.StdItems){if(this.itemId=i.id,this.useCountLab.text="",i.UseLimit){var u=t.BagMgr.ins().surplusUseCount[i.id];void 0==u&&(u=i.UseLimit.CanUseCount);var c="|C:0x28ee01&T:"+t.LanguageUtils.language_Common_261+u+"|";this.useCountLab.textFlow=t.TextFlowMaker.generateTextFlow1(c),t.MessageCenter.addListener(t.BagMgr.ins().post_8_13,this.updateSurplusUseCount,this),t.BagMgr.ins().send_8_13(i.id)}if(1==i.packageType){this.imgBg.visible=!1,i.showQuality>0&&(this.imgBg.visible=!0,this.imgBg.source="bag_piliangbg_"+i.showQuality),i.type<100&&i.showQuality>1&&(this.itemMc||(this.itemMc=t.ObjectPool.pop("app.MovieClip"),this.itemMc.scaleX=this.itemMc.scaleY=1,this.itemMc.touchEnabled=!1,this.itemMc.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.itemMc)),this.itemMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_kuang"+i.showQuality,-1));var E=t.ColorUtil.GOODS_COLOR[i.showQuality];if(this.nameLab.textFlow=t.TextFlowMaker.generateTextFlow1("|C:"+E+"&T:"+i.name+"|"),i.staitcAttrs){var w=i.staitcAttrs.concat();o=this.getAllAttrs(w)}i.suitId>0&&(o+="\n",o+=this.getEquipSuitAttr(i.suitId)),""!=o&&(o+="\n");var A="",x="",S=t.AttributeData.getItemUseCond(i.conds);""!=S&&(A+=S+"\n"),i.desc&&(A+=i.desc+"\n"),x="|C:0x0066ff&T:"+x+t.AttributeData.getItemBagType(i)+t.AttributeData.getItemBindByType(i)+"|\n",A+=x,o+=A,this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o)}else o+=this.setAttr(i),i.dup>1&&(o+=t.LanguageUtils.language_Tips7+"\n"),this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o)}e.prototype.onResizeUI.call(this,i,n),this.tipsScroller.viewport.scrollV=0,this.tipsScroller&&this.tipsScroller.verticalScrollBar&&(this.tipsScroller.verticalScrollBar.autoVisibility=!1,this.tipsScroller.verticalScrollBar.visible=!1)}},i.prototype.setAttr=function(e){var i="";this.imgBg.visible=!1,e.showQuality>0&&(this.imgBg.visible=!0,this.imgBg.source="bag_piliangbg_"+e.showQuality),e.type<100&&e.showQuality>1&&(this.itemMc||(this.itemMc=t.ObjectPool.pop("app.MovieClip"),this.itemMc.scaleX=this.itemMc.scaleY=1,this.itemMc.touchEnabled=!1,this.itemMc.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.itemMc)),this.itemMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_kuang"+e.showQuality,-1));var n=t.ColorUtil.GOODS_COLOR[e.showQuality],s="|C:"+n+"&T:"+e.name+"|";if(this.nameLab.textFlow=t.TextFlowMaker.generateTextFlow1(s),127==e.type||131==e.type||133==e.type){i+="\n",e.desc&&(i+=e.desc+"\n");var a="|C:0x0066ff&T:"+t.AttributeData.getItemBagType(e)+"  "+t.AttributeData.getItemBindByType(e)+"|\n";i+=a}else 128==e.type||129==e.type?(i="|C:0x2eb52d&T:"+t.AttributeData.getSlowMedicine(e.staitcAttrs)+"|\n",e.desc&&(i+=e.desc+"\n"),i+="|C:0x0066ff&T:"+t.AttributeData.getItemBagType(e)+"|\n"):130==e.type?(i="|C:0x2eb52d&T:"+t.AttributeData.getShunHuiMedicine(e.staitcAttrs)+"|\n",e.desc&&(i+=e.desc+"\n"),i+="|C:0x0066ff&T:"+t.AttributeData.getItemBagType(e)+"|\n"):(i+="\n",e.desc&&(i+=e.desc+"\n"),i+="|C:0x0066ff&T:"+t.AttributeData.getItemBagType(e)+"  "+t.AttributeData.getItemBindByType(e)+"|\n");return i},i.prototype.getAllAttrs=function(e){var i=[],n=[],s="",a="";for(var r in e){var o=e[r];5==o.type||9==o.type||11==o.type||13==o.type||15==o.type||17==o.type||19==o.type||21==o.type||23==o.type||25==o.type||27==o.type?i.push(o):n.push(o)}if(i.length>0){s="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt135+"]|\n";for(var l=0;l<i.length;l++)a=t.AttributeData.getItemAttStrByType(i[l],i),""!=a&&(s+=a+"\n")}if(n.length>0){s+="\n|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt136+"]|\n";for(var l=0;l<n.length;l++)a=t.AttributeData.getItemAttStrByType(n[l],n),""!=a&&(s+="|C:0x78fff5&T:"+a+"|\n")}return s},i.prototype.getEquipSuitAttr=function(e,i){void 0===i&&(i=0);var n=t.GlobalConfig.SuitItemCfg[e],s=0,a="",r="";if(n){for(var o in n.NeedItemId){var l=0==i?t.EquipItemMgr.ins().getAllEquip(n.NeedItemId[o]):t.EquipItemMgr.ins().otherPlayerEquips.getAllEquip(n.NeedItemId[o]),h=t.GlobalConfig.StdItems[n.NeedItemId[o]];l?(h&&(a+="|C:0x28ee01&T:"+h.name+"|\n"),s+=1):h&&(a+="|C:0x808080&T:"+h.name+"|\n")}var p=Math.floor(e/100),u=e%100,c=8421504;c=0==i?t.EquipItemMgr.ins().getSuitAttrColor(p,u,n.suitnum):t.EquipItemMgr.ins().otherPlayerEquips.getSuitAttrColor(p,u,n.suitnum);var g=[];for(var d in n.attr)g.push(n.attr[d]);for(var m="",f="",o=0;o<g.length;o++)m=t.AttributeData.getItemAttStrByType(g[o],g),""!=m&&(f+="|C:"+c+"&T:"+m+"|\n");r+="|C:0xf1ed02&T:["+t.LanguageUtils.language_Omission_txt137+"]("+s+"/"+n.suitnum+")|\n",r+=a,r+=f}return r},i.prototype.getEquipResonanceAttr=function(e,i){var n,s="",a="",r=t.GlobalConfig.ResonanceItemCfg[e];if(n=i>0?t.EquipItemMgr.ins().otherPlayerEquips.equips:t.EquipItemMgr.ins().equips,r&&n){for(var o=[],l=0;l<r.attr.length;l++)for(var h=0;h<n.length;h++)if(n[h].wItemId==r.attr[l].itemid){o=r.attr[l].attr;break}for(var l=0;l<o.length;l++)s=t.AttributeData.getItemAttStrByType(o[l],o),""!=s&&(a+="|C:0x78fff5&T:"+s+"|\n")}return a},i.prototype.getStarlvAttr=function(e,i){var n="",s="",a=t.GlobalConfig.UpstarConfig[e][i];if(a){var r=[];for(var o in a.attribute)r.push(a.attribute[o]);for(var o=0;o<r.length;o++)n=t.AttributeData.getItemAttStrByType(r[o],r),""!=n&&(s+="|C:0xf133ff&T:"+n+"|\n")}return s},i.prototype.getOtherAttr=function(e,i){var n="",s="",a=t.AttributeData.getItemUseCond(e.conds);return a&&(n+=a+"\n"),e.desc&&(n+=e.desc+"\n"),""!=i.topLine&&void 0!=i.topLine&&(s=t.LanguageUtils.language_Common_2),s="|C:0x0066ff&T:"+s+t.AttributeData.getItemBagType(e)+t.AttributeData.getItemBindByType(e)+"|\n",n+=s},i.prototype.splitFun=function(){t.ViewManager.ins().open(t.BagItemSplitView,this.splitData),t.UserTips.ins().closeTips()},i.prototype.useItemFun=function(){t.BagManager.ins().onUseItem(this.splitData),t.UserTips.ins().closeTips()},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.MessageCenter.ins().removeAll(this),this.nameLab.text="",this.bindLab.text="",this.starGrp&&(t.DisplayUtils.removeFromParent(this.starGrp),this.starGrp=null),this.splitBtn&&(t.DisplayUtils.removeFromParent(this.splitBtn),this.splitBtn=null),this.useItemBtn&&(t.DisplayUtils.removeFromParent(this.useItemBtn),this.useItemBtn=null),this.splitData=null,this.itemMc&&(this.itemMc.destroy(),this.itemMc=null)},i}(t.TipsBase);t.TipsEquipView=e,__reflect(e.prototype,"app.TipsEquipView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._cdTime=0,t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.cereateLabel=function(){this.levelLab||(this.levelLab=new eui.Label,this.levelLab.size=34,this.levelLab.scaleX=this.levelLab.scaleY=.5,this.levelLab.touchEnabled=!1,this.levelLab.textColor=15064527,this.levelLab.textAlign="left",this.levelLab.lineSpacing=20,this.levelLab.stroke=2,this.levelLab.strokeColor=0,this.addChild(this.levelLab))},Object.defineProperty(i.prototype,"cdTime",{get:function(){return this._cdTime},set:function(t){this._cdTime=t},enumerable:!0,configurable:!0}),i.prototype.checkTime=function(){return egret.getTimer()>this._cdTime?!0:!1},Object.defineProperty(i.prototype,"labelText",{get:function(){return this._labelText},set:function(e){this._labelText=e,this.levelLab.textFlow=t.TextFlowMaker.generateTextFlow(this._labelText),this.levelLab.alpha=1,this.addToEvent||(this.addToEvent=!0,t.TimerManager.ins().remove(this.removeFromParent,this),t.TimerManager.ins().doTimer(4500,1,this.removeFromParent,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelColor",{set:function(t){this.levelLab.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelSize",{set:function(t){this.levelLab.size=t},enumerable:!0,configurable:!0}),i.prototype.removeFromParent=function(){this.addToEvent=!1,t.DisplayUtils.removeFromParent(this),egret.Tween.removeTweens(this),t.ObjectPool.push(this)},i}(t.BaseView);t.TipsExpItem=e,__reflect(e.prototype,"app.TipsExpItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.cereateLabel=function(){this.levelLab||(this.levelLab=new eui.Label,this.levelLab.size=40,this.levelLab.scaleX=this.levelLab.scaleY=.5,this.levelLab.width=800,this.levelLab.touchEnabled=!1,this.levelLab.textColor=2682369,this.levelLab.textAlign="left",this.levelLab.stroke=2,this.levelLab.strokeColor=0,this.addChild(this.levelLab))},Object.defineProperty(i.prototype,"labelText",{get:function(){return this._labelText},set:function(e){this._labelText=e,this.levelLab.textFlow=t.TextFlowMaker.generateTextFlow(this._labelText),this.levelLab.alpha=1,this.addToEvent||(this.addToEvent=!0,t.TimerManager.ins().remove(this.removeFromParent,this),t.TimerManager.ins().doTimer(3e3,1,this.removeFromParent,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelColor",{set:function(t){this.levelLab.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelSize",{set:function(t){this.levelLab.size=t},enumerable:!0,configurable:!0}),i.prototype.removeFromParent=function(){this.addToEvent=!1,t.DisplayUtils.removeFromParent(this),egret.Tween.removeTweens(this),t.ObjectPool.push(this)},i}(t.BaseView);t.TipsFightItem=e,__reflect(e.prototype,"app.TipsFightItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._cdTime=0,t.timeNum=7,t.isDress=!1,t.skinName="TipsGoodEquipSkin",t.isUsing=!1,t.btn_close.name="closeBtn",t.dressEquip.name="dressBtn",t}return __extends(i,e),Object.defineProperty(i.prototype,"cdTime",{get:function(){return this._cdTime},set:function(t){this._cdTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"data",{set:function(e){if(e instanceof t.userItem){this.itemData=e;var i=t.GlobalConfig.StdItems[this.itemData.wItemId];if(i){var n=15774976;this.itemIcon.source=i.icon+"",n=t.ColorUtil.GOODS_COLOR[i.showQuality],this.itemName.textColor=n,this.itemName.text=i.name}}},enumerable:!0,configurable:!0}),i.prototype.showCountDown=function(e){this.timeNum=7,this.isDress=e,t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,6,this.updateTime,this),this.updateTime()},i.prototype.updateTime=function(){this.autoDress.text=(this.timeNum-=1)+(this.isDress?t.LanguageUtils.language_Omission_txt138:t.LanguageUtils.language_Omission_txt139)},i.prototype.removeTimer=function(){t.TimerManager.ins().remove(this.updateTime,this)},i}(t.BaseView);t.TipsGoodEquipView=e,__reflect(e.prototype,"app.TipsGoodEquipView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.moneyType=0,i.skinName="TipsInsuffResourcesSkin",i.name="TipsInsuffResourcesView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.moneyType=e[0]),this.moneyType==QatEnum.qatYuanbao?this.strLab.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Tips136):this.strLab.text="",this.addTouchEvent(this.btnGoto,this.onClick),this.addTouchEvent(this.btnClose,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnGoto:t.RechargeMgr.ins().onPay(""),t.ViewManager.ins().close(this);break;case this.btnClose:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.btnGoto,this.onClick)},i}(t.BaseEuiView);t.TipsInsuffResourcesView=e,__reflect(e.prototype,"app.TipsInsuffResourcesView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._cdTime=0,t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.cereateLabel=function(){this.levelLab||(this.levelLab=new eui.Label,this.levelLab.size=20,this.levelLab.touchEnabled=!1,this.levelLab.textColor=2682369,this.levelLab.stroke=1,this.levelLab.strokeColor=0,this.addChild(this.levelLab))},Object.defineProperty(i.prototype,"cdTime",{get:function(){return this._cdTime},set:function(t){this._cdTime=t},enumerable:!0,configurable:!0}),i.prototype.checkTime=function(){return egret.getTimer()>this._cdTime?!0:!1},Object.defineProperty(i.prototype,"labelText",{get:function(){return this._labelText},set:function(e){this._labelText=e,this.levelLab.textFlow=t.TextFlowMaker.generateTextFlow(this._labelText),this.levelLab.alpha=1,this.addToEvent||(this.addToEvent=!0,t.TimerManager.ins().remove(this.removeFromParent,this),t.TimerManager.ins().doTimer(3e3,1,this.removeFromParent,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelColor",{set:function(t){this.levelLab.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelSize",{set:function(t){this.levelLab.size=t},enumerable:!0,configurable:!0}),i.prototype.removeFromParent=function(){this.addToEvent=!1,t.DisplayUtils.removeFromParent(this),egret.Tween.removeTweens(this),t.ObjectPool.push(this)},i}(t.BaseView);t.TipsItem=e,__reflect(e.prototype,"app.TipsItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.touchEnabled=t.touchChildren=!1,t.skinName="TipsLookRewardsView",t}return __extends(i,e),i.prototype.inItFunction=function(){},i.prototype.updateStr=function(i,n){i&&(this.descLab.textFlow=t.TextFlowMaker.generateTextFlow(i),e.prototype.onResizeUI.call(this,null,n))},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.descLab.text=""},i}(t.TipsBase);t.TipsLookRewardsView=e,__reflect(e.prototype,"app.TipsLookRewardsView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="TipsMoneySKin",t}return __extends(i,e),i.prototype.inItFunction=function(){},i.prototype.updateStr=function(i,n){if(i){e.prototype.onResizeUI.call(this,null,n);var s=i+"\n";this.descLab.textFlow=t.TextFlowMaker.generateTextFlow(s)}},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.descLab.text=""},i}(t.TipsBase);t.TipsMoneyView=e,__reflect(e.prototype,"app.TipsMoneyView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.cereateLabel=function(){this.levelLab||(this.levelLab=new eui.Label,this.levelLab.size=20,this.levelLab.touchEnabled=!1,this.levelLab.textColor=2682369,this.levelLab.textAlign="right",this.levelLab.stroke=1,this.levelLab.strokeColor=0,this.addChild(this.levelLab))},Object.defineProperty(i.prototype,"labelText",{get:function(){return this._labelText},set:function(e){this._labelText=e,this.levelLab.textFlow=t.TextFlowMaker.generateTextFlow(this._labelText),this.levelLab.alpha=1,this.addToEvent||(this.addToEvent=!0,t.TimerManager.ins().remove(this.removeFromParent,this),t.TimerManager.ins().doTimer(3e3,1,this.removeFromParent,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelColor",{set:function(t){this.levelLab.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelSize",{set:function(t){this.levelLab.size=t},enumerable:!0,configurable:!0}),i.prototype.removeFromParent=function(){this.addToEvent=!1,t.DisplayUtils.removeFromParent(this),egret.Tween.removeTweens(this),t.ObjectPool.push(this)},i}(t.BaseView);t.TipsRightArticlesItem=e,__reflect(e.prototype,"app.TipsRightArticlesItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.touchEnabled=t.touchChildren=!1,t.skinName="TipsSkillDescSKin",t}return __extends(i,e),i.prototype.inItFunction=function(){},i.prototype.updateStr=function(i,n){if(i){var s="",a=i.conds,r=i.desc,o=i.name,l=i.level;o&&(s+=o+l+t.LanguageUtils.language_Common_1+"\n");var h=new Array(4);if(a)for(var p=void 0,u=a?a.length:0,c=0;u>c;c++)if(p=a[c],1==p.cond)h[0]=t.LanguageUtils.language_Omission_txt1+p.value+t.LanguageUtils.language_Common_1+"\n";else if(4==p.cond)h[1]=t.LanguageUtils.language_Omission_txt2+p.value+t.LanguageUtils.language_Common_1+"\n";else if(2==p.cond&&p.consume)h[2]=t.LanguageUtils.language_Omission_txt3+p.value+"\n";else if(3==p.cond&&p.consume){var g=void 0;g=t.GlobalConfig.StdItems[p.value],g&&(h[3]=t.LanguageUtils.language_Omission_txt4+g.name+"："+p.count+"\n")}else 6==p.cond&&(h[4]=t.LanguageUtils.language_Omission_txt145+p.value+"\n");for(var c=0;c<h.length;c++)h[c]&&(s+=h[c]);o?r.length>0&&(s+="\n"+r):s+=r,s=s.replace(/^\s+|\s+$/g,""),e.prototype.onResizeUI.call(this,null,n),s+="\n",this.descLab.text=s}},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.descLab.text=""},i}(t.TipsBase);t.TipsSkillDescView=e,__reflect(e.prototype,"app.TipsSkillDescView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.weaponID=0,t.type=0,t.skinName="TipsSoldierSoulSkin",t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.updateStr=function(i,n){this.weaponID=i.ID,this.type=i.TYPE;var s;if(1==this.type)s=t.SoldierSoulMgr.ins().weaponInfo[this.weaponID];else if(2==this.type){var a=t.EquipItemMgr.ins().otherPlayerEquips;s=a.weaponSoulInfo[this.weaponID]}if(s){var r=t.LanguageUtils["language_SoldierSoul_Text"+this.weaponID]+" ["+s.soulOrder+"阶]";this.nameLab.textFlow=t.TextFlowMaker.generateTextFlow1(r);var o="",l=[],h=t.GlobalConfig.soulWeaponLorderConfig[this.weaponID][s.soulOrder];if(h&&h.attr)for(var p=0;p<h.attr.length;p++)l.push(h.attr[p]);if(""!=s.soulTopLine&&void 0!=s.soulTopLine){var u=this.getBestAttrs(s.soulTopLine),c=t.AttributeData.getTotalAttrs(l,u);o=this.getAllAttrs(c)}else o=this.getAllAttrs(l);if(s.soulLv>0){o+="\n",o+="|C:0xeee104&T:[升级属性]："+s.soulLv+"级|\n";var g=t.GlobalConfig.soulWeaponLvConfig[this.weaponID][s.soulLv];if(g&&g.attr){for(var d=[],p=0;p<g.attr.length;p++)d.push(g.attr[p]);o+=this.getAllAttrs(d,1,"0x1affff","0x1affff")}}if(s.soulStar>0){if(o+="\n",o+="|C:0xeee104&T:[升星属性]|",this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o),!this.starGrp){this.starGrp=new eui.Group,this.starGrp.x=15,this.starGrp.y=this.bindLab.height+44,this.starGrp.width=300;var m=new eui.VerticalLayout;m.gap=9,this.starGrp.layout=m,this.strGrp.addChild(this.starGrp)}var f=new eui.Group;f.width=300;var v=new eui.HorizontalLayout;v.gap=-2,f.layout=v,this.starGrp.addChild(f);for(var _=1;_<=s.soulStar;_++){var y=new t.TipsStarLevel;f.addChild(y),s.soulStar<=6?y.starLvImg="forge_xx1":y.starLvImg="common_xx",_<=s.soulStar?y.starLvVis=!0:y.starLvVis=!1}var T=new eui.Label;T.size=20,T.width=300,T.stroke=2,T.strokeColor=0,T.lineSpacing=4,this.starGrp.addChild(T);var M="";M+=this.getStarlvAttr(s.soulStar),T.textFlow=t.TextFlowMaker.generateTextFlow(M)}else this.bindLab.textFlow=t.TextFlowMaker.generateTextFlow(o)}e.prototype.onResizeUI.call(this,this.weaponID,n)},i.prototype.getStarlvAttr=function(e){var i="",n=t.GlobalConfig.soulWeaponstarConfig[this.weaponID][e];if(n){for(var s=[],a=0;a<n.attribute.length;a++)s.push(n.attribute[a]);i=this.getAllAttrs(s,1,"0xff1ac2","0xff1ac2")}return i},i.prototype.getAllAttrs=function(e,i,n,s){void 0===i&&(i=0),void 0===n&&(n=null),void 0===s&&(s=null);for(var a="",r="",o=0;o<e.length;o++)r=t.AttributeData.getItemAttStrByType(e[o],e,i,!1,!0,n,s),""!=r&&(a+=r+"\n");return a},i.prototype.getBestAttrs=function(e){for(var i=[],n=e.split("|"),s=0;s<n.length;s++){var a=n[s].split(","),r=new t.AttributeData(+a[0],+a[1]);i.push(r)}return i},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.nameLab.text="",this.bindLab.text="",this.starGrp&&(t.DisplayUtils.removeFromParent(this.starGrp),this.starGrp=null)},i}(t.TipsBase);t.TipsSoldierSoulView=e,__reflect(e.prototype,"app.TipsSoldierSoulView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="TipsStarLevelSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},Object.defineProperty(e.prototype,"starLvVis",{set:function(t){this.starLv.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"starLvImg",{set:function(t){this.starLv.source=t},enumerable:!0,configurable:!0}),e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this)},e}(eui.Component);t.TipsStarLevel=e,__reflect(e.prototype,"app.TipsStarLevel")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._cdTime=0,t.timeNum=7,t.skinName="TipsUseItemViewSkin",t.btn_close.name="closeBtn",t.dressEquip.name="dressBtn",t}return __extends(i,e),i.prototype.updateType=function(e){e==t.ItemUserTipsType.ItemOpenUITips?(this.labTitle.text=t.LanguageUtils.language_Ghost_Btn3,this.dressEquip.label=t.LanguageUtils.Language_Guild_Btn_Txt):(this.labTitle.text=t.LanguageUtils.language_Common_211,this.dressEquip.label=t.LanguageUtils.language_Common_212)},Object.defineProperty(i.prototype,"data",{set:function(e){if(e instanceof t.userItem){this.itemData=e;var i=t.GlobalConfig.StdItems[this.itemData.wItemId];if(i){var n=15774976;this.itemIcon.source=i.icon+"",n=t.ColorUtil.GOODS_COLOR[i.showQuality],this.itemName.textColor=n,this.itemName.text=i.name}}},enumerable:!0,configurable:!0}),i.prototype.showCountDown=function(e){this.timeNum=7,t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,6,this.updateTime,this),this.updateTime()},i.prototype.updateTime=function(){this.autoDress.text=(this.timeNum-=1)+t.LanguageUtils.language_Omission_txt138},i.prototype.removeTimer=function(){t.TimerManager.ins().remove(this.updateTime,this)},Object.defineProperty(i.prototype,"useNum",{get:function(){return 1},enumerable:!0,configurable:!0}),i}(t.BaseView);t.TipsUseItemView=e,__reflect(e.prototype,"app.TipsUseItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._useNum=0,t.itemNum=0,t.timeNum=7,t.skinName="TipsUseItemViewSkin2",t.btn_close.name="closeBtn",t.dressEquip.name="dressBtn",t.btnAdd.name="addBtn",t.btnSub.name="subBtn",t}return __extends(i,e),Object.defineProperty(i.prototype,"data",{set:function(e){if(e instanceof t.userItem){this.itemData=e;var i=t.GlobalConfig.StdItems[this.itemData.wItemId];if(i){var n=15774976;this.itemIcon.source=i.icon+"",n=t.ColorUtil.GOODS_COLOR[i.showQuality],this.labTitle.textColor=n,this.labTitle.text=i.name;var s=t.BagMgr.ins().getItemDataBySeries(e.series);s&&(this._useNum=this.itemNum=s.btCount),this.lbCount.text=this._useNum+""}}this.dressEquip.label=t.LanguageUtils.language_Common_213},enumerable:!0,configurable:!0}),i.prototype.addNum=function(){this._useNum<this.itemNum&&(this._useNum++,this.lbCount.text=this._useNum+"")},i.prototype.subNum=function(){this._useNum>1&&(this._useNum--,this.lbCount.text=this._useNum+"")},i.prototype.showCountDown=function(){this.timeNum=7,t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,6,this.updateTime,this),this.updateTime()},i.prototype.updateTime=function(){this.autoDress.text=(this.timeNum-=1)+t.LanguageUtils.language_Omission_txt138
},i.prototype.removeTimer=function(){t.TimerManager.ins().remove(this.updateTime,this)},Object.defineProperty(i.prototype,"useNum",{get:function(){return this._useNum},enumerable:!0,configurable:!0}),i}(t.BaseView);t.TipsUseItemView2=e,__reflect(e.prototype,"app.TipsUseItemView2")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.list=[],t.JingYanlist=[],t.moneyList=[],t.UIList=[],t.rightItemList=[],t.fightList=[],t.attrList=[],t.tipsTimeArr=[],t.cdTime=0,t.tipsInfoAry=[],t.isPlay=!1,t.tipsNum=10,t.curTipsNum=0,t.curTipsStr="",t.recycleArr=[],t.isRecycle=!1,t.recycleTime=0,t.jobAttr=[],t.RightMiddlePosHash={},t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.touchChildren=!0,this.touchEnabled=!1,this.bottom=0,this.top=0,this.right=0,this.left=0},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.isPlay=!1,t.TimerManager.ins().doTimer(6e3,0,this.updateTipsView,this)},i.prototype.updateTipsView=function(){egret.getTimer()>this.recycleTime&&this.isRecycle&&(this.isRecycle=!1)},i.prototype.showItemTips=function(e){var i=t.ObjectPool.pop("app.TipsArticlesItem");i.cereateLabel(),i.labelText=e,i.labelSize=20,i.top=30,i.left=40,i.alpha=1,this.addChild(i),this.list.unshift(i),this.list.length>10&&(this.list.splice(this.list.length-1,1),t.DisplayUtils.removeFromParent(this.list[this.list.length-1]),t.ObjectPool.push(this.list[this.list.length-1]),egret.Tween.removeTweens(this.list[this.list.length-1])),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsItem,this);for(var n=this.list.length-1;n>=0;n--){egret.Tween.removeTweens(this.list[n]);var s=egret.Tween.get(this.list[n]);s.to({top:30+30*n},100).wait(3e3).to({alpha:0},500)}t.UserTips.ins().showRightItemTips(e)},i.prototype.removeTipsItem=function(e){var i=e.currentTarget;i.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsItem,this),i.left=0/0,i.y=0/0;var n=this.list.indexOf(i);this.list.splice(n,1),t.ObjectPool.push(i)},i.prototype.playTips=function(){var e=gamelib.DeviceUtils.IsMobile?400:500;if(this.tipsInfoAry.length){var i=egret.getTimer();if(i-this.cdTime>150){var n=this.tipsInfoAry.shift();if(n){this.cdTime=i;var s=t.ObjectPool.pop("app.TipsAttrItem");s.attrImgSource=1==n.attrType?"sx_num_p":"sx_num_j",s.labelText(n.str,n.attrNum),s.horizontalCenter=-260,s.bottom=e,s.alpha=1,this.addChild(s),this.attrList.unshift(s),s.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeAttrTips,this);for(var a=this.attrList.length-1;a>=0;a--){egret.Tween.removeTweens(this.attrList[a]);var r=egret.Tween.get(this.attrList[a]);r.to({bottom:e+45*a},100).wait(1e3+100*(this.attrList.length-a)).to({horizontalCenter:-310,alpha:0},200)}}}else t.TimerManager.ins().remove(this.playTips,this),t.TimerManager.ins().doNext(this.playTips,this)}},i.prototype.showAttrTips=function(e){this.tipsInfoAry.push(e),t.TimerManager.ins().remove(this.playTips,this),t.TimerManager.ins().doNext(this.playTips,this)},i.prototype.playStr=function(){},i.prototype.removeAttrTips=function(e){var i=e.currentTarget;i.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeAttrTips,this),i.horizontalCenter=0/0,i.bottom=0/0;var n=this.attrList.indexOf(i);this.attrList.splice(n,1),t.ObjectPool.push(i)},i.prototype.showJingYanTips=function(e){this.recycleArr.push(e),t.TimerManager.ins().remove(this.playTipsRecycle,this),t.TimerManager.ins().doNext(this.playTipsRecycle,this)},i.prototype.playTipsRecycle=function(){if(this.recycleArr.length)if(this.curTipsNum<this.tipsNum){this.curTipsNum+=1;var e=this.recycleArr.shift();this.curTipsStr+=e+"\n",t.TimerManager.ins().remove(this.playTipsRecycle,this),t.TimerManager.ins().doNext(this.playTipsRecycle,this)}else this.isRecycle||this.createTipsItem();else this.curTipsNum>0&&!this.isRecycle&&this.createTipsItem()},i.prototype.createTipsItem=function(){var e=this;this.curTipsNum=0,this.isRecycle=!0;var i=t.ObjectPool.pop("app.TipsExpItem");i.cereateLabel(),this.recycleTime=egret.getTimer()+3e4,i.labelText=this.curTipsStr,i.bottom=370,i.left=350,i.alpha=1,this.addChild(i),this.JingYanlist.unshift(i),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsJingYan,this),this.curTipsStr="";for(var n=this.JingYanlist.length-1;n>=0;n--){egret.Tween.removeTweens(this.JingYanlist[n]);var s=egret.Tween.get(this.JingYanlist[n]);s.to({bottom:370+30*n},150).to({bottom:400+30*n},150).wait(1500).to({alpha:0},500).call(function(){t.TimerManager.ins().remove(e.playTipsRecycle,e),t.TimerManager.ins().doNext(e.playTipsRecycle,e),e.isRecycle=!1,e.recycleTime=0})}},i.prototype.removeTipsJingYan=function(e){var i=e.currentTarget;i.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsJingYan,this),i.left=0/0,i.y=0/0;var n=this.JingYanlist.indexOf(i);this.JingYanlist.splice(n,1),t.ObjectPool.push(i)},i.prototype.showMoneyTips=function(e){var i=t.ObjectPool.pop("app.TipsItem");i.cereateLabel(),i.labelText=e,i.labelSize=20;var n=(t.StageUtils.ins().getHeight()-i.levelLab.height)/2,s=(t.StageUtils.ins().getWidth()-i.levelLab.width)/2-100;i.left=s,i.y=n,i.alpha=1,this.addChild(i),this.moneyList.unshift(i),this.moneyList.length>5&&(this.moneyList.splice(this.moneyList.length-1,1),t.DisplayUtils.removeFromParent(this.moneyList[this.moneyList.length-1]),t.ObjectPool.push(this.moneyList[this.moneyList.length-1]),egret.Tween.removeTweens(this.moneyList[this.moneyList.length-1])),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsMoney,this);for(var a=this.moneyList.length-1;a>=0;a--){egret.Tween.removeTweens(this.moneyList[a]);var r=egret.Tween.get(this.moneyList[a]);r.to({y:n+-30*a},100).wait(3e3).to({alpha:0},500)}},i.prototype.removeTipsMoney=function(e){var i=e.currentTarget;i.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsMoney,this),i.left=0/0,i.y=0/0;var n=this.moneyList.indexOf(i);this.moneyList.splice(n,1),t.ObjectPool.push(i)},i.prototype.showRightItemTips=function(e){var i=t.ObjectPool.pop("app.TipsRightArticlesItem");i.cereateLabel(),i.labelText=e,i.labelSize=20,i.bottom=100,i.right=100,i.alpha=1,this.addChild(i),this.rightItemList.unshift(i),this.rightItemList.length>5&&(this.rightItemList.splice(this.rightItemList.length-1,1),t.DisplayUtils.removeFromParent(this.rightItemList[this.rightItemList.length-1]),t.ObjectPool.push(this.rightItemList[this.rightItemList.length-1]),egret.Tween.removeTweens(this.rightItemList[this.rightItemList.length-1])),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeRightTipsItem,this);for(var n=this.rightItemList.length-1;n>=0;n--){egret.Tween.removeTweens(this.rightItemList[n]);var s=egret.Tween.get(this.rightItemList[n]);s.to({bottom:100+30*n},100).wait(3e3).to({alpha:0},500)}},i.prototype.removeRightTipsItem=function(e){var i=e.currentTarget;i.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeRightTipsItem,this),i.right=0/0,i.bottom=0/0;var n=this.rightItemList.indexOf(i);this.rightItemList.splice(n,1),t.ObjectPool.push(i)},i.prototype.showUITips=function(e){var i=t.ObjectPool.pop("app.TipsItem");i.cereateLabel(),i.labelText=e,i.labelSize=20;var n=(t.StageUtils.ins().getHeight()-i.levelLab.height)/2-160,s=(t.StageUtils.ins().getWidth()-i.levelLab.width)/2;i.left=s,i.y=n,i.alpha=1,this.addChild(i),this.UIList.unshift(i),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsUI,this);for(var a=this.UIList.length-1;a>=0;a--){egret.Tween.removeTweens(this.UIList[a]);var r=egret.Tween.get(this.UIList[a]);r.to({y:n+-30*a},100).wait(2500).to({alpha:0},500)}},i.prototype.removeTipsUI=function(e){var i=e.currentTarget;i.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsUI,this),i.left=0/0,i.y=0/0;var n=this.UIList.indexOf(i);this.UIList.splice(n,1),t.ObjectPool.push(i),i=null},i.prototype.showFightTips=function(e){var i=t.ObjectPool.pop("app.TipsFightItem");i.cereateLabel(),i.labelText=e,i.horizontalCenter=-110,i.bottom=300,i.alpha=1,this.addChild(i),this.fightList.unshift(i),this.fightList.length>5&&(this.fightList.splice(this.fightList.length-1,1),t.DisplayUtils.removeFromParent(this.fightList[this.fightList.length-1]),t.ObjectPool.push(this.fightList[this.fightList.length-1]),egret.Tween.removeTweens(this.fightList[this.fightList.length-1])),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsFight,this);for(var n=this.fightList.length-1;n>=0;n--){egret.Tween.removeTweens(this.fightList[n]);var s=egret.Tween.get(this.fightList[n]);s.to({bottom:300+27*n},100).wait(3e3).to({alpha:0},500)}},i.prototype.removeTipsFight=function(e){var i=e.currentTarget;i.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsFight,this),i.left=0/0,i.y=0/0;var n=this.fightList.indexOf(i);this.fightList.splice(n,1),t.ObjectPool.push(i)},i.prototype.showJobAttrTips=function(e){var i=gamelib.DeviceUtils.IsMobile?330:430;if(this.jobAttr.length>0){var n=this.jobAttr.pop();n&&(n.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsJobAttr,this),egret.Tween.removeTweens(n),n.removeFromParent())}var s=t.ObjectPool.pop("app.TipsActorView");s.horizontalCenter=-250,s.bottom=i,s.alpha=1,this.addChild(s),this.jobAttr.unshift(s),s.setData(e.curVal,e.tarVal,e.type),s.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsJobAttr,this);for(var a=this.jobAttr.length-1;a>=0;a--){egret.Tween.removeTweens(this.jobAttr[a]);var r=egret.Tween.get(this.jobAttr[a]);r.to({bottom:i+59*a},100).wait(3e3).to({alpha:0},500)}},i.prototype.removeTipsJobAttr=function(e){var i=e.currentTarget;i.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsJobAttr,this),i.left=0/0,i.y=0/0;var n=this.jobAttr.indexOf(i);this.jobAttr.splice(n,1),t.ObjectPool.push(i)},i.prototype.showItemUseTips=function(e,i){i==t.ItemUserTipsType.EquipTips?(this.equipTip1=this.equipTip1||new t.TipsGoodEquipView,this.curItemTips=this.equipTip1):i==t.ItemUserTipsType.UseItemTips2?(this.useItemTip2=this.useItemTip2||new t.TipsUseItemView2,this.curItemTips=this.useItemTip2):(this.useItemTip=this.useItemTip||new t.TipsUseItemView,this.curItemTips=this.useItemTip),this.curItem=e;var n=this;egret.Tween.removeTweens(this.curItemTips);var s=this.getRightMiddlePos(this.curItemTips);this.curItemTips.right=gamelib.DeviceUtils.IsMobile?s.x+220:s.x+30,this.curItemTips.bottom=0,this.curItemTips.alpha=1,this.curItemTips.updateType&&this.curItemTips.updateType(i),this.curItemTips.data=this.curItem,this.curItemTips.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemUseClick,this),this.curItemTips.parent||this.addChild(this.curItemTips);var a=!1;if(i==t.ItemUserTipsType.EquipTips){var r=0,o=t.EntityMgr.ins().getPayer;o&&o.propSet&&(r=o.propSet.getZSLevel(),r>=5&&(a=!0)),this.curItemTips.showCountDown(a)}else this.curItemTips.showCountDown();egret.Tween.get(this.curItemTips).to({bottom:350},120).wait(6e3).to({alpha:0},1e3).call(function(){i==t.ItemUserTipsType.EquipTips&&(a||n.curItem&&n.curItem.series&&t.EquipItemMgr.ins().sendWearEquip(n.curItem.series)),n.hideItemUseTip()})},i.prototype.hideItemUseTip=function(){t.ItemUserTipsManage.ins().removeTipsObj(this.curItem),this.curItemTips.removeTimer(),this.removeRightMiddlePos(this.curItemTips),egret.Tween.removeTweens(this.curItemTips),t.DisplayUtils.removeFromParent(this.curItemTips),this.curItemTips.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.itemUseClick,this),this.curItemTips=null,this.curItem=null},i.prototype.itemUseClick=function(e){e.currentTarget;if(e.target instanceof eui.Button)switch(e.target.name){case"closeBtn":this.hideItemUseTip(),t.ItemUserTipsManage.ins().showItemTip(!0);break;case"dressBtn":this.curItem&&this.curItem.wItemId&&this.curItem.series&&t.BagManager.ins().onUseItem(this.curItem,this.curItem.btCount),this.hideItemUseTip(),t.ItemUserTipsManage.ins().showItemTip(!0);break;case"addBtn":this.curItemTips.addNum();break;case"subBtn":this.curItemTips.subNum()}},i.prototype.showBossTip=function(){if(!t.BossMgr.isShowTip)return void(t.BossMgr.bossSouce={});if(!this.isBossWait){var e=null;for(var i in t.BossMgr.bossSouce){e=t.BossMgr.bossSouce[i],this.bossTipsIndex=i;break}if(null!=e){var n=this;this.bossTipView=this.bossTipView||new t.TipsBossRefreshView,egret.Tween.removeTweens(this.bossTipView);var s=this.getRightMiddlePos(this.bossTipView);this.bossTipView.right=s.x+30,this.bossTipView.bottom=0,this.bossTipView.alpha=1,this.bossTipView.data=e,this.bossTipView.parent||this.addChild(this.bossTipView),this.isBossWait=!0;var a=egret.Tween.get(this.bossTipView);a.to({bottom:350},120).wait(1e4).to({alpha:0},1e3).call(function(){n.hideBossTip(),n.showBossTip(),1==e.AutoFly&&150==t.GameMap.mapID&&n.bossClick({currentTarget:n.bossTipView,target:n.bossTipView.btn_go})}),this.bossTipView.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bossClick,this)}}},i.prototype.hideBossTip=function(){this.isBossWait=!1,delete t.BossMgr.bossSouce[this.bossTipsIndex],this.removeRightMiddlePos(this.bossTipView),this.bossTipView.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.bossClick,this),egret.Tween.removeTweens(this.bossTipView),t.DisplayUtils.removeFromParent(this.bossTipView)},i.prototype.bossClick=function(e){var i=e.currentTarget;if(e.target instanceof eui.Button)switch(e.target.name){case"closeBtn":this.hideBossTip(),this.showBossTip();break;case"goBtn":1==i.data.showwindow?t.BossMgr.ins().send_49_2(i.data.bossId,i.data.entityid):2==i.data.showwindow&&t.ViewManager.ins().open(t.BossView,[i.data.mold,i.data.bossId]),this.hideBossTip(),this.showBossTip()}},i.prototype.getRightMiddlePos=function(t){for(var e=new egret.Point(0,0),i=0;2>i;i++){if(!this.RightMiddlePosHash[i])return this.RightMiddlePosHash[i]=t,e;this.curItemTips&&this.curItemTips.parent&&t!=this.curItemTips&&(e.x+=this.curItemTips.width+30),this.bossTipView&&this.bossTipView.parent&&t!=this.bossTipView&&(e.x+=this.bossTipView.width+30)}return e},i.prototype.removeRightMiddlePos=function(t){for(var e=0;2>e;e++)this.RightMiddlePosHash[e]==t&&(this.RightMiddlePosHash[e]=null)},i}(t.BaseEuiView);t.TipsView=e,__reflect(e.prototype,"app.TipsView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Tips)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.itemInfo=[],i.getMoney=0,i.isRed=!1,i.sysId=t.PackageID.TradeLine,i.regNetMsg(1,i.post_27_1),i.regNetMsg(2,i.post_27_2),i.regNetMsg(3,i.post_27_3),i.regNetMsg(4,i.post_27_4),i.regNetMsg(6,i.post_27_6),i.regNetMsg(7,i.post_27_7),i.regNetMsg(8,i.post_27_8),i.regNetMsg(9,i.post_27_9),i}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.send_27_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.post_27_1=function(e){var i=0;this.itemInfo=[];for(var n in t.GlobalConfig.TradeLineConfig)this.itemInfo[i]=[],i++;for(var s=t.EntityMgr.ins().getPlayerPropertySet(),a=(e.readUnsignedInt(),e.readInt()),n=0;a>n;n++){var r=new t.TradeLineData;r.parser(e),r.idx=n;var o=t.EquipMgr.equipScore(r,s.propSet.getAP_JOB());if(r.itemScore=o,r){var l=t.GlobalConfig.StdItems[r.wItemId];l&&l.trade&&(this.itemInfo[0].push(r),this.itemInfo[0].sort(this.sortHighToLowMenu),this.itemInfo[l.trade].push(r),this.itemInfo[l.trade].sort(this.sortHighToLowMenu))}}},i.prototype.setInfoIndex=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);for(var n=0;n<e.length;n++)e[n].idx=n;return e},i.prototype.send_27_2=function(){var t=this.getBytes(2);this.sendToServer(t)},i.prototype.post_27_2=function(e){for(var i=e.readInt(),n=[],s=t.EntityMgr.ins().getPlayerPropertySet(),a=0;i>a;a++){var r=new t.TradeLineData;r.parser(e);var o=t.EquipMgr.equipScore(r,s.propSet.getAP_JOB());r.itemScore=o,n.push(r)}return i=null,n},i.prototype.send_27_3=function(t,e,i){var n=this.getBytes(3);n.writeNumber(t),n.writeInt(e),n.writeUnsignedInt(i),this.sendToServer(n)},i.prototype.post_27_3=function(e){var i=e.readByte();0==i?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips34):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips35)},i.prototype.send_27_4=function(t,e){var i=this.getBytes(4);t.writeToBytes(i),i.writeUnsignedInt(e),this.sendToServer(i)},i.prototype.post_27_4=function(e){var i=e.readByte();0==i?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips36):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips37)},i.prototype.send_27_6=function(t,e){void 0===e&&(e=0);var i=this.getBytes(6);i.writeByte(t),i.writeNumber(e),this.sendToServer(i)},i.prototype.post_27_6=function(e){var i=e.readByte();0==i?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips38):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips39)},i.prototype.send_27_7=function(t,e){void 0===e&&(e=0);var i=this.getBytes(7);i.writeByte(t),i.writeNumber(e),this.sendToServer(i)},i.prototype.post_27_7=function(e){var i=e.readByte();0==i?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips40):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips41)},i.prototype.send_27_8=function(){var t=this.getBytes(8);this.sendToServer(t)},i.prototype.post_27_8=function(e){var i=[];this.getMoney=0;for(var n=e.readInt(),s=t.EntityMgr.ins().getPlayerPropertySet(),a=0;n>a;a++){var r=new t.TradeLineData;r.parser(e),3==r.itemState&&(this.getMoney+=r.itemPrice);var o=t.EquipMgr.equipScore(r,s.propSet.getAP_JOB());r.itemScore=o,i.push(r)}return i},i.prototype.post_27_9=function(t){var e=t.readByte();0!=e?this.isRed=!0:this.isRed=!1},i.prototype.getReceiveRed=function(){return i.ins().isRed?1:0},i.prototype.postItemSell=function(t){return t},i.prototype.sortLowToHighMenu=function(t,e){return t.itemPrice<e.itemPrice?-1:t.itemPrice>e.itemPrice?1:0},i.prototype.sortHighToLowMenu=function(t,e){return t.itemPrice<e.itemPrice?1:t.itemPrice>e.itemPrice?-1:0},i.prototype.sortTimeLowToHighMenu=function(t,e){return t.itemTime<e.itemTime?-1:t.itemTime>e.itemTime?1:0},i.prototype.sortTimeHighToLowMenu=function(t,e){return t.itemTime<e.itemTime?1:t.itemTime>e.itemTime?-1:0},i.prototype.sortStrMenu=function(e,i){var n=t.GlobalConfig.StdItems[e.itemID],s=t.GlobalConfig.StdItems[i.itemID];return n&&s?n.name.localeCompare(s.name):void 0},i.prototype.sortStrHighMenu=function(e,i){var n=t.GlobalConfig.StdItems[e.itemID],s=t.GlobalConfig.StdItems[i.itemID];return n&&s?s.name.localeCompare(n.name):void 0},i.prototype.getBuyTabList=function(){var e=t.GlobalConfig.TradeLineConfig,i=[];for(var n in e)e[n]&&i.push(e[n]);return i},i}(t.BaseSystem);t.TradeLineMgr=e,__reflect(e.prototype,"app.TradeLineMgr")}(app||(app={}));var app;!function(t){var e=function(){function e(){this.smith=[],this.itemScore=0,this.itemRed=0,this.needShowBatchPanel=0,this.idx=0,this._sourceStr=""}return e.prototype.parser=function(e){if(this.type=0,this._itemState=t.BagMgr.STATE_NORMAL,this.smith=[],e){this.series=new t.ItemSeries(e),this.wItemId=e.readUnsignedShort(),this.btQuality=e.readUnsignedByte(),this.btStrong=e.readUnsignedByte(),this.btCount=e.readUnsignedInt(),this.nStrongMax=e.readUnsignedByte(),this.inscriptLevel=e.readUnsignedByte(),this.wIdentifySlotNum=e.readUnsignedShort(),this.wStar=e.readUnsignedShort(),this.nDeadline=Math.floor(t.GlobalFunc.formatMiniDateTime(e.readUnsignedInt())/1e3);for(var i,n=0;5>n;n++)i=e.readUnsignedInt(),i&&this.smith.push(this.decodeSmith(i));if(this.scenesId=e.readUnsignedInt(),this.btFlag=e.readUnsignedByte(),this.btLuck=e.readByte(),this.monsterId=e.readUnsignedShort(),this.btDeportId=e.readUnsignedByte(),this.btHandPos=e.readByte(),this.btSharp=e.readUnsignedByte(),this.bagType=e.readUnsignedShort(),this.topLine=e.readString(),this.refining=e.readString(),this.killName=e.readString(),this.index=e.readNumber(),this.itemTime=1e3*e.readUnsignedInt()+egret.getTimer(),this.itemPrice=e.readUnsignedInt(),this.itemState=e.readByte(),1==this.bagType){var s=t.GlobalConfig.StdItems[this.wItemId];s&&(s.dup||this.setSourceStr())}}},e.prototype.setSourceStr=function(){if(this._sourceStr="|C:0xf1ed02&T:["+t.LanguageUtils.language_Tips111+"]|",this.inscriptLevel==t.ItemSource.type1){var e="",i=t.GlobalConfig.Scenes[this.scenesId];i&&(e=i.scencename),this._sourceStr+="|C:0x78fff5&T:\n"+t.LanguageUtils.language_Tips112+e;var n="",s=t.GlobalConfig.Monster[this.monsterId];s&&(n=s.name),this._sourceStr+="\n"+t.LanguageUtils.language_Tips113+n,this._sourceStr+="\n"+t.LanguageUtils.language_Tips114+this.killName,this._sourceStr+="\n"+t.LanguageUtils.language_Tips115+t.DateUtils.getFormatBySecond(this.nDeadline,t.DateUtils.TIME_FORMAT_16),this._sourceStr+="|\n"}else if(this.inscriptLevel==t.ItemSource.type2){var e="",i=t.GlobalConfig.Scenes[this.scenesId];i&&(e=i.scencename),this._sourceStr+="|C:0x78fff5&T:\n"+t.LanguageUtils.language_Tips116,this._sourceStr+="\n"+t.LanguageUtils.language_Tips112+e,this._sourceStr+="\n"+t.LanguageUtils.language_Tips115+t.DateUtils.getFormatBySecond(this.nDeadline,t.DateUtils.TIME_FORMAT_16),this._sourceStr+="|\n"}else this.inscriptLevel==t.ItemSource.type3?(this._sourceStr+="|C:0x78fff5&T:\n"+t.LanguageUtils.language_Tips117,this._sourceStr+="\n"+t.LanguageUtils.language_Tips115+t.DateUtils.getFormatBySecond(this.nDeadline,t.DateUtils.TIME_FORMAT_16),this._sourceStr+="|\n"):this._sourceStr=""},Object.defineProperty(e.prototype,"sourceStr",{get:function(){return this._sourceStr},enumerable:!0,configurable:!0}),e.prototype.decodeSmith=function(e){var i=new t.ComAttribute;i.type=255&e;var n=e>>8&255?-1:1;return i.value=n*(e>>16&65535),i.isFloat(i.type)&&(i.value/=1e4),i},e}();t.TradeLineData=e,__reflect(e.prototype,"app.TradeLineData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.buyBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),t.TimerManager.ins().remove(this.updateTime,this)},i.prototype.dataChanged=function(){if(this.data){this.itemBg.source=this.data.idx%2==0?"bg_quyu_1":"bg_quyu_2",this.curItem.data=this.data,this.curMoney.text=this.data.itemPrice;var e=t.GlobalConfig.StdItems[this.data.wItemId];if(e){this.itemName.textColor=t.ColorUtil.GOODS_COLOR[e.showQuality]?t.ColorUtil.GOODS_COLOR[e.showQuality]:15774976,this.itemName.text=e.name;var i=this.data.itemTime-egret.getTimer()>>0;i>0?(this.time.visible=!0,this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this)):this.time.visible=!1,this.curItem.setVisCompareImg(!1);var n=t.BagManager.ins().getItemUseState(e),s=t.EntityMgr.ins().getPlayerPropertySet(),a=s.propSet.getAP_JOB();if(1==e.packageType&&(0==e.suggVocation||e.suggVocation==a)&&1==n){var r=t.EquipItemMgr.ins().getEquipsByPos(e.type-1);r&&r.series?r.itemScore<this.data.itemScore&&this.curItem.setVisCompareImg(!0):this.curItem.setVisCompareImg(!0)}}}},i.prototype.updateTime=function(){var e=this.data.itemTime-egret.getTimer();this.time.text=""+t.DateUtils.getFormatBySecond(Math.floor(e/1e3),1),0>=e&&(t.TimerManager.ins().remove(this.updateTime,this),this.time.text="")},i.prototype.onTouch=function(e){var i=this,n=t.EntityMgr.ins().getPlayerPropertySet();switch(e.currentTarget){case this.buyBtn:if(n&&n.propSet){var s=n.propSet,a=t.GlobalConfig.editionConf,r=!1;if(a)if(r=a.Button?+s.getNotBindYuanBao()>=this.data.itemPrice&&+s.getTradeQuota()>=this.data.itemPrice:+s.getNotBindYuanBao()>=this.data.itemPrice){var o=t.GlobalConfig.StdItems[this.data.wItemId];o&&t.CautionView.show(t.StringUtils.replace(t.LanguageUtils.language_Common_39,this.data.itemPrice,o.name,this.data.btCount),function(){t.TradeLineMgr.ins().send_27_3(i.data.index,i.data.btCount,i.data.itemPrice)},this)}else{var l=a.Button>0?t.LanguageUtils.language_Tips26:t.LanguageUtils.language_Tips104;t.UserTips.ins().showUITips(l)}}}},i}(t.BaseItemRender);t.TradeLineBuyItemView=e,__reflect(e.prototype,"app.TradeLineBuyItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.priceIsClick=!1,t.timeIsClick=!1,t.nameIsClick=!1,t.skinName="TradeLineBuyViewSkin",t}return __extends(i,e),i.prototype.open=function(e){void 0===e&&(e=0),t.MouseScroller.bind(this.buyScroller),this.moneyPanel.setData(QatEnum.qatYuanbao,!1),this.tabList.itemRenderer=t.TradeLineTabView,this.buyList.itemRenderer=t.TradeLineBuyItemView,this.observe(t.TradeLineMgr.ins().post_27_1,this.updateList),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updatePlayerInfo),this.addTouchEvent(this.price,this.onTouch),this.addTouchEvent(this.time,this.onTouch),this.addTouchEvent(this.itemName,this.onTouch),this.tabList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),t.TradeLineMgr.ins().send_27_1();var i=t.TradeLineMgr.ins().getBuyTabList();this.tabList.dataProvider=new eui.ArrayCollection(i),this.tabList.selectedIndex=e,this.updatePlayerInfo()},i.prototype.sendInfo=function(){t.TradeLineMgr.ins().send_27_1()},i.prototype.onChange=function(t){this.tabList.selectedIndex=t.itemIndex,this.updateList()},i.prototype.onTouch=function(e){var i=this.tabList.selectedIndex,n=t.TradeLineMgr.ins().itemInfo[i];switch(e.currentTarget){case this.price:this.priceIsClick?n.sort(t.TradeLineMgr.ins().sortHighToLowMenu):n.sort(t.TradeLineMgr.ins().sortLowToHighMenu),this.priceIsClick=!this.priceIsClick;break;case this.time:this.timeIsClick?n.sort(t.TradeLineMgr.ins().sortTimeHighToLowMenu):n.sort(t.TradeLineMgr.ins().sortTimeLowToHighMenu),this.timeIsClick=!this.timeIsClick;break;case this.itemName:this.nameIsClick?n.sort(t.TradeLineMgr.ins().sortStrMenu):n.sort(t.TradeLineMgr.ins().sortStrHighMenu),this.nameIsClick=!this.nameIsClick}this.updateList()},i.prototype.updatePlayerInfo=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet){var i=t.ColorUtil.getMoneyColor(e.propSet.getNotBindYuanBao()),n="|C:"+i+"&T:"+t.CommonUtils.zhuanhuan(e.propSet.getNotBindYuanBao())+"|";this.moneyPanel.setCount(n)}var s=t.GlobalConfig.editionConf;s&&(s.Button?this.curQuota.text=t.LanguageUtils.language_Common_54+e.propSet.getTradeQuota():this.curQuota.text=t.LanguageUtils.language_Common_54+t.LanguageUtils.language_Common_53)},i.prototype.updateList=function(){var e=this.tabList.selectedIndex,i=t.TradeLineMgr.ins().itemInfo[e],n=t.TradeLineMgr.ins().setInfoIndex(i);this.buyList.dataProvider=new eui.ArrayCollection(n)},i.prototype.close=function(){this.$onClose(),t.MouseScroller.unbind(this.buyScroller),this.tabList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.removeTouchEvent(this.price,this.onTouch),this.removeTouchEvent(this.time,this.onTouch),this.removeTouchEvent(this.itemName,this.onTouch),this.tabList=null,this.curQuota=null,this.buyList=null,this.price=null,this.time=null,this.itemName=null},i}(t.BaseEuiView);t.TradeLineBuyView=e,__reflect(e.prototype,"app.TradeLineBuyView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.shelfBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.shelfBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),t.TimerManager.ins().remove(this.updateTime,this)},i.prototype.dataChanged=function(){if(this.data){this.itemBg.source=this.data.idx%2==0?"bg_quyu_1":"bg_quyu_2";var e=this.data;this.curItem.data=this.data,this.curMoney.text=e.itemPrice+"";var i=t.GlobalConfig.StdItems[e.wItemId];if(i){this.itemName.textColor=t.ColorUtil.GOODS_COLOR[i.showQuality]?t.ColorUtil.GOODS_COLOR[i.showQuality]:15774976,this.itemName.text=i.name;var n=e.itemTime-egret.getTimer()>>0;n>0?(this.time.visible=!0,this.updateTime(),t.TimerManager.ins().remove(this.updateTime,this),t.TimerManager.ins().doTimer(1e3,0,this.updateTime,this)):this.time.visible=!1,this.curItem.setVisCompareImg(!1);var s=t.BagManager.ins().getItemUseState(i),a=t.EntityMgr.ins().getPlayerPropertySet(),r=a.propSet.getAP_JOB();if(1==i.packageType&&(0==i.suggVocation||i.suggVocation==r)&&1==s){var o=t.EquipItemMgr.ins().getEquipsByPos(i.type-1);o&&o.series?o.itemScore<e.itemScore&&this.curItem.setVisCompareImg(!0):this.curItem.setVisCompareImg(!0)}}}},i.prototype.updateTime=function(){var e=this.data.itemTime-egret.getTimer();this.time.text=""+t.DateUtils.getFormatBySecond(Math.floor(e/1e3),1),0>=e&&(t.TimerManager.ins().remove(this.updateTime,this),this.time.text="")},i.prototype.onTouch=function(e){switch(e.currentTarget){case this.shelfBtn:this.data&&t.TradeLineMgr.ins().send_27_6(1,this.data.index)}},i}(t.BaseItemRender);t.TradeLineIsSellingItemView=e,__reflect(e.prototype,"app.TradeLineIsSellingItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="TradeLineIsSellingViewSkin",t}return __extends(i,e),i.prototype.open=function(){t.MouseScroller.bind(this.itemScroller),this.sellList.itemRenderer=t.TradeLineIsSellingItemView,this.addTouchEvent(this.allShelf,this.onTouch),t.TradeLineMgr.ins().send_27_2(),this.observe(t.TradeLineMgr.ins().post_27_2,this.updateList)},i.prototype.sendInfo=function(){t.TradeLineMgr.ins().send_27_2()},i.prototype.updateList=function(e){e&&(this.curSell.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_52,e.length)),this.sellList.dataProvider=new eui.ArrayCollection(e))},i.prototype.onTouch=function(e){switch(e.currentTarget){case this.allShelf:t.TradeLineMgr.ins().send_27_6(2)}},i.prototype.close=function(){this.$onClose(),t.MouseScroller.unbind(this.itemScroller),this.removeTouchEvent(this.allShelf,this.onTouch),this.sellList=null,this.curSell=null,this.allShelf=null},i}(t.BaseEuiView);t.TradeLineIsSellingView=e,__reflect(e.prototype,"app.TradeLineIsSellingView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.imageArr=["trade_zt3","trade_zt1","trade_zt2"],t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.receiveBtn,this.onTouch)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.receiveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},i.prototype.dataChanged=function(){if(this.data){this.itemBg.source=this.data.idx%2==0?"bg_quyu_1":"bg_quyu_2";var e=this.data;this.curItem.data=this.data,this.curMoney.text=e.itemPrice+"";var i=t.GlobalConfig.StdItems[e.wItemId];if(this.curItem.setVisCompareImg(!1),i){this.itemName.textColor=t.ColorUtil.GOODS_COLOR[i.showQuality]?t.ColorUtil.GOODS_COLOR[i.showQuality]:15774976,this.itemName.text=i.name,this.itemState.source=e.itemState-1>=0?this.imageArr[e.itemState-1]:"";var n=t.BagManager.ins().getItemUseState(i),s=t.EntityMgr.ins().getPlayerPropertySet(),a=s.propSet.getAP_JOB();if(1==i.packageType&&(0==i.suggVocation||i.suggVocation==a)&&1==n){var r=t.EquipItemMgr.ins().getEquipsByPos(i.type-1);r&&r.series?r.itemScore<e.itemScore&&this.curItem.setVisCompareImg(!0):this.curItem.setVisCompareImg(!0)}}}},i.prototype.onTouch=function(e){switch(e.currentTarget){case this.receiveBtn:if(this.data){var i=t.GlobalConfig.BagRemainConfig[3];if(i){var n=t.BagMgr.ins().getBagCapacity(i.bagremain);n?t.TradeLineMgr.ins().send_27_7(1,this.data.index):t.UserTips.ins().showUITips(i.bagtips)}}}},i}(t.BaseItemRender);t.TradeLineReceiveItemView=e,__reflect(e.prototype,"app.TradeLineReceiveItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="TradeLineReceiveViewSkin",t}return __extends(i,e),i.prototype.open=function(){t.MouseScroller.bind(this.receiveScroller),this.receliveList.itemRenderer=t.TradeLineReceiveItemView,t.TradeLineMgr.ins().send_27_8(),this.shouxufei.text=t.GlobalConfig.taxconfig&&t.GlobalConfig.taxconfig.tax?t.LanguageUtils.language_Common_50+t.GlobalConfig.taxconfig.tax+"%":t.LanguageUtils.language_Common_50+"5%",this.addTouchEvent(this.allReceive,this.onTouch),this.observe(t.TradeLineMgr.ins().post_27_8,this.updateList)
},i.prototype.sendInfo=function(){t.TradeLineMgr.ins().send_27_8()},i.prototype.updateList=function(e){this.notHave.visible=!1,this.receliveList.visible=!0,this.getMoney.text=t.LanguageUtils.language_Common_51+t.TradeLineMgr.ins().getMoney,e.length>0?this.receliveList.dataProvider=new eui.ArrayCollection(e):(this.notHave.visible=!0,this.receliveList.visible=!1)},i.prototype.onTouch=function(e){switch(e.currentTarget){case this.allReceive:var i=t.BagMgr.ins().getBagNumEnough();i?t.TradeLineMgr.ins().send_27_7(2):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips4)}},i.prototype.close=function(){this.$onClose(),t.MouseScroller.unbind(this.receiveScroller),this.removeTouchEvent(this.allReceive,this.onTouch),this.receliveList=null,this.getMoney=null,this.shouxufei=null,this.allReceive=null,this.notHave=null},i}(t.BaseEuiView);t.TradeLineReceiveView=e,__reflect(e.prototype,"app.TradeLineReceiveView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="TradeLineSellViewSkin",t.dSpriteSheet=new how.DSpriteSheet,t}return __extends(i,e),i.prototype.open=function(){this.textInput.addEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.observe(t.TradeLineMgr.ins().postItemSell,this.updateItem),this.observe(t.TradeLineMgr.ins().post_27_4,this.updateView),this.curITem.data=null,this.textInput.text="";var e=t.GlobalConfig.taxconfig;e&&(e.cost&&(this.handlingMoney.text=e.cost+""),e.tax&&(this.dealSuccessful.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_49,e.tax))),e.sellTitleDesc&&(this.titleDesc.textFlow=t.TextFlowMaker.generateTextFlow(e.sellTitleDesc))),this.addTouchEvent(this.addItem,this.onTouch),this.addTouchEvent(this.shelves,this.onTouch),t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),t.BagMgr.ins().sellGlobalPoint=this.itemGrp.localToGlobal(0,0)},i.prototype.onFocusOut=function(e){var i=t.GlobalConfig.taxconfig,n=e.currentTarget;switch(n){case this.textInput:i&&(i.maxSellPrice&&+this.textInput.text>i.maxSellPrice&&(this.textInput.text=i.maxSellPrice+""),i.minSellPrice&&+this.textInput.text<=i.minSellPrice&&(this.textInput.text=i.minSellPrice+""))}i=null,n=null},i.prototype.updateView=function(){this.curITem.data=null,this.textInput.text=""},i.prototype.updateItem=function(t){t&&(this.curUserItem=t,this.curITem.data=t)},i.prototype.onTouch=function(e){var i=t.EntityMgr.ins().getPlayerPropertySet(),n=t.GlobalConfig.taxconfig.cost;switch(e.currentTarget){case this.addItem:t.ViewManager.ins().isShow(t.BagView)||t.ViewManager.ins().open(t.BagView);break;case this.shelves:if(i&&i.propSet&&n){var s=i.propSet;""!=this.textInput.text?+s.getBindCoin()>=n?this.curUserItem&&this.curUserItem.series?t.TradeLineMgr.ins().send_27_4(this.curUserItem.series,+this.textInput.text):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips29):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips27):t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips33)}}i=null,n=null},i.prototype.stopMove=function(){t.BagMgr.ins().sellGlobalPoint=this.itemGrp.localToGlobal(0,0)},i.prototype.close=function(){this.$onClose(),this.removeTouchEvent(this.addItem,this.onTouch),this.removeTouchEvent(this.shelves,this.onTouch),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.textInput.removeEventListener(egret.TextEvent.FOCUS_OUT,this.onFocusOut,this),this.curITem=null,this.addItem=null,this.shelves=null,this.textInput=null,this.itemGrp=null,this.dSpriteSheet.dispose(),this.dSpriteSheet=null,this.handlingCharge=null,this.handlingMoney=null,this.dealSuccessful=null,this.curUserItem=null},i}(t.BaseEuiView);t.TradeLineSellView=e,__reflect(e.prototype,"app.TradeLineSellView")}(app||(app={}));var app;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.label.text=this.data.name)},e}(t.BaseItemRender);t.TradeLineTabView=e,__reflect(e.prototype,"app.TradeLineTabView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.idx=0,i.idx2=0,i.skinName="TradeLineWinSkin",i.name="TradeLineWin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tab.itemRenderer=t.CommonTabBarWin,this.tab.dataProvider=new eui.ArrayCollection(["jishou_tab_buy","jishou_tab_sell","jishou_tab_isSell","jishou_tab_receive"]),this.dragDropUI.setParent(this)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(;e[0]instanceof Array;)e=e[0];e[0]&&(this.idx=e[0]),e[1]&&(this.idx2=e[1]),this.ruleTips.ruleDesc=t.GlobalConfig.taxconfig.rule1,this.addChangeEvent(this.tab,this.onTabTouch),this.addChangingEvent(this.tab,this.onTabTouching),this.setOpenIndex(this.idx)},i.prototype.onTabTouch=function(t){this.setOpenIndex(t.currentTarget.selectedIndex)},i.prototype.onTabTouching=function(t){return this.checkIsOpen(t.currentTarget.selectedIndex)?void 0:void t.preventDefault()},i.prototype.setOpenIndex=function(e){switch(e){case 0:this.buyPanel?(this.buyPanel.visible=!0,this.buyPanel.sendInfo()):(this.buyPanel=new t.TradeLineBuyView,this.pageGroup.addChild(this.buyPanel),this.buyPanel.open(this.idx2)),this.sellPanel&&(this.sellPanel.visible=!1),this.isSellingPanel&&(this.isSellingPanel.visible=!1),this.receivePanel&&(this.receivePanel.visible=!1),this.dragDropUI.setTitle(t.LanguageUtils.language_System45);break;case 1:this.dragDropUI.setTitle(t.LanguageUtils.language_System46),this.sellPanel?this.sellPanel.visible=!0:(this.sellPanel=new t.TradeLineSellView,this.pageGroup.addChild(this.sellPanel),this.sellPanel.open()),this.buyPanel&&(this.buyPanel.visible=!1),this.isSellingPanel&&(this.isSellingPanel.visible=!1),this.receivePanel&&(this.receivePanel.visible=!1);break;case 2:this.dragDropUI.setTitle(t.LanguageUtils.language_System47),this.isSellingPanel?(this.isSellingPanel.visible=!0,this.isSellingPanel.sendInfo()):(this.isSellingPanel=new t.TradeLineIsSellingView,this.pageGroup.addChild(this.isSellingPanel),this.isSellingPanel.open()),this.buyPanel&&(this.buyPanel.visible=!1),this.sellPanel&&(this.sellPanel.visible=!1),this.receivePanel&&(this.receivePanel.visible=!1);break;case 3:this.dragDropUI.setTitle(t.LanguageUtils.language_System48),this.receivePanel?(this.receivePanel.visible=!0,this.receivePanel.sendInfo()):(this.receivePanel=new t.TradeLineReceiveView,this.pageGroup.addChild(this.receivePanel),this.receivePanel.open()),this.buyPanel&&(this.buyPanel.visible=!1),this.sellPanel&&(this.sellPanel.visible=!1),this.isSellingPanel&&(this.isSellingPanel.visible=!1)}},i.prototype.checkIsOpen=function(t){switch(t){case 0:return!0;case 1:return!0;case 2:return!0;case 3:return!0}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.removeEventListener(egret.TouchEvent.CHANGE,this.onTabTouch,this),this.removeEventListener(egret.TouchEvent.CHANGING,this.onTabTouching,this),this.dragDropUI.destroy(),this.dragDropUI=null,this.buyPanel&&this.buyPanel.close(),this.sellPanel&&this.sellPanel.close(),this.isSellingPanel&&this.isSellingPanel.close(),this.receivePanel&&this.receivePanel.close(),this.tab=null,this.buyPanel=null,this.sellPanel=null,this.isSellingPanel=null,this.receivePanel=null},i}(t.BaseEuiView);t.TradeLineWin=e,__reflect(e.prototype,"app.TradeLineWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.selectIndex=-1,i.keyNum=0,i.boxIdList=[1087,1086,1085],i.boxNumObj={},i.skinName="UseBossBoxSkin",i.name="UseBossBoxView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.addTouchEvent(this.btnUse,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.box0,this.onClick),this.addTouchEvent(this.box1,this.onClick),this.addTouchEvent(this.box2,this.onClick),this.observe(t.DefaultMgr.ins().postPlayerChange,this.updateInfo),this.observe(t.BagMgr.ins().post_8_1,this.updateItem),this.observe(t.BagMgr.ins().post_8_3,this.updateItem),this.observe(t.BagMgr.ins().post_8_4,this.updateItem),this.updateInfo(),this.updateItem()},i.prototype.updateInfo=function(){var e=t.EntityMgr.ins().getPayer;e&&e.propSet&&(this.keyNum=e.propSet.getDimensionKey(),this.LabYaoshiNum.text=":"+this.keyNum)},i.prototype.updateItem=function(){for(var e=-1==this.selectIndex,i=this.boxIdList.length-1;i>=0;i--){var n=t.GlobalConfig.StdItems[this.boxIdList[i]],s=n.name,a=t.BagMgr.ins().getItemCountById(n.id);a<this.boxNumObj[i]&&(this.playUseEff(i),this.selectIndex==i&&0>=a&&(e=!0)),this.boxNumObj[i]=a,this["box"+i].data={type:0,id:n.id,count:a},this["box"+i].itemCount.text=a>0?t.CommonUtils.overLength(a):"",this["labBox"+i].text=s.slice(0,2)+"\n"+s.slice(2),this["labBox"+i].textColor=t.ColorUtil.GOODS_COLOR[n.showQuality]}if(e)for(var i=this.boxIdList.length-1;i>=0;i--){var a=t.BagMgr.ins().getItemCountById(this.boxIdList[i]);if(a>0){this.onSelect(i);break}}},i.prototype.onSelect=function(e){this.selectIndex=e,this.selectImg.x=this["box"+this.selectIndex].x;var i=t.GlobalConfig.StdItems[this.boxIdList[this.selectIndex]],n=15064527,s=0;i&&i.cost&&i.cost[0]&&(s=i.cost[0].count,this.keyNum<s&&(n=15007744)),this.btnUse.labelDisplay.textFlow=t.TextFlowMaker.generateTextFlow("|C:"+n+"&T:*"+s+"|"+t.LanguageUtils.language_Common_43)},i.prototype.playUseEff=function(e){this.useMc||(this.useMc=t.ObjectPool.pop("app.MovieClip")),this.useMc.x=this["box"+e].x+this["box"+e].width/2,this.useMc.y=this["box"+e].y+this["box"+e].height/2,this.useMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_bx",1),this.addChild(this.useMc)},i.prototype.onClick=function(e){var i,n=e.currentTarget;switch(n){case this.box0:this.onSelect(0);break;case this.box1:this.onSelect(1);break;case this.box2:this.onSelect(2);break;case this.btnUse:var s=this.boxIdList[this.selectIndex];if(i=t.BagMgr.ins().getItemById(s))t.ViewManager.ins().open(t.UseItemConfirmView,s);else{var a=t.GlobalConfig.StdItems[s];t.UserTips.ins().showUITips(t.StringUtils.replace(t.LanguageUtils.language_War_Text20,a.name))}break;case this.closeBtn:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.useMc&&(this.useMc.destroy(),this.useMc=null),this.removeTouchEvent(this.box0,this.onClick),this.removeTouchEvent(this.box1,this.onClick),this.removeTouchEvent(this.box2,this.onClick),this.removeTouchEvent(this.btnUse,this.onClick),this.removeTouchEvent(this.closeBtn,this.onClick),this.removeFromParent()},i}(t.BaseEuiView);t.UseBossBoxView=e,__reflect(e.prototype,"app.UseBossBoxView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="CommonViewSkin",i.name="UseItemConfirmView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_System61),this.strLab.textAlign="center"},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this.itemData=t.GlobalConfig.StdItems[e[0]],this.itemData&&(this.strLab.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_232,this.itemData.name)))),this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.btnCofim,this.onClick)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnClose:t.ViewManager.ins().close(this);break;case this.btnCofim:if(this.itemData){var i=t.BagMgr.ins().getItemById(this.itemData.id);i&&t.BagManager.ins().useItem(i.series,i.wItemId)}t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.btnCofim,this.onClick)},i}(t.BaseEuiView);t.UseItemConfirmView=e,__reflect(e.prototype,"app.UseItemConfirmView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(){function e(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.type=t,this.value=e,this.value2=i}return e.getItemBindByType=function(e){var i="";return e.denyDeal||e.denySell?!e.denyDeal&&e.denySell&&(i=t.LanguageUtils.language_Common_5):i=t.LanguageUtils.language_Common_4,i},e.getItemBagType=function(e){var i="";return i=1==e.packageType?t.LanguageUtils.language_Common_6:127==+e.type||131==+e.type?t.LanguageUtils.language_Common_7:128==+e.type||129==+e.type?t.LanguageUtils.language_Common_8:130==+e.type?t.LanguageUtils.language_Common_9:132==+e.type?t.LanguageUtils.language_Common_10:133==+e.type?t.LanguageUtils.language_Common_58:t.LanguageUtils.language_Common_7},e.getAttStrByType=function(i,n,s,a,r){void 0===n&&(n=4),void 0===s&&(s="+"),void 0===a&&(a=!0),void 0===r&&(r=!0);var o="";switch(r&&(o=a?t.StringUtils.complementByChar(e.getAttrStrByType(i.type),8*n):e.getAttrStrByType(i.type)),i.type){case 138:case 141:o+=s+(i.value/100).toFixed(1)+"%";break;default:o+=s+i.value}return o},e.getItemAttStrByType=function(e,i,n,s,a,r,o){void 0===i&&(i=null),void 0===n&&(n=0),void 0===s&&(s=!1),void 0===a&&(a=!0),void 0===r&&(r=null),void 0===o&&(o=null);var l=e.type,h="";if(76==l||77==l)h+=this.formatDoubleAttr(e,i,n,s,a,r,o);else if(l>=t.ComAttribute.aPhysicalAttackMinAdd&&l<=t.ComAttribute.aMagicDefenceMaxPower)h+=this.formatDoubleAttr(e,i,n,s,a,r,o);else if(s)switch(l){case 6:case 35:case 54:case 59:case 65:case 66:case 69:case 70:case 74:case 75:case 79:case 80:case 81:case 82:case 83:case 84:case 136:case 138:case 141:case 144:h+=e.value2?"|C:0x2eb52d&T:"+t.MathUtils.GetPercent(e.value,1e4)+"("+t.MathUtils.GetPercent(e.value2,1e4)+")|":t.MathUtils.GetPercent(e.value,1e4);break;default:h+=e.value}else if(a)switch(l){case 6:case 35:case 54:case 59:case 64:case 65:case 66:case 69:case 70:case 74:case 75:case 79:case 80:case 81:case 82:case 83:case 84:case 86:case 88:case 136:case 138:case 140:case 141:case 144:h+=e.value2?"|C:0x2eb52d&T:"+this.getAttrStrByType(l)+"：+"+t.MathUtils.GetPercent(e.value,1e4)+"("+t.MathUtils.GetPercent(e.value2,1e4)+")|":r&&o?"|C:"+r+"&T:"+this.getAttrStrByType(l)+"：||C:"+o+"&T:+"+t.MathUtils.GetPercent(e.value,1e4)+"|":this.getAttrStrByType(l)+"：+"+t.MathUtils.GetPercent(e.value,1e4);break;case 67:case 85:var p=67==l?"+":"";h+=r&&o?0==e.value?"|C:"+r+"&T:"+this.getAttrStrByType(l)+"：||C:"+o+"&T:未激活|":e.value>=1e4?"|C:"+r+"&T:"+this.getAttrStrByType(l)+"：||C:"+o+"&T:"+p+Math.floor(e.value/1e3)+t.LanguageUtils.language_Time_Sec+"|":"|C:"+r+"&T:"+this.getAttrStrByType(l)+"：||C:"+o+"&T:"+p+e.value+t.LanguageUtils.language_Omission_txt56+"|":0==e.value?this.getAttrStrByType(l)+"：未激活":e.value>=1e4?this.getAttrStrByType(l)+"："+p+Math.floor(e.value/1e3)+t.LanguageUtils.language_Time_Sec:this.getAttrStrByType(l)+"："+p+e.value+t.LanguageUtils.language_Omission_txt56;break;default:h+=e.value2?"|C:0x2eb52d&T:"+this.getAttrStrByType(l)+"：+"+e.value+"("+e.value2+")|":r&&o?"|C:"+r+"&T:"+this.getAttrStrByType(l)+"：||C:"+o+"&T:+"+e.value+"|":this.getAttrStrByType(l)+"：+"+e.value}else h+=this.getAttrStrByType(l)+"：";return h},e.getRiningItemAttStrByType=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var s=e.type,a="";return a+=6==s||54==s||59==s||65==s||66==s||69==s||70==s||74==s||75==s||79==s||80==s||81==s||82==s||83==s||84==s||136==s||138==s||141==s||144==s?i&&n?"|C:"+i+"&T:"+this.getAttrStrByType(s)+"：||C:"+n+"&T:+"+t.MathUtils.GetPercent(e.value,1e4)+"|":this.getAttrStrByType(s)+"： +"+t.MathUtils.GetPercent(e.value,1e4):i&&n?"|C:"+i+"&T:"+this.getAttrStrByType(s)+"：||C:"+n+"&T:+"+e.value+"|":this.getAttrStrByType(s)+"： +"+e.value},e.formatDoubleAttr=function(i,n,s,a,r,o,l){void 0===s&&(s=0),void 0===a&&(a=!1),void 0===r&&(r=!0),void 0===o&&(o=null),void 0===l&&(l=null);var h,p="",u=-1;switch(i.type){case t.ComAttribute.aPhysicalAttackMaxAdd:p=t.LanguageUtils.attrMinMax[0],u=t.ComAttribute.aPhysicalAttackMinAdd,h=t.ComAttribute.aPhysicalAttackMaxAdd;break;case t.ComAttribute.aMagicAttackMaxAdd:p=t.LanguageUtils.attrMinMax[1],u=t.ComAttribute.aMagicAttackMinAdd,h=t.ComAttribute.aMagicAttackMaxAdd;break;case t.ComAttribute.aWizardAttackMaxAdd:p=t.LanguageUtils.attrMinMax[2],u=t.ComAttribute.aWizardAttackMinAdd,h=t.ComAttribute.aWizardAttackMaxAdd;break;case t.ComAttribute.aPhysicalDefenceMaxAdd:p=t.LanguageUtils.attrMinMax[3],u=t.ComAttribute.aPhysicalDefenceMinAdd,h=t.ComAttribute.aPhysicalDefenceMaxAdd;break;case t.ComAttribute.aMagicDefenceMaxAdd:p=t.LanguageUtils.attrMinMax[4],u=t.ComAttribute.aMagicDefenceMinAdd,h=t.ComAttribute.aMagicDefenceMaxAdd;break;case 77:p=t.LanguageUtils.attrMinMax[5],u=76,h=77}if(u>0){var c=e.getAttrValueByType(u,n),g=e.getAttrValueByType(h,n);1==s?p=a?c+" - "+g:r?o&&l?"|C:"+o+"&T:"+p+"||C:"+l+"&T:"+c+" - "+g+"|":""+p+c+" - "+g:""+p:i.value2?p=r?"|C:0x2eb52d&T:"+p+c+" - "+g+"(+"+i.value2+")|":"|C:0x2eb52d&T:"+p+")|":p+=c+" - "+g}return p},e.getAttrStrByType=function(e){for(var i in t.LanguageUtils.language_ATTROBJ)if(e==+i)return t.LanguageUtils.language_ATTROBJ[i];return null},e.getAttrValueByType=function(t,e){for(var i=0;i<e.length;i++)if(t==e[i].type)return e[i].value;return 0},e.isUseItem=function(e){var i="",n=t.EntityMgr.ins().getPlayerPropertySet();if(e){for(var s=0;s<e.length;s++)switch(e[s].cond){case t.StdItemCondition.ucLevel:if(n&&n.propSet&&n.propSet.getLevel()<e[s].value)return i=t.LanguageUtils.language_Common_84;break;case t.StdItemCondition.ucGender:if(n&&n.propSet&&n.propSet.getSex()!=e[s].value)return i=t.LanguageUtils.language_Common_85;break;case t.StdItemCondition.ucJob:if(n&&n.propSet&&n.propSet.getAP_JOB()!=e[s].value)return i=t.LanguageUtils.language_Common_86;break;case t.StdItemCondition.ucChief:return i=t.LanguageUtils.language_Common_87;case t.StdItemCondition.ucPower:if(n&&n.propSet&&n.propSet.getPowerValue()<e[s].value)return i=t.LanguageUtils.language_Common_88;break;case t.StdItemCondition.ucCircle:if(n&&n.propSet&&n.propSet.getZSLevel()<e[s].value)return i=t.StringUtils.replace(t.LanguageUtils.language_Common_89,e[s].value);break;case t.StdItemCondition.ucCircleLess:if(n&&n.propSet&&n.propSet.getZSLevel()>e[s].value)return i=t.StringUtils.replace(t.LanguageUtils.language_Common_90,e[s].value);break;case t.StdItemCondition.ucVipLevel:break;case t.StdItemCondition.ucNeiGongLevel:if(n&&n.propSet&&n.propSet.getMeridians()<e[s].value)return i=t.LanguageUtils.language_Common_243;case t.StdItemCondition.ucGuildLevel:if(n&&n.propSet&&n.propSet.getGuildLevel()<e[s].value)return i="|C:0xff7700&T:"+t.LanguageUtils.language_Common_264+"|"}return i}},e.getItemUseCond=function(e){var i="",n=t.EntityMgr.ins().getPlayerPropertySet();if(e)for(var s=0;s<e.length;s++){switch(e[s].cond){case t.StdItemCondition.ucLevel:var a="0xffffff";n&&n.propSet&&n.propSet.getLevel()<e[s].value&&(a="0xe50000"),i+="|C:"+a+"&T:"+t.LanguageUtils.language_Common_11+e[s].value+t.LanguageUtils.language_Common_1+"|";break;case t.StdItemCondition.ucGender:var r="0xffffff";n&&n.propSet&&n.propSet.getSex()!=e[s].value&&(r="0xe50000"),i+="|C:"+r+"&T:"+t.LanguageUtils.language_Common_12+e[s].value+"|";break;case t.StdItemCondition.ucJob:var o="0xffffff";n&&n.propSet&&n.propSet.getAP_JOB()!=e[s].value&&(o="0xe50000"),i+="|C:"+o+"&T:"+t.LanguageUtils.language_Common_13+e[s].value+"|";break;case t.StdItemCondition.ucChief:i+=t.LanguageUtils.language_Common_14;break;case t.StdItemCondition.ucPower:var l="0xffffff";n&&n.propSet&&n.propSet.getPowerValue()<e[s].value&&(l="0xe50000"),i+="|C:"+l+"&T:"+t.LanguageUtils.language_Common_28+e[s].value+"|";break;case t.StdItemCondition.ucCircle:var h="0xffffff";n&&n.propSet&&n.propSet.getZSLevel()<e[s].value&&(h="0xe50000"),i+="|C:"+h+"&T:"+t.LanguageUtils.language_Common_15+e[s].value+t.LanguageUtils.language_Common_0+"|";break;case t.StdItemCondition.ucCircleLess:var p="0xffffff";n&&n.propSet&&n.propSet.getZSLevel()>e[s].value&&(p="0xe50000"),i+="|C:"+p+"&T:"+t.LanguageUtils.language_Common_15+e[s].value+t.LanguageUtils.language_Common_17+"|";break;case t.StdItemCondition.ucVipLevel:break;case t.StdItemCondition.ucNeiGongLevel:var u="0xffffff";n&&n.propSet&&n.propSet.getMeridians()<e[s].value&&(u="0xe50000"),i+="|C:"+u+"&T:"+t.LanguageUtils.language_Common_244+e[s].value+t.LanguageUtils.language_Common_1+"|";break;case t.StdItemCondition.ucGuildLevel:var c="0xffffff";n&&n.propSet&&n.propSet.getGuildLevel()<e[s].value&&(c="0xe50000"),i+="|C:"+c+"&T:"+t.LanguageUtils.language_Common_264+"|"}s!=e.length-1&&(i+="\n")}return i},e.getSlowMedicine=function(i){for(var n="",s=0;s<i.length;s++)if(0==i[s].type){var a=i[s].value,r=t.GlobalConfig.BuffConf[a];r&&(n+=e.hpMpArr[r.type]+r.value+"\n")}return n},e.getShunHuiMedicine=function(i){for(var n="",s=t.EntityMgr.ins().getPlayerPropertySet(),a=0;a<i.length;a++){var r=i[a].type,o=i[a].value;if(s&&s.propSet){var l=s.propSet.getSpeedMedicine();if(l>0){var h=Math.floor(o*l/1e4);n+=e.hpMpArr[r]+o+"("+t.LanguageUtils.language_Common_18+h+")\n"}else n+=e.hpMpArr[r]+o+"\n"}}return n},e.getBestAttrs=function(t){var i=[];if(""!=t.topLine&&void 0!=t.topLine)for(var n=t.topLine.split("|"),s=0;s<n.length;s++){var a=n[s].split(","),r=new e(+a[0],+a[1]);i.push(r)}return i},e.getTotalAttrs=function(t,i){for(var n=[],s=0;s<i.length;s++)for(var a=0;a<t.length;a++)if(i[s].type==t[a].type){var r=t[a].value+i[s].value,o=new e(i[s].type,r,i[s].value);n.push(o),t.splice(a,1),i.splice(s,1),s-=1;break}if(i.length>0)for(var l=0;l<i.length;l++){var h=new e(i[l].type,i[l].value,i[l].value);n.push(h)}var p=t.concat(n);return p.sort(this.attrSort),p},e.attrSort=function(t,e){return t.type<e.type?-1:t.type>e.type?1:0},e.getAttrValue=function(e,i,n){void 0===n&&(n=!1);var s,a,r="";switch(e){case t.ComAttribute.aPhysicalAttackMaxAdd:case t.ComAttribute.aMagicAttackMaxAdd:case t.ComAttribute.aWizardAttackMaxAdd:case t.ComAttribute.aMagicDefenceMaxAdd:case t.ComAttribute.aMountMaxAttackRateAdd:case t.ComAttribute.aPhysicalDefenceMaxAdd:return null;case t.ComAttribute.aPhysicalAttackMinAdd:return s=i[t.ComAttribute.aPhysicalAttackMinAdd]?i[t.ComAttribute.aPhysicalAttackMinAdd]:"0",a=i[t.ComAttribute.aPhysicalAttackMaxAdd]?i[t.ComAttribute.aPhysicalAttackMaxAdd]:"0",r=s+"-"+a,n&&(r=t.LanguageUtils.attrMinMax[0]+r),r;case t.ComAttribute.aMagicAttackMinAdd:return s=i[t.ComAttribute.aMagicAttackMinAdd]?i[t.ComAttribute.aMagicAttackMinAdd]:"0",a=i[t.ComAttribute.aMagicAttackMaxAdd]?i[t.ComAttribute.aMagicAttackMaxAdd]:"0",r=s+"-"+a,n&&(r=t.LanguageUtils.attrMinMax[1]+r),r;case t.ComAttribute.aWizardAttackMinAdd:return s=i[t.ComAttribute.aWizardAttackMinAdd]?i[t.ComAttribute.aWizardAttackMinAdd]:"0",a=i[t.ComAttribute.aWizardAttackMaxAdd]?i[t.ComAttribute.aWizardAttackMaxAdd]:"0",r=s+"-"+a,n&&(r=t.LanguageUtils.attrMinMax[2]+r),r;case t.ComAttribute.aMagicDefenceMinAdd:return s=i[t.ComAttribute.aMagicDefenceMinAdd]?i[t.ComAttribute.aMagicDefenceMinAdd]:"0",a=i[t.ComAttribute.aMagicDefenceMaxAdd]?i[t.ComAttribute.aMagicDefenceMaxAdd]:"0",r=s+"-"+a,n&&(r=t.LanguageUtils.attrMinMax[4]+r),r;case t.ComAttribute.aPhysicalDefenceMinAdd:return s=i[t.ComAttribute.aPhysicalDefenceMinAdd]?i[t.ComAttribute.aPhysicalDefenceMinAdd]:"0",a=i[t.ComAttribute.aPhysicalDefenceMaxAdd]?i[t.ComAttribute.aPhysicalDefenceMaxAdd]:"0",r=s+"-"+a,n&&(r=t.LanguageUtils.attrMinMax[3]+r),r;case t.ComAttribute.aMountMinAttackRateAdd:return s=i[t.ComAttribute.aMountMinAttackRateAdd]?i[t.ComAttribute.aMountMinAttackRateAdd]:"0",a=i[t.ComAttribute.aMountMaxAttackRateAdd]?i[t.ComAttribute.aMountMaxAttackRateAdd]:"0",r=s+"-"+a,n&&(r=t.LanguageUtils.attrMinMax[5]+r),r;case t.ComAttribute.aDamage2SelfHpRate:case t.ComAttribute.aHp2DamageAdd:case t.ComAttribute.aMaxHpPower:case t.ComAttribute.aMountMinMagicDefenceRateAdd:case t.ComAttribute.aMountMaxMagicDefenceRateAdd:return r=i[e]?t.MathUtils.GetPercent(i[e],1e4):"0%",n&&(r=t.LanguageUtils.language_ATTROBJ[e]+"："+r),r;default:return r=i[e]?"+"+i[e]:"+0",n&&(r=t.LanguageUtils.language_ATTROBJ[e]+"："+r),r}},e.job=[t.LanguageUtils.language_Common_3,t.LanguageUtils.language_Role_Name_1,t.LanguageUtils.language_Role_Name_2,t.LanguageUtils.language_Role_Name_3],e.hpMpArr=["","HP +","","MP +"],e}();t.AttributeData=e,__reflect(e.prototype,"app.AttributeData")}(app||(app={}));var app;!function(t){var e=function(){function t(t){void 0===t&&(t=10),this.nums=[],this.numsLen=0,this.numSum=0,this.maxNum=t}return t.prototype.push=function(t){this.numsLen>this.maxNum&&(this.numsLen--,this.numSum-=this.nums.shift()),this.nums.push(t),this.numSum+=t,this.numsLen++},t.prototype.getValue=function(){return this.numSum/this.numsLen},t.prototype.clear=function(){this.nums.splice(0),this.numsLen=0,this.numSum=0},t}();t.AverageUtils=e,__reflect(e.prototype,"app.AverageUtils")}(app||(app={}));var app;!function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=!0),this._length=t,this._storer=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){this._storer.length=t>>5},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numDirtyBits",{get:function(){var t,e,i=this._length;for(e=0;i>e;e++)this._storer[e>>5]&1<<e%32&&t++;return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirtyBits",{get:function(){var t,e=[];for(t=this._length-1;t>-1;t--)this._storer[t>>5]&1<<t%32&&(e[e.length]=t);return e},enumerable:!0,configurable:!0}),t.prototype.store=function(t){var e,i,n;for(n=this._length>>3,n>t.bytesAvailable&&(n=t.bytesAvailable),e=0;n>e;e++)e&&e%4==0&&(this._storer[(e>>2)-1]=i,i=0),i|=(255&t.readByte())<<(e%4<<3);n%4&&(this._storer[n>>2]=i)},t.prototype.toByteArray=function(t,e){void 0===t&&(t=null),void 0===e&&(e=0),t||(t=new egret.ByteArray),t.position=e;for(var i,n=this._storer.length,s=0;n>s;s++){i=this._storer[s];for(var a=0;32>a;a+=8)t.writeByte(i>>a&255)}return t},t.prototype.setBit=function(t,e){1&e?this._storer[t>>5]|=1<<t%32:this._storer[t>>5]&=~(1<<t%32)},t.prototype.getBit=function(t){return this._storer[t%this._length>>5]>>t%32&1},t}();t.BitStorer=e,__reflect(e.prototype,"app.BitStorer")}(app||(app={}));var app;!function(t){var e=function(){function t(t,e,i){this.target=t,this.shape=new egret.Shape,this.shape.x=this.target.x+this.target.width/2,this.shape.y=this.target.y+this.target.height/2,t.parent&&t.parent.addChild(this.shape),this.target.mask=this.shape,this.anticlockwise=e,this.dic=i}return t.prototype.drawProgress=function(t,e){void 0===e&&(e=0),t>1&&(t=1);var i=Math.max(this.target.width/2,this.target.height/2)/2*1.5,n=e,s=(360*t+e)*this.dic;this.shape.graphics.clear(),this.shape.graphics.beginFill(65535,1),this.shape.graphics.lineTo(i,0),this.shape.graphics.drawArc(0,0,i,n*Math.PI/180,s*Math.PI/180,this.anticlockwise),this.shape.graphics.lineTo(0,0),this.shape.graphics.endFill()},t.prototype.destroyMe=function(){this.target=null},t}();t.CircleProgress=e,__reflect(e.prototype,"app.CircleProgress")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.mergeARGB=function(t,e,i,n){return t<<24|e<<16|i<<8|n},e.getChannel=function(t,e){switch(e){case this.ALPHA:return t>>24&255;case this.RED:return t>>16&255;case this.GREEN:return t>>8&255;case this.BLUE:return 255&t}return 0},e.getMoneyColor=function(t){var e="0xe5ddcf",i=+t;return e=i>=0&&500>=i?"0xe5ddcf":i>500&&2e3>=i?"0x28ee01":i>2e3&&5e3>=i?"0x0066ff":i>5e3&&2e4>=i?"0xff1ac2":i>2e4&&99999>=i?"0xff7700":"0xe50000"},e.numberToString=function(t,e){return void 0===e&&(e="#"),e+t.toString(16)},e.getITextElement=function(t){return void 0===t&&(t=""),t?(new egret.HtmlTextParser).parser(t):(new egret.HtmlTextParser).parser(" ")},e.ALPHA=4080082432,e.RED=15937822,e.GREEN=3532333,e.BLUE=255,e.PURPLE_COLOR=15737312,e.GREEN_COLOR=2682369,e.BLUE_COLOR=3175378,e.WHITE_COLOR=15064527,e.ORANGE=7242310,e.NAME_WHITE=15856626,e.NAME_GREY=10066329,e.NAME_YELLOW=15066368,e.NAME_RED=15007744,e.NAME_ORANGE=15107398,e.NAME_BLUE=3642619,e.NAME_GREEN=37127,e.NAME_pinkGreen=65435,e.CHAT_RED_COLOR=15937822,e.CHAT_GREEN_COLOR=2682369,e.CHAT_BLUE_COLOR=16777215,e.CHAT_YELLOW_COLOR=15655172,e.CHAT_BROWN_COLOR=16777215,e.CHAT_DARKBLUE_COLOR=139,e.CHAT_BLACK_COLOR=16777215,e.CHAT_LIGHTSKYBLUE_COLOR=8900331,e.ROLE_TAB_SELECTED_COLOR=12566463,e.ROLE_TAB_COLOR=14858894,e.SET_UP_ITEM_YELLOW=16769029,e.SET_UP_ITEM_PURPLE=15140351,e.COLOR_STR=[t.LanguageUtils.language_Color_White,t.LanguageUtils.language_Color_Green,t.LanguageUtils.language_Color_Purple,t.LanguageUtils.language_Color_Orange,t.LanguageUtils.language_Color_Red,t.LanguageUtils.language_Color_Golden],e.ROLENAME_COLOR_YELLOW=16764427,e.ROLENAME_COLOR_GREEN=3532333,e.ROLENAME_COLOR_NORMAL=3532333,e.GOODS_COLOR=[15064527,2682369,26367,16718530,16742144,15007744],e.JUEWEI_COLOR=["#e2dfd4","#35e62d","#81adff","#e27dff","#ff9649","#fc5959","#ffd93f","#ffff00"],e}();t.ColorUtil=e,__reflect(e.prototype,"app.ColorUtil")}(app||(app={}));var app;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.addLableStrokeColor=function(t,e,i){t.strokeColor=e,t.stroke=i},i.getObjectLength=function(t){var e=0;for(var i in t)e++;return e},i.getObjectByAttr=function(t,e,i){for(var n in t)if(t[n][e]==i)return t[n];return null},i.getObjectByUnionAttr=function(t,e,i){for(var n in t)if(n==e.toString())for(var s in t[n])if(s==i.toString())return t[n][s];return null},i.copyDataHandler=function(t){var e;if(t instanceof Array)e=[];else{if(!(t instanceof Object))return t;e={}}for(var i=Object.keys(t),n=0,s=i.length;s>n;n++){var a=i[n];e[a]=this.copyDataHandler(t[a])}return e},i.objectToArray=function(t){if(t instanceof Object){t=this.copyDataHandler(t);for(var e=[],i=Object.keys(t),n=0,s=i.length;s>n;n++){var a=i[n];t[a]&&e.push(t[a])}return e}return t},i.lock=function(){t.StageUtils.ins().getStage().touchEnabled=t.StageUtils.ins().getStage().touchChildren=!1},i.unlock=function(){t.StageUtils.ins().getStage().touchEnabled=t.StageUtils.ins().getStage().touchChildren=!0},i.zhuanhuan=function(t){var e=t.toString().replace(/\d+/,function(t){return t.replace(/(\d)(?=(\d{3})+$)/g,"$1,")});return e},i.labelIsOverLenght=function(t,e){t.text=this.overLengthChange(e)},i.overLength=function(e){var i=null;return 1e5>e?i=Math.floor(e)+"":e>1e8?(e/=1e8,e=Math.floor(10*e)/10,i=e+t.LanguageUtils.language_Chine_Yi):(e/=1e4,e=Math.floor(10*e)/10,i=e+t.LanguageUtils.language_Chine_Wan),i},i.overLengthChange=function(e){var i=null;return 1e4>e?i=Math.floor(e)+"":e>1e8?(e/=1e8,e=Math.floor(10*e)/10,i=e+t.LanguageUtils.language_Chine_Yi):(e/=1e4,e=Math.floor(10*e)/10,i=e+t.LanguageUtils.language_Chine_Wan),i},i.overThousand=function(e){var i=null;return 1e4>e?i=Math.floor(e)+"":(e/=1e4,e=Math.floor(10*e)/10,i=e+t.LanguageUtils.language_Chine_Wan),i},i}(t.BaseClass);t.CommonUtils=e,__reflect(e.prototype,"app.CommonUtils")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.getCoinIcon=function(t){return t>=1e3?13010:t>=300?13009:t>=100?13008:t>=30?13007:13006},e.getYBIcon=function(t){return t>=12?565:564},e.getCurrencyNameIcon=function(e,i){void 0===i&&(i=0);var n=t.EntityMgr.ins().getPayer;if(!n)return"";if(e==QatEnum.qatEquipment){var s=t.GlobalConfig.StdItems[i];if(s)return[s.name,s.icon,s.desc,s.showQuality]}else{var a=t.GlobalConfig.NumericalIcon[e];if(a)return[a.name,a.icon,a.description]}},e.isRedDot=function(t,i){if(void 0===i&&(i=1),t)for(var n in t){var s=t[n],a=e.getCurrency(s.type,s.id);
if(a<s.count*i)return 0}return 1},e.getCurrency=function(e,i){void 0===i&&(i=0);var n=t.EntityMgr.ins().getPayer;if(!n)return 0;switch(e){case QatEnum.qatEquipment:return t.BagMgr.ins().getItemCountById(i);case QatEnum.qatMoney:return n.propSet.getNotBindCoin();case QatEnum.qatBindMoney:return n.propSet.getBindCoin();case QatEnum.qatYuanbao:return n.propSet.getNotBindYuanBao();case QatEnum.qatBindYb:return n.propSet.getBindYuanBao();case QatEnum.qatExp:return n.propSet.getEXP();case QatEnum.qatCircleSoul:return n.propSet.getZSSoul();case QatEnum.qatFlyShoes:return n.propSet.getFlyshoes();case QatEnum.qaIntegral:return n.propSet.getIntegral();case QatEnum.qaGuildDonate:return n.propSet.getGuildDevote();case QatEnum.qaPrestige:return n.propSet.getPopularity();case QatEnum.qaActivity:return n.propSet.getActivity();case QatEnum.qaMultipleExp:return n.propSet.getmultipleExp();case QatEnum.warNumber:return n.propSet.getWarCurrency();case QatEnum.qatDimensionalKey:return n.propSet.getDimensionKey();default:return 0}},e.getMoneyIcon=function(t){var e="";switch(t){case QatEnum.qatMoney:e="icon_jinbi";break;case QatEnum.qatBindMoney:e="icon_bangding";break;case QatEnum.qatBindYb:e="icon_yinliang";break;case QatEnum.qatYuanbao:e="icon_yuanbao";break;case QatEnum.warNumber:e="main_zlb"}return e},e.getItemByCost=function(t){var i=0;for(var n in t){var s=t[n],a=e.getCurrency(s.type,s.id);a<s.count&&(i=2==s.type?932:s.id)}return i},e}();t.CurrencyUtils=e,__reflect(e.prototype,"app.CurrencyUtils")}(app||(app={}));var app;!function(t){var e=function(t){function e(e,i,n,s){var a=t.call(this)||this;return a.format=[],a.from=0,a.to=0,a.isFormatNum=!1,a.format=e,a.from=i,a.to=n,a.isFormatNum=s,a}return __extends(e,t),e}(t.BaseClass);t.DateStyle=e,__reflect(e.prototype,"app.DateStyle");var i=function(){function i(){}return i.getFormatTimeByStyle=function(t,e){if(void 0===e&&(e=i.STYLE_1),0>t&&(t=0,debug.log("输入参数有误!时间为负数:"+t)),e.from>e.to)return debug.log("输入参数有误!to参数必须大于等于from参数,请检查style参数的值"),"";t>>=0;for(var n="",s=e.to;s>=e.from;s--){var a=t/this.mul[s],r="";s!=e.to&&(a%=this.mod[s]),r=e.isFormatNum&&10>a?"0"+(a>>0).toString():(a>>0).toString(),n+=r+e.format[s]}return n},i.getFormatTimeByStyle1=function(t,e){return void 0===e&&(e=i.STYLE_1),this.getFormatTimeByStyle(t/this.MS_PER_SECOND)},i.formatMiniDateTime=function(t){return i.MINI_DATE_TIME_BASE+(2147483647&t)*i.MS_PER_SECOND},i.formatServerTime=function(t){return(t-i.MINI_DATE_TIME_BASE)/i.MS_PER_SECOND},i.getFormatBySecond=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=2);var n="",s=1e3*t;switch(e){case this.TIME_FORMAT_1:n=this.format_1(s);break;case this.TIME_FORMAT_2:n=this.format_2(s);break;case this.TIME_FORMAT_3:n=this.format_3(s);break;case this.TIME_FORMAT_4:n=this.format_4(s);break;case this.TIME_FORMAT_5:n=this.format_5(s,i);break;case this.TIME_FORMAT_6:n=this.format_6(s);break;case this.TIME_FORMAT_7:n=this.format_7(s);break;case this.TIME_FORMAT_8:n=this.format_8(s);break;case this.TIME_FORMAT_9:n=this.format_9(s);break;case this.TIME_FORMAT_10:n=this.format_10(s);break;case this.TIME_FORMAT_11:n=this.format_11(s);break;case this.TIME_FORMAT_12:n=this.format_12(s);break;case this.TIME_FORMAT_13:n=this.format_13(s);break;case this.TIME_FORMAT_14:n=this.format_14(s);break;case this.TIME_FORMAT_15:n=this.format_15(s);break;case this.TIME_FORMAT_16:n=this.format_16(s);break;case this.TIME_FORMAT_17:n=this.format_17(s);break;case this.TIME_FORMAT_18:n=this.format_18_1(s);break;case this.TIME_FORMAT_19:n=this.format_19(s);break;case this.TIME_FORMAT_20:n=this.format_20(s);break;case this.TIME_FORMAT_21:n=this.format_21(s);break;case this.TIME_FORMAT_22:n=this.format_22(s)}return n},i.getSecondByDay=function(t){var e=1e3*t;return Math.floor(e/this.MS_PER_DAY)},i.getRenainSecond=function(t){var e=t?new Date(t):new Date,n=i.getTodayZeroSecond(e)+86400-e.getTime()/1e3;return n.toFixed(0)},i.getTodayPassedSecond=function(){var t=new Date,e=((Date.now()-new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime())/1e3).toFixed(0);return parseInt(e)},i.getTodayPassedSecond2=function(){var e=0,n=new Date(t.GlobalData.serverTime),s=n.getHours(),a=n.getMinutes(),r=n.getSeconds();return e=s*i.SECOND_PER_HOUR+a*i.SECOND_PER_MUNITE+r},i.getTodayZeroSecond=function(t){var e=t?t:new Date;return parseInt((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()/1e3).toFixed(0))},i.showWeekFirstDay=function(){var t=new Date,e=t.getDay();e=e?e:7;var i=new Date(t-864e5*(e-1));return i},i.showWeekLastDay=function(){var t=(new Date,i.showWeekFirstDay()),e=new Date(1e3*(t/1e3+518400));return e},i.calcWeekFirstDay=function(){var t=new Date,e=t.getDay();e=e>0?e:7;var i=7-e,n=t.getHours(),s=t.getMinutes(),a=t.getSeconds(),r=86400*i*1e3+864e5-(3600*n*1e3+60*s*1e3+1e3*a);return new Date(r)},i.format_1=function(t){var e=0,n="##:##:##";return e=Math.floor(t/i.MS_PER_HOUR),n=n.replace("##",i.formatTimeNum(e)),e&&(t-=e*i.MS_PER_HOUR),e=Math.floor(t/i.MS_PER_MINUTE),n=n.replace("##",i.formatTimeNum(e)),e&&(t-=e*i.MS_PER_MINUTE),e=Math.floor(t/1e3),n=n.replace("##",i.formatTimeNum(e))},i.format_2=function(t){var e=new Date(t),n=e.getFullYear(),s=e.getMonth()+1,a=e.getDate(),r=e.getHours(),o=e.getMinutes();e.getSeconds();return n+"-"+i.formatTimeNum(s)+"-"+i.formatTimeNum(a)+" "+i.formatTimeNum(r)+":"+i.formatTimeNum(o)},i.format_3=function(t){var e=this.format_1(t),i=e.split(":");return i[1]+":"+i[2]},i.format_4=function(t){return t<this.MS_PER_HOUR?Math.floor(t/this.MS_PER_MINUTE)+"分钟前":t<this.MS_PER_DAY?Math.floor(t/this.MS_PER_HOUR)+"小时前":Math.floor(t/this.MS_PER_DAY)+"天前"},i.format_5=function(e,i){void 0===i&&(i=2);var n="",s=[t.LanguageUtils.language_Time_Days,t.LanguageUtils.language_Time_Hours,t.LanguageUtils.language_Time_Min,t.LanguageUtils.language_Time_Sec],a=[],r=Math.floor(e/this.MS_PER_DAY);a.push(r),e-=r*this.MS_PER_DAY;var o=Math.floor(e/this.MS_PER_HOUR);a.push(o),e-=o*this.MS_PER_HOUR;var l=Math.floor(e/this.MS_PER_MINUTE);a.push(l),e-=l*this.MS_PER_MINUTE;var h=Math.floor(e/1e3);a.push(h);for(var p in a)if(a[p]>0&&(n+=this.formatTimeNum(a[p],Number(p))+s[p],i--,0>=i))break;return n},i.format_6=function(t){var e=new Date(t),i=e.getHours(),n=e.getMinutes(),s=e.getSeconds();return this.formatTimeNum(i)+":"+this.formatTimeNum(n)+":"+this.formatTimeNum(s)},i.format_7=function(e){return e<this.MS_PER_DAY?Math.floor(e/this.MS_PER_HOUR)+"小时":Math.floor(e/this.MS_PER_DAY)+t.LanguageUtils.language_Time_Days},i.format_8=function(t){var e=new Date(t),n=e.getFullYear(),s=e.getMonth()+1,a=e.getDate(),r=e.getHours(),o=e.getMinutes();return n+"-"+s+"-"+a+" "+r+":"+i.formatTimeNum(o)},i.format_9=function(e){var i=Math.floor(e/this.MS_PER_HOUR);e-=i*this.MS_PER_HOUR;var n=Math.floor(e/this.MS_PER_MINUTE);e-=n*this.MS_PER_MINUTE;var s=Math.floor(e/1e3);return i+"小时"+n+"分钟"+s+t.LanguageUtils.language_Time_Sec},i.format_10=function(e){var i=Math.floor(e/this.MS_PER_MINUTE);e-=i*this.MS_PER_MINUTE;var n=Math.floor(e/1e3);return i+t.LanguageUtils.language_Time_Min+n+t.LanguageUtils.language_Time_Sec},i.format_11=function(e){var i=Math.floor(e/this.MS_PER_HOUR);e-=i*this.MS_PER_HOUR;var n=Math.floor(e/this.MS_PER_MINUTE);e-=n*this.MS_PER_MINUTE;var s=Math.floor(e/1e3);return i+t.LanguageUtils.language_Time_Hours+n+t.LanguageUtils.language_Time_Min+s+t.LanguageUtils.language_Time_Sec},i.format_12=function(t){var e=Math.floor(t/this.MS_PER_HOUR);t-=e*this.MS_PER_HOUR;var n=Math.floor(t/this.MS_PER_MINUTE);t-=n*this.MS_PER_MINUTE;var s=Math.floor(t/1e3);return i.formatTimeNum(e)+":"+i.formatTimeNum(n)+":"+i.formatTimeNum(s)},i.format_13=function(e){var n=new Date(e),s=(n.getFullYear(),n.getMonth()+1),a=n.getDay(),r=n.getDate(),o=n.getHours(),l=n.getMinutes();return s+t.LanguageUtils.language_Time_Months+r+"日(周"+this.WEEK_CN[a]+") "+i.formatTimeNum(o)+":"+i.formatTimeNum(l)},i.format_14=function(e){var i=new Date(e),n=i.getHours(),s=i.getMinutes();return n+t.LanguageUtils.language_Time_Hours+s+t.LanguageUtils.language_Time_Min},i.format_15=function(t){var e=new Date(t),n=e.getMonth()+1,s=e.getDate(),a=e.getHours(),r=e.getMinutes();return i.formatTimeNum(n)+"-"+i.formatTimeNum(s)+" "+i.formatTimeNum(a)+":"+i.formatTimeNum(r)},i.format_16=function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,s=e.getDate();return i+"-"+n+"-"+s},i.format_17=function(e){var n=t.GlobalData.serverTime,s=e-n;if(s>0){if(s>=this.MS_PER_DAY)return Math.floor(s/this.MS_PER_DAY)+t.LanguageUtils.language_Time_Days;var a=new Date(e),r=a.getHours(),o=a.getMinutes();return i.formatTimeNum(r)+":"+i.formatTimeNum(o)}return""},i.format_18=function(t){var e=new Date(t),i=e.getMonth()+1;return i+"月"},i.format_18_1=function(e){var i=Math.floor(e/this.MS_PER_DAY);e-=i*this.MS_PER_DAY;var n=Math.floor(e/this.MS_PER_HOUR);e-=n*this.MS_PER_HOUR;var s=Math.floor(e/this.MS_PER_MINUTE);return e-=s*this.MS_PER_MINUTE,i>0?i+t.LanguageUtils.language_Time_Days+n+t.LanguageUtils.language_Time_Hours+s+t.LanguageUtils.language_Time_Min:n+t.LanguageUtils.language_Time_Hours+s+t.LanguageUtils.language_Time_Min},i.format_19=function(t){var e=Math.floor(t/this.MS_PER_MINUTE);return t-=e*this.MS_PER_MINUTE,e+""},i.format_20=function(t){var e=Math.floor(t/this.MS_PER_HOUR);return e+"小时"},i.format_21=function(e){var i=new Date(e),n=(i.getFullYear(),i.getMonth()+1),s=i.getDate();return n+t.LanguageUtils.language_Time_Months+s+t.LanguageUtils.language_Time_Sun},i.format_22=function(t){var e=this.format_1(t),i=e.split(":");return i[0]+":"+i[1]},i.formatTimeNum=function(t,e){return t>=10?t.toString():0==e?t.toString():"0"+t},i.checkTime=function(t,e){var i=(new Date).getTime(),n=t>i+e*this.MS_PER_DAY;return n},i.formatFullTime=function(e,i){void 0===i&&(i=0);var n,s,a=new Date(e),r=a.getFullYear(),o=a.getMonth()+1,l=a.getDate(),h=a.getDay(),p=a.getHours();s=10>p?"0"+p:p.toString();var u,c=a.getMinutes();u=10>c?"0"+c:c.toString();var g,d=a.getSeconds();g=10>d?"0"+d:d.toString();var m;switch(h){case 1:m=t.LanguageUtils.language_Chine_Number_1;break;case 2:m=t.LanguageUtils.language_Chine_Number_2;break;case 3:m=t.LanguageUtils.language_Chine_Number_3;break;case 4:m=t.LanguageUtils.language_Chine_Number_4;break;case 5:m=t.LanguageUtils.language_Chine_Number_5;break;case 6:m=t.LanguageUtils.language_Chine_Number_6;break;case 0:m=t.LanguageUtils.language_Time_Sun}return n=0!=i?r+t.LanguageUtils.language_Time_Years+o+t.LanguageUtils.language_Time_Months+l+t.LanguageUtils.language_Time_Sun+s+":"+u+":"+g:r+t.LanguageUtils.language_Time_Years+o+t.LanguageUtils.language_Time_Months+l+"日（周"+m+"） "+s+":"+u},i.formatStrTimeToMs=function(t){var e=new Date,i=t.split(".");e.setFullYear(i[0]),e.setMonth(+i[1]-1);var n=i[2].split("-");e.setDate(n[0]);var s=n[1].split(":");return e.setHours(s[0]),e.setMinutes(s[1]),e.setSeconds(0),e.getTime()},i.getShaBaKeCD=function(t){var e=Math.floor(t/this.MS_PER_HOUR);t-=e*this.MS_PER_HOUR;var n=Math.floor(t/this.MS_PER_MINUTE);return t-=n*this.MS_PER_MINUTE,i.formatTimeNum(e)+"小时"+i.formatTimeNum(n)+"分钟"},i.getMainShaBaKeCD=function(t){var e=Math.floor(t/this.MS_PER_HOUR);t-=e*this.MS_PER_HOUR;var n=Math.floor(t/this.MS_PER_MINUTE);t-=n*this.MS_PER_MINUTE;var s=Math.floor(t/1e3);return i.formatTimeNum(e)+":"+i.formatTimeNum(n)+":"+i.formatTimeNum(s)},i.TIME_FORMAT_1=1,i.TIME_FORMAT_2=2,i.TIME_FORMAT_3=3,i.TIME_FORMAT_4=4,i.TIME_FORMAT_5=5,i.TIME_FORMAT_6=6,i.TIME_FORMAT_7=7,i.TIME_FORMAT_8=8,i.TIME_FORMAT_9=9,i.TIME_FORMAT_10=10,i.TIME_FORMAT_11=11,i.TIME_FORMAT_12=12,i.TIME_FORMAT_13=13,i.TIME_FORMAT_14=14,i.TIME_FORMAT_15=15,i.TIME_FORMAT_16=16,i.TIME_FORMAT_17=17,i.TIME_FORMAT_18=18,i.TIME_FORMAT_19=19,i.TIME_FORMAT_20=20,i.TIME_FORMAT_21=21,i.TIME_FORMAT_22=22,i.MS_PER_SECOND=1e3,i.MS_PER_MINUTE=6e4,i.MS_PER_HOUR=36e5,i.MS_PER_DAY=864e5,i.SECOND_PER_HOUR=3600,i.SECOND_PER_DAY=86400,i.SECOND_PER_MONTH=2592e3,i.SECOND_PER_YEAR=31104e3,i.DAYS_PER_WEEK=7,i.YEAR_PER_YEAR=1,i.MONTH_PER_YEAR=12,i.DAYS_PER_MONTH=30,i.HOURS_PER_DAY=24,i.MUNITE_PER_HOUR=60,i.SECOND_PER_MUNITE=60,i.SECOND_PER_SECOND=1,i.SECOND_2010=1262275200,i.mod=[i.SECOND_PER_MUNITE,i.MUNITE_PER_HOUR,i.HOURS_PER_DAY,i.DAYS_PER_MONTH,i.MONTH_PER_YEAR,i.YEAR_PER_YEAR],i.mul=[i.SECOND_PER_SECOND,i.SECOND_PER_MUNITE,i.SECOND_PER_HOUR,i.SECOND_PER_DAY,i.SECOND_PER_MONTH,i.SECOND_PER_YEAR],i.MINI_DATE_TIME_BASE=Date.UTC(2010,0)+(new Date).getTimezoneOffset()*i.MS_PER_MINUTE,i.TIME_ZONE_OFFSET=8*i.MS_PER_HOUR,i.TO_SECOND=0,i.TO_MINUTE=1,i.TO_HOUR=2,i.TO_DAY=3,i.TO_MONTH=4,i.TO_YEAR=5,i.FORMAT_1=[t.LanguageUtils.language_Time_Sec,t.LanguageUtils.language_Time_Min,t.LanguageUtils.language_Time_Hours,t.LanguageUtils.language_Time_Days,t.LanguageUtils.language_Time_Months,t.LanguageUtils.language_Time_Years],i.FORMAT_2=[":",":",":",":",":",":"],i.WEEK_CN=[t.LanguageUtils.language_Time_Sun,t.LanguageUtils.language_Chine_Number_1,t.LanguageUtils.language_Chine_Number_2,t.LanguageUtils.language_Chine_Number_3,t.LanguageUtils.language_Chine_Number_4,t.LanguageUtils.language_Chine_Number_5,t.LanguageUtils.language_Chine_Number_6],i.STYLE_1=new e(i.FORMAT_1,i.TO_SECOND,i.TO_HOUR,!1),i.STYLE_2=new e(i.FORMAT_1,i.TO_SECOND,i.TO_DAY,!1),i.STYLE_3=new e(i.FORMAT_2,i.TO_SECOND,i.TO_HOUR,!0),i.STYLE_4=new e(i.FORMAT_1,i.TO_SECOND,i.TO_MINUTE,!0),i}();t.DateUtils=i,__reflect(i.prototype,"app.DateUtils")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.isOpen=function(t){this._isOpen=t},Object.defineProperty(e,"isDebug",{get:function(){return window.isDebug?window.isDebug:!1},enumerable:!0,configurable:!0}),e.log=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];e.isDebug&&egret.log(t,i)},e.warn=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];e.isDebug&&egret.warn(t,i)},e.error=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];egret.error(t,e)},e.start=function(t){this._isOpen&&(this._startTimes[t]=egret.getTimer())},e.stop=function(e){if(!this._isOpen)return 0;if(!this._startTimes[e])return 0;var i=egret.getTimer()-this._startTimes[e];return i>this._threshold&&t.Log.trace(e+": "+i),i},e.setThreshold=function(t){this._threshold=t},e._startTimes={},e._threshold=3,e}();t.DebugUtils=e,__reflect(e.prototype,"app.DebugUtils")}(app||(app={}));var debug={log:app.DebugUtils.log,warn:app.DebugUtils.warn,error:app.DebugUtils.error},app;!function(t){var e=function(){function e(){}return e.get8DirBy2Point=function(e,i){var n=t.MathUtils.getAngle(t.MathUtils.getRadian2(e.x,e.y,i.x,i.y));return this.angle2dir(n)},e.get4DirBy2Point=function(t,e){return t.x<e.x?t.y<e.y?3:1:t.y<e.y?5:7},e.dir2angle=function(t){return t*=45,t-=90},e.angle2dir=function(t){return-90>t&&(t+=360),Math.round((t+90)/45)%8},e.dirOpposit=function(t){return 4>t?t+4:t-4},e.get5DirBy8Dir=function(t){return t-this.isScaleX(t)},e.isScaleX=function(t){var e=2*(t-4);return 0>e&&(e=0),e},e.getGridByDir=function(e,i,n){void 0===i&&(i=1),void 0===n&&(n={x:0,y:0});var s=this.dir2angle(this.dirOpposit(e));return t.MathUtils.getDirMove(s,i*t.GameMap.CELL_SIZE,n.x,n.y)},e.getGridByPost=function(e,i,n){return void 0===i&&(i=1),void 0===n&&(n={x:0,y:0}),t.MathUtils.getDirMove(e,i*t.GameMap.CELL_SIZE,n.x,n.y)},e}();t.DirUtil=e,__reflect(e.prototype,"app.DirUtil")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.setShakeOn=function(t){this.openShake=t},t.createBitmap=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.createEuiImage=function(t){var e=new eui.Image,i=RES.getRes(t);return e.source=i,e},t.removeFromParent=function(t){t&&null!=t.parent&&t.parent.removeChild(t)},t.shakeIt=function(e,i,n,s,a){if(void 0===s&&(s=1),void 0===a&&(a=function(){return!0}),this.openShake&&e&&!(1>s)&&a()){var r=[{anchorOffsetX:0,anchorOffsetY:-i},{anchorOffsetX:0,anchorOffsetY:+i},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(e);var o=n/r.length;egret.Tween.get(e).to(r[0],o).to(r[1],o).to(r[2],o).call(function(){t.shakeIt(e,i,n,--s)},this)}},t.shakeItHeji=function(e,i,n,s,a){if(void 0===s&&(s=1),void 0===a&&(a=function(){return!0}),this.openShake&&e&&!(1>s)&&a()){var r=[{anchorOffsetX:.1*+i,anchorOffsetY:+i},{anchorOffsetX:.1*-i,anchorOffsetY:-i},{anchorOffsetX:.1*+i,anchorOffsetY:+i},{anchorOffsetX:.1*-i,anchorOffsetY:-i},{anchorOffsetX:.1*(+i>>1),anchorOffsetY:+i>>1},{anchorOffsetX:.1*(-i>>1),anchorOffsetY:-i>>1},{anchorOffsetX:.1*(+i>>2),anchorOffsetY:+i>>2},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(e);var o=n/r.length;egret.Tween.get(e).to(r[0],o).to(r[1],o).to(r[2],o).to(r[3],o).to(r[4],o).to(r[5],o).to(r[6],o).to(r[7],o).call(function(){t.shakeIt(e,i,n,--s)},this)}},t.shakeItEntity=function(t,e,i,n,s){var a=this;if(void 0===n&&(n=1),void 0===s&&(s=function(){return!0}),this.openShake&&t&&!(1>n)&&s()){var r=[{anchorOffsetX:0,anchorOffsetY:-e},{anchorOffsetX:-e,anchorOffsetY:0},{anchorOffsetX:e,anchorOffsetY:0},{anchorOffsetX:0,anchorOffsetY:e},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(t);var o=i/5;egret.Tween.get(t).to(r[0],o).to(r[1],o).to(r[2],o).to(r[3],o).to(r[4],o).call(function(){a.shakeIt(t,e,i,--n)},this)}},t.drawCir=function(t,e,i,n){function s(){t.graphics.clear(),t.graphics.beginFill(65535,1),t.graphics.moveTo(0,0),t.graphics.lineTo(e,0),t.graphics.drawArc(0,0,e,0,i*Math.PI/180,n),t.graphics.lineTo(0,0),t.graphics.endFill()}return null==t&&(t=new egret.Shape),s(),t},t.drawrect=function(t,e,i,n){function s(){t.graphics.clear(),t.graphics.beginFill(65535,1),t.graphics.drawRect(0,0,e,i),t.graphics.endFill()}return null==t&&(t=new egret.Shape),s(),t},t.getEffectPath=function(t){return ResDirEnum.RES_DIR_EFF+t},t.scrollerToBottom=function(t){t.viewport.validateNow(),t.viewport.contentHeight>t.height&&(t.viewport.scrollV=t.viewport.contentHeight-t.height)},t.SetParent=function(e,i){if(e&&i){var n=t.POINT,s=e.parent;s?(s.localToGlobal(e.x,e.y,n),s.removeChild(e)):(n.x=e.x,n.y=e.y),i.globalToLocal(n.x,n.y,n),i.addChild(e),null!=e.bottom?(e.x=n.x,e.bottom=i.height-n.y-e.height):(e.x=n.x,e.y=n.y)}},t.openShake=!0,t.shakingList={},t.POINT=new egret.Point,t}();t.DisplayUtils=e,__reflect(e.prototype,"app.DisplayUtils")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._fromDic={},t.curImg=new eui.Image,t.curImg.addEventListener(egret.TouchEvent.TOUCH_END,t.stopMove,t),t}return __extends(i,e),i.prototype.register=function(t,i){void 0===i&&(i=null),e.prototype.register.call(this,t,i),this._fromDic[t.name]=i},i.prototype.startMove=function(e){t.DragDropUtils.isMoving=!0,t.EventManager.ins().sendEvent(t.CompEvent.DRAG_START);var i=e.currentTarget;i.visible=!0;var n=i.parent.localToGlobal(i.x,i.y);i.parent!=t.LayerManager.UI_Drag&&(this.curImg&&(this.curImg.source=i.source,this.curImg.name=i.name),t.LayerManager.UI_Drag.addChild(this.curImg)),this.curImg.x=n.x,this.curImg.y=n.y,this._offsetX=e.stageX-this.curImg.x,this._offsetY=e.stageY-this.curImg.y,this._currentTarget=this.curImg,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this)},i.prototype.stopMove=function(i){e.prototype.stopMove.call(this,i);for(var n in this._fromDic){var s=this._fromDic[n];if(s.name==this._currentTarget.name){t.EventManager.ins().sendEvent(t.CompEvent.DRAG_END,[{target:this._currentTarget,from:s,point:{x:i.stageX,y:i.stageY}}]);break}}},i.prototype.removeDic=function(t){e.prototype.removeDic.call(this,t);var i=this._fromDic[t];null!=i&&(this._fromDic[t]=null,delete this._fromDic[t])},i}(t.DragDropUtils);t.DragDropItemUtils=e,__reflect(e.prototype,"app.DragDropItemUtils");var i;!function(t){t[t.Equip=0]="Equip",t[t.Skill=1]="Skill",t[t.Bag=2]="Bag"}(i=t.DragType||(t.DragType={}))}(app||(app={}));var dragDropItemUtils=new app.DragDropItemUtils,app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.effArr=[],i.curDay=0,i.skinName="ActivityFirstChargeViewSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.awardArr=new eui.ArrayCollection,this.itemList.itemRenderer=t.ItemBase,this.itemList.dataProvider=this.awardArr},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.GlobalConfig.Activity10003Config[t.ActvityInfoEnum.firstCharge][1][1];n&&n.Description&&(this.imgDesc.source=n.Description),this.mouseMc||(this.mouseMc=t.ObjectPool.pop("app.MovieClip"),this.mouseMc.scaleX=this.mouseMc.scaleY=1,this.mouseMc.touchEnabled=!1,this.effGrp.addChild(this.mouseMc)),this.effArr=[];for(var s,a=0;2>a;a++)s=t.ObjectPool.pop("app.MovieClip"),s.scaleX=s.scaleY=1,s.x=66*a,s.y=0,s.touchEnabled=!1,s.blendMode=egret.BlendMode.ADD,s.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zbk",-1),this.effArr.push(s),this.itemEffGrp.addChild(s);this.addTouchEvent(this.btnCharge,this.onClick),this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.btnGetGfit,this.onClick),this.addChangeEvent(this.btnDay1,this.onClick),this.addChangeEvent(this.btnDay2,this.onClick),this.addChangeEvent(this.btnDay3,this.onClick),this.observe(t.ActvityMgr.ins().post_25_3,this.updateInfo);var r=t.ActvityMgr.ins().getActivityInfo(t.ActvityInfoEnum.firstCharge),o=1;if(r)if(r.info.sum){for(var a=1;4>a;a++)if(t.MathUtils.getValueAtBit(r.redDot,a)>0){o=a;break}if(0==o)for(var l=1;4>l;l++)t.MathUtils.getValueAtBit(r.info.state,l)>0&&(o=l)}else o=1;this.showCurData(o),this.curDay=o,this["btnDay"+o].selected=!0},i.prototype.showCurData=function(e){this.receiveGroup.visible=!1,this.label.visible=!1;var i=t.EntityMgr.ins().getPayer,n=i.propSet.getAP_JOB(),s=t.GlobalConfig.Activity10003Config[t.ActvityInfoEnum.firstCharge][n];s=s[e];var a=[],r=s&&s.GiftTable;for(var o in r)a.push(r[o]);this.awardArr.replaceAll(a),s&&s.weaponeff?(this.mouseMc.playFileEff(ResDirEnum.RES_DIR_EFF+s.weaponeff,-1),this.effGrp.visible=!0):(this.mouseMc.stop(),this.effGrp.visible=!1),this.chargeCount=s&&s.Count;var l=t.ActvityMgr.ins().getActivityInfo(t.ActvityInfoEnum.firstCharge);if(l){for(var h=1;4>h;h++){var p=t.MathUtils.getValueAtBit(l.redDot,h);this["redPoint"+h].visible=p>0}l.info.sum>=s.Count?(this.label.visible=!0,this.receiveGroup.visible=t.MathUtils.getValueAtBit(l.info.state,e)>0,this.receiveGroup.visible?(this.btnGetGfit.visible=!1,this.btnCharge.visible=!1):(this.btnGetGfit.visible=!0,this.btnCharge.visible=!1)):(this.btnGetGfit.visible=!1,this.btnCharge.visible=!0)}},i.prototype.updateInfo=function(){this.showCurData(this.curDay)},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnCharge:t.RechargeMgr.ins().onPay("");break;case this.btnGetGfit:t.ActvityMgr.ins().send_25_1(t.ActvityInfoEnum.firstCharge,t.Operate.cBuy,[this.curDay]);break;case this.btnClose:t.ViewManager.ins().close(this);break;case this.btnDay1:this.btnDay1.selected=!0,this.btnDay2.selected=!1,this.btnDay3.selected=!1,this.showCurData(1),this.curDay=1;break;case this.btnDay2:this.btnDay2.selected=!0,this.btnDay1.selected=!1,this.btnDay3.selected=!1,this.showCurData(2),this.curDay=2;break;case this.btnDay3:this.btnDay3.selected=!0,this.btnDay1.selected=!1,this.btnDay2.selected=!1,this.showCurData(3),this.curDay=3}},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$onClose(),this.removeTouchEvent(this.btnCharge,this.onClick),this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.btnGetGfit,this.onClick),this.removeChangeEvent(this.btnDay1,this.onClick),this.removeChangeEvent(this.btnDay2,this.onClick),this.removeChangeEvent(this.btnDay3,this.onClick),this.mouseMc&&(this.mouseMc.destroy(),this.mouseMc=null);for(var i=0;i<this.effArr.length;i++){var n=this.effArr[i];n.destroy()}this.effArr=null,this.itemEffGrp.removeChildren()},i}(t.BaseEuiView);t.ActvityFirstChargeView=e,__reflect(e.prototype,"app.ActvityFirstChargeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.itemList.itemRenderer=t.ItemBase,this.scroller.horizontalScrollBar.autoVisibility=!1,this.scroller.horizontalScrollBar.visible=!1,this.addTouchEvent(this.btnSweep,this.onClick),this.addTouchEvent(this.btnChallenge,this.onClick)},i.prototype.dataChanged=function(){if(this.data){var e=this.data;if(e){var i=t.ActvityMgr.ins().getActivityInfo(e.Id);i&&i.info?(this.itemBg.source=e.bg?e.bg+"_png":"act_clfbbg_0_png",this.itemTxt.source=e.titleIcon?e.titleIcon:"",this.btnSweep.visible=this.btnChallenge.visible=i.info.times>=0,this.timeTxt.text=t.StringUtils.replace(t.LanguageUtils.language_Common_64,i.info.times),this.itemList.dataProvider=new eui.ArrayCollection(e.rewards)):(this.itemBg.source="act_clfbbg_0_png",this.itemTxt.source="",this.btnSweep.visible=this.btnChallenge.visible=!1,this.timeTxt.text="",this.itemList.dataProvider=new eui.ArrayCollection(null))}}this.setRedDot()},i.prototype.setRedDot=function(){this.redDot.visible=!1,this.redDot2.visible=!1;var e=this.data,i=t.ActvityMgr.ins().getActivityInfo(e.Id);e.buttoncolor&&i&&i.redDot&&(this.redDot.visible=!0,this.redDot2.visible=!0,this.redDot.setRedImg(e.buttoncolor),this.redDot2.setRedImg(e.buttoncolor))},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.btnSweep,this.onClick),this.removeTouchEvent(this.btnChallenge,this.onClick)},i.prototype.onClick=function(e){switch(e.target){case this.btnSweep:t.ActvityMgr.ins().send_25_1(this.data.Id,t.Operate.cMaterialMopUp);break;case this.btnChallenge:var i=t.EntityMgr.ins().getPayer;i&&i.propSet&&(i.propSet.getState()&t.ActorState.DEATH?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips102):t.GameMap.fubenID>0?t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips106):t.ActvityMgr.ins().send_25_1(this.data.Id,t.Operate.cEnterFuBen))}},i}(t.BaseItemRender);t.ActivityMaterialItemView=e,__reflect(e.prototype,"app.ActivityMaterialItemView")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.trace=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.DebugUtils.isDebug&&(e[0]="[DebugLog]"+e[0],debug.log.apply(console,e))},e}();t.Log=e,__reflect(e.prototype,"app.Log")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.getAngle2=function(t,e,i,n){var s=Math.abs(t-i),a=Math.abs(e-n),r=Math.sqrt(Math.pow(s,2)+Math.pow(a,2)),o=a/r,l=Math.acos(o),h=Math.floor(180/(Math.PI/l));return i>t&&n>e&&(h=180-h),i==t&&n>e&&(h=180),i>t&&n==e&&(h=90),t>i&&n>e&&(h=180+h),t>i&&n==e&&(h=270),t>i&&e>n&&(h=360-h),h},t.getAngle=function(t){return 180*t/Math.PI},t.getRadian=function(t){return t/180*Math.PI},t.getRadian2=function(t,e,i,n){var s=i-t,a=n-e;return Math.atan2(a,s)},t.getDistance=function(t,e,i,n){var s=i-t,a=n-e,r=s*s+a*a;return Math.sqrt(r)},t.getDistanceByObject=function(t,e){return this.getDistance(t.x,t.y,e.x,e.y)},t.getDistanceX2ByObject=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},t.getDirMove=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s=this.getRadian(t),a={x:0,y:0};return a.x=Math.cos(s)*e+i,a.y=Math.sin(s)*e+n,a},t.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var i=e-t;return t+Math.random()*i},t.limitInteger=function(t,e){return Math.round(this.limit(t,e))},t.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},t.toInteger=function(t){return t>>0},t.getValueSAtBit=function(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),e-=1;var s=e>>5,a=31&e;return 1&e&&e>1?n&&n(t[s]>>>a&1):i&&i(t[s]>>>a&1),t[s]>>>a&1},t.getValueAtBit=function(t,e){return t>>e-1&1},t.MakeLong64=function(t,e){return t+4294967296*e},t.GetPercent=function(t,e){return isNaN(t)||isNaN(e)?"0%":0>=e?"0%":Math.round(t/e*1e4)/100+"%"},t.getValueBitByArr=function(t,e){var i=e>>5,n=31&e;return Boolean(t[i]>>>n&1)},t}();t.MathUtils=e,__reflect(e.prototype,"app.MathUtils")}(app||(app={}));var app;!function(t){var e=function(){function t(t,e){void 0===e&&(e=20),this.dataSource=t,this.size=e,this.currentPage=0,this.setPageData()}return Object.defineProperty(t.prototype,"length",{get:function(){return this.dataSource.length},enumerable:!0,configurable:!0}),t.prototype.setPageData=function(){this.pageData=[];for(var t=this.currentPage*this.size,e=(this.currentPage+1)*this.size,i=Math.min(this.length,e),n=t;i>n;n++)this.pageData.push(this.dataSource[n])},t.prototype.getDataSource=function(){return this.dataSource},Object.defineProperty(t.prototype,"totalPage",{get:function(){return Math.ceil(this.length/this.size)},enumerable:!0,configurable:!0}),t.prototype.havePre=function(){return 0!=this.currentPage},t.prototype.haveNext=function(){return this.currentPage<this.totalPage-1},t.prototype.prev=function(){this.currentPage--,this.setPageData()},t.prototype.next=function(){this.currentPage++,this.setPageData()},t.prototype.first=function(){this.currentPage=0,this.setPageData()},t.prototype.last=function(){this.currentPage=this.totalPage-1,this.setPageData()},t.prototype.gotoPage=function(t){this.totalPage<t||(this.currentPage=t-1,this.setPageData())},t}();t.PageArray=e,__reflect(e.prototype,"app.PageArray")}(app||(app={}));var app;!function(t){var e=function(){function t(){}return t.LINE_BREAK=/\r+/g,t.BLANK_REG=/[\s\\]/g,t.ARGB_COLOR=/[a-fA-F0-9]{8}/,t.HTML=/<[^>]+>/g,t.DELETE_SPACE=/\s/g,t.REPLACE_STRING=/%s/g,t.NumericExp=/^\d+$/,t.NonNumericExp=/\D/,t.ActorNameExp=/^([\u4e00-\u9fa5]?\w?[^>|!@#$%&*\^\?]){1,48}$/,t}();t.RegExpUtil=e,__reflect(e.prototype,"app.RegExpUtil")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._groupIndex=0,t._configs=new Array,t._groups={},t._urlResorce={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onResourceLoadProgress,t),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onResourceLoadError,t),t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.addConfig=function(t,e){this._configs.push([t,e])},i.prototype.loadConfig=function(t,e){this._onConfigComplete=t,this._onConfigCompleteTarget=e,this.loadNextConfig()},i.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var t=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(t[0],t[1])},i.prototype.onConfigCompleteHandle=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},i.prototype.loadGroup=function(t,e,i,n){this._groups[t]=[e,i,n],RES.loadGroup(t)},i.prototype.loadGroups=function(t,e,i,n,s){RES.createGroup(t,e,!0),this.loadGroup(t,i,n,s)},i.prototype.pilfererLoadGroup=function(t,e){void 0===e&&(e=null);var i="pilferer_"+t;e||(e=[t]),RES.createGroup(i,e,!0),RES.loadGroup(i,-1)},i.prototype.onResourceLoadComplete=function(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][0],n=this._groups[e][2];null!=i&&i.call(n),this._groups[e]=null,delete this._groups[e]}},i.prototype.onResourceLoadProgress=function(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][1],n=this._groups[e][2];null!=i&&i.call(n,t.itemsLoaded,t.itemsTotal)}},i.prototype.onResourceLoadError=function(e){return t.Log.trace(e.groupName+"资源组有资源加载失败"),"preload"==e.groupName?(t.GameApp.ins().preload_load_count+=1,1==t.GameApp.ins().preload_load_count&&Assert(!1,t.StringUtils.replace(t.LanguageUtils.language_Error_9,e.groupName,t.GameApp.ins().preload_load_count)),void(t.GameApp.ins().preload_load_count<3?RES.loadGroup(e.groupName):t.CommonPopView.ins().showTextView(t.LanguageUtils.language_Alert_2))):void this.onResourceLoadComplete(e)},i.prototype.loadResource=function(t,e,i,n,s){void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=null);
var a=t.concat(e),r="loadGroup"+this._groupIndex++;RES.createGroup(r,a,!0),this._groups[r]=[i,n,s],RES.loadGroup(r)},i}(t.BaseClass);t.ResourceUtils=e,__reflect(e.prototype,"app.ResourceUtils")}(app||(app={}));var app;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.setSize(t),i}return __extends(i,e),i.prototype.setSize=function(t){this.radius=t,this.shape=new egret.Sprite;var e=this.shape.graphics;e.clear(),e.beginFill(0,.9),e.drawCircle(0,0,t),e.endFill(),this.addChild(this.shape),this.maskShape=new egret.Shape,this.maskShape.graphics.clear(),this.maskShape.graphics.beginFill(0,.7),this.maskShape.graphics.drawCircle(0,0,t),this.maskShape.graphics.endFill(),this.addChild(this.maskShape),this.shape.mask=this.maskShape,this.touchEnabled=!1,this.touchChildren=!1,this.visible=!1},i.prototype.play3=function(e,i,n){return e*=1e3,this.visible=!0,this.skillMC||(this.skillMC=new t.MovieClip,this.skillMC.touchEnabled=!1,this.skillMC.x=0,this.skillMC.y=0,this.skillMC.visible=!0,this.addChild(this.skillMC)),i+20>=e?(this.maskShape.graphics.clear(),this.shape.visible=!1,void this.playSkillKeyEff("jnjh1")):void(n&&(this.shape.visible=!0,this.maskShape.graphics.clear(),this.maskShape.graphics.beginFill(0,.7),this.maskShape.graphics.moveTo(0,0),this.maskShape.graphics.lineTo(this.radius,0),this.maskShape.graphics.drawArc(0,0,this.radius,i/e*2*Math.PI-Math.PI/2,2*Math.PI-Math.PI/2),this.maskShape.graphics.lineTo(0,0),this.maskShape.graphics.endFill()))},i.prototype.stop=function(){this.maskShape.graphics.clear(),this.shape.visible=!1},i.prototype.playSkillKeyEff=function(e){var i=this;this.skillMC.playFile(ResDirEnum.RES_DIR_EFF+e,1,function(){t.DisplayUtils.removeFromParent(i.skillMC),i.skillMC=null})},i}(eui.Group);t.ShortcutCD=e,__reflect(e.prototype,"app.ShortcutCD")}(app||(app={}));var app;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._Scale=1,e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.setUIStage=function(t){e._uiStage=t},e.prototype.getHeight=function(){return this.getStage().stageHeight},e.prototype.getWidth=function(){return this.getStage().stageWidth},e.prototype.setTouchChildren=function(t){this.getStage().touchChildren=t},e.prototype.setMaxTouches=function(t){this.getStage().maxTouches=t},e.prototype.setFrameRate=function(t){this.getStage().frameRate=t},e.prototype.setScaleMode=function(t){this.getStage().scaleMode=t},e.prototype.getStage=function(){return egret.MainContext.instance.stage},e.prototype.getUIStage=function(){return e._uiStage},e.prototype.getScale=function(){return this._Scale},e.prototype.setScale=function(t){this._Scale=t},e}(t.BaseClass);t.StageUtils=e,__reflect(e.prototype,"app.StageUtils")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.trimSpace=function(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.getStringLength=function(t){for(var e=t.split(""),i=0,n=0;n<e.length;n++){var s=e[n];i+=this.isChinese(s)?2:1}return i},e.isChinese=function(t){var e=/^[\u4E00-\u9FA5]+$/;return e.test(t)?!1:!0},e.strByteLen=function(t){for(var e=0,i=t.length,n=0;i>n;n++)e+=t.charCodeAt(n)>=127?2:1;return e},e.complementByChar=function(t,i,n,s){void 0===n&&(n=" "),void 0===s&&(s=!0);var a=this.strByteLen(s?t.replace(e.HTML,""):t);return t+this.repeatStr(n,i-a)},e.repeatStr=function(t,e){for(var i="",n=0;e>n;n++)i+=t;return i},e.addColor=function(t,e){var i;return"string"==typeof e?i=String(e):"number"==typeof e&&(i=Number(e).toString(10)),"|C:"+i+"&T:"+t+"|"},e.addColor1=function(t,e){var i=new Object;return i.style=new Object,i.text=t,i.textColor=Number(e).toString(16),i},e.substitute=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var s=t.RegExpUtil.REPLACE_STRING,a=e.match(s);if(a&&a.length)for(var r=a.length,o=0;r>o;o++)e=e.replace(a[o],i[o]);return e},e.replaceStr=function(t,e,i){if(-1==t.indexOf(e))return t;var n=t.split(e);return n[0]+i+n[1]},e.replaceStrColor=function(t,e){for(var i=t.indexOf("0x"),n=i,s="",a="";-1!=n;)s=t.substring(i,i+8),t=t.replace(s,e),i+=8,a=t.substring(i),n=a.indexOf("0x"),i+=n;return t},e.replace=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0;n<e.length;n++)t=t.replace("%s",e[n]+"");return t},e.getStrByRegExp=function(t,e){void 0===e&&(e=/\d+/g);var i=[];t.replace(e,function(){return i.push(arguments[0]),"number"==typeof arguments[0]?arguments[0].toString():arguments[0]});return i},e.ChineseToNumber=function(t){for(var i=0,n=0,s=0,a=!1,r=t.split(""),o=0;o<r.length;o++){var l=e.chnNumCharCN[r[o]];if("undefined"!=typeof l)s=l,o===r.length-1&&(n+=s);else{var h=e.chnNameValueCN[r[o]].value;a=e.chnNameValueCN[r[o]].secUnit,a?(n=(n+s)*h,i+=n,n=0):n+=s*h,s=0}}return i+n},e.NumberToChinese=function(i){var n=0,s="",a="",r=!1,o=t.LanguageUtils.chnNumChar,l=t.LanguageUtils.chnUnitSection;if(0===i)return o[0];for(;i>0;){var h=i%1e4;r&&(a=o[0]+a),s=e.SectionToChinese(h),s+=0!==h?l[n]:l[0],a=s+a,r=1e3>h&&h>0,i=Math.floor(i/1e4),n++}return a},e.SectionToChinese=function(e){for(var i="",n="",s=0,a=!0,r=t.LanguageUtils.chnNumChar,o=t.LanguageUtils.chnUnitChar;e>0;){var l=e%10;0===l?a||(a=!0,n=r[l]+n):(a=!1,i=r[l],i+=o[s],n=i+n),s++,e=Math.floor(e/10)}return n},e.HTML=/<[^>]+>/g,e.chnNumCharCN={"零":0,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9},e.chnNameValueCN={"十":{value:10,secUnit:!1},"百":{value:100,secUnit:!1},"千":{value:1e3,secUnit:!1},"万":{value:1e4,secUnit:!0},"亿":{value:1e8,secUnit:!0}},e}();t.StringUtils=e,__reflect(e.prototype,"app.StringUtils")}(app||(app={}));var app;!function(t){var e=function(){function e(){}return e.generateTextFlow=function(t){if(!t)return(new egret.HtmlTextParser).parser("");-1==t.indexOf("<u>")&&(t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"));for(var i,n=t.split("|"),s="",a=0,r=n.length;r>a;a++)s+=e.getSingleTextFlow1(n[a]);try{i=(new egret.HtmlTextParser).parser(s)}catch(o){return console.log("错误的HTML输入"),(new egret.HtmlTextParser).parser("")}return i},e.generateTextFlow1=function(t){if(!t)return(new egret.HtmlTextParser).parser("");for(var i=t.split("|"),n=[],s=0,a=i.length;a>s;s++){var r=e.getSingleTextFlow(i[s]);r.text&&""!=r.text&&n.push(r)}return n},e.getSingleTextFlow1=function(t){var i=t.split("&T:",2);if(2==i.length){for(var n="<font",s=i[0].split("&"),a=void 0,r=!1,o=0,l=s.length;l>o;o++)switch(a=s[o].split(":"),a[0]){case e.STYLE_SIZE:n+=' size="'+Math.floor(+a[1])+'"';break;case e.STYLE_COLOR:n+=' color="'+Math.floor(+a[1])+'"';break;case e.UNDERLINE_TEXT:r=!0}return n+=r?"><u>"+i[1]+"</u></font>":">"+i[1]+"</font>"}return"<font>"+t+"</font>"},e.getSingleTextFlow=function(t){var i=t.split("&T:",2),n={style:{}};if(2==i.length){for(var s=(i[0],t.split("&")),a=void 0,r=0,o=s.length;o>r;r++)switch(a=s[r].split(":"),a[0]){case e.STYLE_SIZE:n.style.size=+a[1];break;case e.STYLE_COLOR:n.style.textColor=+a[1];break;case e.UNDERLINE_TEXT:n.style.underline=!0;break;case e.EVENT:n.style.href="event:"+a[1]}n.text=i[1]}else n.text=t;return n},e.getCStr=function(e){var i=t.LanguageUtils["language_Chine_Number_"+e];return i?i:""},e.STYLE_COLOR="C",e.STYLE_SIZE="S",e.PROP_TEXT="T",e.UNDERLINE_TEXT="U",e.EVENT="E",e}();t.TextFlowMaker=e,__reflect(e.prototype,"app.TextFlowMaker")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.costMoney=0,i.curMoney=0,i.curstate=0,i.skinName="ViolentStateWinSkin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabList.itemRenderer=t.TradeLineTabView,this.strList.itemRenderer=t.ResonateItem2Render,this.dragDropUI.setParent(this),this.dragDropUI.setTitle(t.LanguageUtils.language_Omission_txt76)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.tabList.dataProvider=new eui.ArrayCollection([{name:t.LanguageUtils.language_Omission_txt74},{name:t.LanguageUtils.language_Omission_txt75}]),this.tabList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.tabList.selectedIndex=0,this.setMoneyCost(),this.addTouchEvent(this.openViolen,this.onClick),this.addTouchEvent(this.payBtn,this.onClick),this.addTouchEvent(this.openBtn,this.onClick),this.observe(t.DefaultMgr.ins().post_playerViolentChange,this.updateStateTips),this.observe(t.DefaultMgr.ins().postMoneyChange,this.setMoneyCost),this.updateCurState(),this.updateList(0)},i.prototype.setMoneyCost=function(){var e=t.GlobalConfig.RageconstConfig.RagePrice;if(e&&e[0]){var i=e[0],n=t.CurrencyUtils.getCurrencyNameIcon(i.type,i.id),s=t.CurrencyUtils.getCurrency(i.type,i.id);if(n){this.costMoney=i.count,this.curMoney=s;var a=s>=i.count?t.ColorUtil.GREEN_COLOR:t.ColorUtil.NAME_RED;this.expendMoney.textFlow=t.TextFlowMaker.generateTextFlow(""+t.LanguageUtils.language_Omission_txt4+n[0]+":|C:"+a+"&T:"+s+"|/"+i.count)}}},i.prototype.updateStateTips=function(){this.updateCurState(),1==this.curstate&&t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt73)},i.prototype.updateCurState=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet){this.curstate=e.propSet.getViolent();var i=1==this.curstate?"|C:0x28ee01&T:"+t.LanguageUtils.language_Omission_txt77+"|":"|C:0xe50000&T:"+t.LanguageUtils.language_Omission_txt78+"|";this.curState.textFlow=t.TextFlowMaker.generateTextFlow(""+t.LanguageUtils.language_Omission_txt79+i)}},i.prototype.onChange=function(t){this.tabList.selectedIndex=t.itemIndex,this.updateList(t.itemIndex)},i.prototype.updateList=function(e){var i=t.GlobalConfig.RageconstConfig;0==e?(this.moneyGrp.visible=!0,this.openBtn.visible=!1,this.payBtn.visible=!0,i&&(this.titleLab.textFlow=t.TextFlowMaker.generateTextFlow(i.title1),this.strList.dataProvider=new eui.ArrayCollection(i.text1))):1==e&&(this.moneyGrp.visible=!1,this.openBtn.visible=!0,this.payBtn.visible=!1,i&&(this.titleLab.textFlow=t.TextFlowMaker.generateTextFlow(i.title2),this.strList.dataProvider=new eui.ArrayCollection(i.text2)))},i.prototype.onClick=function(e){switch(e.currentTarget){case this.openViolen:case this.openBtn:0!=this.costMoney&&(0==this.curstate?this.curMoney>=this.costMoney?t.OtherMgr.ins().send_26_64():t.ViewManager.ins().open(t.TipsInsuffResourcesView,QatEnum.qatYuanbao):t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt72));break;case this.payBtn:t.ViewManager.ins().isShow(t.ActvityFirstChargeView)||t.ViewManager.ins().open(t.ActvityFirstChargeView)}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.tabList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.removeTouchEvent(this.openViolen,this.onClick),this.removeTouchEvent(this.payBtn,this.onClick),this.removeTouchEvent(this.openBtn,this.onClick)},i}(t.BaseEuiView);t.ViolentStateWin=e,__reflect(e.prototype,"app.ViolentStateWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._vipLvMax=-1,t}return __extends(i,e),i.ins=function(){return e.ins.call(this)},i.prototype.getVipConfig=function(){if(this.vipConfig)return this.vipConfig;this.vipConfig={};var e=t.GlobalConfig.MonthCardConfig;for(var i in e)e[i]&&e[i].superRightLV&&e[i].superRightLV>-1&&(this.vipConfig[e[i].superRightLV]=e[i]);return this.vipConfig},i.prototype.getVipDataByLv=function(t){var e=this.getVipConfig();return e[t]},i.prototype.getMyVipLv=function(){var e=t.EntityMgr.ins().getPayer;if(e&&e.propSet){var i=e.propSet.getVipState();if(i)return this.getVipLv(i)}return 0},i.prototype.getVipLv=function(e){for(var i=0,n=this.getMaxLv(),s=0;n>s;s++){var a=t.MathUtils.getValueAtBit(e,s+4);a&&(i=s+1)}return i},i.prototype.getMaxLv=function(){if(this._vipLvMax<0){var t=i.ins().getVipConfig();this._vipLvMax=0;for(var e in t)this._vipLvMax++}return this._vipLvMax},i}(t.BaseSystem);t.VipData=e,__reflect(e.prototype,"app.VipData")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._itemID=0,i._shopCfg=null,i.pos=null,i.size=null,i.curNum=0,i.needCount=0,i._buyNum=0,i._hashCode=0,i.skinName="VipGaimItemWinSKin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e&&(e[0]&&(this._itemID=e[0].itemid,this.curNum=t.BagMgr.ins().getItemCountById(this._itemID),e[0].needCount>0&&(this.needCount=e[0].needCount),this.isMax=e[0].isMax,this.isMax||(this._buyNum=this.needCount-this.curNum),this._buyNum<0&&(this._buyNum=0)),e[1]&&(this.pos=e[1]),e[2]&&(this.size=e[2]),e[3]&&(this._hashCode=e[3])),this.consumeImg.source=this.consumeImg2.source=t.GlobalConfig.StdItems[this._itemID].icon+"",this.consumeLab.text=t.LanguageUtils.language_Common_255+"：",this.consumeLab2.text=this.curNum+"",this.consumeLab3.text=t.LanguageUtils.language_Common_256+"：",this.consumeLab4.text=this._buyNum+"",this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.buyBtn,this.onClick),this.addMouseMoveEvent(this.itemIcon,this.mouseMove),this.addMouseOverEvent(this.itemIcon,this.mouseMove),this.addMouseMoveEvent(this.consumeImg,this.mouseMove),this.addMouseOverEvent(this.consumeImg,this.mouseMove),this.addMouseMoveEvent(this.consumeImg2,this.mouseMove),this.addMouseOverEvent(this.consumeImg2,this.mouseMove),this.observe(t.DefaultMgr.ins().post_gaimItemView,this.closeView),this.setData()},i.prototype.closeView=function(e){e==this._hashCode&&t.ViewManager.ins().close(this)},i.prototype.initViewPos=function(){e.prototype.initViewPos.call(this),this.pos&&this.size&&this.setPos()},i.prototype.setPos=function(){var t=this.formatView(0,.5*this.size.width);isNaN(t)||(this.x=this.pos.x+Math.round((this.size.width-this.width)/2+t));var e=this.formatView(0,.5*this.size.height);isNaN(e)||(this.y=this.pos.y+Math.round((this.size.height-this.height)/2+e))},i.prototype.formatView=function(t,e){if(!t||"number"==typeof t)return t;var i=t,n=i.indexOf("%");if(-1==n)return+i;var s=+i.substring(0,n);return.01*s*e},i.prototype.setData=function(){if(0!=this._itemID){var e=t.GlobalConfig.StdItems[this._itemID];e&&(this.itemBg.source="quality_"+e.showQuality,this.itemIcon.source=e.icon+"",this.itemName.text=e.name+"",this.itemNu.source=e.iseffect?"yan_"+e.iseffect:"",this.itemNu.visible=e.iseffect?!0:!1);var i=t.GlobalConfig.GetItemRouteConfig[this._itemID];if(i&&(this.itemDesc.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(i.itemdesc,this.needCount)),i.shopid&&i.shopid.shoptype&&i.shopid.Tabshop&&i.shopid.shopid)){var n=i.shopid.shoptype,s=i.shopid.Tabshop,a=i.shopid.shopid;if(this._shopCfg=t.GlobalConfig.ShopConfig[n][s][a],this._shopCfg){this.itemDesc2.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_258,this._buyNum*this._shopCfg.price.count,this._buyNum,e.name));var r=t.CurrencyUtils.getCurrencyNameIcon(this._shopCfg.price.type,this._shopCfg.price.id);r&&(this.priceLab.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_Omission_txt122+":|C:0x28ee01&T:"+this._shopCfg.price.count+r[0]+"|"))}}}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btnClose:t.ViewManager.ins().close(this);break;case this.buyBtn:if(this.isMax)return t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips148),void t.ViewManager.ins().close(this);if(this._buyNum<=0)return void t.ViewManager.ins().close(this);this._shopCfg?(t.ShopMgr.ins().sendBuyShop(this._shopCfg.shoptype,this._shopCfg.Tabshop,this._shopCfg.shopid,0,this._buyNum),t.ViewManager.ins().close(this)):t.UserTips.ins().showUITips(t.LanguageUtils.language_Omission_txt81)}},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget.localToGlobal();switch(e.currentTarget){case this.itemIcon:case this.consumeImg:case this.consumeImg2:var n=t.GlobalConfig.StdItems[this._itemID];n&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,n,{x:i.x+e.currentTarget.width,y:i.y})}i=null}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this._hashCode=-1,this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.buyBtn,this.onClick),this.removeMouseMoveEvent(this.itemIcon,this.mouseMove),this.removeMouseOverEvent(this.itemIcon,this.mouseMove),this.removeMouseMoveEvent(this.consumeImg,this.mouseMove),this.removeMouseOverEvent(this.consumeImg,this.mouseMove),this.removeMouseMoveEvent(this.consumeImg2,this.mouseMove),this.removeMouseOverEvent(this.consumeImg2,this.mouseMove)},i}(t.BaseEuiView);t.VipGaimItemWin=e,__reflect(e.prototype,"app.VipGaimItemWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isAddmouseMove=!0,t}return __extends(i,e),i.prototype.$onRemoveFromStage=function(){this.isAddmouseMove=!0,this.removeMouseOverEvent(this.nameBg,this.mouseMove),this.removeMouseMoveEvent(this.nameBg,this.mouseMove),e.prototype.$onRemoveFromStage.call(this)},i.prototype.dataChanged=function(){var t=this.data;this.isAddmouseMove&&(this.isAddmouseMove=!1,this.addMouseMoveEvent(this.nameBg,this.mouseMove),this.addMouseOverEvent(this.nameBg,this.mouseMove)),this.lbVipName.text=t.tequan;for(var e=[t.baika,t.lvka,t.lanka,t.zika,t.chengka],i=0;i<e.length;i++){var n=e[i];this.setShow(n,this["lbVip"+(i+1)],this["flagVip"+(i+1)])}},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else if(this.data.tips){var i=e.currentTarget.localToGlobal();t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_BUFF,this.data.tips,{x:i.x+140,y:i.y}),i=null}},i.prototype.setShow=function(t,e,i){e.visible=!1,i.visible=!1,1===t||2===t?(i.source=1==t?"tq_sf_s":"tq_sf_f",i.visible=!0):(e.text=t,e.visible=!0)},i}(t.BaseItemRender);t.VipItemView=e,__reflect(e.prototype,"app.VipItemView")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.curentShowLv=0,i.curentLv=0,i.idx=4,i.skinName="VipViewSkin",i.name="VipView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.itemList.itemRenderer=t.ItemBase,this.gList.itemRenderer=t.VipItemView},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(;e[0]instanceof Array;)e=e[0];e[0]&&(this.curentShowLv=e[0]),this.bar.labelFunction=function(t,e){return t+"/"+e},t.MouseScroller.bind(this.scroller),this.addTouchEvent(this.btnClose,this.onClick),this.addTouchEvent(this.btn_prev,this.onClick),this.addTouchEvent(this.btn_next,this.onClick),this.addTouchEvent(this.btnBuy,this.onClick),this.addTouchEvent(this.btnBuy2,this.onClick),this.addTouchEvent(this.btnViptq,this.onClick),this.addTouchEvent(this.btncharge,this.onClick),this.addTouchEvent(this.btncharge2,this.onClick),this.addTouchEvent(this.btnWelfare,this.onClick),this.addMouseMoveEvent(this.moneyImg,this.mouseMove),this.addMouseOverEvent(this.moneyImg,this.mouseMove),this.addMouseMoveEvent(this.moneyImg2,this.mouseMove),this.addMouseOverEvent(this.moneyImg2,this.mouseMove),this.togBtnVipWel.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),this.togBtnViptq.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),this.observe(t.DefaultMgr.ins().post_g_0_7,this.updateVipData),t.EventManager.ins().addEvent(t.CompEvent.ITEM_NUM_UPDATE,this.updateItem,this),this.showCurViplevel(),this.togBtnVipWel.selected=!0,this.togBtnViptq.selected=!1,this.groupWelfare2.visible=!1,this.showNextLevelData(this.curentShowLv)},i.prototype.changeHandler=function(t){t.target==this.togBtnVipWel?this.showVipWel():this.showViptq()},i.prototype.showVipWel=function(){this.togBtnVipWel.selected=!0,this.togBtnViptq.selected=!1,this.groupWelfare.visible=!0,this.groupTq.visible=!1},i.prototype.showViptq=function(){this.togBtnViptq.selected=!0,this.togBtnVipWel.selected=!1,this.groupWelfare.visible=!1,this.groupTq.visible=!0,this.showVipList()},i.prototype.showVipadvertq=function(){var e=t.VipData.ins().getVipDataByLv(this.getMaxLv());e&&e.heraldid&&(this.imgWelfare.source=e.heraldid,this.togBtnVipWel.visible=!1,this.togBtnViptq.visible=!1,this.ImgTabBgleft.visible=!1,this.ImgTabBgRigth.visible=!1,this.groupWelfare.visible=!1,this.groupWelfare2.visible=!0)},i.prototype.updateVipData=function(){this.curentLv!=t.VipData.ins().getMyVipLv()&&(this.showCurViplevel(),this.showNextLevelData(this.curentShowLv))},i.prototype.updateItem=function(t){this.consume&&this.consume.id==t&&this.showTitleData(this.curentLv+1)},i.prototype.showCurViplevel=function(){this.curentLv=t.VipData.ins().getMyVipLv(),this.curentShowLv=this.curentLv==this.getMaxLv()?this.curentLv:this.curentLv+1,this.showTitleData(this.curentLv+1),this.curentLv>5?(this.iconVip.visible=!1,this.effVipGrp.visible=!0,this.vipMc||(this.vipMc=t.ObjectPool.pop("app.MovieClip"),this.effVipGrp.addChild(this.vipMc)),6==this.curentLv?this.vipMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_cxhy1",-1,null,!1):7==this.curentLv&&this.vipMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_cyhy1",-1,null,!1)):(this.iconVip.source="tq_icon_"+this.curentLv,this.iconVip.visible=!0,this.effVipGrp.visible=!1)},i.prototype.showTitleData=function(e){e=e>this.getMaxLv()?this.getMaxLv():e;var i=t.VipData.ins().getVipDataByLv(e);i&&(1==i.ViewType?this.updateVipView1(i):2==i.ViewType?this.updateVipView2(i):this.updateVipView1(i))},i.prototype.updateVipView1=function(e){var i=0,n=0,s=0,a=0,r=t.LanguageUtils.language_CURRENCY_NAME_2,o={1:16777215,2:3061037,3:26367,4:16718530,5:16742144,6:16742144},l=t.EntityMgr.ins().getPlayerPropertySet();if(l&&l.propSet){var h=l.propSet;i=h.getNotBindYuanBao(),n=h.getBindYuanBao()}if(e.Ylprice){var p=e.Ylprice-i,u=e.Ybprice-n;s=p>u?e.Ylprice:e.Ybprice,a=p>u?n:i;var c=t.LanguageUtils.language_System25[2],g=t.LanguageUtils.language_CURRENCY_NAME_2;this.lbNeedMoney.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt53,e.Ybprice,g,e.Ylprice,c,o[e.superRightLV],e.name))}else{s=e.Ybprice,a=i,r=t.LanguageUtils.language_CURRENCY_NAME_2;this.lbNeedMoney.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt48,s,r,o[e.superRightLV],e.name))}this.bar.maximum=s,this.bar.value=a,this.btncharge.visible=!0,this.btncharge2Grp.visible=!1,this.btnBuy2Grp.visible=!1},i.prototype.updateVipView2=function(e){var i=e.consume;this.consume=i;var n=t.GlobalConfig.StdItems[i.id],s={1:16777215,2:3061037,3:26367,4:16718530,5:16742144,6:16742144};this.lbNeedMoney.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt147,i.count+t.LanguageUtils.language_Common_38,n.name,s[e.superRightLV],e.name));var a=t.CurrencyUtils.getCurrency(i.type,i.id);this.bar.maximum=i.count,this.bar.value=a,this.moneyLab.text=t.LanguageUtils.language_Common_252,this.moneyImg.source=this.moneyImg2.source=t.CurrencyUtils.getCurrencyNameIcon(i.type,i.id)[1]+"",this.moneyLab2.text="*"+a,a<i.count?this.moneyLab3.textFlow=t.TextFlowMaker.generateTextFlow("|C:0xe50000&T:"+a+"|/"+i.count):this.moneyLab3.textFlow=t.TextFlowMaker.generateTextFlow("|C:0x28ee01&T:"+a+"|/"+i.count),this.moneyLab4.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Omission_txt174,s[e.superRightLV],e.name)),this.btncharge.visible=!1,this.btncharge2Grp.visible=!0,this.btnBuy.visible=!1},i.prototype.showNextLevelData=function(e){e=e>this.getMaxLv()?this.getMaxLv():e;var i=t.VipData.ins().getVipDataByLv(e);if(i){if(this.idx=i.idx,t.VipData.ins().getMyVipLv()>=i.superRightLV?(this.btnBuy.visible=!1,this.btnBuy2Grp.visible=!1,this.imgGet.visible=!0):(1==i.ViewType?this.btnBuy.visible=!0:2==i.ViewType&&(this.btnBuy2Grp.visible=!0),this.imgGet.visible=!1),this.showGoodsList(i.buyAward),i.pictures)for(var n=0;n<i.pictures.length;n++){var s=i.pictures[n];this["icon_Vip"+n].source=s+"_png"}e>5?(this.iconTitle.visible=!1,this.effTitleGrp.visible=!0,this.titleMc||(this.titleMc=t.ObjectPool.pop("app.MovieClip"),this.effTitleGrp.addChild(this.titleMc)),6==e?this.titleMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_cxhy2",-1,null,!1):7==e&&this.titleMc.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_cyhy2",-1,null,!1)):(this.iconTitle.source="tq_jlt"+e,this.iconTitle.visible=!0,this.effTitleGrp.visible=!1)}},i.prototype.showGoodsList=function(t){var e=new eui.ArrayCollection(t);this.itemList.dataProvider=e},i.prototype.showVipList=function(){var e=t.GlobalConfig.privilegeLevelConfig,i=[];for(var n in e)i.push(e[n]);var s=new eui.ArrayCollection(i);this.gList.dataProvider=s},i.prototype.onClick=function(e){var i=e.currentTarget;switch(i){case this.btnClose:t.ViewManager.ins().close(this);break;case this.btncharge:t.RechargeMgr.ins().onPay("");break;case this.btncharge2:if(!t.ViewManager.ins().isShow(t.VipGaimItemWin)){var n=t.GlobalConfig.GetItemRouteConfig[this.consume.id];t.ViewManager.ins().open(t.VipGaimItemWin,{itemid:n.itemid,needCount:this.consume.count,isMax:this.curentLv==this.getMaxLv()},{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode)}break;case this.togBtnVipWel:this.showVipWel();break;case this.togBtnViptq:this.showViptq();break;case this.btn_prev:if(1==this.curentShowLv)return;var s=--this.curentShowLv;this.showNextLevelData(s);break;case this.btn_next:this.curentShowLv>=this.getMaxLv()?this.curentLv>=5&&this.showVipadvertq():(++this.curentShowLv,this.showNextLevelData(this.curentShowLv));break;case this.btnBuy:t.OtherMgr.ins().send_26_61(this.idx);break;case this.btnBuy2:if(this.curentShowLv==this.curentLv+1){var a=t.CurrencyUtils.getCurrency(this.consume.type,this.consume.id);if(a<this.consume.count){if(!t.ViewManager.ins().isShow(t.VipGaimItemWin)){var n=t.GlobalConfig.GetItemRouteConfig[this.consume.id];t.ViewManager.ins().open(t.VipGaimItemWin,{itemid:n.itemid,needCount:this.consume.count},{x:this.x,y:this.y},{height:this.height,width:this.width},this.hashCode)}}else t.OtherMgr.ins().send_26_61(this.idx)}else this.curentShowLv=this.curentLv+1,this.showNextLevelData(this.curentShowLv);break;case this.btnViptq:this.curentShowLv>5?t.ViewManager.ins().open(t.VipPrivilegeView,this.curentShowLv):this.showViptq();break;case this.btnWelfare:this.togBtnVipWel.visible=!0,this.togBtnViptq.visible=!0,this.ImgTabBgleft.visible=!0,this.ImgTabBgRigth.visible=!0,this.groupWelfare.visible=!0,this.groupWelfare2.visible=!1}},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget.localToGlobal();switch(e.currentTarget){case this.moneyImg:case this.moneyImg2:var n=t.GlobalConfig.StdItems[this.consume.id];n&&t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,n,{x:i.x+e.currentTarget.width,y:i.y})}i=null}},i.prototype.getMaxLv=function(){var e=t.VipData.ins().getVipConfig(),i=0;for(var n in e)t.ViewManager.ins().isCheckOpen(e[n].displaylimit)&&i++;return i},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.$onClose(),this.vipMc&&(this.vipMc.destroy(),this.vipMc=null),this.titleMc&&(this.titleMc.destroy(),this.titleMc=null),t.DefaultMgr.ins().post_gaimItemView(this.hashCode),t.MouseScroller.unbind(this.scroller),this.removeTouchEvent(this.btnClose,this.onClick),this.removeTouchEvent(this.btncharge,this.onClick),this.removeTouchEvent(this.btncharge2,this.onClick),this.removeTouchEvent(this.btn_prev,this.onClick),this.removeTouchEvent(this.btn_next,this.onClick),this.removeTouchEvent(this.btnBuy,this.onClick),this.removeTouchEvent(this.btnBuy2,this.onClick),this.removeMouseMoveEvent(this.moneyImg,this.mouseMove),this.removeMouseOverEvent(this.moneyImg,this.mouseMove),this.removeMouseMoveEvent(this.moneyImg2,this.mouseMove),this.removeMouseOverEvent(this.moneyImg2,this.mouseMove),this.togBtnVipWel.removeEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),this.togBtnViptq.removeEventListener(eui.UIEvent.CHANGE,this.changeHandler,this)},i}(t.BaseEuiView);t.VipView=e,__reflect(e.prototype,"app.VipView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.dataChanged=function(){this.itemBase.data=this.data.itemData,this.labDesc.textFlow=t.TextFlowMaker.generateTextFlow(this.data.desc)},i}(eui.ItemRenderer);t.VipPrivilegeItem=e,__reflect(e.prototype,"app.VipPrivilegeItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="VipPrivilegeViewSkin",i.name="VipPrivilegeView",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.addTouchEvent(this.btnClose,this.onClick),t.MouseScroller.bind(this.itemScroller),this.labDesc3List.itemRenderer=t.VipPrivilegeItem},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t&&(6==t[0]?this.showVip6():7==t[0]&&this.showVip7())},i.prototype.showVip6=function(){this.labTitle1.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_VipPrivilege_Title_1),this.labTitle2.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_VipPrivilege_Title_2),this.labTitle3.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_VipPrivilege_Title_3),this.labDesc1.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_VipPrivilege_Desc_1),this.labDesc2.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_VipPrivilege_Desc_2);var e=[{itemData:{type:0,id:1146,count:1},desc:t.LanguageUtils.language_VipPrivilege_Desc_3},{itemData:{type:0,id:1115,count:1},desc:t.LanguageUtils.language_VipPrivilege_Desc_4},{itemData:{type:0,id:1066,count:300},desc:t.LanguageUtils.language_VipPrivilege_Desc_5},{itemData:{type:0,id:970,count:666},desc:t.LanguageUtils.language_VipPrivilege_Desc_6},{itemData:{type:0,id:300,count:100},desc:t.LanguageUtils.language_VipPrivilege_Desc_7}];this.labDesc3List.dataProvider=new eui.ArrayCollection(e)},i.prototype.showVip7=function(){this.labTitle1.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_VipPrivilege_Title_1),this.labTitle2.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_VipPrivilege_Title_2),this.labTitle3.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_VipPrivilege_Title_3),this.labDesc1.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_VipPrivilege_Desc_2_1),this.labDesc2.textFlow=t.TextFlowMaker.generateTextFlow(t.LanguageUtils.language_VipPrivilege_Desc_2_2);var e=[{itemData:{type:0,id:1272,count:1},desc:t.LanguageUtils.language_VipPrivilege_Desc_2_3},{itemData:{type:0,id:1241,count:1},desc:t.LanguageUtils.language_VipPrivilege_Desc_2_4},{itemData:{type:0,id:265,count:1888},desc:t.LanguageUtils.language_VipPrivilege_Desc_2_5},{itemData:{type:0,id:970,count:666},desc:t.LanguageUtils.language_VipPrivilege_Desc_2_6},{itemData:{type:0,id:852,count:158},desc:t.LanguageUtils.language_VipPrivilege_Desc_2_7}];this.labDesc3List.dataProvider=new eui.ArrayCollection(e)},i.prototype.onClick=function(e){var i=e.currentTarget;switch(i){case this.btnClose:t.ViewManager.ins().close(this)}},i.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.MouseScroller.unbind(this.itemScroller),this.removeObserve(),this.removeTouchEvent(this.btnClose,this.onClick)},i}(t.BaseEuiView);t.VipPrivilegeView=e,__reflect(e.prototype,"app.VipPrivilegeView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._WarehouseInfo=[],i._itemInfo=[],i._saveSelect=!1,i._warehousePoint=null,i._WarehouseInfo=[],i.sysId=t.PackageID.Warehouse,i.regNetMsg(1,i.post_23_1),i.regNetMsg(2,i.post_23_2),i.regNetMsg(3,i.post_23_3),i.regNetMsg(4,i.post_23_4),i.regNetMsg(6,i.post_23_6),i
}return __extends(i,e),Object.defineProperty(i.prototype,"itemInfo",{get:function(){return this._itemInfo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"saveSelect",{get:function(){return this._saveSelect},set:function(t){this._saveSelect=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"WarehouseInfo",{get:function(){return this._WarehouseInfo},enumerable:!0,configurable:!0}),i.ins=function(){return e.ins.call(this)},Object.defineProperty(i.prototype,"warehousePoint",{get:function(){return this._warehousePoint},set:function(t){this._warehousePoint=t},enumerable:!0,configurable:!0}),i.prototype.send_23_1=function(){var t=this.getBytes(1);this.sendToServer(t)},i.prototype.post_23_1=function(e){this._WarehouseInfo=[];var i=e.readInt();if(i>0)for(var n=void 0,s=0;i>s;s++)n=new t.userItem(e),this._WarehouseInfo[Math.floor(s/42)]||(this._WarehouseInfo[Math.floor(s/42)]=[]),this._WarehouseInfo[Math.floor(s/42)].push(n);for(var s=0;7>s;s++){var a=this._WarehouseInfo[s];a&&this.tidyItems(a)}this.createGezi()},i.prototype.createGezi=function(){for(var e=0,i=0;7>i;i++){this._itemInfo[i]=[];for(var n=this._WarehouseInfo[i],s=0;42>s;s++)if(e+=1,n&&n[s]&&n[s].wItemId)n[s].geziIdx=e,this._itemInfo[i].push(n[s]);else{var a=new t.userItem(null);a.geziIdx=e,this._itemInfo[i].push(a)}}},i.prototype.send_23_2=function(t){var e=this.getBytes(2);t.writeToBytes(e),this.sendToServer(e)},i.prototype.post_23_2=function(e){for(var i=new t.userItem(e),n=0;7>n;n++)if(!(this._WarehouseInfo[n]&&this._WarehouseInfo[n].length>=42))return this._WarehouseInfo[n]||(this._WarehouseInfo[n]=[]),this._WarehouseInfo[n].push(i),void(this._itemInfo[n][this._WarehouseInfo[n].length-1]=i)},i.prototype.send_23_3=function(t){var e=this.getBytes(3);t.writeToBytes(e),this.sendToServer(e)},i.prototype.post_23_3=function(e){for(var i=new t.ItemSeries(e),n=0;7>n;n++){var s=this._WarehouseInfo[n];if(s)for(var a=0;a<s.length;a++){var r=s[a];if(r.series.toString()==i.toString())return s.splice(a,1),void this.createGezi()}}},i.prototype.post_23_4=function(e){for(var i=new t.ItemSeries(e),n=e.readUnsignedShort(),s=0;7>s;s++){var a=this._WarehouseInfo[s];if(a)for(var r=0;r<a.length;r++){var o=a[r];if(o.series.toString()==i.toString())return void(o.btCount=n)}}},i.prototype.send_23_6=function(){var t=this.getBytes(6);this.sendToServer(t)},i.prototype.post_23_6=function(t){for(var e=0;7>e;e++){var i=this._WarehouseInfo[e];i&&this.tidyItems(i)}this.createGezi()},i.prototype.tidyItems=function(t){return t&&t.sort(this.sortFunction),t},i.prototype.sortFunction=function(t,e){return t.bagType==e.bagType?t.btQuality<e.btQuality?1:t.btQuality>e.btQuality?-1:t.btStrong<e.btStrong?1:t.btStrong>e.btStrong?-1:t.wItemId<e.wItemId?1:t.wItemId>e.wItemId?-1:0:1==t.bagType&&1!=e.bagType?-1:1!=t.bagType&&1==e.bagType?1:t.bagType<e.bagType?1:t.bagType>e.bagType?-1:t.btQuality<e.btQuality?1:t.btQuality>e.btQuality?-1:t.btStrong<e.btStrong?1:t.btStrong>e.btStrong?-1:t.wItemId<e.wItemId?1:t.wItemId>e.wItemId?-1:0},i.prototype.getBagTwoArr=function(t){for(var e=[],i=0;i<this._itemInfo[t].length;i++)e[Math.floor(i/6)]||(e[Math.floor(i/6)]=[]),e[Math.floor(i/6)].push(this._itemInfo[t][i]);return e},i.prototype.getLineXY=function(t){for(var e={},i=0,n=0;n<t.length;n++)0==n?(e[n]={x:0,y:0},i=0):(e[n]={x:0,y:60+i+5.8},i=e[n].y);return e},i}(t.BaseSystem);t.WarehouseMgr=e,__reflect(e.prototype,"app.WarehouseMgr")}(app||(app={}));var app;!function(t){var e=function(e){function i(i,n,s,a,r){var o=e.call(this)||this;return o.lab=new eui.Label,o.lab.textColor=t.ColorUtil.WHITE_COLOR,o.lab.textAlign="right",o.lab.size=16,o.lab.width=50,o.lab.stroke=1,o.lab.strokeColor=0,o.imgBg=new eui.Image,o.imgNuBg=new eui.Image,o.imgicon=new eui.Image,o.imgAscension=new eui.Image,o.bestEquip=new eui.Image,o.isLock=new eui.Image("cangku_lock"),o.effGrp=new eui.Group,o.effGrp.touchEnabled=!1,o.effGrp.touchChildren=!1,o.redPoint=new eui.Image("redPoint"),o.imgNuBg.touchEnabled=!1,o.imgAscension.touchEnabled=!1,o.bestEquip.touchEnabled=!1,i.addChild(o.imgBg),i.addChild(o.imgicon),i.addChild(o.imgNuBg),i.addChild(o.imgAscension),i.addChild(o.bestEquip),i.addChild(o.redPoint),i.addChild(o.isLock),n.addChild(o.lab),a.addChild(o.effGrp),o.starLabel=new eui.BitmapLabel,o.starLabel.textAlign,o.starLabel.width=50,o.starLabel.letterSpacing=-3,o.starLabel.textAlign="right",o.starLabel.font="num_8_fnt",s.addChild(o.starLabel),o}return __extends(i,e),i.prototype.dataChange=function(e,i,n){if(e&&e.wItemId){this.curItem=e,this.starLabel.visible=e.wStar>0,this.starLabel.text="+"+e.wStar;var s=t.GlobalConfig.StdItems[this.curItem.wItemId];if(s){this.isLock.visible=!1,this.bestEquip.visible=!1,this.redPoint.visible=e.itemRed>0,this.redPoint.source=1==e.itemRed?"redPoint":"orangePoint",this.imgBg.source="quality_"+s.showQuality,this.imgNuBg.source=s.iseffect?"yan_"+s.iseffect:"",this.imgNuBg.visible=s.iseffect?!0:!1;t.ViewManager.ins().getView(t.SetUpView);this.imgAscension.source="",this.imgAscension.visible=!1;var a=t.BagManager.ins().getItemUseState(s),r=t.EntityMgr.ins().getPlayerPropertySet(),o=r.propSet.getAP_JOB();if(1==s.packageType&&(0==s.suggVocation||s.suggVocation==o)&&1==a){var l=t.EquipItemMgr.ins().getEquipsByPos(s.type-1);l&&l.series?l.itemScore<e.itemScore&&(this.imgAscension.source="quality_sheng",this.imgAscension.visible=!0):(this.imgAscension.source="quality_sheng",this.imgAscension.visible=!0)}this.imgicon.source=s.icon+"",this.lab.text=e.btCount>1?e.btCount+"":"",""!=e.topLine&&void 0!=e.topLine&&(this.bestEquip.source="quality_jipin",this.bestEquip.visible=!0),s.itemEff&&(this.effGrp.visible=!0,this.itemMC||(this.itemMC=t.ObjectPool.pop("app.MovieClip"),this.itemMC.scaleX=this.itemMC.scaleY=1,this.itemMC.touchEnabled=!1,this.itemMC.blendMode=egret.BlendMode.ADD,this.effGrp.addChild(this.itemMC)),this.itemMC.playFileEff(ResDirEnum.RES_DIR_EFF+"eff_zb"+s.itemEff,-1)),this.imgicon.curData=e}}else this.starLabel.visible=!1,this.imgBg.source="quality_0",this.imgNuBg.source="",this.imgicon.source="",this.imgAscension.source="",this.bestEquip.source="",this.lab.text="",this.itemMC&&(this.itemMC.destroy(),this.itemMC=null);this.imgicon.idx=6*i+n,this.imgicon.itemInfo=e},Object.defineProperty(i.prototype,"curData",{get:function(){return this.curItem},enumerable:!0,configurable:!0}),i.prototype.setVis=function(t){this.imgBg.visible=t,this.imgNuBg.visible=!1,this.redPoint.visible=!1,this.imgicon.visible=t,this.lab.visible=t,this.effGrp.visible=!1,this.imgAscension.visible=t,this.bestEquip.visible=!1,this.itemMC&&(this.itemMC.destroy(),this.itemMC=null)},Object.defineProperty(i.prototype,"isLockVis",{set:function(t){this.isLock.visible=t},enumerable:!0,configurable:!0}),i.prototype.cleanImg=function(){this.isLock.visible=!0,this.imgBg.source="quality_0",this.imgNuBg.source="",this.imgicon.source="",this.imgAscension.source="",this.bestEquip.source="",this.bestEquip.visible=!1,this.redPoint.visible=!1,this.effGrp.visible=!1,this.starLabel.visible=!1,this.lab.text="",this.itemMC&&(this.itemMC.destroy(),this.itemMC=null)},Object.defineProperty(i.prototype,"x",{get:function(){return this.imgBg.x},set:function(t){this.imgBg.x=t,this.redPoint.x=t+43,this.imgicon.x=t,this.imgNuBg.x=t,this.isLock.x=t,this.imgAscension.x=t,this.bestEquip.x=t,this.effGrp.x=t+30,this.lab.x=t+5,this.starLabel.x=t+5},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.imgBg.y},set:function(t){this.imgBg.y=t,this.redPoint.y=t+2,this.imgicon.y=t,this.imgNuBg.y=t,this.isLock.y=t,this.imgAscension.y=t,this.bestEquip.y=t,this.effGrp.y=t+30,this.lab.y=t+42,this.starLabel.y=t+38},enumerable:!0,configurable:!0}),i}(eui.Component);t.WarehouseItemGrid=e,__reflect(e.prototype,"app.WarehouseItemGrid")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.bagGridArr=[],i.itemGrid=[],i.geziCount=0,i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i.skinName="WarehouseWinSkin",i.dSpriteSheet=new how.DSpriteSheet,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.newGrp=new eui.Group,this.newGrp.width=60,this.newGrp.height=60,this.newIcon=new eui.Image,this.newIcon.horizontalCenter=0,this.newIcon.verticalCenter=0,this.newGrp.addChild(this.newIcon),this.newGrp.x=this.x,this.newGrp.y=this.y,this.newGrp.visible=!1,this.newGrp.touchChildren=!1,this.newIcon.touchEnabled=!1,t.LayerManager.UI_Drag.addChild(this.newGrp),this.tabBar.itemRenderer=t.CommonTabBarWin,this.tabBar.dataProvider=new eui.ArrayCollection(["cangku_tabt1_","cangku_tabt2_","cangku_tabt3_","cangku_tabt4_","cangku_tabt5_"])},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.ViewManager.ins().isShow(t.BagView)||t.ViewManager.ins().open(t.BagView),this.addEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.addTouchEvent(this.btn_close,this.onClick),this.addTouchEvent(this.finishingBtn,this.onClick),this.addChangeEvent(this.tabBar,this.onClick),this.addTouchEvent(this.saveCheck,this.onClick),this.observe(t.WarehouseMgr.ins().post_23_1,this.updateBagItemGrid),this.observe(t.WarehouseMgr.ins().post_23_2,this.updateBagItemGrid),this.observe(t.WarehouseMgr.ins().post_23_3,this.updateBagItemGrid),this.observe(t.WarehouseMgr.ins().post_23_4,this.updateBagItemGrid),this.observe(t.WarehouseMgr.ins().post_23_6,this.updateBagItemGrid),this.observe(t.DefaultMgr.ins().post_warehouseChange,this.updateBagItemGrid),this.saveCheck.selected=!1,this.tabBar.selectedIndex=0,t.WarehouseMgr.ins().send_23_1()},i.prototype.initViewPos=function(){e.prototype.initViewPos.call(this),t.WarehouseMgr.ins().warehousePoint=this.warehouseGrp.localToGlobal(0,0),t.WarehouseMgr.ins().warehousePoint.y-=13},i.prototype.stopMove=function(){t.WarehouseMgr.ins().warehousePoint=this.warehouseGrp.localToGlobal(0,0),t.WarehouseMgr.ins().warehousePoint.y-=13},i.prototype.updateBagItemGrid=function(){this.geziCount=this.getHaveGezi();var t=this.tabBar.selectedIndex;this.cleanBagGrid(),this.setBagDataVis(t)},i.prototype.setBagDataVis=function(e){var i=t.WarehouseMgr.ins().getBagTwoArr(e),n=t.WarehouseMgr.ins().getLineXY(i);for(var s in this.bagGridArr){for(var a in this.bagGridArr[s])this.pushBagGrid(this.bagGridArr[s][a]);delete this.bagGridArr[s]}for(var r=0;7>r;r++)this.bagGridArr[r]||this.addBagItem(r,{x:n[r].x,y:n[r].y},i[r])},i.prototype.addBagItem=function(t,e,i){for(var n,s=0,a=0;a<i.length;a++)n=this.getBagGrid(this.equipBg,this.equipLab,this.equipStar,this.itemEffGrp,this.dSpriteSheet),n.cleanImg(),this.bagGridArr[t]||(this.bagGridArr[t]=[]),this.bagGridArr[t].push(n),0==a?(n.x=0,s=0):(n.x=60+s+4.5,s=n.x),n.y=e.y,n.setVis(!0),n.imgicon.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),n.imgicon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),n.imgicon.addEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),n.isLock.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLockTouchTap,this),this.addMouseMoveEvent(n.imgicon,this.mouseMove),this.addMouseOverEvent(n.imgicon,this.mouseMove),n.isLockVis=this.geziCount>=i[a].geziIdx?!1:!0,n.dataChange(i[a],t,a);n=null,s=null},i.prototype.getHaveGezi=function(){var e=t.VipData.ins().getMyVipLv(),i=6,n=t.GlobalConfig.WarehouseConfig.warehouses;if(n)for(var s in n)if(n[s].vip==e){i=n[s].count;break}return i},i.prototype.cleanBagGrid=function(){for(var t in this.bagGridArr){for(var e in this.bagGridArr[t])this.pushBagGrid(this.bagGridArr[t][e]);delete this.bagGridArr[t]}},i.prototype.getBagGrid=function(e,i,n,s,a){return this.itemGrid.pop()||new t.WarehouseItemGrid(e,i,n,s,a)},i.prototype.pushBagGrid=function(t){t.imgicon.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),t.imgicon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),t.imgicon.removeEventListener(mouse.MouseEvent.MOUSE_DOUBLECLICK,this.onTouchDouble,this),t.isLock.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLockTouchTap,this),this.removeTouchEvent(t.imgicon,this.mouseMove),this.removeTouchEvent(t.imgicon,this.mouseMove),t.cleanImg(),t.setVis(!1),this.itemGrid.push(t)},i.prototype.mouseMove=function(e){if(e.type==mouse.MouseEvent.MOUSE_OUT)t.UserTips.ins().closeTips();else{var i=e.currentTarget,n=i.curData;if(n&&n.wItemId){var s=i.localToGlobal(),a=t.GlobalConfig.StdItems[n.wItemId];if(1!=n.bagType&&n.series){var r=t.TipsType.TIPS_EQUIP;a&&a.fashionTips&&(r=t.TipsType.TIPS_FASHION),t.UserTips.ins().shouwTips(e.target,r,n,{x:s.x+i.width/2,y:s.y+i.height/2})}else if(1==n.bagType&&n.series){var o=t.EquipItemMgr.ins().getEquipsByPos(a.type-1);if(o&&o.series){var l=t.GlobalConfig.StdItems[o.wItemId],h=l&&a;h?t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIPCONTRAST,n,{x:s.x+i.width/2,y:s.y+i.height/2},o):t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,n,{x:s.x+i.width/2,y:s.y+i.height/2})}else t.UserTips.ins().shouwTips(e.target,t.TipsType.TIPS_EQUIP,n,{x:s.x+i.width/2,y:s.y+i.height/2})}s=null}i=null,n=null}},i.prototype.onClick=function(e){switch(e.currentTarget){case this.btn_close:t.ViewManager.ins().close(this);break;case this.tabBar:this.updateBagItemGrid();break;case this.finishingBtn:t.WarehouseMgr.ins().send_23_6();break;case this.saveCheck:t.WarehouseMgr.ins().saveSelect=this.saveCheck.selected}},i.prototype.onLockTouchTap=function(){var e=t.VipData.ins().getMyVipLv(),i=t.GlobalConfig.WarehouseConfig;if(i){var n=i["viptips"+e];n&&t.UserTips.ins().showUITips(n)}},i.prototype.onTouchTap=function(e){if(1==this.saveCheck.selected){var i=e.target.itemInfo;i&&i.wItemId&&t.WarehouseMgr.ins().send_23_3(i.series)}t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.resetPos()},i.prototype.onTouchDouble=function(e){var i=t.ViewManager.ins().getView(t.BagView);if(i){var n=e.target.itemInfo;n&&n.wItemId&&t.WarehouseMgr.ins().send_23_3(n.series)}t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.resetPos()},i.prototype.onTouchBegin=function(e){if(e.target instanceof eui.Image){this.newIcon.source=e.target.source,this.newGrp.name=e.target.name;var i=e.currentTarget.localToGlobal(0,0);this.newGrp.x=i.x,this.newGrp.y=i.y,t.UserTips.ins().closeTips(),this.grpOldIdx=e.target.idx,this.XTouch=e.stageX-this.newGrp.x,this.YTouch=e.stageY-this.newGrp.y,t.StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}},i.prototype.onTouchMove=function(t){if(this.newGrp){this.newGrp.visible=!0,this.newGrp.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this);var e=Math.floor(this.grpOldIdx/6),i=this.grpOldIdx%6,n=this.bagGridArr[e][i];n&&(n.imgicon.visible=!1,n.lab.visible=!1,n.bestEquip.visible=!1,n.imgNuBg.visible=!1,n.effGrp.visible=!1,n.redPoint.visible=!1,n.imgAscension.visible=!1),this.newGrp.x=t.stageX-this.XTouch,this.newGrp.y=t.stageY-this.YTouch}},i.prototype.onTouchEnd=function(e){if(1==this.newGrp.visible){var i=this.newGrp.localToGlobal(0,0),n=this.tabBar.selectedIndex,s=t.WarehouseMgr.ins().itemInfo[n],a=s[this.grpOldIdx],r=!1;null!=t.BagMgr.ins().bagGeZiPoint&&(r=t.BagMgr.ins().bagGeZiPoint.x<=i.x&&i.x<t.BagMgr.ins().bagGeZiPoint.x+498&&t.BagMgr.ins().bagGeZiPoint.y<=i.y&&i.y<t.BagMgr.ins().bagGeZiPoint.y+372),t.ViewManager.ins().isShow(t.BagView)&&null!=t.BagMgr.ins().bagGeZiPoint&&r&&a&&a.series&&t.WarehouseMgr.ins().send_23_3(a.series)}t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.newGrp.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.resetPos(),this.updateBagItemGrid()},i.prototype.resetPos=function(){this.newGrp.x=this.x,this.newGrp.y=this.y,this.newGrp.visible=!1},i.prototype.close=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.prototype.close.call(this,i),this.$onClose(),t.WarehouseMgr.ins().saveSelect=!1,t.WarehouseMgr.ins().warehousePoint=null,this.dSpriteSheet.dispose(),this.dSpriteSheet=null,this.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),t.StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.newGrp.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.removeTouchEvent(this.btn_close,this.onClick),this.removeTouchEvent(this.finishingBtn,this.onClick),this.removeTouchEvent(this.saveCheck,this.onClick),this.tabBar.removeEventListener(egret.TouchEvent.CHANGE,this.onClick,this)},i}(t.BaseEuiView);t.WarehouseWin=e,__reflect(e.prototype,"app.WarehouseWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="WorshipItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addTouchEvent(this.check,this.onClick),this.addTouchEvent(this.worship,this.onClick),this.roleInnerModel=new t.RoleInnerModel(this.modelGroup)},i.prototype.initData=function(e,i,n,s){this.sexjob=e,this.configData=n,this.imgTitle.source=i,this.playName.text=this.configData.name,this.callFun=s,this.mc||(this.mc=t.ObjectPool.pop("app.MovieClip"),this.mc.playFileEff(ResDirEnum.RES_DIR_WORSHIP+this.configData.background,-1),this.playEff.addChild(this.mc))},i.prototype.dataChanged=function(){if(this.data){var t=this.data;this.playName.text=this.configData.name+":"+t.name,t.otherInfo&&(this.roleInnerModel.setOtherData(t.otherInfo.equips,t.otherInfo),this.playEff.removeChildren())}},i.prototype.updateTimes=function(e){this.count.text=t.LanguageUtils.language_Common_61+e},i.prototype.onClick=function(t){switch(t.currentTarget){case this.check:this.callFun("check",this.sexjob);break;case this.worship:this.callFun("worship",[this.configData.id])}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeTouchEvent(this.check,this.onClick),this.removeTouchEvent(this.worship,this.onClick),this.mc&&(this.mc.destroy(),this.mc=null)},i}(t.BaseItemRender);t.WorshipItem=e,__reflect(e.prototype,"app.WorshipItem")}(app||(app={}));var app;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._actID=5,i.lastIdx=0,i.sexjobArr=["1","2","3","1001","1002","1003"],i.itemTitleArr=["kf_mb_dynz","kf_mb_dynf","kf_mb_dynd","kf_mb_dyvz","kf_mb_dyvf","kf_mb_dyvd"],i.skinName="WorshipWinSkin",i.name="WorshipWin",i.setPostData(t.UIOpenViewMode.OPENVIEW_CENTER),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.dragDropUI.setParent(this),this.touchEnabled=!1,this.dragDropUI.setTitle(t.LanguageUtils.language_System53)},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e[0]&&(this._actID=e[0]);for(var n=t.GlobalConfig.WorshipMainConfig,s=0;6>s;s++)this["item"+s].initData(this.sexjobArr[s],this.itemTitleArr[s],n[s+1],this.onClick.bind(this));this.observe(t.OtherMgr.ins().post_26_65,this.setPlayTitle),this.observe(t.ActvityMgr.ins().postWroshipResult,this.worShipResult),this.observe(t.ActvityMgr.ins().post_25_3,this.setRankListData),this.observe(t.ActvityMgr.ins().post_25_4,this.setRankListData),this.observe(t.OtherMgr.ins().post_26_46,this.otherPlayerView),t.OtherMgr.ins().send_26_65(t.RankDetailType.rtMoBaiRankList,100),t.ActvityMgr.ins().send_25_2(this._actID),this.setRankListData()},i.prototype.setPlayTitle=function(e){if(e&&e.type==t.RankDetailType.rtMoBaiRankList){var i=e.list;if(i)for(var n in i){var s=i[n],a=0;+s.sexjob>1e3?a=3+(+s.sexjob%1e3-1):a+=+s.sexjob-1,this["item"+a].data=s}}},i.prototype.setRankListData=function(){var e=t.ActvityMgr.ins().getActivityInfo(this._actID);if(e&&e.info&&e.info.times>=0)for(var i=0;6>i;i++)this["item"+i].updateTimes(e.info.times)},i.prototype.onClick=function(e,i){if("check"==e)t.OtherMgr.ins().send_26_46(t.RankDetailType.rtMoBaiRankList,i);else if("worship"==e){var n=this["item"+this.lastIdx];n&&(n.worship.touchEnabled=!0),t.ActvityMgr.ins().send_25_1(this._actID,t.Operate.cWorship,i)}},i.prototype.worShipResult=function(e){var i=this;if(e&&0==e.issure){this.lastIdx=e.idx-1;var n=this["item"+this.lastIdx];n.worship.touchEnabled=!1,t.ActvityMgr.ins().send_25_2(this._actID),this.selectMC||(this.selectMC=new t.MovieClip),this.selectMC.stop(),this.selectMC.visible=!0,n.playEff.addChild(this.selectMC),this.selectMC.playFileEff(ResDirEnum.RES_DIR_WORSHIP+"Worship_select",1,function(){i.selectMC.visible=!1,n.worship.touchEnabled=!0},!1),t.DefaultMgr.ins().payResultMC(1,this.localToGlobal(this.width/2,this.height/2))}},i.prototype.otherPlayerView=function(e){if(0!=e){if(t.ViewManager.ins().isShow(t.OtherPlayerView))return;t.EquipItemMgr.ins().sendQueryOthersEquips(e)}else t.UserTips.ins().showUITips(t.LanguageUtils.language_Tips57)},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.dragDropUI.destroy(),this.dragDropUI=null,this.selectMC&&this.selectMC.destroy(),this.selectMC=null},i}(t.BaseEuiView);t.WorshipWin=e,__reflect(e.prototype,"app.WorshipWin"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));var app;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._selectJob=1,t._selectSex=0,t.skinName="ZhuanZhiSkin",t}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.job1.selected.source="login_zs_1",this.job2.selected.source="login_fs_1",this.job3.selected.source="login_ds_1",this.boy.selected.source="login_nan_1",this.girl.selected.source="login_nv_1",this.label2.text=t.GlobalConfig.TransferConfig.tips2,this.strList.itemRenderer=t.ResonateItem2Render},i.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.job1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.job2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.job3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.boy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.girl.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn_operation.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);var n=t.GlobalConfig.TransferConfig.tips1.split(",");this.strList.dataProvider=new eui.ArrayCollection(n);var s=t.EntityMgr.ins().getPayer;this._selectJob=s.propSet.getAP_JOB(),this._selectSex=s.propSet.getSex(),this.updateRole();var a=t.DefaultMgr.ins().zhuanZhiCD-Math.floor(t.GlobalData.serverTime/1e3);if(a>0){var r=t.DateUtils.getFormatBySecond(a,t.DateUtils.TIME_FORMAT_5);this.cdTime.textFlow=t.TextFlowMaker.generateTextFlow(t.StringUtils.replace(t.LanguageUtils.language_Common_190,r)),this.cdTime.visible=!0}else this.cdTime.visible=!1},Object.defineProperty(i.prototype,"selectJob",{set:function(t){this._selectJob=t,this.updateRole()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectSex",{set:function(t){this._selectSex=t,this.updateRole()},enumerable:!0,configurable:!0}),i.prototype.curJob=function(){return this._selectJob},i.prototype.curSex=function(){return this._selectSex},i.prototype.updateRole=function(){for(var e=this.curJob(),i=this.curSex(),n=1;3>=n;n++)this["job"+n].currentState="up";this["job"+e].currentState="selected",this.jobIntroduce.text=t.LanguageUtils.language_Common_55[e-1],0==i?(this.boy.currentState="selected",this.girl.currentState="up"):(this.girl.currentState="selected",this.boy.currentState="up")},i.prototype.onClick=function(e){switch(e.currentTarget){case this.boy:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),this.selectSex=0;break;case this.closeBtn:t.ViewManager.ins().close(this);break;case this.btn_operation:var i=t.EntityMgr.ins().getPayer;if(this._selectJob==i.propSet.getAP_JOB()&&this._selectSex==i.propSet.getSex())t.UserTips.ins().showUITips(t.LanguageUtils.language_Common_187);else{var n=this._selectJob,s=this._selectSex,a=this._selectSex?"女性":"男性",r=t.AttributeData.job[n],o=t.StringUtils.replace(t.LanguageUtils.language_Common_189,a,r)+t.GlobalConfig.TransferConfig.tips3;t.CautionView.show(o,function(){t.DefaultMgr.ins().send_0_28(n,s)},this)}break;case this.girl:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),this.selectSex=1;break;case this.job1:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),this.selectJob=1;break;case this.job2:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),this.selectJob=2;break;case this.job3:t.SoundManager.ins().createPlayEffect(t.SoundUtil.VIEW_LEVEL),this.selectJob=3}},i.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.$onClose(),this.job1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.job2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.job3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.boy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.girl.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn_operation.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i}(t.BaseEuiView);t.ZhuanZhiView=e,__reflect(e.prototype,"app.ZhuanZhiView"),t.ViewManager.ins().reg(e,t.LayerManager.UI_Main)}(app||(app={}));